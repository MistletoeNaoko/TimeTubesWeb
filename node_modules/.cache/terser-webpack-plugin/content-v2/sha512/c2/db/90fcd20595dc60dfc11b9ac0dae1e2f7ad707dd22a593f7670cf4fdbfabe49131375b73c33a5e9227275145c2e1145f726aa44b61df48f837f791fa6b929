{"code":"!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"/\",n(n.s=103)}([function(t,e,n){\"use strict\";t.exports=n(104)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ReactCSS=e.loop=e.handleActive=e.handleHover=e.hover=void 0;var r=l(n(122)),i=l(n(193)),a=l(n(213)),o=l(n(214)),s=l(n(215)),u=l(n(216));function l(t){return t&&t.__esModule?t:{default:t}}e.hover=o.default,e.handleHover=o.default,e.handleActive=s.default,e.loop=u.default;var c=e.ReactCSS=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var s=(0,r.default)(n),u=(0,i.default)(t,s);return(0,a.default)(u)};e.default=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(217);Object.defineProperty(e,\"Alpha\",{enumerable:!0,get:function(){return h(r).default}});var i=n(55);Object.defineProperty(e,\"Checkboard\",{enumerable:!0,get:function(){return h(i).default}});var a=n(220);Object.defineProperty(e,\"EditableInput\",{enumerable:!0,get:function(){return h(a).default}});var o=n(221);Object.defineProperty(e,\"Hue\",{enumerable:!0,get:function(){return h(o).default}});var s=n(223);Object.defineProperty(e,\"Raised\",{enumerable:!0,get:function(){return h(s).default}});var u=n(239);Object.defineProperty(e,\"Saturation\",{enumerable:!0,get:function(){return h(u).default}});var l=n(94);Object.defineProperty(e,\"ColorWrap\",{enumerable:!0,get:function(){return h(l).default}});var c=n(247);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"Swatch\",{enumerable:!0,get:function(){return h(c).default}})},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(21),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(8)),n(11)),s=(r=o)&&r.__esModule?r:{default:r};var u=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.data=[],t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:\"handleActions\",value:function(t){switch(t.type){case\"UPLOAD_DATA\":this.uploadData(t.data);break;case\"UPDATE_DETAIL\":this.emit(\"updateDetail\",t.id,t.zpos)}}},{key:\"uploadData\",value:function(t){var e=this.data.length;this.data.push({id:e,name:t.name,data:t}),this.emit(\"upload\",e),this.emit(\"showInitSP\",e)}},{key:\"getAllData\",value:function(){return this.data}},{key:\"getAllFileNames\",value:function(){for(var t=[],e=0;e<this.data.length;e++)t.push(this.data[e].name);return t}},{key:\"getAllIdsFileNames\",value:function(){for(var t=[],e=0;e<this.data.length;e++)t.push({id:this.data[e].id,name:this.data[e].name});return t}},{key:\"getData\",value:function(t){return this.data[t]}},{key:\"getDataArray\",value:function(t,e){var n={};for(var r in this.data[t].data.lookup)n[r]=[];for(var i=this.data[t].data.meta.min.z,a=Math.ceil(this.data[t].data.meta.min.z),o=Math.floor(this.data[t].data.meta.max.z),s=a;s<=o;s+=e){var u=this.getValues(t,s-i);for(var l in u)n[l].push(u[l]);n.z[n.z.length-1]=s}return n.arrayLength=o-a+1,n}},{key:\"getDataNum\",value:function(){return this.data.length}},{key:\"getTailID\",value:function(){return this.data[this.data.length-1].id||0}},{key:\"getFileName\",value:function(t){return this.data[t].name||\"\"}},{key:\"getValues\",value:function(t,e){if(t<0)return{};var n=e+this.data[t].data.meta.min.z,r=void 0;for(r=1;r<this.data[t].data.position.length&&!(this.data[t].data.position[r-1].z<=n&&n<this.data[t].data.position[r].z);r++);var i=void 0;i=n===this.data[t].data.meta.min.z||r<0?0:n===this.data[t].data.position[this.data[t].data.position.length-1].z||r>this.data[t].data.position.length-1?1:(r-1+(n-this.data[t].data.position[r-1].z)/(this.data[t].data.position[r].z-this.data[t].data.position[r-1].z))/(this.data[t].data.position.length-1);var a=void 0;for(a=1;a<this.data[t].data.color.length&&!(this.data[t].data.color[a-1].z<=n&&n<this.data[t].data.color[a].z);a++);var o=void 0;o=a>=this.data[t].data.color.length-1?1:(a-1+(n-this.data[t].data.color[a-1].z)/(this.data[t].data.color[a].z-this.data[t].data.color[a-1].z))/(this.data[t].data.color.length-1);var s=this.data[t].data.splines.position.getPoint(i),u=this.data[t].data.splines.radius.getPoint(i),l=this.data[t].data.splines.color.getPoint(o);return{z:s.z,x:s.x,r_x:u.x,y:s.y,r_y:u.y,V:l.y,H:l.x}}},{key:\"getIdFromName\",value:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].name===t)return e;return-1}}]),e}(a.EventEmitter));s.default.register(u.handleActions.bind(u)),e.default=u},function(t,e,n){t.exports=n(224)()},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(226),i=n(230)((function(t,e,n){r(t,e,n)}));t.exports=i},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&(\"object\"==e||\"function\"==e)}},function(t,e,n){\"use strict\";function r(){}n.r(e),n.d(e,\"ACESFilmicToneMapping\",(function(){return lt})),n.d(e,\"AddEquation\",(function(){return O})),n.d(e,\"AddOperation\",(function(){return rt})),n.d(e,\"AdditiveBlending\",(function(){return C})),n.d(e,\"AlphaFormat\",(function(){return Ht})),n.d(e,\"AlwaysDepth\",(function(){return Y})),n.d(e,\"AlwaysStencilFunc\",(function(){return sn})),n.d(e,\"AmbientLight\",(function(){return Oc})),n.d(e,\"AmbientLightProbe\",(function(){return th})),n.d(e,\"AnimationClip\",(function(){return Bl})),n.d(e,\"AnimationLoader\",(function(){return ql})),n.d(e,\"AnimationMixer\",(function(){return Ah})),n.d(e,\"AnimationObjectGroup\",(function(){return Ph})),n.d(e,\"AnimationUtils\",(function(){return Ml})),n.d(e,\"ArcCurve\",(function(){return tc})),n.d(e,\"ArrayCamera\",(function(){return Jo})),n.d(e,\"ArrowHelper\",(function(){return Of})),n.d(e,\"Audio\",(function(){return ch})),n.d(e,\"AudioAnalyser\",(function(){return gh})),n.d(e,\"AudioContext\",(function(){return Qc})),n.d(e,\"AudioListener\",(function(){return lh})),n.d(e,\"AudioLoader\",(function(){return Zc})),n.d(e,\"AxesHelper\",(function(){return Lf})),n.d(e,\"AxisHelper\",(function(){return id})),n.d(e,\"BackSide\",(function(){return y})),n.d(e,\"BasicDepthPacking\",(function(){return Ue})),n.d(e,\"BasicShadowMap\",(function(){return d})),n.d(e,\"BinaryTextureLoader\",(function(){return ld})),n.d(e,\"Bone\",(function(){return Ls})),n.d(e,\"BooleanKeyframeTrack\",(function(){return Ol})),n.d(e,\"BoundingBoxHelper\",(function(){return ad})),n.d(e,\"Box2\",(function(){return Fh})),n.d(e,\"Box3\",(function(){return cr})),n.d(e,\"Box3Helper\",(function(){return Tf})),n.d(e,\"BoxBufferGeometry\",(function(){return Di})),n.d(e,\"BoxGeometry\",(function(){return Ri})),n.d(e,\"BoxHelper\",(function(){return Mf})),n.d(e,\"BufferAttribute\",(function(){return Gr})),n.d(e,\"BufferGeometry\",(function(){return li})),n.d(e,\"BufferGeometryLoader\",(function(){return zc})),n.d(e,\"ByteType\",(function(){return Lt})),n.d(e,\"Cache\",(function(){return jl})),n.d(e,\"Camera\",(function(){return Hi})),n.d(e,\"CameraHelper\",(function(){return wf})),n.d(e,\"CanvasRenderer\",(function(){return hd})),n.d(e,\"CanvasTexture\",(function(){return Ks})),n.d(e,\"CatmullRomCurve3\",(function(){return oc})),n.d(e,\"CineonToneMapping\",(function(){return ut})),n.d(e,\"CircleBufferGeometry\",(function(){return fl})),n.d(e,\"CircleGeometry\",(function(){return hl})),n.d(e,\"ClampToEdgeWrapping\",(function(){return bt})),n.d(e,\"Clock\",(function(){return ih})),n.d(e,\"ClosedSplineCurve3\",(function(){return ed})),n.d(e,\"Color\",(function(){return Dr})),n.d(e,\"ColorKeyframeTrack\",(function(){return Ll})),n.d(e,\"CompressedTexture\",(function(){return Js})),n.d(e,\"CompressedTextureLoader\",(function(){return Xl})),n.d(e,\"ConeBufferGeometry\",(function(){return cl})),n.d(e,\"ConeGeometry\",(function(){return ll})),n.d(e,\"CubeCamera\",(function(){return Xi})),n.d(e,\"CubeGeometry\",(function(){return Ri})),n.d(e,\"CubeReflectionMapping\",(function(){return ht})),n.d(e,\"CubeRefractionMapping\",(function(){return ft})),n.d(e,\"CubeTexture\",(function(){return xa})),n.d(e,\"CubeTextureLoader\",(function(){return Zl})),n.d(e,\"CubeUVReflectionMapping\",(function(){return gt})),n.d(e,\"CubeUVRefractionMapping\",(function(){return vt})),n.d(e,\"CubicBezierCurve\",(function(){return cc})),n.d(e,\"CubicBezierCurve3\",(function(){return hc})),n.d(e,\"CubicInterpolant\",(function(){return Cl})),n.d(e,\"CullFaceBack\",(function(){return u})),n.d(e,\"CullFaceFront\",(function(){return l})),n.d(e,\"CullFaceFrontBack\",(function(){return c})),n.d(e,\"CullFaceNone\",(function(){return s})),n.d(e,\"Curve\",(function(){return Jl})),n.d(e,\"CurvePath\",(function(){return yc})),n.d(e,\"CustomBlending\",(function(){return A})),n.d(e,\"CylinderBufferGeometry\",(function(){return ul})),n.d(e,\"CylinderGeometry\",(function(){return sl})),n.d(e,\"Cylindrical\",(function(){return zh})),n.d(e,\"DataTexture\",(function(){return Qi})),n.d(e,\"DataTexture2DArray\",(function(){return wa})),n.d(e,\"DataTexture3D\",(function(){return Sa})),n.d(e,\"DataTextureLoader\",(function(){return Yl})),n.d(e,\"DecrementStencilOp\",(function(){return Qe})),n.d(e,\"DecrementWrapStencilOp\",(function(){return $e})),n.d(e,\"DefaultLoadingManager\",(function(){return Vl})),n.d(e,\"DepthFormat\",(function(){return Qt})),n.d(e,\"DepthStencilFormat\",(function(){return Zt})),n.d(e,\"DepthTexture\",(function(){return tu})),n.d(e,\"DirectionalLight\",(function(){return Ac})),n.d(e,\"DirectionalLightHelper\",(function(){return bf})),n.d(e,\"DirectionalLightShadow\",(function(){return kc})),n.d(e,\"DiscreteInterpolant\",(function(){return kl})),n.d(e,\"DodecahedronBufferGeometry\",(function(){return du})),n.d(e,\"DodecahedronGeometry\",(function(){return fu})),n.d(e,\"DoubleSide\",(function(){return b})),n.d(e,\"DstAlphaFactor\",(function(){return V})),n.d(e,\"DstColorFactor\",(function(){return G})),n.d(e,\"DynamicBufferAttribute\",(function(){return Wf})),n.d(e,\"EdgesGeometry\",(function(){return ol})),n.d(e,\"EdgesHelper\",(function(){return od})),n.d(e,\"EllipseCurve\",(function(){return Kl})),n.d(e,\"EqualDepth\",(function(){return $})),n.d(e,\"EqualStencilFunc\",(function(){return en})),n.d(e,\"EquirectangularReflectionMapping\",(function(){return dt})),n.d(e,\"EquirectangularRefractionMapping\",(function(){return pt})),n.d(e,\"Euler\",(function(){return Rn})),n.d(e,\"EventDispatcher\",(function(){return r})),n.d(e,\"ExtrudeBufferGeometry\",(function(){return qu})),n.d(e,\"ExtrudeGeometry\",(function(){return Wu})),n.d(e,\"Face3\",(function(){return jr})),n.d(e,\"Face4\",(function(){return If})),n.d(e,\"FaceColors\",(function(){return S})),n.d(e,\"FaceNormalsHelper\",(function(){return mf})),n.d(e,\"FileLoader\",(function(){return Wl})),n.d(e,\"FlatShading\",(function(){return _})),n.d(e,\"Float32Attribute\",(function(){return Kf})),n.d(e,\"Float32BufferAttribute\",(function(){return Jr})),n.d(e,\"Float64Attribute\",(function(){return td})),n.d(e,\"Float64BufferAttribute\",(function(){return Kr})),n.d(e,\"FloatType\",(function(){return zt})),n.d(e,\"Fog\",(function(){return ss})),n.d(e,\"FogExp2\",(function(){return os})),n.d(e,\"Font\",(function(){return qc})),n.d(e,\"FontLoader\",(function(){return Yc})),n.d(e,\"FrontFaceDirectionCCW\",(function(){return f})),n.d(e,\"FrontFaceDirectionCW\",(function(){return h})),n.d(e,\"FrontSide\",(function(){return v})),n.d(e,\"Frustum\",(function(){return na})),n.d(e,\"GammaEncoding\",(function(){return Re})),n.d(e,\"Geometry\",(function(){return Ni})),n.d(e,\"GeometryUtils\",(function(){return cd})),n.d(e,\"GreaterDepth\",(function(){return K})),n.d(e,\"GreaterEqualDepth\",(function(){return J})),n.d(e,\"GreaterEqualStencilFunc\",(function(){return on})),n.d(e,\"GreaterStencilFunc\",(function(){return rn})),n.d(e,\"GridHelper\",(function(){return lf})),n.d(e,\"Group\",(function(){return $o})),n.d(e,\"HalfFloatType\",(function(){return Bt})),n.d(e,\"HemisphereLight\",(function(){return wc})),n.d(e,\"HemisphereLightHelper\",(function(){return sf})),n.d(e,\"HemisphereLightProbe\",(function(){return Kc})),n.d(e,\"IcosahedronBufferGeometry\",(function(){return hu})),n.d(e,\"IcosahedronGeometry\",(function(){return cu})),n.d(e,\"ImageBitmapLoader\",(function(){return Gc})),n.d(e,\"ImageLoader\",(function(){return Ql})),n.d(e,\"ImageUtils\",(function(){return bn})),n.d(e,\"ImmediateRenderObject\",(function(){return Hh})),n.d(e,\"IncrementStencilOp\",(function(){return Ye})),n.d(e,\"IncrementWrapStencilOp\",(function(){return Ze})),n.d(e,\"InstancedBufferAttribute\",(function(){return Dc})),n.d(e,\"InstancedBufferGeometry\",(function(){return Rc})),n.d(e,\"InstancedInterleavedBuffer\",(function(){return Lh})),n.d(e,\"Int16Attribute\",(function(){return Qf})),n.d(e,\"Int16BufferAttribute\",(function(){return Yr})),n.d(e,\"Int32Attribute\",(function(){return $f})),n.d(e,\"Int32BufferAttribute\",(function(){return Zr})),n.d(e,\"Int8Attribute\",(function(){return qf})),n.d(e,\"Int8BufferAttribute\",(function(){return Wr})),n.d(e,\"IntType\",(function(){return Rt})),n.d(e,\"InterleavedBuffer\",(function(){return us})),n.d(e,\"InterleavedBufferAttribute\",(function(){return ls})),n.d(e,\"Interpolant\",(function(){return Tl})),n.d(e,\"InterpolateDiscrete\",(function(){return Ee})),n.d(e,\"InterpolateLinear\",(function(){return Me})),n.d(e,\"InterpolateSmooth\",(function(){return Te})),n.d(e,\"InvertStencilOp\",(function(){return Je})),n.d(e,\"JSONLoader\",(function(){return fd})),n.d(e,\"KeepStencilOp\",(function(){return qe})),n.d(e,\"KeyframeTrack\",(function(){return Al})),n.d(e,\"LOD\",(function(){return Cs})),n.d(e,\"LatheBufferGeometry\",(function(){return nl})),n.d(e,\"LatheGeometry\",(function(){return el})),n.d(e,\"Layers\",(function(){return Dn})),n.d(e,\"LensFlare\",(function(){return pd})),n.d(e,\"LessDepth\",(function(){return Q})),n.d(e,\"LessEqualDepth\",(function(){return Z})),n.d(e,\"LessEqualStencilFunc\",(function(){return nn})),n.d(e,\"LessStencilFunc\",(function(){return tn})),n.d(e,\"Light\",(function(){return xc})),n.d(e,\"LightProbe\",(function(){return Jc})),n.d(e,\"LightProbeHelper\",(function(){return uf})),n.d(e,\"LightShadow\",(function(){return Sc})),n.d(e,\"Line\",(function(){return Fs})),n.d(e,\"Line3\",(function(){return Vh})),n.d(e,\"LineBasicMaterial\",(function(){return Is})),n.d(e,\"LineCurve\",(function(){return fc})),n.d(e,\"LineCurve3\",(function(){return dc})),n.d(e,\"LineDashedMaterial\",(function(){return Sl})),n.d(e,\"LineLoop\",(function(){return Hs})),n.d(e,\"LinePieces\",(function(){return Rf})),n.d(e,\"LineSegments\",(function(){return Vs})),n.d(e,\"LineStrip\",(function(){return Nf})),n.d(e,\"LinearEncoding\",(function(){return Ie})),n.d(e,\"LinearFilter\",(function(){return Tt})),n.d(e,\"LinearInterpolant\",(function(){return Pl})),n.d(e,\"LinearMipMapLinearFilter\",(function(){return At})),n.d(e,\"LinearMipMapNearestFilter\",(function(){return Pt})),n.d(e,\"LinearMipmapLinearFilter\",(function(){return kt})),n.d(e,\"LinearMipmapNearestFilter\",(function(){return Ct})),n.d(e,\"LinearToneMapping\",(function(){return at})),n.d(e,\"Loader\",(function(){return Hl})),n.d(e,\"LoaderUtils\",(function(){return Nc})),n.d(e,\"LoadingManager\",(function(){return Ul})),n.d(e,\"LogLuvEncoding\",(function(){return ze})),n.d(e,\"LoopOnce\",(function(){return xe})),n.d(e,\"LoopPingPong\",(function(){return Se})),n.d(e,\"LoopRepeat\",(function(){return we})),n.d(e,\"LuminanceAlphaFormat\",(function(){return Xt})),n.d(e,\"LuminanceFormat\",(function(){return qt})),n.d(e,\"MOUSE\",(function(){return a})),n.d(e,\"Material\",(function(){return Vr})),n.d(e,\"MaterialLoader\",(function(){return Ic})),n.d(e,\"Math\",(function(){return cn})),n.d(e,\"Matrix3\",(function(){return yn})),n.d(e,\"Matrix4\",(function(){return Ln})),n.d(e,\"MaxEquation\",(function(){return R})),n.d(e,\"Mesh\",(function(){return Ci})),n.d(e,\"MeshBasicMaterial\",(function(){return Hr})),n.d(e,\"MeshDepthMaterial\",(function(){return Ho})),n.d(e,\"MeshDistanceMaterial\",(function(){return Go})),n.d(e,\"MeshFaceMaterial\",(function(){return Df})),n.d(e,\"MeshLambertMaterial\",(function(){return xl})),n.d(e,\"MeshMatcapMaterial\",(function(){return wl})),n.d(e,\"MeshNormalMaterial\",(function(){return _l})),n.d(e,\"MeshPhongMaterial\",(function(){return yl})),n.d(e,\"MeshPhysicalMaterial\",(function(){return vl})),n.d(e,\"MeshStandardMaterial\",(function(){return gl})),n.d(e,\"MeshToonMaterial\",(function(){return bl})),n.d(e,\"MinEquation\",(function(){return N})),n.d(e,\"MirroredRepeatWrapping\",(function(){return _t})),n.d(e,\"MixOperation\",(function(){return nt})),n.d(e,\"MultiMaterial\",(function(){return zf})),n.d(e,\"MultiplyBlending\",(function(){return k})),n.d(e,\"MultiplyOperation\",(function(){return et})),n.d(e,\"NearestFilter\",(function(){return xt})),n.d(e,\"NearestMipMapLinearFilter\",(function(){return Mt})),n.d(e,\"NearestMipMapNearestFilter\",(function(){return St})),n.d(e,\"NearestMipmapLinearFilter\",(function(){return Et})),n.d(e,\"NearestMipmapNearestFilter\",(function(){return wt})),n.d(e,\"NeverDepth\",(function(){return X})),n.d(e,\"NeverStencilFunc\",(function(){return Ke})),n.d(e,\"NoBlending\",(function(){return M})),n.d(e,\"NoColors\",(function(){return w})),n.d(e,\"NoToneMapping\",(function(){return it})),n.d(e,\"NormalBlending\",(function(){return T})),n.d(e,\"NotEqualDepth\",(function(){return tt})),n.d(e,\"NotEqualStencilFunc\",(function(){return an})),n.d(e,\"NumberKeyframeTrack\",(function(){return Il})),n.d(e,\"Object3D\",(function(){return Zn})),n.d(e,\"ObjectLoader\",(function(){return Fc})),n.d(e,\"ObjectSpaceNormalMap\",(function(){return Ge})),n.d(e,\"OctahedronBufferGeometry\",(function(){return lu})),n.d(e,\"OctahedronGeometry\",(function(){return uu})),n.d(e,\"OneFactor\",(function(){return z})),n.d(e,\"OneMinusDstAlphaFactor\",(function(){return H})),n.d(e,\"OneMinusDstColorFactor\",(function(){return W})),n.d(e,\"OneMinusSrcAlphaFactor\",(function(){return U})),n.d(e,\"OneMinusSrcColorFactor\",(function(){return F})),n.d(e,\"OrthographicCamera\",(function(){return Pc})),n.d(e,\"PCFShadowMap\",(function(){return p})),n.d(e,\"PCFSoftShadowMap\",(function(){return m})),n.d(e,\"ParametricBufferGeometry\",(function(){return ru})),n.d(e,\"ParametricGeometry\",(function(){return nu})),n.d(e,\"Particle\",(function(){return Ff})),n.d(e,\"ParticleBasicMaterial\",(function(){return Vf})),n.d(e,\"ParticleSystem\",(function(){return jf})),n.d(e,\"ParticleSystemMaterial\",(function(){return Hf})),n.d(e,\"Path\",(function(){return bc})),n.d(e,\"PerspectiveCamera\",(function(){return Gi})),n.d(e,\"Plane\",(function(){return Ki})),n.d(e,\"PlaneBufferGeometry\",(function(){return la})),n.d(e,\"PlaneGeometry\",(function(){return ua})),n.d(e,\"PlaneHelper\",(function(){return Cf})),n.d(e,\"PointCloud\",(function(){return Bf})),n.d(e,\"PointCloudMaterial\",(function(){return Uf})),n.d(e,\"PointLight\",(function(){return Cc})),n.d(e,\"PointLightHelper\",(function(){return ef})),n.d(e,\"Points\",(function(){return Qs})),n.d(e,\"PointsMaterial\",(function(){return Gs})),n.d(e,\"PolarGridHelper\",(function(){return cf})),n.d(e,\"PolyhedronBufferGeometry\",(function(){return au})),n.d(e,\"PolyhedronGeometry\",(function(){return iu})),n.d(e,\"PositionalAudio\",(function(){return mh})),n.d(e,\"PositionalAudioHelper\",(function(){return hf})),n.d(e,\"PropertyBinding\",(function(){return Ch})),n.d(e,\"PropertyMixer\",(function(){return vh})),n.d(e,\"QuadraticBezierCurve\",(function(){return pc})),n.d(e,\"QuadraticBezierCurve3\",(function(){return mc})),n.d(e,\"Quaternion\",(function(){return fn})),n.d(e,\"QuaternionKeyframeTrack\",(function(){return Rl})),n.d(e,\"QuaternionLinearInterpolant\",(function(){return Nl})),n.d(e,\"REVISION\",(function(){return i})),n.d(e,\"RGBADepthPacking\",(function(){return Ve})),n.d(e,\"RGBAFormat\",(function(){return Wt})),n.d(e,\"RGBA_ASTC_10x10_Format\",(function(){return ye})),n.d(e,\"RGBA_ASTC_10x5_Format\",(function(){return me})),n.d(e,\"RGBA_ASTC_10x6_Format\",(function(){return ge})),n.d(e,\"RGBA_ASTC_10x8_Format\",(function(){return ve})),n.d(e,\"RGBA_ASTC_12x10_Format\",(function(){return be})),n.d(e,\"RGBA_ASTC_12x12_Format\",(function(){return _e})),n.d(e,\"RGBA_ASTC_4x4_Format\",(function(){return se})),n.d(e,\"RGBA_ASTC_5x4_Format\",(function(){return ue})),n.d(e,\"RGBA_ASTC_5x5_Format\",(function(){return le})),n.d(e,\"RGBA_ASTC_6x5_Format\",(function(){return ce})),n.d(e,\"RGBA_ASTC_6x6_Format\",(function(){return he})),n.d(e,\"RGBA_ASTC_8x5_Format\",(function(){return fe})),n.d(e,\"RGBA_ASTC_8x6_Format\",(function(){return de})),n.d(e,\"RGBA_ASTC_8x8_Format\",(function(){return pe})),n.d(e,\"RGBA_PVRTC_2BPPV1_Format\",(function(){return ae})),n.d(e,\"RGBA_PVRTC_4BPPV1_Format\",(function(){return ie})),n.d(e,\"RGBA_S3TC_DXT1_Format\",(function(){return Kt})),n.d(e,\"RGBA_S3TC_DXT3_Format\",(function(){return te})),n.d(e,\"RGBA_S3TC_DXT5_Format\",(function(){return ee})),n.d(e,\"RGBDEncoding\",(function(){return je})),n.d(e,\"RGBEEncoding\",(function(){return De})),n.d(e,\"RGBEFormat\",(function(){return Yt})),n.d(e,\"RGBFormat\",(function(){return Gt})),n.d(e,\"RGBM16Encoding\",(function(){return Fe})),n.d(e,\"RGBM7Encoding\",(function(){return Be})),n.d(e,\"RGB_ETC1_Format\",(function(){return oe})),n.d(e,\"RGB_PVRTC_2BPPV1_Format\",(function(){return re})),n.d(e,\"RGB_PVRTC_4BPPV1_Format\",(function(){return ne})),n.d(e,\"RGB_S3TC_DXT1_Format\",(function(){return Jt})),n.d(e,\"RawShaderMaterial\",(function(){return ml})),n.d(e,\"Ray\",(function(){return xr})),n.d(e,\"Raycaster\",(function(){return Ih})),n.d(e,\"RectAreaLight\",(function(){return Lc})),n.d(e,\"RectAreaLightHelper\",(function(){return nf})),n.d(e,\"RedFormat\",(function(){return $t})),n.d(e,\"ReinhardToneMapping\",(function(){return ot})),n.d(e,\"RepeatWrapping\",(function(){return yt})),n.d(e,\"ReplaceStencilOp\",(function(){return Xe})),n.d(e,\"ReverseSubtractEquation\",(function(){return I})),n.d(e,\"RingBufferGeometry\",(function(){return tl})),n.d(e,\"RingGeometry\",(function(){return Ku})),n.d(e,\"Scene\",(function(){return $n})),n.d(e,\"SceneUtils\",(function(){return dd})),n.d(e,\"ShaderChunk\",(function(){return ra})),n.d(e,\"ShaderLib\",(function(){return aa})),n.d(e,\"ShaderMaterial\",(function(){return Vi})),n.d(e,\"ShadowMaterial\",(function(){return pl})),n.d(e,\"Shape\",(function(){return _c})),n.d(e,\"ShapeBufferGeometry\",(function(){return il})),n.d(e,\"ShapeGeometry\",(function(){return rl})),n.d(e,\"ShapePath\",(function(){return Wc})),n.d(e,\"ShapeUtils\",(function(){return Vu})),n.d(e,\"ShortType\",(function(){return It})),n.d(e,\"Skeleton\",(function(){return Os})),n.d(e,\"SkeletonHelper\",(function(){return tf})),n.d(e,\"SkinnedMesh\",(function(){return Ps})),n.d(e,\"SmoothShading\",(function(){return x})),n.d(e,\"Sphere\",(function(){return dr})),n.d(e,\"SphereBufferGeometry\",(function(){return Ju})),n.d(e,\"SphereGeometry\",(function(){return $u})),n.d(e,\"Spherical\",(function(){return Dh})),n.d(e,\"SphericalHarmonics3\",(function(){return $c})),n.d(e,\"SphericalReflectionMapping\",(function(){return mt})),n.d(e,\"Spline\",(function(){return rd})),n.d(e,\"SplineCurve\",(function(){return gc})),n.d(e,\"SplineCurve3\",(function(){return nd})),n.d(e,\"SpotLight\",(function(){return Mc})),n.d(e,\"SpotLightHelper\",(function(){return Zh})),n.d(e,\"SpotLightShadow\",(function(){return Ec})),n.d(e,\"Sprite\",(function(){return Ss})),n.d(e,\"SpriteMaterial\",(function(){return cs})),n.d(e,\"SrcAlphaFactor\",(function(){return j})),n.d(e,\"SrcAlphaSaturateFactor\",(function(){return q})),n.d(e,\"SrcColorFactor\",(function(){return B})),n.d(e,\"StereoCamera\",(function(){return rh})),n.d(e,\"StringKeyframeTrack\",(function(){return Dl})),n.d(e,\"SubtractEquation\",(function(){return L})),n.d(e,\"SubtractiveBlending\",(function(){return P})),n.d(e,\"TOUCH\",(function(){return o})),n.d(e,\"TangentSpaceNormalMap\",(function(){return He})),n.d(e,\"TetrahedronBufferGeometry\",(function(){return su})),n.d(e,\"TetrahedronGeometry\",(function(){return ou})),n.d(e,\"TextBufferGeometry\",(function(){return Zu})),n.d(e,\"TextGeometry\",(function(){return Qu})),n.d(e,\"Texture\",(function(){return xn})),n.d(e,\"TextureLoader\",(function(){return $l})),n.d(e,\"TorusBufferGeometry\",(function(){return bu})),n.d(e,\"TorusGeometry\",(function(){return yu})),n.d(e,\"TorusKnotBufferGeometry\",(function(){return vu})),n.d(e,\"TorusKnotGeometry\",(function(){return gu})),n.d(e,\"Triangle\",(function(){return Lr})),n.d(e,\"TriangleFanDrawMode\",(function(){return Le})),n.d(e,\"TriangleStripDrawMode\",(function(){return Oe})),n.d(e,\"TrianglesDrawMode\",(function(){return Ae})),n.d(e,\"TubeBufferGeometry\",(function(){return mu})),n.d(e,\"TubeGeometry\",(function(){return pu})),n.d(e,\"UVMapping\",(function(){return ct})),n.d(e,\"Uint16Attribute\",(function(){return Zf})),n.d(e,\"Uint16BufferAttribute\",(function(){return Qr})),n.d(e,\"Uint32Attribute\",(function(){return Jf})),n.d(e,\"Uint32BufferAttribute\",(function(){return $r})),n.d(e,\"Uint8Attribute\",(function(){return Xf})),n.d(e,\"Uint8BufferAttribute\",(function(){return qr})),n.d(e,\"Uint8ClampedAttribute\",(function(){return Yf})),n.d(e,\"Uint8ClampedBufferAttribute\",(function(){return Xr})),n.d(e,\"Uncharted2ToneMapping\",(function(){return st})),n.d(e,\"Uniform\",(function(){return Oh})),n.d(e,\"UniformsLib\",(function(){return ia})),n.d(e,\"UniformsUtils\",(function(){return Fi})),n.d(e,\"UnsignedByteType\",(function(){return Ot})),n.d(e,\"UnsignedInt248Type\",(function(){return Vt})),n.d(e,\"UnsignedIntType\",(function(){return Dt})),n.d(e,\"UnsignedShort4444Type\",(function(){return Ft})),n.d(e,\"UnsignedShort5551Type\",(function(){return jt})),n.d(e,\"UnsignedShort565Type\",(function(){return Ut})),n.d(e,\"UnsignedShortType\",(function(){return Nt})),n.d(e,\"VSMShadowMap\",(function(){return g})),n.d(e,\"Vector2\",(function(){return hn})),n.d(e,\"Vector3\",(function(){return mn})),n.d(e,\"Vector4\",(function(){return wn})),n.d(e,\"VectorKeyframeTrack\",(function(){return zl})),n.d(e,\"Vertex\",(function(){return Gf})),n.d(e,\"VertexColors\",(function(){return E})),n.d(e,\"VertexNormalsHelper\",(function(){return Yh})),n.d(e,\"VideoTexture\",(function(){return $s})),n.d(e,\"WebGLMultisampleRenderTarget\",(function(){return En})),n.d(e,\"WebGLRenderTarget\",(function(){return Sn})),n.d(e,\"WebGLRenderTargetCube\",(function(){return Yi})),n.d(e,\"WebGLRenderer\",(function(){return as})),n.d(e,\"WebGLUtils\",(function(){return Zo})),n.d(e,\"WireframeGeometry\",(function(){return eu})),n.d(e,\"WireframeHelper\",(function(){return sd})),n.d(e,\"WrapAroundEnding\",(function(){return ke})),n.d(e,\"XHRLoader\",(function(){return ud})),n.d(e,\"ZeroCurvatureEnding\",(function(){return Ce})),n.d(e,\"ZeroFactor\",(function(){return D})),n.d(e,\"ZeroSlopeEnding\",(function(){return Pe})),n.d(e,\"ZeroStencilOp\",(function(){return We})),n.d(e,\"sRGBEncoding\",(function(){return Ne})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return\"number\"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),\"name\"in Function.prototype==!1&&Object.defineProperty(Function.prototype,\"name\",{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError(\"Cannot convert undefined or null to object\");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}),Object.assign(r.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});for(var i=\"108\",a={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,u=1,l=2,c=3,h=0,f=1,d=0,p=1,m=2,g=3,v=0,y=1,b=2,_=1,x=2,w=0,S=1,E=2,M=0,T=1,C=2,P=3,k=4,A=5,O=100,L=101,I=102,N=103,R=104,D=200,z=201,B=202,F=203,j=204,U=205,V=206,H=207,G=208,W=209,q=210,X=0,Y=1,Q=2,Z=3,$=4,J=5,K=6,tt=7,et=0,nt=1,rt=2,it=0,at=1,ot=2,st=3,ut=4,lt=5,ct=300,ht=301,ft=302,dt=303,pt=304,mt=305,gt=306,vt=307,yt=1e3,bt=1001,_t=1002,xt=1003,wt=1004,St=1004,Et=1005,Mt=1005,Tt=1006,Ct=1007,Pt=1007,kt=1008,At=1008,Ot=1009,Lt=1010,It=1011,Nt=1012,Rt=1013,Dt=1014,zt=1015,Bt=1016,Ft=1017,jt=1018,Ut=1019,Vt=1020,Ht=1021,Gt=1022,Wt=1023,qt=1024,Xt=1025,Yt=Wt,Qt=1026,Zt=1027,$t=1028,Jt=33776,Kt=33777,te=33778,ee=33779,ne=35840,re=35841,ie=35842,ae=35843,oe=36196,se=37808,ue=37809,le=37810,ce=37811,he=37812,fe=37813,de=37814,pe=37815,me=37816,ge=37817,ve=37818,ye=37819,be=37820,_e=37821,xe=2200,we=2201,Se=2202,Ee=2300,Me=2301,Te=2302,Ce=2400,Pe=2401,ke=2402,Ae=0,Oe=1,Le=2,Ie=3e3,Ne=3001,Re=3007,De=3002,ze=3003,Be=3004,Fe=3005,je=3006,Ue=3200,Ve=3201,He=0,Ge=1,We=0,qe=7680,Xe=7681,Ye=7682,Qe=7683,Ze=34055,$e=34056,Je=5386,Ke=512,tn=513,en=514,nn=515,rn=516,an=517,on=518,sn=519,un=[],ln=0;ln<256;ln++)un[ln]=(ln<16?\"0\":\"\")+ln.toString(16);var cn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(un[255&t]+un[t>>8&255]+un[t>>16&255]+un[t>>24&255]+\"-\"+un[255&e]+un[e>>8&255]+\"-\"+un[e>>16&15|64]+un[e>>24&255]+\"-\"+un[63&n|128]+un[n>>8&255]+\"-\"+un[n>>16&255]+un[n>>24&255]+un[255&r]+un[r>>8&255]+un[r>>16&255]+un[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*cn.DEG2RAD},radToDeg:function(t){return t*cn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function hn(t,e){this.x=t||0,this.y=e||0}function fn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}Object.defineProperties(hn.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(hn.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}}),Object.assign(fn,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-o,g=s*h+u*f+l*d+c*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,g*v);m=Math.sin(m*_)/b,o=Math.sin(o*_)/b}var x=o*v;if(s=s*m+h*x,u=u*m+f*x,l=l*m+d*x,c=c*m+p*x,m===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}}),Object.defineProperties(fn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(fn.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");var n=t._x,r=t._y,i=t._z,a=t.order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return\"XYZ\"===a?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):\"YXZ\"===a?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):\"ZXY\"===a?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):\"ZYX\"===a?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):\"YZX\"===a?(this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d):\"XZY\"===a&&(this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(a-l)*e,this._z=(o-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(a-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(o-i)/e,this._x=(a+l)/e,this._y=(u+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(cn.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,a=t._w,o=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-e;return this._w=u*a+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-e)*c)/l,f=Math.sin(e*c)/l;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var dn=new mn,pn=new fn;function mn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(mn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\"),this.applyQuaternion(pn.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(pn.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*r-o*n,l=s*n+o*e-i*r,c=s*r+i*n-a*e,h=-i*e-a*n-o*r;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return dn.copy(this).projectOnVector(t),this.sub(dn)},reflect:function(t){return this.sub(dn.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(cn.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var gn,vn=new mn;function yn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}Object.assign(yn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,a,o,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=o,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)vn.x=t.getX(e),vn.y=t.getY(e),vn.z=t.getZ(e),vn.applyMatrix3(this),t.setXYZ(e,vn.x,vn.y,vn.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=a*p+o*v+s*_,i[3]=a*m+o*y+s*x,i[6]=a*g+o*b+s*w,i[1]=u*p+l*v+c*_,i[4]=u*m+l*y+c*x,i[7]=u*g+l*b+c*w,i[2]=h*p+f*v+d*_,i[5]=h*m+f*y+d*x,i[8]=h*g+f*b+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*a*l-e*o*u-n*i*l+n*o*s+r*i*u-r*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error(\"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\");var n=t.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,g=i*d+a*p+o*m;if(0===g){var v=\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return r[0]=d*y,r[1]=(o*h-f*a)*y,r[2]=(l*a-o*u)*y,r[3]=p*y,r[4]=(f*i-o*c)*y,r[5]=(o*s-l*i)*y,r[6]=m*y,r[7]=(a*c-h*i)*y,r[8]=(u*i-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*a+u*o)+a+t,-r*u,r*s,-r*(-u*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*a+n*u,r[6]=e*o+n*l,r[1]=-n*i+e*s,r[4]=-n*a+e*u,r[7]=-n*o+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var bn={getDataURL:function(t){var e;if(\"undefined\"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===gn&&(gn=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")),gn.width=t.width,gn.height=t.height;var n=gn.getContext(\"2d\");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=gn}return e.width>2048||e.height>2048?e.toDataURL(\"image/jpeg\",.6):e.toDataURL(\"image/png\")}},_n=0;function xn(t,e,n,r,i,a,o,s,u,l){Object.defineProperty(this,\"id\",{value:_n++}),this.uuid=cn.generateUUID(),this.name=\"\",this.image=void 0!==t?t:xn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:xn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:bt,this.wrapT=void 0!==r?r:bt,this.magFilter=void 0!==i?i:Tt,this.minFilter=void 0!==a?a:kt,this.anisotropy=void 0!==u?u:1,this.format=void 0!==o?o:Wt,this.type=void 0!==s?s:Ot,this.offset=new hn(0,0),this.repeat=new hn(1,1),this.center=new hn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Ie,this.version=0,this.onUpdate=null}function wn(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function Sn(t,e,n){this.width=t,this.height=e,this.scissor=new wn(0,0,t,e),this.scissorTest=!1,this.viewport=new wn(0,0,t,e),n=n||{},this.texture=new xn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Tt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function En(t,e,n){Sn.call(this,t,e,n),this.samples=4}xn.DEFAULT_IMAGE=void 0,xn.DEFAULT_MAPPING=ct,xn.prototype=Object.assign(Object.create(r.prototype),{constructor:xn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||\"string\"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=cn.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(bn.getDataURL(r[a]))}else i=bn.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:\"dispose\"})},transformUv:function(t){if(this.mapping!==ct)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case yt:t.x=t.x-Math.floor(t.x);break;case bt:t.x=t.x<0?0:1;break;case _t:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case yt:t.y=t.y-Math.floor(t.y);break;case bt:t.y=t.y<0?0:1;break;case _t:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(xn.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(wn.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(wn.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,a=t.elements,o=a[0],s=a[4],u=a[8],l=a[1],c=a[5],h=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(c+1)/2,v=(p+1)/2,y=(s+l)/4,b=(u+f)/4,_=(h+d)/4;return m>g&&m>v?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):g>v?g<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(g)),i=_/r):v<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(v)),r=_/i),this.set(n,r,i,e),this}var x=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(d-h)/x,this.y=(u-f)/x,this.z=(l-s)/x,this.w=Math.acos((o+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Sn.prototype=Object.assign(Object.create(r.prototype),{constructor:Sn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),En.prototype=Object.assign(Object.create(Sn.prototype),{constructor:En,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Sn.prototype.copy.call(this,t),this.samples=t.samples,this}});var Mn=new mn,Tn=new Ln,Cn=new mn(0,0,0),Pn=new mn(1,1,1),kn=new mn,An=new mn,On=new mn;function Ln(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}Object.assign(Ln.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,a,o,s,u,l,c,h,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ln).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/Mn.setFromMatrixColumn(t,0).length(),i=1/Mn.setFromMatrixColumn(t,1).length(),a=1/Mn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");var e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if(\"XYZ\"===t.order){var h=a*l,f=a*c,d=o*l,p=o*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-o*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=a*s}else if(\"YXZ\"===t.order){var m=s*l,g=s*c,v=u*l,y=u*c;e[0]=m+y*o,e[4]=v*o-g,e[8]=a*u,e[1]=a*c,e[5]=a*l,e[9]=-o,e[2]=g*o-v,e[6]=y+m*o,e[10]=a*s}else if(\"ZXY\"===t.order){m=s*l,g=s*c,v=u*l,y=u*c;e[0]=m-y*o,e[4]=-a*c,e[8]=v+g*o,e[1]=g+v*o,e[5]=a*l,e[9]=y-m*o,e[2]=-a*u,e[6]=o,e[10]=a*s}else if(\"ZYX\"===t.order){h=a*l,f=a*c,d=o*l,p=o*c;e[0]=s*l,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*c,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=o*s,e[10]=a*s}else if(\"YZX\"===t.order){var b=a*s,_=a*u,x=o*s,w=o*u;e[0]=s*l,e[4]=w-b*c,e[8]=x*c+_,e[1]=c,e[5]=a*l,e[9]=-o*l,e[2]=-u*l,e[6]=_*c+x,e[10]=b-w*c}else if(\"XZY\"===t.order){b=a*s,_=a*u,x=o*s,w=o*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=b*c+w,e[5]=a*l,e[9]=_*c-x,e[2]=x*c-_,e[6]=o*l,e[10]=w*c+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Cn,t,Pn)},lookAt:function(t,e,n){var r=this.elements;return On.subVectors(t,e),0===On.lengthSq()&&(On.z=1),On.normalize(),kn.crossVectors(n,On),0===kn.lengthSq()&&(1===Math.abs(n.z)?On.x+=1e-4:On.z+=1e-4,On.normalize(),kn.crossVectors(n,On)),kn.normalize(),An.crossVectors(On,kn),r[0]=kn.x,r[4]=An.x,r[8]=On.x,r[1]=kn.y,r[5]=An.y,r[9]=On.y,r[2]=kn.z,r[6]=An.z,r[10]=On.z,this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],E=r[12],M=r[1],T=r[5],C=r[9],P=r[13],k=r[2],A=r[6],O=r[10],L=r[14],I=r[3],N=r[7],R=r[11],D=r[15];return i[0]=a*x+o*M+s*k+u*I,i[4]=a*w+o*T+s*A+u*N,i[8]=a*S+o*C+s*O+u*R,i[12]=a*E+o*P+s*L+u*D,i[1]=l*x+c*M+h*k+f*I,i[5]=l*w+c*T+h*A+f*N,i[9]=l*S+c*C+h*O+f*R,i[13]=l*E+c*P+h*L+f*D,i[2]=d*x+p*M+m*k+g*I,i[6]=d*w+p*T+m*A+g*N,i[10]=d*S+p*C+m*O+g*R,i[14]=d*E+p*P+m*L+g*D,i[3]=v*x+y*M+b*k+_*I,i[7]=v*w+y*T+b*A+_*N,i[11]=v*S+y*C+b*O+_*R,i[15]=v*E+y*P+b*L+_*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)Mn.x=t.getX(e),Mn.y=t.getY(e),Mn.z=t.getZ(e),Mn.applyMatrix4(this),t.setXYZ(e,Mn.x,Mn.y,Mn.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],o=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*a*h-r*a*f+r*u*l-i*s*l)+t[11]*(+e*u*c-e*o*f-i*a*c+n*a*f+i*o*l-n*u*l)+t[15]*(-r*o*l-e*s*c+e*o*h+r*a*c-n*a*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15],_=d*y*h-v*p*h+v*c*m-l*y*m-d*c*b+l*p*b,x=g*p*h-f*y*h-g*c*m+u*y*m+f*c*b-u*p*b,w=f*v*h-g*d*h+g*l*m-u*v*m-f*l*b+u*d*b,S=g*d*c-f*v*c-g*l*p+u*v*p+f*l*y-u*d*y,E=i*_+a*x+o*w+s*S;if(0===E){var M=\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var T=1/E;return n[0]=_*T,n[1]=(v*p*s-d*y*s-v*o*m+a*y*m+d*o*b-a*p*b)*T,n[2]=(l*y*s-v*c*s+v*o*h-a*y*h-l*o*b+a*c*b)*T,n[3]=(d*c*s-l*p*s-d*o*h+a*p*h+l*o*m-a*c*m)*T,n[4]=x*T,n[5]=(f*y*s-g*p*s+g*o*m-i*y*m-f*o*b+i*p*b)*T,n[6]=(g*c*s-u*y*s-g*o*h+i*y*h+u*o*b-i*c*b)*T,n[7]=(u*p*s-f*c*s+f*o*h-i*p*h-u*o*m+i*c*m)*T,n[8]=w*T,n[9]=(g*d*s-f*v*s-g*a*m+i*v*m+f*a*b-i*d*b)*T,n[10]=(u*v*s-g*l*s+g*a*h-i*v*h-u*a*b+i*l*b)*T,n[11]=(f*l*s-u*d*s-f*a*h+i*d*h+u*a*m-i*l*m)*T,n[12]=S*T,n[13]=(f*v*o-g*d*o+g*a*p-i*v*p-f*a*y+i*d*y)*T,n[14]=(g*l*o-u*v*o-g*a*c+i*v*c+u*a*y-i*l*y)*T,n[15]=(u*d*o-f*l*o+f*a*c-i*d*c-u*a*p+i*l*p)*T,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,o=t.y,s=t.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,a=e._y,o=e._z,s=e._w,u=i+i,l=a+a,c=o+o,h=i*u,f=i*l,d=i*c,p=a*l,m=a*c,g=o*c,v=s*u,y=s*l,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+g))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,n){var r=this.elements,i=Mn.set(r[0],r[1],r[2]).length(),a=Mn.set(r[4],r[5],r[6]).length(),o=Mn.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Tn.copy(this);var s=1/i,u=1/a,l=1/o;return Tn.elements[0]*=s,Tn.elements[1]*=s,Tn.elements[2]*=s,Tn.elements[4]*=u,Tn.elements[5]*=u,Tn.elements[6]*=u,Tn.elements[8]*=l,Tn.elements[9]*=l,Tn.elements[10]*=l,e.setFromRotationMatrix(Tn),n.x=i,n.y=a,n.z=o,this},makePerspective:function(t,e,n,r,i,a){void 0===a&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");var o=this.elements,s=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),c=(n+r)/(n-r),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,r,i,a){var o=this.elements,s=1/(e-t),u=1/(n-r),l=1/(a-i),c=(e+t)*s,h=(n+r)*u,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var In=new Ln,Nn=new fn;function Rn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||Rn.DefaultOrder}function Dn(){this.mask=1}Rn.RotationOrders=[\"XYZ\",\"YZX\",\"ZXY\",\"XZY\",\"YXZ\",\"ZYX\"],Rn.DefaultOrder=\"XYZ\",Object.defineProperties(Rn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Rn.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=cn.clamp,i=t.elements,a=i[0],o=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];return\"XYZ\"===(e=e||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,l),this._z=0)):\"YXZ\"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,a),this._z=0)):\"ZXY\"===e?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,a))):\"ZYX\"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,l))):\"YZX\"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):\"XZY\"===e?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn(\"THREE.Euler: .setFromRotationMatrix() given unsupported order: \"+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return In.makeRotationFromQuaternion(t),this.setFromRotationMatrix(In,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return Nn.setFromEuler(this),this.setFromQuaternion(Nn,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new mn(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(Dn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var zn=0,Bn=new mn,Fn=new fn,jn=new Ln,Un=new mn,Vn=new mn,Hn=new mn,Gn=new fn,Wn=new mn(1,0,0),qn=new mn(0,1,0),Xn=new mn(0,0,1),Yn={type:\"added\"},Qn={type:\"removed\"};function Zn(){Object.defineProperty(this,\"id\",{value:zn++}),this.uuid=cn.generateUUID(),this.name=\"\",this.type=\"Object3D\",this.parent=null,this.children=[],this.up=Zn.DefaultUp.clone();var t=new mn,e=new Rn,n=new fn,r=new mn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ln},normalMatrix:{value:new yn}}),this.matrix=new Ln,this.matrixWorld=new Ln,this.matrixAutoUpdate=Zn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function $n(){Zn.call(this),this.type=\"Scene\",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}Zn.DefaultUp=new mn(0,1,0),Zn.DefaultMatrixAutoUpdate=!0,Zn.prototype=Object.assign(Object.create(r.prototype),{constructor:Zn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.multiply(Fn),this},rotateOnWorldAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.premultiply(Fn),this},rotateX:function(t){return this.rotateOnAxis(Wn,t)},rotateY:function(t){return this.rotateOnAxis(qn,t)},rotateZ:function(t){return this.rotateOnAxis(Xn,t)},translateOnAxis:function(t,e){return Bn.copy(t).applyQuaternion(this.quaternion),this.position.add(Bn.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wn,t)},translateY:function(t){return this.translateOnAxis(qn,t)},translateZ:function(t){return this.translateOnAxis(Xn,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(jn.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Un.copy(t):Un.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Vn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jn.lookAt(Vn,Un,this.up):jn.lookAt(Un,Vn,this.up),this.quaternion.setFromRotationMatrix(jn),r&&(jn.extractRotation(r.matrixWorld),Fn.setFromRotationMatrix(jn),this.quaternion.premultiply(Fn.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yn)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Qn)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),jn.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),jn.multiply(t.parent.matrixWorld)),t.applyMatrix(jn),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty(\"id\",t)},getObjectByName:function(t){return this.getObjectByProperty(\"name\",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\"),t=new mn),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\"),t=new fn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Vn,t,Hn),t},getWorldScale:function(t){return void 0===t&&(console.warn(\"THREE.Object3D: .getWorldScale() target is now required\"),t=new mn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Vn,Gn,t),t},getWorldDirection:function(t){void 0===t&&(console.warn(\"THREE.Object3D: .getWorldDirection() target is now required\"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||\"string\"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,\"\"!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),\"{}\"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ae&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(t.shapes,l)}else i(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,u=this.material.length;s<u;s++)c.push(i(t.materials,this.material[s]));r.material=c}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(e){var h=m(t.geometries),f=m(t.materials),d=m(t.textures),p=m(t.images);o=m(t.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=r,n;function m(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),$n.prototype=Object.assign(Object.create(Zn.prototype),{constructor:$n,isScene:!0,copy:function(t,e){return Zn.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Zn.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});var Jn=[new mn,new mn,new mn,new mn,new mn,new mn,new mn,new mn],Kn=new mn,tr=new mn,er=new mn,nr=new mn,rr=new mn,ir=new mn,ar=new mn,or=new mn,sr=new mn,ur=new mn,lr=new mn;function cr(t,e){this.min=void 0!==t?t:new mn(1/0,1/0,1/0),this.max=void 0!==e?e:new mn(-1/0,-1/0,-1/0)}function hr(t,e,n,r,i){var a,o;for(a=0,o=t.length-3;a<=o;a+=3){lr.fromArray(t,a);var s=i.x*Math.abs(lr.x)+i.y*Math.abs(lr.y)+i.z*Math.abs(lr.z),u=e.dot(lr),l=n.dot(lr),c=r.dot(lr);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}Object.assign(cr.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,r),this.max.set(i,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Kn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Box3: .getCenter() target is now required\"),t=new mn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn(\"THREE.Box3: .getSize() target is now required\"),t=new mn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){var e,n;t.updateWorldMatrix(!1,!1);var r=t.geometry;if(void 0!==r)if(r.isGeometry){var i=r.vertices;for(e=0,n=i.length;e<n;e++)Kn.copy(i[e]),Kn.applyMatrix4(t.matrixWorld),this.expandByPoint(Kn)}else if(r.isBufferGeometry){var a=r.attributes.position;if(void 0!==a)for(e=0,n=a.count;e<n;e++)Kn.fromBufferAttribute(a,e).applyMatrix4(t.matrixWorld),this.expandByPoint(Kn)}var o=t.children;for(e=0,n=o.length;e<n;e++)this.expandByObject(o[e]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn(\"THREE.Box3: .getParameter() target is now required\"),e=new mn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Kn),Kn.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(or),sr.subVectors(this.max,or),tr.subVectors(t.a,or),er.subVectors(t.b,or),nr.subVectors(t.c,or),rr.subVectors(er,tr),ir.subVectors(nr,er),ar.subVectors(tr,nr);var e=[0,-rr.z,rr.y,0,-ir.z,ir.y,0,-ar.z,ar.y,rr.z,0,-rr.x,ir.z,0,-ir.x,ar.z,0,-ar.x,-rr.y,rr.x,0,-ir.y,ir.x,0,-ar.y,ar.x,0];return!!hr(e,tr,er,nr,sr)&&(!!hr(e=[1,0,0,0,1,0,0,0,1],tr,er,nr,sr)&&(ur.crossVectors(rr,ir),hr(e=[ur.x,ur.y,ur.z],tr,er,nr,sr)))},clampPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Box3: .clampPoint() target is now required\"),e=new mn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Kn.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error(\"THREE.Box3: .getBoundingSphere() target is now required\"),this.getCenter(t.center),t.radius=.5*this.getSize(Kn).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(Jn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Jn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Jn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Jn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Jn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Jn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Jn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Jn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Jn),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var fr=new cr;function dr(t,e){this.center=void 0!==t?t:new mn,this.radius=void 0!==e?e:0}Object.assign(dr.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):fr.setFromPoints(t).getCenter(n);for(var r=0,i=0,a=t.length;i<a;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn(\"THREE.Sphere: .clampPoint() target is now required\"),e=new mn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn(\"THREE.Sphere: .getBoundingBox() target is now required\"),t=new cr),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var pr=new mn,mr=new mn,gr=new mn,vr=new mn,yr=new mn,br=new mn,_r=new mn;function xr(t,e){this.origin=void 0!==t?t:new mn,this.direction=void 0!==e?e:new mn}Object.assign(xr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn(\"THREE.Ray: .at() target is now required\"),e=new mn),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,pr)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn(\"THREE.Ray: .closestPointToPoint() target is now required\"),e=new mn),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=pr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(pr.copy(this.direction).multiplyScalar(e).add(this.origin),pr.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,r){mr.copy(t).add(e).multiplyScalar(.5),gr.copy(e).sub(t).normalize(),vr.copy(this.origin).sub(mr);var i,a,o,s,u=.5*t.distanceTo(e),l=-this.direction.dot(gr),c=vr.dot(this.direction),h=-vr.dot(gr),f=vr.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*c-h,s=u*d,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(gr).multiplyScalar(a).add(mr),o},intersectSphere:function(t,e){pr.subVectors(t.center,this.origin);var n=pr.dot(this.direction),r=pr.dot(pr)-n*n,i=t.radius*t.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,a=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,a=(t.min.y-h.y)*l),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,pr)},intersectTriangle:function(t,e,n,r,i){yr.subVectors(e,t),br.subVectors(n,t),_r.crossVectors(yr,br);var a,o=this.direction.dot(_r);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}vr.subVectors(this.origin,t);var s=a*this.direction.dot(br.crossVectors(vr,br));if(s<0)return null;var u=a*this.direction.dot(yr.cross(vr));if(u<0)return null;if(s+u>o)return null;var l=-a*vr.dot(_r);return l<0?null:this.at(l/o,i)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var wr=new mn,Sr=new mn,Er=new mn,Mr=new mn,Tr=new mn,Cr=new mn,Pr=new mn,kr=new mn,Ar=new mn,Or=new mn;function Lr(t,e,n){this.a=void 0!==t?t:new mn,this.b=void 0!==e?e:new mn,this.c=void 0!==n?n:new mn}Object.assign(Lr,{getNormal:function(t,e,n,r){void 0===r&&(console.warn(\"THREE.Triangle: .getNormal() target is now required\"),r=new mn),r.subVectors(n,e),wr.subVectors(t,e),r.cross(wr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(t,e,n,r,i){wr.subVectors(r,e),Sr.subVectors(n,e),Er.subVectors(t,e);var a=wr.dot(wr),o=wr.dot(Sr),s=wr.dot(Er),u=Sr.dot(Sr),l=Sr.dot(Er),c=a*u-o*o;if(void 0===i&&(console.warn(\"THREE.Triangle: .getBarycoord() target is now required\"),i=new mn),0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-o*l)*h,d=(a*l-o*s)*h;return i.set(1-f-d,d,f)},containsPoint:function(t,e,n,r){return Lr.getBarycoord(t,e,n,r,Mr),Mr.x>=0&&Mr.y>=0&&Mr.x+Mr.y<=1},getUV:function(t,e,n,r,i,a,o,s){return this.getBarycoord(t,e,n,r,Mr),s.set(0,0),s.addScaledVector(i,Mr.x),s.addScaledVector(a,Mr.y),s.addScaledVector(o,Mr.z),s},isFrontFacing:function(t,e,n,r){return wr.subVectors(n,e),Sr.subVectors(t,e),wr.cross(Sr).dot(r)<0}}),Object.assign(Lr.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return wr.subVectors(this.c,this.b),Sr.subVectors(this.a,this.b),.5*wr.cross(Sr).length()},getMidpoint:function(t){return void 0===t&&(console.warn(\"THREE.Triangle: .getMidpoint() target is now required\"),t=new mn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Lr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn(\"THREE.Triangle: .getPlane() target is now required\"),t=new mn),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Lr.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,r,i){return Lr.getUV(t,this.a,this.b,this.c,e,n,r,i)},containsPoint:function(t){return Lr.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Lr.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn(\"THREE.Triangle: .closestPointToPoint() target is now required\"),e=new mn);var n,r,i=this.a,a=this.b,o=this.c;Tr.subVectors(a,i),Cr.subVectors(o,i),kr.subVectors(t,i);var s=Tr.dot(kr),u=Cr.dot(kr);if(s<=0&&u<=0)return e.copy(i);Ar.subVectors(t,a);var l=Tr.dot(Ar),c=Cr.dot(Ar);if(l>=0&&c<=l)return e.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(Tr,n);Or.subVectors(t,o);var f=Tr.dot(Or),d=Cr.dot(Or);if(d>=0&&f<=d)return e.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),e.copy(i).addScaledVector(Cr,r);var m=l*d-f*c;if(m<=0&&c-l>=0&&f-d>=0)return Pr.subVectors(o,a),r=(c-l)/(c-l+(f-d)),e.copy(a).addScaledVector(Pr,r);var g=1/(m+p+h);return n=p*g,r=h*g,e.copy(i).addScaledVector(Tr,n).addScaledVector(Cr,r)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Nr={h:0,s:0,l:0},Rr={h:0,s:0,l:0};function Dr(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function zr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Br(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Fr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function jr(t,e,n,r,i,a){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new mn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Dr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}Object.assign(Dr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):\"number\"==typeof t?this.setHex(t):\"string\"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=cn.euclideanModulo(t,1),e=cn.clamp(e,0,1),n=cn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=zr(i,r,t+1/3),this.g=zr(i,r,t),this.b=zr(i,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn(\"THREE.Color: Alpha component of \"+t+\" will be ignored.\")}var n;if(n=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(t)){var r,i=n[1],a=n[2];switch(i){case\"rgb\":case\"rgba\":if(r=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case\"hsl\":case\"hsla\":if(r=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(o,s,u)}}}else if(n=/^\\#([A-Fa-f0-9]+)$/.exec(t)){var l,c=(l=n[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(l=Ir[t])?this.setHex(l):console.warn(\"THREE.Color: Unknown color \"+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Br(t.r),this.g=Br(t.g),this.b=Br(t.b),this},copyLinearToSRGB:function(t){return this.r=Fr(t.r),this.g=Fr(t.g),this.b=Fr(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn(\"THREE.Color: .getHSL() target is now required\"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)e=0,n=0;else{var l=o-s;switch(n=u<=.5?l/(o+s):l/(2-o-s),o){case r:e=(i-a)/l+(i<a?6:0);break;case i:e=(a-r)/l+2;break;case a:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(t,e,n){return this.getHSL(Nr),Nr.h+=t,Nr.s+=e,Nr.l+=n,this.setHSL(Nr.h,Nr.s,Nr.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Nr),t.getHSL(Rr);var n=cn.lerp(Nr.h,Rr.h,e),r=cn.lerp(Nr.s,Rr.s,e),i=cn.lerp(Nr.l,Rr.l,e);return this.setHSL(n,r,i),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(jr.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Ur=0;function Vr(){Object.defineProperty(this,\"id\",{value:Ur++}),this.uuid=cn.generateUUID(),this.name=\"\",this.type=\"Material\",this.fog=!0,this.lights=!0,this.blending=T,this.side=v,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=w,this.opacity=1,this.transparent=!1,this.blendSrc=j,this.blendDst=U,this.blendEquation=O,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Z,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=sn,this.stencilRef=0,this.stencilMask=255,this.stencilFail=qe,this.stencilZFail=qe,this.stencilZPass=qe,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function Hr(t){Vr.call(this),this.type=\"MeshBasicMaterial\",this.color=new Dr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Gr(t,e,n){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wr(t,e,n){Gr.call(this,new Int8Array(t),e,n)}function qr(t,e,n){Gr.call(this,new Uint8Array(t),e,n)}function Xr(t,e,n){Gr.call(this,new Uint8ClampedArray(t),e,n)}function Yr(t,e,n){Gr.call(this,new Int16Array(t),e,n)}function Qr(t,e,n){Gr.call(this,new Uint16Array(t),e,n)}function Zr(t,e,n){Gr.call(this,new Int32Array(t),e,n)}function $r(t,e,n){Gr.call(this,new Uint32Array(t),e,n)}function Jr(t,e,n){Gr.call(this,new Float32Array(t),e,n)}function Kr(t,e,n){Gr.call(this,new Float64Array(t),e,n)}function ti(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function ei(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Vr.prototype=Object.assign(Object.create(r.prototype),{constructor:Vr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if(\"shading\"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(\"THREE.\"+this.type+\": '\"+e+\"' is not a property of this material.\")}else console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=n===_;else console.warn(\"THREE.Material: '\"+e+\"' parameter is undefined.\")}},toJSON:function(t){var e=void 0===t||\"string\"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,\"\"!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==T&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==v&&(n.side=this.side),this.vertexColors!==w&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),\"round\"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),\"round\"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),\"{}\"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),a=r(t.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWrite=t.stencilWrite,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilMask=t.stencilMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),Hr.prototype=Object.create(Vr.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isMeshBasicMaterial=!0,Hr.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(Gr.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.assign(Gr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",r),a=new Dr),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",r),a=new hn),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",r),a=new mn),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",r),a=new wn),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Wr.prototype=Object.create(Gr.prototype),Wr.prototype.constructor=Wr,qr.prototype=Object.create(Gr.prototype),qr.prototype.constructor=qr,Xr.prototype=Object.create(Gr.prototype),Xr.prototype.constructor=Xr,Yr.prototype=Object.create(Gr.prototype),Yr.prototype.constructor=Yr,Qr.prototype=Object.create(Gr.prototype),Qr.prototype.constructor=Qr,Zr.prototype=Object.create(Gr.prototype),Zr.prototype.constructor=Zr,$r.prototype=Object.create(Gr.prototype),$r.prototype.constructor=$r,Jr.prototype=Object.create(Gr.prototype),Jr.prototype.constructor=Jr,Kr.prototype=Object.create(Gr.prototype),Kr.prototype.constructor=Kr,Object.assign(ti.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,n.push(e)),e={start:3*a,materialIndex:r})}void 0!==e&&(e.count=3*a-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var l=0;l<u;l++)e[l]={name:s[l].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,f=h.length;if(f>0){c=[];for(l=0;l<f;l++)c[l]={name:h[l].name,data:[]};this.morphTargets.normal=c}var d=t.skinIndices,p=t.skinWeights,m=d.length===r.length,g=p.length===r.length;r.length>0&&0===n.length&&console.error(\"THREE.DirectGeometry: Faceless geometries are not supported.\");for(l=0;l<n.length;l++){var v=n[l];this.vertices.push(r[v.a],r[v.b],r[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=v.normal;this.normals.push(b,b,b)}var _,x=v.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=v.color;this.colors.push(w,w,w)}if(!0===a)void 0!==(_=i[0][l])?this.uvs.push(_[0],_[1],_[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",l),this.uvs.push(new hn,new hn,new hn));if(!0===o)void 0!==(_=i[1][l])?this.uvs2.push(_[0],_[1],_[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",l),this.uvs2.push(new hn,new hn,new hn));for(var S=0;S<u;S++){var E=s[S].vertices;e[S].data.push(E[v.a],E[v.b],E[v.c])}for(S=0;S<f;S++){var M=h[S].vertexNormals[l];c[S].data.push(M.a,M.b,M.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),g&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var ni=1,ri=new Ln,ii=new Zn,ai=new mn,oi=new cr,si=new cr,ui=new mn;function li(){Object.defineProperty(this,\"id\",{value:ni+=2}),this.uuid=cn.generateUUID(),this.name=\"\",this.type=\"BufferGeometry\",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}li.prototype=Object.assign(Object.create(r.prototype),{constructor:li,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(ei(t)>65535?$r:Qr)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?\"index\"===t?(console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.addAttribute(t,new Gr(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new yn).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);var r=this.attributes.tangent;void 0!==r&&((new yn).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return ri.makeRotationX(t),this.applyMatrix(ri),this},rotateY:function(t){return ri.makeRotationY(t),this.applyMatrix(ri),this},rotateZ:function(t){return ri.makeRotationZ(t),this.applyMatrix(ri),this},translate:function(t,e,n){return ri.makeTranslation(t,e,n),this.applyMatrix(ri),this},scale:function(t,e,n){return ri.makeScale(t,e,n),this.applyMatrix(ri),this},lookAt:function(t){return ii.lookAt(t),ii.updateMatrix(),this.applyMatrix(ii.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ai).negate(),this.translate(ai.x,ai.y,ai.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Jr(3*e.vertices.length,3),r=new Jr(3*e.colors.length,3);if(this.addAttribute(\"position\",n.copyVector3sArray(e.vertices)),this.addAttribute(\"color\",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new Jr(e.lineDistances.length,1);this.addAttribute(\"lineDistance\",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute(\"position\",new Jr(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new ti).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute(\"position\",new Gr(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute(\"normal\",new Gr(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute(\"color\",new Gr(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute(\"uv\",new Gr(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute(\"uv2\",new Gr(a,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[o],l=0,c=u.length;l<c;l++){var h=u[l],f=new Jr(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var d=new Jr(4*t.skinIndices.length,4);this.addAttribute(\"skinIndex\",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new Jr(4*t.skinWeights.length,4);this.addAttribute(\"skinWeight\",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new cr);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];oi.setFromBufferAttribute(i),this.boundingBox.expandByPoint(oi.min),this.boundingBox.expandByPoint(oi.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new dr);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(oi.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var a=e[r];si.setFromBufferAttribute(a),oi.expandByPoint(si.min),oi.expandByPoint(si.max)}oi.getCenter(n);var o=0;for(r=0,i=t.count;r<i;r++)ui.fromBufferAttribute(t,r),o=Math.max(o,n.distanceToSquared(ui));if(e)for(r=0,i=e.length;r<i;r++)for(var s=0,u=(a=e[r]).count;s<u;s++)ui.fromBufferAttribute(a,s),o=Math.max(o,n.distanceToSquared(ui));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute(\"normal\",new Gr(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,a=r.length;i<a;i++)r[i]=0;var o,s,u,l=e.normal.array,c=new mn,h=new mn,f=new mn,d=new mn,p=new mn;if(t){var m=t.array;for(i=0,a=t.count;i<a;i+=3)o=3*m[i+0],s=3*m[i+1],u=3*m[i+2],c.fromArray(n,o),h.fromArray(n,s),f.fromArray(n,u),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),l[o]+=d.x,l[o+1]+=d.y,l[o+2]+=d.z,l[s]+=d.x,l[s+1]+=d.y,l[s+2]+=d.z,l[u]+=d.x,l[u+1]+=d.y,l[u+2]+=d.z}else for(i=0,a=n.length;i<a;i+=9)c.fromArray(n,i),h.fromArray(n,i+3),f.fromArray(n,i+6),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),l[i]=d.x,l[i+1]=d.y,l[i+2]=d.z,l[i+3]=d.x,l[i+4]=d.y,l[i+5]=d.z,l[i+6]=d.x,l[i+7]=d.y,l[i+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn(\"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.\"));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,a=t.attributes[r],o=a.array,s=a.itemSize*e,u=Math.min(o.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=o[l];return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)ui.x=t.getX(e),ui.y=t.getY(e),ui.z=t.getZ(e),ui.normalize(),t.setXYZ(e,ui.x,ui.y,ui.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=new n.constructor(e.length*r),a=0,o=0,s=0,u=e.length;s<u;s++){a=e[s]*r;for(var l=0;l<r;l++)i[o++]=n[a++]}return new Gr(i,r)}if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),this;var e=new li,n=this.index.array,r=this.attributes;for(var i in r){var a=t(r[i],n);e.addAttribute(i,a)}var o=this.morphAttributes;for(i in o){for(var s=[],u=o[i],l=0,c=u.length;l<c;l++){a=t(u[l],n);s.push(a)}e.morphAttributes[i]=s}for(var h=this.groups,f=(l=0,h.length);l<f;l++){var d=h[l];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(t.uuid=this.uuid,t.type=this.type,\"\"!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var a=(f=i[n]).toJSON();\"\"!==f.name&&(a.name=f.name),t.data.attributes[n]=a}var o={},s=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],l=[],c=0,h=u.length;c<h;c++){var f;a=(f=u[c]).toJSON();\"\"!==f.name&&(a.name=f.name),l.push(a)}l.length>0&&(o[n]=l,s=!0)}s&&(t.data.morphAttributes=o);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(t.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),t},clone:function(){return(new li).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var u=[],l=s[e];for(n=0,r=l.length;n<r;n++)u.push(l[n].clone());this.morphAttributes[e]=u}var c=t.groups;for(n=0,r=c.length;n<r;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});var ci=new Ln,hi=new xr,fi=new dr,di=new mn,pi=new mn,mi=new mn,gi=new mn,vi=new mn,yi=new mn,bi=new mn,_i=new mn,xi=new mn,wi=new hn,Si=new hn,Ei=new hn,Mi=new mn,Ti=new mn;function Ci(t,e){Zn.call(this),this.type=\"Mesh\",this.geometry=void 0!==t?t:new li,this.material=void 0!==e?e:new Hr({color:16777215*Math.random()}),this.drawMode=Ae,this.updateMorphTargets()}function Pi(t,e,n,r,i,a,o,s){if(null===(e.side===y?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,e.side!==b,s)))return null;Ti.copy(s),Ti.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(Ti);return u<n.near||u>n.far?null:{distance:u,point:Ti.clone(),object:t}}function ki(t,e,n,r,i,a,o,s,u,l,c){di.fromBufferAttribute(i,u),pi.fromBufferAttribute(i,l),mi.fromBufferAttribute(i,c);var h=t.morphTargetInfluences;if(e.morphTargets&&a&&h){bi.set(0,0,0),_i.set(0,0,0),xi.set(0,0,0);for(var f=0,d=a.length;f<d;f++){var p=h[f],m=a[f];0!==p&&(gi.fromBufferAttribute(m,u),vi.fromBufferAttribute(m,l),yi.fromBufferAttribute(m,c),bi.addScaledVector(gi.sub(di),p),_i.addScaledVector(vi.sub(pi),p),xi.addScaledVector(yi.sub(mi),p))}di.add(bi),pi.add(_i),mi.add(xi)}var g=Pi(t,e,n,r,di,pi,mi,Mi);if(g){o&&(wi.fromBufferAttribute(o,u),Si.fromBufferAttribute(o,l),Ei.fromBufferAttribute(o,c),g.uv=Lr.getUV(Mi,di,pi,mi,wi,Si,Ei,new hn)),s&&(wi.fromBufferAttribute(s,u),Si.fromBufferAttribute(s,l),Ei.fromBufferAttribute(s,c),g.uv2=Lr.getUV(Mi,di,pi,mi,wi,Si,Ei,new hn));var v=new jr(u,l,c);Lr.getNormal(di,pi,mi,v.normal),g.face=v}return g}Ci.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Ci,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Zn.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error(\"THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\")}},raycast:function(t,e){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),fi.copy(r.boundingSphere),fi.applyMatrix4(a),!1!==t.ray.intersectsSphere(fi)&&(ci.getInverse(a),hi.copy(t.ray).applyMatrix4(ci),null===r.boundingBox||!1!==hi.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o,s,u,l,c,h,f,d,p,m=r.index,g=r.attributes.position,v=r.morphAttributes.position,y=r.attributes.uv,b=r.attributes.uv2,_=r.groups,x=r.drawRange;if(null!==m)if(Array.isArray(i))for(l=0,h=_.length;l<h;l++)for(p=i[(d=_[l]).materialIndex],c=Math.max(d.start,x.start),f=Math.min(d.start+d.count,x.start+x.count);c<f;c+=3)o=m.getX(c),s=m.getX(c+1),u=m.getX(c+2),(n=ki(this,p,t,hi,g,v,y,b,o,s,u))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=d.materialIndex,e.push(n));else for(l=Math.max(0,x.start),h=Math.min(m.count,x.start+x.count);l<h;l+=3)o=m.getX(l),s=m.getX(l+1),u=m.getX(l+2),(n=ki(this,i,t,hi,g,v,y,b,o,s,u))&&(n.faceIndex=Math.floor(l/3),e.push(n));else if(void 0!==g)if(Array.isArray(i))for(l=0,h=_.length;l<h;l++)for(p=i[(d=_[l]).materialIndex],c=Math.max(d.start,x.start),f=Math.min(d.start+d.count,x.start+x.count);c<f;c+=3)(n=ki(this,p,t,hi,g,v,y,b,o=c,s=c+1,u=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=d.materialIndex,e.push(n));else for(l=Math.max(0,x.start),h=Math.min(g.count,x.start+x.count);l<h;l+=3)(n=ki(this,i,t,hi,g,v,y,b,o=l,s=l+1,u=l+2))&&(n.faceIndex=Math.floor(l/3),e.push(n))}else if(r.isGeometry){var w,S,E,M,T=Array.isArray(i),C=r.vertices,P=r.faces,k=r.faceVertexUvs[0];k.length>0&&(M=k);for(var A=0,O=P.length;A<O;A++){var L=P[A],I=T?i[L.materialIndex]:i;if(void 0!==I&&(w=C[L.a],S=C[L.b],E=C[L.c],n=Pi(this,I,t,hi,w,S,E,Mi))){if(M&&M[A]){var N=M[A];wi.copy(N[0]),Si.copy(N[1]),Ei.copy(N[2]),n.uv=Lr.getUV(Mi,w,S,E,wi,Si,Ei,new hn)}n.face=L,n.faceIndex=A,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ai=0,Oi=new Ln,Li=new Zn,Ii=new mn;function Ni(){Object.defineProperty(this,\"id\",{value:Ai+=2}),this.uuid=cn.generateUUID(),this.name=\"\",this.type=\"Geometry\",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ri(t,e,n,r,i,a){Ni.call(this),this.type=\"BoxGeometry\",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Di(t,e,n,r,i,a)),this.mergeVertices()}function Di(t,e,n,r,i,a){li.call(this),this.type=\"BoxBufferGeometry\",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var o=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var s=[],u=[],l=[],c=[],h=0,f=0;function d(t,e,n,r,i,a,d,p,m,g,v){var y,b,_=a/m,x=d/g,w=a/2,S=d/2,E=p/2,M=m+1,T=g+1,C=0,P=0,k=new mn;for(b=0;b<T;b++){var A=b*x-S;for(y=0;y<M;y++){var O=y*_-w;k[t]=O*r,k[e]=A*i,k[n]=E,u.push(k.x,k.y,k.z),k[t]=0,k[e]=0,k[n]=p>0?1:-1,l.push(k.x,k.y,k.z),c.push(y/m),c.push(1-b/g),C+=1}}for(b=0;b<g;b++)for(y=0;y<m;y++){var L=h+y+M*b,I=h+y+M*(b+1),N=h+(y+1)+M*(b+1),R=h+(y+1)+M*b;s.push(L,I,R),s.push(I,N,R),P+=6}o.addGroup(f,P,v),f+=P,h+=C}d(\"z\",\"y\",\"x\",-1,-1,n,e,t,a,i,0),d(\"z\",\"y\",\"x\",1,-1,n,e,-t,a,i,1),d(\"x\",\"z\",\"y\",1,1,t,n,e,r,a,2),d(\"x\",\"z\",\"y\",1,-1,t,n,-e,r,a,3),d(\"x\",\"y\",\"z\",1,-1,t,e,n,r,i,4),d(\"x\",\"y\",\"z\",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.addAttribute(\"position\",new Jr(u,3)),this.addAttribute(\"normal\",new Jr(l,3)),this.addAttribute(\"uv\",new Jr(c,2))}function zi(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Bi(t){for(var e={},n=0;n<t.length;n++){var r=zi(t[n]);for(var i in r)e[i]=r[i]}return e}Ni.prototype=Object.assign(Object.create(r.prototype),{constructor:Ni,isGeometry:!0,applyMatrix:function(t){for(var e=(new yn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(t)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Oi.makeRotationX(t),this.applyMatrix(Oi),this},rotateY:function(t){return Oi.makeRotationY(t),this.applyMatrix(Oi),this},rotateZ:function(t){return Oi.makeRotationZ(t),this.applyMatrix(Oi),this},translate:function(t,e,n){return Oi.makeTranslation(t,e,n),this.applyMatrix(Oi),this},scale:function(t,e,n){return Oi.makeScale(t,e,n),this.applyMatrix(Oi),this},lookAt:function(t){return Li.lookAt(t),Li.updateMatrix(),this.applyMatrix(Li.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,i=r.position.array,a=void 0!==r.normal?r.normal.array:void 0,o=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=0;l<i.length;l+=3)e.vertices.push((new mn).fromArray(i,l)),void 0!==o&&e.colors.push((new Dr).fromArray(o,l));function c(t,n,r,i){var l=void 0===o?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],c=new jr(t,n,r,void 0===a?[]:[(new mn).fromArray(a,3*t),(new mn).fromArray(a,3*n),(new mn).fromArray(a,3*r)],l,i);e.faces.push(c),void 0!==s&&e.faceVertexUvs[0].push([(new hn).fromArray(s,2*t),(new hn).fromArray(s,2*n),(new hn).fromArray(s,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new hn).fromArray(u,2*t),(new hn).fromArray(u,2*n),(new hn).fromArray(u,2*r)])}var h=t.groups;if(h.length>0)for(l=0;l<h.length;l++)for(var f=h[l],d=f.start,p=d,m=d+f.count;p<m;p+=3)void 0!==n?c(n[p],n[p+1],n[p+2],f.materialIndex):c(p,p+1,p+2,f.materialIndex);else if(void 0!==n)for(l=0;l<n.length;l+=3)c(n[l],n[l+1],n[l+2]);else for(l=0;l<i.length/3;l+=3)c(l,l+1,l+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ii).negate(),this.translate(Ii.x,Ii.y,Ii.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Ln;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new mn,e=new mn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new mn;if(t){var s,u,l,c=new mn,h=new mn;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s=this.vertices[a.a],u=this.vertices[a.b],l=this.vertices[a.c],c.subVectors(l,u),h.subVectors(s,u),c.cross(h),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o[(a=this.faces[r]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var f=(a=this.faces[r]).vertexNormals;3===f.length?(f[0].copy(o[a.a]),f[1].copy(o[a.b]),f[2].copy(o[a.c])):(f[0]=o[a.a].clone(),f[1]=o[a.b].clone(),f[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(n=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var a=new Ni;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new mn,l={a:new mn,b:new mn,c:new mn},o.push(u),s.push(l)}var u,l,c=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=c.faceNormals[n],l=c.vertexNormals[n],u.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new cr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new dr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,u=t.faces,l=this.colors,c=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new yn).getNormalMatrix(e));for(var h=0,f=o.length;h<f;h++){var d=o[h].clone();void 0!==e&&d.applyMatrix4(e),a.push(d)}for(h=0,f=c.length;h<f;h++)l.push(c[h].clone());for(h=0,f=u.length;h<f;h++){var p,m,g,v=u[h],y=v.vertexNormals,b=v.vertexColors;(p=new jr(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==r&&p.normal.applyMatrix3(r).normalize();for(var _=0,x=y.length;_<x;_++)m=y[_].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),p.vertexNormals.push(m);p.color.copy(v.color);for(_=0,x=b.length;_<x;_++)g=b[_],p.vertexColors.push(g.clone());p.materialIndex=v.materialIndex+n,s.push(p)}for(h=0,f=t.faceVertexUvs.length;h<f;h++){var w=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(_=0,x=w.length;_<x;_++){for(var S=w[_],E=[],M=0,T=S.length;M<T;M++)E.push(S[M].clone());this.faceVertexUvs[h].push(E)}}}else console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",t)},mergeVertices:function(){var t,e,n,r,i,a,o,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===u[e=Math.round(t.x*h)+\"_\"+Math.round(t.y*h)+\"_\"+Math.round(t.z*h)]?(u[e]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[e]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],a=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new mn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(r=[]),o&&o.length===e&&(i=[]);for(n=0;n<e;n++){var s=t[n]._id;r&&r.push(a[s]),i&&i.push(o[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:\"Geometry\",generator:\"Geometry.toJSON\"}};if(t.uuid=this.uuid,t.type=this.type,\"\"!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}var o=[],s=[],u={},l=[],c={},h=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,g=d.vertexNormals.length>0,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=S(b,0,0),b=S(b,1,!0),b=S(b,2,!1),b=S(b,3,p),b=S(b,4,m),b=S(b,5,g),b=S(b,6,v),b=S(b,7,y),o.push(b),o.push(d.a,d.b,d.c),o.push(d.materialIndex),p){var _=this.faceVertexUvs[0][i];o.push(T(_[0]),T(_[1]),T(_[2]))}if(m&&o.push(E(d.normal)),g){var x=d.vertexNormals;o.push(E(x[0]),E(x[1]),E(x[2]))}if(v&&o.push(M(d.color)),y){var w=d.vertexColors;o.push(M(w[0]),M(w[1]),M(w[2]))}}function S(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=s.length/3,s.push(t.x,t.y,t.z),u[e])}function M(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=l.length,l.push(t.getHex()),c[e])}function T(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/2,h.push(t.x,t.y),f[e])}return t.data={},t.data.vertices=r,t.data.normals=s,l.length>0&&(t.data.colors=l),h.length>0&&(t.data.uvs=[h]),t.data.faces=o,t},clone:function(){return(new Ni).copy(this)},copy:function(t){var e,n,r,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=c.length;r<i;r++){var h=c[r],f=[];for(a=0,o=h.length;a<o;a++){var d=h[a];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],r=0,i=p[e].vertices.length;r<i;r++)m.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(m.normals=[],r=0,i=p[e].normals.length;r<i;r++)m.normals.push(p[e].normals[r].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,n=g.length;e<n;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],r=0,i=g[e].vertexNormals.length;r<i;r++){var y=g[e].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],r=0,i=g[e].faceNormals.length;r<i;r++)v.faceNormals.push(g[e].faceNormals[r].clone());this.morphNormals.push(v)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var x=t.skinIndices;for(e=0,n=x.length;e<n;e++)this.skinIndices.push(x[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var S=t.boundingBox;null!==S&&(this.boundingBox=S.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),Ri.prototype=Object.create(Ni.prototype),Ri.prototype.constructor=Ri,Di.prototype=Object.create(li.prototype),Di.prototype.constructor=Di;var Fi={clone:zi,merge:Bi},ji=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",Ui=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";function Vi(t){Vr.call(this),this.type=\"ShaderMaterial\",this.defines={},this.uniforms={},this.vertexShader=ji,this.fragmentShader=Ui,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(t))}function Hi(){Zn.call(this),this.type=\"Camera\",this.matrixWorldInverse=new Ln,this.projectionMatrix=new Ln,this.projectionMatrixInverse=new Ln}function Gi(t,e,n,r){Hi.call(this),this.type=\"PerspectiveCamera\",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Vi.prototype=Object.create(Vr.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isShaderMaterial=!0,Vi.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=zi(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Vi.prototype.toJSON=function(t){var e=Vr.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:\"t\",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:\"c\",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:\"v2\",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:\"v3\",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:\"v4\",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:\"m3\",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:\"m4\",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var i={};for(var a in this.extensions)!0===this.extensions[a]&&(i[a]=!0);return Object.keys(i).length>0&&(e.extensions=i),e},Hi.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Hi,isCamera:!0,copy:function(t,e){return Zn.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn(\"THREE.Camera: .getWorldDirection() target is now required\"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Zn.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Gi.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Gi,isPerspectiveCamera:!0,copy:function(t,e){return Hi.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*cn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*cn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*cn.RAD2DEG*Math.atan(Math.tan(.5*cn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*cn.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,e-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Zn.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var Wi=90,qi=1;function Xi(t,e,n,r){Zn.call(this),this.type=\"CubeCamera\";var i=new Gi(Wi,qi,t,e);i.up.set(0,-1,0),i.lookAt(new mn(1,0,0)),this.add(i);var a=new Gi(Wi,qi,t,e);a.up.set(0,-1,0),a.lookAt(new mn(-1,0,0)),this.add(a);var o=new Gi(Wi,qi,t,e);o.up.set(0,0,1),o.lookAt(new mn(0,1,0)),this.add(o);var s=new Gi(Wi,qi,t,e);s.up.set(0,0,-1),s.lookAt(new mn(0,-1,0)),this.add(s);var u=new Gi(Wi,qi,t,e);u.up.set(0,-1,0),u.lookAt(new mn(0,0,1)),this.add(u);var l=new Gi(Wi,qi,t,e);l.up.set(0,-1,0),l.lookAt(new mn(0,0,-1)),this.add(l),r=r||{format:Gt,magFilter:Tt,minFilter:Tt},this.renderTarget=new Yi(n,n,r),this.renderTarget.texture.name=\"CubeCamera\",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),r=this.renderTarget,c=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,i),t.setRenderTarget(r,1),t.render(e,a),t.setRenderTarget(r,2),t.render(e,o),t.setRenderTarget(r,3),t.render(e,s),t.setRenderTarget(r,4),t.render(e,u),r.texture.generateMipmaps=c,t.setRenderTarget(r,5),t.render(e,l),t.setRenderTarget(n)},this.clear=function(t,e,n,r){for(var i=t.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)t.setRenderTarget(a,o),t.clear(e,n,r);t.setRenderTarget(i)}}function Yi(t,e,n){Sn.call(this,t,e,n)}function Qi(t,e,n,r,i,a,o,s,u,l,c,h){xn.call(this,null,a,o,s,u,l,r,i,c,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:xt,this.minFilter=void 0!==l?l:xt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}Xi.prototype=Object.create(Zn.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(Sn.prototype),Yi.prototype.constructor=Yi,Yi.prototype.isWebGLRenderTargetCube=!0,Yi.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new $n,r={uniforms:{tEquirect:{value:null}},vertexShader:[\"varying vec3 vWorldDirection;\",\"vec3 transformDirection( in vec3 dir, in mat4 matrix ) {\",\"\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\",\"}\",\"void main() {\",\"\\tvWorldDirection = transformDirection( position, modelMatrix );\",\"\\t#include <begin_vertex>\",\"\\t#include <project_vertex>\",\"}\"].join(\"\\n\"),fragmentShader:[\"uniform sampler2D tEquirect;\",\"varying vec3 vWorldDirection;\",\"#define RECIPROCAL_PI 0.31830988618\",\"#define RECIPROCAL_PI2 0.15915494\",\"void main() {\",\"\\tvec3 direction = normalize( vWorldDirection );\",\"\\tvec2 sampleUV;\",\"\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\",\"\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\",\"\\tgl_FragColor = texture2D( tEquirect, sampleUV );\",\"}\"].join(\"\\n\")},i=new Vi({type:\"CubemapFromEquirect\",uniforms:zi(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:y,blending:M});i.uniforms.tEquirect.value=e;var a=new Ci(new Di(5,5,5),i);n.add(a);var o=new Xi(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name=\"CubeCameraTexture\",o.update(t,n),a.geometry.dispose(),a.material.dispose(),this},Qi.prototype=Object.create(xn.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isDataTexture=!0;var Zi=new mn,$i=new mn,Ji=new yn;function Ki(t,e){this.normal=void 0!==t?t:new mn(1,0,0),this.constant=void 0!==e?e:0}Object.assign(Ki.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var r=Zi.subVectors(n,e).cross($i.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Plane: .projectPoint() target is now required\"),e=new mn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn(\"THREE.Plane: .intersectLine() target is now required\"),e=new mn);var n=t.delta(Zi),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn(\"THREE.Plane: .coplanarPoint() target is now required\"),t=new mn),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||Ji.getNormalMatrix(t),r=this.coplanarPoint(Zi).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var ta=new dr,ea=new mn;function na(t,e,n,r,i,a){this.planes=[void 0!==t?t:new Ki,void 0!==e?e:new Ki,void 0!==n?n:new Ki,void 0!==r?r:new Ki,void 0!==i?i:new Ki,void 0!==a?a:new Ki]}Object.assign(na.prototype,{set:function(t,e,n,r,i,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-r,c-s,p-h,y-m).normalize(),e[1].setComponents(o+r,c+s,p+h,y+m).normalize(),e[2].setComponents(o+i,c+u,p+f,y+g).normalize(),e[3].setComponents(o-i,c-u,p-f,y-g).normalize(),e[4].setComponents(o-a,c-l,p-d,y-v).normalize(),e[5].setComponents(o+a,c+l,p+d,y+v).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ta.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ta)},intersectsSprite:function(t){return ta.center.set(0,0,0),ta.radius=.7071067811865476,ta.applyMatrix4(t.matrixWorld),this.intersectsSphere(ta)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(ea.x=r.normal.x>0?t.max.x:t.min.x,ea.y=r.normal.y>0?t.max.y:t.min.y,ea.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(ea)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var ra={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",alphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\",aomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"vec3 transformed = vec3( position );\",beginnormal_vertex:\"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\",bsdfs:\"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha  = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\",bumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\",clipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\",clipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\",color_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\",cube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\",defaultnormal_vertex:\"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = normalMatrix * objectTangent;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\",encodings_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\",envmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\",envmap_common_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\",envmap_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\",envmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\",envmap_physical_pars_fragment:\"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t  vec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\",fog_vertex:\"#ifdef USE_FOG\\n\\tfogDepth = -mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\",gradientmap_pars_fragment:\"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\",lightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\",lights_pars_begin:\"uniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\",lights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = saturate( clearcoat );\\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\",lights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\",lights_fragment_begin:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\",lights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\",lights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n#endif\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\",map_particle_fragment:\"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\",map_particle_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\",normal_fragment_begin:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\",normal_fragment_maps:\"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\",normalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy *= normalScale;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvec3 NfromST = cross( S, T );\\n\\t\\t\\tif( dot( NfromST, N ) > 0.0 ) {\\n\\t\\t\\t\\tS *= -1.0;\\n\\t\\t\\t\\tT *= -1.0;\\n\\t\\t\\t}\\n\\t\\t#else\\n\\t\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\",clearcoat_normal_fragment_begin:\"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\",clearcoat_normal_fragment_maps:\"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = clearcoatNormalScale * mapN.xy;\\n\\t\\tclearcoatNormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\\n\\t#endif\\n#endif\",clearcoat_normalmap_pars_fragment:\"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\",packing:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 encodeHalfRGBA ( vec2 v ) {\\n\\tvec4 encoded = vec4( 0.0 );\\n\\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\\n\\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\\n\\tencoded.xy = encoded.xy - ( encoded.yy * offset );\\n\\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\\n\\tencoded.zw = encoded.zw - ( encoded.ww * offset );\\n\\treturn encoded;\\n}\\nvec2 decodeHalfRGBA( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\",premultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\",project_vertex:\"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\",dithering_fragment:\"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\",dithering_pars_fragment:\"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\",shadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\",shadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\",shadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\",skinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\",skinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\",specularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\",tonemapping_pars_fragment:\"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\\n}\",uv_pars_fragment:\"#ifdef USE_UV\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#ifdef USE_UV\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\",uv_vertex:\"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\",background_frag:\"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",background_vert:\"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\",cube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\nvoid main() {\\n\\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",cube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\",depth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\",distanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\",distanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\",equirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",equirect_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",linedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",meshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",meshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshmatcap_frag:\"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",meshmatcap_vert:\"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\",meshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphysical_frag:\"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSPARENCY\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSPARENCY\\n\\tuniform float transparency;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSPARENCY\\n\\t\\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphysical_vert:\"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",normal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\",normal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\",points_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",points_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\",shadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\",shadow_vert:\"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",sprite_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",sprite_vert:\"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\"},ia={common:{diffuse:{value:new Dr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new yn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new hn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Dr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new yn}},sprite:{diffuse:{value:new Dr(15658734)},opacity:{value:1},center:{value:new hn(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new yn}}},aa={basic:{uniforms:Bi([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.fog]),vertexShader:ra.meshbasic_vert,fragmentShader:ra.meshbasic_frag},lambert:{uniforms:Bi([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.fog,ia.lights,{emissive:{value:new Dr(0)}}]),vertexShader:ra.meshlambert_vert,fragmentShader:ra.meshlambert_frag},phong:{uniforms:Bi([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.gradientmap,ia.fog,ia.lights,{emissive:{value:new Dr(0)},specular:{value:new Dr(1118481)},shininess:{value:30}}]),vertexShader:ra.meshphong_vert,fragmentShader:ra.meshphong_frag},standard:{uniforms:Bi([ia.common,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.roughnessmap,ia.metalnessmap,ia.fog,ia.lights,{emissive:{value:new Dr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ra.meshphysical_vert,fragmentShader:ra.meshphysical_frag},matcap:{uniforms:Bi([ia.common,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.fog,{matcap:{value:null}}]),vertexShader:ra.meshmatcap_vert,fragmentShader:ra.meshmatcap_frag},points:{uniforms:Bi([ia.points,ia.fog]),vertexShader:ra.points_vert,fragmentShader:ra.points_frag},dashed:{uniforms:Bi([ia.common,ia.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ra.linedashed_vert,fragmentShader:ra.linedashed_frag},depth:{uniforms:Bi([ia.common,ia.displacementmap]),vertexShader:ra.depth_vert,fragmentShader:ra.depth_frag},normal:{uniforms:Bi([ia.common,ia.bumpmap,ia.normalmap,ia.displacementmap,{opacity:{value:1}}]),vertexShader:ra.normal_vert,fragmentShader:ra.normal_frag},sprite:{uniforms:Bi([ia.sprite,ia.fog]),vertexShader:ra.sprite_vert,fragmentShader:ra.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null}},vertexShader:ra.background_vert,fragmentShader:ra.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ra.cube_vert,fragmentShader:ra.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ra.equirect_vert,fragmentShader:ra.equirect_frag},distanceRGBA:{uniforms:Bi([ia.common,ia.displacementmap,{referencePosition:{value:new mn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ra.distanceRGBA_vert,fragmentShader:ra.distanceRGBA_frag},shadow:{uniforms:Bi([ia.lights,ia.fog,{color:{value:new Dr(0)},opacity:{value:1}}]),vertexShader:ra.shadow_vert,fragmentShader:ra.shadow_frag}};function oa(){var t=null,e=!1,n=null;function r(i,a){!1!==e&&(n(i,a),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function sa(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);void 0===i?e.set(n,function(e,n){var r=e.array,i=e.dynamic?35048:35044,a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,r,i),e.onUploadCallback();var o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):r instanceof Uint16Array?o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:r instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(n,r)):i.version<n.version&&(!function(e,n,r){var i=n.array,a=n.updateRange;t.bindBuffer(r,e),!1===n.dynamic?t.bufferData(r,i,35044):-1===a.count?t.bufferSubData(r,0,i):0===a.count?console.error(\"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.\"):(t.bufferSubData(r,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count)),a.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function ua(t,e,n,r){Ni.call(this),this.type=\"PlaneGeometry\",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new la(t,e,n,r)),this.mergeVertices()}function la(t,e,n,r){li.call(this),this.type=\"PlaneBufferGeometry\",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i,a,o=(t=t||1)/2,s=(e=e||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,f=t/u,d=e/l,p=[],m=[],g=[],v=[];for(a=0;a<h;a++){var y=a*d-s;for(i=0;i<c;i++){var b=i*f-o;m.push(b,-y,0),g.push(0,0,1),v.push(i/u),v.push(1-a/l)}}for(a=0;a<l;a++)for(i=0;i<u;i++){var _=i+c*a,x=i+c*(a+1),w=i+1+c*(a+1),S=i+1+c*a;p.push(_,x,S),p.push(x,w,S)}this.setIndex(p),this.addAttribute(\"position\",new Jr(m,3)),this.addAttribute(\"normal\",new Jr(g,3)),this.addAttribute(\"uv\",new Jr(v,2))}function ca(t,e,n,r){var i,a,o=new Dr(0),s=0,u=null,l=0;function c(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),c(o,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){c(o,s=t)},render:function(e,r,h,f){var d=r.background,p=t.vr,m=p.getSession&&p.getSession();if(m&&\"additive\"===m.environmentBlendMode&&(d=null),null===d?(c(o,s),u=null,l=0):d&&d.isColor&&(c(d,1),f=!0,u=null,l=0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===a&&((a=new Ci(new Di(1,1,1),new Vi({type:\"BackgroundCubeMaterial\",uniforms:zi(aa.cube.uniforms),vertexShader:aa.cube.vertexShader,fragmentShader:aa.cube.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute(\"normal\"),a.geometry.removeAttribute(\"uv\"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,\"map\",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var g=d.isWebGLRenderTargetCube?d.texture:d;a.material.uniforms.tCube.value=g,a.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,u===d&&l===g.version||(a.material.needsUpdate=!0,u=d,l=g.version),e.unshift(a,a.geometry,a.material,0,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new Ci(new la(2,2),new Vi({type:\"BackgroundMaterial\",uniforms:zi(aa.background.uniforms),vertexShader:aa.background.vertexShader,fragmentShader:aa.background.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute(\"normal\"),Object.defineProperty(i.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),u===d&&l===d.version||(i.material.needsUpdate=!0,u=d,l=d.version),e.unshift(i,i.geometry,i.material,0,0,null))}}}function ha(t,e,n,r){var i;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(a,o,s){var u,l;if(r.isWebGL2)u=t,l=\"drawArraysInstanced\";else if(l=\"drawArraysInstancedANGLE\",null===(u=e.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");u[l](i,o,s,a.maxInstancedCount),n.update(s,i,a.maxInstancedCount)}}function fa(t,e,n){var r;function i(e){if(\"highp\"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return\"highp\";e=\"mediump\"}return\"mediump\"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?\"mediump\":\"lowp\"}var a=\"undefined\"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:\"highp\",s=i(o);s!==o&&(console.warn(\"THREE.WebGLRenderer:\",o,\"not supported, using\",s,\"instead.\"),o=s);var u=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),c=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),d=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=c>0,y=a||!!e.get(\"OES_texture_float\");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get(\"EXT_texture_filter_anisotropic\");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?t.getParameter(36183):0}}function da(){var t=this,e=null,n=0,r=!1,i=!1,a=new Ki,o=new yn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,n,r,i){var u=null!==e?e.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;o.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==u;++f,d+=4)a.copy(e[f]).applyMatrix4(h,o),a.normal.toArray(l,d),l[d+3]=a.constant}s.value=l,s.needsUpdate=!0}return t.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,a){var o=0!==t.length||i||0!==n||r;return r=i,e=l(t,a,0),n=t.length,o},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,a,o,c,h,f){if(!r||null===t||0===t.length||i&&!o)i?l(null):u();else{var d=i?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=l(t,c,p,f);for(var g=0;g!==p;++g)m[g]=e[g];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function pa(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case\"WEBGL_depth_texture\":r=t.getExtension(\"WEBGL_depth_texture\")||t.getExtension(\"MOZ_WEBGL_depth_texture\")||t.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":r=t.getExtension(\"EXT_texture_filter_anisotropic\")||t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":r=t.getExtension(\"WEBGL_compressed_texture_s3tc\")||t.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":r=t.getExtension(\"WEBGL_compressed_texture_pvrtc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:r=t.getExtension(n)}return null===r&&console.warn(\"THREE.WebGLRenderer: \"+n+\" extension not supported.\"),e[n]=r,r}}}function ma(t,e,n){var r=new WeakMap,i=new WeakMap;function a(t){var o=t.target,s=r.get(o);for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);o.removeEventListener(\"dispose\",a),r.delete(o);var l=i.get(s);l&&(e.remove(l),i.delete(s)),n.memory.geometries--}function o(t){var n=[],r=t.index,a=t.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{s=a.array;o=a.version;for(u=0,l=s.length/3-1;u<l;u+=3){c=u+0,h=u+1,f=u+2;n.push(c,h,h,f,f,c)}}var d=new(ei(n)>65535?$r:Qr)(n,1);d.version=o,e.update(d,34963);var p=i.get(t);p&&e.remove(p),i.set(t,d)}return{get:function(t,e){var i=r.get(e);return i||(e.addEventListener(\"dispose\",a),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new li).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)},update:function(t){var n=t.index,r=t.attributes;for(var i in null!==n&&e.update(n,34963),r)e.update(r[i],34962);var a=t.morphAttributes;for(var i in a)for(var o=a[i],s=0,u=o.length;s<u;s++)e.update(o[s],34962)},getWireframeAttribute:function(t){var e=i.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return i.get(t)}}}function ga(t,e,n,r){var i,a,o;this.setMode=function(t){i=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,a,e*o),n.update(r,i)},this.renderInstances=function(s,u,l){var c,h;if(r.isWebGL2)c=t,h=\"drawElementsInstanced\";else if(h=\"drawElementsInstancedANGLE\",null===(c=e.get(\"ANGLE_instanced_arrays\")))return void console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");c[h](i,l,a,u*o,s.maxInstancedCount),n.update(l,i,s.maxInstancedCount)}}function va(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(r=r||1,e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 5:case 6:e.triangles+=r*(t-2);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",n)}}}}function ya(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ba(t){var e={},n=new Float32Array(8);return{update:function(r,i,a,o){var s=r.morphTargetInfluences,u=s.length,l=e[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];e[i.id]=l}var h=a.morphTargets&&i.morphAttributes.position,f=a.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++){0!==(d=l[c])[1]&&(h&&i.removeAttribute(\"morphTarget\"+c),f&&i.removeAttribute(\"morphNormal\"+c))}for(c=0;c<u;c++){(d=l[c])[0]=c,d[1]=s[c]}for(l.sort(ya),c=0;c<8;c++){var d;if(d=l[c]){var p=d[0],m=d[1];if(m){h&&i.addAttribute(\"morphTarget\"+c,h[p]),f&&i.addAttribute(\"morphNormal\"+c,f[p]),n[c]=m;continue}}n[c]=0}o.getUniforms().setValue(t,\"morphTargetInfluences\",n)}}}function _a(t,e){var n={};return{update:function(r){var i=e.render.frame,a=r.geometry,o=t.get(r,a);return n[o.id]!==i&&(a.isGeometry&&o.updateFromObject(r),t.update(o),n[o.id]=i),o},dispose:function(){n={}}}}function xa(t,e,n,r,i,a,o,s,u,l){t=void 0!==t?t:[],e=void 0!==e?e:ht,o=void 0!==o?o:Gt,xn.call(this,t,e,n,r,i,a,o,s,u,l),this.flipY=!1}function wa(t,e,n,r){xn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=xt,this.minFilter=xt,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}function Sa(t,e,n,r){xn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=xt,this.minFilter=xt,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}aa.physical={uniforms:Bi([aa.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Dr(0)},clearcoatNormalScale:{value:new hn(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:ra.meshphysical_vert,fragmentShader:ra.meshphysical_frag},ua.prototype=Object.create(Ni.prototype),ua.prototype.constructor=ua,la.prototype=Object.create(li.prototype),la.prototype.constructor=la,xa.prototype=Object.create(xn.prototype),xa.prototype.constructor=xa,xa.prototype.isCubeTexture=!0,Object.defineProperty(xa.prototype,\"images\",{get:function(){return this.image},set:function(t){this.image=t}}),wa.prototype=Object.create(xn.prototype),wa.prototype.constructor=wa,wa.prototype.isDataTexture2DArray=!0,Sa.prototype=Object.create(xn.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isDataTexture3D=!0;var Ea=new xn,Ma=new wa,Ta=new Sa,Ca=new xa,Pa=[],ka=[],Aa=new Float32Array(16),Oa=new Float32Array(9),La=new Float32Array(4);function Ia(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,a=Pa[i];if(void 0===a&&(a=new Float32Array(i),Pa[i]=a),0!==e){r.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Na(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ra(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Da(t,e){var n=ka[e];void 0===n&&(n=new Int32Array(e),ka[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function za(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Ba(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Na(n,e))return;t.uniform2fv(this.addr,e),Ra(n,e)}}function Fa(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Na(n,e))return;t.uniform3fv(this.addr,e),Ra(n,e)}}function ja(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Na(n,e))return;t.uniform4fv(this.addr,e),Ra(n,e)}}function Ua(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Na(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ra(n,e)}else{if(Na(n,r))return;La.set(r),t.uniformMatrix2fv(this.addr,!1,La),Ra(n,r)}}function Va(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Na(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ra(n,e)}else{if(Na(n,r))return;Oa.set(r),t.uniformMatrix3fv(this.addr,!1,Oa),Ra(n,r)}}function Ha(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Na(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ra(n,e)}else{if(Na(n,r))return;Aa.set(r),t.uniformMatrix4fv(this.addr,!1,Aa),Ra(n,r)}}function Ga(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Ea,i)}function Wa(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ma,i)}function qa(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Ta,i)}function Xa(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Ca,i)}function Ya(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Qa(t,e){var n=this.cache;Na(n,e)||(t.uniform2iv(this.addr,e),Ra(n,e))}function Za(t,e){var n=this.cache;Na(n,e)||(t.uniform3iv(this.addr,e),Ra(n,e))}function $a(t,e){var n=this.cache;Na(n,e)||(t.uniform4iv(this.addr,e),Ra(n,e))}function Ja(t,e){t.uniform1fv(this.addr,e)}function Ka(t,e){t.uniform1iv(this.addr,e)}function to(t,e){t.uniform2iv(this.addr,e)}function eo(t,e){t.uniform3iv(this.addr,e)}function no(t,e){t.uniform4iv(this.addr,e)}function ro(t,e){var n=Ia(e,this.size,2);t.uniform2fv(this.addr,n)}function io(t,e){var n=Ia(e,this.size,3);t.uniform3fv(this.addr,n)}function ao(t,e){var n=Ia(e,this.size,4);t.uniform4fv(this.addr,n)}function oo(t,e){var n=Ia(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function so(t,e){var n=Ia(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function uo(t,e){var n=Ia(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function lo(t,e,n){var r=e.length,i=Da(n,r);t.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(e[a]||Ea,i[a])}function co(t,e,n){var r=e.length,i=Da(n,r);t.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(e[a]||Ca,i[a])}function ho(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return za;case 35664:return Ba;case 35665:return Fa;case 35666:return ja;case 35674:return Ua;case 35675:return Va;case 35676:return Ha;case 35678:case 36198:return Ga;case 35679:return qa;case 35680:return Xa;case 36289:return Wa;case 5124:case 35670:return Ya;case 35667:case 35671:return Qa;case 35668:case 35672:return Za;case 35669:case 35673:return $a}}(e.type)}function fo(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ja;case 35664:return ro;case 35665:return io;case 35666:return ao;case 35674:return oo;case 35675:return so;case 35676:return uo;case 35678:return lo;case 35680:return co;case 5124:case 35670:return Ka;case 35667:case 35671:return to;case 35668:case 35672:return eo;case 35669:case 35673:return no}}(e.type)}function po(t){this.id=t,this.seq=[],this.map={}}fo.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Ra(e,t)},po.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(t,e[o.id],n)}};var mo=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;function go(t,e){t.seq.push(e),t.map[e.id]=e}function vo(t,e,n){var r=t.name,i=r.length;for(mo.lastIndex=0;;){var a=mo.exec(r),o=mo.lastIndex,s=a[1],u=\"]\"===a[2],l=a[3];if(u&&(s|=0),void 0===l||\"[\"===l&&o+2===i){go(n,void 0===l?new ho(s,t,e):new fo(s,t,e));break}var c=n.map[s];void 0===c&&go(n,c=new po(s)),n=c}}function yo(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);vo(i,t.getUniformLocation(e,i.name),this)}}function bo(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}yo.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},yo.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},yo.upload=function(t,e,n,r){for(var i=0,a=e.length;i!==a;++i){var o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}},yo.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var a=t[r];a.id in e&&n.push(a)}return n};var _o=0;function xo(t){switch(t){case Ie:return[\"Linear\",\"( value )\"];case Ne:return[\"sRGB\",\"( value )\"];case De:return[\"RGBE\",\"( value )\"];case Be:return[\"RGBM\",\"( value, 7.0 )\"];case Fe:return[\"RGBM\",\"( value, 16.0 )\"];case je:return[\"RGBD\",\"( value, 256.0 )\"];case Re:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];case ze:return[\"LogLuv\",\"( value )\"];default:throw new Error(\"unsupported encoding: \"+t)}}function wo(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&\"\"===i?\"\":\"THREE.WebGLShader: gl.getShaderInfoLog() \"+n+\"\\n\"+i+function(t){for(var e=t.split(\"\\n\"),n=0;n<e.length;n++)e[n]=n+1+\": \"+e[n];return e.join(\"\\n\")}(t.getShaderSource(e))}function So(t,e){var n=xo(e);return\"vec4 \"+t+\"( vec4 value ) { return \"+n[0]+\"ToLinear\"+n[1]+\"; }\"}function Eo(t,e){var n;switch(e){case at:n=\"Linear\";break;case ot:n=\"Reinhard\";break;case st:n=\"Uncharted2\";break;case ut:n=\"OptimizedCineon\";break;case lt:n=\"ACESFilmic\";break;default:throw new Error(\"unsupported toneMapping: \"+e)}return\"vec3 \"+t+\"( vec3 color ) { return \"+n+\"ToneMapping( color ); }\"}function Mo(t){return\"\"!==t}function To(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Co(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Po(t){return t.replace(/^[ \\t]*#include +<([\\w\\d.\\/]+)>/gm,(function(t,e){var n=ra[e];if(void 0===n)throw new Error(\"Can not resolve #include <\"+e+\">\");return Po(n)}))}function ko(t){return t.replace(/#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,(function(t,e,n,r){for(var i=\"\",a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\\[ i \\]/g,\"[ \"+a+\" ]\").replace(/UNROLLED_LOOP_INDEX/g,a);return i}))}function Ao(t,e,n,r,i,a,o){var s=t.getContext(),u=r.defines,l=i.vertexShader,c=i.fragmentShader,h=\"SHADOWMAP_TYPE_BASIC\";a.shadowMapType===p?h=\"SHADOWMAP_TYPE_PCF\":a.shadowMapType===m?h=\"SHADOWMAP_TYPE_PCF_SOFT\":a.shadowMapType===g&&(h=\"SHADOWMAP_TYPE_VSM\");var f=\"ENVMAP_TYPE_CUBE\",d=\"ENVMAP_MODE_REFLECTION\",v=\"ENVMAP_BLENDING_MULTIPLY\";if(a.envMap){switch(r.envMap.mapping){case ht:case ft:f=\"ENVMAP_TYPE_CUBE\";break;case gt:case vt:f=\"ENVMAP_TYPE_CUBE_UV\";break;case dt:case pt:f=\"ENVMAP_TYPE_EQUIREC\";break;case mt:f=\"ENVMAP_TYPE_SPHERE\"}switch(r.envMap.mapping){case ft:case pt:d=\"ENVMAP_MODE_REFRACTION\"}switch(r.combine){case et:v=\"ENVMAP_BLENDING_MULTIPLY\";break;case nt:v=\"ENVMAP_BLENDING_MIX\";break;case rt:v=\"ENVMAP_BLENDING_ADD\"}}var y,b,_,x,w,S=t.gammaFactor>0?t.gammaFactor:1,E=o.isWebGL2?\"\":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?\"#extension GL_OES_standard_derivatives : enable\":\"\",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get(\"EXT_frag_depth\")?\"#extension GL_EXT_frag_depth : enable\":\"\",t.drawBuffers&&n.get(\"WEBGL_draw_buffers\")?\"#extension GL_EXT_draw_buffers : require\":\"\",(t.shaderTextureLOD||e.envMap)&&n.get(\"EXT_shader_texture_lod\")?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(Mo).join(\"\\n\")}(r.extensions,a,e),M=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push(\"#define \"+n+\" \"+r)}return e.join(\"\\n\")}(u),T=s.createProgram();if(r.isRawShaderMaterial?((y=[M].filter(Mo).join(\"\\n\")).length>0&&(y+=\"\\n\"),(b=[E,M].filter(Mo).join(\"\\n\")).length>0&&(b+=\"\\n\")):(y=[\"precision \"+a.precision+\" float;\",\"precision \"+a.precision+\" int;\",\"highp\"===a.precision?\"#define HIGH_PRECISION\":\"\",\"#define SHADER_NAME \"+i.name,M,a.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+S,\"#define MAX_BONES \"+a.maxBones,a.useFog&&a.fog?\"#define USE_FOG\":\"\",a.useFog&&a.fogExp2?\"#define FOG_EXP2\":\"\",a.map?\"#define USE_MAP\":\"\",a.envMap?\"#define USE_ENVMAP\":\"\",a.envMap?\"#define \"+d:\"\",a.lightMap?\"#define USE_LIGHTMAP\":\"\",a.aoMap?\"#define USE_AOMAP\":\"\",a.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",a.bumpMap?\"#define USE_BUMPMAP\":\"\",a.normalMap?\"#define USE_NORMALMAP\":\"\",a.normalMap&&a.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",a.normalMap&&a.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",a.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",a.displacementMap&&a.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",a.specularMap?\"#define USE_SPECULARMAP\":\"\",a.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",a.metalnessMap?\"#define USE_METALNESSMAP\":\"\",a.alphaMap?\"#define USE_ALPHAMAP\":\"\",a.vertexTangents?\"#define USE_TANGENT\":\"\",a.vertexColors?\"#define USE_COLOR\":\"\",a.vertexUvs?\"#define USE_UV\":\"\",a.flatShading?\"#define FLAT_SHADED\":\"\",a.skinning?\"#define USE_SKINNING\":\"\",a.useVertexTexture?\"#define BONE_TEXTURE\":\"\",a.morphTargets?\"#define USE_MORPHTARGETS\":\"\",a.morphNormals&&!1===a.flatShading?\"#define USE_MORPHNORMALS\":\"\",a.doubleSided?\"#define DOUBLE_SIDED\":\"\",a.flipSided?\"#define FLIP_SIDED\":\"\",a.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",a.shadowMapEnabled?\"#define \"+h:\"\",a.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",a.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get(\"EXT_frag_depth\"))?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_TANGENT\",\"\\tattribute vec4 tangent;\",\"#endif\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(Mo).join(\"\\n\"),b=[E,\"precision \"+a.precision+\" float;\",\"precision \"+a.precision+\" int;\",\"highp\"===a.precision?\"#define HIGH_PRECISION\":\"\",\"#define SHADER_NAME \"+i.name,M,a.alphaTest?\"#define ALPHATEST \"+a.alphaTest+(a.alphaTest%1?\"\":\".0\"):\"\",\"#define GAMMA_FACTOR \"+S,a.useFog&&a.fog?\"#define USE_FOG\":\"\",a.useFog&&a.fogExp2?\"#define FOG_EXP2\":\"\",a.map?\"#define USE_MAP\":\"\",a.matcap?\"#define USE_MATCAP\":\"\",a.envMap?\"#define USE_ENVMAP\":\"\",a.envMap?\"#define \"+f:\"\",a.envMap?\"#define \"+d:\"\",a.envMap?\"#define \"+v:\"\",a.lightMap?\"#define USE_LIGHTMAP\":\"\",a.aoMap?\"#define USE_AOMAP\":\"\",a.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",a.bumpMap?\"#define USE_BUMPMAP\":\"\",a.normalMap?\"#define USE_NORMALMAP\":\"\",a.normalMap&&a.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",a.normalMap&&a.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",a.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",a.specularMap?\"#define USE_SPECULARMAP\":\"\",a.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",a.metalnessMap?\"#define USE_METALNESSMAP\":\"\",a.alphaMap?\"#define USE_ALPHAMAP\":\"\",a.sheen?\"#define USE_SHEEN\":\"\",a.vertexTangents?\"#define USE_TANGENT\":\"\",a.vertexColors?\"#define USE_COLOR\":\"\",a.vertexUvs?\"#define USE_UV\":\"\",a.gradientMap?\"#define USE_GRADIENTMAP\":\"\",a.flatShading?\"#define FLAT_SHADED\":\"\",a.doubleSided?\"#define DOUBLE_SIDED\":\"\",a.flipSided?\"#define FLIP_SIDED\":\"\",a.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",a.shadowMapEnabled?\"#define \"+h:\"\",a.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",a.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",a.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get(\"EXT_frag_depth\"))?\"#define USE_LOGDEPTHBUF_EXT\":\"\",(r.extensions&&r.extensions.shaderTextureLOD||a.envMap)&&(o.isWebGL2||e.get(\"EXT_shader_texture_lod\"))?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",a.toneMapping!==it?\"#define TONE_MAPPING\":\"\",a.toneMapping!==it?ra.tonemapping_pars_fragment:\"\",a.toneMapping!==it?Eo(\"toneMapping\",a.toneMapping):\"\",a.dithering?\"#define DITHERING\":\"\",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?ra.encodings_pars_fragment:\"\",a.mapEncoding?So(\"mapTexelToLinear\",a.mapEncoding):\"\",a.matcapEncoding?So(\"matcapTexelToLinear\",a.matcapEncoding):\"\",a.envMapEncoding?So(\"envMapTexelToLinear\",a.envMapEncoding):\"\",a.emissiveMapEncoding?So(\"emissiveMapTexelToLinear\",a.emissiveMapEncoding):\"\",a.outputEncoding?(_=\"linearToOutputTexel\",x=a.outputEncoding,w=xo(x),\"vec4 \"+_+\"( vec4 value ) { return LinearTo\"+w[0]+w[1]+\"; }\"):\"\",a.depthPacking?\"#define DEPTH_PACKING \"+r.depthPacking:\"\",\"\\n\"].filter(Mo).join(\"\\n\")),l=Co(l=To(l=Po(l),a),a),c=Co(c=To(c=Po(c),a),a),l=ko(l),c=ko(c),o.isWebGL2&&!r.isRawShaderMaterial){var C=!1,P=/^\\s*#version\\s+300\\s+es\\s*\\n/;r.isShaderMaterial&&null!==l.match(P)&&null!==c.match(P)&&(C=!0,l=l.replace(P,\"\"),c=c.replace(P,\"\")),y=[\"#version 300 es\\n\",\"#define attribute in\",\"#define varying out\",\"#define texture2D texture\"].join(\"\\n\")+\"\\n\"+y,b=[\"#version 300 es\\n\",\"#define varying in\",C?\"\":\"out highp vec4 pc_fragColor;\",C?\"\":\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\",\"#define texture2D texture\",\"#define textureCube texture\",\"#define texture2DProj textureProj\",\"#define texture2DLodEXT textureLod\",\"#define texture2DProjLodEXT textureProjLod\",\"#define textureCubeLodEXT textureLod\",\"#define texture2DGradEXT textureGrad\",\"#define texture2DProjGradEXT textureProjGrad\",\"#define textureCubeGradEXT textureGrad\"].join(\"\\n\")+\"\\n\"+b}var k,A,O=b+c,L=bo(s,35633,y+l),I=bo(s,35632,O);if(s.attachShader(T,L),s.attachShader(T,I),void 0!==r.index0AttributeName?s.bindAttribLocation(T,0,r.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(T,0,\"position\"),s.linkProgram(T),t.debug.checkShaderErrors){var N=s.getProgramInfoLog(T).trim(),R=s.getShaderInfoLog(L).trim(),D=s.getShaderInfoLog(I).trim(),z=!0,B=!0;if(!1===s.getProgramParameter(T,35714)){z=!1;var F=wo(s,L,\"vertex\"),j=wo(s,I,\"fragment\");console.error(\"THREE.WebGLProgram: shader error: \",s.getError(),\"35715\",s.getProgramParameter(T,35715),\"gl.getProgramInfoLog\",N,F,j)}else\"\"!==N?console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",N):\"\"!==R&&\"\"!==D||(B=!1);B&&(this.diagnostics={runnable:z,material:r,programLog:N,vertexShader:{log:R,prefix:y},fragmentShader:{log:D,prefix:b}})}return s.deleteShader(L),s.deleteShader(I),this.getUniforms=function(){return void 0===k&&(k=new yo(s,T)),k},this.getAttributes=function(){return void 0===A&&(A=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var a=t.getActiveAttrib(e,i).name;n[a]=t.getAttribLocation(e,a)}return n}(s,T)),A},this.destroy=function(){s.deleteProgram(T),this.program=void 0},this.name=i.name,this.id=_o++,this.code=n,this.usedTimes=1,this.program=T,this.vertexShader=L,this.fragmentShader=I,this}function Oo(t,e,n){var r=[],i={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"phong\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"},a=[\"precision\",\"supportsVertexTextures\",\"map\",\"mapEncoding\",\"matcap\",\"matcapEncoding\",\"envMap\",\"envMapMode\",\"envMapEncoding\",\"lightMap\",\"aoMap\",\"emissiveMap\",\"emissiveMapEncoding\",\"bumpMap\",\"normalMap\",\"objectSpaceNormalMap\",\"tangentSpaceNormalMap\",\"clearcoatNormalMap\",\"displacementMap\",\"specularMap\",\"roughnessMap\",\"metalnessMap\",\"gradientMap\",\"alphaMap\",\"combine\",\"vertexColors\",\"vertexTangents\",\"fog\",\"useFog\",\"fogExp2\",\"flatShading\",\"sizeAttenuation\",\"logarithmicDepthBuffer\",\"skinning\",\"maxBones\",\"useVertexTexture\",\"morphTargets\",\"morphNormals\",\"maxMorphTargets\",\"maxMorphNormals\",\"premultipliedAlpha\",\"numDirLights\",\"numPointLights\",\"numSpotLights\",\"numHemiLights\",\"numRectAreaLights\",\"shadowMapEnabled\",\"shadowMapType\",\"toneMapping\",\"physicallyCorrectLights\",\"alphaTest\",\"doubleSided\",\"flipSided\",\"numClippingPlanes\",\"numClipIntersection\",\"depthPacking\",\"dithering\",\"sheen\"];function o(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),n=t.texture.encoding):n=Ie,n===Ie&&e&&(n=Re),n}this.getParameters=function(e,r,a,s,u,l,c){var h=i[e.type],f=c.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),a=Math.min(i,e.length);return a<e.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+e.length+\" bones. This GPU supports \"+a+\".\"),0):a}(c):0,d=n.precision;null!==e.precision&&(d=n.getMaxPrecision(e.precision))!==e.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",e.precision,\"not supported, using\",d,\"instead.\");var p=t.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:o(p?p.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:o(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:o(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:o(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===gt||e.envMap.mapping===vt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:o(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ge,tangentSpaceNormalMap:e.normalMapType===He,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap),fog:!!s,useFog:e.fog,fogExp2:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:u,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&a.length>0,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:it,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===b,flipSided:e.side===y,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var o=0;o<a.length;o++)r.push(n[a[o]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.push(t.gammaFactor),r.join()},this.acquireProgram=function(i,a,o,s){for(var u,l=0,c=r.length;l<c;l++){var h=r[l];if(h.code===s){++(u=h).usedTimes;break}}return void 0===u&&(u=new Ao(t,e,s,i,a,o,n),r.push(u)),u},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function Lo(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function Io(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function No(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ro(){var t=[],e=0,n=[],r=[],i={id:-1};function a(n,r,a,o,s,u){var l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:a,program:a.program||i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:u},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=a,l.program=a.program||i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=u),e++,l}return{opaque:n,transparent:r,init:function(){e=0,n.length=0,r.length=0},push:function(t,e,i,o,s,u){var l=a(t,e,i,o,s,u);(!0===i.transparent?r:n).push(l)},unshift:function(t,e,i,o,s,u){var l=a(t,e,i,o,s,u);(!0===i.transparent?r:n).unshift(l)},sort:function(){n.length>1&&n.sort(Io),r.length>1&&r.sort(No)}}}function Do(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener(\"dispose\",e),t.delete(r)}return{get:function(n,r){var i,a=t.get(n);return void 0===a?(i=new Ro,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener(\"dispose\",e)):void 0===(i=a.get(r))&&(i=new Ro,a.set(r,i)),i},dispose:function(){t=new WeakMap}}}function zo(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case\"DirectionalLight\":n={direction:new mn,color:new Dr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn};break;case\"SpotLight\":n={position:new mn,direction:new mn,color:new Dr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn};break;case\"PointLight\":n={position:new mn,color:new Dr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn,shadowCameraNear:1,shadowCameraFar:1e3};break;case\"HemisphereLight\":n={direction:new mn,skyColor:new Dr,groundColor:new Dr};break;case\"RectAreaLight\":n={color:new Dr,position:new mn,halfWidth:new mn,halfHeight:new mn}}return t[e.id]=n,n}}}var Bo=0;function Fo(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function jo(){for(var t=new zo,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)e.probe.push(new mn);var r=new mn,i=new Ln,a=new Ln;return{setup:function(n,o,s){for(var u=0,l=0,c=0,h=0;h<9;h++)e.probe[h].set(0,0,0);var f=0,d=0,p=0,m=0,g=0,v=0,y=0,b=0,_=s.matrixWorldInverse;n.sort(Fo),h=0;for(var x=n.length;h<x;h++){var w=n[h],S=w.color,E=w.intensity,M=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)u+=S.r*E,l+=S.g*E,c+=S.b*E;else if(w.isLightProbe)for(var C=0;C<9;C++)e.probe[C].addScaledVector(w.sh.coefficients[C],E);else if(w.isDirectionalLight){if((k=t.get(w)).color.copy(w.color).multiplyScalar(w.intensity),k.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(_),k.shadow=w.castShadow,w.castShadow){var P=w.shadow;k.shadowBias=P.bias,k.shadowRadius=P.radius,k.shadowMapSize=P.mapSize,e.directionalShadowMap[f]=T,e.directionalShadowMatrix[f]=w.shadow.matrix,v++}e.directional[f]=k,f++}else if(w.isSpotLight){if((k=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),k.position.applyMatrix4(_),k.color.copy(S).multiplyScalar(E),k.distance=M,k.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(_),k.coneCos=Math.cos(w.angle),k.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),k.decay=w.decay,k.shadow=w.castShadow,w.castShadow){P=w.shadow;k.shadowBias=P.bias,k.shadowRadius=P.radius,k.shadowMapSize=P.mapSize,e.spotShadowMap[p]=T,e.spotShadowMatrix[p]=w.shadow.matrix,b++}e.spot[p]=k,p++}else if(w.isRectAreaLight){(k=t.get(w)).color.copy(S).multiplyScalar(E),k.position.setFromMatrixPosition(w.matrixWorld),k.position.applyMatrix4(_),a.identity(),i.copy(w.matrixWorld),i.premultiply(_),a.extractRotation(i),k.halfWidth.set(.5*w.width,0,0),k.halfHeight.set(0,.5*w.height,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),e.rectArea[m]=k,m++}else if(w.isPointLight){if((k=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),k.position.applyMatrix4(_),k.color.copy(w.color).multiplyScalar(w.intensity),k.distance=w.distance,k.decay=w.decay,k.shadow=w.castShadow,w.castShadow){P=w.shadow;k.shadowBias=P.bias,k.shadowRadius=P.radius,k.shadowMapSize=P.mapSize,k.shadowCameraNear=P.camera.near,k.shadowCameraFar=P.camera.far,e.pointShadowMap[d]=T,e.pointShadowMatrix[d]=w.shadow.matrix,y++}e.point[d]=k,d++}else if(w.isHemisphereLight){var k;(k=t.get(w)).direction.setFromMatrixPosition(w.matrixWorld),k.direction.transformDirection(_),k.direction.normalize(),k.skyColor.copy(w.color).multiplyScalar(E),k.groundColor.copy(w.groundColor).multiplyScalar(E),e.hemi[g]=k,g++}}e.ambient[0]=u,e.ambient[1]=l,e.ambient[2]=c;var A=e.hash;A.directionalLength===f&&A.pointLength===d&&A.spotLength===p&&A.rectAreaLength===m&&A.hemiLength===g&&A.numDirectionalShadows===v&&A.numPointShadows===y&&A.numSpotShadows===b||(e.directional.length=f,e.spot.length=p,e.rectArea.length=m,e.point.length=d,e.hemi.length=g,e.directionalShadowMap.length=v,e.pointShadowMap.length=y,e.spotShadowMap.length=b,e.directionalShadowMatrix.length=v,e.pointShadowMatrix.length=y,e.spotShadowMatrix.length=b,A.directionalLength=f,A.pointLength=d,A.spotLength=p,A.rectAreaLength=m,A.hemiLength=g,A.numDirectionalShadows=v,A.numPointShadows=y,A.numSpotShadows=b,e.version=Bo++)},state:e}}function Uo(){var t=new jo,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Vo(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener(\"dispose\",e),t.delete(r)}return{get:function(n,r){var i;return!1===t.has(n)?(i=new Uo,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener(\"dispose\",e)):!1===t.get(n).has(r)?(i=new Uo,t.get(n).set(r,i)):i=t.get(n).get(r),i},dispose:function(){t=new WeakMap}}}function Ho(t){Vr.call(this),this.type=\"MeshDepthMaterial\",this.depthPacking=Ue,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Go(t){Vr.call(this),this.type=\"MeshDistanceMaterial\",this.referencePosition=new mn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}Ho.prototype=Object.create(Vr.prototype),Ho.prototype.constructor=Ho,Ho.prototype.isMeshDepthMaterial=!0,Ho.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Go.prototype=Object.create(Vr.prototype),Go.prototype.constructor=Go,Go.prototype.isMeshDistanceMaterial=!0,Go.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var Wo=\"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n  float mean = 0.0;\\n  float squared_mean = 0.0;\\n  \\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n    #ifdef HORIZONAL_PASS\\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n      mean += distribution.x;\\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n    #else\\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\\n      mean += depth;\\n      squared_mean += depth * depth;\\n    #endif\\n  }\\n  mean = mean * HALF_SAMPLE_RATE;\\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\\n}\",qo=\"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";function Xo(t,e,n){var r=new na,i=new hn,a=new hn,o=new wn,s=1,u=2,l=1+(s|u),c=new Array(l),h=new Array(l),f={},d={0:y,1:v,2:b},m=new Vi({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new hn},radius:{value:4}},vertexShader:qo,fragmentShader:Wo}),_=m.clone();_.defines.HORIZONAL_PASS=1;var x=new li;x.addAttribute(\"position\",new Gr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var w=new Ci(x,m),S=0;S!==l;++S){var E=0!=(S&s),T=0!=(S&u),C=new Ho({depthPacking:Ve,morphTargets:E,skinning:T});c[S]=C;var P=new Go({morphTargets:E,skinning:T});h[S]=P}var k=this;function A(n,r){var i=e.update(w);m.uniforms.shadow_pass.value=n.map.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,m,w,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,_,w,null)}function O(e,n,r,i,a,o){var l=e.geometry,p=null,m=c,v=e.customDepthMaterial;if(r.isPointLight&&(m=h,v=e.customDistanceMaterial),v)p=v;else{var y=!1;n.morphTargets&&(l&&l.isBufferGeometry?y=l.morphAttributes&&l.morphAttributes.position&&l.morphAttributes.position.length>0:l&&l.isGeometry&&(y=l.morphTargets&&l.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",e);var b=e.isSkinnedMesh&&n.skinning,_=0;y&&(_|=s),b&&(_|=u),p=m[_]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var x=p.uuid,w=n.uuid,S=f[x];void 0===S&&(S={},f[x]=S);var E=S[w];void 0===E&&(E=p.clone(),S[w]=E),p=E}return p.visible=n.visible,p.wireframe=n.wireframe,p.side=o===g?null!=n.shadowSide?n.shadowSide:n.side:null!=n.shadowSide?n.shadowSide:d[n.side],p.clipShadows=n.clipShadows,p.clippingPlanes=n.clippingPlanes,p.clipIntersection=n.clipIntersection,p.wireframeLinewidth=n.wireframeLinewidth,p.linewidth=n.linewidth,r.isPointLight&&p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(r.matrixWorld),p.nearDistance=i,p.farDistance=a),p}function L(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===g)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=e.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var m=O(n,p,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,m,n,d)}}else if(l.visible){m=O(n,l,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,m,n,null)}}for(var v=n.children,y=0,b=v.length;y<b;y++)L(v[y],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(e,s,u){if(!1!==k.enabled&&(!1!==k.autoUpdate||!1!==k.needsUpdate)&&0!==e.length){var l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(M),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=e.length;d<p;d++){var m=e[d],v=m.shadow;if(void 0!==v){i.copy(v.mapSize);var y=v.getFrameExtents();if(i.multiply(y),a.copy(v.mapSize),(i.x>n||i.y>n)&&(console.warn(\"THREE.WebGLShadowMap:\",m,\"has shadow exceeding max texture size, reducing\"),i.x>n&&(a.x=Math.floor(n/y.x),i.x=a.x*y.x,v.mapSize.x=a.x),i.y>n&&(a.y=Math.floor(n/y.y),i.y=a.y*y.y,v.mapSize.y=a.y)),null===v.map&&!v.isPointLightShadow&&this.type===g){var b={minFilter:Tt,magFilter:Tt,format:Wt};v.map=new Sn(i.x,i.y,b),v.map.texture.name=m.name+\".shadowMap\",v.mapPass=new Sn(i.x,i.y,b),v.camera.updateProjectionMatrix()}if(null===v.map){b={minFilter:xt,magFilter:xt,format:Wt};v.map=new Sn(i.x,i.y,b),v.map.texture.name=m.name+\".shadowMap\",v.camera.updateProjectionMatrix()}t.setRenderTarget(v.map),t.clear();for(var _=v.getViewportCount(),x=0;x<_;x++){var w=v.getViewport(x);o.set(a.x*w.x,a.y*w.y,a.x*w.z,a.y*w.w),f.viewport(o),v.updateMatrices(m,u,x),r=v.getFrustum(),L(s,u,v.camera,m,this.type)}v.isPointLightShadow||this.type!==g||A(v,u)}else console.warn(\"THREE.WebGLShadowMap:\",m,\"has no shadow.\")}k.needsUpdate=!1,t.setRenderTarget(l,c,h)}}}function Yo(t,e,n,r){var i=new function(){var e=!1,n=new wn,r=null,i=new wn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,a,o,s){!0===s&&(e*=o,r*=o,a*=o),n.set(e,r,a,o),!1===i.equals(n)&&(t.clearColor(e,r,a,o),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?at(2929):ot(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case X:t.depthFunc(512);break;case Y:t.depthFunc(519);break;case Q:t.depthFunc(513);break;case Z:t.depthFunc(515);break;case $:t.depthFunc(514);break;case J:t.depthFunc(518);break;case K:t.depthFunc(516);break;case tt:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},o=new function(){var e=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(t){e||(t?at(2960):ot(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,o){r===e&&i===n&&a===o||(t.stencilFunc(e,n,o),r=e,i=n,a=o)},setOp:function(e,n,r){o===e&&s===n&&u===r||(t.stencilOp(e,n,r),o=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},c=t.getParameter(34921),h=new Uint8Array(c),f=new Uint8Array(c),d=new Uint8Array(c),p={},m=null,g=null,v=null,_=null,x=null,w=null,S=null,E=null,L=null,I=null,N=!1,R=null,D=null,z=null,B=null,F=null,j=t.getParameter(35661),U=!1,V=0,H=t.getParameter(7938);-1!==H.indexOf(\"WebGL\")?(V=parseFloat(/^WebGL\\ ([0-9])/.exec(H)[1]),U=V>=1):-1!==H.indexOf(\"OpenGL ES\")&&(V=parseFloat(/^OpenGL\\ ES\\ ([0-9])/.exec(H)[1]),U=V>=2);var G=null,W={},q=new wn,et=new wn;function nt(e,n,r){var i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<r;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var rt={};function it(n,i){(h[n]=1,0===f[n]&&(t.enableVertexAttribArray(n),f[n]=1),d[n]!==i)&&((r.isWebGL2?t:e.get(\"ANGLE_instanced_arrays\"))[r.isWebGL2?\"vertexAttribDivisor\":\"vertexAttribDivisorANGLE\"](n,i),d[n]=i)}function at(e){!0!==p[e]&&(t.enable(e),p[e]=!0)}function ot(e){!1!==p[e]&&(t.disable(e),p[e]=!1)}function st(e,r,i,a,o,s,u,l){if(e!==M){if(v||(at(3042),v=!0),e===A)o=o||r,s=s||i,u=u||a,r===x&&o===E||(t.blendEquationSeparate(n.convert(r),n.convert(o)),x=r,E=o),i===w&&a===S&&s===L&&u===I||(t.blendFuncSeparate(n.convert(i),n.convert(a),n.convert(s),n.convert(u)),w=i,S=a,L=s,I=u),_=e,N=null;else if(e!==_||l!==N){if(x===O&&E===O||(t.blendEquation(32774),x=O,E=O),l)switch(e){case T:t.blendFuncSeparate(1,771,1,771);break;case C:t.blendFunc(1,1);break;case P:t.blendFuncSeparate(0,0,769,771);break;case k:t.blendFuncSeparate(0,768,0,770);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}else switch(e){case T:t.blendFuncSeparate(770,771,1,771);break;case C:t.blendFunc(770,1);break;case P:t.blendFunc(0,769);break;case k:t.blendFunc(0,768);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",e)}w=null,S=null,L=null,I=null,_=e,N=l}}else v&&(ot(3042),v=!1)}function ut(e){R!==e&&(e?t.frontFace(2304):t.frontFace(2305),R=e)}function lt(e){e!==s?(at(2884),e!==D&&(e===u?t.cullFace(1029):e===l?t.cullFace(1028):t.cullFace(1032))):ot(2884),D=e}function ct(e,n,r){e?(at(32823),B===n&&F===r||(t.polygonOffset(n,r),B=n,F=r)):ot(32823)}function ht(e){void 0===e&&(e=33984+j-1),G!==e&&(t.activeTexture(e),G=e)}return rt[3553]=nt(3553,3553,1),rt[34067]=nt(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),at(2929),a.setFunc(Z),ut(!1),lt(u),at(2884),st(M),{buffers:{color:i,depth:a,stencil:o},initAttributes:function(){for(var t=0,e=h.length;t<e;t++)h[t]=0},enableAttribute:function(t){it(t,0)},enableAttributeAndDivisor:it,disableUnusedAttributes:function(){for(var e=0,n=f.length;e!==n;++e)f[e]!==h[e]&&(t.disableVertexAttribArray(e),f[e]=0)},enable:at,disable:ot,getCompressedTextureFormats:function(){if(null===m&&(m=[],e.get(\"WEBGL_compressed_texture_pvrtc\")||e.get(\"WEBGL_compressed_texture_s3tc\")||e.get(\"WEBGL_compressed_texture_etc1\")||e.get(\"WEBGL_compressed_texture_astc\")))for(var n=t.getParameter(34467),r=0;r<n.length;r++)m.push(n[r]);return m},useProgram:function(e){return g!==e&&(t.useProgram(e),g=e,!0)},setBlending:st,setMaterial:function(t,e){t.side===b?ot(2884):at(2884);var n=t.side===y;e&&(n=!n),ut(n),t.blending===T&&!1===t.transparent?st(M):st(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);var r=t.stencilWrite;o.setTest(r),r&&(o.setFunc(t.stencilFunc,t.stencilRef,t.stencilMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),ct(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:ut,setCullFace:lt,setLineWidth:function(e){e!==z&&(U&&t.lineWidth(e),z=e)},setPolygonOffset:ct,setScissorTest:function(t){t?at(3089):ot(3089)},activeTexture:ht,bindTexture:function(e,n){null===G&&ht();var r=W[G];void 0===r&&(r={type:void 0,texture:void 0},W[G]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||rt[e]),r.type=e,r.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},scissor:function(e){!1===q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),q.copy(e))},viewport:function(e){!1===et.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),et.copy(e))},reset:function(){for(var e=0;e<f.length;e++)1===f[e]&&(t.disableVertexAttribArray(e),f[e]=0);p={},m=null,G=null,W={},g=null,_=null,R=null,D=null,i.reset(),a.reset(),o.reset()}}}function Qo(t,e,n,r,i,a,o){var s,u=new WeakMap,l=\"undefined\"!=typeof OffscreenCanvas;function c(t,e){return l?new OffscreenCanvas(t,e):document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")}function h(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if(\"undefined\"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?cn.floorPowerOfTwo:Math.floor,o=a(i*t.width),u=a(i*t.height);void 0===s&&(s=c(o,u));var l=n?c(o,u):s;return l.width=o,l.height=u,l.getContext(\"2d\").drawImage(t,0,0,o,u),console.warn(\"THREE.WebGLRenderer: Texture has been resized from (\"+t.width+\"x\"+t.height+\") to (\"+o+\"x\"+u+\").\"),l}return\"data\"in t&&console.warn(\"THREE.WebGLRenderer: Image in DataTexture is too big (\"+t.width+\"x\"+t.height+\").\"),t}return t}function f(t){return cn.isPowerOfTwo(t.width)&&cn.isPowerOfTwo(t.height)}function d(t,e){return t.generateMipmaps&&e&&t.minFilter!==xt&&t.minFilter!==Tt}function p(e,n,i,a){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function m(t,n){if(!i.isWebGL2)return t;var r=t;return 6403===t&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===t&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===t&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?e.get(\"EXT_color_buffer_float\"):34843!==r&&34837!==r||console.warn(\"THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.\"),r}function g(t){return t===xt||t===wt||t===Et?9728:9729}function v(e){var n=e.target;n.removeEventListener(\"dispose\",v),function(e){var n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&u.delete(n),o.memory.textures--}function y(e){var n=e.target;n.removeEventListener(\"dispose\",y),function(e){var n=r.get(e),i=r.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}(n),o.memory.textures--}var b=0;function _(t,e){var i=r.get(t);if(t.isVideoTexture&&function(t){var e=o.render.frame;u.get(t)!==e&&(u.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){var a=t.image;if(void 0===a)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\");else{if(!1!==a.complete)return void M(i,t,e);console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function x(e,o){if(6===e.image.length){var s=r.get(e);if(e.version>0&&s.__version!==e.version){E(s,e),n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY);for(var u=e&&e.isCompressedTexture,l=e.image[0]&&e.image[0].isDataTexture,c=[],g=0;g<6;g++)c[g]=u||l?l?e.image[g].image:e.image[g]:h(e.image[g],!1,!0,i.maxCubemapSize);var v,y=c[0],b=f(y)||i.isWebGL2,_=a.convert(e.format),x=a.convert(e.type),w=m(_,x);if(S(34067,e,b),u){for(g=0;g<6;g++){v=c[g].mipmaps;for(var M=0;M<v.length;M++){var T=v[M];e.format!==Wt&&e.format!==Gt?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(34069+g,M,w,T.width,T.height,0,T.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):n.texImage2D(34069+g,M,w,T.width,T.height,0,_,x,T.data)}}s.__maxMipLevel=v.length-1}else{v=e.mipmaps;for(g=0;g<6;g++)if(l){n.texImage2D(34069+g,0,w,c[g].width,c[g].height,0,_,x,c[g].data);for(M=0;M<v.length;M++){var C=(T=v[M]).image[g].image;n.texImage2D(34069+g,M+1,w,C.width,C.height,0,_,x,C.data)}}else{n.texImage2D(34069+g,0,w,_,x,c[g]);for(M=0;M<v.length;M++){T=v[M];n.texImage2D(34069+g,M+1,w,_,x,T.image[g])}}s.__maxMipLevel=v.length}d(e,b)&&p(34067,e,y.width,y.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture)}}function w(t,e){n.activeTexture(33984+e),n.bindTexture(34067,r.get(t).__webglTexture)}function S(n,o,s){var u;if(s?(t.texParameteri(n,10242,a.convert(o.wrapS)),t.texParameteri(n,10243,a.convert(o.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,a.convert(o.wrapR)),t.texParameteri(n,10240,a.convert(o.magFilter)),t.texParameteri(n,10241,a.convert(o.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===bt&&o.wrapT===bt||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\"),t.texParameteri(n,10240,g(o.magFilter)),t.texParameteri(n,10241,g(o.minFilter)),o.minFilter!==xt&&o.minFilter!==Tt&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\")),u=e.get(\"EXT_texture_filter_anisotropic\")){if(o.type===zt&&null===e.get(\"OES_texture_float_linear\"))return;if(o.type===Bt&&null===(i.isWebGL2||e.get(\"OES_texture_half_float_linear\")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function E(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener(\"dispose\",v),e.__webglTexture=t.createTexture(),o.memory.textures++)}function M(e,r,o){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),E(e,r),n.activeTexture(33984+o),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);var u=function(t){return!i.isWebGL2&&(t.wrapS!==bt||t.wrapT!==bt||t.minFilter!==xt&&t.minFilter!==Tt)}(r)&&!1===f(r.image),l=h(r.image,u,!1,i.maxTextureSize),c=f(l)||i.isWebGL2,g=a.convert(r.format),v=a.convert(r.type),y=m(g,v);S(s,r,c);var b,_=r.mipmaps;if(r.isDepthTexture){if(y=6402,r.type===zt){if(!i.isWebGL2)throw new Error(\"Float Depth Texture only supported in WebGL2.0\");y=36012}else i.isWebGL2&&(y=33189);r.format===Qt&&6402===y&&r.type!==Nt&&r.type!==Dt&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),r.type=Nt,v=a.convert(r.type)),r.format===Zt&&(y=34041,r.type!==Vt&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),r.type=Vt,v=a.convert(r.type))),n.texImage2D(3553,0,y,l.width,l.height,0,g,v,null)}else if(r.isDataTexture)if(_.length>0&&c){for(var x=0,w=_.length;x<w;x++)b=_[x],n.texImage2D(3553,x,y,b.width,b.height,0,g,v,b.data);r.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,l.width,l.height,0,g,v,l.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(x=0,w=_.length;x<w;x++)b=_[x],r.format!==Wt&&r.format!==Gt?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,x,y,b.width,b.height,0,b.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):n.texImage2D(3553,x,y,b.width,b.height,0,g,v,b.data);e.__maxMipLevel=_.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,y,l.width,l.height,l.depth,0,g,v,l.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,y,l.width,l.height,l.depth,0,g,v,l.data),e.__maxMipLevel=0;else if(_.length>0&&c){for(x=0,w=_.length;x<w;x++)b=_[x],n.texImage2D(3553,x,y,g,v,b);r.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,g,v,l),e.__maxMipLevel=0;d(r,c)&&p(3553,r,l.width,l.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function T(e,i,o,s){var u=a.convert(i.texture.format),l=a.convert(i.texture.type),c=m(u,l);n.texImage2D(s,0,c,i.width,i.height,0,u,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function C(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(r){var i=k(n);t.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=k(n);t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var o=m(a.convert(n.texture.format),a.convert(n.texture.type));if(r){i=k(n);t.renderbufferStorageMultisample(36161,i,o,n.width,n.height)}else t.renderbufferStorage(36161,o,n.width,n.height)}t.bindRenderbuffer(36161,null)}function P(e){var n=r.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error(\"target.depthTexture not supported in Cube render targets\");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error(\"Depth Texture with cube render targets is not supported\");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),_(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Qt)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==Zt)throw new Error(\"Unknown depthTexture format\");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),C(n.__webglDepthbuffer[a],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),C(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function k(t){return i.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,t.samples):0}var A=!1,O=!1;this.allocateTextureUnit=function(){var t=b;return t>=i.maxTextures&&console.warn(\"THREE.WebGLTextures: Trying to use \"+t+\" texture units while this GPU supports only \"+i.maxTextures),b+=1,t},this.resetTextureUnits=function(){b=0},this.setTexture2D=_,this.setTexture2DArray=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?M(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?M(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=x,this.setTextureCubeDynamic=w,this.setupRenderTarget=function(e){var s=r.get(e),u=r.get(e.texture);e.addEventListener(\"dispose\",y),u.__webglTexture=t.createTexture(),o.memory.textures++;var l=!0===e.isWebGLRenderTargetCube,c=!0===e.isWebGLMultisampleRenderTarget,h=f(e)||i.isWebGL2;if(l){s.__webglFramebuffer=[];for(var g=0;g<6;g++)s.__webglFramebuffer[g]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),c)if(i.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var v=m(a.convert(e.texture.format),a.convert(e.texture.type)),b=k(e);t.renderbufferStorageMultisample(36161,b,v,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),C(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\");if(l){n.bindTexture(34067,u.__webglTexture),S(34067,e.texture,h);for(g=0;g<6;g++)T(s.__webglFramebuffer[g],e,36064,34069+g);d(e.texture,h)&&p(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,u.__webglTexture),S(3553,e.texture,h),T(s.__webglFramebuffer,e,36064,3553),d(e.texture,h)&&p(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&P(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(d(e,f(t)||i.isWebGL2)){var a=t.isWebGLRenderTargetCube?34067:3553,o=r.get(e).__webglTexture;n.bindTexture(a,o),p(a,e,t.width,t.height),n.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var a=e.width,o=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728)}else console.warn(\"THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.\")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===A&&(console.warn(\"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\"),A=!0),t=t.texture),_(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===O&&(console.warn(\"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),O=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?x(t,e):w(t,e)}}function Zo(t,e,n){return{convert:function(t){var r;if(t===yt)return 10497;if(t===bt)return 33071;if(t===_t)return 33648;if(t===xt)return 9728;if(t===wt)return 9984;if(t===Et)return 9986;if(t===Tt)return 9729;if(t===Ct)return 9985;if(t===kt)return 9987;if(t===Ot)return 5121;if(t===Ft)return 32819;if(t===jt)return 32820;if(t===Ut)return 33635;if(t===Lt)return 5120;if(t===It)return 5122;if(t===Nt)return 5123;if(t===Rt)return 5124;if(t===Dt)return 5125;if(t===zt)return 5126;if(t===Bt){if(n.isWebGL2)return 5131;if(null!==(r=e.get(\"OES_texture_half_float\")))return r.HALF_FLOAT_OES}if(t===Ht)return 6406;if(t===Gt)return 6407;if(t===Wt)return 6408;if(t===qt)return 6409;if(t===Xt)return 6410;if(t===Qt)return 6402;if(t===Zt)return 34041;if(t===$t)return 6403;if(t===O)return 32774;if(t===L)return 32778;if(t===I)return 32779;if(t===D)return 0;if(t===z)return 1;if(t===B)return 768;if(t===F)return 769;if(t===j)return 770;if(t===U)return 771;if(t===V)return 772;if(t===H)return 773;if(t===G)return 774;if(t===W)return 775;if(t===q)return 776;if((t===Jt||t===Kt||t===te||t===ee)&&null!==(r=e.get(\"WEBGL_compressed_texture_s3tc\"))){if(t===Jt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Kt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===te)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ee)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===ne||t===re||t===ie||t===ae)&&null!==(r=e.get(\"WEBGL_compressed_texture_pvrtc\"))){if(t===ne)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===re)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ie)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ae)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===oe&&null!==(r=e.get(\"WEBGL_compressed_texture_etc1\")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((t===se||t===ue||t===le||t===ce||t===he||t===fe||t===de||t===pe||t===me||t===ge||t===ve||t===ye||t===be||t===_e)&&null!==(r=e.get(\"WEBGL_compressed_texture_astc\")))return t;if(t===N||t===R){if(n.isWebGL2){if(t===N)return 32775;if(t===R)return 32776}if(null!==(r=e.get(\"EXT_blend_minmax\"))){if(t===N)return r.MIN_EXT;if(t===R)return r.MAX_EXT}}if(t===Vt){if(n.isWebGL2)return 34042;if(null!==(r=e.get(\"WEBGL_depth_texture\")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function $o(){Zn.call(this),this.type=\"Group\"}function Jo(t){Gi.call(this),this.cameras=t||[]}$o.prototype=Object.assign(Object.create(Zn.prototype),{constructor:$o,isGroup:!0}),Jo.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Jo,isArrayCamera:!0});var Ko,ts=new mn,es=new mn;function ns(t,e,n){ts.setFromMatrixPosition(e.matrixWorld),es.setFromMatrixPosition(n.matrixWorld);var r=ts.distanceTo(es),i=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=r/(-c+h),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var g=o+p,v=s+p,y=f-m,b=d+(r-m),_=u*s/v*g,x=l*s/v*g;t.projectionMatrix.makePerspective(y,b,_,x,g,v)}function rs(t){var e,n,r=this,i=null,a=null,o=null,s=[],u=new Ln,l=new Ln,c=1,h=\"local-floor\";\"undefined\"!=typeof window&&\"VRFrameData\"in window&&(a=new window.VRFrameData,window.addEventListener(\"vrdisplaypresentchange\",x,!1));var f=new Ln,d=new fn,p=new mn,m=new Gi;m.viewport=new wn,m.layers.enable(1);var g=new Gi;g.viewport=new wn,g.layers.enable(2);var v=new Jo([m,g]);function y(){return null!==i&&!0===i.isPresenting}v.layers.enable(1),v.layers.enable(2);var b,_=new hn;function x(){if(y()){var a=i.getEyeParameters(\"left\");e=2*a.renderWidth*c,n=a.renderHeight*c,b=t.getPixelRatio(),t.getSize(_),t.setDrawingBufferSize(e,n,1),m.viewport.set(0,0,e/2,n),g.viewport.set(e/2,0,e/2,n),M.start(),r.dispatchEvent({type:\"sessionstart\"})}else r.enabled&&t.setDrawingBufferSize(_.width,_.height,b),M.stop(),r.dispatchEvent({type:\"sessionend\"})}var w=[];function S(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=e.length;n<i;n++){var a=e[n];if(a&&(\"Daydream Controller\"===a.id||\"Gear VR Controller\"===a.id||\"Oculus Go Controller\"===a.id||\"OpenVR Gamepad\"===a.id||a.id.startsWith(\"Oculus Touch\")||a.id.startsWith(\"HTC Vive Focus\")||a.id.startsWith(\"Spatial Controller\"))){if(r===t)return a;r++}}}function E(t,r){null!==r&&4===r.length&&t.set(r[0]*e,r[1]*n,r[2]*e,r[3]*n)}this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new $o).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return i},this.setDevice=function(t){void 0!==t&&(i=t),M.setContext(t)},this.setFramebufferScaleFactor=function(t){c=t},this.setReferenceSpaceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){var e=\"local-floor\"===h?1.6:0;if(!1===y())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(i.depthNear=t.near,i.depthFar=t.far,i.getFrameData(a),\"local-floor\"===h){var n=i.stageParameters;n?u.fromArray(n.sittingToStandingTransform):u.makeTranslation(0,e,0)}var r=a.pose,c=null!==o?o:t;c.matrix.copy(u),c.matrix.decompose(c.position,c.quaternion,c.scale),null!==r.orientation&&(d.fromArray(r.orientation),c.quaternion.multiply(d)),null!==r.position&&(d.setFromRotationMatrix(u),p.fromArray(r.position),p.applyQuaternion(d),c.position.add(p)),c.updateMatrixWorld(),m.near=t.near,g.near=t.near,m.far=t.far,g.far=t.far,m.matrixWorldInverse.fromArray(a.leftViewMatrix),g.matrixWorldInverse.fromArray(a.rightViewMatrix),l.getInverse(u),\"local-floor\"===h&&(m.matrixWorldInverse.multiply(l),g.matrixWorldInverse.multiply(l));var b=c.parent;null!==b&&(f.getInverse(b.matrixWorld),m.matrixWorldInverse.multiply(f),g.matrixWorldInverse.multiply(f)),m.matrixWorld.getInverse(m.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),m.projectionMatrix.fromArray(a.leftProjectionMatrix),g.projectionMatrix.fromArray(a.rightProjectionMatrix),ns(v,m,g);var _=i.getLayers();if(_.length){var x=_[0];E(m.viewport,x.leftBounds),E(g.viewport,x.rightBounds)}return function(){for(var t=0;t<s.length;t++){var e=s[t],n=S(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&e.position.set(.2,-.6,-.05),null!==r.position&&e.position.fromArray(r.position),null!==r.orientation&&e.quaternion.fromArray(r.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(u),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var i=\"Daydream Controller\"===n.id?0:1;void 0===w[t]&&(w[t]=!1),w[t]!==n.buttons[i].pressed&&(w[t]=n.buttons[i].pressed,!0===w[t]?e.dispatchEvent({type:\"selectstart\"}):(e.dispatchEvent({type:\"selectend\"}),e.dispatchEvent({type:\"select\"})))}else e.visible=!1}}(),v},this.getStandingMatrix=function(){return u},this.isPresenting=y;var M=new oa;this.setAnimationLoop=function(t){M.setAnimationLoop(t),y()&&M.start()},this.submitFrame=function(){y()&&i.submitFrame()},this.dispose=function(){\"undefined\"!=typeof window&&window.removeEventListener(\"vrdisplaypresentchange\",x)},this.setFrameOfReferenceType=function(){console.warn(\"THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.\")}}function is(t,e){var n=this,r=null,i=null,a=\"local-floor\",o=null,s=[],u=[];function l(){return null!==r&&null!==i}var c=new Gi;c.layers.enable(1),c.viewport=new wn;var h=new Gi;h.layers.enable(2),h.viewport=new wn;var f=new Jo([c,h]);function d(t){for(var e=0;e<s.length;e++)u[e]===t.inputSource&&s[e].dispatchEvent({type:t.type})}function p(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),y.stop(),n.dispatchEvent({type:\"sessionend\"})}function m(t){i=t,y.setContext(r),y.start(),n.dispatchEvent({type:\"sessionstart\"})}function g(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new $o).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){a=t},this.getSession=function(){return r},this.setSession=function(t){null!==(r=t)&&(r.addEventListener(\"select\",d),r.addEventListener(\"selectstart\",d),r.addEventListener(\"selectend\",d),r.addEventListener(\"end\",p),r.updateRenderState({baseLayer:new XRWebGLLayer(r,e)}),r.requestReferenceSpace(a).then(m),u=r.inputSources,r.addEventListener(\"inputsourceschange\",(function(){u=r.inputSources,console.log(u);for(var t=0;t<s.length;t++){s[t].userData.inputSource=u[t]}})))},this.getCamera=function(t){if(l()){var e=t.parent,n=f.cameras;g(f,e);for(var r=0;r<n.length;r++)g(n[r],e);t.matrixWorld.copy(f.matrixWorld);for(var i=t.children,a=(r=0,i.length);r<a;r++)i[r].updateMatrixWorld(!0);return ns(f,c,h),f}return t},this.isPresenting=l;var v=null;var y=new oa;y.setAnimationLoop((function(e,n){if(null!==(o=n.getViewerPose(i))){var a=o.views,l=r.renderState.baseLayer;t.setFramebuffer(l.framebuffer);for(var c=0;c<a.length;c++){var h=a[c],d=l.getViewport(h),p=h.transform.inverse.matrix,m=f.cameras[c];m.matrix.fromArray(p).getInverse(m.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===c&&f.matrix.copy(m.matrix)}}for(c=0;c<s.length;c++){var g=s[c],y=u[c];if(y){var b=n.getPose(y.targetRaySpace,i);if(null!==b){g.matrix.fromArray(b.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}v&&v(e)})),this.setAnimationLoop=function(t){v=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn(\"THREE.WebXRManager: getStandingMatrix() is no longer needed.\"),new Ln},this.getDevice=function(){console.warn(\"THREE.WebXRManager: getDevice() has been deprecated.\")},this.setDevice=function(){console.warn(\"THREE.WebXRManager: setDevice() has been deprecated.\")},this.setFrameOfReferenceType=function(){console.warn(\"THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.\")},this.submitFrame=function(){}}function as(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:\"default\",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,f=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=at,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,m,g,v,b,_,x,w,S,E,M,T,C,P,k,A,O,L=this,I=!1,N=null,R=0,D=0,z=null,B=null,F=-1,j={geometry:null,program:null,wireframe:!1},U=null,V=null,H=new wn,G=new wn,W=null,q=e.width,X=e.height,Y=1,Q=new wn(0,0,q,X),Z=new wn(0,0,q,X),$=!1,J=new na,K=new da,tt=!1,et=!1,nt=new Ln,rt=new mn;function it(){return null===z?Y:1}try{var ot={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(e.addEventListener(\"webglcontextlost\",ct,!1),e.addEventListener(\"webglcontextrestored\",ht,!1),null===(d=n||e.getContext(\"webgl\",ot)||e.getContext(\"experimental-webgl\",ot)))throw null!==e.getContext(\"webgl\")?new Error(\"Error creating WebGL context with your selected attributes.\"):new Error(\"Error creating WebGL context.\");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error(\"THREE.WebGLRenderer: \"+t.message),t}function st(){p=new pa(d),(m=new fa(d,p,t)).isWebGL2||(p.get(\"WEBGL_depth_texture\"),p.get(\"OES_texture_float\"),p.get(\"OES_texture_half_float\"),p.get(\"OES_texture_half_float_linear\"),p.get(\"OES_standard_derivatives\"),p.get(\"OES_element_index_uint\"),p.get(\"ANGLE_instanced_arrays\")),p.get(\"OES_texture_float_linear\"),O=new Zo(d,p,m),(g=new Yo(d,p,O,m)).scissor(G.copy(Z).multiplyScalar(Y).floor()),g.viewport(H.copy(Q).multiplyScalar(Y).floor()),v=new va(d),b=new Lo,_=new Qo(d,p,g,b,m,O,v),x=new sa(d),w=new ma(d,x,v),S=new _a(w,v),P=new ba(d),E=new Oo(L,p,m),M=new Do,T=new Vo,C=new ca(L,g,S,s),k=new ha(d,p,v,m),A=new ga(d,p,v,m),v.programs=E.programs,L.capabilities=m,L.extensions=p,L.properties=b,L.renderLists=M,L.state=g,L.info=v}st();var ut=\"undefined\"!=typeof navigator&&\"xr\"in navigator&&\"supportsSession\"in navigator.xr?new is(L,d):new rs(L);this.vr=ut;var lt=new Xo(L,S,m.maxTextureSize);function ct(t){t.preventDefault(),console.log(\"THREE.WebGLRenderer: Context Lost.\"),I=!0}function ht(){console.log(\"THREE.WebGLRenderer: Context Restored.\"),I=!1,st()}function ft(t){var e=t.target;e.removeEventListener(\"dispose\",ft),function(t){dt(t),b.remove(t)}(e)}function dt(t){var e=b.get(t).program;t.program=void 0,void 0!==e&&E.releaseProgram(e)}this.shadowMap=lt,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=p.get(\"WEBGL_lose_context\");t&&t.loseContext()},this.forceContextRestore=function(){var t=p.get(\"WEBGL_lose_context\");t&&t.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(t){void 0!==t&&(Y=t,this.setSize(q,X,!1))},this.getSize=function(t){return void 0===t&&(console.warn(\"WebGLRenderer: .getsize() now requires a Vector2 as an argument\"),t=new hn),t.set(q,X)},this.setSize=function(t,n,r){ut.isPresenting()?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(q=t,X=n,e.width=Math.floor(t*Y),e.height=Math.floor(n*Y),!1!==r&&(e.style.width=t+\"px\",e.style.height=n+\"px\"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn(\"WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument\"),t=new hn),t.set(q*Y,X*Y).floor()},this.setDrawingBufferSize=function(t,n,r){q=t,X=n,Y=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn(\"WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument\"),t=new wn),t.copy(H)},this.getViewport=function(t){return t.copy(Q)},this.setViewport=function(t,e,n,r){t.isVector4?Q.set(t.x,t.y,t.z,t.w):Q.set(t,e,n,r),g.viewport(H.copy(Q).multiplyScalar(Y).floor())},this.getScissor=function(t){return t.copy(Z)},this.setScissor=function(t,e,n,r){t.isVector4?Z.set(t.x,t.y,t.z,t.w):Z.set(t,e,n,r),g.scissor(G.copy(Z).multiplyScalar(Y).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(t){g.setScissorTest($=t)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),d.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener(\"webglcontextlost\",ct,!1),e.removeEventListener(\"webglcontextrestored\",ht,!1),M.dispose(),T.dispose(),b.dispose(),S.dispose(),ut.dispose(),mt.stop()},this.renderBufferImmediate=function(t,e){g.initAttributes();var n=b.get(t);t.hasPositions&&!n.position&&(n.position=d.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=d.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=d.createBuffer()),t.hasColors&&!n.color&&(n.color=d.createBuffer());var r=e.getAttributes();t.hasPositions&&(d.bindBuffer(34962,n.position),d.bufferData(34962,t.positionArray,35048),g.enableAttribute(r.position),d.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(d.bindBuffer(34962,n.normal),d.bufferData(34962,t.normalArray,35048),g.enableAttribute(r.normal),d.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(d.bindBuffer(34962,n.uv),d.bufferData(34962,t.uvArray,35048),g.enableAttribute(r.uv),d.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(d.bindBuffer(34962,n.color),d.bufferData(34962,t.colorArray,35048),g.enableAttribute(r.color),d.vertexAttribPointer(r.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),d.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,a){var o=i.isMesh&&i.matrixWorld.determinant()<0;g.setMaterial(r,o);var s=_t(t,e,r,i),u=!1;j.geometry===n.id&&j.program===s.id&&j.wireframe===(!0===r.wireframe)||(j.geometry=n.id,j.program=s.id,j.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(P.update(i,n,r,s),u=!0);var l,c=n.index,h=n.attributes.position,f=1;!0===r.wireframe&&(c=w.getWireframeAttribute(n),f=2);var v=k;null!==c&&(l=x.get(c),(v=A).setIndex(l)),u&&(!function(t,e,n){if(n&&n.isInstancedBufferGeometry&&!m.isWebGL2&&null===p.get(\"ANGLE_instanced_arrays\"))return void console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");g.initAttributes();var r=n.attributes,i=e.getAttributes(),a=t.defaultAttributeValues;for(var o in i){var s=i[o];if(s>=0){var u=r[o];if(void 0!==u){var l=u.normalized,c=u.itemSize,h=x.get(u);if(void 0===h)continue;var f=h.buffer,v=h.type,y=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var b=u.data,_=b.stride,w=u.offset;b&&b.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):g.enableAttribute(s),d.bindBuffer(34962,f),d.vertexAttribPointer(s,c,v,l,_*y,w*y)}else u.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):g.enableAttribute(s),d.bindBuffer(34962,f),d.vertexAttribPointer(s,c,v,l,0,0)}else if(void 0!==a){var S=a[o];if(void 0!==S)switch(S.length){case 2:d.vertexAttrib2fv(s,S);break;case 3:d.vertexAttrib3fv(s,S);break;case 4:d.vertexAttrib4fv(s,S);break;default:d.vertexAttrib1fv(s,S)}}}}g.disableUnusedAttributes()}(r,s,n),null!==c&&d.bindBuffer(34963,l.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var b=n.drawRange.start*f,_=n.drawRange.count*f,S=null!==a?a.start*f:0,E=null!==a?a.count*f:1/0,M=Math.max(b,S),T=Math.min(y,b+_,S+E)-1,C=Math.max(0,T-M+1);if(0!==C){if(i.isMesh)if(!0===r.wireframe)g.setLineWidth(r.wireframeLinewidth*it()),v.setMode(1);else switch(i.drawMode){case Ae:v.setMode(4);break;case Oe:v.setMode(5);break;case Le:v.setMode(6)}else if(i.isLine){var O=r.linewidth;void 0===O&&(O=1),g.setLineWidth(O*it()),i.isLineSegments?v.setMode(1):i.isLineLoop?v.setMode(2):v.setMode(3)}else i.isPoints?v.setMode(0):i.isSprite&&v.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,M,C):v.render(M,C)}},this.compile=function(t,e){(f=T.get(t,e)).init(),t.traverse((function(t){t.isLight&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)bt(e.material[n],t.fog,e);else bt(e.material,t.fog,e)}))};var pt=null;var mt=new oa;function gt(t,e,n,r){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||J.intersectsSprite(t)){r&&rt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);var i=S.update(t);(a=t.material).visible&&h.push(t,i,a,n,rt.z,null)}}else if(t.isImmediateRenderObject)r&&rt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt),h.push(t,null,t.material,n,rt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||J.intersectsObject(t))){r&&rt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);i=S.update(t);var a=t.material;if(Array.isArray(a))for(var o=i.groups,s=0,u=o.length;s<u;s++){var l=o[s],c=a[l.materialIndex];c&&c.visible&&h.push(t,i,c,n,rt.z,l)}else a.visible&&h.push(t,i,a,n,rt.z,null)}var d=t.children;for(s=0,u=d.length;s<u;s++)gt(d[s],e,n,r)}}function vt(t,e,n,r){for(var i=0,a=t.length;i<a;i++){var o=t[i],s=o.object,u=o.geometry,l=void 0===r?o.material:r,c=o.group;if(n.isArrayCamera){V=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var m=h[d];s.layers.test(m.layers)&&(g.viewport(H.copy(m.viewport)),f.setupLights(m),yt(s,e,m,u,l,c))}}else V=null,yt(s,e,n,u,l,c)}}function yt(t,e,n,r,i,a){if(t.onBeforeRender(L,e,n,r,i,a),f=T.get(e,V||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){g.setMaterial(i);var o=_t(n,e.fog,i,t);j.geometry=null,j.program=null,j.wireframe=!1,function(t,e){t.render((function(t){L.renderBufferImmediate(t,e)}))}(t,o)}else L.renderBufferDirect(n,e.fog,r,i,t,a);t.onAfterRender(L,e,n,r,i,a),f=T.get(e,V||n)}function bt(t,e,n){var r=b.get(t),i=f.state.lights,a=f.state.shadowsArray,o=i.state.version,s=E.getParameters(t,i.state,a,e,K.numPlanes,K.numIntersection,n),u=E.getProgramCode(t,s),l=r.program,c=!0;if(void 0===l)t.addEventListener(\"dispose\",ft);else if(l.code!==u)dt(t);else if(r.lightsStateVersion!==o)r.lightsStateVersion=o,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var h=aa[s.shaderID];r.shader={name:t.type,uniforms:zi(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,L),u=E.getProgramCode(t,s),l=E.acquireProgram(t,r.shader,s,u),r.program=l,t.program=l}var d=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<L.maxMorphTargets;p++)d[\"morphTarget\"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(p=0;p<L.maxMorphNormals;p++)d[\"morphNormal\"+p]>=0&&t.numSupportedMorphNormals++}var m=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=K.numPlanes,r.numIntersection=K.numIntersection,m.clippingPlanes=K.uniform),r.fog=e,r.lightsStateVersion=o,t.lights&&(m.ambientLightColor.value=i.state.ambient,m.lightProbe.value=i.state.probe,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),v=yo.seqWithValue(g.seq,m);r.uniformsList=v}function _t(t,e,n,r){_.resetTextureUnits();var i=b.get(n),a=f.state.lights;if(tt&&(et||t!==U)){var o=t===U&&n.id===F;K.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,o)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:n.lights&&i.lightsStateVersion!==a.state.version?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===K.numPlanes&&i.numIntersection===K.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(bt(n,e,r),n.needsUpdate=!1);var s,u,l=!1,c=!1,h=!1,p=i.program,v=p.getUniforms(),x=i.shader.uniforms;if(g.useProgram(p.program)&&(l=!0,c=!0,h=!0),n.id!==F&&(F=n.id,c=!0),l||U!==t){if(v.setValue(d,\"projectionMatrix\",t.projectionMatrix),m.logarithmicDepthBuffer&&v.setValue(d,\"logDepthBufFC\",2/(Math.log(t.far+1)/Math.LN2)),U!==t&&(U=t,c=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var w=v.map.cameraPosition;void 0!==w&&w.setValue(d,rt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&v.setValue(d,\"viewMatrix\",t.matrixWorldInverse)}if(n.skinning){v.setOptional(d,r,\"bindMatrix\"),v.setOptional(d,r,\"bindMatrixInverse\");var S=r.skeleton;if(S){var E=S.bones;if(m.floatVertexTextures){if(void 0===S.boneTexture){var M=Math.sqrt(4*E.length);M=cn.ceilPowerOfTwo(M),M=Math.max(M,4);var T=new Float32Array(M*M*4);T.set(S.boneMatrices);var C=new Qi(T,M,M,Wt,zt);C.needsUpdate=!0,S.boneMatrices=T,S.boneTexture=C,S.boneTextureSize=M}v.setValue(d,\"boneTexture\",S.boneTexture,_),v.setValue(d,\"boneTextureSize\",S.boneTextureSize)}else v.setOptional(d,S,\"boneMatrices\")}}return c&&(v.setValue(d,\"toneMappingExposure\",L.toneMappingExposure),v.setValue(d,\"toneMappingWhitePoint\",L.toneMappingWhitePoint),n.lights&&(u=h,(s=x).ambientLightColor.needsUpdate=u,s.lightProbe.needsUpdate=u,s.directionalLights.needsUpdate=u,s.pointLights.needsUpdate=u,s.spotLights.needsUpdate=u,s.rectAreaLights.needsUpdate=u,s.hemisphereLights.needsUpdate=u),e&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(x,e),n.isMeshBasicMaterial?xt(x,n):n.isMeshLambertMaterial?(xt(x,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(x,n)):n.isMeshPhongMaterial?(xt(x,n),n.isMeshToonMaterial?function(t,e){wt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(x,n):wt(x,n)):n.isMeshStandardMaterial?(xt(x,n),n.isMeshPhysicalMaterial?function(t,e){St(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===y&&t.clearcoatNormalScale.value.negate());t.transparency.value=e.transparency}(x,n):St(x,n)):n.isMeshMatcapMaterial?(xt(x,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(x,n)):n.isMeshDepthMaterial?(xt(x,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(x,n)):n.isMeshDistanceMaterial?(xt(x,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(x,n)):n.isMeshNormalMaterial?(xt(x,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(x,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(x,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(x,n)):n.isPointsMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*Y,t.scale.value=.5*X,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(x,n):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(x,n):n.isShadowMaterial&&(x.color.value.copy(n.color),x.opacity.value=n.opacity),void 0!==x.ltc_1&&(x.ltc_1.value=ia.LTC_1),void 0!==x.ltc_2&&(x.ltc_2.value=ia.LTC_2),yo.upload(d,i.uniformsList,x,_)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(yo.upload(d,i.uniformsList,x,_),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(d,\"center\",r.center),v.setValue(d,\"modelViewMatrix\",r.modelViewMatrix),v.setValue(d,\"normalMatrix\",r.normalMatrix),v.setValue(d,\"modelMatrix\",r.matrixWorld),p}function xt(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=b.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function wt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function St(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}mt.setAnimationLoop((function(t){ut.isPresenting()||pt&&pt(t)})),\"undefined\"!=typeof window&&mt.setContext(window),this.setAnimationLoop=function(t){pt=t,ut.setAnimationLoop(t),mt.start()},this.render=function(t,e){var n,r;if(void 0!==arguments[2]&&(console.warn(\"THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.\"),n=arguments[2]),void 0!==arguments[3]&&(console.warn(\"THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.\"),r=arguments[3]),e&&e.isCamera){if(!I){j.geometry=null,j.program=null,j.wireframe=!1,F=-1,U=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ut.enabled&&(e=ut.getCamera(e)),(f=T.get(t,e)).init(),t.onBeforeRender(L,t,e,n||z),nt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),J.setFromMatrix(nt),et=this.localClippingEnabled,tt=K.init(this.clippingPlanes,et,e),(h=M.get(t,e)).init(),gt(t,e,0,L.sortObjects),!0===L.sortObjects&&h.sort(),tt&&K.beginShadows();var i=f.state.shadowsArray;lt.render(i,t,e),f.setupLights(e),tt&&K.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),C.render(h,t,e,r);var a=h.opaque,o=h.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;a.length&&vt(a,t,e,s),o.length&&vt(o,t,e,s)}else a.length&&vt(a,t,e),o.length&&vt(o,t,e);t.onAfterRender(L,t,e),null!==z&&(_.updateRenderTargetMipmap(z),_.updateMultisampleRenderTarget(z)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),ut.enabled&&ut.submitFrame(),h=null,f=null}}else console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\")},this.setFramebuffer=function(t){N!==t&&d.bindFramebuffer(36160,t),N=t},this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return z},this.setRenderTarget=function(t,e,n){z=t,R=e,D=n,t&&void 0===b.get(t).__webglFramebuffer&&_.setupRenderTarget(t);var r=N,i=!1;if(t){var a=b.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(r=a[e||0],i=!0):r=t.isWebGLMultisampleRenderTarget?b.get(t).__webglMultisampledFramebuffer:a,H.copy(t.viewport),G.copy(t.scissor),W=t.scissorTest}else H.copy(Q).multiplyScalar(Y).floor(),G.copy(Z).multiplyScalar(Y).floor(),W=$;if(B!==r&&(d.bindFramebuffer(36160,r),B=r),g.viewport(H),g.scissor(G),g.setScissorTest(W),i){var o=b.get(t.texture);d.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,r,i,a,o){if(t&&t.isWebGLRenderTarget){var s=b.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){var u=!1;s!==B&&(d.bindFramebuffer(36160,s),u=!0);try{var l=t.texture,c=l.format,h=l.type;if(c!==Wt&&O.convert(c)!==d.getParameter(35739))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\");if(!(h===Ot||O.convert(h)===d.getParameter(35738)||h===zt&&(m.isWebGL2||p.get(\"OES_texture_float\")||p.get(\"WEBGL_color_buffer_float\"))||h===Bt&&(m.isWebGL2?p.get(\"EXT_color_buffer_float\"):p.get(\"EXT_color_buffer_half_float\"))))return void console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\");36053===d.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&d.readPixels(e,n,r,i,O.convert(c),O.convert(h),a):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\")}finally{u&&d.bindFramebuffer(36160,B)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,a=O.convert(e.format);_.setTexture2D(e,0),d.copyTexImage2D(3553,n||0,a,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,a=e.image.height,o=O.convert(n.format),s=O.convert(n.type);_.setTexture2D(n,0),e.isDataTexture?d.texSubImage2D(3553,r||0,t.x,t.y,i,a,o,s,e.image.data):d.texSubImage2D(3553,r||0,t.x,t.y,o,s,e.image)},\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}function os(t,e){this.name=\"\",this.color=new Dr(t),this.density=void 0!==e?e:25e-5}function ss(t,e,n){this.name=\"\",this.color=new Dr(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function us(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ls(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function cs(t){Vr.call(this),this.type=\"SpriteMaterial\",this.color=new Dr(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}Object.assign(rs.prototype,r.prototype),Object.assign(is.prototype,r.prototype),Object.assign(os.prototype,{isFogExp2:!0,clone:function(){return new os(this.color,this.density)},toJSON:function(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}}}),Object.assign(ss.prototype,{isFog:!0,clone:function(){return new ss(this.color,this.near,this.far)},toJSON:function(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(us.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.assign(us.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(ls.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ls.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),cs.prototype=Object.create(Vr.prototype),cs.prototype.constructor=cs,cs.prototype.isSpriteMaterial=!0,cs.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var hs=new mn,fs=new mn,ds=new mn,ps=new hn,ms=new hn,gs=new Ln,vs=new mn,ys=new mn,bs=new mn,_s=new hn,xs=new hn,ws=new hn;function Ss(t){if(Zn.call(this),this.type=\"Sprite\",void 0===Ko){Ko=new li;var e=new us(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ko.setIndex([0,1,2,0,2,3]),Ko.addAttribute(\"position\",new ls(e,3,0,!1)),Ko.addAttribute(\"uv\",new ls(e,2,3,!1))}this.geometry=Ko,this.material=void 0!==t?t:new cs,this.center=new hn(.5,.5)}function Es(t,e,n,r,i,a){ps.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(ms.x=a*ps.x-i*ps.y,ms.y=i*ps.x+a*ps.y):ms.copy(ps),t.copy(e),t.x+=ms.x,t.y+=ms.y,t.applyMatrix4(gs)}Ss.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Ss,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.'),fs.setFromMatrixScale(this.matrixWorld),gs.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ds.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&fs.multiplyScalar(-ds.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Es(vs.set(-.5,-.5,0),ds,a,fs,n,r),Es(ys.set(.5,-.5,0),ds,a,fs,n,r),Es(bs.set(.5,.5,0),ds,a,fs,n,r),_s.set(0,0),xs.set(1,0),ws.set(1,1);var o=t.ray.intersectTriangle(vs,ys,bs,!1,hs);if(null!==o||(Es(ys.set(-.5,.5,0),ds,a,fs,n,r),xs.set(0,1),null!==(o=t.ray.intersectTriangle(vs,bs,ys,!1,hs)))){var s=t.ray.origin.distanceTo(hs);s<t.near||s>t.far||e.push({distance:s,point:hs.clone(),uv:Lr.getUV(hs,vs,ys,bs,_s,xs,ws,new hn),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Zn.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var Ms=new mn,Ts=new mn;function Cs(){Zn.call(this),this.type=\"LOD\",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Ps(t,e){t&&t.isGeometry&&console.error(\"THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\"),Ci.call(this,t,e),this.type=\"SkinnedMesh\",this.bindMode=\"attached\",this.bindMatrix=new Ln,this.bindMatrixInverse=new Ln}Cs.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Cs,isLOD:!0,copy:function(t){Zn.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(t,e){Ms.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Ms);this.getObjectForDistance(n).raycast(t,e)},update:function(t){var e=this.levels;if(e.length>1){Ms.setFromMatrixPosition(t.matrixWorld),Ts.setFromMatrixPosition(this.matrixWorld);var n=Ms.distanceTo(Ts);e[0].object.visible=!0;for(var r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){var e=Zn.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),Ps.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Ps,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new wn,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Ci.prototype.updateMatrixWorld.call(this,t),\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ks=new Ln,As=new Ln;function Os(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn(\"THREE.Skeleton boneInverses is the wrong length.\"),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ln)}}function Ls(){Zn.call(this),this.type=\"Bone\"}function Is(t){Vr.call(this),this.type=\"LineBasicMaterial\",this.color=new Dr(16777215),this.linewidth=1,this.linecap=\"round\",this.linejoin=\"round\",this.lights=!1,this.setValues(t)}Object.assign(Os.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Ln;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=t.length;i<a;i++){var o=t[i]?t[i].matrixWorld:As;ks.multiplyMatrices(o,e[i]),ks.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new Os(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),Ls.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Ls,isBone:!0}),Is.prototype=Object.create(Vr.prototype),Is.prototype.constructor=Is,Is.prototype.isLineBasicMaterial=!0,Is.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Ns=new mn,Rs=new mn,Ds=new Ln,zs=new xr,Bs=new dr;function Fs(t,e,n){1===n&&console.error(\"THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.\"),Zn.call(this),this.type=\"Line\",this.geometry=void 0!==t?t:new li,this.material=void 0!==e?e:new Is({color:16777215*Math.random()})}Fs.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Fs,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)Ns.fromBufferAttribute(e,r-1),Rs.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=Ns.distanceTo(Rs);t.addAttribute(\"lineDistance\",new Jr(n,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else if(t.isGeometry){var a=t.vertices;(n=t.lineDistances)[0]=0;for(r=1,i=a.length;r<i;r++)n[r]=n[r-1],n[r]+=a[r-1].distanceTo(a[r])}return this},raycast:function(t,e){var n=t.linePrecision,r=this.geometry,i=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),Bs.copy(r.boundingSphere),Bs.applyMatrix4(i),Bs.radius+=n,!1!==t.ray.intersectsSphere(Bs)){Ds.getInverse(i),zs.copy(t.ray).applyMatrix4(Ds);var a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new mn,u=new mn,l=new mn,c=new mn,h=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var f=r.index,d=r.attributes.position.array;if(null!==f)for(var p=f.array,m=0,g=p.length-1;m<g;m+=h){var v=p[m],y=p[m+1];if(s.fromArray(d,3*v),u.fromArray(d,3*y),!(zs.distanceSqToSegment(s,u,c,l)>o))c.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(c))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,g=d.length/3-1;m<g;m+=h){if(s.fromArray(d,3*m),u.fromArray(d,3*m+3),!(zs.distanceSqToSegment(s,u,c,l)>o))c.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(c))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(r.isGeometry){var b=r.vertices,_=b.length;for(m=0;m<_-1;m+=h){var x;if(!(zs.distanceSqToSegment(b[m],b[m+1],c,l)>o))c.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(c))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var js=new mn,Us=new mn;function Vs(t,e){Fs.call(this,t,e),this.type=\"LineSegments\"}function Hs(t,e){Fs.call(this,t,e),this.type=\"LineLoop\"}function Gs(t){Vr.call(this),this.type=\"PointsMaterial\",this.color=new Dr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}Vs.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Vs,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)js.fromBufferAttribute(e,r),Us.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+js.distanceTo(Us);t.addAttribute(\"lineDistance\",new Jr(n,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else if(t.isGeometry){var a=t.vertices;for(n=t.lineDistances,r=0,i=a.length;r<i;r+=2)js.copy(a[r]),Us.copy(a[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+js.distanceTo(Us)}return this}}),Hs.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Hs,isLineLoop:!0}),Gs.prototype=Object.create(Vr.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isPointsMaterial=!0,Gs.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Ws=new Ln,qs=new xr,Xs=new dr,Ys=new mn;function Qs(t,e){Zn.call(this),this.type=\"Points\",this.geometry=void 0!==t?t:new li,this.material=void 0!==e?e:new Gs({color:16777215*Math.random()}),this.updateMorphTargets()}function Zs(t,e,n,r,i,a,o){var s=qs.distanceSqToPoint(t);if(s<n){var u=new mn;qs.closestPointToPoint(t,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:o})}}function $s(t,e,n,r,i,a,o,s,u){xn.call(this,t,e,n,r,i,a,o,s,u),this.format=void 0!==o?o:Gt,this.minFilter=void 0!==a?a:Tt,this.magFilter=void 0!==i?i:Tt,this.generateMipmaps=!1}function Js(t,e,n,r,i,a,o,s,u,l,c,h){xn.call(this,null,a,o,s,u,l,r,i,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ks(t,e,n,r,i,a,o,s,u){xn.call(this,t,e,n,r,i,a,o,s,u),this.needsUpdate=!0}function tu(t,e,n,r,i,a,o,s,u,l){if((l=void 0!==l?l:Qt)!==Qt&&l!==Zt)throw new Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===n&&l===Qt&&(n=Nt),void 0===n&&l===Zt&&(n=Vt),xn.call(this,null,r,i,a,o,s,l,n,u),this.image={width:t,height:e},this.magFilter=void 0!==o?o:xt,this.minFilter=void 0!==s?s:xt,this.flipY=!1,this.generateMipmaps=!1}function eu(t){li.call(this),this.type=\"WireframeGeometry\";var e,n,r,i,a,o,s,u,l,c,h=[],f=[0,0],d={},p=[\"a\",\"b\",\"c\"];if(t&&t.isGeometry){var m=t.faces;for(e=0,r=m.length;e<r;e++){var g=m[e];for(n=0;n<3;n++)s=g[p[n]],u=g[p[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+\",\"+f[1]]&&(d[l]={index1:f[0],index2:f[1]})}for(l in d)o=d[l],c=t.vertices[o.index1],h.push(c.x,c.y,c.z),c=t.vertices[o.index2],h.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var v,y,b,_,x,w,S;if(c=new mn,null!==t.index){for(v=t.attributes.position,y=t.index,0===(b=t.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,a=b.length;i<a;++i)for(e=x=(_=b[i]).start,r=x+_.count;e<r;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),u=y.getX(e+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===d[l=f[0]+\",\"+f[1]]&&(d[l]={index1:f[0],index2:f[1]});for(l in d)o=d[l],c.fromBufferAttribute(v,o.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(v,o.index2),h.push(c.x,c.y,c.z)}else for(e=0,r=(v=t.attributes.position).count/3;e<r;e++)for(n=0;n<3;n++)w=3*e+n,c.fromBufferAttribute(v,w),h.push(c.x,c.y,c.z),S=3*e+(n+1)%3,c.fromBufferAttribute(v,S),h.push(c.x,c.y,c.z)}this.addAttribute(\"position\",new Jr(h,3))}function nu(t,e,n){Ni.call(this),this.type=\"ParametricGeometry\",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new ru(t,e,n)),this.mergeVertices()}function ru(t,e,n){li.call(this),this.type=\"ParametricBufferGeometry\",this.parameters={func:t,slices:e,stacks:n};var r,i,a=[],o=[],s=[],u=[],l=new mn,c=new mn,h=new mn,f=new mn,d=new mn;t.length<3&&console.error(\"THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.\");var p=e+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=e;i++){var g=i/e;t(g,m,c),o.push(c.x,c.y,c.z),g-1e-5>=0?(t(g-1e-5,m,h),f.subVectors(c,h)):(t(g+1e-5,m,h),f.subVectors(h,c)),m-1e-5>=0?(t(g,m-1e-5,h),d.subVectors(c,h)):(t(g,m+1e-5,h),d.subVectors(h,c)),l.crossVectors(f,d).normalize(),s.push(l.x,l.y,l.z),u.push(g,m)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var v=r*p+i,y=r*p+i+1,b=(r+1)*p+i+1,_=(r+1)*p+i;a.push(v,y,_),a.push(y,b,_)}this.setIndex(a),this.addAttribute(\"position\",new Jr(o,3)),this.addAttribute(\"normal\",new Jr(s,3)),this.addAttribute(\"uv\",new Jr(u,2))}function iu(t,e,n,r){Ni.call(this),this.type=\"PolyhedronGeometry\",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new au(t,e,n,r)),this.mergeVertices()}function au(t,e,n,r){li.call(this),this.type=\"PolyhedronBufferGeometry\",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1;var i=[],a=[];function o(t,e,n,r){var i,a,o=Math.pow(2,r),u=[];for(i=0;i<=o;i++){u[i]=[];var l=t.clone().lerp(n,i/o),c=e.clone().lerp(n,i/o),h=o-i;for(a=0;a<=h;a++)u[i][a]=0===a&&i===o?l:l.clone().lerp(c,a/h)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var f=Math.floor(a/2);a%2==0?(s(u[i][f+1]),s(u[i+1][f]),s(u[i][f])):(s(u[i][f+1]),s(u[i+1][f+1]),s(u[i+1][f]))}}function s(t){i.push(t.x,t.y,t.z)}function u(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=r/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new mn,r=new mn,i=new mn,a=0;a<e.length;a+=3)u(e[a+0],n),u(e[a+1],r),u(e[a+2],i),o(n,r,i,t)}(r=r||0),function(t){for(var e=new mn,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){for(var t=new mn,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=c(t)/2/Math.PI+.5,r=(o=t,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-r)}var o;(function(){for(var t=new mn,e=new mn,n=new mn,r=new mn,o=new hn,s=new hn,u=new hn,h=0,f=0;h<i.length;h+=9,f+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),o.set(a[f+0],a[f+1]),s.set(a[f+2],a[f+3]),u.set(a[f+4],a[f+5]),r.copy(t).add(e).add(n).divideScalar(3);var d=c(r);l(o,f+0,t,d),l(s,f+2,e,d),l(u,f+4,n,d)}})(),function(){for(var t=0;t<a.length;t+=6){var e=a[t+0],n=a[t+2],r=a[t+4],i=Math.max(e,n,r),o=Math.min(e,n,r);i>.9&&o<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),r<.2&&(a[t+4]+=1))}}()}(),this.addAttribute(\"position\",new Jr(i,3)),this.addAttribute(\"normal\",new Jr(i.slice(),3)),this.addAttribute(\"uv\",new Jr(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function ou(t,e){Ni.call(this),this.type=\"TetrahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new su(t,e)),this.mergeVertices()}function su(t,e){au.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type=\"TetrahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function uu(t,e){Ni.call(this),this.type=\"OctahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new lu(t,e)),this.mergeVertices()}function lu(t,e){au.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type=\"OctahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function cu(t,e){Ni.call(this),this.type=\"IcosahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new hu(t,e)),this.mergeVertices()}function hu(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];au.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type=\"IcosahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function fu(t,e){Ni.call(this),this.type=\"DodecahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new du(t,e)),this.mergeVertices()}function du(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];au.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type=\"DodecahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function pu(t,e,n,r,i,a){Ni.call(this),this.type=\"TubeGeometry\",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==a&&console.warn(\"THREE.TubeGeometry: taper has been removed.\");var o=new mu(t,e,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function mu(t,e,n,r,i){li.call(this),this.type=\"TubeBufferGeometry\",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8,i=i||!1;var a=t.computeFrenetFrames(e,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,u=new mn,l=new mn,c=new hn,h=new mn,f=[],d=[],p=[],m=[];function g(i){h=t.getPointAt(i/e,h);var o=a.normals[i],c=a.binormals[i];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,m=Math.sin(p),g=-Math.cos(p);l.x=g*o.x+m*c.x,l.y=g*o.y+m*c.y,l.z=g*o.z+m*c.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=h.x+n*l.x,u.y=h.y+n*l.y,u.z=h.z+n*l.z,f.push(u.x,u.y,u.z)}}!function(){for(o=0;o<e;o++)g(o);g(!1===i?e:0),function(){for(o=0;o<=e;o++)for(s=0;s<=r;s++)c.x=o/e,c.y=s/r,p.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(o=1;o<=r;o++){var t=(r+1)*(s-1)+(o-1),n=(r+1)*s+(o-1),i=(r+1)*s+o,a=(r+1)*(s-1)+o;m.push(t,n,a),m.push(n,i,a)}}()}(),this.setIndex(m),this.addAttribute(\"position\",new Jr(f,3)),this.addAttribute(\"normal\",new Jr(d,3)),this.addAttribute(\"uv\",new Jr(p,2))}function gu(t,e,n,r,i,a,o){Ni.call(this),this.type=\"TorusKnotGeometry\",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==o&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\"),this.fromBufferGeometry(new vu(t,e,n,r,i,a)),this.mergeVertices()}function vu(t,e,n,r,i,a){li.call(this),this.type=\"TorusKnotBufferGeometry\",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var o,s,u=[],l=[],c=[],h=[],f=new mn,d=new mn,p=new mn,m=new mn,g=new mn,v=new mn,y=new mn;for(o=0;o<=n;++o){var b=o/n*i*Math.PI*2;for(C(b,i,a,t,p),C(b+.01,i,a,t,m),v.subVectors(m,p),y.addVectors(m,p),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=r;++s){var _=s/r*Math.PI*2,x=-e*Math.cos(_),w=e*Math.sin(_);f.x=p.x+(x*y.x+w*g.x),f.y=p.y+(x*y.y+w*g.y),f.z=p.z+(x*y.z+w*g.z),l.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(o/n),h.push(s/r)}}for(s=1;s<=n;s++)for(o=1;o<=r;o++){var S=(r+1)*(s-1)+(o-1),E=(r+1)*s+(o-1),M=(r+1)*s+o,T=(r+1)*(s-1)+o;u.push(S,E,T),u.push(E,M,T)}function C(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute(\"position\",new Jr(l,3)),this.addAttribute(\"normal\",new Jr(c,3)),this.addAttribute(\"uv\",new Jr(h,2))}function yu(t,e,n,r,i){Ni.call(this),this.type=\"TorusGeometry\",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new bu(t,e,n,r,i)),this.mergeVertices()}function bu(t,e,n,r,i){li.call(this),this.type=\"TorusBufferGeometry\",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,o,s=[],u=[],l=[],c=[],h=new mn,f=new mn,d=new mn;for(a=0;a<=n;a++)for(o=0;o<=r;o++){var p=o/r*i,m=a/n*Math.PI*2;f.x=(t+e*Math.cos(m))*Math.cos(p),f.y=(t+e*Math.cos(m))*Math.sin(p),f.z=e*Math.sin(m),u.push(f.x,f.y,f.z),h.x=t*Math.cos(p),h.y=t*Math.sin(p),d.subVectors(f,h).normalize(),l.push(d.x,d.y,d.z),c.push(o/r),c.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=r;o++){var g=(r+1)*a+o-1,v=(r+1)*(a-1)+o-1,y=(r+1)*(a-1)+o,b=(r+1)*a+o;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.addAttribute(\"position\",new Jr(u,3)),this.addAttribute(\"normal\",new Jr(l,3)),this.addAttribute(\"uv\",new Jr(c,2))}Qs.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Qs,isPoints:!0,raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Xs.copy(n.boundingSphere),Xs.applyMatrix4(r),Xs.radius+=i,!1!==t.ray.intersectsSphere(Xs)){Ws.getInverse(r),qs.copy(t.ray).applyMatrix4(Ws);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,u=n.attributes.position.array;if(null!==s)for(var l=s.array,c=0,h=l.length;c<h;c++){var f=l[c];Ys.fromArray(u,3*f),Zs(Ys,f,o,r,t,e,this)}else{c=0;for(var d=u.length/3;c<d;c++)Ys.fromArray(u,3*c),Zs(Ys,c,o,r,t,e,this)}}else{var p=n.vertices;for(c=0,d=p.length;c<d;c++)Zs(p[c],c,o,r,t,e,this)}}},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error(\"THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.\")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),$s.prototype=Object.assign(Object.create(xn.prototype),{constructor:$s,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Js.prototype=Object.create(xn.prototype),Js.prototype.constructor=Js,Js.prototype.isCompressedTexture=!0,Ks.prototype=Object.create(xn.prototype),Ks.prototype.constructor=Ks,Ks.prototype.isCanvasTexture=!0,tu.prototype=Object.create(xn.prototype),tu.prototype.constructor=tu,tu.prototype.isDepthTexture=!0,eu.prototype=Object.create(li.prototype),eu.prototype.constructor=eu,nu.prototype=Object.create(Ni.prototype),nu.prototype.constructor=nu,ru.prototype=Object.create(li.prototype),ru.prototype.constructor=ru,iu.prototype=Object.create(Ni.prototype),iu.prototype.constructor=iu,au.prototype=Object.create(li.prototype),au.prototype.constructor=au,ou.prototype=Object.create(Ni.prototype),ou.prototype.constructor=ou,su.prototype=Object.create(au.prototype),su.prototype.constructor=su,uu.prototype=Object.create(Ni.prototype),uu.prototype.constructor=uu,lu.prototype=Object.create(au.prototype),lu.prototype.constructor=lu,cu.prototype=Object.create(Ni.prototype),cu.prototype.constructor=cu,hu.prototype=Object.create(au.prototype),hu.prototype.constructor=hu,fu.prototype=Object.create(Ni.prototype),fu.prototype.constructor=fu,du.prototype=Object.create(au.prototype),du.prototype.constructor=du,pu.prototype=Object.create(Ni.prototype),pu.prototype.constructor=pu,mu.prototype=Object.create(li.prototype),mu.prototype.constructor=mu,mu.prototype.toJSON=function(){var t=li.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},gu.prototype=Object.create(Ni.prototype),gu.prototype.constructor=gu,vu.prototype=Object.create(li.prototype),vu.prototype.constructor=vu,yu.prototype=Object.create(Ni.prototype),yu.prototype.constructor=yu,bu.prototype=Object.create(li.prototype),bu.prototype.constructor=bu;var _u=function(t,e,n){n=n||2;var r,i,a,o,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=xu(t,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(t,e,n,r){var i,a,o,s,u,l=[];for(i=0,a=e.length;i<a;i++)o=e[i]*r,s=i<a-1?e[i+1]*r:t.length,(u=xu(t,o,s,r,!1))===u.next&&(u.steiner=!0),l.push(Ou(u));for(l.sort(Pu),i=0;i<l.length;i++)ku(l[i],n),n=wu(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=a=t[0],i=o=t[1];for(var p=n;p<h;p+=n)(s=t[p])<r&&(r=s),(u=t[p+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-r,o-i))?1/l:0}return Su(f,d,n,r,i,l),d};function xu(t,e,n,r,i){var a,o;if(i===function(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}(t,e,n,r)>0)for(a=e;a<n;a+=r)o=Fu(a,t[a],t[a+1],o);else for(a=n-r;a>=e;a-=r)o=Fu(a,t[a],t[a+1],o);return o&&Ru(o,o.next)&&(ju(o),o=o.next),o}function wu(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Ru(r,r.next)&&0!==Nu(r.prev,r,r.next))r=r.next;else{if(ju(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Su(t,e,n,r,i,a,o){if(t){!o&&a&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Au(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,a,o,s,u,l=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(t,r,i,a);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?Mu(t,r,i,a):Eu(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),ju(t),t=u.next,l=u.next;else if((t=u)===l){o?1===o?Su(t=Tu(t,e,n),e,n,r,i,a,2):2===o&&Cu(t,e,n,r,i,a):Su(wu(t),e,n,r,i,a,1);break}}}function Eu(t){var e=t.prev,n=t,r=t.next;if(Nu(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Lu(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Nu(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Mu(t,e,n,r){var i=t.prev,a=t,o=t.next;if(Nu(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=Au(s,u,e,n,r),f=Au(l,c,e,n,r),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&Lu(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nu(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&Lu(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Nu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Lu(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nu(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Lu(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Nu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Tu(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!Ru(i,a)&&Du(i,r,r.next,a)&&zu(i,a)&&zu(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),ju(r),ju(r.next),r=t=a),r=r.next}while(r!==t);return r}function Cu(t,e,n,r,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Iu(o,s)){var u=Bu(o,s);return o=wu(o,o.next),u=wu(u,u.next),Su(o,e,n,r,i,a),void Su(u,e,n,r,i,a)}s=s.next}o=o.next}while(o!==t)}function Pu(t,e){return t.x-e.x}function ku(t,e){if(e=function(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===o)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;r=n.next;for(;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Lu(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&((u=Math.abs(a-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&zu(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Bu(e,t);wu(n,n.next)}}function Au(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ou(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Lu(t,e,n,r,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(r-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Iu(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Du(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&zu(t,e)&&zu(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Nu(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ru(t,e){return t.x===e.x&&t.y===e.y}function Du(t,e,n,r){return!!(Ru(t,n)&&Ru(e,r)||Ru(t,r)&&Ru(n,e))||Nu(t,e,n)>0!=Nu(t,e,r)>0&&Nu(n,r,t)>0!=Nu(n,r,e)>0}function zu(t,e){return Nu(t.prev,t,t.next)<0?Nu(t,e,t.next)>=0&&Nu(t,t.prev,e)>=0:Nu(t,e,t.prev)<0||Nu(t,t.next,e)<0}function Bu(t,e){var n=new Uu(t.i,t.x,t.y),r=new Uu(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Fu(t,e,n,r){var i=new Uu(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ju(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Uu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Vu={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Vu.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];Hu(t),Gu(n,t);var a=t.length;e.forEach(Hu);for(var o=0;o<e.length;o++)r.push(a),a+=e[o].length,Gu(n,e[o]);var s=_u(n,r);for(o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function Hu(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Gu(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Wu(t,e){Ni.call(this),this.type=\"ExtrudeGeometry\",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new qu(t,e)),this.mergeVertices()}function qu(t,e){li.call(this),this.type=\"ExtrudeBufferGeometry\",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,r=[],i=[],a=0,o=t.length;a<o;a++){s(t[a])}function s(t){var a=[],o=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:100,l=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3,p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Xu;void 0!==e.amount&&(console.warn(\"THREE.ExtrudeBufferGeometry: amount has been renamed to depth.\"),u=e.amount);var g,v,y,b,_,x,w,S,E=!1;p&&(g=p.getSpacedPoints(s),E=!0,l=!1,v=p.computeFrenetFrames(s,!1),y=new mn,b=new mn,_=new mn),l||(d=0,c=0,h=0,f=0);var M=t.extractPoints(o),T=M.shape,C=M.holes;if(!Vu.isClockWise(T))for(T=T.reverse(),w=0,S=C.length;w<S;w++)x=C[w],Vu.isClockWise(x)&&(C[w]=x.reverse());var P=Vu.triangulateShape(T,C),k=T;for(w=0,S=C.length;w<S;w++)x=C[w],T=T.concat(x);function A(t,e,n){return e||console.error(\"THREE.ExtrudeGeometry: vec does not exist\"),e.clone().multiplyScalar(n).add(t)}var O,L,I,N,R,D,z=T.length,B=P.length;function F(t,e,n){var r,i,a,o=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=o*o+s*s,h=o*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=e.x-s/f,m=e.y+o/f,g=((n.x-l/d-p)*l-(n.y+u/d-m)*u)/(o*l-s*u),v=(r=p+o*g-t.x)*r+(i=m+s*g-t.y)*i;if(v<=2)return new hn(r,i);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new hn(r/a,i/a)}for(var j=[],U=0,V=k.length,H=V-1,G=U+1;U<V;U++,H++,G++)H===V&&(H=0),G===V&&(G=0),j[U]=F(k[U],k[H],k[G]);var W,q,X=[],Y=j.concat();for(w=0,S=C.length;w<S;w++){for(x=C[w],W=[],U=0,H=(V=x.length)-1,G=U+1;U<V;U++,H++,G++)H===V&&(H=0),G===V&&(G=0),W[U]=F(x[U],x[H],x[G]);X.push(W),Y=Y.concat(W)}for(O=0;O<d;O++){for(I=O/d,N=c*Math.cos(I*Math.PI/2),L=h*Math.sin(I*Math.PI/2)+f,U=0,V=k.length;U<V;U++)Z((R=A(k[U],j[U],L)).x,R.y,-N);for(w=0,S=C.length;w<S;w++)for(x=C[w],W=X[w],U=0,V=x.length;U<V;U++)Z((R=A(x[U],W[U],L)).x,R.y,-N)}for(L=h+f,U=0;U<z;U++)R=l?A(T[U],Y[U],L):T[U],E?(b.copy(v.normals[0]).multiplyScalar(R.x),y.copy(v.binormals[0]).multiplyScalar(R.y),_.copy(g[0]).add(b).add(y),Z(_.x,_.y,_.z)):Z(R.x,R.y,0);for(q=1;q<=s;q++)for(U=0;U<z;U++)R=l?A(T[U],Y[U],L):T[U],E?(b.copy(v.normals[q]).multiplyScalar(R.x),y.copy(v.binormals[q]).multiplyScalar(R.y),_.copy(g[q]).add(b).add(y),Z(_.x,_.y,_.z)):Z(R.x,R.y,u/s*q);for(O=d-1;O>=0;O--){for(I=O/d,N=c*Math.cos(I*Math.PI/2),L=h*Math.sin(I*Math.PI/2)+f,U=0,V=k.length;U<V;U++)Z((R=A(k[U],j[U],L)).x,R.y,u+N);for(w=0,S=C.length;w<S;w++)for(x=C[w],W=X[w],U=0,V=x.length;U<V;U++)R=A(x[U],W[U],L),E?Z(R.x,R.y+g[s-1].y,g[s-1].x+N):Z(R.x,R.y,u+N)}function Q(t,e){var n,r;for(U=t.length;--U>=0;){n=U,(r=U-1)<0&&(r=t.length-1);var i=0,a=s+2*d;for(i=0;i<a;i++){var o=z*i,u=z*(i+1);J(e+n+o,e+r+o,e+r+u,e+n+u)}}}function Z(t,e,n){a.push(t),a.push(e),a.push(n)}function $(t,e,i){K(t),K(e),K(i);var a=r.length/3,o=m.generateTopUV(n,r,a-3,a-2,a-1);tt(o[0]),tt(o[1]),tt(o[2])}function J(t,e,i,a){K(t),K(e),K(a),K(e),K(i),K(a);var o=r.length/3,s=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);tt(s[0]),tt(s[1]),tt(s[3]),tt(s[1]),tt(s[2]),tt(s[3])}function K(t){r.push(a[3*t+0]),r.push(a[3*t+1]),r.push(a[3*t+2])}function tt(t){i.push(t.x),i.push(t.y)}!function(){var t=r.length/3;if(l){var e=0,i=z*e;for(U=0;U<B;U++)$((D=P[U])[2]+i,D[1]+i,D[0]+i);for(i=z*(e=s+2*d),U=0;U<B;U++)$((D=P[U])[0]+i,D[1]+i,D[2]+i)}else{for(U=0;U<B;U++)$((D=P[U])[2],D[1],D[0]);for(U=0;U<B;U++)$((D=P[U])[0]+z*s,D[1]+z*s,D[2]+z*s)}n.addGroup(t,r.length/3-t,0)}(),function(){var t=r.length/3,e=0;for(Q(k,e),e+=k.length,w=0,S=C.length;w<S;w++)Q(x=C[w],e),e+=x.length;n.addGroup(t,r.length/3-t,1)}()}this.addAttribute(\"position\",new Jr(r,3)),this.addAttribute(\"uv\",new Jr(i,2)),this.computeVertexNormals()}Wu.prototype=Object.create(Ni.prototype),Wu.prototype.constructor=Wu,Wu.prototype.toJSON=function(){var t=Ni.prototype.toJSON.call(this);return Yu(this.parameters.shapes,this.parameters.options,t)},qu.prototype=Object.create(li.prototype),qu.prototype.constructor=qu,qu.prototype.toJSON=function(){var t=li.prototype.toJSON.call(this);return Yu(this.parameters.shapes,this.parameters.options,t)};var Xu={generateTopUV:function(t,e,n,r,i){var a=e[3*n],o=e[3*n+1],s=e[3*r],u=e[3*r+1],l=e[3*i],c=e[3*i+1];return[new hn(a,o),new hn(s,u),new hn(l,c)]},generateSideWallUV:function(t,e,n,r,i,a){var o=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],f=e[3*i],d=e[3*i+1],p=e[3*i+2],m=e[3*a],g=e[3*a+1],v=e[3*a+2];return Math.abs(s-c)<.01?[new hn(o,1-u),new hn(l,1-h),new hn(f,1-p),new hn(m,1-v)]:[new hn(s,1-u),new hn(c,1-h),new hn(d,1-p),new hn(g,1-v)]}};function Yu(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Qu(t,e){Ni.call(this),this.type=\"TextGeometry\",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Zu(t,e)),this.mergeVertices()}function Zu(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new Ni;var r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),qu.call(this,r,e),this.type=\"TextBufferGeometry\"}function $u(t,e,n,r,i,a,o){Ni.call(this),this.type=\"SphereGeometry\",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ju(t,e,n,r,i,a,o)),this.mergeVertices()}function Ju(t,e,n,r,i,a,o){li.call(this),this.type=\"SphereBufferGeometry\",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,u,l=Math.min(a+o,Math.PI),c=0,h=[],f=new mn,d=new mn,p=[],m=[],g=[],v=[];for(u=0;u<=n;u++){var y=[],b=u/n,_=0;for(0==u&&0==a?_=.5/e:u==n&&l==Math.PI&&(_=-.5/e),s=0;s<=e;s++){var x=s/e;f.x=-t*Math.cos(r+x*i)*Math.sin(a+b*o),f.y=t*Math.cos(a+b*o),f.z=t*Math.sin(r+x*i)*Math.sin(a+b*o),m.push(f.x,f.y,f.z),d.copy(f).normalize(),g.push(d.x,d.y,d.z),v.push(x+_,1-b),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++){var w=h[u][s+1],S=h[u][s],E=h[u+1][s],M=h[u+1][s+1];(0!==u||a>0)&&p.push(w,S,M),(u!==n-1||l<Math.PI)&&p.push(S,E,M)}this.setIndex(p),this.addAttribute(\"position\",new Jr(m,3)),this.addAttribute(\"normal\",new Jr(g,3)),this.addAttribute(\"uv\",new Jr(v,2))}function Ku(t,e,n,r,i,a){Ni.call(this),this.type=\"RingGeometry\",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new tl(t,e,n,r,i,a)),this.mergeVertices()}function tl(t,e,n,r,i,a){li.call(this),this.type=\"RingBufferGeometry\",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},t=t||.5,e=e||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,u,l=[],c=[],h=[],f=[],d=t,p=(e-t)/(r=void 0!==r?Math.max(1,r):1),m=new mn,g=new hn;for(s=0;s<=r;s++){for(u=0;u<=n;u++)o=i+u/n*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),c.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/e+1)/2,g.y=(m.y/e+1)/2,f.push(g.x,g.y);d+=p}for(s=0;s<r;s++){var v=s*(n+1);for(u=0;u<n;u++){var y=o=u+v,b=o+n+1,_=o+n+2,x=o+1;l.push(y,b,x),l.push(b,_,x)}}this.setIndex(l),this.addAttribute(\"position\",new Jr(c,3)),this.addAttribute(\"normal\",new Jr(h,3)),this.addAttribute(\"uv\",new Jr(f,2))}function el(t,e,n,r){Ni.call(this),this.type=\"LatheGeometry\",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new nl(t,e,n,r)),this.mergeVertices()}function nl(t,e,n,r){li.call(this),this.type=\"LatheBufferGeometry\",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=cn.clamp(r,0,2*Math.PI);var i,a,o,s=[],u=[],l=[],c=1/e,h=new mn,f=new hn;for(a=0;a<=e;a++){var d=n+a*c*r,p=Math.sin(d),m=Math.cos(d);for(o=0;o<=t.length-1;o++)h.x=t[o].x*p,h.y=t[o].y,h.z=t[o].x*m,u.push(h.x,h.y,h.z),f.x=a/e,f.y=o/(t.length-1),l.push(f.x,f.y)}for(a=0;a<e;a++)for(o=0;o<t.length-1;o++){var g=i=o+a*t.length,v=i+t.length,y=i+t.length+1,b=i+1;s.push(g,v,b),s.push(v,y,b)}if(this.setIndex(s),this.addAttribute(\"position\",new Jr(u,3)),this.addAttribute(\"uv\",new Jr(l,2)),this.computeVertexNormals(),r===2*Math.PI){var _=this.attributes.normal.array,x=new mn,w=new mn,S=new mn;for(i=e*t.length*3,a=0,o=0;a<t.length;a++,o+=3)x.x=_[o+0],x.y=_[o+1],x.z=_[o+2],w.x=_[i+o+0],w.y=_[i+o+1],w.z=_[i+o+2],S.addVectors(x,w).normalize(),_[o+0]=_[i+o+0]=S.x,_[o+1]=_[i+o+1]=S.y,_[o+2]=_[i+o+2]=S.z}}function rl(t,e){Ni.call(this),this.type=\"ShapeGeometry\",\"object\"==typeof e&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new il(t,e)),this.mergeVertices()}function il(t,e){li.call(this),this.type=\"ShapeBufferGeometry\",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(t))l(t);else for(var u=0;u<t.length;u++)l(t[u]),this.addGroup(o,s,u),o+=s,s=0;function l(t){var o,u,l,c=r.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;for(!1===Vu.isClockWise(f)&&(f=f.reverse()),o=0,u=d.length;o<u;o++)l=d[o],!0===Vu.isClockWise(l)&&(d[o]=l.reverse());var p=Vu.triangulateShape(f,d);for(o=0,u=d.length;o<u;o++)l=d[o],f=f.concat(l);for(o=0,u=f.length;o<u;o++){var m=f[o];r.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(o=0,u=p.length;o<u;o++){var g=p[o],v=g[0]+c,y=g[1]+c,b=g[2]+c;n.push(v,y,b),s+=3}}this.setIndex(n),this.addAttribute(\"position\",new Jr(r,3)),this.addAttribute(\"normal\",new Jr(i,3)),this.addAttribute(\"uv\",new Jr(a,2))}function al(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function ol(t,e){li.call(this),this.type=\"EdgesGeometry\",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,a,o=[],s=Math.cos(cn.DEG2RAD*e),u=[0,0],l={},c=[\"a\",\"b\",\"c\"];t.isBufferGeometry?(a=new Ni).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,f=a.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],g=0;g<3;g++)n=m[c[g]],r=m[c[(g+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+\",\"+u[1]]?l[i]={index1:u[0],index2:u[1],face1:d,face2:void 0}:l[i].face2=d;for(i in l){var v=l[i];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var y=h[v.index1];o.push(y.x,y.y,y.z),y=h[v.index2],o.push(y.x,y.y,y.z)}}this.addAttribute(\"position\",new Jr(o,3))}function sl(t,e,n,r,i,a,o,s){Ni.call(this),this.type=\"CylinderGeometry\",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new ul(t,e,n,r,i,a,o,s)),this.mergeVertices()}function ul(t,e,n,r,i,a,o,s){li.call(this),this.type=\"CylinderBufferGeometry\",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],f=[],d=0,p=[],m=n/2,g=0;function v(n){var i,a,p,v=new hn,y=new mn,b=0,_=!0===n?t:e,x=!0===n?1:-1;for(a=d,i=1;i<=r;i++)c.push(0,m*x,0),h.push(0,x,0),f.push(.5,.5),d++;for(p=d,i=0;i<=r;i++){var w=i/r*s+o,S=Math.cos(w),E=Math.sin(w);y.x=_*E,y.y=m*x,y.z=_*S,c.push(y.x,y.y,y.z),h.push(0,x,0),v.x=.5*S+.5,v.y=.5*E*x+.5,f.push(v.x,v.y),d++}for(i=0;i<r;i++){var M=a+i,T=p+i;!0===n?l.push(T,T+1,M):l.push(T+1,T,M),b+=3}u.addGroup(g,b,!0===n?1:2),g+=b}!function(){var a,v,y=new mn,b=new mn,_=0,x=(e-t)/n;for(v=0;v<=i;v++){var w=[],S=v/i,E=S*(e-t)+t;for(a=0;a<=r;a++){var M=a/r,T=M*s+o,C=Math.sin(T),P=Math.cos(T);b.x=E*C,b.y=-S*n+m,b.z=E*P,c.push(b.x,b.y,b.z),y.set(C,x,P).normalize(),h.push(y.x,y.y,y.z),f.push(M,1-S),w.push(d++)}p.push(w)}for(a=0;a<r;a++)for(v=0;v<i;v++){var k=p[v][a],A=p[v+1][a],O=p[v+1][a+1],L=p[v][a+1];l.push(k,A,L),l.push(A,O,L),_+=6}u.addGroup(g,_,0),g+=_}(),!1===a&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(l),this.addAttribute(\"position\",new Jr(c,3)),this.addAttribute(\"normal\",new Jr(h,3)),this.addAttribute(\"uv\",new Jr(f,2))}function ll(t,e,n,r,i,a,o){sl.call(this,0,t,e,n,r,i,a,o),this.type=\"ConeGeometry\",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function cl(t,e,n,r,i,a,o){ul.call(this,0,t,e,n,r,i,a,o),this.type=\"ConeBufferGeometry\",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function hl(t,e,n,r){Ni.call(this),this.type=\"CircleGeometry\",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new fl(t,e,n,r)),this.mergeVertices()}function fl(t,e,n,r){li.call(this),this.type=\"CircleBufferGeometry\",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,a,o=[],s=[],u=[],l=[],c=new mn,h=new hn;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),a=0,i=3;a<=e;a++,i+=3){var f=n+a/e*r;c.x=t*Math.cos(f),c.y=t*Math.sin(f),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/t+1)/2,h.y=(s[i+1]/t+1)/2,l.push(h.x,h.y)}for(i=1;i<=e;i++)o.push(i,i+1,0);this.setIndex(o),this.addAttribute(\"position\",new Jr(s,3)),this.addAttribute(\"normal\",new Jr(u,3)),this.addAttribute(\"uv\",new Jr(l,2))}Qu.prototype=Object.create(Ni.prototype),Qu.prototype.constructor=Qu,Zu.prototype=Object.create(qu.prototype),Zu.prototype.constructor=Zu,$u.prototype=Object.create(Ni.prototype),$u.prototype.constructor=$u,Ju.prototype=Object.create(li.prototype),Ju.prototype.constructor=Ju,Ku.prototype=Object.create(Ni.prototype),Ku.prototype.constructor=Ku,tl.prototype=Object.create(li.prototype),tl.prototype.constructor=tl,el.prototype=Object.create(Ni.prototype),el.prototype.constructor=el,nl.prototype=Object.create(li.prototype),nl.prototype.constructor=nl,rl.prototype=Object.create(Ni.prototype),rl.prototype.constructor=rl,rl.prototype.toJSON=function(){var t=Ni.prototype.toJSON.call(this);return al(this.parameters.shapes,t)},il.prototype=Object.create(li.prototype),il.prototype.constructor=il,il.prototype.toJSON=function(){var t=li.prototype.toJSON.call(this);return al(this.parameters.shapes,t)},ol.prototype=Object.create(li.prototype),ol.prototype.constructor=ol,sl.prototype=Object.create(Ni.prototype),sl.prototype.constructor=sl,ul.prototype=Object.create(li.prototype),ul.prototype.constructor=ul,ll.prototype=Object.create(sl.prototype),ll.prototype.constructor=ll,cl.prototype=Object.create(ul.prototype),cl.prototype.constructor=cl,hl.prototype=Object.create(Ni.prototype),hl.prototype.constructor=hl,fl.prototype=Object.create(li.prototype),fl.prototype.constructor=fl;var dl=Object.freeze({WireframeGeometry:eu,ParametricGeometry:nu,ParametricBufferGeometry:ru,TetrahedronGeometry:ou,TetrahedronBufferGeometry:su,OctahedronGeometry:uu,OctahedronBufferGeometry:lu,IcosahedronGeometry:cu,IcosahedronBufferGeometry:hu,DodecahedronGeometry:fu,DodecahedronBufferGeometry:du,PolyhedronGeometry:iu,PolyhedronBufferGeometry:au,TubeGeometry:pu,TubeBufferGeometry:mu,TorusKnotGeometry:gu,TorusKnotBufferGeometry:vu,TorusGeometry:yu,TorusBufferGeometry:bu,TextGeometry:Qu,TextBufferGeometry:Zu,SphereGeometry:$u,SphereBufferGeometry:Ju,RingGeometry:Ku,RingBufferGeometry:tl,PlaneGeometry:ua,PlaneBufferGeometry:la,LatheGeometry:el,LatheBufferGeometry:nl,ShapeGeometry:rl,ShapeBufferGeometry:il,ExtrudeGeometry:Wu,ExtrudeBufferGeometry:qu,EdgesGeometry:ol,ConeGeometry:ll,ConeBufferGeometry:cl,CylinderGeometry:sl,CylinderBufferGeometry:ul,CircleGeometry:hl,CircleBufferGeometry:fl,BoxGeometry:Ri,BoxBufferGeometry:Di});function pl(t){Vr.call(this),this.type=\"ShadowMaterial\",this.color=new Dr(0),this.transparent=!0,this.setValues(t)}function ml(t){Vi.call(this,t),this.type=\"RawShaderMaterial\"}function gl(t){Vr.call(this),this.defines={STANDARD:\"\"},this.type=\"MeshStandardMaterial\",this.color=new Dr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vl(t){gl.call(this),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.type=\"MeshPhysicalMaterial\",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new hn(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function yl(t){Vr.call(this),this.type=\"MeshPhongMaterial\",this.color=new Dr(16777215),this.specular=new Dr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function bl(t){yl.call(this),this.defines={TOON:\"\"},this.type=\"MeshToonMaterial\",this.gradientMap=null,this.setValues(t)}function _l(t){Vr.call(this),this.type=\"MeshNormalMaterial\",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function xl(t){Vr.call(this),this.type=\"MeshLambertMaterial\",this.color=new Dr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=\"round\",this.wireframeLinejoin=\"round\",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function wl(t){Vr.call(this),this.defines={MATCAP:\"\"},this.type=\"MeshMatcapMaterial\",this.color=new Dr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Sl(t){Is.call(this),this.type=\"LineDashedMaterial\",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}pl.prototype=Object.create(Vr.prototype),pl.prototype.constructor=pl,pl.prototype.isShadowMaterial=!0,pl.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.color.copy(t.color),this},ml.prototype=Object.create(Vi.prototype),ml.prototype.constructor=ml,ml.prototype.isRawShaderMaterial=!0,gl.prototype=Object.create(Vr.prototype),gl.prototype.constructor=gl,gl.prototype.isMeshStandardMaterial=!0,gl.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.defines={STANDARD:\"\"},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vl.prototype=Object.create(gl.prototype),vl.prototype.constructor=vl,vl.prototype.isMeshPhysicalMaterial=!0,vl.prototype.copy=function(t){return gl.prototype.copy.call(this,t),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new Dr).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},yl.prototype=Object.create(Vr.prototype),yl.prototype.constructor=yl,yl.prototype.isMeshPhongMaterial=!0,yl.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bl.prototype=Object.create(yl.prototype),bl.prototype.constructor=bl,bl.prototype.isMeshToonMaterial=!0,bl.prototype.copy=function(t){return yl.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},_l.prototype=Object.create(Vr.prototype),_l.prototype.constructor=_l,_l.prototype.isMeshNormalMaterial=!0,_l.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},xl.prototype=Object.create(Vr.prototype),xl.prototype.constructor=xl,xl.prototype.isMeshLambertMaterial=!0,xl.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},wl.prototype=Object.create(Vr.prototype),wl.prototype.constructor=wl,wl.prototype.isMeshMatcapMaterial=!0,wl.prototype.copy=function(t){return Vr.prototype.copy.call(this,t),this.defines={MATCAP:\"\"},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Sl.prototype=Object.create(Is.prototype),Sl.prototype.constructor=Sl,Sl.prototype.isLineDashedMaterial=!0,Sl.prototype.copy=function(t){return Is.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var El=Object.freeze({ShadowMaterial:pl,SpriteMaterial:cs,RawShaderMaterial:ml,ShaderMaterial:Vi,PointsMaterial:Gs,MeshPhysicalMaterial:vl,MeshStandardMaterial:gl,MeshPhongMaterial:yl,MeshToonMaterial:bl,MeshNormalMaterial:_l,MeshLambertMaterial:xl,MeshDepthMaterial:Ho,MeshDistanceMaterial:Go,MeshBasicMaterial:Hr,MeshMatcapMaterial:wl,LineDashedMaterial:Sl,LineBasicMaterial:Is,Material:Vr}),Ml={arraySlice:function(t,e,n){return Ml.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:\"number\"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*e,u=0;u!==e;++u)i[o++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,a=t[0];void 0!==a&&void 0===a[r];)a=t[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(e.push(a.time),n.push.apply(n,o)),a=t[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(e.push(a.time),o.toArray(n,n.length)),a=t[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(e.push(a.time),n.push(o)),a=t[i++]}while(void 0!==a)}}};function Tl(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Cl(t,e,n,r){Tl.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Pl(t,e,n,r){Tl.call(this,t,e,n,r)}function kl(t,e,n,r){Tl.call(this,t,e,n,r)}function Al(t,e,n,r){if(void 0===t)throw new Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===e||0===e.length)throw new Error(\"THREE.KeyframeTrack: no keyframes in track named \"+t);this.name=t,this.times=Ml.convertArray(e,this.TimeBufferType),this.values=Ml.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Ol(t,e,n){Al.call(this,t,e,n)}function Ll(t,e,n,r){Al.call(this,t,e,n,r)}function Il(t,e,n,r){Al.call(this,t,e,n,r)}function Nl(t,e,n,r){Tl.call(this,t,e,n,r)}function Rl(t,e,n,r){Al.call(this,t,e,n,r)}function Dl(t,e,n,r){Al.call(this,t,e,n,r)}function zl(t,e,n,r){Al.call(this,t,e,n,r)}function Bl(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=cn.generateUUID(),this.duration<0&&this.resetDuration()}function Fl(t){if(void 0===t.type)throw new Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");var e=function(t){switch(t.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return Il;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return zl;case\"color\":return Ll;case\"quaternion\":return Rl;case\"bool\":case\"boolean\":return Ol;case\"string\":return Dl}throw new Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+t)}(t.type);if(void 0===t.times){var n=[],r=[];Ml.flattenJSON(t.keys,n,r,\"value\"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Tl.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var a;n:{r:if(!(t<r)){for(var o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,t<(r=e[++n]))break e}a=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,t>=(i=e[--n-1]))break e}a=n,n=0}for(;n<a;){var u=n+a>>>1;t<e[u]?a=u:n=u+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,a=0;a!==r;++a)e[a]=n[i+a];return e},interpolate_:function(){throw new Error(\"call to abstract method\")},intervalChanged_:function(){}}),\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign(Tl.prototype,{beforeStart_:Tl.prototype.copySampleValue_,afterEnd_:Tl.prototype.copySampleValue_}),Cl.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Cl,DefaultSettings_:{endingStart:Ce,endingEnd:Ce},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,a=t+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Pe:i=t,o=2*e-n;break;case ke:o=e+r[i=r.length-2]-r[i+1];break;default:i=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Pe:a=t,s=2*n-e;break;case ke:a=1,s=n+r[1]-r[0];break;default:a=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(r-e),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,_=0;_!==o;++_)i[_]=g*a[l+_]+v*a[u+_]+y*a[s+_]+b*a[c+_];return i}}),Pl.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Pl,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,l=(n-e)/(r-e),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}),kl.prototype=Object.assign(Object.create(Tl.prototype),{constructor:kl,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Al,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Ml.convertArray(t.times,Array),values:Ml.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(Al.prototype,{constructor:Al,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Me,InterpolantFactoryMethodDiscrete:function(t){return new kl(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Pl(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Cl(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Ee:e=this.InterpolantFactoryMethodDiscrete;break;case Me:e=this.InterpolantFactoryMethodLinear;break;case Te:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn(\"THREE.KeyframeTrack:\",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ee;case this.InterpolantFactoryMethodLinear:return Me;case this.InterpolantFactoryMethodSmooth:return Te}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<t;)++i;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Ml.arraySlice(n,i,a),this.values=Ml.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),t=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if(\"number\"==typeof s&&isNaN(s)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,o,s),t=!1;break}if(null!==a&&a>s){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,o,s,a),t=!1;break}a=s}if(void 0!==r&&Ml.isTypedArray(r)){o=0;for(var u=r.length;o!==u;++o){var l=r[o];if(isNaN(l)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,o,l),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=this.getInterpolation()===Te,i=1,a=t.length-1,o=1;o<a;++o){var s=!1,u=t[o];if(u!==t[o+1]&&(1!==o||u!==u[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=e[l+f];if(d!==e[c+f]||d!==e[h+f]){s=!0;break}}if(s){if(o!==i){t[i]=t[o];var p=o*n,m=i*n;for(f=0;f!==n;++f)e[m+f]=e[p+f]}++i}}if(a>0){t[i]=t[a];for(p=a*n,m=i*n,f=0;f!==n;++f)e[m+f]=e[p+f];++i}return i!==t.length&&(this.times=Ml.arraySlice(t,0,i),this.values=Ml.arraySlice(e,0,i*n)),this},clone:function(){var t=Ml.arraySlice(this.times,0),e=Ml.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),Ol.prototype=Object.assign(Object.create(Al.prototype),{constructor:Ol,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ll.prototype=Object.assign(Object.create(Al.prototype),{constructor:Ll,ValueTypeName:\"color\"}),Il.prototype=Object.assign(Object.create(Al.prototype),{constructor:Il,ValueTypeName:\"number\"}),Nl.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Nl,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=(n-e)/(r-e),l=s+o;s!==l;s+=4)fn.slerpFlat(i,0,a,s-o,a,s,u);return i}}),Rl.prototype=Object.assign(Object.create(Al.prototype),{constructor:Rl,ValueTypeName:\"quaternion\",DefaultInterpolation:Me,InterpolantFactoryMethodLinear:function(t){return new Nl(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Dl.prototype=Object.assign(Object.create(Al.prototype),{constructor:Dl,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),zl.prototype=Object.assign(Object.create(Al.prototype),{constructor:zl,ValueTypeName:\"vector\"}),Object.assign(Bl,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,a=n.length;i!==a;++i)e.push(Fl(n[i]).scale(r));return new Bl(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,a=n.length;i!==a;++i)e.push(Al.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=Ml.getKeyframeOrder(s);s=Ml.sortedArray(s,1,l),u=Ml.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Il(\".morphTargetInfluences[\"+e[o].name+\"]\",s,u).scale(1/n))}return new Bl(t,-1,a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\\w-]*?)([\\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(Bl.CreateFromMorphTargetSequence(h,r[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var a=[],o=[];Ml.flattenJSON(n,a,o,r),0!==a.length&&i.push(new t(e,a,o))}},r=[],i=t.name||\"default\",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var d in c){var p=[],m=[];for(f=0;f!==l[h].morphTargets.length;++f){var g=l[h];p.push(g.time),m.push(g.morphTarget===d?1:0)}r.push(new Il(\".morphTargetInfluence[\"+d+\"]\",p,m))}a=c.length*(o||1)}else{var v=\".bones[\"+e[u].name+\"]\";n(zl,v+\".position\",l,\"pos\",r),n(Rl,v+\".quaternion\",l,\"rot\",r),n(zl,v+\".scale\",l,\"scl\",r)}}return 0===r.length?null:new Bl(i,a,r)}}),Object.assign(Bl.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Bl(this.name,this.duration,t)}});var jl={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Ul(t,e,n){var r=this,i=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===i&&void 0!==r.onStart&&r.onStart(t,a,o),i=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var Vl=new Ul;function Hl(t){this.manager=void 0!==t?t:Vl,this.crossOrigin=\"anonymous\",this.path=\"\",this.resourcePath=\"\"}Object.assign(Hl.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),Hl.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],a=e[n+1];if(i.test(t))return a}return null}};var Gl={};function Wl(t){Hl.call(this,t)}function ql(t){Hl.call(this,t)}function Xl(t){Hl.call(this,t),this._parser=null}function Yl(t){Hl.call(this,t),this._parser=null}function Ql(t){Hl.call(this,t)}function Zl(t){Hl.call(this,t)}function $l(t){Hl.call(this,t)}function Jl(){this.type=\"Curve\",this.arcLengthDivisions=200}function Kl(t,e,n,r,i,a,o,s){Jl.call(this),this.type=\"EllipseCurve\",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function tc(t,e,n,r,i,a){Kl.call(this,t,e,n,n,r,i,a),this.type=\"ArcCurve\"}function ec(){var t=0,e=0,n=0,r=0;function i(i,a,o,s){t=i,e=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(t,e,n,r,a){i(e,n,a*(n-t),a*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,a,o,s){var u=(e-t)/a-(n-t)/(a+o)+(n-e)/o,l=(n-e)/o-(r-e)/(o+s)+(r-n)/s;i(e,n,u*=o,l*=o)},calc:function(i){var a=i*i;return t+e*i+n*a+r*(a*i)}}}Wl.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Wl,load:function(t,e,n,r){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=jl.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;if(void 0===Gl[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],u=!!o[2],l=o[3];l=decodeURIComponent(l),u&&(l=atob(l));try{var c,h=(this.responseType||\"\").toLowerCase();switch(h){case\"arraybuffer\":case\"blob\":for(var f=new Uint8Array(l.length),d=0;d<l.length;d++)f[d]=l.charCodeAt(d);c=\"blob\"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case\"document\":var p=new DOMParser;c=p.parseFromString(l,s);break;case\"json\":c=JSON.parse(l);break;default:c=l}setTimeout((function(){e&&e(c),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Gl[t]=[],Gl[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var g in m.open(\"GET\",t,!0),m.addEventListener(\"load\",(function(e){var n=this.response;jl.add(t,n);var r=Gl[t];if(delete Gl[t],200===this.status||0===this.status){0===this.status&&console.warn(\"THREE.FileLoader: HTTP Status 0 received.\");for(var a=0,o=r.length;a<o;a++){(s=r[a]).onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(a=0,o=r.length;a<o;a++){var s;(s=r[a]).onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),m.addEventListener(\"progress\",(function(e){for(var n=Gl[t],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(e)}}),!1),m.addEventListener(\"error\",(function(e){var n=Gl[t];delete Gl[t];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),m.addEventListener(\"abort\",(function(e){var n=Gl[t];delete Gl[t];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return i.manager.itemStart(t),m}Gl[t].push({onLoad:e,onProgress:n,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),ql.prototype=Object.assign(Object.create(Hl.prototype),{constructor:ql,load:function(t,e,n,r){var i=this,a=new Wl(i.manager);a.setPath(i.path),a.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=Bl.parse(t[n]);e.push(r)}return e}}),Xl.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Xl,load:function(t,e,n,r){var i=this,a=[],o=new Js;o.image=a;var s=new Wl(this.manager);function u(u){s.load(t[u],(function(t){var n=i._parser(t,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=Tt),o.format=n.format,o.needsUpdate=!0,e&&e(o))}),n,r)}if(s.setPath(this.path),s.setResponseType(\"arraybuffer\"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c)u(c);else s.load(t,(function(t){var n=i._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Tt),o.format=n.format,o.needsUpdate=!0,e&&e(o)}),n,r);return o}}),Yl.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Yl,load:function(t,e,n,r){var i=this,a=new Qi,o=new Wl(this.manager);return o.setResponseType(\"arraybuffer\"),o.setPath(this.path),o.load(t,(function(t){var n=i._parser(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:bt,a.wrapT=void 0!==n.wrapT?n.wrapT:bt,a.magFilter=void 0!==n.magFilter?n.magFilter:Tt,a.minFilter=void 0!==n.minFilter?n.minFilter:kt,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=Tt),a.needsUpdate=!0,e&&e(a,n))}),n,r),a}}),Ql.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Ql,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=jl.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;var o=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\");function s(){o.removeEventListener(\"load\",s,!1),o.removeEventListener(\"error\",u,!1),jl.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){o.removeEventListener(\"load\",s,!1),o.removeEventListener(\"error\",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return o.addEventListener(\"load\",s,!1),o.addEventListener(\"error\",u,!1),\"data:\"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o}}),Zl.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Zl,load:function(t,e,n,r){var i=new xa,a=new Ql(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(t[n],(function(t){i.images[n]=t,6===++o&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i}}),$l.prototype=Object.assign(Object.create(Hl.prototype),{constructor:$l,load:function(t,e,n,r){var i=new xn,a=new Ql(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(n){i.image=n;var r=t.search(/\\.jpe?g($|\\?)/i)>0||0===t.search(/^data\\:image\\/jpeg/);i.format=r?Gt:Wt,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(Jl.prototype,{getPoint:function(){return console.warn(\"THREE.Curve: .getPoint() not implemented.\"),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),a=0;for(r.push(0),n=1;n<=t;n++)a+=(e=this.getPoint(n/t)).distanceTo(i),r.push(a),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,a=r.length;n=e||t*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var r=this.getPoint(e);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i,a=new mn,o=[],s=[],u=[],l=new mn,c=new Ln;for(n=0;n<=t;n++)r=n/t,o[n]=this.getTangentAt(r),o[n].normalize();s[0]=new mn,u[0]=new mn;var h=Number.MAX_VALUE,f=Math.abs(o[0].x),d=Math.abs(o[0].y),p=Math.abs(o[0].z);for(f<=h&&(h=f,a.set(1,0,0)),d<=h&&(h=d,a.set(0,1,0)),p<=h&&a.set(0,0,1),l.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],l),u[0].crossVectors(o[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),l.crossVectors(o[n-1],o[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(cn.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(l,i))),u[n].crossVectors(o[n],s[n]);if(!0===e)for(i=Math.acos(cn.clamp(s[0].dot(s[t]),-1,1)),i/=t,o[0].dot(l.crossVectors(s[0],s[t]))>0&&(i=-i),n=1;n<=t;n++)s[n].applyMatrix4(c.makeRotationAxis(o[n],i*n)),u[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Kl.prototype=Object.create(Jl.prototype),Kl.prototype.constructor=Kl,Kl.prototype.isEllipseCurve=!0,Kl.prototype.getPoint=function(t,e){for(var n=e||new hn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)},Kl.prototype.copy=function(t){return Jl.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Kl.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Kl.prototype.fromJSON=function(t){return Jl.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},tc.prototype=Object.create(Kl.prototype),tc.prototype.constructor=tc,tc.prototype.isArcCurve=!0;var nc=new mn,rc=new ec,ic=new ec,ac=new ec;function oc(t,e,n,r){Jl.call(this),this.type=\"CatmullRomCurve3\",this.points=t||[],this.closed=e||!1,this.curveType=n||\"centripetal\",this.tension=r||.5}function sc(t,e,n,r,i){var a=.5*(r-e),o=.5*(i-n),s=t*t;return(2*n-2*r+a+o)*(t*s)+(-3*n+3*r-2*a-o)*s+a*t+n}function uc(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function lc(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}function cc(t,e,n,r){Jl.call(this),this.type=\"CubicBezierCurve\",this.v0=t||new hn,this.v1=e||new hn,this.v2=n||new hn,this.v3=r||new hn}function hc(t,e,n,r){Jl.call(this),this.type=\"CubicBezierCurve3\",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn,this.v3=r||new mn}function fc(t,e){Jl.call(this),this.type=\"LineCurve\",this.v1=t||new hn,this.v2=e||new hn}function dc(t,e){Jl.call(this),this.type=\"LineCurve3\",this.v1=t||new mn,this.v2=e||new mn}function pc(t,e,n){Jl.call(this),this.type=\"QuadraticBezierCurve\",this.v0=t||new hn,this.v1=e||new hn,this.v2=n||new hn}function mc(t,e,n){Jl.call(this),this.type=\"QuadraticBezierCurve3\",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn}function gc(t){Jl.call(this),this.type=\"SplineCurve\",this.points=t||[]}oc.prototype=Object.create(Jl.prototype),oc.prototype.constructor=oc,oc.prototype.isCatmullRomCurve3=!0,oc.prototype.getPoint=function(t,e){var n,r,i,a,o=e||new mn,s=this.points,u=s.length,l=(u-(this.closed?0:1))*t,c=Math.floor(l),h=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===h&&c===u-1&&(c=u-2,h=1),this.closed||c>0?n=s[(c-1)%u]:(nc.subVectors(s[0],s[1]).add(s[0]),n=nc),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?a=s[(c+2)%u]:(nc.subVectors(s[u-1],s[u-2]).add(s[u-1]),a=nc),\"centripetal\"===this.curveType||\"chordal\"===this.curveType){var f=\"chordal\"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(r),f),p=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(a),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),rc.initNonuniformCatmullRom(n.x,r.x,i.x,a.x,d,p,m),ic.initNonuniformCatmullRom(n.y,r.y,i.y,a.y,d,p,m),ac.initNonuniformCatmullRom(n.z,r.z,i.z,a.z,d,p,m)}else\"catmullrom\"===this.curveType&&(rc.initCatmullRom(n.x,r.x,i.x,a.x,this.tension),ic.initCatmullRom(n.y,r.y,i.y,a.y,this.tension),ac.initCatmullRom(n.z,r.z,i.z,a.z,this.tension));return o.set(rc.calc(h),ic.calc(h),ac.calc(h)),o},oc.prototype.copy=function(t){Jl.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},oc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},oc.prototype.fromJSON=function(t){Jl.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new mn).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},cc.prototype=Object.create(Jl.prototype),cc.prototype.constructor=cc,cc.prototype.isCubicBezierCurve=!0,cc.prototype.getPoint=function(t,e){var n=e||new hn,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(lc(t,r.x,i.x,a.x,o.x),lc(t,r.y,i.y,a.y,o.y)),n},cc.prototype.copy=function(t){return Jl.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},cc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},cc.prototype.fromJSON=function(t){return Jl.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},hc.prototype=Object.create(Jl.prototype),hc.prototype.constructor=hc,hc.prototype.isCubicBezierCurve3=!0,hc.prototype.getPoint=function(t,e){var n=e||new mn,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(lc(t,r.x,i.x,a.x,o.x),lc(t,r.y,i.y,a.y,o.y),lc(t,r.z,i.z,a.z,o.z)),n},hc.prototype.copy=function(t){return Jl.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},hc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},hc.prototype.fromJSON=function(t){return Jl.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},fc.prototype=Object.create(Jl.prototype),fc.prototype.constructor=fc,fc.prototype.isLineCurve=!0,fc.prototype.getPoint=function(t,e){var n=e||new hn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},fc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},fc.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},fc.prototype.copy=function(t){return Jl.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},fc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},fc.prototype.fromJSON=function(t){return Jl.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},dc.prototype=Object.create(Jl.prototype),dc.prototype.constructor=dc,dc.prototype.isLineCurve3=!0,dc.prototype.getPoint=function(t,e){var n=e||new mn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},dc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},dc.prototype.copy=function(t){return Jl.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},dc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},dc.prototype.fromJSON=function(t){return Jl.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},pc.prototype=Object.create(Jl.prototype),pc.prototype.constructor=pc,pc.prototype.isQuadraticBezierCurve=!0,pc.prototype.getPoint=function(t,e){var n=e||new hn,r=this.v0,i=this.v1,a=this.v2;return n.set(uc(t,r.x,i.x,a.x),uc(t,r.y,i.y,a.y)),n},pc.prototype.copy=function(t){return Jl.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},pc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},pc.prototype.fromJSON=function(t){return Jl.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},mc.prototype=Object.create(Jl.prototype),mc.prototype.constructor=mc,mc.prototype.isQuadraticBezierCurve3=!0,mc.prototype.getPoint=function(t,e){var n=e||new mn,r=this.v0,i=this.v1,a=this.v2;return n.set(uc(t,r.x,i.x,a.x),uc(t,r.y,i.y,a.y),uc(t,r.z,i.z,a.z)),n},mc.prototype.copy=function(t){return Jl.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},mc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},mc.prototype.fromJSON=function(t){return Jl.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},gc.prototype=Object.create(Jl.prototype),gc.prototype.constructor=gc,gc.prototype.isSplineCurve=!0,gc.prototype.getPoint=function(t,e){var n=e||new hn,r=this.points,i=(r.length-1)*t,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(sc(o,s.x,u.x,l.x,c.x),sc(o,s.y,u.y,l.y,c.y)),n},gc.prototype.copy=function(t){Jl.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},gc.prototype.toJSON=function(){var t=Jl.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},gc.prototype.fromJSON=function(t){Jl.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new hn).fromArray(r))}return this};var vc=Object.freeze({ArcCurve:tc,CatmullRomCurve3:oc,CubicBezierCurve:cc,CubicBezierCurve3:hc,EllipseCurve:Kl,LineCurve:fc,LineCurve3:dc,QuadraticBezierCurve:pc,QuadraticBezierCurve3:mc,SplineCurve:gc});function yc(){Jl.call(this),this.type=\"CurvePath\",this.curves=[],this.autoClose=!1}function bc(t){yc.call(this),this.type=\"Path\",this.currentPoint=new hn,t&&this.setFromPoints(t)}function _c(t){bc.call(this,t),this.uuid=cn.generateUUID(),this.type=\"Shape\",this.holes=[]}function xc(t,e){Zn.call(this),this.type=\"Light\",this.color=new Dr(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function wc(t,e,n){xc.call(this,t,n),this.type=\"HemisphereLight\",this.castShadow=void 0,this.position.copy(Zn.DefaultUp),this.updateMatrix(),this.groundColor=new Dr(e)}function Sc(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new hn(512,512),this.map=null,this.mapPass=null,this.matrix=new Ln,this._frustum=new na,this._frameExtents=new hn(1,1),this._viewportCount=1,this._viewports=[new wn(0,0,1,1)]}function Ec(){Sc.call(this,new Gi(50,1,.5,500))}function Mc(t,e,n,r,i,a){xc.call(this,t,e),this.type=\"SpotLight\",this.position.copy(Zn.DefaultUp),this.updateMatrix(),this.target=new Zn,Object.defineProperty(this,\"power\",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Ec}function Tc(){Sc.call(this,new Gi(90,1,.5,500)),this._frameExtents=new hn(4,2),this._viewportCount=6,this._viewports=[new wn(2,1,1,1),new wn(0,1,1,1),new wn(3,1,1,1),new wn(1,1,1,1),new wn(3,0,1,1),new wn(1,0,1,1)],this._cubeDirections=[new mn(1,0,0),new mn(-1,0,0),new mn(0,0,1),new mn(0,0,-1),new mn(0,1,0),new mn(0,-1,0)],this._cubeUps=[new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,0,1),new mn(0,0,-1)]}function Cc(t,e,n,r){xc.call(this,t,e),this.type=\"PointLight\",Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Tc}function Pc(t,e,n,r,i,a){Hi.call(this),this.type=\"OrthographicCamera\",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function kc(){Sc.call(this,new Pc(-5,5,5,-5,.5,500))}function Ac(t,e){xc.call(this,t,e),this.type=\"DirectionalLight\",this.position.copy(Zn.DefaultUp),this.updateMatrix(),this.target=new Zn,this.shadow=new kc}function Oc(t,e){xc.call(this,t,e),this.type=\"AmbientLight\",this.castShadow=void 0}function Lc(t,e,n,r){xc.call(this,t,e),this.type=\"RectAreaLight\",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Ic(t){Hl.call(this,t),this.textures={}}yc.prototype=Object.assign(Object.create(Jl.prototype),{constructor:yc,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new fc(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Jl.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Jl.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){Jl.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new vc[r.type]).fromJSON(r))}return this}}),bc.prototype=Object.assign(Object.create(yc.prototype),{constructor:bc,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new fc(this.currentPoint.clone(),new hn(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var i=new pc(this.currentPoint.clone(),new hn(t,e),new hn(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,i,a){var o=new cc(this.currentPoint.clone(),new hn(t,e),new hn(n,r),new hn(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(t){var e=new gc([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,n,r,i,a)},absarc:function(t,e,n,r,i,a){this.absellipse(t,e,n,n,r,i,a)},ellipse:function(t,e,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+u,e+l,n,r,i,a,o,s)},absellipse:function(t,e,n,r,i,a,o,s){var u=new Kl(t,e,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(t){return yc.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=yc.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return yc.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),_c.prototype=Object.assign(Object.create(bc.prototype),{constructor:_c,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){bc.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=bc.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){bc.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new bc).fromJSON(r))}return this}}),xc.prototype=Object.assign(Object.create(Zn.prototype),{constructor:xc,isLight:!0,copy:function(t){return Zn.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Zn.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),wc.prototype=Object.assign(Object.create(xc.prototype),{constructor:wc,isHemisphereLight:!0,copy:function(t){return xc.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Sc.prototype,{_projScreenMatrix:new Ln,_lightPositionWorld:new mn,_lookTarget:new mn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ec.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Ec,isSpotLightShadow:!0,updateMatrices:function(t,e,n){var r=this.camera,i=2*cn.RAD2DEG*t.angle,a=this.mapSize.width/this.mapSize.height,o=t.distance||r.far;i===r.fov&&a===r.aspect&&o===r.far||(r.fov=i,r.aspect=a,r.far=o,r.updateProjectionMatrix()),Sc.prototype.updateMatrices.call(this,t,e,n)}}),Mc.prototype=Object.assign(Object.create(xc.prototype),{constructor:Mc,isSpotLight:!0,copy:function(t){return xc.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Tc.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Tc,isPointLightShadow:!0,updateMatrices:function(t,e,n){var r=this.camera,i=this.matrix,a=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;a.setFromMatrixPosition(t.matrixWorld),r.position.copy(a),o.copy(r.position),o.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(o),r.updateMatrixWorld(),i.makeTranslation(-a.x,-a.y,-a.z),s.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromMatrix(s)}}),Cc.prototype=Object.assign(Object.create(xc.prototype),{constructor:Cc,isPointLight:!0,copy:function(t){return xc.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Pc.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Pc,isOrthographicCamera:!0,copy:function(t,e){return Hi.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,a=n+t,o=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(o-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Zn.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),kc.prototype=Object.assign(Object.create(Sc.prototype),{constructor:kc,isDirectionalLightShadow:!0,updateMatrices:function(t,e,n){Sc.prototype.updateMatrices.call(this,t,e,n)}}),Ac.prototype=Object.assign(Object.create(xc.prototype),{constructor:Ac,isDirectionalLight:!0,copy:function(t){return xc.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Oc.prototype=Object.assign(Object.create(xc.prototype),{constructor:Oc,isAmbientLight:!0}),Lc.prototype=Object.assign(Object.create(xc.prototype),{constructor:Lc,isRectAreaLight:!0,copy:function(t){return xc.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=xc.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Ic.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Ic,load:function(t,e,n,r){var i=this,a=new Wl(i.manager);a.setPath(i.path),a.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",t),e[t]}var r=new El[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.uniforms)for(var i in t.uniforms){var a=t.uniforms[i];switch(r.uniforms[i]={},a.type){case\"t\":r.uniforms[i].value=n(a.value);break;case\"c\":r.uniforms[i].value=(new Dr).setHex(a.value);break;case\"v2\":r.uniforms[i].value=(new hn).fromArray(a.value);break;case\"v3\":r.uniforms[i].value=(new mn).fromArray(a.value);break;case\"v4\":r.uniforms[i].value=(new wn).fromArray(a.value);break;case\"m3\":r.uniforms[i].value=(new yn).fromArray(a.value);case\"m4\":r.uniforms[i].value=(new Ln).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)r.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new hn).fromArray(s)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new hn).fromArray(t.clearcoatNormalScale)),r},setTextures:function(t){return this.textures=t,this}});var Nc={decodeText:function(t){if(\"undefined\"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e=\"\",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf(\"/\");return-1===e?\"./\":t.substr(0,e+1)}};function Rc(){li.call(this),this.type=\"InstancedBufferGeometry\",this.maxInstancedCount=void 0}function Dc(t,e,n,r){\"number\"==typeof n&&(r=n,n=!1,console.error(\"THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.\")),Gr.call(this,t,e,n),this.meshPerAttribute=r||1}function zc(t){Hl.call(this,t)}Rc.prototype=Object.assign(Object.create(li.prototype),{constructor:Rc,isInstancedBufferGeometry:!0,copy:function(t){return li.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=li.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Dc.prototype=Object.assign(Object.create(Gr.prototype),{constructor:Dc,isInstancedBufferAttribute:!0,copy:function(t){return Gr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Gr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),zc.prototype=Object.assign(Object.create(Hl.prototype),{constructor:zc,load:function(t,e,n,r){var i=this,a=new Wl(i.manager);a.setPath(i.path),a.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=t.isInstancedBufferGeometry?new Rc:new li,n=t.data.index;if(void 0!==n){var r=new Bc[n.type](n.array);e.setIndex(new Gr(r,1))}var i=t.data.attributes;for(var a in i){var o=i[a],s=(r=new Bc[o.type](o.array),new(o.isInstancedBufferAttribute?Dc:Gr)(r,o.itemSize,o.normalized));void 0!==o.name&&(s.name=o.name),e.addAttribute(a,s)}var u=t.data.morphAttributes;if(u)for(var a in u){for(var l=u[a],c=[],h=0,f=l.length;h<f;h++){o=l[h],s=new Gr(r=new Bc[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),c.push(s)}e.morphAttributes[a]=c}var d=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==d){h=0;for(var p=d.length;h!==p;++h){var m=d[h];e.addGroup(m.start,m.count,m.materialIndex)}}var g=t.data.boundingSphere;if(void 0!==g){var v=new mn;void 0!==g.center&&v.fromArray(g.center),e.boundingSphere=new dr(v,g.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Bc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:\"undefined\"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Fc(t){Hl.call(this,t)}Fc.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Fc,load:function(t,e,n,r){var i=this,a=\"\"===this.path?Nc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new Wl(i.manager);o.setPath(this.path),o.load(t,(function(n){var a=null;try{a=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error(\"THREE:ObjectLoader: Can't parse \"+t+\".\",e.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&\"geometry\"!==o.type.toLowerCase()?i.parse(a,e):console.error(\"THREE.ObjectLoader: Can't load \"+t)}),n,r)},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),a=this.parseTextures(t.textures,i),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,r,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new _c).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new zc,i=0,a=t.length;i<a;i++){var o,s=t[i];switch(s.type){case\"PlaneGeometry\":case\"PlaneBufferGeometry\":o=new dl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case\"BoxGeometry\":case\"BoxBufferGeometry\":case\"CubeGeometry\":o=new dl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case\"CircleGeometry\":case\"CircleBufferGeometry\":o=new dl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case\"CylinderGeometry\":case\"CylinderBufferGeometry\":o=new dl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case\"ConeGeometry\":case\"ConeBufferGeometry\":o=new dl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case\"SphereGeometry\":case\"SphereBufferGeometry\":o=new dl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case\"DodecahedronGeometry\":case\"DodecahedronBufferGeometry\":case\"IcosahedronGeometry\":case\"IcosahedronBufferGeometry\":case\"OctahedronGeometry\":case\"OctahedronBufferGeometry\":case\"TetrahedronGeometry\":case\"TetrahedronBufferGeometry\":o=new dl[s.type](s.radius,s.detail);break;case\"RingGeometry\":case\"RingBufferGeometry\":o=new dl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case\"TorusGeometry\":case\"TorusBufferGeometry\":o=new dl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case\"TorusKnotGeometry\":case\"TorusKnotBufferGeometry\":o=new dl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case\"TubeGeometry\":case\"TubeBufferGeometry\":o=new dl[s.type]((new vc[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case\"LatheGeometry\":case\"LatheBufferGeometry\":o=new dl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case\"PolyhedronGeometry\":case\"PolyhedronBufferGeometry\":o=new dl[s.type](s.vertices,s.indices,s.radius,s.details);break;case\"ShapeGeometry\":case\"ShapeBufferGeometry\":for(var u=[],l=0,c=s.shapes.length;l<c;l++){var h=e[s.shapes[l]];u.push(h)}o=new dl[s.type](u,s.curveSegments);break;case\"ExtrudeGeometry\":case\"ExtrudeBufferGeometry\":for(u=[],l=0,c=s.shapes.length;l<c;l++){h=e[s.shapes[l]];u.push(h)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new vc[f.type]).fromJSON(f)),o=new dl[s.type](u,s.options);break;case\"BufferGeometry\":case\"InstancedBufferGeometry\":o=r.parse(s);break;case\"Geometry\":if(\"THREE\"in window&&\"LegacyJSONLoader\"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type \"Geometry\".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+s.type+'\"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var i=new Ic;i.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if(\"MultiMaterial\"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=Bl.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var a=new Ql(new Ul(e));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var u=t[o],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var f=l[c],d=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(f)?f:n.resourcePath+f;r[u.uuid].push(i(d))}}else{d=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url;r[u.uuid]=i(d)}}}return r},parseTextures:function(t,e){function n(t,e){return\"number\"==typeof t?t:(console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",t),e[t])}var r={};if(void 0!==t)for(var i=0,a=t.length;i<a;i++){var o,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',s.uuid),void 0===e[s.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",s.image),(o=Array.isArray(e[s.image])?new xa(e[s.image]):new xn(e[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,Uc)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Vc),o.wrapT=n(s.wrap[1],Vc)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Hc)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Hc)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),r[s.uuid]=o}return r},parseObject:function(t,e,n){var r;function i(t){return void 0===e[t]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",t),e[t]}function a(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var a=t[r];void 0===n[a]&&console.warn(\"THREE.ObjectLoader: Undefined material\",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn(\"THREE.ObjectLoader: Undefined material\",t),n[t]}}switch(t.type){case\"Scene\":r=new $n,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new Dr(t.background)),void 0!==t.fog&&(\"Fog\"===t.fog.type?r.fog=new ss(t.fog.color,t.fog.near,t.fog.far):\"FogExp2\"===t.fog.type&&(r.fog=new os(t.fog.color,t.fog.density)));break;case\"PerspectiveCamera\":r=new Gi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case\"OrthographicCamera\":r=new Pc(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case\"AmbientLight\":r=new Oc(t.color,t.intensity);break;case\"DirectionalLight\":r=new Ac(t.color,t.intensity);break;case\"PointLight\":r=new Cc(t.color,t.intensity,t.distance,t.decay);break;case\"RectAreaLight\":r=new Lc(t.color,t.intensity,t.width,t.height);break;case\"SpotLight\":r=new Mc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case\"HemisphereLight\":r=new wc(t.color,t.groundColor,t.intensity);break;case\"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.\");case\"Mesh\":var o=i(t.geometry),s=a(t.material);r=o.bones&&o.bones.length>0?new Ps(o,s):new Ci(o,s),void 0!==t.drawMode&&r.setDrawMode(t.drawMode);break;case\"LOD\":r=new Cs;break;case\"Line\":r=new Fs(i(t.geometry),a(t.material),t.mode);break;case\"LineLoop\":r=new Hs(i(t.geometry),a(t.material));break;case\"LineSegments\":r=new Vs(i(t.geometry),a(t.material));break;case\"PointCloud\":case\"Points\":r=new Qs(i(t.geometry),a(t.material));break;case\"Sprite\":r=new Ss(a(t.material));break;case\"Group\":r=new $o;break;default:r=new Zn}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var u=t.children,l=0;l<u.length;l++)r.add(this.parseObject(u[l],e,n));if(\"LOD\"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var f=c[h],d=r.getObjectByProperty(\"uuid\",f.object);void 0!==d&&r.addLevel(d,f.distance)}return r}});var jc,Uc={UVMapping:ct,CubeReflectionMapping:ht,CubeRefractionMapping:ft,EquirectangularReflectionMapping:dt,EquirectangularRefractionMapping:pt,SphericalReflectionMapping:mt,CubeUVReflectionMapping:gt,CubeUVRefractionMapping:vt},Vc={RepeatWrapping:yt,ClampToEdgeWrapping:bt,MirroredRepeatWrapping:_t},Hc={NearestFilter:xt,NearestMipmapNearestFilter:wt,NearestMipmapLinearFilter:Et,LinearFilter:Tt,LinearMipmapNearestFilter:Ct,LinearMipmapLinearFilter:kt};function Gc(t){\"undefined\"==typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\"),\"undefined\"==typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\"),Hl.call(this,t),this.options=void 0}function Wc(){this.type=\"ShapePath\",this.color=new Dr,this.subPaths=[],this.currentPath=null}function qc(t){this.type=\"Font\",this.data=t}function Xc(t,e,n,r,i){var a=i.glyphs[t]||i.glyphs[\"?\"];if(a){var o,s,u,l,c,h,f,d,p=new Wc;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(\" \")),g=0,v=m.length;g<v;){switch(m[g++]){case\"m\":o=m[g++]*e+n,s=m[g++]*e+r,p.moveTo(o,s);break;case\"l\":o=m[g++]*e+n,s=m[g++]*e+r,p.lineTo(o,s);break;case\"q\":u=m[g++]*e+n,l=m[g++]*e+r,c=m[g++]*e+n,h=m[g++]*e+r,p.quadraticCurveTo(c,h,u,l);break;case\"b\":u=m[g++]*e+n,l=m[g++]*e+r,c=m[g++]*e+n,h=m[g++]*e+r,f=m[g++]*e+n,d=m[g++]*e+r,p.bezierCurveTo(c,h,f,d,u,l)}}return{offsetX:a.ha*e,path:p}}console.error('THREE.Font: character \"'+t+'\" does not exists in font family '+i.familyName+\".\")}function Yc(t){Hl.call(this,t)}Gc.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Gc,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,a=jl.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout((function(){e&&e(a),i.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===i.options?createImageBitmap(t):createImageBitmap(t,i.options)})).then((function(n){jl.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(Wc.prototype,{moveTo:function(t,e){this.currentPath=new bc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,a){this.currentPath.bezierCurveTo(t,e,n,r,i,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],a=new _c;a.curves=i.curves,e.push(a)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=e[i],s=e[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[a],u=-u,s=e[i],l=-l),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=l*(t.x-o.x)-u*(t.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return r}var i=Vu.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);var o,s,u,l=[];if(1===a.length)return s=a[0],(u=new _c).curves=s.curves,l.push(u),l;var c=!i(a[0].getPoints());c=t?!c:c;var h,f,d=[],p=[],m=[],g=0;p[g]=void 0,m[g]=[];for(var v=0,y=a.length;v<y;v++)o=i(h=(s=a[v]).getPoints()),(o=t?!o:o)?(!c&&p[g]&&g++,p[g]={s:new _c,p:h},p[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!p[0])return n(a);if(p.length>1){for(var b=!1,_=[],x=0,w=p.length;x<w;x++)d[x]=[];for(x=0,w=p.length;x<w;x++)for(var S=m[x],E=0;E<S.length;E++){for(var M=S[E],T=!0,C=0;C<p.length;C++)r(M.p,p[C].p)&&(x!==C&&_.push({froms:x,tos:C,hole:E}),T?(T=!1,d[C].push(M)):b=!0);T&&d[x].push(M)}_.length>0&&(b||(m=d))}v=0;for(var P=p.length;v<P;v++){u=p[v].s,l.push(u);for(var k=0,A=(f=m[v]).length;k<A;k++)u.holes.push(f[k].h)}return l}}),Object.assign(qc.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(\"\"),i=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if(\"\\n\"===c)s=0,u-=a;else{var h=Xc(c,i,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}(t,e,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Yc.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Yc,load:function(t,e,n,r){var i=this,a=new Wl(this.manager);a.setPath(this.path),a.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new qc(t)}});var Qc={getContext:function(){return void 0===jc&&(jc=new(window.AudioContext||window.webkitAudioContext)),jc},setContext:function(t){jc=t}};function Zc(t){Hl.call(this,t)}function $c(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new mn)}function Jc(t,e){xc.call(this,void 0,e),this.sh=void 0!==t?t:new $c}function Kc(t,e,n){Jc.call(this,void 0,n);var r=(new Dr).set(t),i=(new Dr).set(e),a=new mn(r.r,r.g,r.b),o=new mn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(u)}function th(t,e){Jc.call(this,void 0,e);var n=(new Dr).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Zc.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Zc,load:function(t,e,n,r){var i=new Wl(this.manager);i.setResponseType(\"arraybuffer\"),i.setPath(this.path),i.load(t,(function(t){var n=t.slice(0);Qc.getContext().decodeAudioData(n,(function(t){e(t)}))}),n,r)}}),Object.assign($c.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,r=t.y,i=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScale(a[1],.488603*r),e.addScale(a[2],.488603*i),e.addScale(a[3],.488603*n),e.addScale(a[4],n*r*1.092548),e.addScale(a[5],r*i*1.092548),e.addScale(a[6],.315392*(3*i*i-1)),e.addScale(a[7],n*i*1.092548),e.addScale(a[8],.546274*(n*n-r*r)),e},getIrradianceAt:function(t,e){var n=t.x,r=t.y,i=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScale(a[1],1.023328*r),e.addScale(a[2],1.023328*i),e.addScale(a[3],1.023328*n),e.addScale(a[4],.858086*n*r),e.addScale(a[5],.858086*r*i),e.addScale(a[6],.743125*i*i-.247708),e.addScale(a[7],.858086*n*i),e.addScale(a[8],.429043*(n*n-r*r)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}),Object.assign($c,{getBasisAt:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}),Jc.prototype=Object.assign(Object.create(xc.prototype),{constructor:Jc,isLightProbe:!0,copy:function(t){return xc.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return xc.prototype.toJSON.call(this,t)}}),Kc.prototype=Object.assign(Object.create(Jc.prototype),{constructor:Kc,isHemisphereLightProbe:!0,copy:function(t){return Jc.prototype.copy.call(this,t),this},toJSON:function(t){return Jc.prototype.toJSON.call(this,t)}}),th.prototype=Object.assign(Object.create(Jc.prototype),{constructor:th,isAmbientLightProbe:!0,copy:function(t){return Jc.prototype.copy.call(this,t),this},toJSON:function(t){return Jc.prototype.toJSON.call(this,t)}});var eh=new Ln,nh=new Ln;function rh(){this.type=\"StereoCamera\",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function ih(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(rh.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,r,i=t.projectionMatrix.clone(),a=e.eyeSep/2,o=a*e.near/e.focus,s=e.near*Math.tan(cn.DEG2RAD*e.fov*.5)/e.zoom;nh.elements[12]=-a,eh.elements[12]=a,n=-s*e.aspect+o,r=s*e.aspect+o,i.elements[0]=2*e.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*e.aspect-o,r=s*e.aspect-o,i.elements[0]=2*e.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(nh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(eh)}}),Object.assign(ih.prototype,{start:function(){this.startTime=(\"undefined\"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=(\"undefined\"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var ah=new mn,oh=new fn,sh=new mn,uh=new mn;function lh(){Zn.call(this),this.type=\"AudioListener\",this.context=Qc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ih}function ch(t){Zn.call(this),this.type=\"Audio\",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType=\"empty\",this.filters=[]}lh.prototype=Object.assign(Object.create(Zn.prototype),{constructor:lh,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){Zn.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ah,oh,sh),uh.set(0,0,-1).applyQuaternion(oh),e.positionX){var r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(ah.x,r),e.positionY.linearRampToValueAtTime(ah.y,r),e.positionZ.linearRampToValueAtTime(ah.z,r),e.forwardX.linearRampToValueAtTime(uh.x,r),e.forwardY.linearRampToValueAtTime(uh.y,r),e.forwardZ.linearRampToValueAtTime(uh.z,r),e.upX.linearRampToValueAtTime(n.x,r),e.upY.linearRampToValueAtTime(n.y,r),e.upZ.linearRampToValueAtTime(n.z,r)}else e.setPosition(ah.x,ah.y,ah.z),e.setOrientation(uh.x,uh.y,uh.z,n.x,n.y,n.z)}}),ch.prototype=Object.assign(Object.create(Zn.prototype),{constructor:ch,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"mediaNode\",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType=\"buffer\",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn(\"THREE.Audio: this Audio has no playback control.\")}else console.warn(\"THREE.Audio: Audio is already playing.\")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var hh=new mn,fh=new fn,dh=new mn,ph=new mn;function mh(t){ch.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel=\"HRTF\",this.panner.connect(this.gain)}function gh(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function vh(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case\"quaternion\":r=this._slerp;break;case\"string\":case\"bool\":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}mh.prototype=Object.assign(Object.create(ch.prototype),{constructor:mh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(Zn.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(hh,fh,dh),ph.set(0,0,1).applyQuaternion(fh);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(hh.x,n),e.positionY.linearRampToValueAtTime(hh.y,n),e.positionZ.linearRampToValueAtTime(hh.z,n),e.orientationX.linearRampToValueAtTime(ph.x,n),e.orientationY.linearRampToValueAtTime(ph.y,n),e.orientationZ.linearRampToValueAtTime(ph.z,n)}else e.setPosition(hh.x,hh.y,hh.z),e.setOrientation(ph.x,ph.y,ph.z)}}}),Object.assign(gh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(vh.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*e;this._mixBufferRegion(n,r,o,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){a.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,a=r;i!==a;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,r){fn.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*r}}});var yh=new RegExp(\"[\\\\[\\\\]\\\\.:\\\\/]\",\"g\"),bh=\"[^\"+\"\\\\[\\\\]\\\\.:\\\\/\".replace(\"\\\\.\",\"\")+\"]\",_h=/((?:WC+[\\/:])*)/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),xh=/(WCOD+)?/.source.replace(\"WCOD\",bh),wh=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),Sh=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),Eh=new RegExp(\"^\"+_h+xh+wh+Sh+\"$\"),Mh=[\"material\",\"materials\",\"bones\"];function Th(t,e,n){var r=n||Ch.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Ch(t,e,n){this.path=e,this.parsedPath=n||Ch.parseTrackName(e),this.node=Ch.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Ph(){this.uuid=cn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function kh(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,a=new Array(i),o={endingStart:Ce,endingEnd:Ce},s=0;s!==i;++s){var u=r[s].createInterpolant(null);a[s]=u,u.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=we,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ah(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Oh(t){\"string\"==typeof t&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),t=arguments[1]),this.value=t}function Lh(t,e,n){us.call(this,t,e),this.meshPerAttribute=n||1}function Ih(t,e,n,r){this.ray=new xr(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\"),this.Points}}})}function Nh(t,e){return t.distance-e.distance}function Rh(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r))for(var i=t.children,a=0,o=i.length;a<o;a++)Rh(i[a],e,n,!0)}function Dh(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function zh(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}Object.assign(Th.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Ch,{Composite:Th,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Ch.Composite(t,e,n):new Ch(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\\s/g,\"_\").replace(yh,\"\")},parseTrackName:function(t){var e=Eh.exec(t);if(!e)throw new Error(\"PropertyBinding: Cannot parse trackName: \"+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(\".\");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Mh.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error(\"PropertyBinding: can not parse propertyName from trackName: \"+t);return n},findNode:function(t,e){if(!e||\"\"===e||\"root\"===e||\".\"===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var a=r(i.children);if(a)return a}return null},i=r(t.children);if(i)return i}return null}}),Object.assign(Ch.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Ch.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case\"materials\":if(!t.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!t.material.materials)return void console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);t=t.material.materials;break;case\"bones\":if(!t.skeleton)return void console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return void console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,t);t=t[a]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if(\"morphTargetInfluences\"===r){if(!t.geometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!t.geometry.morphTargets)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.\",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===i){i=o;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else{var c=e.nodeName;console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+c+\".\"+r+\" but it wasn't found.\",t)}}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+this.path+\" but it wasn't found.\")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign(Ch.prototype,{_getValue_unbound:Ch.prototype.getValue,_setValue_unbound:Ch.prototype.setValue}),Object.assign(Ph.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=r[f];if(void 0===d){d=e++,r[f]=d,t.push(h);for(var p=0,m=s;p!==m;++p)o[p].push(new Ch(h,i[p],a[p]))}else if(d<n){u=t[d];var g=--n,v=t[g];r[v.uuid]=d,t[d]=v,r[f]=g,t[g]=h;for(p=0,m=s;p!==m;++p){var y=o[p],b=y[g],_=y[d];y[d]=b,void 0===_&&(_=new Ch(h,i[p],a[p])),y[g]=_}}else t[d]!==u&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=n[u];if(void 0!==l&&l>=e){var c=e++,h=t[c];n[h.uuid]=l,t[l]=h,n[u]=c,t[c]=s;for(var f=0,d=i;f!==d;++f){var p=r[f],m=p[c],g=p[l];p[l]=m,p[c]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=r[l];if(void 0!==c)if(delete r[l],c<n){var h=--n,f=t[h],d=t[y=--e];r[f.uuid]=c,t[c]=f,r[d.uuid]=h,t[h]=d,t.pop();for(var p=0,m=a;p!==m;++p){var g=(b=i[p])[h],v=b[y];b[c]=g,b[h]=v,b.pop()}}else{var y;r[(d=t[y=--e]).uuid]=c,t[c]=d,t.pop();for(p=0,m=a;p!==m;++p){var b;(b=i[p])[c]=b[y],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[t]=r,a.push(t),o.push(e),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new Ch(d,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}),Object.assign(kh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,a=i/r,o=r/i;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/o,u[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(t-i)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(o),l[c].accumulate(r,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,r=this.loop,i=this._loopCount,a=r===Se;if(0===t)return-1===i?e:a&&1==(1&i)?n-e:e;if(r===xe){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var o=Math.floor(e/n);e-=n*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=e,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:o})}}else this.time=e;if(a&&1==(1&i))return n-e}return e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=Pe,r.endingEnd=Pe):(r.endingStart=t?this.zeroSlopeAtStart?Pe:Ce:ke,r.endingEnd=e?this.zeroSlopeAtEnd?Pe:Ce:ke)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=e,o[1]=i+t,s[1]=n,this}}),Ah.prototype=Object.assign(Object.create(r.prototype),{constructor:Ah,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;++(d=new vh(Ch.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,a=i[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=r.length,r.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],a=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Pl(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i=\"string\"==typeof t?Bl.findByName(n,t):t,a=null!==i?i.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var u=o.actionByRoot[r];if(void 0!==u)return u;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new kh(this,i,e);return this._bindAction(l,s),this._addInactiveAction(l,a,r),l},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i=\"string\"==typeof t?Bl.findByName(n,t):t,a=i?i.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(r,t,i,a)}var s=this._bindings,u=this._nActiveBindings;for(o=0;o!==u;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Oh.prototype.clone=function(){return new Oh(void 0===this.value.clone?this.value:this.value.clone())},Lh.prototype=Object.assign(Object.create(us.prototype),{constructor:Lh,isInstancedInterleavedBuffer:!0,copy:function(t){return us.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Ih.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(t,e,n){var r=n||[];return Rh(t,this,r,e),r.sort(Nh),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),r;for(var i=0,a=t.length;i<a;i++)Rh(t[i],this,r,e);return r.sort(Nh),r}}),Object.assign(Dh.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(cn.clamp(e/this.radius,-1,1))),this}}),Object.assign(zh.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var Bh=new hn;function Fh(t,e){this.min=void 0!==t?t:new hn(1/0,1/0),this.max=void 0!==e?e:new hn(-1/0,-1/0)}Object.assign(Fh.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Bh.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Box2: .getCenter() target is now required\"),t=new hn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn(\"THREE.Box2: .getSize() target is now required\"),t=new hn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn(\"THREE.Box2: .getParameter() target is now required\"),e=new hn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Box2: .clampPoint() target is now required\"),e=new hn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Bh.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var jh=new mn,Uh=new mn;function Vh(t,e){this.start=void 0!==t?t:new mn,this.end=void 0!==e?e:new mn}function Hh(t){Zn.call(this),this.material=t,this.render=function(){}}Object.assign(Vh.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Line3: .getCenter() target is now required\"),t=new mn),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn(\"THREE.Line3: .delta() target is now required\"),t=new mn),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn(\"THREE.Line3: .at() target is now required\"),e=new mn),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){jh.subVectors(t,this.start),Uh.subVectors(this.end,this.start);var n=Uh.dot(Uh),r=Uh.dot(jh)/n;return e&&(r=cn.clamp(r,0,1)),r},closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn(\"THREE.Line3: .closestPointToPoint() target is now required\"),n=new mn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Hh.prototype=Object.create(Zn.prototype),Hh.prototype.constructor=Hh,Hh.prototype.isImmediateRenderObject=!0;var Gh=new mn,Wh=new mn,qh=new yn,Xh=[\"a\",\"b\",\"c\"];function Yh(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var u=new li,l=new Jr(2*o*3,3);u.addAttribute(\"position\",l),Vs.call(this,u,new Is({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}Yh.prototype=Object.create(Vs.prototype),Yh.prototype.constructor=Yh,Yh.prototype.update=function(){this.object.updateMatrixWorld(!0),qh.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,i=n.faces,a=0,o=0,s=i.length;o<s;o++)for(var u=i[o],l=0,c=u.vertexNormals.length;l<c;l++){var h=r[u[Xh[l]]],f=u.vertexNormals[l];Gh.copy(h).applyMatrix4(t),Wh.copy(f).applyMatrix3(qh).normalize().multiplyScalar(this.size).add(Gh),e.setXYZ(a,Gh.x,Gh.y,Gh.z),a+=1,e.setXYZ(a,Wh.x,Wh.y,Wh.z),a+=1}else if(n&&n.isBufferGeometry){var d=n.attributes.position,p=n.attributes.normal;for(a=0,l=0,c=d.count;l<c;l++)Gh.set(d.getX(l),d.getY(l),d.getZ(l)).applyMatrix4(t),Wh.set(p.getX(l),p.getY(l),p.getZ(l)),Wh.applyMatrix3(qh).normalize().multiplyScalar(this.size).add(Gh),e.setXYZ(a,Gh.x,Gh.y,Gh.z),a+=1,e.setXYZ(a,Wh.x,Wh.y,Wh.z),a+=1}e.needsUpdate=!0};var Qh=new mn;function Zh(t,e){Zn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new li,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1;i<32;i++,a++){var o=i/32*Math.PI*2,s=a/32*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute(\"position\",new Jr(r,3));var u=new Is({fog:!1});this.cone=new Vs(n,u),this.add(this.cone),this.update()}Zh.prototype=Object.create(Zn.prototype),Zh.prototype.constructor=Zh,Zh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Zh.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Qh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Qh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var $h=new mn,Jh=new Ln,Kh=new Ln;function tf(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new li,r=[],i=[],a=new Dr(0,0,1),o=new Dr(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.addAttribute(\"position\",new Jr(r,3)),n.addAttribute(\"color\",new Jr(i,3));var l=new Is({vertexColors:E,depthTest:!1,depthWrite:!1,transparent:!0});Vs.call(this,n,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function ef(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new Ju(e,4,2),i=new Hr({wireframe:!0,fog:!1});Ci.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function nf(t,e){this.type=\"RectAreaLightHelper\",this.light=t,this.color=e;var n=new li;n.addAttribute(\"position\",new Jr([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var r=new Is({fog:!1});Fs.call(this,n,r);var i=new li;i.addAttribute(\"position\",new Jr([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Ci(i,new Hr({side:y,fog:!1}))),this.update()}tf.prototype=Object.create(Vs.prototype),tf.prototype.constructor=tf,tf.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,r=n.getAttribute(\"position\");Kh.getInverse(this.root.matrixWorld);for(var i=0,a=0;i<e.length;i++){var o=e[i];o.parent&&o.parent.isBone&&(Jh.multiplyMatrices(Kh,o.matrixWorld),$h.setFromMatrixPosition(Jh),r.setXYZ(a,$h.x,$h.y,$h.z),Jh.multiplyMatrices(Kh,o.parent.matrixWorld),$h.setFromMatrixPosition(Jh),r.setXYZ(a+1,$h.x,$h.y,$h.z),a+=2)}n.getAttribute(\"position\").needsUpdate=!0,Zn.prototype.updateMatrixWorld.call(this,t)},ef.prototype=Object.create(Ci.prototype),ef.prototype.constructor=ef,ef.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ef.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},nf.prototype=Object.create(Fs.prototype),nf.prototype.constructor=nf,nf.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},nf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var rf=new mn,af=new Dr,of=new Dr;function sf(t,e,n){Zn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new lu(e);r.rotateY(.5*Math.PI),this.material=new Hr({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=E);var i=r.getAttribute(\"position\"),a=new Float32Array(3*i.count);r.addAttribute(\"color\",new Gr(a,3)),this.add(new Ci(r,this.material)),this.update()}function uf(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:\"\"},r=new Vi({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:[\"varying vec3 vNormal;\",\"void main() {\",\"\\tvNormal = normalize( normalMatrix * normal );\",\"\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\"}\"].join(\"\\n\"),fragmentShader:[\"#define RECIPROCAL_PI 0.318309886\",\"vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\",\"\\t// matrix is assumed to be orthogonal\",\"\\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\",\"}\",\"vec3 linearToOutput( in vec3 a ) {\",\"\\t#ifdef GAMMA_OUTPUT\",\"\\t\\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\",\"\\t#else\",\"\\t\\treturn a;\",\"\\t#endif\",\"}\",\"// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\",\"vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\",\"\\t// normal is assumed to have unit length\",\"\\tfloat x = normal.x, y = normal.y, z = normal.z;\",\"\\t// band 0\",\"\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\",\"\\t// band 1\",\"\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\",\"\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\",\"\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\",\"\\t// band 2\",\"\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\",\"\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\",\"\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\",\"\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\",\"\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\",\"\\treturn result;\",\"}\",\"uniform vec3 sh[ 9 ]; // sh coefficients\",\"uniform float intensity; // light probe intensity\",\"varying vec3 vNormal;\",\"void main() {\",\"\\tvec3 normal = normalize( vNormal );\",\"\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\",\"\\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );\",\"\\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;\",\"\\toutgoingLight = linearToOutput( outgoingLight );\",\"\\tgl_FragColor = vec4( outgoingLight, 1.0 );\",\"}\"].join(\"\\n\")}),i=new Ju(1,32,16);Ci.call(this,i,r),this.onBeforeRender()}function lf(t,e,n,r){t=t||10,e=e||10,n=new Dr(void 0!==n?n:4473924),r=new Dr(void 0!==r?r:8947848);for(var i=e/2,a=t/e,o=t/2,s=[],u=[],l=0,c=0,h=-o;l<=e;l++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var f=l===i?n:r;f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3}var d=new li;d.addAttribute(\"position\",new Jr(s,3)),d.addAttribute(\"color\",new Jr(u,3));var p=new Is({vertexColors:E});Vs.call(this,d,p)}function cf(t,e,n,r,i,a){t=t||10,e=e||16,n=n||8,r=r||64,i=new Dr(void 0!==i?i:4473924),a=new Dr(void 0!==a?a:8947848);var o,s,u,l,c,h,f,d=[],p=[];for(l=0;l<=e;l++)u=l/e*(2*Math.PI),o=Math.sin(u)*t,s=Math.cos(u)*t,d.push(0,0,0),d.push(o,0,s),f=1&l?i:a,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(l=0;l<=n;l++)for(f=1&l?i:a,h=t-t/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),o=Math.sin(u)*h,s=Math.cos(u)*h,d.push(o,0,s),p.push(f.r,f.g,f.b),u=(c+1)/r*(2*Math.PI),o=Math.sin(u)*h,s=Math.cos(u)*h,d.push(o,0,s),p.push(f.r,f.g,f.b);var m=new li;m.addAttribute(\"position\",new Jr(d,3)),m.addAttribute(\"color\",new Jr(p,3));var g=new Is({vertexColors:E});Vs.call(this,m,g)}function hf(t,e,n,r){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new li,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));i.addAttribute(\"position\",new Gr(o,3));var s=new Is({color:65280}),u=new Is({color:16776960});Fs.call(this,i,[u,s]),this.update()}sf.prototype=Object.create(Zn.prototype),sf.prototype.constructor=sf,sf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},sf.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute(\"color\");af.copy(this.light.color),of.copy(this.light.groundColor);for(var n=0,r=e.count;n<r;n++){var i=n<r/2?af:of;e.setXYZ(n,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(rf.setFromMatrixPosition(this.light.matrixWorld).negate())},uf.prototype=Object.create(Ci.prototype),uf.prototype.constructor=uf,uf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},uf.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},lf.prototype=Object.assign(Object.create(Vs.prototype),{constructor:lf,copy:function(t){return Vs.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),cf.prototype=Object.create(Vs.prototype),cf.prototype.constructor=cf,hf.prototype=Object.create(Fs.prototype),hf.prototype.constructor=hf,hf.prototype.update=function(){var t,e,n=this.audio,r=this.range,i=this.divisionsInnerAngle,a=this.divisionsOuterAngle,o=cn.degToRad(n.panner.coneInnerAngle),s=cn.degToRad(n.panner.coneOuterAngle),u=o/2,l=s/2,c=0,h=0,f=this.geometry,d=f.attributes.position;function p(n,i,a,o){var s=(i-n)/a;for(d.setXYZ(c,0,0,0),h++,t=n;t<i;t+=s)e=c+h,d.setXYZ(e,Math.sin(t)*r,0,Math.cos(t)*r),d.setXYZ(e+1,Math.sin(Math.min(t+s,i))*r,0,Math.cos(Math.min(t+s,i))*r),d.setXYZ(e+2,0,0,0),h+=3;f.addGroup(c,h,o),c+=h,h=0}f.clearGroups(),p(-l,-u,a,0),p(-u,u,i,1),p(u,l,a,0),d.needsUpdate=!0,o===s&&(this.material[0].visible=!1)},hf.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var ff=new mn,df=new mn,pf=new yn;function mf(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn(\"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.\");var u=new li,l=new Jr(2*o*3,3);u.addAttribute(\"position\",l),Vs.call(this,u,new Is({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}mf.prototype=Object.create(Vs.prototype),mf.prototype.constructor=mf,mf.prototype.update=function(){this.object.updateMatrixWorld(!0),pf.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry,r=n.vertices,i=n.faces,a=0,o=0,s=i.length;o<s;o++){var u=i[o],l=u.normal;ff.copy(r[u.a]).add(r[u.b]).add(r[u.c]).divideScalar(3).applyMatrix4(t),df.copy(l).applyMatrix3(pf).normalize().multiplyScalar(this.size).add(ff),e.setXYZ(a,ff.x,ff.y,ff.z),a+=1,e.setXYZ(a,df.x,df.y,df.z),a+=1}e.needsUpdate=!0};var gf=new mn,vf=new mn,yf=new mn;function bf(t,e,n){Zn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new li;r.addAttribute(\"position\",new Jr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new Is({fog:!1});this.lightPlane=new Fs(r,i),this.add(this.lightPlane),(r=new li).addAttribute(\"position\",new Jr([0,0,0,0,0,1],3)),this.targetLine=new Fs(r,i),this.add(this.targetLine),this.update()}bf.prototype=Object.create(Zn.prototype),bf.prototype.constructor=bf,bf.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},bf.prototype.update=function(){gf.setFromMatrixPosition(this.light.matrixWorld),vf.setFromMatrixPosition(this.light.target.matrixWorld),yf.subVectors(vf,gf),this.lightPlane.lookAt(vf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vf),this.targetLine.scale.z=yf.length()};var _f=new mn,xf=new Hi;function wf(t){var e=new li,n=new Is({color:16777215,vertexColors:S}),r=[],i=[],a={},o=new Dr(16755200),s=new Dr(16711680),u=new Dr(43775),l=new Dr(16777215),c=new Dr(3355443);function h(t,e,n){f(t,n),f(e,n)}function f(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(r.length/3-1)}h(\"n1\",\"n2\",o),h(\"n2\",\"n4\",o),h(\"n4\",\"n3\",o),h(\"n3\",\"n1\",o),h(\"f1\",\"f2\",o),h(\"f2\",\"f4\",o),h(\"f4\",\"f3\",o),h(\"f3\",\"f1\",o),h(\"n1\",\"f1\",o),h(\"n2\",\"f2\",o),h(\"n3\",\"f3\",o),h(\"n4\",\"f4\",o),h(\"p\",\"n1\",s),h(\"p\",\"n2\",s),h(\"p\",\"n3\",s),h(\"p\",\"n4\",s),h(\"u1\",\"u2\",u),h(\"u2\",\"u3\",u),h(\"u3\",\"u1\",u),h(\"c\",\"t\",l),h(\"p\",\"c\",c),h(\"cn1\",\"cn2\",c),h(\"cn3\",\"cn4\",c),h(\"cf1\",\"cf2\",c),h(\"cf3\",\"cf4\",c),e.addAttribute(\"position\",new Jr(r,3)),e.addAttribute(\"color\",new Jr(i,3)),Vs.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Sf(t,e,n,r,i,a,o){_f.set(i,a,o).unproject(r);var s=e[t];if(void 0!==s)for(var u=n.getAttribute(\"position\"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],_f.x,_f.y,_f.z)}wf.prototype=Object.create(Vs.prototype),wf.prototype.constructor=wf,wf.prototype.update=function(){var t=this.geometry,e=this.pointMap;xf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sf(\"c\",e,t,xf,0,0,-1),Sf(\"t\",e,t,xf,0,0,1),Sf(\"n1\",e,t,xf,-1,-1,-1),Sf(\"n2\",e,t,xf,1,-1,-1),Sf(\"n3\",e,t,xf,-1,1,-1),Sf(\"n4\",e,t,xf,1,1,-1),Sf(\"f1\",e,t,xf,-1,-1,1),Sf(\"f2\",e,t,xf,1,-1,1),Sf(\"f3\",e,t,xf,-1,1,1),Sf(\"f4\",e,t,xf,1,1,1),Sf(\"u1\",e,t,xf,.7,1.1,-1),Sf(\"u2\",e,t,xf,-.7,1.1,-1),Sf(\"u3\",e,t,xf,0,2,-1),Sf(\"cf1\",e,t,xf,-1,0,1),Sf(\"cf2\",e,t,xf,1,0,1),Sf(\"cf3\",e,t,xf,0,-1,1),Sf(\"cf4\",e,t,xf,0,1,1),Sf(\"cn1\",e,t,xf,-1,0,-1),Sf(\"cn2\",e,t,xf,1,0,-1),Sf(\"cn3\",e,t,xf,0,-1,-1),Sf(\"cn4\",e,t,xf,0,1,-1),t.getAttribute(\"position\").needsUpdate=!0};var Ef=new cr;function Mf(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new li;i.setIndex(new Gr(n,1)),i.addAttribute(\"position\",new Gr(r,3)),Vs.call(this,i,new Is({color:e})),this.matrixAutoUpdate=!1,this.update()}function Tf(t,e){this.type=\"Box3Helper\",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new li;r.setIndex(new Gr(n,1)),r.addAttribute(\"position\",new Jr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Vs.call(this,r,new Is({color:e})),this.geometry.computeBoundingSphere()}function Cf(t,e,n){this.type=\"PlaneHelper\",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=new li;i.addAttribute(\"position\",new Jr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Fs.call(this,i,new Is({color:r}));var a=new li;a.addAttribute(\"position\",new Jr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Ci(a,new Hr({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}Mf.prototype=Object.create(Vs.prototype),Mf.prototype.constructor=Mf,Mf.prototype.update=function(t){if(void 0!==t&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\"),void 0!==this.object&&Ef.setFromObject(this.object),!Ef.isEmpty()){var e=Ef.min,n=Ef.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Mf.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Mf.prototype.copy=function(t){return Vs.prototype.copy.call(this,t),this.object=t.object,this},Mf.prototype.clone=function(){return(new this.constructor).copy(this)},Tf.prototype=Object.create(Vs.prototype),Tf.prototype.constructor=Tf,Tf.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Zn.prototype.updateMatrixWorld.call(this,t))},Cf.prototype=Object.create(Fs.prototype),Cf.prototype.constructor=Cf,Cf.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?y:v,this.lookAt(this.plane.normal),Zn.prototype.updateMatrixWorld.call(this,t)};var Pf,kf,Af=new mn;function Of(t,e,n,r,i,a){Zn.call(this),void 0===t&&(t=new mn(0,0,1)),void 0===e&&(e=new mn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===a&&(a=.2*i),void 0===Pf&&((Pf=new li).addAttribute(\"position\",new Jr([0,0,0,0,1,0],3)),(kf=new ul(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Fs(Pf,new Is({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ci(kf,new Hr({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,a)}function Lf(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new li;n.addAttribute(\"position\",new Jr(e,3)),n.addAttribute(\"color\",new Jr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Is({vertexColors:E});Vs.call(this,n,r)}function If(t,e,n,r,i,a,o){return console.warn(\"THREE.Face4 has been removed. A THREE.Face3 will be created instead.\"),new jr(t,e,n,i,a,o)}Of.prototype=Object.create(Zn.prototype),Of.prototype.constructor=Of,Of.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Af.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Af,e)}},Of.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Of.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Of.prototype.copy=function(t){return Zn.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Of.prototype.clone=function(){return(new this.constructor).copy(this)},Lf.prototype=Object.create(Vs.prototype),Lf.prototype.constructor=Lf;var Nf=0,Rf=1;function Df(t){return console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\"),t}function zf(t){return void 0===t&&(t=[]),console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\"),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Bf(t,e){return console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\"),new Qs(t,e)}function Ff(t){return console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\"),new Ss(t)}function jf(t,e){return console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\"),new Qs(t,e)}function Uf(t){return console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\"),new Gs(t)}function Vf(t){return console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\"),new Gs(t)}function Hf(t){return console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\"),new Gs(t)}function Gf(t,e,n){return console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\"),new mn(t,e,n)}function Wf(t,e){return console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.\"),new Gr(t,e).setDynamic(!0)}function qf(t,e){return console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\"),new Wr(t,e)}function Xf(t,e){return console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\"),new qr(t,e)}function Yf(t,e){return console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\"),new Xr(t,e)}function Qf(t,e){return console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\"),new Yr(t,e)}function Zf(t,e){return console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\"),new Qr(t,e)}function $f(t,e){return console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\"),new Zr(t,e)}function Jf(t,e){return console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\"),new $r(t,e)}function Kf(t,e){return console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\"),new Jr(t,e)}function td(t,e){return console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\"),new Kr(t,e)}function ed(t){console.warn(\"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\"),oc.call(this,t),this.type=\"catmullrom\",this.closed=!0}function nd(t){console.warn(\"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\"),oc.call(this,t),this.type=\"catmullrom\"}function rd(t){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\"),oc.call(this,t),this.type=\"catmullrom\"}function id(t){return console.warn(\"THREE.AxisHelper has been renamed to THREE.AxesHelper.\"),new Lf(t)}function ad(t,e){return console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\"),new Mf(t,e)}function od(t,e){return console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\"),new Vs(new ol(t.geometry),new Is({color:void 0!==e?e:16777215}))}function sd(t,e){return console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\"),new Vs(new eu(t.geometry),new Is({color:void 0!==e?e:16777215}))}function ud(t){return console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\"),new Wl(t)}function ld(t){return console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\"),new Yl(t)}Jl.create=function(t,e){return console.log(\"THREE.Curve.create() has been deprecated\"),t.prototype=Object.create(Jl.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(yc.prototype,{createPointsGeometry:function(t){console.warn(\"THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn(\"THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn(\"THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");for(var e=new Ni,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new mn(i.x,i.y,i.z||0))}return e}}),Object.assign(bc.prototype,{fromPoints:function(t){console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\"),this.setFromPoints(t)}}),ed.prototype=Object.create(oc.prototype),nd.prototype=Object.create(oc.prototype),rd.prototype=Object.create(oc.prototype),Object.assign(rd.prototype,{initFromArray:function(){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},reparametrizeByArcLength:function(){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}}),lf.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")},tf.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")},Object.assign(Hl.prototype,{extractUrlBase:function(t){return console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\"),Nc.extractUrlBase(t)}}),Object.assign(Fc.prototype,{setTexturePath:function(t){return console.warn(\"THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().\"),this.setResourcePath(t)}}),Object.assign(Fh.prototype,{center:function(t){return console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\"),this.getCenter(t)},empty:function(){return console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},isIntersectionBox:function(t){return console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},size:function(t){return console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\"),this.getSize(t)}}),Object.assign(cr.prototype,{center:function(t){return console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\"),this.getCenter(t)},empty:function(){return console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},isIntersectionBox:function(t){return console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(t)},size:function(t){return console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\"),this.getSize(t)}}),Vh.prototype.center=function(t){return console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\"),this.getCenter(t)},Object.assign(cn,{random16:function(){return console.warn(\"THREE.Math: .random16() has been deprecated. Use Math.random() instead.\"),Math.random()},nearestPowerOfTwo:function(t){return console.warn(\"THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().\"),cn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn(\"THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().\"),cn.ceilPowerOfTwo(t)}}),Object.assign(yn.prototype,{flattenToArrayOffset:function(t,e){return console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(t,e)},multiplyVector3:function(t){return console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\"),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},applyToBuffer:function(t){return console.warn(\"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\"),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}}),Object.assign(Ln.prototype,{extractPosition:function(t){return console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\"),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(t,e)},getPosition:function(){return console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\"),(new mn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\"),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},multiplyVector3:function(t){return console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},rotateAxis:function(t){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\"),t.transformDirection(this)},crossVector:function(t){return console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},rotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},rotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},rotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBuffer:function(t){return console.warn(\"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\"),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},makeFrustum:function(t,e,n,r,i,a){return console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\"),this.makePerspective(t,e,r,n,i,a)}}),Ki.prototype.isIntersectionLine=function(t){return console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\"),this.intersectsLine(t)},fn.prototype.multiplyVector3=function(t){return console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\"),t.applyQuaternion(this)},Object.assign(xr.prototype,{isIntersectionBox:function(t){return console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\"),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(t)}}),Object.assign(Lr.prototype,{area:function(){return console.warn(\"THREE.Triangle: .area() has been renamed to .getArea().\"),this.getArea()},barycoordFromPoint:function(t,e){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),this.getBarycoord(t,e)},midpoint:function(t){return console.warn(\"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().\"),this.getMidpoint(t)},normal:function(t){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),this.getNormal(t)},plane:function(t){return console.warn(\"THREE.Triangle: .plane() has been renamed to .getPlane().\"),this.getPlane(t)}}),Object.assign(Lr,{barycoordFromPoint:function(t,e,n,r,i){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),Lr.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),Lr.getNormal(t,e,n,r)}}),Object.assign(_c.prototype,{extractAllPoints:function(t){return console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\"),this.extractPoints(t)},extrude:function(t){return console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\"),new Wu(this,t)},makeGeometry:function(t){return console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\"),new rl(this,t)}}),Object.assign(hn.prototype,{fromAttribute:function(t,e,n){return console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(mn.prototype,{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},getPositionFromMatrix:function(t){return console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\"),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\"),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\"),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\"),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(wn.prototype,{fromAttribute:function(t,e,n){return console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(Ni.prototype,{computeTangents:function(){console.error(\"THREE.Geometry: .computeTangents() has been removed.\")},computeLineDistances:function(){console.error(\"THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.\")}}),Object.assign(Zn.prototype,{getChildByName:function(t){return console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\"),this.getObjectByName(t)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},translate:function(t,e){return console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\"),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error(\"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.\")}}),Object.defineProperties(Zn.prototype,{eulerOrder:{get:function(){return console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order},set:function(t){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order=t}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}}),Object.defineProperties(Cs.prototype,{objects:{get:function(){return console.warn(\"THREE.LOD: .objects has been renamed to .levels.\"),this.levels}}}),Object.defineProperty(Os.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}}),Ps.prototype.initBones=function(){console.error(\"THREE.SkinnedMesh: initBones() has been removed.\")},Object.defineProperty(Jl.prototype,\"__arcLengthDivisions\",{get:function(){return console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions},set:function(t){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions=t}}),Gi.prototype.setLens=function(t,e){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\"),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(xc.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(t){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\"),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\"),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\"),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\"),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\"),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\"),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\"),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(t){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\"),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(t){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\"),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\"),this.shadow.mapSize.height=t}}}),Object.defineProperties(Gr.prototype,{length:{get:function(){return console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\"),this.array.length}},copyIndicesArray:function(){console.error(\"THREE.BufferAttribute: .copyIndicesArray() has been removed.\")}}),Object.assign(li.prototype,{addIndex:function(t){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\"),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\"),console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\"),this.addGroup(t,e)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\"),this.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")}}),Object.defineProperties(li.prototype,{drawcalls:{get:function(){return console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\"),this.groups}},offsets:{get:function(){return console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\"),this.groups}}}),Object.assign(qu.prototype,{getArrays:function(){console.error(\"THREE.ExtrudeBufferGeometry: .getArrays() has been removed.\")},addShapeList:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.\")},addShape:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShape() has been removed.\")}}),Object.defineProperties(Oh.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){return console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\"),this}}}),Object.defineProperties(Vr.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},overdraw:{get:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")},set:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")}},wrapRGB:{get:function(){return console.warn(\"THREE.Material: .wrapRGB has been removed.\"),new Dr}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(t){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=t===_}}}),Object.defineProperties(yl.prototype,{metal:{get:function(){return console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\"),!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}}),Object.defineProperties(Vi.prototype,{derivatives:{get:function(){return console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives},set:function(t){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives=t}}}),Object.assign(as.prototype,{clearTarget:function(t,e,n,r){console.warn(\"THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.\"),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn(\"THREE.WebGLRenderer: .animate() is now .setAnimationLoop().\"),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\"),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\"),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\"),this.capabilities.precision},resetGLState:function(){return console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\"),this.state.reset()},supportsFloatTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\"),this.extensions.get(\"OES_texture_float\")},supportsHalfFloatTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\"),this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){return console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\"),this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},supportsCompressedTexturePVRTC:function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},supportsBlendMinMax:function(){return console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\"),this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\"),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\"),this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(t){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\"),this.setScissorTest(t)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},addPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")},setFaceCulling:function(){console.warn(\"THREE.WebGLRenderer: .setFaceCulling() has been removed.\")},allocTextureUnit:function(){console.warn(\"THREE.WebGLRenderer: .allocTextureUnit() has been removed.\")},setTexture:function(){console.warn(\"THREE.WebGLRenderer: .setTexture() has been removed.\")},setTexture2D:function(){console.warn(\"THREE.WebGLRenderer: .setTexture2D() has been removed.\")},setTextureCube:function(){console.warn(\"THREE.WebGLRenderer: .setTextureCube() has been removed.\")},getActiveMipMapLevel:function(){return console.warn(\"THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().\"),this.getActiveMipmapLevel()}}),Object.defineProperties(as.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\"),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\"),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")}},context:{get:function(){return console.warn(\"THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.\"),this.getContext()}}}),Object.defineProperties(Xo.prototype,{cullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")}},renderReverseSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")}},renderSingleSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")}}}),Object.defineProperties(Yi.prototype,{activeCubeFace:{set:function(){console.warn(\"THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().\")}},activeMipMapLevel:{set:function(){console.warn(\"THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().\")}}}),Object.defineProperties(Sn.prototype,{wrapS:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy=t}},offset:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset=t}},repeat:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat=t}},format:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format=t}},type:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps=t}}}),Object.defineProperties(rs.prototype,{standing:{set:function(){console.warn(\"THREE.WebVRManager: .standing has been removed.\")}},userHeight:{set:function(){console.warn(\"THREE.WebVRManager: .userHeight has been removed.\")}}}),ch.prototype.load=function(t){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var e=this;return(new Zc).load(t,(function(t){e.setBuffer(t)})),this},gh.prototype.getData=function(){return console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\"),this.getFrequencyData()},Xi.prototype.updateCubeMap=function(t,e){return console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\"),this.update(t,e)};var cd={merge:function(t,e,n){var r;console.warn(\"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.\"),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn(\"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.\"),t.center()}};function hd(){console.error(\"THREE.CanvasRenderer has been removed\")}function fd(){console.error(\"THREE.JSONLoader has been removed.\")}bn.crossOrigin=void 0,bn.loadTexture=function(t,e,n,r){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var i=new $l;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,n,void 0,r);return e&&(a.mapping=e),a},bn.loadTextureCube=function(t,e,n,r){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var i=new Zl;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,n,void 0,r);return e&&(a.mapping=e),a},bn.loadCompressedTexture=function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},bn.loadCompressedTextureCube=function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")};var dd={createMultiMaterialObject:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")},detach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")},attach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")}};function pd(){console.error(\"THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js\")}},function(t,e,n){var r=n(61),i=\"object\"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function(\"return this\")();t.exports=a},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.red=e.getContrastingColor=e.isValidHex=e.toState=e.simpleCheckForValidColor=void 0;var r=a(n(244)),i=a(n(246));function a(t){return t&&t.__esModule?t:{default:t}}e.simpleCheckForValidColor=function(t){var e=0,n=0;return(0,r.default)([\"r\",\"g\",\"b\",\"a\",\"h\",\"s\",\"l\",\"v\"],(function(r){if(t[r]&&(e+=1,isNaN(t[r])||(n+=1),\"s\"===r||\"l\"===r)){/^\\d+%$/.test(t[r])&&(n+=1)}})),e===n&&t};var o=e.toState=function(t,e){var n=t.hex?(0,i.default)(t.hex):(0,i.default)(t),r=n.toHsl(),a=n.toHsv(),o=n.toRgb(),s=n.toHex();return 0===r.s&&(r.h=e||0,a.h=e||0),{hsl:r,hex:\"000000\"===s&&0===o.a?\"transparent\":\"#\"+s,rgb:o,hsv:a,oldHue:t.h||e||r.h,source:t.source}};e.isValidHex=function(t){var e=\"#\"===String(t).charAt(0)?1:0;return t.length!==4+e&&t.length<7+e&&(0,i.default)(t).isValid()},e.getContrastingColor=function(t){if(!t)return\"#fff\";var e=o(t);return\"transparent\"===e.hex?\"rgba(0,0,0,0.4)\":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=128?\"#000\":\"#fff\"},e.red={hsl:{a:1,h:0,l:.5,s:1},hex:\"#ff0000\",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}};e.default=e},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(112);e.default=new r.Dispatcher},function(t,e){t.exports=function(t){return null!=t&&\"object\"==typeof t}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(21),o=n(11),s=(r=o)&&r.__esModule?r:{default:r},u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(8));var l={Default:[[0,1],[.05,.75],[.37,.5],[.62,.5],[.95,.25],[1,0]],Linear:[[0,1],[.25,.75],[.5,.5],[.75,.25],[1,0]],Flat:[[0,1],[.25,1],[.5,1],[.75,1],[1,1]],Valley:[[0,1],[.25,.75],[.5,.5],[.75,.75],[1,1]]},c=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(var n in t.initColorIdx=5,t.presetColors=[\"#DC143C\",\"#FF6347\",\"#FFA500\",\"#FFFF00\",\"#00FF00\",\"#7FFFD4\",\"#00FFFF\",\"#00BFFF\",\"#1E90FF\",\"#7B68EE\",\"#9932CC\",\"#FF00FF\",\"#FF69B4\",\"#FFFFFF\",\"#FFF8DC\",\"#CD853F\"],t.cameraProp=[{xpos:0,ypos:0,zpos:50,fov:45,far:2e3,depth:0,aspect:1,zoom:1,type:\"Perspective\"}],t.texture=[],t.checked=[],t.focused=[],t.minmaxV=[],t.minmaxH=[],t.plotColor=[],t.gridSize=15,t.tubeNum=16,t.segment=16,t.division=5,t.visualQuery=!1,t.dragSelection=!0,t.activeId=-1,t.lock=[],t.opacityCurves={},l){for(var r=[],i=0;i<l[n].length;i++)r.push(new u.Vector2(l[n][i][0],l[n][i][1]));t.opacityCurves[n]=new u.SplineCurve(r)}return t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:\"handleActions\",value:function(t){switch(t.type){case\"UPLOAD_DATA\":this.uploadData();break;case\"UPDATE_CAMERA\":this.updateCamera(t.id,t.cameraProp);break;case\"SWITCH_CAMERA\":this.switchCamera(t.id);break;case\"RESET_CAMERA\":this.resetCamera(t.id);break;case\"SEARCH_TIME\":this.searchTime(t.id,t.dst);break;case\"UPDATE_CHECKED\":this.updateChecked(t.id);break;case\"SWITCH_GRID\":this.switchGridDisplay(t.id,t.state);break;case\"SWITCH_LABEL\":this.switchLabelDisplay(t.id,t.state);break;case\"SWITCH_AXIS\":this.switchAxisDisplay(t.id,t.state);break;case\"SWITCH_PLOT\":this.switchPlotDisplay(t.id,t.state);break;case\"CHANGE_BACKGROUND\":this.changeBackground(t.id,t.color);break;case\"CLIP_TUBE\":this.clipTube(t.id,t.state);break;case\"SWITCH_SHADE\":this.switchShade(t.id,t.state);break;case\"UPDATE_FOCUS\":this.updateFocus(t.id,t.zpos,t.flag);break;case\"CHANGE_FAR\":this.changeFar(t.id,t.value);break;case\"UPDATE_MINMAXH\":this.updateMinMaxH(t.id,t.min,t.max);break;case\"UPDATE_MINMAXV\":this.updateMinMaxV(t.id,t.min,t.max);break;case\"CHANGE_PLOTCOLOR\":this.changePlotColor(t.id,t.color);break;case\"UPDATE_TEXTURE\":this.updateTexture(t.id,t.texture);break;case\"ACTIVATE_VIEWPORT\":this.activateViewport(t.id);break;case\"TIME_FITTING\":this.timeFitting(t.dst);break;case\"LOCK_CONTROL\":this.lockControl(t.ids,t.state);break;case\"SYNCHRONIZE_TUBES\":this.synchronizeTubes(t.id,t.zpos,t.pos,t.deg);break;case\"ZOOM_OUT_TIMETUBE\":this.zoomOutTimeTubes(t.id);break;case\"RESET_ZOOM_TIMETUBES\":this.resetZoomTimeTubes(t.id);break;case\"ZOOM_IN_TIMETUBES\":this.zoomInTimeTubes(t.id);break;case\"UPDATE_OPACITY\":this.updateOpacity(t.id,t.opt)}}},{key:\"getCameraProp\",value:function(t){return this.cameraProp[t]}},{key:\"getChecked\",value:function(t){return this.checked[t]}},{key:\"getCheckedList\",value:function(){return this.checked}},{key:\"getFocused\",value:function(t){return this.focused[t]}},{key:\"getMinMaxH\",value:function(t){return this.minmaxH[t]}},{key:\"getMinMaxV\",value:function(t){return this.minmaxV[t]}},{key:\"getActiveId\",value:function(){return this.activeId}},{key:\"getPresetColors\",value:function(){return this.presetColors}},{key:\"getPresetColor\",value:function(t){return this.presetColors[t]}},{key:\"getPresetNum\",value:function(){return this.presetColors.length}},{key:\"getPlotColor\",value:function(t){return this.plotColor[t]}},{key:\"getInitColorIdx\",value:function(){return this.initColorIdx}},{key:\"getGridSize\",value:function(){return this.gridSize}},{key:\"getVisualQuery\",value:function(){return this.visualQuery}},{key:\"getTexture\",value:function(t){return this.texture[t]}},{key:\"getTubeNum\",value:function(){return this.tubeNum}},{key:\"getDivision\",value:function(){return this.division}},{key:\"getSegment\",value:function(){return this.segment}},{key:\"getLock\",value:function(t){return this.lock[t]}},{key:\"getOpacityDistSet\",value:function(){return l}},{key:\"getOpacityCurves\",value:function(){return this.opacityCurves}},{key:\"getOpacityCurve\",value:function(t){return this.opacityCurves[t]}},{key:\"setPlotColor\",value:function(t,e){this.plotColor[t]=e}},{key:\"setPlotColorbyIdx\",value:function(t,e){this.plotColor[t]=this.presetColors[e]}},{key:\"setLock\",value:function(t,e){this.lock[t]=e}},{key:\"uploadData\",value:function(){this.cameraProp.length;this.cameraProp.push({xpos:0,ypos:0,zpos:50,fov:45,depth:0,far:2e3,aspect:1,zoom:1,type:\"Perspective\"}),this.checked.push(!0),this.focused.push(0),this.minmaxV.push([0,0]),this.minmaxV.push([0,0]),this.lock.push(0),this.emit(\"upload\")}},{key:\"updateCamera\",value:function(t,e){for(var n in e)this.cameraProp[t][n]=e[n];this.emit(\"change\")}},{key:\"resetCamera\",value:function(t){this.cameraProp[t].xpos=0,this.cameraProp[t].ypos=0,this.cameraProp[t].zpos=50,this.emit(\"reset\")}},{key:\"switchCamera\",value:function(t){\"Perspective\"===this.cameraProp[t].type?this.cameraProp[t].type=\"Orthographic\":this.cameraProp[t].type=\"Perspective\",this.emit(\"switch\")}},{key:\"searchTime\",value:function(t,e){this.emit(\"searchTime\",t,e)}},{key:\"updateChecked\",value:function(t){this.checked[t]=!this.checked[t],this.emit(\"updateChecked\",t)}},{key:\"switchGridDisplay\",value:function(t,e){this.emit(\"switchGrid\",t,e)}},{key:\"switchLabelDisplay\",value:function(t,e){this.emit(\"switchLabel\",t,e)}},{key:\"switchAxisDisplay\",value:function(t,e){this.emit(\"switchAxis\",t,e)}},{key:\"switchPlotDisplay\",value:function(t,e){this.emit(\"switchPlot\",t,e)}},{key:\"changeBackground\",value:function(t,e){this.emit(\"changeBackground\",t,e)}},{key:\"clipTube\",value:function(t,e){this.emit(\"clipTube\",t,e)}},{key:\"switchShade\",value:function(t,e){this.emit(\"switchShade\",t,e)}},{key:\"updateFocus\",value:function(t,e,n){this.focused[t]=e,this.emit(\"updateFocus\",t,e,n)}},{key:\"changeFar\",value:function(t,e){this.cameraProp[t].far=e,this.emit(\"changeFar\",t)}},{key:\"updateMinMaxH\",value:function(t,e,n){this.minmaxH[t]=[e,n],this.emit(\"updateMinMaxH\",t)}},{key:\"updateMinMaxV\",value:function(t,e,n){this.minmaxV[t]=[e,n],this.emit(\"updateMinMaxV\",t)}},{key:\"changePlotColor\",value:function(t,e){this.plotColor[t]=e,this.emit(\"changePlotColor\",t)}},{key:\"updateTexture\",value:function(t,e){this.texture[t]=e,this.emit(\"updateTexture\",t)}},{key:\"activateViewport\",value:function(t){this.activeId=t}},{key:\"timeFitting\",value:function(t){this.emit(\"timeFitting\",t)}},{key:\"lockControl\",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.lock[t[n]]=this.getFocused(t[n]);else for(var r=0;r<this.lock.length;r++)this.lock[r]=0;this.emit(\"lockControl\",t,e)}},{key:\"synchronizeTubes\",value:function(t,e,n,r){this.emit(\"synchronizeTubes\",t,e,n,r)}},{key:\"zoomOutTimeTubes\",value:function(t){this.cameraProp[t].zoom>=.2&&(this.cameraProp[t].zoom-=.1,this.emit(\"updateZoomTimeTubes\",t))}},{key:\"resetZoomTimeTubes\",value:function(t){this.cameraProp[t].zoom=1,this.emit(\"updateZoomTimeTubes\",t)}},{key:\"zoomInTimeTubes\",value:function(t){this.cameraProp[t].zoom+=.1,this.emit(\"updateZoomTimeTubes\",t)}},{key:\"updateOpacity\",value:function(t,e){this.emit(\"updateOpacity\",t,e)}}]),e}(a.EventEmitter));s.default.register(c.handleActions.bind(c)),e.default=c},function(t,e,n){var r=n(69),i=n(133),a=n(191),o=n(5);t.exports=function(t,e){return(o(t)?r:a)(t,i(e,3))}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(21),a=u(n(11)),o=u(n(13)),s=u(n(3));function u(t){return t&&t.__esModule?t:{default:t}}var l=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.visualQuery=!1,t.mode=\"AE\",t.source=-1,t.target=[],t.selector=!0,t.dragSelection=!0,t.tubeAttributes=[],t.selectedPeriod=[-1,-1],t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"handleActions\",value:function(t){switch(t.type){case\"UPDATE_SOURCE\":this.updateSource(t.id);break;case\"UPDATE_TARGET\":this.updateTarget(t.ids);break;case\"SWITCH_SELECTOR\":this.switchSelector();break;case\"SWITCH_DRAGSELECTION\":this.switchDragSelection();break;case\"RESET_SELECTION\":this.resetSelection();break;case\"SELECT_TIMEINTERVAL\":this.selectTimeInterval(t.id,t.value);break;case\"SWITCH_QUERY_MODE\":this.switchQueryMode(t.mode);break;case\"UPLOAD_TUBE_ATTRIBUTES\":this.uploadTubeAttributes(t.id,t.position,t.color,t.indices);break;case\"UPDATE_SELECTED_PERIOD\":this.updateSelectedPeriod(t.period);break;case\"SELECT_PERIOD_FROM_SP\":this.selectPeriodfromSP(t.period);break;case\"SET_IGNORED_VARIALES\":this.setIgnoredVariables(t.varList)}}},{key:\"getVisualQuery\",value:function(){return this.visualQuery}},{key:\"getSource\",value:function(){return this.source}},{key:\"getTarget\",value:function(){return this.target}},{key:\"getSelector\",value:function(){return this.selector}},{key:\"getDragSelection\",value:function(){return this.dragSelection}},{key:\"getSelectedPeriod\",value:function(){return this.selectedPeriod}},{key:\"getMode\",value:function(){return this.mode}},{key:\"getTubeAttributes\",value:function(t){return this.tubeAttributes[t]}},{key:\"updateSource\",value:function(t){this.source=t,this.emit(\"updateSource\")}},{key:\"updateTarget\",value:function(t){this.target=t,this.emit(\"updateTarget\")}},{key:\"switchSelector\",value:function(){this.selector=!this.selector,this.emit(\"switchSelector\")}},{key:\"switchDragSelection\",value:function(){this.dragSelection=!this.dragSelection,this.emit(\"switchDragSelection\")}},{key:\"resetSelection\",value:function(){this.emit(\"resetSelection\")}},{key:\"selectTimeInterval\",value:function(t,e){var n=Number(e),r=o.default.getFocused(Number(t))+s.default.getData(Number(t)).data.meta.min.z;-1!==this.selectedPeriod[0]&&-1!==this.selectedPeriod[1]?this.selectedPeriod[0]<=r&&r<=this.selectedPeriod[1]?this.selectedPeriod[1]=Math.max(this.selectedPeriod[1],r+n):this.selectedPeriod[0]<=r+n&&r+n<=this.selectedPeriod[1]?this.selectedPeriod[0]=Math.min(this.selectedPeriod[0],r):r+n<this.selectedPeriod[0]?this.selectedPeriod[0]=r:this.selectedPeriod[1]<r?this.selectedPeriod[1]=r+n:r<this.selectedPeriod[0]&&this.selectedPeriod[1]<r+n&&(this.selectedPeriod=[r,r+n]):-1===this.selectedPeriod[0]&&-1===this.selectedPeriod[1]&&(this.selectedPeriod=[r,r+n]),this.emit(\"selectTimeInterval\",t,n)}},{key:\"switchQueryMode\",value:function(t){this.mode=t,this.emit(\"switchQueryMode\",t)}},{key:\"uploadTubeAttributes\",value:function(t,e,n,r){this.tubeAttributes[t]={position:e,color:n,indices:r},this.emit(\"uploadTubeAttributes\")}},{key:\"updateSelectedPeriod\",value:function(t){this.selectedPeriod=t,this.emit(\"updateSelectedPeriod\")}},{key:\"selectPeriodfromSP\",value:function(t){this.selectedPeriod=t,this.emit(\"updateSelectedPeriod\")}},{key:\"setIgnoredVariables\",value:function(t){this.emit(\"setIgnoredVariables\",t)}},{key:\"setTexture\",value:function(t){this.texture=t,this.emit(\"setTexture\")}}]),e}(i.EventEmitter));a.default.register(l.handleActions.bind(l)),e.default=l},function(t,e,n){var r=n(22),i=n(124),a=n(125),o=\"[object Null]\",s=\"[object Undefined]\",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:o:u&&u in Object(t)?i(t):a(t)}},function(t,e,n){var r=n(146),i=n(149);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){\"use strict\";n.r(e);var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return r(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};var a=i(r),o=a.right,s=a.left,u=o,l=function(t,e){null==e&&(e=c);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return a};function c(t,e){return[t,e]}var h=function(t,e,n){var r,i,a,o,s=t.length,u=e.length,l=new Array(s*u);for(null==n&&(n=c),r=a=0;r<s;++r)for(o=t[r],i=0;i<u;++i,++a)l[a]=n(o,e[i]);return l},f=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},d=function(t){return null===t?NaN:+t},p=function(t,e){var n,r,i=t.length,a=0,o=-1,s=0,u=0;if(null==e)for(;++o<i;)isNaN(n=d(t[o]))||(u+=(r=n-s)*(n-(s+=r/++a)));else for(;++o<i;)isNaN(n=d(e(t[o],o,t)))||(u+=(r=n-s)*(n-(s+=r/++a)));if(a>1)return u/(a-1)},m=function(t,e){var n=p(t,e);return n?Math.sqrt(n):n},g=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},v=Array.prototype,y=v.slice,b=v.map,_=function(t){return function(){return t}},x=function(t){return t},w=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a},S=Math.sqrt(50),E=Math.sqrt(10),M=Math.sqrt(2),T=function(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=C(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a};function C(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=S?10:a>=E?5:a>=M?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=S?10:a>=E?5:a>=M?2:1)}function P(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=S?i*=10:a>=E?i*=5:a>=M&&(i*=2),e<t?-i:i}var k=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},A=function(){var t=x,e=g,n=k;function r(r){var i,a,o=r.length,s=new Array(o);for(i=0;i<o;++i)s[i]=t(r[i],i,r);var l=e(s),c=l[0],h=l[1],f=n(s,c,h);Array.isArray(f)||(f=P(c,h,f),f=w(Math.ceil(c/f)*f,h,f));for(var d=f.length;f[0]<=c;)f.shift(),--d;for(;f[d-1]>h;)f.pop(),--d;var p,m=new Array(d+1);for(i=0;i<=d;++i)(p=m[i]=[]).x0=i>0?f[i-1]:c,p.x1=i<d?f[i]:h;for(i=0;i<o;++i)c<=(a=s[i])&&a<=h&&m[u(f,a,0,d)].push(r[i]);return m}return r.value=function(e){return arguments.length?(t=\"function\"==typeof e?e:_(e),r):t},r.domain=function(t){return arguments.length?(e=\"function\"==typeof t?t:_([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n=\"function\"==typeof t?t:Array.isArray(t)?_(y.call(t)):_(t),r):n},r},O=function(t,e,n){if(null==n&&(n=d),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}},L=function(t,e,n){return t=b.call(t,d).sort(r),Math.ceil((n-e)/(2*(O(t,.75)-O(t,.25))*Math.pow(t.length,-1/3)))},I=function(t,e,n){return Math.ceil((n-e)/(3.5*m(t)*Math.pow(t.length,-1/3)))},N=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r},R=function(t,e){var n,r=t.length,i=r,a=-1,o=0;if(null==e)for(;++a<r;)isNaN(n=d(t[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=d(e(t[a],a,t)))?--i:o+=n;if(i)return o/i},D=function(t,e){var n,i=t.length,a=-1,o=[];if(null==e)for(;++a<i;)isNaN(n=d(t[a]))||o.push(n);else for(;++a<i;)isNaN(n=d(e(t[a],a,t)))||o.push(n);return O(o.sort(r),.5)},z=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n},B=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r},F=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},j=function(t,e){if(n=t.length){var n,i,a=0,o=0,s=t[o];for(null==e&&(e=r);++a<n;)(e(i=t[a],s)<0||0!==e(s,s))&&(s=i,o=a);return 0===e(s,s)?o:void 0}},U=function(t,e,n){for(var r,i,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},V=function(t,e){var n,r=t.length,i=-1,a=0;if(null==e)for(;++i<r;)(n=+t[i])&&(a+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(a+=n);return a},H=function(t){if(!(i=t.length))return[];for(var e=-1,n=B(t,G),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r};function G(t){return t.length}var W=function(){return H(arguments)},q=Array.prototype.slice,X=function(t){return t},Y=1,Q=2,Z=3,$=4,J=1e-6;function K(t){return\"translate(\"+(t+.5)+\",0)\"}function tt(t){return\"translate(0,\"+(t+.5)+\")\"}function et(t){return function(e){return+t(e)}}function nt(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function rt(){return!this.__axis}function it(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,u=t===Y||t===$?-1:1,l=t===$||t===Q?\"x\":\"y\",c=t===Y||t===Z?K:tt;function h(h){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):X:i,p=Math.max(a,0)+s,m=e.range(),g=+m[0]+.5,v=+m[m.length-1]+.5,y=(e.bandwidth?nt:et)(e.copy()),b=h.selection?h.selection():h,_=b.selectAll(\".domain\").data([null]),x=b.selectAll(\".tick\").data(f,e).order(),w=x.exit(),S=x.enter().append(\"g\").attr(\"class\",\"tick\"),E=x.select(\"line\"),M=x.select(\"text\");_=_.merge(_.enter().insert(\"path\",\".tick\").attr(\"class\",\"domain\").attr(\"stroke\",\"currentColor\")),x=x.merge(S),E=E.merge(S.append(\"line\").attr(\"stroke\",\"currentColor\").attr(l+\"2\",u*a)),M=M.merge(S.append(\"text\").attr(\"fill\",\"currentColor\").attr(l,u*p).attr(\"dy\",t===Y?\"0em\":t===Z?\"0.71em\":\"0.32em\")),h!==b&&(_=_.transition(h),x=x.transition(h),E=E.transition(h),M=M.transition(h),w=w.transition(h).attr(\"opacity\",J).attr(\"transform\",(function(t){return isFinite(t=y(t))?c(t):this.getAttribute(\"transform\")})),S.attr(\"opacity\",J).attr(\"transform\",(function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:y(t))}))),w.remove(),_.attr(\"d\",t===$||t==Q?o?\"M\"+u*o+\",\"+g+\"H0.5V\"+v+\"H\"+u*o:\"M0.5,\"+g+\"V\"+v:o?\"M\"+g+\",\"+u*o+\"V0.5H\"+v+\"V\"+u*o:\"M\"+g+\",0.5H\"+v),x.attr(\"opacity\",1).attr(\"transform\",(function(t){return c(y(t))})),E.attr(l+\"2\",u*a),M.attr(l,u*p).text(d),b.filter(rt).attr(\"fill\",\"none\").attr(\"font-size\",10).attr(\"font-family\",\"sans-serif\").attr(\"text-anchor\",t===Q?\"start\":t===$?\"end\":\"middle\"),b.each((function(){this.__axis=y}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=q.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:q.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:q.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function at(t){return it(Y,t)}function ot(t){return it(Q,t)}function st(t){return it(Z,t)}function ut(t){return it($,t)}var lt={value:function(){}};function ct(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+\"\")||t in r)throw new Error(\"illegal type: \"+t);r[t]=[]}return new ht(r)}function ht(t){this._=t}function ft(t,e){return t.trim().split(/^|\\s+/).map((function(t){var n=\"\",r=t.indexOf(\".\");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);return{type:t,name:n}}))}function dt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function pt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=lt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}ht.prototype=ct.prototype={constructor:ht,on:function(t,e){var n,r=this._,i=ft(t+\"\",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&\"function\"!=typeof e)throw new Error(\"invalid callback: \"+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=pt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=pt(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=dt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ht(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var mt=ct,gt=\"http://www.w3.org/1999/xhtml\",vt={svg:\"http://www.w3.org/2000/svg\",xhtml:gt,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"},yt=function(t){var e=t+=\"\",n=e.indexOf(\":\");return n>=0&&\"xmlns\"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),vt.hasOwnProperty(e)?{space:vt[e],local:t}:t};function bt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===gt&&e.documentElement.namespaceURI===gt?e.createElement(t):e.createElementNS(n,t)}}function _t(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var xt=function(t){var e=yt(t);return(e.local?_t:bt)(e)};function wt(){}var St=function(t){return null==t?wt:function(){return this.querySelector(t)}};function Et(){return[]}var Mt=function(t){return null==t?Et:function(){return this.querySelectorAll(t)}},Tt=function(t){return function(){return this.matches(t)}},Ct=function(t){return new Array(t.length)};function Pt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Pt.prototype={constructor:Pt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var kt=\"$\";function At(t,e,n,r,i,a){for(var o,s=0,u=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new Pt(t,a[s]);for(;s<u;++s)(o=e[s])&&(i[s]=o)}function Ot(t,e,n,r,i,a,o){var s,u,l,c={},h=e.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=l=kt+o.call(u,u.__data__,s,e),l in c?i[s]=u:c[l]=u);for(s=0;s<f;++s)(u=c[l=kt+o.call(t,a[s],s,a)])?(r[s]=u,u.__data__=a[s],c[l]=null):n[s]=new Pt(t,a[s]);for(s=0;s<h;++s)(u=e[s])&&c[d[s]]===u&&(i[s]=u)}function Lt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function It(t){return function(){this.removeAttribute(t)}}function Nt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rt(t,e){return function(){this.setAttribute(t,e)}}function Dt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function zt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Bt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Ft=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function jt(t){return function(){this.style.removeProperty(t)}}function Ut(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Vt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ht(t,e){return t.style.getPropertyValue(e)||Ft(t).getComputedStyle(t,null).getPropertyValue(e)}function Gt(t){return function(){delete this[t]}}function Wt(t,e){return function(){this[t]=e}}function qt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Xt(t){return t.trim().split(/^|\\s+/)}function Yt(t){return t.classList||new Qt(t)}function Qt(t){this._node=t,this._names=Xt(t.getAttribute(\"class\")||\"\")}function Zt(t,e){for(var n=Yt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function $t(t,e){for(var n=Yt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Jt(t){return function(){Zt(this,t)}}function Kt(t){return function(){$t(this,t)}}function te(t,e){return function(){(e.apply(this,arguments)?Zt:$t)(this,t)}}Qt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(t){return this._names.indexOf(t)>=0}};function ee(){this.textContent=\"\"}function ne(t){return function(){this.textContent=t}}function re(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?\"\":e}}function ie(){this.innerHTML=\"\"}function ae(t){return function(){this.innerHTML=t}}function oe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?\"\":e}}function se(){this.nextSibling&&this.parentNode.appendChild(this)}function ue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function le(){return null}function ce(){var t=this.parentNode;t&&t.removeChild(this)}function he(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function fe(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var de={},pe=null;\"undefined\"!=typeof document&&(\"onmouseenter\"in document.documentElement||(de={mouseenter:\"mouseover\",mouseleave:\"mouseout\"}));function me(t,e,n){return t=ge(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function ge(t,e,n){return function(r){var i=pe;pe=r;try{t.call(this,this.__data__,e,n)}finally{pe=i}}}function ve(t){return t.trim().split(/^|\\s+/).map((function(t){var e=\"\",n=t.indexOf(\".\");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ye(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function be(t,e,n){var r=de.hasOwnProperty(t.type)?me:ge;return function(i,a,o){var s,u=this.__on,l=r(e,a,o);if(u)for(var c=0,h=u.length;c<h;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function _e(t,e,n,r){var i=pe;t.sourceEvent=pe,pe=t;try{return e.apply(n,r)}finally{pe=i}}function xe(t,e,n){var r=Ft(t),i=r.CustomEvent;\"function\"==typeof i?i=new i(e,n):(i=r.document.createEvent(\"Event\"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function we(t,e){return function(){return xe(this,t,e)}}function Se(t,e){return function(){return xe(this,t,e.apply(this,arguments))}}var Ee=[null];function Me(t,e){this._groups=t,this._parents=e}function Te(){return new Me([[document.documentElement]],Ee)}Me.prototype=Te.prototype={constructor:Me,select:function(t){\"function\"!=typeof t&&(t=St(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&(\"__data__\"in a&&(o.__data__=a.__data__),l[c]=o);return new Me(r,this._parents)},selectAll:function(t){\"function\"!=typeof t&&(t=Mt(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),i.push(o));return new Me(r,i)},filter:function(t){\"function\"!=typeof t&&(t=Tt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Me(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each((function(t){p[++c]=t})),p;var n,r=e?Ot:At,i=this._parents,a=this._groups;\"function\"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),l=new Array(o),c=0;c<o;++c){var h=i[c],f=a[c],d=f.length,p=t.call(h,h&&h.__data__,c,i),m=p.length,g=u[c]=new Array(m),v=s[c]=new Array(m);r(h,f,g,v,l[c]=new Array(d),p,e);for(var y,b,_=0,x=0;_<m;++_)if(y=g[_]){for(_>=x&&(x=_+1);!(b=v[x])&&++x<m;);y._next=b||null}}return(s=new Me(s,i))._enter=u,s._exit=l,s},enter:function(){return new Me(this._enter||this._groups.map(Ct),this._parents)},exit:function(){return new Me(this._exit||this._groups.map(Ct),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=\"function\"==typeof t?t(r):r.append(t+\"\"),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=e[s],c=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=e[s];return new Me(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Lt);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(e)}return new Me(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=yt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Nt:It:\"function\"==typeof e?n.local?Bt:zt:n.local?Dt:Rt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?jt:\"function\"==typeof e?Vt:Ut)(t,e,null==n?\"\":n)):Ht(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Gt:\"function\"==typeof e?qt:Wt)(t,e)):this.node()[t]},classed:function(t,e){var n=Xt(t+\"\");if(arguments.length<2){for(var r=Yt(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((\"function\"==typeof e?te:e?Jt:Kt)(n,e))},text:function(t){return arguments.length?this.each(null==t?ee:(\"function\"==typeof t?re:ne)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ie:(\"function\"==typeof t?oe:ae)(t)):this.node().innerHTML},raise:function(){return this.each(se)},lower:function(){return this.each(ue)},append:function(t){var e=\"function\"==typeof t?t:xt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n=\"function\"==typeof t?t:xt(t),r=null==e?le:\"function\"==typeof e?e:St(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ce)},clone:function(t){return this.select(t?fe:he)},datum:function(t){return arguments.length?this.property(\"__data__\",t):this.node().__data__},on:function(t,e,n){var r,i,a=ve(t+\"\"),o=a.length;if(!(arguments.length<2)){for(s=e?be:ye,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each((\"function\"==typeof e?Se:we)(t,e))}};var Ce=Te,Pe=function(t){return\"string\"==typeof t?new Me([[document.querySelector(t)]],[document.documentElement]):new Me([[t]],Ee)},ke=function(t){return Pe(xt(t).call(document.documentElement))},Ae=0;function Oe(){return new Le}function Le(){this._=\"@\"+(++Ae).toString(36)}Le.prototype=Oe.prototype={constructor:Le,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Ie=function(){for(var t,e=pe;t=e.sourceEvent;)e=t;return e},Ne=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},Re=function(t){var e=Ie();return e.changedTouches&&(e=e.changedTouches[0]),Ne(t,e)},De=function(t){return\"string\"==typeof t?new Me([document.querySelectorAll(t)],[document.documentElement]):new Me([null==t?[]:t],Ee)},ze=function(t,e,n){arguments.length<3&&(n=e,e=Ie().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return Ne(t,r);return null},Be=function(t,e){null==e&&(e=Ie().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Ne(t,e[n]);return i};function Fe(){pe.stopImmediatePropagation()}var je=function(){pe.preventDefault(),pe.stopImmediatePropagation()},Ue=function(t){var e=t.document.documentElement,n=Pe(t).on(\"dragstart.drag\",je,!0);\"onselectstart\"in e?n.on(\"selectstart.drag\",je,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect=\"none\")};function Ve(t,e){var n=t.document.documentElement,r=Pe(t).on(\"dragstart.drag\",null);e&&(r.on(\"click.drag\",je,!0),setTimeout((function(){r.on(\"click.drag\",null)}),0)),\"onselectstart\"in n?r.on(\"selectstart.drag\",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var He=function(t){return function(){return t}};function Ge(t,e,n,r,i,a,o,s,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=u,this._=l}function We(){return!pe.ctrlKey&&!pe.button}function qe(){return this.parentNode}function Xe(t){return null==t?{x:pe.x,y:pe.y}:t}function Ye(){return navigator.maxTouchPoints||\"ontouchstart\"in this}Ge.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Qe=function(){var t,e,n,r,i=We,a=qe,o=Xe,s=Ye,u={},l=mt(\"start\",\"drag\",\"end\"),c=0,h=0;function f(t){t.on(\"mousedown.drag\",d).filter(s).on(\"touchstart.drag\",g).on(\"touchmove.drag\",v).on(\"touchend.drag touchcancel.drag\",y).style(\"touch-action\",\"none\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}function d(){if(!r&&i.apply(this,arguments)){var o=b(\"mouse\",a.apply(this,arguments),Re,this,arguments);o&&(Pe(pe.view).on(\"mousemove.drag\",p,!0).on(\"mouseup.drag\",m,!0),Ue(pe.view),Fe(),n=!1,t=pe.clientX,e=pe.clientY,o(\"start\"))}}function p(){if(je(),!n){var r=pe.clientX-t,i=pe.clientY-e;n=r*r+i*i>h}u.mouse(\"drag\")}function m(){Pe(pe.view).on(\"mousemove.drag mouseup.drag\",null),Ve(pe.view,n),je(),u.mouse(\"end\")}function g(){if(i.apply(this,arguments)){var t,e,n=pe.changedTouches,r=a.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=b(n[t].identifier,r,ze,this,arguments))&&(Fe(),e(\"start\"))}}function v(){var t,e,n=pe.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(je(),e(\"drag\"))}function y(){var t,e,n=pe.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(Fe(),e(\"end\"))}function b(t,e,n,r,i){var a,s,h,d=n(e,t),p=l.copy();if(_e(new Ge(f,\"beforestart\",a,t,c,d[0],d[1],0,0,p),(function(){return null!=(pe.subject=a=o.apply(r,i))&&(s=a.x-d[0]||0,h=a.y-d[1]||0,!0)})))return function o(l){var m,g=d;switch(l){case\"start\":u[t]=o,m=c++;break;case\"end\":delete u[t],--c;case\"drag\":d=n(e,t),m=c}_e(new Ge(f,l,a,t,m,d[0]+s,d[1]+h,d[0]-g[0],d[1]-g[1],p),p.apply,p,[l,r,i])}}return f.filter=function(t){return arguments.length?(i=\"function\"==typeof t?t:He(!!t),f):i},f.container=function(t){return arguments.length?(a=\"function\"==typeof t?t:He(t),f):a},f.subject=function(t){return arguments.length?(o=\"function\"==typeof t?t:He(t),f):o},f.touchable=function(t){return arguments.length?(s=\"function\"==typeof t?t:He(!!t),f):s},f.on=function(){var t=l.on.apply(l,arguments);return t===l?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f},Ze=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function $e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Je(){}var Ke=\"\\\\s*([+-]?\\\\d+)\\\\s*\",tn=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",en=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",nn=/^#([0-9a-f]{3})$/,rn=/^#([0-9a-f]{6})$/,an=new RegExp(\"^rgb\\\\(\"+[Ke,Ke,Ke]+\"\\\\)$\"),on=new RegExp(\"^rgb\\\\(\"+[en,en,en]+\"\\\\)$\"),sn=new RegExp(\"^rgba\\\\(\"+[Ke,Ke,Ke,tn]+\"\\\\)$\"),un=new RegExp(\"^rgba\\\\(\"+[en,en,en,tn]+\"\\\\)$\"),ln=new RegExp(\"^hsl\\\\(\"+[tn,en,en]+\"\\\\)$\"),cn=new RegExp(\"^hsla\\\\(\"+[tn,en,en,tn]+\"\\\\)$\"),hn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fn(){return this.rgb().formatHex()}function dn(){return this.rgb().formatRgb()}function pn(t){var e;return t=(t+\"\").trim().toLowerCase(),(e=nn.exec(t))?new bn((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=rn.exec(t))?mn(parseInt(e[1],16)):(e=an.exec(t))?new bn(e[1],e[2],e[3],1):(e=on.exec(t))?new bn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=sn.exec(t))?gn(e[1],e[2],e[3],e[4]):(e=un.exec(t))?gn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ln.exec(t))?Sn(e[1],e[2]/100,e[3]/100,1):(e=cn.exec(t))?Sn(e[1],e[2]/100,e[3]/100,e[4]):hn.hasOwnProperty(t)?mn(hn[t]):\"transparent\"===t?new bn(NaN,NaN,NaN,0):null}function mn(t){return new bn(t>>16&255,t>>8&255,255&t,1)}function gn(t,e,n,r){return r<=0&&(t=e=n=NaN),new bn(t,e,n,r)}function vn(t){return t instanceof Je||(t=pn(t)),t?new bn((t=t.rgb()).r,t.g,t.b,t.opacity):new bn}function yn(t,e,n,r){return 1===arguments.length?vn(t):new bn(t,e,n,null==r?1:r)}function bn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function _n(){return\"#\"+wn(this.r)+wn(this.g)+wn(this.b)}function xn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?\")\":\", \"+t+\")\")}function wn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?\"0\":\"\")+t.toString(16)}function Sn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tn(t,e,n,r)}function En(t){if(t instanceof Tn)return new Tn(t.h,t.s,t.l,t.opacity);if(t instanceof Je||(t=pn(t)),!t)return new Tn;if(t instanceof Tn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Tn(o,s,u,t.opacity)}function Mn(t,e,n,r){return 1===arguments.length?En(t):new Tn(t,e,n,null==r?1:r)}function Tn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Cn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Ze(Je,pn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:fn,formatHex:fn,formatHsl:function(){return En(this).formatHsl()},formatRgb:dn,toString:dn}),Ze(bn,yn,$e(Je,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new bn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new bn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_n,formatHex:_n,formatRgb:xn,toString:xn})),Ze(Tn,Mn,$e(Je,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Tn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Tn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bn(Cn(t>=240?t-240:t+120,i,r),Cn(t,i,r),Cn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?\"hsl(\":\"hsla(\")+(this.h||0)+\", \"+100*(this.s||0)+\"%, \"+100*(this.l||0)+\"%\"+(1===t?\")\":\", \"+t+\")\")}}));var Pn=Math.PI/180,kn=180/Math.PI,An=.96422,On=1,Ln=.82521,In=4/29,Nn=6/29,Rn=3*Nn*Nn,Dn=Nn*Nn*Nn;function zn(t){if(t instanceof jn)return new jn(t.l,t.a,t.b,t.opacity);if(t instanceof Yn)return Qn(t);t instanceof bn||(t=vn(t));var e,n,r=Gn(t.r),i=Gn(t.g),a=Gn(t.b),o=Un((.2225045*r+.7168786*i+.0606169*a)/On);return r===i&&i===a?e=n=o:(e=Un((.4360747*r+.3850649*i+.1430804*a)/An),n=Un((.0139322*r+.0971045*i+.7141733*a)/Ln)),new jn(116*o-16,500*(e-o),200*(o-n),t.opacity)}function Bn(t,e){return new jn(t,0,0,null==e?1:e)}function Fn(t,e,n,r){return 1===arguments.length?zn(t):new jn(t,e,n,null==r?1:r)}function jn(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Un(t){return t>Dn?Math.pow(t,1/3):t/Rn+In}function Vn(t){return t>Nn?t*t*t:Rn*(t-In)}function Hn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Gn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Wn(t){if(t instanceof Yn)return new Yn(t.h,t.c,t.l,t.opacity);if(t instanceof jn||(t=zn(t)),0===t.a&&0===t.b)return new Yn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*kn;return new Yn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function qn(t,e,n,r){return 1===arguments.length?Wn(t):new Yn(n,e,t,null==r?1:r)}function Xn(t,e,n,r){return 1===arguments.length?Wn(t):new Yn(t,e,n,null==r?1:r)}function Yn(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Qn(t){if(isNaN(t.h))return new jn(t.l,0,0,t.opacity);var e=t.h*Pn;return new jn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ze(jn,Fn,$e(Je,{brighter:function(t){return new jn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new jn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new bn(Hn(3.1338561*(e=An*Vn(e))-1.6168667*(t=On*Vn(t))-.4906146*(n=Ln*Vn(n))),Hn(-.9787684*e+1.9161415*t+.033454*n),Hn(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ze(Yn,Xn,$e(Je,{brighter:function(t){return new Yn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Yn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Qn(this).rgb()}}));var Zn=-.29227,$n=-.90649,Jn=1.97294,Kn=Jn*$n,tr=1.78277*Jn,er=1.78277*Zn- -.14861*$n;function nr(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof rr)return new rr(t.h,t.s,t.l,t.opacity);t instanceof bn||(t=vn(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(er*r+Kn*e-tr*n)/(er+Kn-tr),a=r-i,o=(Jn*(n-i)-Zn*a)/$n,s=Math.sqrt(o*o+a*a)/(Jn*i*(1-i)),u=s?Math.atan2(o,a)*kn-120:NaN;return new rr(u<0?u+360:u,s,i,t.opacity)}(t):new rr(t,e,n,null==r?1:r)}function rr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ir(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}Ze(rr,nr,$e(Je,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new rr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new rr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Pn,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new bn(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Zn*r+$n*i)),255*(e+n*(Jn*r)),this.opacity)}}));var ar=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return ir((n-r/e)*e,o,i,a,s)}},or=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return ir((n-r/e)*e,i,a,o,s)}},sr=function(t){return function(){return t}};function ur(t,e){return function(n){return t+n*e}}function lr(t,e){var n=e-t;return n?ur(t,n>180||n<-180?n-360*Math.round(n/360):n):sr(isNaN(t)?e:t)}function cr(t){return 1==(t=+t)?hr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):sr(isNaN(e)?n:e)}}function hr(t,e){var n=e-t;return n?ur(t,n):sr(isNaN(t)?e:t)}var fr=function t(e){var n=cr(e);function r(t,e){var r=n((t=yn(t)).r,(e=yn(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=hr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+\"\"}}return r.gamma=t,r}(1);function dr(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=yn(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+\"\"}}}var pr=dr(ar),mr=dr(or),gr=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Cr(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}},vr=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},yr=function(t,e){return e-=t=+t,function(n){return t+e*n}},br=function(t,e){var n,r={},i={};for(n in null!==t&&\"object\"==typeof t||(t={}),null!==e&&\"object\"==typeof e||(e={}),e)n in t?r[n]=Cr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},_r=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,xr=new RegExp(_r.source,\"g\");var wr,Sr,Er,Mr,Tr=function(t,e){var n,r,i,a=_r.lastIndex=xr.lastIndex=0,o=-1,s=[],u=[];for(t+=\"\",e+=\"\";(n=_r.exec(t))&&(r=xr.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:yr(n,r)})),a=xr.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+\"\"}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join(\"\")})},Cr=function(t,e){var n,r=typeof e;return null==e||\"boolean\"===r?sr(e):(\"number\"===r?yr:\"string\"===r?(n=pn(e))?(e=n,fr):Tr:e instanceof pn?fr:e instanceof Date?vr:Array.isArray(e)?gr:\"function\"!=typeof e.valueOf&&\"function\"!=typeof e.toString||isNaN(e)?br:yr)(t,e)},Pr=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},kr=function(t,e){var n=lr(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Ar=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},Or=180/Math.PI,Lr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ir=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Or,skewX:Math.atan(u)*Or,scaleX:o,scaleY:s}};function Nr(t,e,n,r){function i(t){return t.length?t.pop()+\" \":\"\"}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push(\"translate(\",null,e,null,n);s.push({i:u-4,x:yr(t,i)},{i:u-2,x:yr(r,a)})}else(i||a)&&o.push(\"translate(\"+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+\"rotate(\",null,r)-2,x:yr(t,e)})):e&&n.push(i(n)+\"rotate(\"+e+r)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+\"skewX(\",null,r)-2,x:yr(t,e)}):e&&n.push(i(n)+\"skewX(\"+e+r)}(a.skewX,o.skewX,s,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+\"scale(\",null,\",\",null,\")\");o.push({i:s-4,x:yr(t,n)},{i:s-2,x:yr(e,r)})}else 1===n&&1===r||a.push(i(a)+\"scale(\"+n+\",\"+r+\")\")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join(\"\")}}}var Rr=Nr((function(t){return\"none\"===t?Lr:(wr||(wr=document.createElement(\"DIV\"),Sr=document.documentElement,Er=document.defaultView),wr.style.transform=t,t=Er.getComputedStyle(Sr.appendChild(wr),null).getPropertyValue(\"transform\"),Sr.removeChild(wr),t=t.slice(7,-1).split(\",\"),Ir(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),\"px, \",\"px)\",\"deg)\"),Dr=Nr((function(t){return null==t?Lr:(Mr||(Mr=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\")),Mr.setAttribute(\"transform\",t),(t=Mr.transform.baseVal.consolidate())?(t=t.matrix,Ir(t.a,t.b,t.c,t.d,t.e,t.f)):Lr)}),\", \",\")\",\")\"),zr=Math.SQRT2;function Br(t){return((t=Math.exp(t))+1/t)/2}var Fr=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],l=e[2],c=s-i,h=u-a,f=c*c+h*h;if(f<1e-12)r=Math.log(l/o)/zr,n=function(t){return[i+t*c,a+t*h,o*Math.exp(zr*t*r)]};else{var d=Math.sqrt(f),p=(l*l-o*o+4*f)/(2*o*2*d),m=(l*l-o*o-4*f)/(2*l*2*d),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/zr,n=function(t){var e,n=t*r,s=Br(g),u=o/(2*d)*(s*(e=zr*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*c,a+u*h,o*s/Br(zr*n+g)]}}return n.duration=1e3*r,n};function jr(t){return function(e,n){var r=t((e=Mn(e)).h,(n=Mn(n)).h),i=hr(e.s,n.s),a=hr(e.l,n.l),o=hr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+\"\"}}}var Ur=jr(lr),Vr=jr(hr);function Hr(t,e){var n=hr((t=Fn(t)).l,(e=Fn(e)).l),r=hr(t.a,e.a),i=hr(t.b,e.b),a=hr(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+\"\"}}function Gr(t){return function(e,n){var r=t((e=Xn(e)).h,(n=Xn(n)).h),i=hr(e.c,n.c),a=hr(e.l,n.l),o=hr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+\"\"}}}var Wr=Gr(lr),qr=Gr(hr);function Xr(t){return function e(n){function r(e,r){var i=t((e=nr(e)).h,(r=nr(r)).h),a=hr(e.s,r.s),o=hr(e.l,r.l),s=hr(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+\"\"}}return n=+n,r.gamma=e,r}(1)}var Yr=Xr(lr),Qr=Xr(hr);function Zr(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}var $r,Jr,Kr=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},ti=0,ei=0,ni=0,ri=1e3,ii=0,ai=0,oi=0,si=\"object\"==typeof performance&&performance.now?performance:Date,ui=\"object\"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function li(){return ai||(ui(ci),ai=si.now()+oi)}function ci(){ai=0}function hi(){this._call=this._time=this._next=null}function fi(t,e,n){var r=new hi;return r.restart(t,e,n),r}function di(){li(),++ti;for(var t,e=$r;e;)(t=ai-e._time)>=0&&e._call.call(null,t),e=e._next;--ti}function pi(){ai=(ii=si.now())+oi,ti=ei=0;try{di()}finally{ti=0,function(){var t,e,n=$r,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:$r=e);Jr=t,gi(r)}(),ai=0}}function mi(){var t=si.now(),e=t-ii;e>ri&&(oi-=e,ii=t)}function gi(t){ti||(ei&&(ei=clearTimeout(ei)),t-ai>24?(t<1/0&&(ei=setTimeout(pi,t-si.now()-oi)),ni&&(ni=clearInterval(ni))):(ni||(ii=si.now(),ni=setInterval(mi,ri)),ti=1,ui(pi)))}hi.prototype=fi.prototype={constructor:hi,restart:function(t,e,n){if(\"function\"!=typeof t)throw new TypeError(\"callback is not a function\");n=(null==n?li():+n)+(null==e?0:+e),this._next||Jr===this||(Jr?Jr._next=this:$r=this,Jr=this),this._call=t,this._time=n,gi()},stop:function(){this._call&&(this._call=null,this._time=1/0,gi())}};var vi=function(t,e,n){var r=new hi;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},yi=function(t,e,n){var r=new hi,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?li():+n,r.restart((function a(o){o+=i,r.restart(a,i+=e,n),t(o)}),e,n),r)},bi=mt(\"start\",\"end\",\"cancel\",\"interrupt\"),_i=[],xi=0,wi=1,Si=2,Ei=3,Mi=4,Ti=5,Ci=6,Pi=function(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(u){var l,c,h,f;if(n.state!==wi)return s();for(l in i)if((f=i[l]).name===n.name){if(f.state===Ei)return vi(a);f.state===Mi?(f.state=Ci,f.timer.stop(),f.on.call(\"interrupt\",t,t.__data__,f.index,f.group),delete i[l]):+l<e&&(f.state=Ci,f.timer.stop(),f.on.call(\"cancel\",t,t.__data__,f.index,f.group),delete i[l])}if(vi((function(){n.state===Ei&&(n.state=Mi,n.timer.restart(o,n.delay,n.time),o(u))})),n.state=Si,n.on.call(\"start\",t,t.__data__,n.index,n.group),n.state===Si){for(n.state=Ei,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=Ti,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);n.state===Ti&&(n.on.call(\"end\",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=Ci,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=fi((function(t){n.state=wi,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:bi,tween:_i,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:xi})};function ki(t,e){var n=Oi(t,e);if(n.state>xi)throw new Error(\"too late; already scheduled\");return n}function Ai(t,e){var n=Oi(t,e);if(n.state>Ei)throw new Error(\"too late; already running\");return n}function Oi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error(\"transition not found\");return n}var Li=function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+\"\",a)(n=a[i]).name===e?(r=n.state>Si&&n.state<Ti,n.state=Ci,n.timer.stop(),n.on.call(r?\"interrupt\":\"cancel\",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}};function Ii(t,e){var n,r;return function(){var i=Ai(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Ni(t,e,n){var r,i;if(\"function\"!=typeof n)throw new Error;return function(){var a=Ai(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function Ri(t,e,n){var r=t._id;return t.each((function(){var t=Ai(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Oi(t,r).value[e]}}var Di=function(t,e){var n;return(\"number\"==typeof e?yr:e instanceof pn?fr:(n=pn(e))?(e=n,fr):Tr)(t,e)};function zi(t){return function(){this.removeAttribute(t)}}function Bi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fi(t,e,n){var r,i,a=n+\"\";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function ji(t,e,n){var r,i,a=n+\"\";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Ui(t,e,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(s=u+\"\")?null:o===r&&s===i?a:(i=s,a=e(r=o,u));this.removeAttribute(t)}}function Vi(t,e,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(s=u+\"\")?null:o===r&&s===i?a:(i=s,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function Hi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}(t,i)),n}return i._value=e,i}function Gi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e(n))}}(t,i)),n}return i._value=e,i}function Wi(t,e){return function(){ki(this,t).delay=+e.apply(this,arguments)}}function qi(t,e){return e=+e,function(){ki(this,t).delay=e}}function Xi(t,e){return function(){Ai(this,t).duration=+e.apply(this,arguments)}}function Yi(t,e){return e=+e,function(){Ai(this,t).duration=e}}function Qi(t,e){if(\"function\"!=typeof e)throw new Error;return function(){Ai(this,t).ease=e}}function Zi(t,e,n){var r,i,a=function(t){return(t+\"\").trim().split(/^|\\s+/).every((function(t){var e=t.indexOf(\".\");return e>=0&&(t=t.slice(0,e)),!t||\"start\"===t}))}(e)?ki:Ai;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}var $i=Ce.prototype.constructor;function Ji(t){return function(){this.style.removeProperty(t)}}function Ki(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e(r),n)}}(t,a,n)),r}return a._value=e,a}var ta=0;function ea(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function na(t){return Ce().transition(t)}function ra(){return++ta}var ia=Ce.prototype;function aa(t){return+t}function oa(t){return t*t}function sa(t){return t*(2-t)}function ua(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function la(t){return t*t*t}function ca(t){return--t*t*t+1}function ha(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}ea.prototype=na.prototype={constructor:ea,select:function(t){var e=this._name,n=this._id;\"function\"!=typeof t&&(t=St(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,u,l=r[o],c=l.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&(\"__data__\"in s&&(u.__data__=s.__data__),h[f]=u,Pi(h[f],e,n,f,h,Oi(s,n)));return new ea(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;\"function\"!=typeof t&&(t=Mt(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=Oi(u,n),m=0,g=d.length;m<g;++m)(f=d[m])&&Pi(f,e,n,m,d,p);a.push(d),o.push(u)}return new ea(a,o,e,n)},filter:function(t){\"function\"!=typeof t&&(t=Tt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new ea(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=e[s],c=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=e[s];return new ea(o,this._parents,this._name,this._id)},selection:function(){return new $i(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ra(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=Oi(o,e);Pi(o,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ea(r,this._parents,t,n)},call:ia.call,nodes:ia.nodes,node:ia.node,size:ia.size,empty:ia.empty,each:ia.each,on:function(t,e){var n=this._id;return arguments.length<2?Oi(this.node(),n).on.on(t):this.each(Zi(n,t,e))},attr:function(t,e){var n=yt(t),r=\"transform\"===n?Dr:Di;return this.attrTween(t,\"function\"==typeof e?(n.local?Vi:Ui)(n,r,Ri(this,\"attr.\"+t,e)):null==e?(n.local?Bi:zi)(n):(n.local?ji:Fi)(n,r,e))},attrTween:function(t,e){var n=\"attr.\"+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if(\"function\"!=typeof e)throw new Error;var r=yt(t);return this.tween(n,(r.local?Hi:Gi)(r,e))},style:function(t,e,n){var r=\"transform\"==(t+=\"\")?Rr:Di;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Ht(this,t),o=(this.style.removeProperty(t),Ht(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on(\"end.style.\"+t,Ji(t)):\"function\"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=Ht(this,t),s=n(this),u=s+\"\";return null==s&&(this.style.removeProperty(t),u=s=Ht(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s))}}(t,r,Ri(this,\"style.\"+t,e))).each(function(t,e){var n,r,i,a,o=\"style.\"+e,s=\"end.\"+o;return function(){var u=Ai(this,t),l=u.on,c=null==u.value[o]?a||(a=Ji(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+\"\";return function(){var o=Ht(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on(\"end.style.\"+t,null)},styleTween:function(t,e,n){var r=\"style.\"+(t+=\"\");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if(\"function\"!=typeof e)throw new Error;return this.tween(r,Ki(t,e,null==n?\"\":n))},text:function(t){return this.tween(\"text\",\"function\"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?\"\":e}}(Ri(this,\"text\",t)):function(t){return function(){this.textContent=t}}(null==t?\"\":t+\"\"))},remove:function(){return this.on(\"end.remove\",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+=\"\",arguments.length<2){for(var r,i=Oi(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Ii:Ni)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each((\"function\"==typeof t?Wi:qi)(e,t)):Oi(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each((\"function\"==typeof t?Xi:Yi)(e,t)):Oi(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Qi(e,t)):Oi(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=Ai(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))}};var fa=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),da=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),pa=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),ma=Math.PI,ga=ma/2;function va(t){return 1-Math.cos(t*ga)}function ya(t){return Math.sin(t*ga)}function ba(t){return(1-Math.cos(ma*t))/2}function _a(t){return Math.pow(2,10*t-10)}function xa(t){return 1-Math.pow(2,-10*t)}function wa(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Sa(t){return 1-Math.sqrt(1-t*t)}function Ea(t){return Math.sqrt(1- --t*t)}function Ma(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Ta=4/11,Ca=6/11,Pa=8/11,ka=.75,Aa=9/11,Oa=10/11,La=.9375,Ia=21/22,Na=63/64,Ra=1/Ta/Ta;function Da(t){return 1-za(1-t)}function za(t){return(t=+t)<Ta?Ra*t*t:t<Pa?Ra*(t-=Ca)*t+ka:t<Oa?Ra*(t-=Aa)*t+La:Ra*(t-=Ia)*t+Na}function Ba(t){return((t*=2)<=1?1-za(1-t):za(t-1)+1)/2}var Fa=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),ja=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),Ua=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Va=2*Math.PI,Ha=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Va);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Va)},i.period=function(n){return t(e,n)},i}(1,.3),Ga=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Va);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Va)},i.period=function(n){return t(e,n)},i}(1,.3),Wa=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Va);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Va)},i.period=function(n){return t(e,n)},i}(1,.3),qa={time:null,delay:0,duration:250,ease:ha};function Xa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return qa.time=li(),qa;return n}Ce.prototype.interrupt=function(t){return this.each((function(){Li(this,t)}))},Ce.prototype.transition=function(t){var e,n;t instanceof ea?(e=t._id,t=t._name):(e=ra(),(n=qa).time=li(),t=null==t?null:t+\"\");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&Pi(o,t,e,l,s,n||Xa(o,e));return new ea(r,this._parents,t,e)};var Ya=[null],Qa=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+\"\",i)if((n=i[r]).state>wi&&n.name===e)return new ea([[t]],Ya,e,+r);return null},Za=function(t){return function(){return t}},$a=function(t,e,n){this.target=t,this.type=e,this.selection=n};function Ja(){pe.stopImmediatePropagation()}var Ka=function(){pe.preventDefault(),pe.stopImmediatePropagation()},to={name:\"drag\"},eo={name:\"space\"},no={name:\"handle\"},ro={name:\"center\"};function io(t){return[+t[0],+t[1]]}function ao(t){return[io(t[0]),io(t[1])]}var oo={name:\"x\",handles:[\"w\",\"e\"].map(mo),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},so={name:\"y\",handles:[\"n\",\"s\"].map(mo),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},uo={name:\"xy\",handles:[\"n\",\"w\",\"e\",\"s\",\"nw\",\"ne\",\"sw\",\"se\"].map(mo),input:function(t){return null==t?null:ao(t)},output:function(t){return t}},lo={overlay:\"crosshair\",selection:\"move\",n:\"ns-resize\",e:\"ew-resize\",s:\"ns-resize\",w:\"ew-resize\",nw:\"nwse-resize\",ne:\"nesw-resize\",se:\"nwse-resize\",sw:\"nesw-resize\"},co={e:\"w\",w:\"e\",nw:\"ne\",ne:\"nw\",se:\"sw\",sw:\"se\"},ho={n:\"s\",s:\"n\",nw:\"sw\",ne:\"se\",se:\"ne\",sw:\"nw\"},fo={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},po={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function mo(t){return{type:t}}function go(){return!pe.ctrlKey&&!pe.button}function vo(){var t=this.ownerSVGElement||this;return t.hasAttribute(\"viewBox\")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function yo(){return navigator.maxTouchPoints||\"ontouchstart\"in this}function bo(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function _o(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function xo(){return Eo(oo)}function wo(){return Eo(so)}var So=function(){return Eo(uo)};function Eo(t){var e,n=vo,r=go,i=yo,a=!0,o=mt(u,\"start\",\"brush\",\"end\"),s=6;function u(e){var n=e.property(\"__brush\",m).selectAll(\".overlay\").data([mo(\"overlay\")]);n.enter().append(\"rect\").attr(\"class\",\"overlay\").attr(\"pointer-events\",\"all\").attr(\"cursor\",lo.overlay).merge(n).each((function(){var t=bo(this).extent;Pe(this).attr(\"x\",t[0][0]).attr(\"y\",t[0][1]).attr(\"width\",t[1][0]-t[0][0]).attr(\"height\",t[1][1]-t[0][1])})),e.selectAll(\".selection\").data([mo(\"selection\")]).enter().append(\"rect\").attr(\"class\",\"selection\").attr(\"cursor\",lo.selection).attr(\"fill\",\"#777\").attr(\"fill-opacity\",.3).attr(\"stroke\",\"#fff\").attr(\"shape-rendering\",\"crispEdges\");var r=e.selectAll(\".handle\").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append(\"rect\").attr(\"class\",(function(t){return\"handle handle--\"+t.type})).attr(\"cursor\",(function(t){return lo[t.type]})),e.each(l).attr(\"fill\",\"none\").attr(\"pointer-events\",\"all\").on(\"mousedown.brush\",f).filter(i).on(\"touchstart.brush\",f).on(\"touchmove.brush\",d).on(\"touchend.brush touchcancel.brush\",p).style(\"touch-action\",\"none\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}function l(){var t=Pe(this),e=bo(this).selection;e?(t.selectAll(\".selection\").style(\"display\",null).attr(\"x\",e[0][0]).attr(\"y\",e[0][1]).attr(\"width\",e[1][0]-e[0][0]).attr(\"height\",e[1][1]-e[0][1]),t.selectAll(\".handle\").style(\"display\",null).attr(\"x\",(function(t){return\"e\"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr(\"y\",(function(t){return\"s\"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr(\"width\",(function(t){return\"n\"===t.type||\"s\"===t.type?e[1][0]-e[0][0]+s:s})).attr(\"height\",(function(t){return\"e\"===t.type||\"w\"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(\".selection,.handle\").style(\"display\",\"none\").attr(\"x\",null).attr(\"y\",null).attr(\"width\",null).attr(\"height\",null)}function c(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if((!e||pe.touches)&&r.apply(this,arguments)){var n,i,o,s,u,h,f,d,p,m,g,v,y=this,b=pe.target.__data__.type,_=\"selection\"===(a&&pe.metaKey?b=\"overlay\":b)?to:a&&pe.altKey?ro:no,x=t===so?null:fo[b],w=t===oo?null:po[b],S=bo(y),E=S.extent,M=S.selection,T=E[0][0],C=E[0][1],P=E[1][0],k=E[1][1],A=0,O=0,L=x&&w&&a&&pe.shiftKey,I=pe.touches?(v=pe.changedTouches[0].identifier,function(t){return ze(t,pe.touches,v)}):Re,N=I(y),R=N,D=c(y,arguments,!0).beforestart();\"overlay\"===b?(M&&(p=!0),S.selection=M=[[n=t===so?T:N[0],o=t===oo?C:N[1]],[u=t===so?P:n,f=t===oo?k:o]]):(n=M[0][0],o=M[0][1],u=M[1][0],f=M[1][1]),i=n,s=o,h=u,d=f;var z=Pe(y).attr(\"pointer-events\",\"none\"),B=z.selectAll(\".overlay\").attr(\"cursor\",lo[b]);if(pe.touches)D.moved=j,D.ended=V;else{var F=Pe(pe.view).on(\"mousemove.brush\",j,!0).on(\"mouseup.brush\",V,!0);a&&F.on(\"keydown.brush\",(function(){switch(pe.keyCode){case 16:L=x&&w;break;case 18:_===no&&(x&&(u=h-A*x,n=i+A*x),w&&(f=d-O*w,o=s+O*w),_=ro,U());break;case 32:_!==no&&_!==ro||(x<0?u=h-A:x>0&&(n=i-A),w<0?f=d-O:w>0&&(o=s-O),_=eo,B.attr(\"cursor\",lo.selection),U());break;default:return}Ka()}),!0).on(\"keyup.brush\",(function(){switch(pe.keyCode){case 16:L&&(m=g=L=!1,U());break;case 18:_===ro&&(x<0?u=h:x>0&&(n=i),w<0?f=d:w>0&&(o=s),_=no,U());break;case 32:_===eo&&(pe.altKey?(x&&(u=h-A*x,n=i+A*x),w&&(f=d-O*w,o=s+O*w),_=ro):(x<0?u=h:x>0&&(n=i),w<0?f=d:w>0&&(o=s),_=no),B.attr(\"cursor\",lo[b]),U());break;default:return}Ka()}),!0),Ue(pe.view)}Ja(),Li(y),l.call(y),D.start()}function j(){var t=I(y);!L||m||g||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?g=!0:m=!0),R=t,p=!0,Ka(),U()}function U(){var t;switch(A=R[0]-N[0],O=R[1]-N[1],_){case eo:case to:x&&(A=Math.max(T-n,Math.min(P-u,A)),i=n+A,h=u+A),w&&(O=Math.max(C-o,Math.min(k-f,O)),s=o+O,d=f+O);break;case no:x<0?(A=Math.max(T-n,Math.min(P-n,A)),i=n+A,h=u):x>0&&(A=Math.max(T-u,Math.min(P-u,A)),i=n,h=u+A),w<0?(O=Math.max(C-o,Math.min(k-o,O)),s=o+O,d=f):w>0&&(O=Math.max(C-f,Math.min(k-f,O)),s=o,d=f+O);break;case ro:x&&(i=Math.max(T,Math.min(P,n-A*x)),h=Math.max(T,Math.min(P,u+A*x))),w&&(s=Math.max(C,Math.min(k,o-O*w)),d=Math.max(C,Math.min(k,f+O*w)))}h<i&&(x*=-1,t=n,n=u,u=t,t=i,i=h,h=t,b in co&&B.attr(\"cursor\",lo[b=co[b]])),d<s&&(w*=-1,t=o,o=f,f=t,t=s,s=d,d=t,b in ho&&B.attr(\"cursor\",lo[b=ho[b]])),S.selection&&(M=S.selection),m&&(i=M[0][0],h=M[1][0]),g&&(s=M[0][1],d=M[1][1]),M[0][0]===i&&M[0][1]===s&&M[1][0]===h&&M[1][1]===d||(S.selection=[[i,s],[h,d]],l.call(y),D.brush())}function V(){if(Ja(),pe.touches){if(pe.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Ve(pe.view,p),F.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\",null);z.attr(\"pointer-events\",\"all\"),B.attr(\"cursor\",lo.overlay),S.selection&&(M=S.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(M)&&(S.selection=null,l.call(y)),D.end()}}function d(){c(this,arguments).moved()}function p(){c(this,arguments).ended()}function m(){var e=this.__brush||{selection:null};return e.extent=ao(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.selection?e.on(\"start.brush\",(function(){c(this,arguments).beforestart().start()})).on(\"interrupt.brush end.brush\",(function(){c(this,arguments).end()})).tween(\"brush\",(function(){var e=this,r=e.__brush,i=c(e,arguments),a=r.selection,o=t.input(\"function\"==typeof n?n.apply(this,arguments):n,r.extent),s=Cr(a,o);function u(t){r.selection=1===t&&null===o?null:s(t),l.call(e),i.brush()}return null!==a&&null!==o?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,a=t.input(\"function\"==typeof n?n.apply(e,r):n,i.extent),o=c(e,r).beforestart();Li(e),i.selection=null===a?null:a,l.call(e),o.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit(\"start\")):this.emit(\"brush\"),this},brush:function(){return this.emit(\"brush\"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit(\"end\")),this},emit:function(e){_e(new $a(u,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},u.extent=function(t){return arguments.length?(n=\"function\"==typeof t?t:Za(ao(t)),u):n},u.filter=function(t){return arguments.length?(r=\"function\"==typeof t?t:Za(!!t),u):r},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(a=!!t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var Mo=Math.cos,To=Math.sin,Co=Math.PI,Po=Co/2,ko=2*Co,Ao=Math.max;function Oo(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Lo=function(){var t=0,e=null,n=null,r=null;function i(i){var a,o,s,u,l,c,h=i.length,f=[],d=w(h),p=[],m=[],g=m.groups=new Array(h),v=new Array(h*h);for(a=0,l=-1;++l<h;){for(o=0,c=-1;++c<h;)o+=i[l][c];f.push(o),p.push(w(h)),a+=o}for(e&&d.sort((function(t,n){return e(f[t],f[n])})),n&&p.forEach((function(t,e){t.sort((function(t,r){return n(i[e][t],i[e][r])}))})),u=(a=Ao(0,ko-t*h)/a)?t:ko/h,o=0,l=-1;++l<h;){for(s=o,c=-1;++c<h;){var y=d[l],b=p[y][c],_=i[y][b],x=o,S=o+=_*a;v[b*h+y]={index:y,subindex:b,startAngle:x,endAngle:S,value:_}}g[y]={index:y,startAngle:s,endAngle:o,value:f[y]},o+=u}for(l=-1;++l<h;)for(c=l-1;++c<h;){var E=v[c*h+l],M=v[l*h+c];(E.value||M.value)&&m.push(E.value<M.value?{source:M,target:E}:{source:E,target:M})}return r?m.sort(r):m}return i.padAngle=function(e){return arguments.length?(t=Ao(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=Oo(t))._=t,i):r&&r._},i},Io=Array.prototype.slice,No=function(t){return function(){return t}},Ro=Math.PI,Do=2*Ro,zo=Do-1e-6;function Bo(){this._x0=this._y0=this._x1=this._y1=null,this._=\"\"}function Fo(){return new Bo}Bo.prototype=Fo.prototype={constructor:Bo,moveTo:function(t,e){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+=\"Z\")},lineTo:function(t,e){this._+=\"L\"+(this._x1=+t)+\",\"+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+=\"Q\"+ +t+\",\"+ +e+\",\"+(this._x1=+n)+\",\"+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+=\"C\"+ +t+\",\"+ +e+\",\"+ +n+\",\"+ +r+\",\"+(this._x1=+i)+\",\"+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,l=a-t,c=o-e,h=l*l+c*c;if(i<0)throw new Error(\"negative radius: \"+i);if(null===this._x1)this._+=\"M\"+(this._x1=t)+\",\"+(this._y1=e);else if(h>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var f=n-a,d=r-o,p=s*s+u*u,m=f*f+d*d,g=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((Ro-Math.acos((p+h-m)/(2*g*v)))/2),b=y/v,_=y/g;Math.abs(b-1)>1e-6&&(this._+=\"L\"+(t+b*l)+\",\"+(e+b*c)),this._+=\"A\"+i+\",\"+i+\",0,0,\"+ +(c*f>l*d)+\",\"+(this._x1=t+_*s)+\",\"+(this._y1=e+_*u)}else this._+=\"L\"+(this._x1=t)+\",\"+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+o,l=e+s,c=1^a,h=a?r-i:i-r;if(n<0)throw new Error(\"negative radius: \"+n);null===this._x1?this._+=\"M\"+u+\",\"+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+=\"L\"+u+\",\"+l),n&&(h<0&&(h=h%Do+Do),h>zo?this._+=\"A\"+n+\",\"+n+\",0,1,\"+c+\",\"+(t-o)+\",\"+(e-s)+\"A\"+n+\",\"+n+\",0,1,\"+c+\",\"+(this._x1=u)+\",\"+(this._y1=l):h>1e-6&&(this._+=\"A\"+n+\",\"+n+\",0,\"+ +(h>=Ro)+\",\"+c+\",\"+(this._x1=t+n*Math.cos(i))+\",\"+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+e)+\"h\"+ +n+\"v\"+ +r+\"h\"+-n+\"Z\"},toString:function(){return this._}};var jo=Fo;function Uo(t){return t.source}function Vo(t){return t.target}function Ho(t){return t.radius}function Go(t){return t.startAngle}function Wo(t){return t.endAngle}var qo=function(){var t=Uo,e=Vo,n=Ho,r=Go,i=Wo,a=null;function o(){var o,s=Io.call(arguments),u=t.apply(this,s),l=e.apply(this,s),c=+n.apply(this,(s[0]=u,s)),h=r.apply(this,s)-Po,f=i.apply(this,s)-Po,d=c*Mo(h),p=c*To(h),m=+n.apply(this,(s[0]=l,s)),g=r.apply(this,s)-Po,v=i.apply(this,s)-Po;if(a||(a=o=jo()),a.moveTo(d,p),a.arc(0,0,c,h,f),h===g&&f===v||(a.quadraticCurveTo(0,0,m*Mo(g),m*To(g)),a.arc(0,0,m,g,v)),a.quadraticCurveTo(0,0,d,p),a.closePath(),o)return a=null,o+\"\"||null}return o.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:No(+t),o):n},o.startAngle=function(t){return arguments.length?(r=\"function\"==typeof t?t:No(+t),o):r},o.endAngle=function(t){return arguments.length?(i=\"function\"==typeof t?t:No(+t),o):i},o.source=function(e){return arguments.length?(t=e,o):t},o.target=function(t){return arguments.length?(e=t,o):e},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o};function Xo(){}function Yo(t,e){var n=new Xo;if(t instanceof Xo)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}Xo.prototype=Yo.prototype={constructor:Xo,has:function(t){return\"$\"+t in this},get:function(t){return this[\"$\"+t]},set:function(t,e){return this[\"$\"+t]=e,this},remove:function(t){var e=\"$\"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)\"$\"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)\"$\"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)\"$\"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)\"$\"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)\"$\"===e[0]&&++t;return t},empty:function(){for(var t in this)if(\"$\"===t[0])return!1;return!0},each:function(t){for(var e in this)\"$\"===e[0]&&t(this[e],e.slice(1),this)}};var Qo=Yo,Zo=function(){var t,e,n,r=[],i=[];function a(n,i,o,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,l,c,h=-1,f=n.length,d=r[i++],p=Qo(),m=o();++h<f;)(c=p.get(u=d(l=n[h])+\"\"))?c.push(l):p.set(u,[l]);return p.each((function(t,e){s(m,e,a(t,i,o,s))})),m}return n={object:function(t){return a(t,0,$o,Jo)},map:function(t){return a(t,0,Ko,ts)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var o,s=i[a-1];return null!=e&&a>=r.length?o=n.entries():(o=[],n.each((function(e,n){o.push({key:n,values:t(e,a)})}))),null!=s?o.sort((function(t,e){return s(t.key,e.key)})):o}(a(t,0,Ko,ts),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function $o(){return{}}function Jo(t,e,n){t[e]=n}function Ko(){return Qo()}function ts(t,e,n){t.set(e,n)}function es(){}var ns=Qo.prototype;function rs(t,e){var n=new es;if(t instanceof es)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}es.prototype=rs.prototype={constructor:es,has:ns.has,add:function(t){return this[\"$\"+(t+=\"\")]=t,this},remove:ns.remove,clear:ns.clear,values:ns.keys,size:ns.size,empty:ns.empty,each:ns.each};var is=rs,as=function(t){var e=[];for(var n in t)e.push(n);return e},os=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ss=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},us=Array.prototype.slice,ls=function(t,e){return t-e},cs=function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r},hs=function(t){return function(){return t}},fs=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=ds(t,e[r]))return n;return 0};function ds(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],l=u[0],c=u[1],h=t[s],f=h[0],d=h[1];if(ps(u,h,e))return 0;c>r!=d>r&&n<(f-l)*(r-c)/(d-c)+l&&(i=-i)}return i}function ps(t,e,n){var r,i,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],a=n[r],o=e[r],i<=a&&a<=o||o<=a&&a<=i)}var ms=function(){},gs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],vs=function(){var t=1,e=1,n=k,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(ls);else{var r=g(t),i=r[0],o=r[1];e=P(i,o,e),e=w(Math.floor(i/e)*e,Math.floor(o/e)*e,e)}return e.map((function(e){return a(t,e)}))}function a(n,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,h,f=new Array,d=new Array;a=s=-1,l=n[0]>=r,gs[l<<1].forEach(p);for(;++a<t-1;)u=l,l=n[a+1]>=r,gs[u|l<<1].forEach(p);gs[l<<0].forEach(p);for(;++s<e-1;){for(a=-1,l=n[s*t+t]>=r,c=n[s*t]>=r,gs[l<<1|c<<2].forEach(p);++a<t-1;)u=l,l=n[s*t+t+a+1]>=r,h=c,c=n[s*t+a+1]>=r,gs[u|l<<1|c<<2|h<<3].forEach(p);gs[l|c<<3].forEach(p)}a=-1,c=n[s*t]>=r,gs[c<<2].forEach(p);for(;++a<t-1;)h=c,c=n[s*t+a+1]>=r,gs[c<<2|h<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],u=[t[1][0]+a,t[1][1]+s],l=o(r),c=o(u);(e=d[l])?(n=f[c])?(delete d[e.end],delete f[n.start],e===n?(e.ring.push(u),i(e.ring)):f[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=c]=e):(e=f[c])?(n=d[l])?(delete f[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):f[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(r),f[e.start=l]=e):f[l]=d[c]={start:l,end:c,ring:[r,u]}}gs[c<<3].forEach(p)}(n,i,(function(t){r(t,n,i),cs(t)>0?a.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=a.length;n<r;++n)if(-1!==fs((e=a[n])[0],t))return void e.push(t)})),{type:\"MultiPolygon\",value:i,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var a,o=n[0],s=n[1],u=0|o,l=0|s,c=r[l*t+u];o>0&&o<t&&u===o&&(a=r[l*t+u-1],n[0]=o+(i-a)/(c-a)-.5),s>0&&s<e&&l===s&&(a=r[(l-1)*t+u],n[1]=s+(i-a)/(c-a)-.5)}))}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(r>0&&a>0))throw new Error(\"invalid size\");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n=\"function\"==typeof t?t:Array.isArray(t)?hs(us.call(t)):hs(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:ms,i):r===s},i};function ys(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+o*r]),s>=n&&(s>=a&&(u-=t.data[s-a+o*r]),e.data[s-n+o*r]=u/Math.min(s+1,r-1+a-s,a))}function bs(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[o+s*r]),s>=n&&(s>=a&&(u-=t.data[o+(s-a)*r]),e.data[o+(s-n)*r]=u/Math.min(s+1,i-1+a-s,a))}function _s(t){return t[0]}function xs(t){return t[1]}function ws(){return 1}var Ss=function(){var t=_s,e=xs,n=ws,r=960,i=500,a=20,o=2,s=3*a,u=r+2*s>>o,l=i+2*s>>o,c=hs(20);function h(r){var i=new Float32Array(u*l),h=new Float32Array(u*l);r.forEach((function(r,a,c){var h=+t(r,a,c)+s>>o,f=+e(r,a,c)+s>>o,d=+n(r,a,c);h>=0&&h<u&&f>=0&&f<l&&(i[h+f*u]+=d)})),ys({width:u,height:l,data:i},{width:u,height:l,data:h},a>>o),bs({width:u,height:l,data:h},{width:u,height:l,data:i},a>>o),ys({width:u,height:l,data:i},{width:u,height:l,data:h},a>>o),bs({width:u,height:l,data:h},{width:u,height:l,data:i},a>>o),ys({width:u,height:l,data:i},{width:u,height:l,data:h},a>>o),bs({width:u,height:l,data:h},{width:u,height:l,data:i},a>>o);var d=c(i);if(!Array.isArray(d)){var p=N(i);d=P(0,p,d),(d=w(0,Math.floor(p/d)*d,d)).shift()}return vs().thresholds(d).size([u,l])(i).map(f)}function f(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function g(){return u=r+2*(s=3*a)>>o,l=i+2*s>>o,h}return h.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:hs(+e),h):t},h.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:hs(+t),h):e},h.weight=function(t){return arguments.length?(n=\"function\"==typeof t?t:hs(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error(\"invalid size\");return r=e,i=n,g()},h.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error(\"invalid cell size\");return o=Math.floor(Math.log(t)/Math.LN2),g()},h.thresholds=function(t){return arguments.length?(c=\"function\"==typeof t?t:Array.isArray(t)?hs(us.call(t)):hs(t),h):c},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error(\"invalid bandwidth\");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),g()},h},Es={},Ms={},Ts=34,Cs=10,Ps=13;function ks(t){return new Function(\"d\",\"return {\"+t.map((function(t,e){return JSON.stringify(t)+\": d[\"+e+\"]\"})).join(\",\")+\"}\")}function As(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Os(t,e){var n=t+\"\",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ls(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?\"Invalid Date\":((e=t.getUTCFullYear())<0?\"-\"+Os(-e,6):e>9999?\"+\"+Os(e,6):Os(e,4))+\"-\"+Os(t.getUTCMonth()+1,2)+\"-\"+Os(t.getUTCDate(),2)+(a?\"T\"+Os(n,2)+\":\"+Os(r,2)+\":\"+Os(i,2)+\".\"+Os(a,3)+\"Z\":i?\"T\"+Os(n,2)+\":\"+Os(r,2)+\":\"+Os(i,2)+\"Z\":r||n?\"T\"+Os(n,2)+\":\"+Os(r,2)+\"Z\":\"\")}var Is=function(t){var e=new RegExp('[\"'+t+\"\\n\\r]\"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,u=a<=0,l=!1;function c(){if(u)return Ms;if(l)return l=!1,Es;var e,r,i=o;if(t.charCodeAt(i)===Ts){for(;o++<a&&t.charCodeAt(o)!==Ts||t.charCodeAt(++o)===Ts;);return(e=o)>=a?u=!0:(r=t.charCodeAt(o++))===Cs?l=!0:r===Ps&&(l=!0,t.charCodeAt(o)===Cs&&++o),t.slice(i+1,e-1).replace(/\"\"/g,'\"')}for(;o<a;){if((r=t.charCodeAt(e=o++))===Cs)l=!0;else if(r===Ps)l=!0,t.charCodeAt(o)===Cs&&++o;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===Cs&&--a,t.charCodeAt(a-1)===Ps&&--a;(r=c())!==Ms;){for(var h=[];r!==Es&&r!==Ms;)h.push(r),r=c();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?\"\":t instanceof Date?Ls(t):e.test(t+=\"\")?'\"'+t.replace(/\"/g,'\"\"')+'\"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=ks(t);return function(r,i){return e(n(r),i,t)}}(t,e):ks(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=As(e)),[n.map(o).join(t)].concat(i(e,n)).join(\"\\n\")},formatBody:function(t,e){return null==e&&(e=As(t)),i(t,e).join(\"\\n\")},formatRows:function(t){return t.map(a).join(\"\\n\")}}},Ns=Is(\",\"),Rs=Ns.parse,Ds=Ns.parseRows,zs=Ns.format,Bs=Ns.formatBody,Fs=Ns.formatRows,js=Is(\"\\t\"),Us=js.parse,Vs=js.parseRows,Hs=js.format,Gs=js.formatBody,Ws=js.formatRows;function qs(t){for(var e in t){var n,r=t[e].trim();if(r)if(\"true\"===r)r=!0;else if(\"false\"===r)r=!1;else if(\"NaN\"===r)r=NaN;else if(isNaN(n=+r)){if(!/^([-+]\\d{2})?\\d{4}(-\\d{2}(-\\d{2})?)?(T\\d{2}:\\d{2}(:\\d{2}(\\.\\d{3})?)?(Z|[-+]\\d{2}:\\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=n;else r=null;t[e]=r}return t}function Xs(t){if(!t.ok)throw new Error(t.status+\" \"+t.statusText);return t.blob()}var Ys=function(t,e){return fetch(t,e).then(Xs)};function Qs(t){if(!t.ok)throw new Error(t.status+\" \"+t.statusText);return t.arrayBuffer()}var Zs=function(t,e){return fetch(t,e).then(Qs)};function $s(t){if(!t.ok)throw new Error(t.status+\" \"+t.statusText);return t.text()}var Js=function(t,e){return fetch(t,e).then($s)};function Ks(t){return function(e,n,r){return 2===arguments.length&&\"function\"==typeof n&&(r=n,n=void 0),Js(e,n).then((function(e){return t(e,r)}))}}function tu(t,e,n,r){3===arguments.length&&\"function\"==typeof n&&(r=n,n=void 0);var i=Is(t);return Js(e,n).then((function(t){return i.parse(t,r)}))}var eu=Ks(Rs),nu=Ks(Us),ru=function(t,e){return new Promise((function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t}))};function iu(t){if(!t.ok)throw new Error(t.status+\" \"+t.statusText);return t.json()}var au=function(t,e){return fetch(t,e).then(iu)};function ou(t){return function(e,n){return Js(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var su=ou(\"application/xml\"),uu=ou(\"text/html\"),lu=ou(\"image/svg+xml\"),cu=function(t,e){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-t,s=s/a-e,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},hu=function(t){return function(){return t}},fu=function(){return 1e-6*(Math.random()-.5)};function du(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,l,c,h,f,d=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(a=(m+v)/2))?m=a:v=a,(c=n>=(o=(g+y)/2))?g=o:y=o,i=d,!(d=d[h=c<<1|l]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(a=(m+v)/2))?m=a:v=a,(c=n>=(o=(g+y)/2))?g=o:y=o}while((h=c<<1|l)==(f=(u>=o)<<1|s>=a));return i[f]=d,i[h]=p,t}var pu=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function mu(t){return t[0]}function gu(t){return t[1]}function vu(t,e,n){var r=new yu(null==e?mu:e,null==n?gu:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function yu(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function bu(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var _u=vu.prototype=yu.prototype;function xu(t){return t.x+t.vx}function wu(t){return t.y+t.vy}_u.copy=function(){var t,e,n=new yu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=bu(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=bu(e));return n},_u.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return du(this.cover(e,n),e,n,t)},_u.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>h&&(h=i));if(u>c||l>h)return this;for(this.cover(u,l).cover(c,h),n=0;n<a;++n)du(this,o[n],s[n],t[n]);return this},_u.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,u=i-n,l=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},_u.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},_u.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},_u.find=function(t,e,n){var r,i,a,o,s,u,l,c=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new pu(m,c,h,f,d)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>f||(a=u.y0)>d||(o=u.x1)<c||(s=u.y1)<h))if(m.length){var g=(i+o)/2,v=(a+s)/2;p.push(new pu(m[3],g,v,o,s),new pu(m[2],i,v,g,s),new pu(m[1],g,a,o,v),new pu(m[0],i,a,g,v)),(l=(e>=v)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);c=t-x,h=e-x,f=t+x,d=e+x,r=m.data}}return r},_u.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,l,c,h,f,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((l=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(u=(m+v)/2))?m=u:v=u,e=d,!(d=d[h=c<<1|l]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},_u.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},_u.root=function(){return this._root},_u.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},_u.visit=function(t){var e,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new pu(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var l=(r+a)/2,c=(i+o)/2;(n=u[3])&&s.push(new pu(n,l,c,a,o)),(n=u[2])&&s.push(new pu(n,r,c,l,o)),(n=u[1])&&s.push(new pu(n,l,i,a,c)),(n=u[0])&&s.push(new pu(n,r,i,l,c))}return this},_u.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new pu(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(o+u)/2,h=(s+l)/2;(a=i[0])&&n.push(new pu(a,o,s,c,h)),(a=i[1])&&n.push(new pu(a,c,s,u,h)),(a=i[2])&&n.push(new pu(a,o,h,c,l)),(a=i[3])&&n.push(new pu(a,c,h,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},_u.x=function(t){return arguments.length?(this._x=t,this):this._x},_u.y=function(t){return arguments.length?(this._y=t,this):this._y};var Su=function(t){var e,n,r=1,i=1;function a(){for(var t,a,s,u,l,c,h,f=e.length,d=0;d<i;++d)for(a=vu(e,xu,wu).visitAfter(o),t=0;t<f;++t)s=e[t],c=n[s.index],h=c*c,u=s.x+s.vx,l=s.y+s.vy,a.visit(p);function p(t,e,n,i,a){var o=t.data,f=t.r,d=c+f;if(!o)return e>u+d||i<u-d||n>l+d||a<l-d;if(o.index>s.index){var p=u-o.x-o.vx,m=l-o.y-o.vy,g=p*p+m*m;g<d*d&&(0===p&&(g+=(p=fu())*p),0===m&&(g+=(m=fu())*m),g=(d-(g=Math.sqrt(g)))/g*r,s.vx+=(p*=g)*(d=(f*=f)/(h+f)),s.vy+=(m*=g)*d,o.vx-=p*(d=1-d),o.vy-=m*d)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return\"function\"!=typeof t&&(t=hu(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t=\"function\"==typeof e?e:hu(+e),s(),a):t},a};function Eu(t){return t.index}function Mu(t,e){var n=t.get(e);if(!n)throw new Error(\"missing: \"+e);return n}var Tu=function(t){var e,n,r,i,a,o=Eu,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=hu(30),l=1;function c(r){for(var i=0,o=t.length;i<l;++i)for(var s,u,c,h,f,d,p,m=0;m<o;++m)u=(s=t[m]).source,h=(c=s.target).x+c.vx-u.x-u.vx||fu(),f=c.y+c.vy-u.y-u.vy||fu(),h*=d=((d=Math.sqrt(h*h+f*f))-n[m])/d*r*e[m],f*=d,c.vx-=h*(p=a[m]),c.vy-=f*p,u.vx+=h*(p=1-p),u.vy+=f*p}function h(){if(r){var s,u,l=r.length,c=t.length,h=Qo(r,o);for(s=0,i=new Array(l);s<c;++s)(u=t[s]).index=s,\"object\"!=typeof u.source&&(u.source=Mu(h,u.source)),\"object\"!=typeof u.target&&(u.target=Mu(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)u=t[s],a[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),f(),n=new Array(c),d()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,h()},c.links=function(e){return arguments.length?(t=e,h(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(s=\"function\"==typeof t?t:hu(+t),f(),c):s},c.distance=function(t){return arguments.length?(u=\"function\"==typeof t?t:hu(+t),d(),c):u},c};function Cu(t){return t.x}function Pu(t){return t.y}var ku=10,Au=Math.PI*(3-Math.sqrt(5)),Ou=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=Qo(),u=fi(c),l=mt(\"tick\",\"end\");function c(){h(),l.call(\"tick\",e),n<r&&(u.stop(),l.call(\"end\",e))}function h(r){var u,l,c=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(a-n)*i,s.each((function(t){t(n)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=ku*Math.sqrt(n),a=n*Au;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=e-(s=t[l]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},Lu=function(){var t,e,n,r,i=hu(-30),a=1,o=1/0,s=.81;function u(r){var i,a=t.length,o=vu(t,Cu,Pu).visitAfter(c);for(n=r,i=0;i<a;++i)e=t[i],o.visit(h)}function l(){if(t){var e,n,a=t.length;for(r=new Array(a),e=0;e<a;++e)n=t[e],r[n.index]=+i(n,e,t)}}function c(t){var e,n,i,a,o,s=0,u=0;if(t.length){for(i=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,a+=n*e.y);t.x=i/u,t.y=a/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function h(t,i,u,l){if(!t.value)return!0;var c=t.x-e.x,h=t.y-e.y,f=l-i,d=c*c+h*h;if(f*f/s<d)return d<o&&(0===c&&(d+=(c=fu())*c),0===h&&(d+=(h=fu())*h),d<a&&(d=Math.sqrt(a*d)),e.vx+=c*t.value*n/d,e.vy+=h*t.value*n/d),!0;if(!(t.length||d>=o)){(t.data!==e||t.next)&&(0===c&&(d+=(c=fu())*c),0===h&&(d+=(h=fu())*h),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(f=r[t.data.index]*n/d,e.vx+=c*f,e.vy+=h*f)}while(t=t.next)}}return u.initialize=function(e){t=e,l()},u.strength=function(t){return arguments.length?(i=\"function\"==typeof t?t:hu(+t),l(),u):i},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},Iu=function(t,e,n){var r,i,a,o=hu(.1);function s(t){for(var o=0,s=r.length;o<s;++o){var u=r[o],l=u.x-e||1e-6,c=u.y-n||1e-6,h=Math.sqrt(l*l+c*c),f=(a[o]-h)*i[o]*t/h;u.vx+=l*f,u.vy+=c*f}}function u(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+o(r[e],e,r)}}return\"function\"!=typeof t&&(t=hu(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(o=\"function\"==typeof t?t:hu(+t),u(),s):o},s.radius=function(e){return arguments.length?(t=\"function\"==typeof e?e:hu(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},Nu=function(t){var e,n,r,i=hu(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return\"function\"!=typeof t&&(t=hu(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i=\"function\"==typeof t?t:hu(+t),o(),a):i},a.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:hu(+e),o(),a):t},a},Ru=function(t){var e,n,r,i=hu(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return\"function\"!=typeof t&&(t=hu(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i=\"function\"==typeof t?t:hu(+t),o(),a):i},a.y=function(e){return arguments.length?(t=\"function\"==typeof e?e:hu(+e),o(),a):t},a},Du=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf(\"e\"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},zu=function(t){return(t=Du(Math.abs(t)))?t[1]:NaN},Bu=/^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;function Fu(t){if(!(e=Bu.exec(t)))throw new Error(\"invalid format: \"+t);var e;return new ju({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ju(t){this.fill=void 0===t.fill?\" \":t.fill+\"\",this.align=void 0===t.align?\">\":t.align+\"\",this.sign=void 0===t.sign?\"-\":t.sign+\"\",this.symbol=void 0===t.symbol?\"\":t.symbol+\"\",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?\"\":t.type+\"\"}Fu.prototype=ju.prototype,ju.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(void 0===this.width?\"\":Math.max(1,0|this.width))+(this.comma?\",\":\"\")+(void 0===this.precision?\"\":\".\"+Math.max(0,0|this.precision))+(this.trim?\"~\":\"\")+this.type};var Uu,Vu,Hu,Gu,Wu=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case\".\":i=e=r;break;case\"0\":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},qu=function(t,e){var n=Du(t,e);if(!n)return t+\"\";var r=n[0],i=n[1];return i<0?\"0.\"+new Array(-i).join(\"0\")+r:r.length>i+1?r.slice(0,i+1)+\".\"+r.slice(i+1):r+new Array(i-r.length+2).join(\"0\")},Xu={\"%\":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+\"\"},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return qu(100*t,e)},r:qu,s:function(t,e){var n=Du(t,e);if(!n)return t+\"\";var r=n[0],i=n[1],a=i-(Uu=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join(\"0\"):a>0?r.slice(0,a)+\".\"+r.slice(a):\"0.\"+new Array(1-a).join(\"0\")+Du(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Yu=function(t){return t},Qu=Array.prototype.map,Zu=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"],$u=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Yu:(e=Qu.call(t.grouping,Number),n=t.thousands+\"\",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?\"\":t.currency[0]+\"\",a=void 0===t.currency?\"\":t.currency[1]+\"\",o=void 0===t.decimal?\".\":t.decimal+\"\",s=void 0===t.numerals?Yu:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Qu.call(t.numerals,String)),u=void 0===t.percent?\"%\":t.percent+\"\",l=void 0===t.minus?\"-\":t.minus+\"\",c=void 0===t.nan?\"NaN\":t.nan+\"\";function h(t){var e=(t=Fu(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;\"n\"===y?(m=!0,y=\"g\"):Xu[y]||(void 0===g&&(g=12),v=!0,y=\"g\"),(d||\"0\"===e&&\"=\"===n)&&(d=!0,e=\"0\",n=\"=\");var b=\"$\"===f?i:\"#\"===f&&/[boxX]/.test(y)?\"0\"+y.toLowerCase():\"\",_=\"$\"===f?a:/[%p]/.test(y)?u:\"\",x=Xu[y],w=/[defgprs%]/.test(y);function S(t){var i,a,u,f=b,S=_;if(\"c\"===y)S=x(t)+S,t=\"\";else{var E=(t=+t)<0;if(t=isNaN(t)?c:x(Math.abs(t),g),v&&(t=Wu(t)),E&&0==+t&&(E=!1),f=(E?\"(\"===h?h:l:\"-\"===h||\"(\"===h?\"\":h)+f,S=(\"s\"===y?Zu[8+Uu/3]:\"\")+S+(E&&\"(\"===h?\")\":\"\"),w)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){S=(46===u?o+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}m&&!d&&(t=r(t,1/0));var M=f.length+t.length+S.length,T=M<p?new Array(p-M+1).join(e):\"\";switch(m&&d&&(t=r(T+t,T.length?p-S.length:1/0),T=\"\"),n){case\"<\":t=f+t+S+T;break;case\"=\":t=f+T+t+S;break;case\"^\":t=T.slice(0,M=T.length>>1)+f+t+S+T.slice(M);break;default:t=T+f+t+S}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+\"\"},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=Fu(t)).type=\"f\",t)),r=3*Math.max(-8,Math.min(8,Math.floor(zu(e)/3))),i=Math.pow(10,-r),a=Zu[8+r/3];return function(t){return n(i*t)+a}}}};function Ju(t){return Vu=$u(t),Hu=Vu.format,Gu=Vu.formatPrefix,Vu}Ju({decimal:\".\",thousands:\",\",grouping:[3],currency:[\"$\",\"\"],minus:\"-\"});var Ku=function(t){return Math.max(0,-zu(Math.abs(t)))},tl=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(zu(e)/3)))-zu(Math.abs(t)))},el=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zu(e)-zu(t))+1},nl=function(){return new rl};function rl(){this.reset()}rl.prototype={constructor:rl,reset:function(){this.s=this.t=0},add:function(t){al(il,t,this.t),al(this,il.s,this.s),this.s?this.t+=il.t:this.s=il.t},valueOf:function(){return this.s}};var il=new rl;function al(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}var ol=1e-6,sl=1e-12,ul=Math.PI,ll=ul/2,cl=ul/4,hl=2*ul,fl=180/ul,dl=ul/180,pl=Math.abs,ml=Math.atan,gl=Math.atan2,vl=Math.cos,yl=Math.ceil,bl=Math.exp,_l=(Math.floor,Math.log),xl=Math.pow,wl=Math.sin,Sl=Math.sign||function(t){return t>0?1:t<0?-1:0},El=Math.sqrt,Ml=Math.tan;function Tl(t){return t>1?0:t<-1?ul:Math.acos(t)}function Cl(t){return t>1?ll:t<-1?-ll:Math.asin(t)}function Pl(t){return(t=wl(t/2))*t}function kl(){}function Al(t,e){t&&Ll.hasOwnProperty(t.type)&&Ll[t.type](t,e)}var Ol={Feature:function(t,e){Al(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Al(n[r].geometry,e)}},Ll={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Il(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Il(n[r],e,0)},Polygon:function(t,e){Nl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Nl(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Al(n[r],e)}};function Il(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Nl(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Il(t[n],e,1);e.polygonEnd()}var Rl,Dl,zl,Bl,Fl,jl=function(t,e){t&&Ol.hasOwnProperty(t.type)?Ol[t.type](t,e):Al(t,e)},Ul=nl(),Vl=nl(),Hl={point:kl,lineStart:kl,lineEnd:kl,polygonStart:function(){Ul.reset(),Hl.lineStart=Gl,Hl.lineEnd=Wl},polygonEnd:function(){var t=+Ul;Vl.add(t<0?hl+t:t),this.lineStart=this.lineEnd=this.point=kl},sphere:function(){Vl.add(hl)}};function Gl(){Hl.point=ql}function Wl(){Xl(Rl,Dl)}function ql(t,e){Hl.point=Xl,Rl=t,Dl=e,zl=t*=dl,Bl=vl(e=(e*=dl)/2+cl),Fl=wl(e)}function Xl(t,e){var n=(t*=dl)-zl,r=n>=0?1:-1,i=r*n,a=vl(e=(e*=dl)/2+cl),o=wl(e),s=Fl*o,u=Bl*a+s*vl(i),l=s*r*wl(i);Ul.add(gl(l,u)),zl=t,Bl=a,Fl=o}var Yl=function(t){return Vl.reset(),jl(t,Hl),2*Vl};function Ql(t){return[gl(t[1],t[0]),Cl(t[2])]}function Zl(t){var e=t[0],n=t[1],r=vl(n);return[r*vl(e),r*wl(e),wl(n)]}function $l(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Jl(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Kl(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function tc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ec(t){var e=El(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var nc,rc,ic,ac,oc,sc,uc,lc,cc,hc,fc=nl(),dc={point:pc,lineStart:gc,lineEnd:vc,polygonStart:function(){dc.point=yc,dc.lineStart=bc,dc.lineEnd=_c,fc.reset(),Hl.polygonStart()},polygonEnd:function(){Hl.polygonEnd(),dc.point=pc,dc.lineStart=gc,dc.lineEnd=vc,Ul<0?(nc=-(ic=180),rc=-(ac=90)):fc>ol?ac=90:fc<-ol&&(rc=-90),hc[0]=nc,hc[1]=ic},sphere:function(){nc=-(ic=180),rc=-(ac=90)}};function pc(t,e){cc.push(hc=[nc=t,ic=t]),e<rc&&(rc=e),e>ac&&(ac=e)}function mc(t,e){var n=Zl([t*dl,e*dl]);if(lc){var r=Jl(lc,n),i=Jl([r[1],-r[0],0],r);ec(i),i=Ql(i);var a,o=t-oc,s=o>0?1:-1,u=i[0]*fl*s,l=pl(o)>180;l^(s*oc<u&&u<s*t)?(a=i[1]*fl)>ac&&(ac=a):l^(s*oc<(u=(u+360)%360-180)&&u<s*t)?(a=-i[1]*fl)<rc&&(rc=a):(e<rc&&(rc=e),e>ac&&(ac=e)),l?t<oc?xc(nc,t)>xc(nc,ic)&&(ic=t):xc(t,ic)>xc(nc,ic)&&(nc=t):ic>=nc?(t<nc&&(nc=t),t>ic&&(ic=t)):t>oc?xc(nc,t)>xc(nc,ic)&&(ic=t):xc(t,ic)>xc(nc,ic)&&(nc=t)}else cc.push(hc=[nc=t,ic=t]);e<rc&&(rc=e),e>ac&&(ac=e),lc=n,oc=t}function gc(){dc.point=mc}function vc(){hc[0]=nc,hc[1]=ic,dc.point=pc,lc=null}function yc(t,e){if(lc){var n=t-oc;fc.add(pl(n)>180?n+(n>0?360:-360):n)}else sc=t,uc=e;Hl.point(t,e),mc(t,e)}function bc(){Hl.lineStart()}function _c(){yc(sc,uc),Hl.lineEnd(),pl(fc)>ol&&(nc=-(ic=180)),hc[0]=nc,hc[1]=ic,lc=null}function xc(t,e){return(e-=t)<0?e+360:e}function wc(t,e){return t[0]-e[0]}function Sc(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Ec,Mc,Tc,Cc,Pc,kc,Ac,Oc,Lc,Ic,Nc,Rc,Dc,zc,Bc,Fc,jc=function(t){var e,n,r,i,a,o,s;if(ac=ic=-(nc=rc=1/0),cc=[],jl(t,dc),n=cc.length){for(cc.sort(wc),e=1,a=[r=cc[0]];e<n;++e)Sc(r,(i=cc[e])[0])||Sc(r,i[1])?(xc(r[0],i[1])>xc(r[0],r[1])&&(r[1]=i[1]),xc(i[0],r[1])>xc(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(s=xc(r[1],i[0]))>o&&(o=s,nc=i[0],ic=r[1])}return cc=hc=null,nc===1/0||rc===1/0?[[NaN,NaN],[NaN,NaN]]:[[nc,rc],[ic,ac]]},Uc={sphere:kl,point:Vc,lineStart:Gc,lineEnd:Xc,polygonStart:function(){Uc.lineStart=Yc,Uc.lineEnd=Qc},polygonEnd:function(){Uc.lineStart=Gc,Uc.lineEnd=Xc}};function Vc(t,e){t*=dl;var n=vl(e*=dl);Hc(n*vl(t),n*wl(t),wl(e))}function Hc(t,e,n){Tc+=(t-Tc)/++Ec,Cc+=(e-Cc)/Ec,Pc+=(n-Pc)/Ec}function Gc(){Uc.point=Wc}function Wc(t,e){t*=dl;var n=vl(e*=dl);zc=n*vl(t),Bc=n*wl(t),Fc=wl(e),Uc.point=qc,Hc(zc,Bc,Fc)}function qc(t,e){t*=dl;var n=vl(e*=dl),r=n*vl(t),i=n*wl(t),a=wl(e),o=gl(El((o=Bc*a-Fc*i)*o+(o=Fc*r-zc*a)*o+(o=zc*i-Bc*r)*o),zc*r+Bc*i+Fc*a);Mc+=o,kc+=o*(zc+(zc=r)),Ac+=o*(Bc+(Bc=i)),Oc+=o*(Fc+(Fc=a)),Hc(zc,Bc,Fc)}function Xc(){Uc.point=Vc}function Yc(){Uc.point=Zc}function Qc(){$c(Rc,Dc),Uc.point=Vc}function Zc(t,e){Rc=t,Dc=e,t*=dl,e*=dl,Uc.point=$c;var n=vl(e);zc=n*vl(t),Bc=n*wl(t),Fc=wl(e),Hc(zc,Bc,Fc)}function $c(t,e){t*=dl;var n=vl(e*=dl),r=n*vl(t),i=n*wl(t),a=wl(e),o=Bc*a-Fc*i,s=Fc*r-zc*a,u=zc*i-Bc*r,l=El(o*o+s*s+u*u),c=Cl(l),h=l&&-c/l;Lc+=h*o,Ic+=h*s,Nc+=h*u,Mc+=c,kc+=c*(zc+(zc=r)),Ac+=c*(Bc+(Bc=i)),Oc+=c*(Fc+(Fc=a)),Hc(zc,Bc,Fc)}var Jc=function(t){Ec=Mc=Tc=Cc=Pc=kc=Ac=Oc=Lc=Ic=Nc=0,jl(t,Uc);var e=Lc,n=Ic,r=Nc,i=e*e+n*n+r*r;return i<sl&&(e=kc,n=Ac,r=Oc,Mc<ol&&(e=Tc,n=Cc,r=Pc),(i=e*e+n*n+r*r)<sl)?[NaN,NaN]:[gl(n,e)*fl,Cl(r/El(i))*fl]},Kc=function(t){return function(){return t}},th=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function eh(t,e){return[pl(t)>ul?t+Math.round(-t/hl)*hl:t,e]}function nh(t,e,n){return(t%=hl)?e||n?th(ih(t),ah(e,n)):ih(t):e||n?ah(e,n):eh}function rh(t){return function(e,n){return[(e+=t)>ul?e-hl:e<-ul?e+hl:e,n]}}function ih(t){var e=rh(t);return e.invert=rh(-t),e}function ah(t,e){var n=vl(t),r=wl(t),i=vl(e),a=wl(e);function o(t,e){var o=vl(e),s=vl(t)*o,u=wl(t)*o,l=wl(e),c=l*n+s*r;return[gl(u*i-c*a,s*n-l*r),Cl(c*i+u*a)]}return o.invert=function(t,e){var o=vl(e),s=vl(t)*o,u=wl(t)*o,l=wl(e),c=l*i-u*a;return[gl(u*i+l*a,s*n+c*r),Cl(c*n-s*r)]},o}eh.invert=eh;var oh=function(t){function e(e){return(e=t(e[0]*dl,e[1]*dl))[0]*=fl,e[1]*=fl,e}return t=nh(t[0]*dl,t[1]*dl,t.length>2?t[2]*dl:0),e.invert=function(e){return(e=t.invert(e[0]*dl,e[1]*dl))[0]*=fl,e[1]*=fl,e},e};function sh(t,e,n,r,i,a){if(n){var o=vl(e),s=wl(e),u=r*n;null==i?(i=e+r*hl,a=e-u/2):(i=uh(o,i),a=uh(o,a),(r>0?i<a:i>a)&&(i+=r*hl));for(var l,c=i;r>0?c>a:c<a;c-=u)l=Ql([o,-s*vl(c),-s*wl(c)]),t.point(l[0],l[1])}}function uh(t,e){(e=Zl(e))[0]-=t,ec(e);var n=Tl(-e[1]);return((-e[2]<0?-n:n)+hl-ol)%hl}var lh=function(){var t,e,n=Kc([0,0]),r=Kc(90),i=Kc(6),a={point:function(n,r){t.push(n=e(n,r)),n[0]*=fl,n[1]*=fl}};function o(){var o=n.apply(this,arguments),s=r.apply(this,arguments)*dl,u=i.apply(this,arguments)*dl;return t=[],e=nh(-o[0]*dl,-o[1]*dl,0).invert,sh(a,s,u,1),o={type:\"Polygon\",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n=\"function\"==typeof t?t:Kc([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(r=\"function\"==typeof t?t:Kc(+t),o):r},o.precision=function(t){return arguments.length?(i=\"function\"==typeof t?t:Kc(+t),o):i},o},ch=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:kl,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},hh=function(t,e){return pl(t[0]-e[0])<ol&&pl(t[1]-e[1])<ol};function fh(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var dh=function(t,e,n,r,i){var a,o,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(hh(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);i.lineEnd()}else s.push(n=new fh(r,t,null,!0)),u.push(n.o=new fh(r,null,n,!1)),s.push(n=new fh(o,t,null,!1)),u.push(n.o=new fh(o,null,n,!0))}})),s.length){for(u.sort(e),ph(s),ph(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(l=f.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}};function ph(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var mh=nl();function gh(t){return pl(t[0])<=ul?t[0]:Sl(t[0])*((pl(t[0])+ul)%hl-ul)}var vh=function(t,e){var n=gh(e),r=e[1],i=wl(r),a=[wl(n),-vl(n),0],o=0,s=0;mh.reset(),1===i?r=ll+ol:-1===i&&(r=-ll-ol);for(var u=0,l=t.length;u<l;++u)if(h=(c=t[u]).length)for(var c,h,f=c[h-1],d=gh(f),p=f[1]/2+cl,m=wl(p),g=vl(p),v=0;v<h;++v,d=b,m=x,g=w,f=y){var y=c[v],b=gh(y),_=y[1]/2+cl,x=wl(_),w=vl(_),S=b-d,E=S>=0?1:-1,M=E*S,T=M>ul,C=m*x;if(mh.add(gl(C*E*wl(M),g*w+C*vl(M))),o+=T?S+E*hl:S,T^d>=n^b>=n){var P=Jl(Zl(f),Zl(y));ec(P);var k=Jl(a,P);ec(k);var A=(T^S>=0?-1:1)*Cl(k[2]);(r>A||r===A&&(P[0]||P[1]))&&(s+=T^S>=0?1:-1)}}return(o<-ol||o<ol&&mh<-ol)^1&s},yh=function(t,e,n,r){return function(i){var a,o,s,u=e(i),l=ch(),c=e(l),h=!1,f={point:d,lineStart:m,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=b,o=[],a=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=g,o=z(o);var t=vh(a,r);o.length?(h||(i.polygonStart(),h=!0),dh(o,_h,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){f.point=p,u.lineStart()}function g(){f.point=d,u.lineEnd()}function v(t,e){s.push([t,e]),c.point(t,e)}function y(){c.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),f=l.result(),d=f.length;if(s.pop(),a.push(s),s=null,d)if(1&u){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&f.push(f.pop().concat(f.shift())),o.push(f.filter(bh))}return f}};function bh(t){return t.length>1}function _h(t,e){return((t=t.x)[0]<0?t[1]-ll-ol:ll-t[1])-((e=e.x)[0]<0?e[1]-ll-ol:ll-e[1])}var xh=yh((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?ul:-ul,u=pl(a-n);pl(u-ul)<ol?(t.point(n,r=(r+o)/2>0?ll:-ll),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=ul&&(pl(n-i)<ol&&(n-=i*ol),pl(a-s)<ol&&(a-=s*ol),r=function(t,e,n,r){var i,a,o=wl(t-n);return pl(o)>ol?ml((wl(e)*(a=vl(r))*wl(n)-wl(r)*(i=vl(e))*wl(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*ll,r.point(-ul,i),r.point(0,i),r.point(ul,i),r.point(ul,0),r.point(ul,-i),r.point(0,-i),r.point(-ul,-i),r.point(-ul,0),r.point(-ul,i);else if(pl(t[0]-e[0])>ol){var a=t[0]<e[0]?ul:-ul;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-ul,-ll]);var wh=function(t){var e=vl(t),n=6*dl,r=e>0,i=pl(e)>ol;function a(t,n){return vl(t)*vl(n)>e}function o(t,n,r){var i=[1,0,0],a=Jl(Zl(t),Zl(n)),o=$l(a,a),s=a[0],u=o-s*s;if(!u)return!r&&t;var l=e*o/u,c=-e*s/u,h=Jl(i,a),f=tc(i,l);Kl(f,tc(a,c));var d=h,p=$l(f,d),m=$l(d,d),g=p*p-m*($l(f,f)-1);if(!(g<0)){var v=El(g),y=tc(d,(-p-v)/m);if(Kl(y,f),y=Ql(y),!r)return y;var b,_=t[0],x=n[0],w=t[1],S=n[1];x<_&&(b=_,_=x,x=b);var E=x-_,M=pl(E-ul)<ol;if(!M&&S<w&&(b=w,w=S,S=b),M||E<ol?M?w+S>0^y[1]<(pl(y[0]-_)<ol?w:S):w<=y[1]&&y[1]<=S:E>ul^(_<=y[0]&&y[0]<=x)){var T=tc(d,(-p+v)/m);return Kl(T,f),[y,Ql(T)]}}}function s(e,n){var i=r?t:ul-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return yh(a,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var d,p=[h,f],m=a(h,f),g=r?m?0:s(h,f):m?s(h+(h<0?ul:-ul),f):0;if(!e&&(l=u=m)&&t.lineStart(),m!==u&&(!(d=o(e,p))||hh(e,d)||hh(p,d))&&(p[0]+=ol,p[1]+=ol,m=a(p[0],p[1])),m!==u)c=0,m?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^m){var v;g&n||!(v=o(p,e,!0))||(c=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&hh(e,p)||t.point(p[0],p[1]),e=p,u=m,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,a){sh(a,t,n,i,e,r)}),r?[0,-t]:[-ul,t-ul])},Sh=function(t,e,n,r,i,a){var o,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>l&&(l=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<c&&(c=o)}if(o=r-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}},Eh=1e9,Mh=-Eh;function Th(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,l){var c=0,h=0;if(null==i||(c=o(i,s))!==(h=o(a,s))||u(i,a)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(a[0],a[1])}function o(r,i){return pl(r[0]-t)<ol?i>0?0:3:pl(r[0]-n)<ol?i>0?2:1:pl(r[1]-e)<ol?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var u,l,c,h,f,d,p,m,g,v,y,b=o,_=ch(),x={point:w,lineStart:function(){x.point=S,l&&l.push(c=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(S(h,f),d&&g&&_.rejoin(),u.push(_.result()));x.point=w,g&&b.lineEnd()},polygonStart:function(){b=_,u=[],l=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var a,o,s=l[n],u=1,c=s.length,h=s[0],f=h[0],d=h[1];u<c;++u)a=f,o=d,h=s[u],f=h[0],d=h[1],o<=r?d>r&&(f-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(f-a)*(r-o)<(d-o)*(t-a)&&--e;return e}(),n=y&&e,i=(u=z(u)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&dh(u,s,e,a,o),o.polygonEnd());b=o,u=l=c=null}};function w(t,e){i(t,e)&&b.point(t,e)}function S(a,o){var s=i(a,o);if(l&&c.push([a,o]),v)h=a,f=o,d=s,v=!1,s&&(b.lineStart(),b.point(a,o));else if(s&&g)b.point(a,o);else{var u=[p=Math.max(Mh,Math.min(Eh,p)),m=Math.max(Mh,Math.min(Eh,m))],_=[a=Math.max(Mh,Math.min(Eh,a)),o=Math.max(Mh,Math.min(Eh,o))];Sh(u,_,t,e,n,r)?(g||(b.lineStart(),b.point(u[0],u[1])),b.point(_[0],_[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(a,o),y=!1)}p=a,m=o,g=s}return x}}var Ch,Ph,kh,Ah=function(){var t,e,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=Th(r,i,a,o)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[r,i],[a,o]]}}},Oh=nl(),Lh={sphere:kl,point:kl,lineStart:function(){Lh.point=Nh,Lh.lineEnd=Ih},lineEnd:kl,polygonStart:kl,polygonEnd:kl};function Ih(){Lh.point=Lh.lineEnd=kl}function Nh(t,e){Ch=t*=dl,Ph=wl(e*=dl),kh=vl(e),Lh.point=Rh}function Rh(t,e){t*=dl;var n=wl(e*=dl),r=vl(e),i=pl(t-Ch),a=vl(i),o=r*wl(i),s=kh*n-Ph*r*a,u=Ph*n+kh*r*a;Oh.add(gl(El(o*o+s*s),u)),Ch=t,Ph=n,kh=r}var Dh=function(t){return Oh.reset(),jl(t,Lh),+Oh},zh=[null,null],Bh={type:\"LineString\",coordinates:zh},Fh=function(t,e){return zh[0]=t,zh[1]=e,Dh(Bh)},jh={Feature:function(t,e){return Vh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Vh(n[r].geometry,e))return!0;return!1}},Uh={Sphere:function(){return!0},Point:function(t,e){return Hh(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Hh(n[r],e))return!0;return!1},LineString:function(t,e){return Gh(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Gh(n[r],e))return!0;return!1},Polygon:function(t,e){return Wh(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Wh(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Vh(n[r],e))return!0;return!1}};function Vh(t,e){return!(!t||!Uh.hasOwnProperty(t.type))&&Uh[t.type](t,e)}function Hh(t,e){return 0===Fh(t,e)}function Gh(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(0===(r=Fh(t[a],e)))return!0;if(a>0&&(i=Fh(t[a],t[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<sl*i)return!0;n=r}return!1}function Wh(t,e){return!!vh(t.map(qh),Xh(e))}function qh(t){return(t=t.map(Xh)).pop(),t}function Xh(t){return[t[0]*dl,t[1]*dl]}var Yh=function(t,e){return(t&&jh.hasOwnProperty(t.type)?jh[t.type]:Vh)(t,e)};function Qh(t,e,n){var r=w(t,e-ol,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Zh(t,e,n){var r=w(t,e-ol,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function $h(){var t,e,n,r,i,a,o,s,u,l,c,h,f=10,d=f,p=90,m=360,g=2.5;function v(){return{type:\"MultiLineString\",coordinates:y()}}function y(){return w(yl(r/p)*p,n,p).map(c).concat(w(yl(s/m)*m,o,m).map(h)).concat(w(yl(e/f)*f,t,f).filter((function(t){return pl(t%p)>ol})).map(u)).concat(w(yl(a/d)*d,i,d).filter((function(t){return pl(t%m)>ol})).map(l))}return v.lines=function(){return y().map((function(t){return{type:\"LineString\",coordinates:t}}))},v.outline=function(){return{type:\"Polygon\",coordinates:[c(r).concat(h(o).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),v.precision(g)):[[r,s],[n,o]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),v.precision(g)):[[e,a],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],v):[p,m]},v.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],v):[f,d]},v.precision=function(f){return arguments.length?(g=+f,u=Qh(a,i,90),l=Zh(e,t,g),c=Qh(s,o,90),h=Zh(r,n,g),v):g},v.extentMajor([[-180,-90+ol],[180,90-ol]]).extentMinor([[-180,-80-ol],[180,80+ol]])}function Jh(){return $h()()}var Kh,tf,ef,nf,rf=function(t,e){var n=t[0]*dl,r=t[1]*dl,i=e[0]*dl,a=e[1]*dl,o=vl(r),s=wl(r),u=vl(a),l=wl(a),c=o*vl(n),h=o*wl(n),f=u*vl(i),d=u*wl(i),p=2*Cl(El(Pl(a-r)+o*u*Pl(i-n))),m=wl(p),g=p?function(t){var e=wl(t*=p)/m,n=wl(p-t)/m,r=n*c+e*f,i=n*h+e*d,a=n*s+e*l;return[gl(i,r)*fl,gl(a,El(r*r+i*i))*fl]}:function(){return[n*fl,r*fl]};return g.distance=p,g},af=function(t){return t},of=nl(),sf=nl(),uf={point:kl,lineStart:kl,lineEnd:kl,polygonStart:function(){uf.lineStart=lf,uf.lineEnd=ff},polygonEnd:function(){uf.lineStart=uf.lineEnd=uf.point=kl,of.add(pl(sf)),sf.reset()},result:function(){var t=of/2;return of.reset(),t}};function lf(){uf.point=cf}function cf(t,e){uf.point=hf,Kh=ef=t,tf=nf=e}function hf(t,e){sf.add(nf*t-ef*e),ef=t,nf=e}function ff(){hf(Kh,tf)}var df=uf,pf=1/0,mf=pf,gf=-pf,vf=gf;var yf,bf,_f,xf,wf={point:function(t,e){t<pf&&(pf=t);t>gf&&(gf=t);e<mf&&(mf=e);e>vf&&(vf=e)},lineStart:kl,lineEnd:kl,polygonStart:kl,polygonEnd:kl,result:function(){var t=[[pf,mf],[gf,vf]];return gf=vf=-(mf=pf=1/0),t}},Sf=0,Ef=0,Mf=0,Tf=0,Cf=0,Pf=0,kf=0,Af=0,Of=0,Lf={point:If,lineStart:Nf,lineEnd:zf,polygonStart:function(){Lf.lineStart=Bf,Lf.lineEnd=Ff},polygonEnd:function(){Lf.point=If,Lf.lineStart=Nf,Lf.lineEnd=zf},result:function(){var t=Of?[kf/Of,Af/Of]:Pf?[Tf/Pf,Cf/Pf]:Mf?[Sf/Mf,Ef/Mf]:[NaN,NaN];return Sf=Ef=Mf=Tf=Cf=Pf=kf=Af=Of=0,t}};function If(t,e){Sf+=t,Ef+=e,++Mf}function Nf(){Lf.point=Rf}function Rf(t,e){Lf.point=Df,If(_f=t,xf=e)}function Df(t,e){var n=t-_f,r=e-xf,i=El(n*n+r*r);Tf+=i*(_f+t)/2,Cf+=i*(xf+e)/2,Pf+=i,If(_f=t,xf=e)}function zf(){Lf.point=If}function Bf(){Lf.point=jf}function Ff(){Uf(yf,bf)}function jf(t,e){Lf.point=Uf,If(yf=_f=t,bf=xf=e)}function Uf(t,e){var n=t-_f,r=e-xf,i=El(n*n+r*r);Tf+=i*(_f+t)/2,Cf+=i*(xf+e)/2,Pf+=i,kf+=(i=xf*t-_f*e)*(_f+t),Af+=i*(xf+e),Of+=3*i,If(_f=t,xf=e)}var Vf=Lf;function Hf(t){this._context=t}Hf.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,hl)}},result:kl};var Gf,Wf,qf,Xf,Yf,Qf=nl(),Zf={point:kl,lineStart:function(){Zf.point=$f},lineEnd:function(){Gf&&Jf(Wf,qf),Zf.point=kl},polygonStart:function(){Gf=!0},polygonEnd:function(){Gf=null},result:function(){var t=+Qf;return Qf.reset(),t}};function $f(t,e){Zf.point=Jf,Wf=Xf=t,qf=Yf=e}function Jf(t,e){Xf-=t,Yf-=e,Qf.add(El(Xf*Xf+Yf*Yf)),Xf=t,Yf=e}var Kf=Zf;function td(){this._string=[]}function ed(t){return\"m0,\"+t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+-2*t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+2*t+\"z\"}td.prototype={_radius:4.5,_circle:ed(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push(\"Z\"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push(\"M\",t,\",\",e),this._point=1;break;case 1:this._string.push(\"L\",t,\",\",e);break;default:null==this._circle&&(this._circle=ed(this._radius)),this._string.push(\"M\",t,\",\",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join(\"\");return this._string=[],t}return null}};var nd=function(t,e){var n,r,i=4.5;function a(t){return t&&(\"function\"==typeof i&&r.pointRadius(+i.apply(this,arguments)),jl(t,n(r))),r.result()}return a.area=function(t){return jl(t,n(df)),df.result()},a.measure=function(t){return jl(t,n(Kf)),Kf.result()},a.bounds=function(t){return jl(t,n(wf)),wf.result()},a.centroid=function(t){return jl(t,n(Vf)),Vf.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,af):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new td):new Hf(e=t),\"function\"!=typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i=\"function\"==typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)},rd=function(t){return{stream:id(t)}};function id(t){return function(e){var n=new ad;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ad(){}function od(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),jl(n,t.stream(wf)),e(wf.result()),null!=r&&t.clipExtent(r),t}function sd(t,e,n){return od(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function ud(t,e,n){return sd(t,[[0,0],e],n)}function ld(t,e,n){return od(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}function cd(t,e,n){return od(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}ad.prototype={constructor:ad,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var hd=16,fd=vl(30*dl),dd=function(t,e){return+e?function(t,e){function n(r,i,a,o,s,u,l,c,h,f,d,p,m,g){var v=l-r,y=c-i,b=v*v+y*y;if(b>4*e&&m--){var _=o+f,x=s+d,w=u+p,S=El(_*_+x*x+w*w),E=Cl(w/=S),M=pl(pl(w)-1)<ol||pl(a-h)<ol?(a+h)/2:gl(x,_),T=t(M,E),C=T[0],P=T[1],k=C-r,A=P-i,O=y*k-v*A;(O*O/b>e||pl((v*k+y*A)/b-.5)>.3||o*f+s*d+u*p<fd)&&(n(r,i,a,o,s,u,C,P,M,_/=S,x/=S,w,m,g),g.point(C,P),n(C,P,M,_,x,w,l,c,h,f,d,p,m,g))}}return function(e){var r,i,a,o,s,u,l,c,h,f,d,p,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){c=NaN,m.point=y,e.lineStart()}function y(r,i){var a=Zl([r,i]),o=t(r,i);n(c,h,l,f,d,p,c=o[0],h=o[1],l=r,f=a[0],d=a[1],p=a[2],hd,e),e.point(c,h)}function b(){m.point=g,e.lineEnd()}function _(){v(),m.point=x,m.lineEnd=w}function x(t,e){y(r=t,e),i=c,a=h,o=f,s=d,u=p,m.point=y}function w(){n(c,h,l,f,d,p,i,a,r,o,s,u,hd,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return id({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var pd=id({point:function(t,e){this.stream.point(t*dl,e*dl)}});function md(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r}function gd(t,e,n,r){var i=vl(r),a=wl(r),o=i*t,s=a*t,u=i/t,l=a/t,c=(a*n-i*e)/t,h=(a*e+i*n)/t;function f(t,r){return[o*t-s*r+e,n-s*t-o*r]}return f.invert=function(t,e){return[u*t-l*e+c,h-l*t-u*e]},f}function vd(t){return yd((function(){return t}))()}function yd(t){var e,n,r,i,a,o,s,u,l,c,h=150,f=480,d=250,p=0,m=0,g=0,v=0,y=0,b=0,_=null,x=xh,w=null,S=af,E=.5;function M(t){return u(t[0]*dl,t[1]*dl)}function T(t){return(t=u.invert(t[0],t[1]))&&[t[0]*fl,t[1]*fl]}function C(){var t=gd(h,0,0,b).apply(null,e(p,m)),r=(b?gd:md)(h,f-t[0],d-t[1],b);return n=nh(g,v,y),s=th(e,r),u=th(n,s),o=dd(s,E),P()}function P(){return l=c=null,M}return M.stream=function(t){return l&&c===t?l:l=pd(function(t){return id({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(x(o(S(c=t)))))},M.preclip=function(t){return arguments.length?(x=t,_=void 0,P()):x},M.postclip=function(t){return arguments.length?(S=t,w=r=i=a=null,P()):S},M.clipAngle=function(t){return arguments.length?(x=+t?wh(_=t*dl):(_=null,xh),P()):_*fl},M.clipExtent=function(t){return arguments.length?(S=null==t?(w=r=i=a=null,af):Th(w=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),P()):null==w?null:[[w,r],[i,a]]},M.scale=function(t){return arguments.length?(h=+t,C()):h},M.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],C()):[f,d]},M.center=function(t){return arguments.length?(p=t[0]%360*dl,m=t[1]%360*dl,C()):[p*fl,m*fl]},M.rotate=function(t){return arguments.length?(g=t[0]%360*dl,v=t[1]%360*dl,y=t.length>2?t[2]%360*dl:0,C()):[g*fl,v*fl,y*fl]},M.angle=function(t){return arguments.length?(b=t%360*dl,C()):b*fl},M.precision=function(t){return arguments.length?(o=dd(s,E=t*t),P()):El(E)},M.fitExtent=function(t,e){return sd(M,t,e)},M.fitSize=function(t,e){return ud(M,t,e)},M.fitWidth=function(t,e){return ld(M,t,e)},M.fitHeight=function(t,e){return cd(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&T,C()}}function bd(t){var e=0,n=ul/3,r=yd(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*dl,n=t[1]*dl):[e*fl,n*fl]},i}function _d(t,e){var n=wl(t),r=(n+wl(e))/2;if(pl(r)<ol)return function(t){var e=vl(t);function n(t,n){return[t*e,wl(n)/e]}return n.invert=function(t,n){return[t/e,Cl(n*e)]},n}(t);var i=1+n*(2*r-n),a=El(i)/r;function o(t,e){var n=El(i-2*r*wl(e))/r;return[n*wl(t*=r),a-n*vl(t)]}return o.invert=function(t,e){var n=a-e;return[gl(t,pl(n))/r*Sl(n),Cl((i-(t*t+n*n)*r*r)/(2*r))]},o}var xd=function(){return bd(_d).scale(155.424).center([0,33.6442])},wd=function(){return xd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var Sd=function(){var t,e,n,r,i,a,o=wd(),s=xd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=xd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function h(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[o.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),u.precision(t),h()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),u.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(l),r=s.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+ol,c+.12*e+ol],[a-.214*e-ol,c+.234*e-ol]]).stream(l),i=u.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+ol,c+.166*e+ol],[a-.115*e-ol,c+.234*e-ol]]).stream(l),h()},c.fitExtent=function(t,e){return sd(c,t,e)},c.fitSize=function(t,e){return ud(c,t,e)},c.fitWidth=function(t,e){return ld(c,t,e)},c.fitHeight=function(t,e){return cd(c,t,e)},c.scale(1070)};function Ed(t){return function(e,n){var r=vl(e),i=vl(n),a=t(r*i);return[a*i*wl(e),a*wl(n)]}}function Md(t){return function(e,n){var r=El(e*e+n*n),i=t(r),a=wl(i),o=vl(i);return[gl(e*a,r*o),Cl(r&&n*a/r)]}}var Td=Ed((function(t){return El(2/(1+t))}));Td.invert=Md((function(t){return 2*Cl(t/2)}));var Cd=function(){return vd(Td).scale(124.75).clipAngle(179.999)},Pd=Ed((function(t){return(t=Tl(t))&&t/wl(t)}));Pd.invert=Md((function(t){return t}));var kd=function(){return vd(Pd).scale(79.4188).clipAngle(179.999)};function Ad(t,e){return[t,_l(Ml((ll+e)/2))]}Ad.invert=function(t,e){return[t,2*ml(bl(e))-ll]};var Od=function(){return Ld(Ad).scale(961/hl)};function Ld(t){var e,n,r,i=vd(t),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var a=ul*o(),s=i(oh(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===Ad?[[Math.max(s[0]-a,l),e],[Math.min(s[0]+a,n),r]]:[[l,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),c()):o()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(a(t),c()):a()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function Id(t){return Ml((ll+t)/2)}function Nd(t,e){var n=vl(t),r=t===e?wl(t):_l(n/vl(e))/_l(Id(e)/Id(t)),i=n*xl(Id(t),r)/r;if(!r)return Ad;function a(t,e){i>0?e<-ll+ol&&(e=-ll+ol):e>ll-ol&&(e=ll-ol);var n=i/xl(Id(e),r);return[n*wl(r*t),i-n*vl(r*t)]}return a.invert=function(t,e){var n=i-e,a=Sl(r)*El(t*t+n*n);return[gl(t,pl(n))/r*Sl(n),2*ml(xl(i/a,1/r))-ll]},a}var Rd=function(){return bd(Nd).scale(109.5).parallels([30,30])};function Dd(t,e){return[t,e]}Dd.invert=Dd;var zd=function(){return vd(Dd).scale(152.63)};function Bd(t,e){var n=vl(t),r=t===e?wl(t):(n-vl(e))/(e-t),i=n/r+t;if(pl(r)<ol)return Dd;function a(t,e){var n=i-e,a=r*t;return[n*wl(a),i-n*vl(a)]}return a.invert=function(t,e){var n=i-e;return[gl(t,pl(n))/r*Sl(n),i-Sl(r)*El(t*t+n*n)]},a}var Fd=function(){return bd(Bd).scale(131.154).center([0,13.9389])},jd=1.340264,Ud=-.081106,Vd=893e-6,Hd=.003796,Gd=El(3)/2;function Wd(t,e){var n=Cl(Gd*wl(e)),r=n*n,i=r*r*r;return[t*vl(n)/(Gd*(jd+3*Ud*r+i*(7*Vd+9*Hd*r))),n*(jd+Ud*r+i*(Vd+Hd*r))]}Wd.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(jd+Ud*i+a*(Vd+Hd*i))-e)/(jd+3*Ud*i+a*(7*Vd+9*Hd*i)))*r)*i*i,!(pl(n)<sl));++o);return[Gd*t*(jd+3*Ud*i+a*(7*Vd+9*Hd*i))/vl(r),Cl(wl(r)/Gd)]};var qd=function(){return vd(Wd).scale(177.158)};function Xd(t,e){var n=vl(e),r=vl(t)*n;return[n*wl(t)/r,wl(e)/r]}Xd.invert=Md(ml);var Yd=function(){return vd(Xd).scale(144.049).clipAngle(60)};function Qd(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?af:id({point:function(i,a){this.stream.point(i*t+n,a*e+r)}})}var Zd=function(){var t,e,n,r,i,a,o=1,s=0,u=0,l=1,c=1,h=af,f=null,d=af;function p(){return r=i=null,a}return a={stream:function(t){return r&&i===t?r:r=h(d(i=t))},postclip:function(r){return arguments.length?(d=r,f=t=e=n=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(f=t=e=n=null,af):Th(f=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==f?null:[[f,t],[e,n]]},scale:function(t){return arguments.length?(h=Qd((o=+t)*l,o*c,s,u),p()):o},translate:function(t){return arguments.length?(h=Qd(o*l,o*c,s=+t[0],u=+t[1]),p()):[s,u]},reflectX:function(t){return arguments.length?(h=Qd(o*(l=t?-1:1),o*c,s,u),p()):l<0},reflectY:function(t){return arguments.length?(h=Qd(o*l,o*(c=t?-1:1),s,u),p()):c<0},fitExtent:function(t,e){return sd(a,t,e)},fitSize:function(t,e){return ud(a,t,e)},fitWidth:function(t,e){return ld(a,t,e)},fitHeight:function(t,e){return cd(a,t,e)}}};function $d(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}$d.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(pl(n)>ol&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};var Jd=function(){return vd($d).scale(175.295)};function Kd(t,e){return[vl(e)*wl(t),wl(e)]}Kd.invert=Md(Cl);var tp=function(){return vd(Kd).scale(249.5).clipAngle(90+ol)};function ep(t,e){var n=vl(e),r=1+vl(t)*n;return[n*wl(t)/r,wl(e)/r]}ep.invert=Md((function(t){return 2*ml(t)}));var np=function(){return vd(ep).scale(250).clipAngle(142)};function rp(t,e){return[_l(Ml((ll+e)/2)),-t]}rp.invert=function(t,e){return[-e,2*ml(bl(t))-ll]};var ip=function(){var t=Ld(rp),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function ap(t,e){return t.parent===e.parent?1:2}function op(t,e){return t+e.x}function sp(t,e){return Math.max(t,e.y)}var up=function(){var t=ap,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(op,0)/t.length}(n),e.y=function(t){return 1+t.reduce(sp,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=s.x-t(s,u)/2,c=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function lp(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function cp(t,e){var n,r,i,a,o,s=new pp(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=hp);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)l.push(r=n.children[a]=new pp(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(dp)}function hp(t){return t.children}function fp(t){t.data=t.data.data}function dp(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function pp(t){this.data=t,this.depth=this.height=0,this.parent=null}pp.prototype=cp.prototype={constructor:pp,count:function(){return this.eachAfter(lp)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return cp(this).eachBefore(fp)}};var mp=Array.prototype.slice;var gp=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(mp.call(t))).length,a=[];r<i;)e=t[r],n&&bp(n,e)?++r:(n=xp(a=vp(a,e)),r=0);return n};function vp(t,e){var n,r;if(_p(e,t))return[e];for(n=0;n<t.length;++n)if(yp(e,t[n])&&_p(wp(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(yp(wp(t[n],t[r]),e)&&yp(wp(t[n],e),t[r])&&yp(wp(t[r],e),t[n])&&_p(Sp(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function yp(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function bp(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function _p(t,e){for(var n=0;n<e.length;++n)if(!bp(t,e[n]))return!1;return!0}function xp(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return wp(t[0],t[1]);case 3:return Sp(t[0],t[1],t[2])}var e}function wp(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,l=o-r,c=s-i,h=Math.sqrt(u*u+l*l);return{x:(n+a+u/h*c)/2,y:(r+o+l/h*c)/2,r:(h+i+s)/2}}function Sp(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,l=n.x,c=n.y,h=n.r,f=r-o,d=r-l,p=i-s,m=i-c,g=u-a,v=h-a,y=r*r+i*i-a*a,b=y-o*o-s*s+u*u,_=y-l*l-c*c+h*h,x=d*p-f*m,w=(p*_-m*b)/(2*x)-r,S=(m*g-p*v)/x,E=(d*b-f*_)/(2*x)-i,M=(f*v-d*g)/x,T=S*S+M*M-1,C=2*(a+w*S+E*M),P=w*w+E*E-a*a,k=-(T?(C+Math.sqrt(C*C-4*T*P))/(2*T):P/C);return{x:r+w+S*k,y:i+E+M*k,r:k}}function Ep(t,e,n){var r,i,a,o,s=t.x-e.x,u=t.y-e.y,l=s*s+u*u;l?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),n.x=t.x-r*s-a*u,n.y=t.y-r*u+a*s):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*s-a*u,n.y=e.y+r*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Mp(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Tp(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Cp(t){this._=t,this.next=null,this.previous=null}function Pp(t){if(!(i=t.length))return 0;var e,n,r,i,a,o,s,u,l,c,h;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Ep(n,e,r=t[2]),e=new Cp(e),n=new Cp(n),r=new Cp(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Ep(e._,n._,r=t[s]),r=new Cp(r),u=n.next,l=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(Mp(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}c+=u._.r,u=u.next}else{if(Mp(l._,r._)){(e=l).next=n,n.previous=e,--s;continue t}h+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=Tp(e);(r=r.next)!==n;)(o=Tp(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=gp(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}var kp=function(t){return Pp(t),t};function Ap(t){return null==t?null:Op(t)}function Op(t){if(\"function\"!=typeof t)throw new Error;return t}function Lp(){return 0}var Ip=function(t){return function(){return t}};function Np(t){return Math.sqrt(t.value)}var Rp=function(){var t=null,e=1,n=1,r=Lp;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Dp(t)).eachAfter(zp(r,.5)).eachBefore(Bp(1)):i.eachBefore(Dp(Np)).eachAfter(zp(Lp,1)).eachAfter(zp(r,i.r/Math.min(e,n))).eachBefore(Bp(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Ap(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r=\"function\"==typeof t?t:Ip(+t),i):r},i};function Dp(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function zp(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=Pp(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function Bp(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Fp=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},jp=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l},Up=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&jp(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(Fp),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},Vp=\"$\",Hp={depth:-1},Gp={};function Wp(t){return t.id}function qp(t){return t.parentId}var Xp=function(){var t=Wp,e=qp;function n(n){var r,i,a,o,s,u,l,c=n.length,h=new Array(c),f={};for(i=0;i<c;++i)r=n[i],s=h[i]=new pp(r),null!=(u=t(r,i,n))&&(u+=\"\")&&(f[l=Vp+(s.id=u)]=l in f?Gp:s);for(i=0;i<c;++i)if(s=h[i],null!=(u=e(n[i],i,n))&&(u+=\"\")){if(!(o=f[Vp+u]))throw new Error(\"missing: \"+u);if(o===Gp)throw new Error(\"ambiguous: \"+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error(\"multiple roots\");a=s}if(!a)throw new Error(\"no root\");if(a.parent=Hp,a.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(dp),a.parent=null,c>0)throw new Error(\"cycle\");return a}return n.id=function(e){return arguments.length?(t=Op(e),n):t},n.parentId=function(t){return arguments.length?(e=Op(t),n):e},n};function Yp(t,e){return t.parent===e.parent?1:2}function Qp(t){var e=t.children;return e?e[0]:t.t}function Zp(t){var e=t.children;return e?e[e.length-1]:t.t}function $p(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Jp(t,e,n){return t.a.parent===e.parent?t.a:n}function Kp(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Kp.prototype=Object.create(pp.prototype);var tm=function(){var t=Yp,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,a,o=new Kp(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new Kp(r[i],i)),n.parent=e;return(o.parent=new Kp(null,0)).children=[o],o}(i);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)i.eachBefore(s);else{var l=i,c=i,h=i;i.eachBefore((function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)}));var f=l===c?1:t(l,c)/2,d=f-l.x,p=e/(c.x+f+d),m=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*m}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],l=a.m,c=o.m,h=s.m,f=u.m;s=Zp(s),a=Qp(a),s&&a;)u=Qp(u),(o=Zp(o)).a=e,(i=s.z+h-a.z-l+t(s._,a._))>0&&($p(Jp(s,e,r),e,i),l+=i,c+=i),h+=s.m,l+=a.m,f+=u.m,c+=o.m;s&&!Zp(o)&&(o.t=s,o.m+=h-c),a&&!Qp(u)&&(u.t=a,u.m+=l-f,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},em=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(i-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l},nm=(1+Math.sqrt(5))/2;function rm(t,e,n,r,i,a){for(var o,s,u,l,c,h,f,d,p,m,g,v=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){u=i-n,l=a-r;do{c=y[_++].value}while(!c&&_<x);for(h=f=c,g=c*c*(m=Math.max(l/u,u/l)/(w*t)),p=Math.max(f/g,g/h);_<x;++_){if(c+=s=y[_].value,s<h&&(h=s),s>f&&(f=s),g=c*c*m,(d=Math.max(f/g,g/h))>p){c-=s;break}p=d}v.push(o={value:c,dice:u<l,children:y.slice(b,_)}),o.dice?jp(o,n,r,i,w?r+=l*c/w:a):em(o,n,r,w?n+=u*c/w:i,a),w-=c,b=_}return v}var im=function t(e){function n(t,n,r,i,a){rm(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(nm),am=function(){var t=im,e=!1,n=1,r=1,i=[0],a=Lp,o=Lp,s=Lp,u=Lp,l=Lp;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(Fp),t}function h(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<c&&(c=f=(c+f)/2),e.x0=r,e.y0=c,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=a(e)/2,r+=l(e)-n,c+=o(e)-n,(h-=s(e)-n)<r&&(r=h=(r+h)/2),(f-=u(e)-n)<c&&(c=f=(c+f)/2),t(e,r,c,h,f))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=Op(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a=\"function\"==typeof t?t:Ip(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o=\"function\"==typeof t?t:Ip(+t),c):o},c.paddingRight=function(t){return arguments.length?(s=\"function\"==typeof t?t:Ip(+t),c):s},c.paddingBottom=function(t){return arguments.length?(u=\"function\"==typeof t?t:Ip(+t),c):u},c.paddingLeft=function(t){return arguments.length?(l=\"function\"==typeof t?t:Ip(+t),c):l},c},om=function(t,e,n,r,i){var a,o,s=t.children,u=s.length,l=new Array(u+1);for(l[0]=o=a=0;a<u;++a)l[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,u){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=u)}var h=l[e],f=r/2+h,d=e+1,p=n-1;for(;d<p;){var m=d+p>>>1;l[m]<f?d=m+1:p=m}f-l[d-1]<l[d]-f&&e+1<d&&--d;var g=l[d]-h,v=r-g;if(o-i>u-a){var y=(i*v+o*g)/r;t(e,d,g,i,a,y,u),t(d,n,v,y,a,o,u)}else{var b=(a*v+u*g)/r;t(e,d,g,i,a,o,b),t(d,n,v,i,b,o,u)}}(0,u,t.value,e,n,r,i)},sm=function(t,e,n,r,i){(1&t.depth?em:jp)(t,e,n,r,i)},um=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,u,l,c,h=-1,f=o.length,d=t.value;++h<f;){for(u=(s=o[h]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?jp(s,n,r,i,r+=(a-r)*s.value/d):em(s,n,r,n+=(i-n)*s.value/d,a),d-=s.value}else t._squarify=o=rm(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(nm),lm=function(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2},cm=function(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(u*=3),o/u]},hm=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function fm(t,e){return t[0]-e[0]||t[1]-e[1]}function dm(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&hm(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}var pm=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(fm),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=dm(r),o=dm(i),s=o[0]===a[0],u=o[o.length-1]===a[a.length-1],l=[];for(e=a.length-1;e>=0;--e)l.push(t[r[a[e]][2]]);for(e=+s;e<o.length-u;++e)l.push(t[r[o[e]][2]]);return l},mm=function(t,e){for(var n,r,i=t.length,a=t[i-1],o=e[0],s=e[1],u=a[0],l=a[1],c=!1,h=0;h<i;++h)n=(a=t[h])[0],(r=a[1])>s!=l>s&&o<(u-n)*(s-r)/(l-r)+n&&(c=!c),u=n,l=r;return c},gm=function(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],u=0;++r<i;)e=o,n=s,e-=o=(a=t[r])[0],n-=s=a[1],u+=Math.sqrt(e*e+n*n);return u},vm=function(){return Math.random()},ym=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(vm),bm=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(vm),_m=function t(e){function n(){var t=bm.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(vm),xm=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(vm),wm=function t(e){function n(t){var n=xm.source(e)(t);return function(){return n()/t}}return n.source=t,n}(vm),Sm=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(vm);function Em(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Mm(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Tm=Array.prototype,Cm=Tm.map,Pm=Tm.slice,km={name:\"implicit\"};function Am(){var t=Qo(),e=[],n=[],r=km;function i(i){var a=i+\"\",o=t.get(a);if(!o){if(r!==km)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Qo();for(var r,a,o=-1,s=n.length;++o<s;)t.has(a=(r=n[o])+\"\")||t.set(a,e.push(r));return i},i.range=function(t){return arguments.length?(n=Pm.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Am(e,n).unknown(r)},Em.apply(i,arguments),i}function Om(){var t,e,n=Am().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,u=0,l=.5;function c(){var n=r().length,c=a[1]<a[0],h=a[c-0],f=a[1-c];t=(f-h)/Math.max(1,n-s+2*u),o&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*l,e=t*(1-s),o&&(h=Math.round(h),e=Math.round(e));var d=w(n).map((function(e){return h+t*e}));return i(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,c()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,u=+t),c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),c()):s},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.copy=function(){return Om(r(),a).round(o).paddingInner(s).paddingOuter(u).align(l)},Em.apply(c(),arguments)}function Lm(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Om.apply(null,arguments).paddingInner(1))}var Im=function(t){return function(){return t}},Nm=function(t){return+t},Rm=[0,1];function Dm(t){return t}function zm(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Im(isNaN(e)?NaN:.5)}function Bm(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Fm(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=zm(i,r),a=n(o,a)):(r=zm(r,i),a=n(a,o)),function(t){return a(r(t))}}function jm(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=zm(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=u(t,e,1,r)-1;return a[n](i[n](e))}}function Um(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Vm(){var t,e,n,r,i,a,o=Rm,s=Rm,u=Cr,l=Dm;function c(){return r=Math.min(o.length,s.length)>2?jm:Fm,i=a=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,u)))(t(l(e)))}return h.invert=function(n){return l(e((a||(a=r(s,o.map(t),yr)))(n)))},h.domain=function(t){return arguments.length?(o=Cm.call(t,Nm),l===Dm||(l=Bm(o)),c()):o.slice()},h.range=function(t){return arguments.length?(s=Pm.call(t),c()):s.slice()},h.rangeRound=function(t){return s=Pm.call(t),u=Ar,c()},h.clamp=function(t){return arguments.length?(l=t?Bm(o):Dm,h):l!==Dm},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function Hm(t,e){return Vm()(t,e)}var Gm=function(t,e,n,r){var i,a=P(t,e,n);switch((r=Fu(null==r?\",f\":r)).type){case\"s\":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=tl(a,o))||(r.precision=i),Gu(r,o);case\"\":case\"e\":case\"g\":case\"p\":case\"r\":null!=r.precision||isNaN(i=el(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-(\"e\"===r.type));break;case\"f\":case\"%\":null!=r.precision||isNaN(i=Ku(a))||(r.precision=i-2*(\"%\"===r.type))}return Hu(r)};function Wm(t){var e=t.domain;return t.ticks=function(t){var n=e();return T(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Gm(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,s=i[a],u=i[o];return u<s&&(r=s,s=u,u=r,r=a,a=o,o=r),(r=C(s,u,n))>0?r=C(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=C(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}function qm(){var t=Hm(Dm,Dm);return t.copy=function(){return Um(t,qm())},Em.apply(t,arguments),Wm(t)}function Xm(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Cm.call(e,Nm),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Xm(t).unknown(e)},t=arguments.length?Cm.call(t,Nm):[0,1],Wm(n)}var Ym=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t};function Qm(t){return Math.log(t)}function Zm(t){return Math.exp(t)}function $m(t){return-Math.log(-t)}function Jm(t){return-Math.exp(-t)}function Km(t){return isFinite(t)?+(\"1e\"+t):t<0?0:t}function tg(t){return function(e){return-t(-e)}}function eg(t){var e,n,r=t(Qm,Zm),i=r.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?Km:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),i()[0]<0?(e=tg(e),n=tg(n),t($m,Jm)):t(Qm,Zm),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r,o=i(),s=o[0],u=o[o.length-1];(r=u<s)&&(f=s,s=u,u=f);var l,c,h,f=e(s),d=e(u),p=null==t?10:+t,m=[];if(!(a%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,s>0){for(;f<d;++f)for(c=1,l=n(f);c<a;++c)if(!((h=l*c)<s)){if(h>u)break;m.push(h)}}else for(;f<d;++f)for(c=a-1,l=n(f);c>=1;--c)if(!((h=l*c)<s)){if(h>u)break;m.push(h)}}else m=T(f,d,Math.min(d-f,p)).map(n);return r?m.reverse():m},r.tickFormat=function(t,i){if(null==i&&(i=10===a?\".0e\":\",\"),\"function\"!=typeof i&&(i=Hu(i)),t===1/0)return i;null==t&&(t=10);var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):\"\"}},r.nice=function(){return i(Ym(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function ng(){var t=eg(Vm()).domain([1,10]);return t.copy=function(){return Um(t,ng()).base(t.base())},Em.apply(t,arguments),t}function rg(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ig(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ag(t){var e=1,n=t(rg(e),ig(e));return n.constant=function(n){return arguments.length?t(rg(e=+n),ig(e)):e},Wm(n)}function og(){var t=ag(Vm());return t.copy=function(){return Um(t,og()).constant(t.constant())},Em.apply(t,arguments)}function sg(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ug(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function lg(t){return t<0?-t*t:t*t}function cg(t){var e=t(Dm,Dm),n=1;function r(){return 1===n?t(Dm,Dm):.5===n?t(ug,lg):t(sg(n),sg(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Wm(e)}function hg(){var t=cg(Vm());return t.copy=function(){return Um(t,hg()).exponent(t.exponent())},Em.apply(t,arguments),t}function fg(){return hg.apply(null,arguments).exponent(.5)}function dg(){var t,e=[],n=[],i=[];function a(){var t=0,r=Math.max(1,n.length);for(i=new Array(r-1);++t<r;)i[t-1]=O(e,t/r);return o}function o(e){return isNaN(e=+e)?t:n[u(i,e)]}return o.invertExtent=function(t){var r=n.indexOf(t);return r<0?[NaN,NaN]:[r>0?i[r-1]:e[0],r<i.length?i[r]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,i=0,o=t.length;i<o;++i)null==(n=t[i])||isNaN(n=+n)||e.push(n);return e.sort(r),a()},o.range=function(t){return arguments.length?(n=Pm.call(t),a()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return i.slice()},o.copy=function(){return dg().domain(e).range(n).unknown(t)},Em.apply(o,arguments)}function pg(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return e<=e?a[u(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},o.range=function(t){return arguments.length?(r=(a=Pm.call(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return pg().domain([e,n]).range(a).unknown(t)},Em.apply(Wm(o),arguments)}function mg(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[u(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Pm.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Pm.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return mg().domain(e).range(n).unknown(t)},Em.apply(i,arguments)}var gg=new Date,vg=new Date;function yg(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return yg((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return gg.setTime(+e),vg.setTime(+r),t(gg),t(vg),Math.floor(n(gg,vg))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var bg=yg((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));bg.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?yg((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):bg:null};var _g=bg,xg=bg.range,wg=6e4,Sg=6048e5,Eg=yg((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),Mg=Eg,Tg=Eg.range,Cg=yg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+e*wg)}),(function(t,e){return(e-t)/wg}),(function(t){return t.getMinutes()})),Pg=Cg,kg=Cg.range,Ag=yg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*wg)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Og=Ag,Lg=Ag.range,Ig=yg((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wg)/864e5}),(function(t){return t.getDate()-1})),Ng=Ig,Rg=Ig.range;function Dg(t){return yg((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wg)/Sg}))}var zg=Dg(0),Bg=Dg(1),Fg=Dg(2),jg=Dg(3),Ug=Dg(4),Vg=Dg(5),Hg=Dg(6),Gg=zg.range,Wg=Bg.range,qg=Fg.range,Xg=jg.range,Yg=Ug.range,Qg=Vg.range,Zg=Hg.range,$g=yg((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Jg=$g,Kg=$g.range,tv=yg((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));tv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?yg((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var ev=tv,nv=tv.range,rv=yg((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*wg)}),(function(t,e){return(e-t)/wg}),(function(t){return t.getUTCMinutes()})),iv=rv,av=rv.range,ov=yg((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),sv=ov,uv=ov.range,lv=yg((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),cv=lv,hv=lv.range;function fv(t){return yg((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Sg}))}var dv=fv(0),pv=fv(1),mv=fv(2),gv=fv(3),vv=fv(4),yv=fv(5),bv=fv(6),_v=dv.range,xv=pv.range,wv=mv.range,Sv=gv.range,Ev=vv.range,Mv=yv.range,Tv=bv.range,Cv=yg((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Pv=Cv,kv=Cv.range,Av=yg((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Av.every=function(t){return isFinite(t=Math.floor(t))&&t>0?yg((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Ov=Av,Lv=Av.range;function Iv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rv(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Dv(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,l=Yv(i),c=Qv(i),h=Yv(a),f=Qv(a),d=Yv(o),p=Qv(o),m=Yv(s),g=Qv(s),v=Yv(u),y=Qv(u),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:my,e:my,f:_y,H:gy,I:vy,j:yy,L:by,m:xy,M:wy,p:function(t){return i[+(t.getHours()>=12)]},Q:Zy,s:$y,S:Sy,u:Ey,U:My,V:Ty,w:Cy,W:Py,x:null,X:null,y:ky,Y:Ay,Z:Oy,\"%\":Qy},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ly,e:Ly,f:zy,H:Iy,I:Ny,j:Ry,L:Dy,m:By,M:Fy,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:Zy,s:$y,S:jy,u:Uy,U:Vy,V:Hy,w:Gy,W:Wy,x:null,X:null,y:qy,Y:Xy,Z:Yy,\"%\":Qy},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:ay,e:ay,f:hy,H:sy,I:sy,j:oy,L:cy,m:iy,M:uy,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:dy,s:py,S:ly,u:$v,U:Jv,V:Kv,w:Zv,W:ty,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:ny,Y:ey,Z:ry,\"%\":fy};function w(t,e){return function(n){var r,i,a,o=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=Vv[r=t.charAt(++s)])?r=t.charAt(++s):i=\"e\"===r?\" \":\"0\",(a=e[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join(\"\")}}function S(t,e){return function(n){var r,i,a=Rv(1900);if(E(a,t,n+=\"\",0)!=n.length)return null;if(\"Q\"in a)return new Date(a.Q);if(\"p\"in a&&(a.H=a.H%12+12*a.p),\"V\"in a){if(a.V<1||a.V>53)return null;\"w\"in a||(a.w=1),\"Z\"in a?(i=(r=Nv(Rv(a.y))).getUTCDay(),r=i>4||0===i?pv.ceil(r):pv(r),r=cv.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=e(Rv(a.y))).getDay(),r=i>4||0===i?Bg.ceil(r):Bg(r),r=Ng.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else(\"W\"in a||\"U\"in a)&&(\"w\"in a||(a.w=\"u\"in a?a.u%7:\"W\"in a?1:0),i=\"Z\"in a?Nv(Rv(a.y)).getUTCDay():e(Rv(a.y)).getDay(),a.m=0,a.d=\"W\"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return\"Z\"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Nv(a)):e(a)}}function E(t,e,n,r){for(var i,a,o=0,s=e.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in Vv?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+=\"\",b);return e.toString=function(){return t},e},parse:function(t){var e=S(t+=\"\",Iv);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+=\"\",_);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t,Nv);return e.toString=function(){return t},e}}}var zv,Bv,Fv,jv,Uv,Vv={\"-\":\"\",_:\" \",0:\"0\"},Hv=/^\\s*\\d+/,Gv=/^%/,Wv=/[\\\\^$*+?|[\\]().{}]/g;function qv(t,e,n){var r=t<0?\"-\":\"\",i=(r?-t:t)+\"\",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Xv(t){return t.replace(Wv,\"\\\\$&\")}function Yv(t){return new RegExp(\"^(?:\"+t.map(Xv).join(\"|\")+\")\",\"i\")}function Qv(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Zv(t,e,n){var r=Hv.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $v(t,e,n){var r=Hv.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Jv(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Kv(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ty(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ey(t,e,n){var r=Hv.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ny(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ry(t,e,n){var r=/^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||\"00\")),n+r[0].length):-1}function iy(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ay(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function oy(t,e,n){var r=Hv.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function sy(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function uy(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ly(t,e,n){var r=Hv.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function cy(t,e,n){var r=Hv.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function hy(t,e,n){var r=Hv.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function fy(t,e,n){var r=Gv.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function dy(t,e,n){var r=Hv.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function py(t,e,n){var r=Hv.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function my(t,e){return qv(t.getDate(),e,2)}function gy(t,e){return qv(t.getHours(),e,2)}function vy(t,e){return qv(t.getHours()%12||12,e,2)}function yy(t,e){return qv(1+Ng.count(ev(t),t),e,3)}function by(t,e){return qv(t.getMilliseconds(),e,3)}function _y(t,e){return by(t,e)+\"000\"}function xy(t,e){return qv(t.getMonth()+1,e,2)}function wy(t,e){return qv(t.getMinutes(),e,2)}function Sy(t,e){return qv(t.getSeconds(),e,2)}function Ey(t){var e=t.getDay();return 0===e?7:e}function My(t,e){return qv(zg.count(ev(t),t),e,2)}function Ty(t,e){var n=t.getDay();return t=n>=4||0===n?Ug(t):Ug.ceil(t),qv(Ug.count(ev(t),t)+(4===ev(t).getDay()),e,2)}function Cy(t){return t.getDay()}function Py(t,e){return qv(Bg.count(ev(t),t),e,2)}function ky(t,e){return qv(t.getFullYear()%100,e,2)}function Ay(t,e){return qv(t.getFullYear()%1e4,e,4)}function Oy(t){var e=t.getTimezoneOffset();return(e>0?\"-\":(e*=-1,\"+\"))+qv(e/60|0,\"0\",2)+qv(e%60,\"0\",2)}function Ly(t,e){return qv(t.getUTCDate(),e,2)}function Iy(t,e){return qv(t.getUTCHours(),e,2)}function Ny(t,e){return qv(t.getUTCHours()%12||12,e,2)}function Ry(t,e){return qv(1+cv.count(Ov(t),t),e,3)}function Dy(t,e){return qv(t.getUTCMilliseconds(),e,3)}function zy(t,e){return Dy(t,e)+\"000\"}function By(t,e){return qv(t.getUTCMonth()+1,e,2)}function Fy(t,e){return qv(t.getUTCMinutes(),e,2)}function jy(t,e){return qv(t.getUTCSeconds(),e,2)}function Uy(t){var e=t.getUTCDay();return 0===e?7:e}function Vy(t,e){return qv(dv.count(Ov(t),t),e,2)}function Hy(t,e){var n=t.getUTCDay();return t=n>=4||0===n?vv(t):vv.ceil(t),qv(vv.count(Ov(t),t)+(4===Ov(t).getUTCDay()),e,2)}function Gy(t){return t.getUTCDay()}function Wy(t,e){return qv(pv.count(Ov(t),t),e,2)}function qy(t,e){return qv(t.getUTCFullYear()%100,e,2)}function Xy(t,e){return qv(t.getUTCFullYear()%1e4,e,4)}function Yy(){return\"+0000\"}function Qy(){return\"%\"}function Zy(t){return+t}function $y(t){return Math.floor(+t/1e3)}function Jy(t){return zv=Dv(t),Bv=zv.format,Fv=zv.parse,jv=zv.utcFormat,Uv=zv.utcParse,zv}Jy({dateTime:\"%x, %X\",date:\"%-m/%-d/%Y\",time:\"%-I:%M:%S %p\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});var Ky=Date.prototype.toISOString?function(t){return t.toISOString()}:jv(\"%Y-%m-%dT%H:%M:%S.%LZ\");var tb=+new Date(\"2000-01-01T00:00:00.000Z\")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Uv(\"%Y-%m-%dT%H:%M:%S.%LZ\"),eb=1e3,nb=60*eb,rb=60*nb,ib=24*rb,ab=7*ib,ob=30*ib,sb=365*ib;function ub(t){return new Date(t)}function lb(t){return t instanceof Date?+t:+new Date(+t)}function cb(t,e,n,r,a,o,s,u,l){var c=Hm(Dm,Dm),h=c.invert,f=c.domain,d=l(\".%L\"),p=l(\":%S\"),m=l(\"%I:%M\"),g=l(\"%I %p\"),v=l(\"%a %d\"),y=l(\"%b %d\"),b=l(\"%B\"),_=l(\"%Y\"),x=[[s,1,eb],[s,5,5*eb],[s,15,15*eb],[s,30,30*eb],[o,1,nb],[o,5,5*nb],[o,15,15*nb],[o,30,30*nb],[a,1,rb],[a,3,3*rb],[a,6,6*rb],[a,12,12*rb],[r,1,ib],[r,2,2*ib],[n,1,ab],[e,1,ob],[e,3,3*ob],[t,1,sb]];function w(i){return(s(i)<i?d:o(i)<i?p:a(i)<i?m:r(i)<i?g:e(i)<i?n(i)<i?v:y:t(i)<i?b:_)(i)}function S(e,n,r,a){if(null==e&&(e=10),\"number\"==typeof e){var o=Math.abs(r-n)/e,s=i((function(t){return t[2]})).right(x,o);s===x.length?(a=P(n/sb,r/sb,e),e=t):s?(a=(s=x[o/x[s-1][2]<x[s][2]/o?s-1:s])[1],e=s[0]):(a=Math.max(P(n,r,e),1),e=u)}return null==a?e:e.every(a)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(Cm.call(t,lb)):f().map(ub)},c.ticks=function(t,e){var n,r=f(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=S(t,i,a,e))?n.range(i,a+1):[],o?n.reverse():n},c.tickFormat=function(t,e){return null==e?w:l(e)},c.nice=function(t,e){var n=f();return(t=S(t,n[0],n[n.length-1],e))?f(Ym(n,t)):c},c.copy=function(){return Um(c,cb(t,e,n,r,a,o,s,u,l))},c}var hb=function(){return Em.apply(cb(ev,Jg,zg,Ng,Og,Pg,Mg,_g,Bv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},fb=function(){return Em.apply(cb(Ov,Pv,dv,cv,sv,iv,Mg,_g,jv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function db(){var t,e,n,r,i,a=0,o=1,s=Dm,u=!1;function l(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return l.domain=function(i){return arguments.length?(t=r(a=+i[0]),e=r(o=+i[1]),n=t===e?0:1/(e-t),l):[a,o]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(s=t,l):s},l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),l}}function pb(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function mb(){var t=Wm(db()(Dm));return t.copy=function(){return pb(t,mb())},Mm.apply(t,arguments)}function gb(){var t=eg(db()).domain([1,10]);return t.copy=function(){return pb(t,gb()).base(t.base())},Mm.apply(t,arguments)}function vb(){var t=ag(db());return t.copy=function(){return pb(t,vb()).constant(t.constant())},Mm.apply(t,arguments)}function yb(){var t=cg(db());return t.copy=function(){return pb(t,yb()).exponent(t.exponent())},Mm.apply(t,arguments)}function bb(){return yb.apply(null,arguments).exponent(.5)}function _b(){var t=[],e=Dm;function n(n){if(!isNaN(n=+n))return e((u(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var i,a=0,o=e.length;a<o;++a)null==(i=e[a])||isNaN(i=+i)||t.push(i);return t.sort(r),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return _b(e).domain(t)},Mm.apply(n,arguments)}function xb(){var t,e,n,r,i,a,o,s=0,u=.5,l=1,c=Dm,h=!1;function f(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(t<e?r:i),c(h?Math.max(0,Math.min(1,t)):t))}return f.domain=function(o){return arguments.length?(t=a(s=+o[0]),e=a(u=+o[1]),n=a(l=+o[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f):[s,u,l]},f.clamp=function(t){return arguments.length?(h=!!t,f):h},f.interpolator=function(t){return arguments.length?(c=t,f):c},f.unknown=function(t){return arguments.length?(o=t,f):o},function(o){return a=o,t=o(s),e=o(u),n=o(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f}}function wb(){var t=Wm(xb()(Dm));return t.copy=function(){return pb(t,wb())},Mm.apply(t,arguments)}function Sb(){var t=eg(xb()).domain([.1,1,10]);return t.copy=function(){return pb(t,Sb()).base(t.base())},Mm.apply(t,arguments)}function Eb(){var t=ag(xb());return t.copy=function(){return pb(t,Eb()).constant(t.constant())},Mm.apply(t,arguments)}function Mb(){var t=cg(xb());return t.copy=function(){return pb(t,Mb()).exponent(t.exponent())},Mm.apply(t,arguments)}function Tb(){return Mb.apply(null,arguments).exponent(.5)}var Cb=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]=\"#\"+t.slice(6*r,6*++r);return n},Pb=Cb(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\"),kb=Cb(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\"),Ab=Cb(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\"),Ob=Cb(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\"),Lb=Cb(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\"),Ib=Cb(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\"),Nb=Cb(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\"),Rb=Cb(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\"),Db=Cb(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\"),zb=Cb(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\"),Bb=function(t){return pr(t[t.length-1])},Fb=new Array(3).concat(\"d8b365f5f5f55ab4ac\",\"a6611adfc27d80cdc1018571\",\"a6611adfc27df5f5f580cdc1018571\",\"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\").map(Cb),jb=Bb(Fb),Ub=new Array(3).concat(\"af8dc3f7f7f77fbf7b\",\"7b3294c2a5cfa6dba0008837\",\"7b3294c2a5cff7f7f7a6dba0008837\",\"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\").map(Cb),Vb=Bb(Ub),Hb=new Array(3).concat(\"e9a3c9f7f7f7a1d76a\",\"d01c8bf1b6dab8e1864dac26\",\"d01c8bf1b6daf7f7f7b8e1864dac26\",\"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\").map(Cb),Gb=Bb(Hb),Wb=new Array(3).concat(\"998ec3f7f7f7f1a340\",\"5e3c99b2abd2fdb863e66101\",\"5e3c99b2abd2f7f7f7fdb863e66101\",\"542788998ec3d8daebfee0b6f1a340b35806\",\"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\").map(Cb),qb=Bb(Wb),Xb=new Array(3).concat(\"ef8a62f7f7f767a9cf\",\"ca0020f4a58292c5de0571b0\",\"ca0020f4a582f7f7f792c5de0571b0\",\"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\").map(Cb),Yb=Bb(Xb),Qb=new Array(3).concat(\"ef8a62ffffff999999\",\"ca0020f4a582bababa404040\",\"ca0020f4a582ffffffbababa404040\",\"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\").map(Cb),Zb=Bb(Qb),$b=new Array(3).concat(\"fc8d59ffffbf91bfdb\",\"d7191cfdae61abd9e92c7bb6\",\"d7191cfdae61ffffbfabd9e92c7bb6\",\"d73027fc8d59fee090e0f3f891bfdb4575b4\",\"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\").map(Cb),Jb=Bb($b),Kb=new Array(3).concat(\"fc8d59ffffbf91cf60\",\"d7191cfdae61a6d96a1a9641\",\"d7191cfdae61ffffbfa6d96a1a9641\",\"d73027fc8d59fee08bd9ef8b91cf601a9850\",\"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\").map(Cb),t_=Bb(Kb),e_=new Array(3).concat(\"fc8d59ffffbf99d594\",\"d7191cfdae61abdda42b83ba\",\"d7191cfdae61ffffbfabdda42b83ba\",\"d53e4ffc8d59fee08be6f59899d5943288bd\",\"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\").map(Cb),n_=Bb(e_),r_=new Array(3).concat(\"e5f5f999d8c92ca25f\",\"edf8fbb2e2e266c2a4238b45\",\"edf8fbb2e2e266c2a42ca25f006d2c\",\"edf8fbccece699d8c966c2a42ca25f006d2c\",\"edf8fbccece699d8c966c2a441ae76238b45005824\",\"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\").map(Cb),i_=Bb(r_),a_=new Array(3).concat(\"e0ecf49ebcda8856a7\",\"edf8fbb3cde38c96c688419d\",\"edf8fbb3cde38c96c68856a7810f7c\",\"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\").map(Cb),o_=Bb(a_),s_=new Array(3).concat(\"e0f3dba8ddb543a2ca\",\"f0f9e8bae4bc7bccc42b8cbe\",\"f0f9e8bae4bc7bccc443a2ca0868ac\",\"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\").map(Cb),u_=Bb(s_),l_=new Array(3).concat(\"fee8c8fdbb84e34a33\",\"fef0d9fdcc8afc8d59d7301f\",\"fef0d9fdcc8afc8d59e34a33b30000\",\"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\").map(Cb),c_=Bb(l_),h_=new Array(3).concat(\"ece2f0a6bddb1c9099\",\"f6eff7bdc9e167a9cf02818a\",\"f6eff7bdc9e167a9cf1c9099016c59\",\"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\").map(Cb),f_=Bb(h_),d_=new Array(3).concat(\"ece7f2a6bddb2b8cbe\",\"f1eef6bdc9e174a9cf0570b0\",\"f1eef6bdc9e174a9cf2b8cbe045a8d\",\"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\").map(Cb),p_=Bb(d_),m_=new Array(3).concat(\"e7e1efc994c7dd1c77\",\"f1eef6d7b5d8df65b0ce1256\",\"f1eef6d7b5d8df65b0dd1c77980043\",\"f1eef6d4b9dac994c7df65b0dd1c77980043\",\"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\").map(Cb),g_=Bb(m_),v_=new Array(3).concat(\"fde0ddfa9fb5c51b8a\",\"feebe2fbb4b9f768a1ae017e\",\"feebe2fbb4b9f768a1c51b8a7a0177\",\"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\").map(Cb),y_=Bb(v_),b_=new Array(3).concat(\"edf8b17fcdbb2c7fb8\",\"ffffcca1dab441b6c4225ea8\",\"ffffcca1dab441b6c42c7fb8253494\",\"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\").map(Cb),__=Bb(b_),x_=new Array(3).concat(\"f7fcb9addd8e31a354\",\"ffffccc2e69978c679238443\",\"ffffccc2e69978c67931a354006837\",\"ffffccd9f0a3addd8e78c67931a354006837\",\"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\").map(Cb),w_=Bb(x_),S_=new Array(3).concat(\"fff7bcfec44fd95f0e\",\"ffffd4fed98efe9929cc4c02\",\"ffffd4fed98efe9929d95f0e993404\",\"ffffd4fee391fec44ffe9929d95f0e993404\",\"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\").map(Cb),E_=Bb(S_),M_=new Array(3).concat(\"ffeda0feb24cf03b20\",\"ffffb2fecc5cfd8d3ce31a1c\",\"ffffb2fecc5cfd8d3cf03b20bd0026\",\"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\").map(Cb),T_=Bb(M_),C_=new Array(3).concat(\"deebf79ecae13182bd\",\"eff3ffbdd7e76baed62171b5\",\"eff3ffbdd7e76baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\").map(Cb),P_=Bb(C_),k_=new Array(3).concat(\"e5f5e0a1d99b31a354\",\"edf8e9bae4b374c476238b45\",\"edf8e9bae4b374c47631a354006d2c\",\"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\").map(Cb),A_=Bb(k_),O_=new Array(3).concat(\"f0f0f0bdbdbd636363\",\"f7f7f7cccccc969696525252\",\"f7f7f7cccccc969696636363252525\",\"f7f7f7d9d9d9bdbdbd969696636363252525\",\"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\").map(Cb),L_=Bb(O_),I_=new Array(3).concat(\"efedf5bcbddc756bb1\",\"f2f0f7cbc9e29e9ac86a51a3\",\"f2f0f7cbc9e29e9ac8756bb154278f\",\"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\").map(Cb),N_=Bb(I_),R_=new Array(3).concat(\"fee0d2fc9272de2d26\",\"fee5d9fcae91fb6a4acb181d\",\"fee5d9fcae91fb6a4ade2d26a50f15\",\"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\").map(Cb),D_=Bb(R_),z_=new Array(3).concat(\"fee6cefdae6be6550d\",\"feeddefdbe85fd8d3cd94701\",\"feeddefdbe85fd8d3ce6550da63603\",\"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\").map(Cb),B_=Bb(z_),F_=function(t){return t=Math.max(0,Math.min(1,t)),\"rgb(\"+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+\", \"+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+\", \"+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+\")\"},j_=Qr(nr(300,.5,0),nr(-240,.5,1)),U_=Qr(nr(-100,.75,.35),nr(80,1.5,.8)),V_=Qr(nr(260,.75,.35),nr(80,1.5,.8)),H_=nr(),G_=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return H_.h=360*t-100,H_.s=1.5-1.5*e,H_.l=.8-.9*e,H_+\"\"},W_=yn(),q_=Math.PI/3,X_=2*Math.PI/3,Y_=function(t){var e;return t=(.5-t)*Math.PI,W_.r=255*(e=Math.sin(t))*e,W_.g=255*(e=Math.sin(t+q_))*e,W_.b=255*(e=Math.sin(t+X_))*e,W_+\"\"},Q_=function(t){return t=Math.max(0,Math.min(1,t)),\"rgb(\"+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+\", \"+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+\", \"+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+\")\"};function Z_(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var $_=Z_(Cb(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\")),J_=Z_(Cb(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\")),K_=Z_(Cb(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\")),tx=Z_(Cb(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\")),ex=function(t){return function(){return t}},nx=Math.abs,rx=Math.atan2,ix=Math.cos,ax=Math.max,ox=Math.min,sx=Math.sin,ux=Math.sqrt,lx=1e-12,cx=Math.PI,hx=cx/2,fx=2*cx;function dx(t){return t>=1?hx:t<=-1?-hx:Math.asin(t)}function px(t){return t.innerRadius}function mx(t){return t.outerRadius}function gx(t){return t.startAngle}function vx(t){return t.endAngle}function yx(t){return t&&t.padAngle}function bx(t,e,n,r,i,a,o){var s=t-n,u=e-r,l=(o?a:-a)/ux(s*s+u*u),c=l*u,h=-l*s,f=t+c,d=e+h,p=n+c,m=r+h,g=(f+p)/2,v=(d+m)/2,y=p-f,b=m-d,_=y*y+b*b,x=i-a,w=f*m-p*d,S=(b<0?-1:1)*ux(ax(0,x*x*_-w*w)),E=(w*b-y*S)/_,M=(-w*y-b*S)/_,T=(w*b+y*S)/_,C=(-w*y+b*S)/_,P=E-g,k=M-v,A=T-g,O=C-v;return P*P+k*k>A*A+O*O&&(E=T,M=C),{cx:E,cy:M,x01:-c,y01:-h,x11:E*(i/x-1),y11:M*(i/x-1)}}var _x=function(){var t=px,e=mx,n=ex(0),r=null,i=gx,a=vx,o=yx,s=null;function u(){var u,l,c,h=+t.apply(this,arguments),f=+e.apply(this,arguments),d=i.apply(this,arguments)-hx,p=a.apply(this,arguments)-hx,m=nx(p-d),g=p>d;if(s||(s=u=jo()),f<h&&(l=f,f=h,h=l),f>lx)if(m>fx-lx)s.moveTo(f*ix(d),f*sx(d)),s.arc(0,0,f,d,p,!g),h>lx&&(s.moveTo(h*ix(p),h*sx(p)),s.arc(0,0,h,p,d,g));else{var v,y,b=d,_=p,x=d,w=p,S=m,E=m,M=o.apply(this,arguments)/2,T=M>lx&&(r?+r.apply(this,arguments):ux(h*h+f*f)),C=ox(nx(f-h)/2,+n.apply(this,arguments)),P=C,k=C;if(T>lx){var A=dx(T/h*sx(M)),O=dx(T/f*sx(M));(S-=2*A)>lx?(x+=A*=g?1:-1,w-=A):(S=0,x=w=(d+p)/2),(E-=2*O)>lx?(b+=O*=g?1:-1,_-=O):(E=0,b=_=(d+p)/2)}var L=f*ix(b),I=f*sx(b),N=h*ix(w),R=h*sx(w);if(C>lx){var D,z=f*ix(_),B=f*sx(_),F=h*ix(x),j=h*sx(x);if(m<cx&&(D=function(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,h=s-a,f=h*u-c*l;if(!(f*f<lx))return[t+(f=(c*(e-a)-h*(t-i))/f)*u,e+f*l]}(L,I,F,j,z,B,N,R))){var U=L-D[0],V=I-D[1],H=z-D[0],G=B-D[1],W=1/sx(((c=(U*H+V*G)/(ux(U*U+V*V)*ux(H*H+G*G)))>1?0:c<-1?cx:Math.acos(c))/2),q=ux(D[0]*D[0]+D[1]*D[1]);P=ox(C,(h-q)/(W-1)),k=ox(C,(f-q)/(W+1))}}E>lx?k>lx?(v=bx(F,j,L,I,f,k,g),y=bx(z,B,N,R,f,k,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),k<C?s.arc(v.cx,v.cy,k,rx(v.y01,v.x01),rx(y.y01,y.x01),!g):(s.arc(v.cx,v.cy,k,rx(v.y01,v.x01),rx(v.y11,v.x11),!g),s.arc(0,0,f,rx(v.cy+v.y11,v.cx+v.x11),rx(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,k,rx(y.y11,y.x11),rx(y.y01,y.x01),!g))):(s.moveTo(L,I),s.arc(0,0,f,b,_,!g)):s.moveTo(L,I),h>lx&&S>lx?P>lx?(v=bx(N,R,z,B,h,-P,g),y=bx(L,I,F,j,h,-P,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),P<C?s.arc(v.cx,v.cy,P,rx(v.y01,v.x01),rx(y.y01,y.x01),!g):(s.arc(v.cx,v.cy,P,rx(v.y01,v.x01),rx(v.y11,v.x11),!g),s.arc(0,0,h,rx(v.cy+v.y11,v.cx+v.x11),rx(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,P,rx(y.y11,y.x11),rx(y.y01,y.x01),!g))):s.arc(0,0,h,w,x,g):s.lineTo(N,R)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+\"\"||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-cx/2;return[ix(r)*n,sx(r)*n]},u.innerRadius=function(e){return arguments.length?(t=\"function\"==typeof e?e:ex(+e),u):t},u.outerRadius=function(t){return arguments.length?(e=\"function\"==typeof t?t:ex(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n=\"function\"==typeof t?t:ex(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:\"function\"==typeof t?t:ex(+t),u):r},u.startAngle=function(t){return arguments.length?(i=\"function\"==typeof t?t:ex(+t),u):i},u.endAngle=function(t){return arguments.length?(a=\"function\"==typeof t?t:ex(+t),u):a},u.padAngle=function(t){return arguments.length?(o=\"function\"==typeof t?t:ex(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function xx(t){this._context=t}xx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var wx=function(t){return new xx(t)};function Sx(t){return t[0]}function Ex(t){return t[1]}var Mx=function(){var t=Sx,e=Ex,n=ex(!0),r=null,i=wx,a=null;function o(o){var s,u,l,c=o.length,h=!1;for(null==r&&(a=i(l=jo())),s=0;s<=c;++s)!(s<c&&n(u=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(u,s,o),+e(u,s,o));if(l)return a=null,l+\"\"||null}return o.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:ex(+e),o):t},o.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:ex(+t),o):e},o.defined=function(t){return arguments.length?(n=\"function\"==typeof t?t:ex(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},Tx=function(){var t=Sx,e=null,n=ex(0),r=Ex,i=ex(!0),a=null,o=wx,s=null;function u(u){var l,c,h,f,d,p=u.length,m=!1,g=new Array(p),v=new Array(p);for(null==a&&(s=o(d=jo())),l=0;l<=p;++l){if(!(l<p&&i(f=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;h>=c;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+t(f,l,u),v[l]=+n(f,l,u),s.point(e?+e(f,l,u):g[l],r?+r(f,l,u):v[l]))}if(d)return s=null,d+\"\"||null}function l(){return Mx().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t=\"function\"==typeof n?n:ex(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t=\"function\"==typeof e?e:ex(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:\"function\"==typeof t?t:ex(+t),u):e},u.y=function(t){return arguments.length?(n=\"function\"==typeof t?t:ex(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n=\"function\"==typeof t?t:ex(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:\"function\"==typeof t?t:ex(+t),u):r},u.lineX0=u.lineY0=function(){return l().x(t).y(n)},u.lineY1=function(){return l().x(t).y(r)},u.lineX1=function(){return l().x(e).y(n)},u.defined=function(t){return arguments.length?(i=\"function\"==typeof t?t:ex(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u},Cx=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Px=function(t){return t},kx=function(){var t=Px,e=Cx,n=null,r=ex(0),i=ex(fx),a=ex(0);function o(o){var s,u,l,c,h,f=o.length,d=0,p=new Array(f),m=new Array(f),g=+r.apply(this,arguments),v=Math.min(fx,Math.max(-fx,i.apply(this,arguments)-g)),y=Math.min(Math.abs(v)/f,a.apply(this,arguments)),b=y*(v<0?-1:1);for(s=0;s<f;++s)(h=m[p[s]=s]=+t(o[s],s,o))>0&&(d+=h);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(o[t],o[e])})),s=0,l=d?(v-f*b)/d:0;s<f;++s,g=c)u=p[s],c=g+((h=m[u])>0?h*l:0)+b,m[u]={data:o[u],index:s,value:h,startAngle:g,endAngle:c,padAngle:y};return m}return o.value=function(e){return arguments.length?(t=\"function\"==typeof e?e:ex(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r=\"function\"==typeof t?t:ex(+t),o):r},o.endAngle=function(t){return arguments.length?(i=\"function\"==typeof t?t:ex(+t),o):i},o.padAngle=function(t){return arguments.length?(a=\"function\"==typeof t?t:ex(+t),o):a},o},Ax=Lx(wx);function Ox(t){this._curve=t}function Lx(t){function e(e){return new Ox(t(e))}return e._curve=t,e}function Ix(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Lx(t)):e()._curve},t}Ox.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Nx=function(){return Ix(Mx().curve(Ax))},Rx=function(){var t=Tx().curve(Ax),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Ix(n())},delete t.lineX0,t.lineEndAngle=function(){return Ix(r())},delete t.lineX1,t.lineInnerRadius=function(){return Ix(i())},delete t.lineY0,t.lineOuterRadius=function(){return Ix(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Lx(t)):e()._curve},t},Dx=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},zx=Array.prototype.slice;function Bx(t){return t.source}function Fx(t){return t.target}function jx(t){var e=Bx,n=Fx,r=Sx,i=Ex,a=null;function o(){var o,s=zx.call(arguments),u=e.apply(this,s),l=n.apply(this,s);if(a||(a=o=jo()),t(a,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=l,s)),+i.apply(this,s)),o)return a=null,o+\"\"||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(r=\"function\"==typeof t?t:ex(+t),o):r},o.y=function(t){return arguments.length?(i=\"function\"==typeof t?t:ex(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}function Ux(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Vx(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function Hx(t,e,n,r,i){var a=Dx(e,n),o=Dx(e,n=(n+i)/2),s=Dx(r,n),u=Dx(r,i);t.moveTo(a[0],a[1]),t.bezierCurveTo(o[0],o[1],s[0],s[1],u[0],u[1])}function Gx(){return jx(Ux)}function Wx(){return jx(Vx)}function qx(){var t=jx(Hx);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var Xx={draw:function(t,e){var n=Math.sqrt(e/cx);t.moveTo(n,0),t.arc(0,0,n,0,fx)}},Yx={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Qx=Math.sqrt(1/3),Zx=2*Qx,$x={draw:function(t,e){var n=Math.sqrt(e/Zx),r=n*Qx;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Jx=Math.sin(cx/10)/Math.sin(7*cx/10),Kx=Math.sin(fx/10)*Jx,tw=-Math.cos(fx/10)*Jx,ew={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=Kx*n,i=tw*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=fx*a/5,s=Math.cos(o),u=Math.sin(o);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},nw={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},rw=Math.sqrt(3),iw={draw:function(t,e){var n=-Math.sqrt(e/(3*rw));t.moveTo(0,2*n),t.lineTo(-rw*n,-n),t.lineTo(rw*n,-n),t.closePath()}},aw=Math.sqrt(3)/2,ow=1/Math.sqrt(12),sw=3*(ow/2+1),uw={draw:function(t,e){var n=Math.sqrt(e/sw),r=n/2,i=n*ow,a=r,o=n*ow+n,s=-a,u=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,u),t.lineTo(-.5*r-aw*i,aw*r+-.5*i),t.lineTo(-.5*a-aw*o,aw*a+-.5*o),t.lineTo(-.5*s-aw*u,aw*s+-.5*u),t.lineTo(-.5*r+aw*i,-.5*i-aw*r),t.lineTo(-.5*a+aw*o,-.5*o-aw*a),t.lineTo(-.5*s+aw*u,-.5*u-aw*s),t.closePath()}},lw=[Xx,Yx,$x,nw,ew,iw,uw],cw=function(){var t=ex(Xx),e=ex(64),n=null;function r(){var r;if(n||(n=r=jo()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+\"\"||null}return r.type=function(e){return arguments.length?(t=\"function\"==typeof e?e:ex(e),r):t},r.size=function(t){return arguments.length?(e=\"function\"==typeof t?t:ex(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},hw=function(){};function fw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function dw(t){this._context=t}dw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var pw=function(t){return new dw(t)};function mw(t){this._context=t}mw.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:fw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var gw=function(t){return new mw(t)};function vw(t){this._context=t}vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var yw=function(t){return new vw(t)};function bw(t,e){this._basis=new dw(t),this._beta=e}bw.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*o),this._beta*e[u]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var _w=function t(e){function n(t){return 1===e?new dw(t):new bw(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function xw(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ww(t,e){this._context=t,this._k=(1-e)/6}ww.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:xw(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:xw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Sw=function t(e){function n(t){return new ww(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ew(t,e){this._context=t,this._k=(1-e)/6}Ew.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:xw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Mw=function t(e){function n(t){return new Ew(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Tw(t,e){this._context=t,this._k=(1-e)/6}Tw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cw=function t(e){function n(t){return new Tw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Pw(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>lx){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>lx){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function kw(t,e){this._context=t,this._alpha=e}kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Pw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Aw=function t(e){function n(t){return e?new kw(t,e):new ww(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ow(t,e){this._context=t,this._alpha=e}Ow.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Pw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lw=function t(e){function n(t){return e?new Ow(t,e):new Ew(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Iw(t,e){this._context=t,this._alpha=e}Iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nw=function t(e){function n(t){return e?new Iw(t,e):new Tw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Rw(t){this._context=t}Rw.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Dw=function(t){return new Rw(t)};function zw(t){return t<0?-1:1}function Bw(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(zw(a)+zw(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Fw(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function jw(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Uw(t){this._context=t}function Vw(t){this._context=new Hw(t)}function Hw(t){this._context=t}function Gw(t){return new Uw(t)}function Ww(t){return new Vw(t)}function qw(t){this._context=t}function Xw(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}Uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jw(this,this._t0,Fw(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jw(this,Fw(this,n=Bw(this,t,e)),n);break;default:jw(this,this._t0,n=Bw(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Vw.prototype=Object.create(Uw.prototype)).point=function(t,e){Uw.prototype.point.call(this,e,t)},Hw.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Xw(t),i=Xw(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Yw=function(t){return new qw(t)};function Qw(t,e){this._context=t,this._t=e}Qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Zw=function(t){return new Qw(t,.5)};function $w(t){return new Qw(t,0)}function Jw(t){return new Qw(t,1)}var Kw=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},tS=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function eS(t,e){return t[e]}var nS=function(){var t=ex([]),e=tS,n=Kw,r=eS;function i(i){var a,o,s=t.apply(this,arguments),u=i.length,l=s.length,c=new Array(l);for(a=0;a<l;++a){for(var h,f=s[a],d=c[a]=new Array(u),p=0;p<u;++p)d[p]=h=[0,+r(i[p],f,p,i)],h.data=i[p];d.key=f}for(a=0,o=e(c);a<l;++a)c[o[a]].index=a;return n(c,o),c}return i.keys=function(e){return arguments.length?(t=\"function\"==typeof e?e:ex(zx.call(e)),i):t},i.value=function(t){return arguments.length?(r=\"function\"==typeof t?t:ex(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?tS:\"function\"==typeof t?t:ex(zx.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Kw:t,i):n},i},rS=function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}Kw(t,e)}},iS=function(t,e){if((s=t.length)>0)for(var n,r,i,a,o,s,u=0,l=t[e[0]].length;u<l;++u)for(a=o=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>=0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):r[0]=a},aS=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=t[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}Kw(t,e)}},oS=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],h=c[o][1]||0,f=(h-(c[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}u+=h,l+=f*h}n[o-1][1]+=n[o-1][0]=a,u&&(a-=l/u)}n[o-1][1]+=n[o-1][0]=a,Kw(t,e)}},sS=function(t){var e=t.map(uS);return tS(t).sort((function(t,n){return e[t]-e[n]}))};function uS(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}var lS=function(t){var e=t.map(cS);return tS(t).sort((function(t,n){return e[t]-e[n]}))};function cS(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var hS=function(t){return lS(t).reverse()},fS=function(t){var e,n,r=t.length,i=t.map(cS),a=sS(t),o=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=a[e],o<s?(o+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},dS=function(t){return tS(t).reverse()},pS=function(t){return function(){return t}};function mS(t){return t[0]}function gS(t){return t[1]}function vS(){this._=null}function yS(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function bS(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function _S(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function xS(t){for(;t.L;)t=t.L;return t}vS.prototype={constructor:vS,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=xS(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(bS(this,n),n=(t=n).U),n.C=!1,r.C=!0,_S(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(_S(this,n),n=(t=n).U),n.C=!1,r.C=!0,bS(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?xS(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,bS(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,_S(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,bS(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,_S(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,bS(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,_S(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var wS=vS;function SS(t,e,n,r){var i=[null,null],a=XS.push(i)-1;return i.left=t,i.right=e,n&&MS(i,t,e,n),r&&MS(i,e,t,r),WS[t.index].halfedges.push(a),WS[e.index].halfedges.push(a),i}function ES(t,e,n){var r=[e,n];return r.left=t,r}function MS(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function TS(t,e,n,r,i){var a,o=t[0],s=t[1],u=o[0],l=o[1],c=0,h=1,f=s[0]-u,d=s[1]-l;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>c&&(c=a)}if(a=r-u,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<h&&(h=a)}if(a=n-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>c&&(c=a)}if(a=i-l,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<h&&(h=a)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*d]),h<1&&(t[1]=[u+h*f,l+h*d]),!0)}}}}}function CS(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],d=c[0],p=c[1],m=(h+d)/2,g=(f+p)/2;if(p===f){if(m<e||m>=r)return;if(h>d){if(u){if(u[1]>=i)return}else u=[m,n];a=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];a=[m,n]}}else if(s=g-(o=(h-d)/(p-f))*m,o<-1||o>1)if(h>d){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,o*e+s];a=[r,o*r+s]}else{if(u){if(u[0]<e)return}else u=[r,o*r+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}function PS(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function kS(t,e){return e[+(e.left!==t.site)]}function AS(t,e){return e[+(e.left===t.site)]}var OS,LS=[];function IS(){yS(this),this.x=this.y=this.arc=this.site=this.cy=null}function NS(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],u=r[0]-o,l=r[1]-s,c=a[0]-o,h=a[1]-s,f=2*(u*h-l*c);if(!(f>=-QS)){var d=u*u+l*l,p=c*c+h*h,m=(h*d-l*p)/f,g=(u*p-c*d)/f,v=LS.pop()||new IS;v.arc=t,v.site=i,v.x=m+o,v.y=(v.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=v;for(var y=null,b=qS._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}qS.insert(y,v),y||(OS=v)}}}}function RS(t){var e=t.circle;e&&(e.P||(OS=e.N),qS.remove(e),LS.push(e),yS(e),t.circle=null)}var DS=[];function zS(){yS(this),this.edge=this.site=this.circle=null}function BS(t){var e=DS.pop()||new zS;return e.site=t,e}function FS(t){RS(t),GS.remove(t),DS.push(t),yS(t)}function jS(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];FS(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<YS&&Math.abs(r-u.circle.cy)<YS;)a=u.P,s.unshift(u),FS(u),u=a;s.unshift(u),RS(u);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<YS&&Math.abs(r-l.circle.cy)<YS;)o=l.N,s.push(l),FS(l),l=o;s.push(l),RS(l);var c,h=s.length;for(c=1;c<h;++c)l=s[c],u=s[c-1],MS(l.edge,u.site,l.site,i);u=s[0],(l=s[h-1]).edge=SS(u.site,l.site,null,i),NS(u),NS(l)}function US(t){for(var e,n,r,i,a=t[0],o=t[1],s=GS._;s;)if((r=VS(s,o)-a)>YS)s=s.L;else{if(!((i=a-HS(s,o))>YS)){r>-YS?(e=s.P,n=s):i>-YS?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){WS[t.index]={site:t,halfedges:[]}}(t);var u=BS(t);if(GS.insert(e,u),e||n){if(e===n)return RS(e),n=BS(e.site),GS.insert(u,n),u.edge=n.edge=SS(e.site,u.site),NS(e),void NS(n);if(n){RS(e),RS(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,d=t[1]-h,p=n.site,m=p[0]-c,g=p[1]-h,v=2*(f*g-d*m),y=f*f+d*d,b=m*m+g*g,_=[(g*y-d*b)/v+c,(f*b-m*y)/v+h];MS(n.edge,l,p,_),u.edge=SS(l,t,null,_),n.edge=SS(t,p,null,_),NS(e),NS(n)}else u.edge=SS(e.site,u.site)}}function VS(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,h=1/a-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-a/2)))/h+r:(r+s)/2}function HS(t,e){var n=t.N;if(n)return VS(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var GS,WS,qS,XS,YS=1e-6,QS=1e-12;function ZS(t,e){return e[1]-t[1]||e[0]-t[0]}function $S(t,e){var n,r,i,a=t.sort(ZS).pop();for(XS=[],WS=new Array(t.length),GS=new wS,qS=new wS;;)if(i=OS,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(US(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;jS(i.arc)}if(function(){for(var t,e,n,r,i=0,a=WS.length;i<a;++i)if((t=WS[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=PS(t,XS[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,a=XS.length;a--;)CS(i=XS[a],t,e,n,r)&&TS(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>YS||Math.abs(i[0][1]-i[1][1])>YS)||delete XS[a]}(o,s,u,l),function(t,e,n,r){var i,a,o,s,u,l,c,h,f,d,p,m,g=WS.length,v=!0;for(i=0;i<g;++i)if(a=WS[i]){for(o=a.site,s=(u=a.halfedges).length;s--;)XS[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)p=(d=AS(a,XS[u[s]]))[0],m=d[1],h=(c=kS(a,XS[u[++s%l]]))[0],f=c[1],(Math.abs(p-h)>YS||Math.abs(m-f)>YS)&&(u.splice(s,0,XS.push(ES(o,d,Math.abs(p-t)<YS&&r-m>YS?[t,Math.abs(h-t)<YS?f:r]:Math.abs(m-r)<YS&&n-p>YS?[Math.abs(f-r)<YS?h:n,r]:Math.abs(p-n)<YS&&m-e>YS?[n,Math.abs(h-n)<YS?f:e]:Math.abs(m-e)<YS&&p-t>YS?[Math.abs(f-e)<YS?h:t,e]:null))-1),++l);l&&(v=!1)}if(v){var y,b,_,x=1/0;for(i=0,v=null;i<g;++i)(a=WS[i])&&(_=(y=(o=a.site)[0]-t)*y+(b=o[1]-e)*b)<x&&(x=_,v=a);if(v){var w=[t,e],S=[t,r],E=[n,r],M=[n,e];v.halfedges.push(XS.push(ES(o=v.site,w,S))-1,XS.push(ES(o,S,E))-1,XS.push(ES(o,E,M))-1,XS.push(ES(o,M,w))-1)}}for(i=0;i<g;++i)(a=WS[i])&&(a.halfedges.length||delete WS[i])}(o,s,u,l)}this.edges=XS,this.cells=WS,GS=qS=XS=WS=null}$S.prototype={constructor:$S,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return kS(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,u,l,c=n.site,h=-1,f=e[i[a-1]],d=f.left===c?f.right:f.left;++h<a;)o=d,d=(f=e[i[h]]).left===c?f.right:f.left,o&&d&&r<o.index&&r<d.index&&(u=o,l=d,((s=c)[0]-l[0])*(u[1]-s[1])-(s[0]-u[0])*(l[1]-s[1])<0)&&t.push([c.data,o.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],h=u*u+l*l;h<c&&(c=h,o=s.index)}}))}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}};var JS=function(){var t=mS,e=gS,n=null;function r(r){return new $S(r.map((function(n,i){var a=[Math.round(t(n,i,r)/YS)*YS,Math.round(e(n,i,r)/YS)*YS];return a.index=i,a.data=n,a})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:pS(+e),r):t},r.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:pS(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},KS=function(t){return function(){return t}};function tE(t,e,n){this.target=t,this.type=e,this.transform=n}function eE(t,e,n){this.k=t,this.x=e,this.y=n}eE.prototype={constructor:eE,scale:function(t){return 1===t?this:new eE(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new eE(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return\"translate(\"+this.x+\",\"+this.y+\") scale(\"+this.k+\")\"}};var nE=new eE(1,0,0);function rE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return nE;return t.__zoom}function iE(){pe.stopImmediatePropagation()}rE.prototype=eE.prototype;var aE=function(){pe.preventDefault(),pe.stopImmediatePropagation()};function oE(){return!pe.ctrlKey&&!pe.button}function sE(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute(\"viewBox\")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function uE(){return this.__zoom||nE}function lE(){return-pe.deltaY*(1===pe.deltaMode?.05:pe.deltaMode?1:.002)}function cE(){return navigator.maxTouchPoints||\"ontouchstart\"in this}function hE(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var fE=function(){var t,e,n=oE,r=sE,i=hE,a=lE,o=cE,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Fr,h=mt(\"start\",\"zoom\",\"end\"),f=500,d=150,p=0;function m(t){t.property(\"__zoom\",uE).on(\"wheel.zoom\",w).on(\"mousedown.zoom\",S).on(\"dblclick.zoom\",E).filter(o).on(\"touchstart.zoom\",M).on(\"touchmove.zoom\",T).on(\"touchend.zoom touchcancel.zoom\",C).style(\"touch-action\",\"none\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}function g(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new eE(e,t.x,t.y)}function v(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new eE(t.k,r,i)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n){t.on(\"start.zoom\",(function(){_(this,arguments).start()})).on(\"interrupt.zoom end.zoom\",(function(){_(this,arguments).end()})).tween(\"zoom\",(function(){var t=this,i=arguments,a=_(t,i),o=r.apply(t,i),s=null==n?y(o):\"function\"==typeof n?n.apply(t,i):n,u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=t.__zoom,h=\"function\"==typeof e?e.apply(t,i):e,f=c(l.invert(s).concat(u/l.k),h.invert(s).concat(u/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=u/e[2];t=new eE(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function _(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function w(){if(n.apply(this,arguments)){var t=_(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,a.apply(this,arguments)))),o=Re(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[o,e.invert(o)],Li(this),t.start()}aE(),t.wheel=setTimeout((function(){t.wheel=null,t.end()}),d),t.zoom(\"mouse\",i(v(g(e,r),t.mouse[0],t.mouse[1]),t.extent,u))}}function S(){if(!e&&n.apply(this,arguments)){var t=_(this,arguments,!0),r=Pe(pe.view).on(\"mousemove.zoom\",(function(){if(aE(),!t.moved){var e=pe.clientX-o,n=pe.clientY-s;t.moved=e*e+n*n>p}t.zoom(\"mouse\",i(v(t.that.__zoom,t.mouse[0]=Re(t.that),t.mouse[1]),t.extent,u))}),!0).on(\"mouseup.zoom\",(function(){r.on(\"mousemove.zoom mouseup.zoom\",null),Ve(pe.view,t.moved),aE(),t.end()}),!0),a=Re(this),o=pe.clientX,s=pe.clientY;Ue(pe.view),iE(),t.mouse=[a,this.__zoom.invert(a)],Li(this),t.start()}}function E(){if(n.apply(this,arguments)){var t=this.__zoom,e=Re(this),a=t.invert(e),o=t.k*(pe.shiftKey?.5:2),s=i(v(g(t,o),e,a),r.apply(this,arguments),u);aE(),l>0?Pe(this).transition().duration(l).call(b,s,e):Pe(this).call(m.transform,s)}}function M(){if(n.apply(this,arguments)){var e,r,i,a,o=pe.touches,s=o.length,u=_(this,arguments,pe.changedTouches.length===s);for(iE(),r=0;r<s;++r)i=o[r],a=[a=ze(this,o,i.identifier),this.__zoom.invert(a),i.identifier],u.touch0?u.touch1||u.touch0[2]===a[2]||(u.touch1=a,u.taps=0):(u.touch0=a,e=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(u.taps<2&&(t=setTimeout((function(){t=null}),f)),Li(this),u.start())}}function T(){if(this.__zooming){var e,n,r,a,o=_(this,arguments),s=pe.changedTouches,l=s.length;for(aE(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<l;++e)n=s[e],r=ze(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=r);if(n=o.that.__zoom,o.touch1){var c=o.touch0[0],h=o.touch0[1],f=o.touch1[0],d=o.touch1[1],p=(p=f[0]-c[0])*p+(p=f[1]-c[1])*p,m=(m=d[0]-h[0])*m+(m=d[1]-h[1])*m;n=g(n,Math.sqrt(p/m)),r=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(h[0]+d[0])/2,(h[1]+d[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom(\"touch\",i(v(n,r,a),o.extent,u))}}function C(){if(this.__zooming){var t,n,r=_(this,arguments),i=pe.changedTouches,a=i.length;for(iE(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),f),t=0;t<a;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var o=Pe(this).on(\"dblclick.zoom\");o&&o.apply(this,arguments)}}}return m.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property(\"__zoom\",uE),t!==r?b(t,e,n):r.interrupt().each((function(){_(this,arguments).start().zoom(null,\"function\"==typeof e?e.apply(this,arguments):e).end()}))},m.scaleBy=function(t,e,n){m.scaleTo(t,(function(){var t=this.__zoom.k,n=\"function\"==typeof e?e.apply(this,arguments):e;return t*n}),n)},m.scaleTo=function(t,e,n){m.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,o=null==n?y(t):\"function\"==typeof n?n.apply(this,arguments):n,s=a.invert(o),l=\"function\"==typeof e?e.apply(this,arguments):e;return i(v(g(a,l),o,s),t,u)}),n)},m.translateBy=function(t,e,n){m.transform(t,(function(){return i(this.__zoom.translate(\"function\"==typeof e?e.apply(this,arguments):e,\"function\"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},m.translateTo=function(t,e,n,a){m.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,s=null==a?y(t):\"function\"==typeof a?a.apply(this,arguments):a;return i(nE.translate(s[0],s[1]).scale(o.k).translate(\"function\"==typeof e?-e.apply(this,arguments):-e,\"function\"==typeof n?-n.apply(this,arguments):-n),t,u)}),a)},x.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit(\"start\")),this},zoom:function(t,e){return this.mouse&&\"mouse\"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&\"touch\"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&\"touch\"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit(\"zoom\"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit(\"end\")),this},emit:function(t){_e(new tE(m,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},m.wheelDelta=function(t){return arguments.length?(a=\"function\"==typeof t?t:KS(+t),m):a},m.filter=function(t){return arguments.length?(n=\"function\"==typeof t?t:KS(!!t),m):n},m.touchable=function(t){return arguments.length?(o=\"function\"==typeof t?t:KS(!!t),m):o},m.extent=function(t){return arguments.length?(r=\"function\"==typeof t?t:KS([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):r},m.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],m):[s[0],s[1]]},m.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(t){return arguments.length?(i=t,m):i},m.duration=function(t){return arguments.length?(l=+t,m):l},m.interpolate=function(t){return arguments.length?(c=t,m):c},m.on=function(){var t=h.on.apply(h,arguments);return t===h?m:t},m.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,m):Math.sqrt(p)},m};n.d(e,\"version\",(function(){return\"5.12.0\"})),n.d(e,\"bisect\",(function(){return u})),n.d(e,\"bisectRight\",(function(){return o})),n.d(e,\"bisectLeft\",(function(){return s})),n.d(e,\"ascending\",(function(){return r})),n.d(e,\"bisector\",(function(){return i})),n.d(e,\"cross\",(function(){return h})),n.d(e,\"descending\",(function(){return f})),n.d(e,\"deviation\",(function(){return m})),n.d(e,\"extent\",(function(){return g})),n.d(e,\"histogram\",(function(){return A})),n.d(e,\"thresholdFreedmanDiaconis\",(function(){return L})),n.d(e,\"thresholdScott\",(function(){return I})),n.d(e,\"thresholdSturges\",(function(){return k})),n.d(e,\"max\",(function(){return N})),n.d(e,\"mean\",(function(){return R})),n.d(e,\"median\",(function(){return D})),n.d(e,\"merge\",(function(){return z})),n.d(e,\"min\",(function(){return B})),n.d(e,\"pairs\",(function(){return l})),n.d(e,\"permute\",(function(){return F})),n.d(e,\"quantile\",(function(){return O})),n.d(e,\"range\",(function(){return w})),n.d(e,\"scan\",(function(){return j})),n.d(e,\"shuffle\",(function(){return U})),n.d(e,\"sum\",(function(){return V})),n.d(e,\"ticks\",(function(){return T})),n.d(e,\"tickIncrement\",(function(){return C})),n.d(e,\"tickStep\",(function(){return P})),n.d(e,\"transpose\",(function(){return H})),n.d(e,\"variance\",(function(){return p})),n.d(e,\"zip\",(function(){return W})),n.d(e,\"axisTop\",(function(){return at})),n.d(e,\"axisRight\",(function(){return ot})),n.d(e,\"axisBottom\",(function(){return st})),n.d(e,\"axisLeft\",(function(){return ut})),n.d(e,\"brush\",(function(){return So})),n.d(e,\"brushX\",(function(){return xo})),n.d(e,\"brushY\",(function(){return wo})),n.d(e,\"brushSelection\",(function(){return _o})),n.d(e,\"chord\",(function(){return Lo})),n.d(e,\"ribbon\",(function(){return qo})),n.d(e,\"nest\",(function(){return Zo})),n.d(e,\"set\",(function(){return is})),n.d(e,\"map\",(function(){return Qo})),n.d(e,\"keys\",(function(){return as})),n.d(e,\"values\",(function(){return os})),n.d(e,\"entries\",(function(){return ss})),n.d(e,\"color\",(function(){return pn})),n.d(e,\"rgb\",(function(){return yn})),n.d(e,\"hsl\",(function(){return Mn})),n.d(e,\"lab\",(function(){return Fn})),n.d(e,\"hcl\",(function(){return Xn})),n.d(e,\"lch\",(function(){return qn})),n.d(e,\"gray\",(function(){return Bn})),n.d(e,\"cubehelix\",(function(){return nr})),n.d(e,\"contours\",(function(){return vs})),n.d(e,\"contourDensity\",(function(){return Ss})),n.d(e,\"dispatch\",(function(){return mt})),n.d(e,\"drag\",(function(){return Qe})),n.d(e,\"dragDisable\",(function(){return Ue})),n.d(e,\"dragEnable\",(function(){return Ve})),n.d(e,\"dsvFormat\",(function(){return Is})),n.d(e,\"csvParse\",(function(){return Rs})),n.d(e,\"csvParseRows\",(function(){return Ds})),n.d(e,\"csvFormat\",(function(){return zs})),n.d(e,\"csvFormatBody\",(function(){return Bs})),n.d(e,\"csvFormatRows\",(function(){return Fs})),n.d(e,\"tsvParse\",(function(){return Us})),n.d(e,\"tsvParseRows\",(function(){return Vs})),n.d(e,\"tsvFormat\",(function(){return Hs})),n.d(e,\"tsvFormatBody\",(function(){return Gs})),n.d(e,\"tsvFormatRows\",(function(){return Ws})),n.d(e,\"autoType\",(function(){return qs})),n.d(e,\"easeLinear\",(function(){return aa})),n.d(e,\"easeQuad\",(function(){return ua})),n.d(e,\"easeQuadIn\",(function(){return oa})),n.d(e,\"easeQuadOut\",(function(){return sa})),n.d(e,\"easeQuadInOut\",(function(){return ua})),n.d(e,\"easeCubic\",(function(){return ha})),n.d(e,\"easeCubicIn\",(function(){return la})),n.d(e,\"easeCubicOut\",(function(){return ca})),n.d(e,\"easeCubicInOut\",(function(){return ha})),n.d(e,\"easePoly\",(function(){return pa})),n.d(e,\"easePolyIn\",(function(){return fa})),n.d(e,\"easePolyOut\",(function(){return da})),n.d(e,\"easePolyInOut\",(function(){return pa})),n.d(e,\"easeSin\",(function(){return ba})),n.d(e,\"easeSinIn\",(function(){return va})),n.d(e,\"easeSinOut\",(function(){return ya})),n.d(e,\"easeSinInOut\",(function(){return ba})),n.d(e,\"easeExp\",(function(){return wa})),n.d(e,\"easeExpIn\",(function(){return _a})),n.d(e,\"easeExpOut\",(function(){return xa})),n.d(e,\"easeExpInOut\",(function(){return wa})),n.d(e,\"easeCircle\",(function(){return Ma})),n.d(e,\"easeCircleIn\",(function(){return Sa})),n.d(e,\"easeCircleOut\",(function(){return Ea})),n.d(e,\"easeCircleInOut\",(function(){return Ma})),n.d(e,\"easeBounce\",(function(){return za})),n.d(e,\"easeBounceIn\",(function(){return Da})),n.d(e,\"easeBounceOut\",(function(){return za})),n.d(e,\"easeBounceInOut\",(function(){return Ba})),n.d(e,\"easeBack\",(function(){return Ua})),n.d(e,\"easeBackIn\",(function(){return Fa})),n.d(e,\"easeBackOut\",(function(){return ja})),n.d(e,\"easeBackInOut\",(function(){return Ua})),n.d(e,\"easeElastic\",(function(){return Ga})),n.d(e,\"easeElasticIn\",(function(){return Ha})),n.d(e,\"easeElasticOut\",(function(){return Ga})),n.d(e,\"easeElasticInOut\",(function(){return Wa})),n.d(e,\"blob\",(function(){return Ys})),n.d(e,\"buffer\",(function(){return Zs})),n.d(e,\"dsv\",(function(){return tu})),n.d(e,\"csv\",(function(){return eu})),n.d(e,\"tsv\",(function(){return nu})),n.d(e,\"image\",(function(){return ru})),n.d(e,\"json\",(function(){return au})),n.d(e,\"text\",(function(){return Js})),n.d(e,\"xml\",(function(){return su})),n.d(e,\"html\",(function(){return uu})),n.d(e,\"svg\",(function(){return lu})),n.d(e,\"forceCenter\",(function(){return cu})),n.d(e,\"forceCollide\",(function(){return Su})),n.d(e,\"forceLink\",(function(){return Tu})),n.d(e,\"forceManyBody\",(function(){return Lu})),n.d(e,\"forceRadial\",(function(){return Iu})),n.d(e,\"forceSimulation\",(function(){return Ou})),n.d(e,\"forceX\",(function(){return Nu})),n.d(e,\"forceY\",(function(){return Ru})),n.d(e,\"formatDefaultLocale\",(function(){return Ju})),n.d(e,\"format\",(function(){return Hu})),n.d(e,\"formatPrefix\",(function(){return Gu})),n.d(e,\"formatLocale\",(function(){return $u})),n.d(e,\"formatSpecifier\",(function(){return Fu})),n.d(e,\"FormatSpecifier\",(function(){return ju})),n.d(e,\"precisionFixed\",(function(){return Ku})),n.d(e,\"precisionPrefix\",(function(){return tl})),n.d(e,\"precisionRound\",(function(){return el})),n.d(e,\"geoArea\",(function(){return Yl})),n.d(e,\"geoBounds\",(function(){return jc})),n.d(e,\"geoCentroid\",(function(){return Jc})),n.d(e,\"geoCircle\",(function(){return lh})),n.d(e,\"geoClipAntimeridian\",(function(){return xh})),n.d(e,\"geoClipCircle\",(function(){return wh})),n.d(e,\"geoClipExtent\",(function(){return Ah})),n.d(e,\"geoClipRectangle\",(function(){return Th})),n.d(e,\"geoContains\",(function(){return Yh})),n.d(e,\"geoDistance\",(function(){return Fh})),n.d(e,\"geoGraticule\",(function(){return $h})),n.d(e,\"geoGraticule10\",(function(){return Jh})),n.d(e,\"geoInterpolate\",(function(){return rf})),n.d(e,\"geoLength\",(function(){return Dh})),n.d(e,\"geoPath\",(function(){return nd})),n.d(e,\"geoAlbers\",(function(){return wd})),n.d(e,\"geoAlbersUsa\",(function(){return Sd})),n.d(e,\"geoAzimuthalEqualArea\",(function(){return Cd})),n.d(e,\"geoAzimuthalEqualAreaRaw\",(function(){return Td})),n.d(e,\"geoAzimuthalEquidistant\",(function(){return kd})),n.d(e,\"geoAzimuthalEquidistantRaw\",(function(){return Pd})),n.d(e,\"geoConicConformal\",(function(){return Rd})),n.d(e,\"geoConicConformalRaw\",(function(){return Nd})),n.d(e,\"geoConicEqualArea\",(function(){return xd})),n.d(e,\"geoConicEqualAreaRaw\",(function(){return _d})),n.d(e,\"geoConicEquidistant\",(function(){return Fd})),n.d(e,\"geoConicEquidistantRaw\",(function(){return Bd})),n.d(e,\"geoEqualEarth\",(function(){return qd})),n.d(e,\"geoEqualEarthRaw\",(function(){return Wd})),n.d(e,\"geoEquirectangular\",(function(){return zd})),n.d(e,\"geoEquirectangularRaw\",(function(){return Dd})),n.d(e,\"geoGnomonic\",(function(){return Yd})),n.d(e,\"geoGnomonicRaw\",(function(){return Xd})),n.d(e,\"geoIdentity\",(function(){return Zd})),n.d(e,\"geoProjection\",(function(){return vd})),n.d(e,\"geoProjectionMutator\",(function(){return yd})),n.d(e,\"geoMercator\",(function(){return Od})),n.d(e,\"geoMercatorRaw\",(function(){return Ad})),n.d(e,\"geoNaturalEarth1\",(function(){return Jd})),n.d(e,\"geoNaturalEarth1Raw\",(function(){return $d})),n.d(e,\"geoOrthographic\",(function(){return tp})),n.d(e,\"geoOrthographicRaw\",(function(){return Kd})),n.d(e,\"geoStereographic\",(function(){return np})),n.d(e,\"geoStereographicRaw\",(function(){return ep})),n.d(e,\"geoTransverseMercator\",(function(){return ip})),n.d(e,\"geoTransverseMercatorRaw\",(function(){return rp})),n.d(e,\"geoRotation\",(function(){return oh})),n.d(e,\"geoStream\",(function(){return jl})),n.d(e,\"geoTransform\",(function(){return rd})),n.d(e,\"cluster\",(function(){return up})),n.d(e,\"hierarchy\",(function(){return cp})),n.d(e,\"pack\",(function(){return Rp})),n.d(e,\"packSiblings\",(function(){return kp})),n.d(e,\"packEnclose\",(function(){return gp})),n.d(e,\"partition\",(function(){return Up})),n.d(e,\"stratify\",(function(){return Xp})),n.d(e,\"tree\",(function(){return tm})),n.d(e,\"treemap\",(function(){return am})),n.d(e,\"treemapBinary\",(function(){return om})),n.d(e,\"treemapDice\",(function(){return jp})),n.d(e,\"treemapSlice\",(function(){return em})),n.d(e,\"treemapSliceDice\",(function(){return sm})),n.d(e,\"treemapSquarify\",(function(){return im})),n.d(e,\"treemapResquarify\",(function(){return um})),n.d(e,\"interpolate\",(function(){return Cr})),n.d(e,\"interpolateArray\",(function(){return gr})),n.d(e,\"interpolateBasis\",(function(){return ar})),n.d(e,\"interpolateBasisClosed\",(function(){return or})),n.d(e,\"interpolateDate\",(function(){return vr})),n.d(e,\"interpolateDiscrete\",(function(){return Pr})),n.d(e,\"interpolateHue\",(function(){return kr})),n.d(e,\"interpolateNumber\",(function(){return yr})),n.d(e,\"interpolateObject\",(function(){return br})),n.d(e,\"interpolateRound\",(function(){return Ar})),n.d(e,\"interpolateString\",(function(){return Tr})),n.d(e,\"interpolateTransformCss\",(function(){return Rr})),n.d(e,\"interpolateTransformSvg\",(function(){return Dr})),n.d(e,\"interpolateZoom\",(function(){return Fr})),n.d(e,\"interpolateRgb\",(function(){return fr})),n.d(e,\"interpolateRgbBasis\",(function(){return pr})),n.d(e,\"interpolateRgbBasisClosed\",(function(){return mr})),n.d(e,\"interpolateHsl\",(function(){return Ur})),n.d(e,\"interpolateHslLong\",(function(){return Vr})),n.d(e,\"interpolateLab\",(function(){return Hr})),n.d(e,\"interpolateHcl\",(function(){return Wr})),n.d(e,\"interpolateHclLong\",(function(){return qr})),n.d(e,\"interpolateCubehelix\",(function(){return Yr})),n.d(e,\"interpolateCubehelixLong\",(function(){return Qr})),n.d(e,\"piecewise\",(function(){return Zr})),n.d(e,\"quantize\",(function(){return Kr})),n.d(e,\"path\",(function(){return jo})),n.d(e,\"polygonArea\",(function(){return lm})),n.d(e,\"polygonCentroid\",(function(){return cm})),n.d(e,\"polygonHull\",(function(){return pm})),n.d(e,\"polygonContains\",(function(){return mm})),n.d(e,\"polygonLength\",(function(){return gm})),n.d(e,\"quadtree\",(function(){return vu})),n.d(e,\"randomUniform\",(function(){return ym})),n.d(e,\"randomNormal\",(function(){return bm})),n.d(e,\"randomLogNormal\",(function(){return _m})),n.d(e,\"randomBates\",(function(){return wm})),n.d(e,\"randomIrwinHall\",(function(){return xm})),n.d(e,\"randomExponential\",(function(){return Sm})),n.d(e,\"scaleBand\",(function(){return Om})),n.d(e,\"scalePoint\",(function(){return Lm})),n.d(e,\"scaleIdentity\",(function(){return Xm})),n.d(e,\"scaleLinear\",(function(){return qm})),n.d(e,\"scaleLog\",(function(){return ng})),n.d(e,\"scaleSymlog\",(function(){return og})),n.d(e,\"scaleOrdinal\",(function(){return Am})),n.d(e,\"scaleImplicit\",(function(){return km})),n.d(e,\"scalePow\",(function(){return hg})),n.d(e,\"scaleSqrt\",(function(){return fg})),n.d(e,\"scaleQuantile\",(function(){return dg})),n.d(e,\"scaleQuantize\",(function(){return pg})),n.d(e,\"scaleThreshold\",(function(){return mg})),n.d(e,\"scaleTime\",(function(){return hb})),n.d(e,\"scaleUtc\",(function(){return fb})),n.d(e,\"scaleSequential\",(function(){return mb})),n.d(e,\"scaleSequentialLog\",(function(){return gb})),n.d(e,\"scaleSequentialPow\",(function(){return yb})),n.d(e,\"scaleSequentialSqrt\",(function(){return bb})),n.d(e,\"scaleSequentialSymlog\",(function(){return vb})),n.d(e,\"scaleSequentialQuantile\",(function(){return _b})),n.d(e,\"scaleDiverging\",(function(){return wb})),n.d(e,\"scaleDivergingLog\",(function(){return Sb})),n.d(e,\"scaleDivergingPow\",(function(){return Mb})),n.d(e,\"scaleDivergingSqrt\",(function(){return Tb})),n.d(e,\"scaleDivergingSymlog\",(function(){return Eb})),n.d(e,\"tickFormat\",(function(){return Gm})),n.d(e,\"schemeCategory10\",(function(){return Pb})),n.d(e,\"schemeAccent\",(function(){return kb})),n.d(e,\"schemeDark2\",(function(){return Ab})),n.d(e,\"schemePaired\",(function(){return Ob})),n.d(e,\"schemePastel1\",(function(){return Lb})),n.d(e,\"schemePastel2\",(function(){return Ib})),n.d(e,\"schemeSet1\",(function(){return Nb})),n.d(e,\"schemeSet2\",(function(){return Rb})),n.d(e,\"schemeSet3\",(function(){return Db})),n.d(e,\"schemeTableau10\",(function(){return zb})),n.d(e,\"interpolateBrBG\",(function(){return jb})),n.d(e,\"schemeBrBG\",(function(){return Fb})),n.d(e,\"interpolatePRGn\",(function(){return Vb})),n.d(e,\"schemePRGn\",(function(){return Ub})),n.d(e,\"interpolatePiYG\",(function(){return Gb})),n.d(e,\"schemePiYG\",(function(){return Hb})),n.d(e,\"interpolatePuOr\",(function(){return qb})),n.d(e,\"schemePuOr\",(function(){return Wb})),n.d(e,\"interpolateRdBu\",(function(){return Yb})),n.d(e,\"schemeRdBu\",(function(){return Xb})),n.d(e,\"interpolateRdGy\",(function(){return Zb})),n.d(e,\"schemeRdGy\",(function(){return Qb})),n.d(e,\"interpolateRdYlBu\",(function(){return Jb})),n.d(e,\"schemeRdYlBu\",(function(){return $b})),n.d(e,\"interpolateRdYlGn\",(function(){return t_})),n.d(e,\"schemeRdYlGn\",(function(){return Kb})),n.d(e,\"interpolateSpectral\",(function(){return n_})),n.d(e,\"schemeSpectral\",(function(){return e_})),n.d(e,\"interpolateBuGn\",(function(){return i_})),n.d(e,\"schemeBuGn\",(function(){return r_})),n.d(e,\"interpolateBuPu\",(function(){return o_})),n.d(e,\"schemeBuPu\",(function(){return a_})),n.d(e,\"interpolateGnBu\",(function(){return u_})),n.d(e,\"schemeGnBu\",(function(){return s_})),n.d(e,\"interpolateOrRd\",(function(){return c_})),n.d(e,\"schemeOrRd\",(function(){return l_})),n.d(e,\"interpolatePuBuGn\",(function(){return f_})),n.d(e,\"schemePuBuGn\",(function(){return h_})),n.d(e,\"interpolatePuBu\",(function(){return p_})),n.d(e,\"schemePuBu\",(function(){return d_})),n.d(e,\"interpolatePuRd\",(function(){return g_})),n.d(e,\"schemePuRd\",(function(){return m_})),n.d(e,\"interpolateRdPu\",(function(){return y_})),n.d(e,\"schemeRdPu\",(function(){return v_})),n.d(e,\"interpolateYlGnBu\",(function(){return __})),n.d(e,\"schemeYlGnBu\",(function(){return b_})),n.d(e,\"interpolateYlGn\",(function(){return w_})),n.d(e,\"schemeYlGn\",(function(){return x_})),n.d(e,\"interpolateYlOrBr\",(function(){return E_})),n.d(e,\"schemeYlOrBr\",(function(){return S_})),n.d(e,\"interpolateYlOrRd\",(function(){return T_})),n.d(e,\"schemeYlOrRd\",(function(){return M_})),n.d(e,\"interpolateBlues\",(function(){return P_})),n.d(e,\"schemeBlues\",(function(){return C_})),n.d(e,\"interpolateGreens\",(function(){return A_})),n.d(e,\"schemeGreens\",(function(){return k_})),n.d(e,\"interpolateGreys\",(function(){return L_})),n.d(e,\"schemeGreys\",(function(){return O_})),n.d(e,\"interpolatePurples\",(function(){return N_})),n.d(e,\"schemePurples\",(function(){return I_})),n.d(e,\"interpolateReds\",(function(){return D_})),n.d(e,\"schemeReds\",(function(){return R_})),n.d(e,\"interpolateOranges\",(function(){return B_})),n.d(e,\"schemeOranges\",(function(){return z_})),n.d(e,\"interpolateCividis\",(function(){return F_})),n.d(e,\"interpolateCubehelixDefault\",(function(){return j_})),n.d(e,\"interpolateRainbow\",(function(){return G_})),n.d(e,\"interpolateWarm\",(function(){return U_})),n.d(e,\"interpolateCool\",(function(){return V_})),n.d(e,\"interpolateSinebow\",(function(){return Y_})),n.d(e,\"interpolateTurbo\",(function(){return Q_})),n.d(e,\"interpolateViridis\",(function(){return $_})),n.d(e,\"interpolateMagma\",(function(){return J_})),n.d(e,\"interpolateInferno\",(function(){return K_})),n.d(e,\"interpolatePlasma\",(function(){return tx})),n.d(e,\"create\",(function(){return ke})),n.d(e,\"creator\",(function(){return xt})),n.d(e,\"local\",(function(){return Oe})),n.d(e,\"matcher\",(function(){return Tt})),n.d(e,\"mouse\",(function(){return Re})),n.d(e,\"namespace\",(function(){return yt})),n.d(e,\"namespaces\",(function(){return vt})),n.d(e,\"clientPoint\",(function(){return Ne})),n.d(e,\"select\",(function(){return Pe})),n.d(e,\"selectAll\",(function(){return De})),n.d(e,\"selection\",(function(){return Ce})),n.d(e,\"selector\",(function(){return St})),n.d(e,\"selectorAll\",(function(){return Mt})),n.d(e,\"style\",(function(){return Ht})),n.d(e,\"touch\",(function(){return ze})),n.d(e,\"touches\",(function(){return Be})),n.d(e,\"window\",(function(){return Ft})),n.d(e,\"event\",(function(){return pe})),n.d(e,\"customEvent\",(function(){return _e})),n.d(e,\"arc\",(function(){return _x})),n.d(e,\"area\",(function(){return Tx})),n.d(e,\"line\",(function(){return Mx})),n.d(e,\"pie\",(function(){return kx})),n.d(e,\"areaRadial\",(function(){return Rx})),n.d(e,\"radialArea\",(function(){return Rx})),n.d(e,\"lineRadial\",(function(){return Nx})),n.d(e,\"radialLine\",(function(){return Nx})),n.d(e,\"pointRadial\",(function(){return Dx})),n.d(e,\"linkHorizontal\",(function(){return Gx})),n.d(e,\"linkVertical\",(function(){return Wx})),n.d(e,\"linkRadial\",(function(){return qx})),n.d(e,\"symbol\",(function(){return cw})),n.d(e,\"symbols\",(function(){return lw})),n.d(e,\"symbolCircle\",(function(){return Xx})),n.d(e,\"symbolCross\",(function(){return Yx})),n.d(e,\"symbolDiamond\",(function(){return $x})),n.d(e,\"symbolSquare\",(function(){return nw})),n.d(e,\"symbolStar\",(function(){return ew})),n.d(e,\"symbolTriangle\",(function(){return iw})),n.d(e,\"symbolWye\",(function(){return uw})),n.d(e,\"curveBasisClosed\",(function(){return gw})),n.d(e,\"curveBasisOpen\",(function(){return yw})),n.d(e,\"curveBasis\",(function(){return pw})),n.d(e,\"curveBundle\",(function(){return _w})),n.d(e,\"curveCardinalClosed\",(function(){return Mw})),n.d(e,\"curveCardinalOpen\",(function(){return Cw})),n.d(e,\"curveCardinal\",(function(){return Sw})),n.d(e,\"curveCatmullRomClosed\",(function(){return Lw})),n.d(e,\"curveCatmullRomOpen\",(function(){return Nw})),n.d(e,\"curveCatmullRom\",(function(){return Aw})),n.d(e,\"curveLinearClosed\",(function(){return Dw})),n.d(e,\"curveLinear\",(function(){return wx})),n.d(e,\"curveMonotoneX\",(function(){return Gw})),n.d(e,\"curveMonotoneY\",(function(){return Ww})),n.d(e,\"curveNatural\",(function(){return Yw})),n.d(e,\"curveStep\",(function(){return Zw})),n.d(e,\"curveStepAfter\",(function(){return Jw})),n.d(e,\"curveStepBefore\",(function(){return $w})),n.d(e,\"stack\",(function(){return nS})),n.d(e,\"stackOffsetExpand\",(function(){return rS})),n.d(e,\"stackOffsetDiverging\",(function(){return iS})),n.d(e,\"stackOffsetNone\",(function(){return Kw})),n.d(e,\"stackOffsetSilhouette\",(function(){return aS})),n.d(e,\"stackOffsetWiggle\",(function(){return oS})),n.d(e,\"stackOrderAppearance\",(function(){return sS})),n.d(e,\"stackOrderAscending\",(function(){return lS})),n.d(e,\"stackOrderDescending\",(function(){return hS})),n.d(e,\"stackOrderInsideOut\",(function(){return fS})),n.d(e,\"stackOrderNone\",(function(){return tS})),n.d(e,\"stackOrderReverse\",(function(){return dS})),n.d(e,\"timeInterval\",(function(){return yg})),n.d(e,\"timeMillisecond\",(function(){return _g})),n.d(e,\"timeMilliseconds\",(function(){return xg})),n.d(e,\"utcMillisecond\",(function(){return _g})),n.d(e,\"utcMilliseconds\",(function(){return xg})),n.d(e,\"timeSecond\",(function(){return Mg})),n.d(e,\"timeSeconds\",(function(){return Tg})),n.d(e,\"utcSecond\",(function(){return Mg})),n.d(e,\"utcSeconds\",(function(){return Tg})),n.d(e,\"timeMinute\",(function(){return Pg})),n.d(e,\"timeMinutes\",(function(){return kg})),n.d(e,\"timeHour\",(function(){return Og})),n.d(e,\"timeHours\",(function(){return Lg})),n.d(e,\"timeDay\",(function(){return Ng})),n.d(e,\"timeDays\",(function(){return Rg})),n.d(e,\"timeWeek\",(function(){return zg})),n.d(e,\"timeWeeks\",(function(){return Gg})),n.d(e,\"timeSunday\",(function(){return zg})),n.d(e,\"timeSundays\",(function(){return Gg})),n.d(e,\"timeMonday\",(function(){return Bg})),n.d(e,\"timeMondays\",(function(){return Wg})),n.d(e,\"timeTuesday\",(function(){return Fg})),n.d(e,\"timeTuesdays\",(function(){return qg})),n.d(e,\"timeWednesday\",(function(){return jg})),n.d(e,\"timeWednesdays\",(function(){return Xg})),n.d(e,\"timeThursday\",(function(){return Ug})),n.d(e,\"timeThursdays\",(function(){return Yg})),n.d(e,\"timeFriday\",(function(){return Vg})),n.d(e,\"timeFridays\",(function(){return Qg})),n.d(e,\"timeSaturday\",(function(){return Hg})),n.d(e,\"timeSaturdays\",(function(){return Zg})),n.d(e,\"timeMonth\",(function(){return Jg})),n.d(e,\"timeMonths\",(function(){return Kg})),n.d(e,\"timeYear\",(function(){return ev})),n.d(e,\"timeYears\",(function(){return nv})),n.d(e,\"utcMinute\",(function(){return iv})),n.d(e,\"utcMinutes\",(function(){return av})),n.d(e,\"utcHour\",(function(){return sv})),n.d(e,\"utcHours\",(function(){return uv})),n.d(e,\"utcDay\",(function(){return cv})),n.d(e,\"utcDays\",(function(){return hv})),n.d(e,\"utcWeek\",(function(){return dv})),n.d(e,\"utcWeeks\",(function(){return _v})),n.d(e,\"utcSunday\",(function(){return dv})),n.d(e,\"utcSundays\",(function(){return _v})),n.d(e,\"utcMonday\",(function(){return pv})),n.d(e,\"utcMondays\",(function(){return xv})),n.d(e,\"utcTuesday\",(function(){return mv})),n.d(e,\"utcTuesdays\",(function(){return wv})),n.d(e,\"utcWednesday\",(function(){return gv})),n.d(e,\"utcWednesdays\",(function(){return Sv})),n.d(e,\"utcThursday\",(function(){return vv})),n.d(e,\"utcThursdays\",(function(){return Ev})),n.d(e,\"utcFriday\",(function(){return yv})),n.d(e,\"utcFridays\",(function(){return Mv})),n.d(e,\"utcSaturday\",(function(){return bv})),n.d(e,\"utcSaturdays\",(function(){return Tv})),n.d(e,\"utcMonth\",(function(){return Pv})),n.d(e,\"utcMonths\",(function(){return kv})),n.d(e,\"utcYear\",(function(){return Ov})),n.d(e,\"utcYears\",(function(){return Lv})),n.d(e,\"timeFormatDefaultLocale\",(function(){return Jy})),n.d(e,\"timeFormat\",(function(){return Bv})),n.d(e,\"timeParse\",(function(){return Fv})),n.d(e,\"utcFormat\",(function(){return jv})),n.d(e,\"utcParse\",(function(){return Uv})),n.d(e,\"timeFormatLocale\",(function(){return Dv})),n.d(e,\"isoFormat\",(function(){return Ky})),n.d(e,\"isoParse\",(function(){return tb})),n.d(e,\"now\",(function(){return li})),n.d(e,\"timer\",(function(){return fi})),n.d(e,\"timerFlush\",(function(){return di})),n.d(e,\"timeout\",(function(){return vi})),n.d(e,\"interval\",(function(){return yi})),n.d(e,\"transition\",(function(){return na})),n.d(e,\"active\",(function(){return Qa})),n.d(e,\"interrupt\",(function(){return Li})),n.d(e,\"voronoi\",(function(){return JS})),n.d(e,\"zoom\",(function(){return fE})),n.d(e,\"zoomTransform\",(function(){return rE})),n.d(e,\"zoomIdentity\",(function(){return nE}))},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.updateCamera=function(t,e){setTimeout((function(){a.default.dispatch({type:\"UPDATE_CAMERA\",id:t,cameraProp:e})}),1)},e.resetCamera=function(t){a.default.dispatch({type:\"RESET_CAMERA\",id:t})},e.switchCamera=function(t){a.default.dispatch({type:\"SWITCH_CAMERA\",id:t})},e.searchTime=function(t,e){a.default.dispatch({type:\"SEARCH_TIME\",id:t,dst:e})},e.updateChecked=function(t){a.default.dispatch({type:\"UPDATE_CHECKED\",id:t})},e.switchGridDisplay=function(t,e){a.default.dispatch({type:\"SWITCH_GRID\",id:t,state:e})},e.switchLabelDisplay=function(t,e){a.default.dispatch({type:\"SWITCH_LABEL\",id:t,state:e})},e.switchAxisDisplay=function(t,e){a.default.dispatch({type:\"SWITCH_AXIS\",id:t,state:e})},e.switchPlotDisplay=function(t,e){a.default.dispatch({type:\"SWITCH_PLOT\",id:t,state:e})},e.changeBackground=function(t,e){a.default.dispatch({type:\"CHANGE_BACKGROUND\",id:t,color:e})},e.clipTube=function(t,e){a.default.dispatch({type:\"CLIP_TUBE\",id:t,state:e})},e.switchShade=function(t,e){a.default.dispatch({type:\"SWITCH_SHADE\",id:t,state:e})},e.changeFar=function(t,e){a.default.dispatch({type:\"CHANGE_FAR\",id:t,value:e})},e.updateFocus=function(t,e,n){a.default.dispatch({type:\"UPDATE_FOCUS\",id:t,zpos:e,flag:n})},e.updateMinMaxV=function(t,e,n){a.default.dispatch({type:\"UPDATE_MINMAXV\",id:t,min:e,max:n})},e.updateMinMaxH=function(t,e,n){a.default.dispatch({type:\"UPDATE_MINMAXH\",id:t,min:e,max:n})},e.changePlotColor=function(t,e){a.default.dispatch({type:\"CHANGE_PLOTCOLOR\",id:t,color:e})},e.updateTexture=function(t,e){a.default.dispatch({type:\"UPDATE_TEXTURE\",id:t,texture:e})},e.activateViewport=function(t){a.default.dispatch({type:\"ACTIVATE_VIEWPORT\",id:t})},e.timeFitting=function(t){a.default.dispatch({type:\"TIME_FITTING\",dst:t})},e.lockControl=function(t,e){a.default.dispatch({type:\"LOCK_CONTROL\",ids:t,state:e})},e.synchronizeTubes=function(t,e,n,r){a.default.dispatch({type:\"SYNCHRONIZE_TUBES\",id:t,zpos:e,pos:n,deg:r})},e.zoomOutTimeTubes=function(t){a.default.dispatch({type:\"ZOOM_OUT_TIMETUBE\",id:t})},e.resetZoomTimeTubes=function(t){a.default.dispatch({type:\"RESET_ZOOM_TIMETUBES\",id:t})},e.zoomInTimeTubes=function(t){a.default.dispatch({type:\"ZOOM_IN_TIMETUBES\",id:t})},e.updateOpacity=function(t,e){a.default.dispatch({type:\"UPDATE_OPACITY\",id:t,opt:e})},e.uploadTubeAttributes=function(t,e,n,r){a.default.dispatch({type:\"UPLOAD_TUBE_ATTRIBUTES\",id:t,position:e,color:n,indices:r})};var r,i=n(11),a=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){var r=n(47),i=n(43);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){\"use strict\";var r,i=\"object\"==typeof Reflect?Reflect:null,a=i&&\"function\"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&\"function\"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,a,o,s;if(\"function\"!=typeof n)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof n);if(void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit(\"newListener\",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if(\"function\"==typeof o?o=a[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=l(t))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error(\"Possible EventEmitter memory leak detected. \"+o.length+\" \"+String(e)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");u.name=\"MaxListenersExceededWarning\",u.emitter=t,u.type=e,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,t))}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:\"function\"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if(\"function\"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,\"defaultMaxListeners\",{enumerable:!0,get:function(){return u},set:function(t){if(\"number\"!=typeof t||t<0||o(t))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+t+\".\");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if(\"number\"!=typeof t||t<0||o(t))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+t+\".\");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=\"error\"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error(\"Unhandled error.\"+(o?\" (\"+o.message+\")\":\"\"));throw s.context=o,s}var u=i[t];if(void 0===u)return!1;if(\"function\"==typeof u)a(u,this,e);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)a(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){if(\"function\"!=typeof e)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e);return this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if(\"function\"!=typeof e)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,a,o;if(\"function\"!=typeof e)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit(\"removeListener\",t,n.listener||e));else if(\"function\"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit(\"removeListener\",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)\"removeListener\"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return\"function\"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){var r=n(9).Symbol;t.exports=r},function(t,e,n){var r=n(65),i=n(131),a=n(20);t.exports=function(t){return a(t)?r(t):i(t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(84),i=n(53);t.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=a?a(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),o?i(n,l,c):r(n,l,c)}return n}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.updateSource=function(t){a.default.dispatch({type:\"UPDATE_SOURCE\",id:t})},e.updateTarget=function(t){a.default.dispatch({type:\"UPDATE_TARGET\",ids:t})},e.switchSelector=function(){a.default.dispatch({type:\"SWITCH_SELECTOR\"})},e.switchDragSelection=function(){a.default.dispatch({type:\"SWITCH_DRAGSELECTION\"})},e.resetSelection=function(){a.default.dispatch({type:\"RESET_SELECTION\"})},e.selectTimeInterval=function(t,e){a.default.dispatch({type:\"SELECT_TIMEINTERVAL\",id:t,value:e})},e.updateSelectedPeriod=function(t){a.default.dispatch({type:\"UPDATE_SELECTED_PERIOD\",period:t})},e.selectPeriodfromSP=function(t){a.default.dispatch({type:\"SELECT_PERIOD_FROM_SP\",period:t})},e.switchQueryMode=function(t){a.default.dispatch({type:\"SWITCH_QUERY_MODE\",mode:t})},e.setIgnoredVariables=function(t){a.default.dispatch({type:\"SET_IGNORED_VARIALES\",varList:t})};var r,i=n(11),a=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){(function(t){var r=n(9),i=n(129),a=e&&!e.nodeType&&e,o=a&&\"object\"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(28)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(31),i=n(141),a=n(142),o=n(143),s=n(144),u=n(145);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e,n){var r=n(136),i=n(137),a=n(138),o=n(139),s=n(140);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(24);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(17)(Object,\"create\");t.exports=r},function(t,e,n){var r=n(158);t.exports=function(t,e){var n=t.__data__;return r(e)?n[\"string\"==typeof e?\"string\":\"hash\"]:n.map}},function(t,e,n){var r=n(173),i=n(49),a=n(174),o=n(175),s=n(176),u=n(16),l=n(70),c=l(r),h=l(i),f=l(a),d=l(o),p=l(s),m=u;(r&&\"[object DataView]\"!=m(new r(new ArrayBuffer(1)))||i&&\"[object Map]\"!=m(new i)||a&&\"[object Promise]\"!=m(a.resolve())||o&&\"[object Set]\"!=m(new o)||s&&\"[object WeakMap]\"!=m(new s))&&(m=function(t){var e=u(t),n=\"[object Object]\"==e?t.constructor:void 0,r=n?l(n):\"\";if(r)switch(r){case c:return\"[object DataView]\";case h:return\"[object Map]\";case f:return\"[object Promise]\";case d:return\"[object Set]\";case p:return\"[object WeakMap]\"}return e}),t.exports=m},function(t,e,n){var r=n(16),i=n(12),a=\"[object Symbol]\";t.exports=function(t){return\"symbol\"==typeof t||i(t)&&r(t)==a}},function(t,e,n){var r=n(36),i=1/0;t.exports=function(t){if(\"string\"==typeof t||r(t))return t;var e=t+\"\";return\"0\"==e&&1/t==-i?\"-0\":e}},function(t,e,n){var r=n(65),i=n(198),a=n(20);t.exports=function(t){return a(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(63),i=n(67);t.exports=function(t,e){return t&&r(t,i(e))}},function(t,e,n){var r=n(128),i=n(12),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,\"callee\")&&!s.call(t,\"callee\")};t.exports=u},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?n:e)&&(\"number\"==i||\"symbol\"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(130),i=n(44),a=n(45),o=a&&a.isTypedArray,s=o?i(o):r;t.exports=s},function(t,e){var n=9007199254740991;t.exports=function(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(61),i=e&&!e.nodeType&&e,a=i&&\"object\"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,s=function(){try{var t=a&&a.require&&a.require(\"util\").types;return t||o&&o.binding&&o.binding(\"util\")}catch(t){}}();t.exports=s}).call(this,n(28)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===(\"function\"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(16),i=n(7),a=\"[object AsyncFunction]\",o=\"[object Function]\",s=\"[object GeneratorFunction]\",u=\"[object Proxy]\";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==o||e==s||e==a||e==u}},function(t,e,n){var r=n(66)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(17)(n(9),\"Map\");t.exports=r},function(t,e,n){var r=n(150),i=n(157),a=n(159),o=n(160),s=n(161);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(172),i=n(77),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),(function(e){return a.call(t,e)})))}:i;t.exports=s},function(t,e,n){var r=n(5),i=n(36),a=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,o=/^\\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!(\"number\"!=n&&\"symbol\"!=n&&\"boolean\"!=n&&null!=t&&!i(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(85);t.exports=function(t,e,n){\"__proto__\"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(73);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Checkboard=void 0;var r=o(n(0)),i=o(n(1)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(219));function o(t){return t&&t.__esModule?t:{default:t}}var s=e.Checkboard=function(t){var e=t.white,n=t.grey,o=t.size,s=t.renderers,u=t.borderRadius,l=t.boxShadow,c=(0,i.default)({default:{grid:{borderRadius:u,boxShadow:l,absolute:\"0px 0px 0px 0px\",background:\"url(\"+a.get(e,n,o,s.canvas)+\") center left\"}}});return r.default.createElement(\"div\",{style:c.grid})};s.defaultProps={size:8,white:\"transparent\",grey:\"rgba(0,0,0,.08)\",renderers:{}},e.default=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.createScatterplots=function(){},e.resetScatterplotsZoom=function(t){a.default.dispatch({type:\"RESET_SCATTERPLOTS\",id:t})},e.moveCurrentLineonTimeSelector=function(t,e){a.default.dispatch({type:\"MOVE_CURRENT_LINE_ON_TIMESELECTOR\",id:t,zpos:e})},e.updateTimeRange=function(t,e){a.default.dispatch({type:\"UPDATE_TIME_RANGE\",id:t,range:e})};!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(18));var r,i=n(11),a=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String(\"abc\");if(t[5]=\"de\",\"5\"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(\"\"))return!1;var r={};return\"abcdefghijklmnopqrst\".split(\"\").forEach((function(t){r[t]=t})),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},r)).join(\"\")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=o(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(21),o=n(11),s=(r=o)&&r.__esModule?r:{default:r};var u=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.menu=\"Visualization\",t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:\"handleActions\",value:function(t){switch(t.type){case\"SELECT_MENU\":this.selectMenu(t.menu)}}},{key:\"selectMenu\",value:function(t){this.menu=t,this.emit(\"selectMenu\",t)}}]),e}(a.EventEmitter));s.default.register(u.handleActions.bind(u)),e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};e.uploadData=function(t){!function(t){s.default.getDataNum();for(var e=Number($(\"#initialLineVal\").text()),n=[],a=[],u=[],l=function(s){n.push(t[s].name);var l=new FileReader;l.readAsText(t[s]),l.onload=function(){var c=l.result;console.log(\"csv file\");var h=i.csvParse(c,(function(e){return Object.keys(e).forEach((function(t){isNaN(e[t])||(e[t]=Number(e[t]))}),e),e.source=t[s].name,e})).splice(e-2);if(a.push(h),s===t.length-1){for(var g=0;g<a.length;g++)u=u.concat(a[g]);u.sort((function(t,e){return t.JD<e.JD?-1:1}));var v=d(u),y=r(v,2),b=y[0],_=y[1],x=p(f,b),w=m(b);o.default.dispatch({type:\"UPLOAD_DATA\",data:{name:n.join(\"+\"),data:u,spatial:b,meta:x,position:w.position,radius:w.radius,color:w.color,splines:w.spline,lookup:_,merge:!1}})}}},c=0;c<t.length;c++)l(c)}(t)},e.updateDetails=function(t,e){o.default.dispatch({type:\"UPDATE_DETAIL\",id:t,zpos:e})},e.mergeData=function(t){var e=Promise.resolve(),n=[],i=[];e.then((function(){for(var e=0;e<t.length;e++){var a=s.default.getData(t[e]);n=n.concat(a.data.data),i.push(a.name)}var o=i.join(\",\");n.sort((function(t,e){var n=t.JD,r=e.JD;return Math.log10(t.JD)>4&&(n-=245e4),Math.log10(e.JD)>4&&(r-=245e4),n<r?-1:1}));var u=d(n),l=r(u,2),c=l[0],h=l[1],g=p(f,c),v=m(c);return{fileName:o,data:n,spatial:c,lookup:h,meta:g,splines:v}})).then((function(t){o.default.dispatch({type:\"UPLOAD_DATA\",data:{name:t.fileName,data:t.data,spatial:t.spatial,meta:t.meta,position:t.splines.position,radius:t.splines.radius,color:t.splines.color,splines:t.splines.spline,lookup:t.lookup,merge:!0}})}))};var i=c(n(18)),a=c(n(8)),o=l(n(11)),s=l(n(3)),u=l(n(13));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var h={HU:{x:\"Q/I\",y:\"U/I\",z:\"JD\",r_x:\"E_Q/I\",r_y:\"E_U/I\",H:\"V-J\",V:\"Flx(V)\"},AUPolar:{x:\"< q >\",y:\"< u >\",z:\"JD\",r_x:\"rms(q)\",r_y:\"rms(u)\"},AUPhoto:{z:\"JD\",V:\"V\"}},f=[\"x\",\"y\",\"z\",\"r_x\",\"r_y\",\"H\",\"V\"];function d(t){for(var e=[],n={},r=0;r<t.length;r++){e[r]={};var i=t[r][\"Q/I\"]||t[r][\"< q >\"],a=t[r][\"Flx(V)\"]||t[r].V;if(i&&a)for(var o in h.HU)e[r][o]=t[r][h.HU[o]],(!n[o]||n[o].indexOf(h.HU[o])<0)&&(n[o]||(n[o]=[]),n[o].push(h.HU[o]));else if(i)for(var s in h.AUPolar)\"z\"==s?(e[r][s]=t[r][h.AUPolar[s]]-245e4,(!n[s]||n[s].indexOf(h.AUPolar[s])<0)&&(n[s]||(n[s]=[]),n[s].push(h.AUPolar[s]))):(e[r][s]=t[r][h.AUPolar[s]]||0,(!n[s]||n[s].indexOf(h.AUPolar[s])<0)&&(n[s]||(n[s]=[]),n[s].push(h.AUPolar[s])));else if(a)for(var u in h.AUPhoto)\"z\"==u?(e[r][u]=t[r][h.AUPhoto[u]]-245e4,(!n[u]||n[u].indexOf(h.AUPhoto[u])<0)&&(n[u]||(n[u]=[]),n[u].push(h.AUPhoto[u]))):\"V\"===u?(e[r][u]=Math.pow(10,-1*(t[r][h.AUPhoto[u]]+11.758)/2.5),(!n[u]||n[u].indexOf(h.AUPhoto[u])<0)&&(n[u]||(n[u]=[]),n[u].push(h.AUPhoto[u]))):(e[r][u]=t[r][h.AUPhoto[u]]||0,(!n[u]||n[u].indexOf(h.AUPhoto[u])<0)&&(n[u]||(n[u]=[]),n[u].push(h.AUPhoto[u])));e[r].source=t[r].source}return[e,n]}function p(t,e){for(var n={min:{},max:{},mean:{},std:{}},a=function(a){var o=t[a],s=i.extent(e,(function(t){return t[o]})),u=r(s,2);n.min[o]=u[0],n.max[o]=u[1],n.mean[o]=i.mean(e,(function(t){return t[o]})),n.std[o]=i.deviation(e,(function(t){return t[o]}))},o=0;o<t.length;o++)a(o);var s=Math.max(Math.abs(n.mean.x-3*n.std.x),Math.abs(n.mean.x+3*n.std.x)),l=Math.max(Math.abs(n.mean.y-3*n.std.y),Math.abs(n.mean.y+3*n.std.y)),c=Math.max(s,l),h=Math.round(c*Math.pow(10,2-Math.ceil(Math.log10(c))));return n.range=u.default.getGridSize()/(5*Math.ceil(h/5)*Math.pow(10,-(2-Math.ceil(Math.log10(c))))),n}function m(t){var e=[],n=t[0].z,r=[],i=[],o=[];t.forEach((function(t){\"x\"in t&&(r.push(new a.Vector3(t.x,t.y,t.z)),i.push(new a.Vector3(t.r_x,t.r_y,t.z))),\"V\"in t&&o.push(new a.Vector3(t.H,t.V,t.z)),e.push(new a.Vector3(0,0,t.z-n))}));var s={};return s.position=new a.CatmullRomCurve3(r,!1,\"catmullrom\"),s.radius=new a.CatmullRomCurve3(i,!1,\"catmullrom\"),s.color=new a.CatmullRomCurve3(o,!1,\"catmullrom\"),s.line=new a.CatmullRomCurve3(e,!1,\"catmullrom\"),{position:r,radius:i,color:o,spline:s}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=y(n(0)),a=v(n(8)),o=y(n(119)),s=v(n(19)),u=v(n(56)),l=v(n(59)),c=v(n(26)),h=y(n(13)),f=y(n(3)),d=y(n(15)),p=y(n(285)),m=y(n(96)),g=y(n(286));y(n(288));function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.id=t.id,n.data=t.data,n.cameraProp=h.default.getCameraProp(t.id),n.tubeNum=16,n.segment=16,n.division=5,n.currentHighlightedPlot=0,n.drag=!1,n.visualQuery=!1,n.dragSelection=!0,n.selector=!0,n.animationPara={flag:!1,dep:0,dst:0,speed:40,now:0},n.raycaster=new a.Raycaster,n.vertex=document.getElementById(\"vertexShader_tube\").textContent,n.fragment=document.getElementById(\"fragmentShader_tube\").textContent,n.lock=!1,n.opacityCurve=h.default.getOpacityCurve(\"Default\"),n.data.merge){n.plotColor=[],n.idNameLookup={};for(var r=n.data.name.split(\",\"),i=0;i<r.length;i++){var o=f.default.getIdFromName(r[i]);n.idNameLookup[r[i]]=i;var s=r[i].split(\"+\");if(s.length>1)for(var u=0;u<s.length;u++)n.idNameLookup[s[u]]=i;n.plotColor.push(h.default.getPlotColor(o))}h.default.setPlotColorbyIdx(n.id,n.plotColor)}else h.default.setPlotColorbyIdx(n.id,(h.default.getInitColorIdx()+n.id)%h.default.getPresetNum()),n.plotColor=h.default.getPlotColor(n.id);return n.state={width:t.width,height:t.height},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"render\",value:function(){var t=this;return this.updateSize(this.props.width,this.props.height),i.default.createElement(\"div\",{style:{position:\"relative\",float:\"left\"}},i.default.createElement(\"div\",{className:\"TimeTubes\",style:{width:this.props.width+\"px\",height:this.props.height+\"px\"},ref:function(e){t.mount=e}}),i.default.createElement(o.default,null))}},{key:\"componentWillMount\",value:function(){var t=this;h.default.on(\"upload\",(function(){t.cameraProp=h.default.getCameraProp(t.id),t.updateCamera()})),h.default.on(\"change\",(function(){t.cameraProp=h.default.getCameraProp(t.id),t.updateCamera()})),h.default.on(\"reset\",(function(){t.cameraProp=h.default.getCameraProp(t.id),0===t.cameraProp.xpos&&0===t.cameraProp.ypos&&50===t.cameraProp.zpos&&t.resetCamera()})),h.default.on(\"switch\",(function(){t.cameraProp=h.default.getCameraProp(t.id),t.switchCamera()})),h.default.on(\"searchTime\",(function(e,n){e===t.id&&t.searchTime(n)})),h.default.on(\"switchGrid\",(function(e,n){e===t.id&&(t.grid.visible=n)})),h.default.on(\"switchLabel\",(function(e,n){e===t.id&&(t.labelGroup.visible=n)})),h.default.on(\"switchAxis\",(function(e,n){e===t.id&&(t.axis.visible=n)})),h.default.on(\"switchPlot\",(function(e,n){e===t.id&&(t.plot.visible=n)})),h.default.on(\"changeBackground\",(function(e,n){e===t.id&&(t.scene.background=new a.Color(Number(n)))})),h.default.on(\"clipTube\",(function(e,n){e===t.id&&(t.renderer.localClippingEnabled=n)})),h.default.on(\"switchShade\",(function(e,n){e===t.id&&(t.tube.material.uniforms.shade.value=n)})),h.default.on(\"changeFar\",(function(e){e===t.id&&(t.cameraProp=h.default.getCameraProp(t.id),t.updateCamera())})),h.default.on(\"updateMinMaxH\",(function(e){e===t.id&&t.setMinMaxH(h.default.getMinMaxH(t.id))})),h.default.on(\"updateMinMaxV\",(function(e){e===t.id&&t.setMinMaxV(h.default.getMinMaxV(t.id))})),h.default.on(\"changePlotColor\",(function(e){if(e===t.id)t.plotColor=h.default.getPlotColor(t.id),t.changePlotsColor();else if(t.data.merge){var n=f.default.getFileName(e);t.data.name.indexOf(n)>=0&&(t.plotColor[t.idNameLookup[n]]=h.default.getPlotColor(e),t.changePlotsColor())}})),h.default.on(\"timeFitting\",(function(e){if(h.default.getChecked(t.id)){var n=h.default.getFocused(t.id)+t.data.spatial[0].z,r=e;n<t.data.spatial[0].z?r=t.data.spatial[0].z:t.data.spatial[t.data.spatial.length-1].z<n&&(r=t.data.spatial[t.data.spatial.length-1].z),t.lock&&h.default.setLock(t.id,r-t.data.spatial[0].z),t.searchTime(r)}})),h.default.on(\"lockControl\",(function(e,n){!n||e.indexOf(t.id)<0?t.lock=!1:(t.lock=!0,t.resetCamera())})),h.default.on(\"synchronizeTubes\",(function(e,n,r,i){if(t.lock&e!==t.id)if(0!==n){var o=t.data.meta.min.z,s=t.data.meta.max.z,u=n+h.default.getLock(t.id)-h.default.getLock(e)+o;o<=u&&u<=s||(u<o?u=o:s<u&&(u=s)),t.searchTime(u)}else r.equals(new a.Vector3(0,0,0))||(t.controls.object.position.set(r.x,r.y,r.z),t.controls.object.rotation.set(i.x,i.y,i.z))})),h.default.on(\"updateZoomTimeTubes\",(function(e){e===t.id&&(t.cameraProp=h.default.getCameraProp(t.id),t.updateCamera())})),h.default.on(\"updateOpacity\",(function(e,n){e===t.id&&(t.opacityCurve=h.default.getOpacityCurve(n),t.updateOpacity(n))})),d.default.on(\"switchQueryMode\",(function(e){var n=d.default.getSource();\"QBE\"===e&&\"default\"!==n&&(t.visualQuery=Number(n)===t.id,t.setQBEView(),t.updateControls(),t.resetSelection())})),d.default.on(\"updateSource\",(function(){var e=d.default.getMode(),n=d.default.getSource();\"QBE\"===e&&\"default\"!==n&&(t.visualQuery=Number(n)===t.id,t.setQBEView(),t.updateControls(),t.resetSelection())})),d.default.on(\"switchDragSelection\",(function(){t.dragSelection=d.default.getDragSelection(),t.updateControls()})),d.default.on(\"resetSelection\",(function(){t.deselectAll()})),d.default.on(\"switchSelector\",(function(){t.selector=d.default.getSelector()})),d.default.on(\"selectTimeInterval\",(function(e,n){\"QBE\"===d.default.getMode()&&Number(e)===t.id&&t.paintSelectedPeriod()})),d.default.on(\"selectPeriodfromSP\",(function(e){var n=d.default.getSource();\"QBE\"===d.default.getMode()&&Number(n)===t.id&&t.paintSelectedPeriod()}))}},{key:\"componentWillUnmount\",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:\"componentDidMount\",value:function(){var t=this.mount.clientWidth,e=this.mount.clientHeight;this.scene=new a.Scene,this.setCameras(t,e),this.renderer=new a.WebGLRenderer,this.renderer.setClearColor(\"#000000\"),this.renderer.setSize(t,e),this.renderer.localClippingEnabled=!0,this.renderer.domElement.id=\"TimeTubes_viewport_\"+this.id,this.renderer.domElement.className=\"TimeTubes_viewport\",this.initQBEView(),this.mount.appendChild(this.renderer.domElement),this.renderScene(),this.start(),this.clippingPlane=new a.Plane(new a.Vector3(0,0,-1),0);var n=new a.DirectionalLight(16777215,.7);n.position.set(-20,40,60),this.scene.add(n);var r=new a.AmbientLight(2697513);this.scene.add(r),this.addControls();var i=document.querySelector(\"#TimeTubes_viewport_\"+this.id),o=this.onMouseWheel(),s=this.onMouseDown(),u=this.onMouseMove(),l=this.onMouseUp(),c=this.onMouseClick();i.addEventListener(\"wheel\",o.bind(this),!1),i.addEventListener(\"mousedown\",s.bind(this),!1),i.addEventListener(\"mousemove\",u.bind(this),!1),i.addEventListener(\"mouseup\",l.bind(this),!1),i.addEventListener(\"click\",c.bind(this),!1),this.tubeGroup=new a.Group,this.scene.add(this.tubeGroup),(new a.TextureLoader).load(\"img/1_256.png\",this.drawTube.bind(this)),this.drawGrid(2*h.default.getGridSize(),10),this.drawLabel(h.default.getGridSize()/this.data.meta.range),this.drawAxis(),this.drawPlot()}},{key:\"start\",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate.bind(this)))}},{key:\"stop\",value:function(){cancelAnimationFrame(this.frameId)}},{key:\"animate\",value:function(){this.renderScene(),this.frameId=window.requestAnimationFrame(this.animate.bind(this))}},{key:\"renderScene\",value:function(){this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera),this.renderer&&this.renderer.render(this.scene,this.camera)}},{key:\"addControls\",value:function(){this.controls=new m.default(this.camera,this.renderer.domElement),this.controls.position0.set(0,0,50),this.controls.screenSpacePanning=!1,this.controls.enableZoom=!1}},{key:\"updateControls\",value:function(){this.visualQuery&&this.dragSelection?this.QBEControls&&(this.QBEControls.enabled=!1):this.QBEControls&&(this.QBEControls.enabled=!0)}},{key:\"onMouseWheel\",value:function(){return function(t){var e=!1,n=this.tubeGroup.position.z,r=this.tubeGroup.position.z+t.deltaY/100;r<0?r=0:r>this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z&&(r=this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z);var i=void 0;for(i=0;i<this.data.spatial.length;i++){var o=this.data.spatial[i].z-this.data.spatial[0].z;if(Math.min(n,r)<o&&o<Math.max(n,r)){r=o,\"x\"in this.data.spatial[i]&&(e=!0);break}}if(r===this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z&&\"x\"in this.data.spatial[this.data.spatial.length-1]&&(e=!0),0===r&&\"x\"in this.data.spatial[0]&&(e=!0),e)if(this.data.merge){for(var c=0,h=0;h<this.data.spatial.length;h++)if(\"x\"in this.data.spatial[h]){if(r===this.data.spatial[h].z-this.data.spatial[0].z){var f=new a.Color(this.plotColor[this.idNameLookup[this.data.spatial[h].source]]);this.changePlotColor(this.currentHighlightedPlot*this.segment,f),this.changePlotColor(c*this.segment,new a.Color(\"red\")),this.currentHighlightedPlot=c}c++}}else for(var d=0;d<this.data.position.length;d++)if(r===this.data.spatial[d].z-this.data.spatial[0].z){var p=new a.Color(\"rgb(127, 255, 212)\");this.changePlotColor(this.currentHighlightedPlot*this.segment,p),this.changePlotColor(d*this.segment,new a.Color(\"red\")),this.currentHighlightedPlot=d}this.tubeGroup.position.z=r,s.updateFocus(this.id,r,e),this.lock&&s.synchronizeTubes(this.id,r,new a.Vector3(0,0,0),new a.Vector3(0,0,0)),u.moveCurrentLineonTimeSelector(this.id,r+this.data.spatial[0].z),l.updateDetails(this.id,r)}.bind(this)}},{key:\"onMouseDown\",value:function(){return function(t){this.drag=!0}}},{key:\"onMouseMove\",value:function(){return function(t){if(this.drag){var e=this.cameraProp;if(e.xpos=this.camera.position.x,e.ypos=this.camera.position.y,e.zpos=this.camera.position.z,this.cameraProp=e,this.lock){var n=new a.Vector3(this.controls.object.rotation._x,this.controls.object.rotation._y,this.controls.object.rotation._z),r=this.controls.object.position;s.synchronizeTubes(this.id,0,r,n)}if(this.visualQuery&&this.dragSelection){var i=this.getIntersectedIndex(t);if(void 0!==i&&this.tube){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;var o=Math.floor(Math.min(i.a,i.b,i.c)/this.segment),u=void 0;u=this.selector?1:0;for(var l=0;l<this.segment;l++)this.tube.geometry.attributes.selected.array[o*this.segment+l]=u,this.tube.geometry.attributes.selected.array[(o+1)*this.segment+l]=u;for(var h=this.tube.geometry.attributes.selected.array.length/this.tubeNum,f=this.tube.geometry.attributes.selected.array.indexOf(1)%h,d=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%h,p=f;p<=d;p++)this.tube.geometry.attributes.selected.array[h*(this.tubeNum-1)+p]=1;var m=this.data.meta.min.z,g=Math.floor(f/this.segment)*(1/this.division)+m,v=(Math.floor(d/this.segment)+1)*(1/this.division)+m;c.updateSelectedPeriod([g,v]),this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}}}}}},{key:\"onMouseUp\",value:function(){return function(t){this.drag=!1}}},{key:\"onMouseClick\",value:function(){return function(t){if(this.visualQuery&&!this.dragSelection){var e=this.getIntersectedIndex(t),n=void 0,r=void 0;if(void 0!==e&&this.tube){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;var i=Math.floor(Math.min(e.a,e.b,e.c)/this.segment),a=(Math.floor(i/this.segment),this.division,this.data.meta.min.z,void 0);a=this.selector?1:0;for(var o=0;o<this.segment;o++)this.tube.geometry.attributes.selected.array[i*this.segment+o]=a,this.tube.geometry.attributes.selected.array[(i+1)*this.segment+o]=a;var u=this.tube.geometry.attributes.selected.array.length/this.tubeNum;n=this.tube.geometry.attributes.selected.array.indexOf(1)%u,r=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%u;for(var l=n;l<=r;l++)this.tube.geometry.attributes.selected.array[u*(this.tubeNum-1)+l]=1;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}if(n>=r)c.updateSelectedPeriod([-1,-1]);else{var h=this.data.meta.min.z,f=Math.floor(n/this.segment)*(1/this.division)+h,d=(Math.floor(r/this.segment)+1)*(1/this.division)+h;c.updateSelectedPeriod([f,d])}}else{for(var p=document.getElementsByClassName(\"TimeTubes_viewport\"),m=0;m<p.length;m++)p[m].style.border=\"none\";var g=document.getElementById(\"TimeTubes_viewport_\"+this.id);g.style.border=\"solid 3px red\",g.style.boxSizing=\"border-box\",s.activateViewport(this.id)}}}},{key:\"getIntersectedIndex\",value:function(t){var e=void 0,n=new a.Vector2;n.x=t.offsetX/this.QBERenderer.domElement.clientWidth*2-1,n.y=-t.offsetY/this.QBERenderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(n,this.QBECamera);var r=this.raycaster.intersectObject(this.tube);return r.length>0&&(e=r[0].face),e}},{key:\"deselectAll\",value:function(){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var t=0;t<this.tube.geometry.attributes.selected.array.length;t++)this.tube.geometry.attributes.selected.array[t]=0;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:\"resetSelection\",value:function(){this.visualQuery||this.deselectAll()}},{key:\"selectTimeInterval\",value:function(t){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var e=this.tube.geometry.attributes.selected.array.length/this.tubeNum,n=this.tubeGroup.position.z,r=(Math.round(n)*this.division+1)*this.segment+e*(this.tubeNum-1),i=0;i<Math.floor(t)*this.division*this.segment;i++)this.tube.geometry.attributes.selected.array[r+i]=1;for(var a=this.tube.geometry.attributes.selected.array.indexOf(1)%e,o=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%e,s=a;s<=o;s++)this.tube.geometry.attributes.selected.array[e*(this.tubeNum-1)+s]=1;var u=this.data.meta.min.z,l=Math.floor(a/this.segment)*(1/this.division)+u,h=(Math.floor(o/this.segment)+1)*(1/this.division)+u;c.updateSelectedPeriod([l,h]),this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:\"paintSelectedPeriod\",value:function(){this.deselectAll();var t=d.default.getSelectedPeriod(),e=this.data.meta.min.z,n=this.tube.geometry.attributes.selected.array.length/this.tubeNum,r=Math.ceil(t[0]-e)*this.division*this.segment,i=Math.ceil(t[1]-e)*this.division*this.segment;this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var a=r;a<i;a++)this.tube.geometry.attributes.selected.array[n*(this.tubeNum-1)+a]=1;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:\"changePlotColor\",value:function(t,e){for(var n=0;n<this.segment;n++)this.plot.geometry.attributes.color.needsUpdate=!0,this.plot.geometry.attributes.color.setXYZ(t+n,e.r,e.g,e.b)}},{key:\"setCameras\",value:function(t,e){var n=Math.ceil(this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z)+50,r=2*Math.tan(22.5*Math.PI/180),i=t/e;this.cameraSet={},this.cameraSet.perspective=new a.PerspectiveCamera(45,i,.1,n);var o=50*r,u=50*r*i;this.cameraSet.orthographic=new a.OrthographicCamera(-u/2,u/2,o/2,-o/2,.1,n),s.updateCamera(this.id,{xpos:0,ypos:0,zpos:50,fov:45,far:n,depth:r,aspect:i,zoom:1,type:\"Perspective\"}),this.camera=this.cameraSet.perspective,this.camera.position.z=50,this.camera.lookAt(this.scene.position),$(\"#farSlider_\"+this.id).slider({min:50,max:n,value:n})}},{key:\"resetCamera\",value:function(){this.camera.position.set(this.cameraProp.xpos,this.cameraProp.ypos,this.cameraProp.zpos),this.camera.zoom=this.cameraProp.zoom,this.controls.reset()}},{key:\"updateCamera\",value:function(){this.camera.position.set(this.cameraProp.xpos,this.cameraProp.ypos,this.cameraProp.zpos),this.camera.fov=this.cameraProp.fov,this.camera.depth=this.cameraProp.depth,this.camera.far=this.cameraProp.far,this.camera.aspect=this.cameraProp.aspect,this.camera.zoom=this.cameraProp.zoom,this.camera.updateProjectionMatrix()}},{key:\"updateSize\",value:function(t,e){this.renderer&&(this.renderer.setSize(t,e),s.updateCamera(this.id,{aspect:t/e}))}},{key:\"switchCamera\",value:function(){var t=this.camera.position;\"Perspective\"===this.cameraProp.type?(this.camera=this.cameraSet.perspective,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)):\"Orthographic\"===this.cameraProp.type&&(this.camera=this.cameraSet.orthographic,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)),this.addControls()}},{key:\"searchTime\",value:function(t){var e=t-this.data.spatial[0].z;isNaN(e)?alert(\"Please input numbers.\"):(this.animationPara.flag=!0,this.animationPara.dep=this.tubeGroup.position.z,this.animationPara.dst=e,this.moveTube())}},{key:\"moveTube\",value:function(){if(this.animationPara.flag){if(this.animationPara.now<this.animationPara.speed){requestAnimationFrame(this.moveTube.bind(this)),this.renderer.render(this.scene,this.camera),this.animationPara.now+=1;var t=(1-Math.cos(Math.PI*this.animationPara.now/this.animationPara.speed))/2;this.tubeGroup.position.z=this.animationPara.dep+(this.animationPara.dst-this.animationPara.dep)*t}this.animationPara.now===this.animationPara.speed&&(l.updateDetails(this.id,this.animationPara.dst),s.updateFocus(this.id,this.animationPara.dst,!1),this.animationPara.flag=!1,this.animationPara.now=0,this.animationPara.dep=0,this.animationPara.dst=0)}else this.animationPara.flag=!1,this.animationPara.dst=0}},{key:\"setMinMaxH\",value:function(t){this.tube.material.uniforms.minmaxH.value=new a.Vector2(t[0],t[1])}},{key:\"setMinMaxV\",value:function(t){this.tube.material.uniforms.minmaxV.value=new a.Vector2(t[0],t[1])}},{key:\"changePlotsColor\",value:function(){if(this.data.merge){for(var t=[],e=[],n=0;n<this.plotColor.length;n++)e.push(new a.Color(this.plotColor[n]));Array(this.data.position.length*this.segment*2),Math.PI,this.segment,this.data.meta.range;for(var r=0;r<this.data.spatial.length;r++)if(\"x\"in this.data.spatial[r])for(var i=this.data.spatial[r].source,o=e[this.idNameLookup[i]],s=0;s<this.segment;s++)t.push(o.r),t.push(o.g),t.push(o.b);this.plot.geometry.addAttribute(\"color\",new a.Float32BufferAttribute(t,3))}else this.plot.material.color.set(this.plotColor)}},{key:\"updateOpacity\",value:function(t){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0;var e=this.opacityCurve.getSpacedPoints(this.tubeNum),n=[];if(\"Flat\"===t)for(var r=1;r<=this.tubeNum;r++)n.push(1);else for(var i=1;i<=this.tubeNum;i++)n.push(1-(1-e[i-1].y)/(1-e[i].y));for(var a=this.tube.geometry.attributes.colorData.array.length/(3*this.segment*this.tubeNum),o=0;o<this.tubeNum;o++)for(var s=0;s<a*this.segment;s++)this.tube.geometry.attributes.colorData.array[a*this.segment*3*o+3*s+2]=n[o];this.renderer.render(this.scene,this.camera)}},{key:\"drawTube\",value:function(t){s.updateTexture(this.id,t),this.texture=t;for(var e=this.data.spatial[0].z,n=this.data.spatial[this.data.spatial.length-1].z,r=this.data.meta.range,i=(n-e)/(this.division*Math.ceil(n-e)),o=Math.ceil((this.data.splines.position.getPoint(1).z-this.data.splines.position.getPoint(0).z)/i),u=Math.ceil((this.data.splines.color.getPoint(1).z-this.data.splines.color.getPoint(0).z)/i),l=this.data.splines.position.getSpacedPoints(o),c=this.data.splines.radius.getSpacedPoints(o),h=this.data.splines.color.getSpacedPoints(u),f=Math.ceil((this.data.splines.color.getPoint(0).z-this.data.splines.position.getPoint(0).z)/i),d=2*Math.PI/(this.segment-1),m=[],g=[],v=0;v<this.tubeNum;v++)m[v]=[],g[v]=[];for(var y,b=[],_=0,x=0,w=(this.data.meta.min.H,this.data.meta.max.H,this.data.meta.min.V,this.data.meta.max.V,this.opacityCurve.getSpacedPoints(this.tubeNum)),S=[],E=1;E<=this.tubeNum;E++)S.push(1-(1-w[E-1].y)/(1-w[E].y));for(var M=0;M<=o;M++){_=0,x=0,f<M&&M-f<u&&(_=h[M-f].x,x=h[M-f].y);for(var T=0;T<this.segment;T++){for(var C=0;C<this.tubeNum;C++){var P=1/this.tubeNum*(C+1),k=d*T;m[C].push(-1*(l[M].x*r+P*c[M].x*r*Math.cos(k))),m[C].push(l[M].y*r+P*c[M].y*r*Math.sin(k)),m[C].push(l[M].z-e),g[C].push(_),g[C].push(x),g[C].push(S[C])}T!==this.segment-1&&(b.push(T+M*this.segment),b.push(T+this.segment+M*this.segment),b.push(T+1+M*this.segment),b.push(T+this.segment+M*this.segment),b.push(T+1+this.segment+M*this.segment),b.push(T+1+M*this.segment))}}b=b.slice(0,-1*this.segment*3*2),y=new Float32Array(m[0].length/3);for(var A=new Float32Array(m[0].length),O=[],L=0;L<this.tubeNum;L++){var I=new a.BufferGeometry;I.addAttribute(\"position\",new a.BufferAttribute(new Float32Array(m[L]),3)),I.addAttribute(\"normal\",new a.BufferAttribute(A,3)),I.addAttribute(\"colorData\",new a.BufferAttribute(new Float32Array(g[L]),3)),I.addAttribute(\"selected\",new a.BufferAttribute(new Float32Array(y),1)),I.setIndex(new a.BufferAttribute(new Uint32Array(b),1)),I.computeVertexNormals(),O.push(I)}var N=p.default.mergeBufferGeometries(O),R=new a.ShaderMaterial({vertexShader:this.vertex,fragmentShader:this.fragment,uniforms:{lightPosition:{value:new a.Vector3(-20,40,60)},shade:{value:!0},texture:{value:this.texture},minmaxH:{value:new a.Vector2(this.data.meta.min.H,this.data.meta.max.H)},minmaxV:{value:new a.Vector2(this.data.meta.min.V,this.data.meta.max.V)},flagH:{value:!0},flagV:{value:!0}},side:a.DoubleSide,transparent:!0,clipping:!0,clippingPlanes:[this.clippingPlane]});this.tube=new a.Mesh(N,R),this.tubeGroup.add(this.tube),this.tube.rotateY(Math.PI),s.updateMinMaxH(this.id,this.data.meta.min.H,this.data.meta.max.H),s.updateMinMaxV(this.id,this.data.meta.min.V,this.data.meta.max.V);var D=m[this.tubeNum-1],z=g[this.tubeNum-1],B=b;s.uploadTubeAttributes(this.id,D,z,B)}},{key:\"drawGrid\",value:function(t,e){this.grid=new a.GridHelper(t,e,\"white\",\"limegreen\"),this.grid.rotateX(Math.PI/2),this.scene.add(this.grid)}},{key:\"drawLabel\",value:function(t){var e=h.default.getGridSize();this.labelGroup=new a.Group,this.scene.add(this.labelGroup);for(var n=[[1,1],[-1,1],[-1,-1],[1,-1]],r=0;r<n.length;r++){var i=new g.default({material:{color:16777215},redrawInterval:250,textSize:.8,texture:{fontFamily:\"Arial, Helvetica, sans-serif\",text:\"(\"+n[r][0]*t+\", \"+n[r][1]*t+\")\"}});this.labelGroup.add(i),i.position.set(n[r][0]*e,n[r][1]*e,0)}var o=new g.default({material:{color:25600},redrawInterval:250,textSize:1,texture:{fontFamily:\"Arial, Helvetica, sans-serif\",fontStyle:\"italic\",text:\"Q/I\"}}),s=new g.default({material:{color:25600},redrawInterval:250,textSize:1,texture:{fontFamily:\"Arial, Helvetica, sans-serif\",fontStyle:\"italic\",text:\"U/I\"}});this.labelGroup.add(o),this.labelGroup.add(s),o.position.set(e+1,0,0),s.position.set(0,e+1,0)}},{key:\"drawAxis\",value:function(){for(var t=new a.BufferGeometry,e=new a.LineBasicMaterial({color:\"white\",opacity:.5,clippingPlanes:[this.clippingPlane]}),n=[],r=[],i=0,o=0,s=0;s<this.data.spatial.length;s++)o=this.data.spatial[s].z-this.data.spatial[0].z,n.push(-10),n.push(0),n.push(o),n.push(10),n.push(0),n.push(o),n.push(0),n.push(10),n.push(o),n.push(0),n.push(-10),n.push(o),r.push(i+0),r.push(i+1),r.push(i+2),r.push(i+3),i+=4;t.setIndex(r),t.addAttribute(\"position\",new a.Float32BufferAttribute(n,3)),this.axis=new a.LineSegments(t,e),this.tubeGroup.add(this.axis),this.axis.rotateY(Math.PI)}},{key:\"drawPlot\",value:function(){if(this.data.merge){for(var t=[],e=[],n=[],r=0;r<this.plotColor.length;r++)n.push(new a.Color(this.plotColor[r]));for(var i=Array(this.data.position.length*this.segment*2),o=0,s=2*Math.PI/this.segment,u=this.data.meta.range,l=0;l<this.data.spatial.length;l++)if(\"x\"in this.data.spatial[l]){var c=this.data.spatial[l].z-this.data.spatial[0].z,h=-this.data.spatial[l].x*u,f=this.data.spatial[l].y*u,d=this.data.spatial[l].r_x*u,p=this.data.spatial[l].r_y*u,m=2*this.segment*o,g=this.data.spatial[l].source,v=n[this.idNameLookup[g]];i[m]=o*this.segment,i[m+2*this.segment-1]=o*this.segment;for(var y=0;y<this.segment;y++)t.push(h+d*Math.cos(s*y)),t.push(f+p*Math.sin(s*y)),t.push(c),e.push(v.r),e.push(v.g),e.push(v.b),0!==y&&(i[m+2*(y-1)+1]=o*this.segment+y,i[m+2*(y-1)+2]=o*this.segment+y);o++}var b=new a.BufferGeometry;b.setIndex(i),b.addAttribute(\"position\",new a.Float32BufferAttribute(t,3)),b.addAttribute(\"color\",new a.Float32BufferAttribute(e,3));var _=new a.LineBasicMaterial({vertexColors:a.VertexColors,clippingPlanes:[this.clippingPlane]});this.plot=new a.LineSegments(b,_)}else{for(var x=[],w=[],S=new a.Color(this.plotColor),E=Array(this.data.position.length*this.segment*2),M=2*Math.PI/this.segment,T=this.data.meta.range,C=0;C<this.data.position.length;C++){var P=this.data.position[C].z-this.data.position[0].z,k=-this.data.position[C].x*T,A=this.data.position[C].y*T,O=this.data.radius[C].x*T,L=this.data.radius[C].y*T,I=2*this.segment*C;E[I]=C*this.segment,E[I+2*this.segment-1]=C*this.segment;for(var N=0;N<this.segment;N++)x.push(k+O*Math.cos(M*N)),x.push(A+L*Math.sin(M*N)),x.push(P),w.push(S.r),w.push(S.g),w.push(S.b),0!==N&&(E[I+2*(N-1)+1]=C*this.segment+N,E[I+2*(N-1)+2]=C*this.segment+N)}var R=new a.BufferGeometry;R.setIndex(E),R.addAttribute(\"position\",new a.Float32BufferAttribute(x,3)),R.addAttribute(\"color\",new a.Float32BufferAttribute(w,3));var D=new a.LineBasicMaterial({vertexColors:a.VertexColors,clippingPlanes:[this.clippingPlane]});this.plot=new a.LineSegments(R,D)}this.tubeGroup.add(this.plot),this.plot.rotateY(Math.PI)}},{key:\"initQBEView\",value:function(){this.QBECamera=new a.PerspectiveCamera(45,1,.1,2e3),this.QBECamera.position.z=50,this.QBERenderer=new a.WebGLRenderer,this.QBERenderer.setSize(500,500),this.QBERenderer.setClearColor(\"#000000\"),this.QBERenderer.localClippingEnabled=!0,this.QBERenderer.domElement.id=\"QBE_viewport_\"+this.id,this.QBERenderer.domElement.className=\"TimeTubes_viewport\"}},{key:\"setQBEView\",value:function(){var t=document.getElementById(\"QBE_viewport_\"+this.id);if(this.visualQuery){this.QBECamera.lookAt(this.scene.position),this.QBECamera.far=this.camera.far;var e=$(\"#QBESource\").outerWidth(!0)-2*Number($(\"#QBESource\").css(\"padding-left\").replace(\"px\",\"\"));if(this.QBERenderer.setSize(e,e),null!=t)t.style.display=\"block\";else{var n=document.getElementById(\"QBESourceTT\"),r=this.onMouseWheel(),i=this.onMouseDown(),a=this.onMouseMove(),o=this.onMouseUp(),s=this.onMouseClick();n.appendChild(this.QBERenderer.domElement),n.addEventListener(\"wheel\",r.bind(this),!1),n.addEventListener(\"mousedown\",i.bind(this),!1),n.addEventListener(\"mousemove\",a.bind(this),!1),n.addEventListener(\"mouseup\",o.bind(this),!1),n.addEventListener(\"click\",s.bind(this),!1),this.QBEControls=new m.default(this.QBECamera,this.QBERenderer.domElement),this.QBEControls.position0.set(0,0,50),this.QBEControls.screenSpacePanning=!1,this.QBEControls.enableZoom=!1}}else null!=t&&(t.style.display=\"none\")}}]),e}(i.default.Component);e.default=b},function(t,e,n){(function(e){var n=\"object\"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(62))},function(t,e){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(64),i=n(23);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(126)();t.exports=r},function(t,e,n){var r=n(127),i=n(40),a=n(5),o=n(27),s=n(41),u=n(42),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&i(t),h=!n&&!c&&o(t),f=!n&&!c&&!h&&u(t),d=n||c||h||f,p=d?r(t.length,String):[],m=p.length;for(var g in t)!e&&!l.call(t,g)||d&&(\"length\"==g||h&&(\"offset\"==g||\"parent\"==g)||f&&(\"buffer\"==g||\"byteLength\"==g||\"byteOffset\"==g)||s(g,m))||p.push(g);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(29);t.exports=function(t){return\"function\"==typeof t?t:r}},function(t,e,n){var r=n(16),i=n(48),a=n(12),o=\"[object Object]\",s=Function.prototype,u=Object.prototype,l=s.toString,c=u.hasOwnProperty,h=l.call(Object);t.exports=function(t){if(!a(t)||r(t)!=o)return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,\"constructor\")&&e.constructor;return\"function\"==typeof n&&n instanceof n&&l.call(n)==h}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+\"\"}catch(t){}}return\"\"}},function(t,e,n){var r=n(162),i=n(12);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,a,o,t,s))}},function(t,e,n){var r=n(163),i=n(166),a=n(167),o=1,s=2;t.exports=function(t,e,n,u,l,c){var h=n&o,f=t.length,d=e.length;if(f!=d&&!(h&&d>f))return!1;var p=c.get(t);if(p&&c.get(e))return p==e;var m=-1,g=!0,v=n&s?new r:void 0;for(c.set(t,e),c.set(e,t);++m<f;){var y=t[m],b=e[m];if(u)var _=h?u(b,y,m,e,t,c):u(y,b,m,t,e,c);if(void 0!==_){if(_)continue;g=!1;break}if(v){if(!i(e,(function(t,e){if(!a(v,e)&&(y===t||l(y,t,n,u,c)))return v.push(e)}))){g=!1;break}}else if(y!==b&&!l(y,b,n,u,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},function(t,e,n){var r=n(9).Uint8Array;t.exports=r},function(t,e,n){var r=n(75),i=n(51),a=n(23);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(76),i=n(5);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(7);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(81),i=n(37);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var r=n(5),i=n(52),a=n(180),o=n(183);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},function(t,e,n){var r=n(63),i=n(192)(r);t.exports=i},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(53),i=n(24),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(17),i=function(){try{var t=r(Object,\"defineProperty\");return t({},\"\",{}),t}catch(t){}}();t.exports=i},function(t,e,n){(function(t){var r=n(9),i=e&&!e.nodeType&&e,a=i&&\"object\"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(28)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(76),i=n(48),a=n(51),o=n(77),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,a(t)),t=i(t);return e}:o;t.exports=s},function(t,e,n){var r=n(54);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(208),i=n(48),a=n(46);t.exports=function(t){return\"function\"!=typeof t.constructor||a(t)?{}:r(i(t))}},function(t,e,n){var r=n(53),i=n(24);t.exports=function(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){t.exports=function(t,e){if(\"__proto__\"!=e)return t[e]}},function(t,e,n){var r=n(7),i=n(241),a=n(242),o=\"Expected a function\",s=Math.max,u=Math.min;t.exports=function(t,e,n){var l,c,h,f,d,p,m=0,g=!1,v=!1,y=!0;if(\"function\"!=typeof t)throw new TypeError(o);function b(e){var n=l,r=c;return l=c=void 0,m=e,f=t.apply(r,n)}function _(t){var n=t-p;return void 0===p||n>=e||n<0||v&&t-m>=h}function x(){var t=i();if(_(t))return w(t);d=setTimeout(x,function(t){var n=e-(t-p);return v?u(n,h-(t-m)):n}(t))}function w(t){return d=void 0,y&&l?b(t):(l=c=void 0,f)}function S(){var t=i(),n=_(t);if(l=arguments,c=this,p=t,n){if(void 0===d)return function(t){return m=t,d=setTimeout(x,e),g?b(t):f}(p);if(v)return d=setTimeout(x,e),b(p)}return void 0===d&&(d=setTimeout(x,e)),f}return e=a(e)||0,r(n)&&(g=!!n.leading,h=(v=\"maxWait\"in n)?s(a(n.maxWait)||0,e):h,y=\"trailing\"in n?!!n.trailing:y),S.cancel=function(){void 0!==d&&clearTimeout(d),m=0,l=p=c=d=void 0},S.flush=function(){return void 0===d?f:w(i())},S}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ColorWrap=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),o=l(a),s=l(n(93)),u=l(n(10));function l(t){return t&&t.__esModule?t:{default:t}}var c=e.ColorWrap=function(t){var e=function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.handleChange=function(t,n){if(u.default.simpleCheckForValidColor(t)){var r=u.default.toState(t,t.h||e.state.oldHue);e.setState(r),e.props.onChangeComplete&&e.debounce(e.props.onChangeComplete,r,n),e.props.onChange&&e.props.onChange(r,n)}},e.handleSwatchHover=function(t,n){if(u.default.simpleCheckForValidColor(t)){var r=u.default.toState(t,t.h||e.state.oldHue);e.props.onSwatchHover&&e.props.onSwatchHover(r,n)}},e.state=r({},u.default.toState(t.color,0)),e.debounce=(0,s.default)((function(t,e,n){t(e,n)}),100),e}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),i(n,[{key:\"componentWillReceiveProps\",value:function(t){this.setState(r({},u.default.toState(t.color,this.state.oldHue)))}},{key:\"render\",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),o.default.createElement(t,r({},this.props,this.state,{onChange:this.handleChange},e))}}]),n}(a.PureComponent||a.Component);return e.propTypes=r({},t.propTypes),e.defaultProps=r({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e};e.default=c},function(t,e,n){\"use strict\";n.r(e),n.d(e,\"red\",(function(){return r})),n.d(e,\"pink\",(function(){return i})),n.d(e,\"purple\",(function(){return a})),n.d(e,\"deepPurple\",(function(){return o})),n.d(e,\"indigo\",(function(){return s})),n.d(e,\"blue\",(function(){return u})),n.d(e,\"lightBlue\",(function(){return l})),n.d(e,\"cyan\",(function(){return c})),n.d(e,\"teal\",(function(){return h})),n.d(e,\"green\",(function(){return f})),n.d(e,\"lightGreen\",(function(){return d})),n.d(e,\"lime\",(function(){return p})),n.d(e,\"yellow\",(function(){return m})),n.d(e,\"amber\",(function(){return g})),n.d(e,\"orange\",(function(){return v})),n.d(e,\"deepOrange\",(function(){return y})),n.d(e,\"brown\",(function(){return b})),n.d(e,\"grey\",(function(){return _})),n.d(e,\"blueGrey\",(function(){return x})),n.d(e,\"darkText\",(function(){return w})),n.d(e,\"lightText\",(function(){return S})),n.d(e,\"darkIcons\",(function(){return E})),n.d(e,\"lightIcons\",(function(){return M})),n.d(e,\"white\",(function(){return T})),n.d(e,\"black\",(function(){return C}));var r={50:\"#ffebee\",100:\"#ffcdd2\",200:\"#ef9a9a\",300:\"#e57373\",400:\"#ef5350\",500:\"#f44336\",600:\"#e53935\",700:\"#d32f2f\",800:\"#c62828\",900:\"#b71c1c\",a100:\"#ff8a80\",a200:\"#ff5252\",a400:\"#ff1744\",a700:\"#d50000\"},i={50:\"#fce4ec\",100:\"#f8bbd0\",200:\"#f48fb1\",300:\"#f06292\",400:\"#ec407a\",500:\"#e91e63\",600:\"#d81b60\",700:\"#c2185b\",800:\"#ad1457\",900:\"#880e4f\",a100:\"#ff80ab\",a200:\"#ff4081\",a400:\"#f50057\",a700:\"#c51162\"},a={50:\"#f3e5f5\",100:\"#e1bee7\",200:\"#ce93d8\",300:\"#ba68c8\",400:\"#ab47bc\",500:\"#9c27b0\",600:\"#8e24aa\",700:\"#7b1fa2\",800:\"#6a1b9a\",900:\"#4a148c\",a100:\"#ea80fc\",a200:\"#e040fb\",a400:\"#d500f9\",a700:\"#aa00ff\"},o={50:\"#ede7f6\",100:\"#d1c4e9\",200:\"#b39ddb\",300:\"#9575cd\",400:\"#7e57c2\",500:\"#673ab7\",600:\"#5e35b1\",700:\"#512da8\",800:\"#4527a0\",900:\"#311b92\",a100:\"#b388ff\",a200:\"#7c4dff\",a400:\"#651fff\",a700:\"#6200ea\"},s={50:\"#e8eaf6\",100:\"#c5cae9\",200:\"#9fa8da\",300:\"#7986cb\",400:\"#5c6bc0\",500:\"#3f51b5\",600:\"#3949ab\",700:\"#303f9f\",800:\"#283593\",900:\"#1a237e\",a100:\"#8c9eff\",a200:\"#536dfe\",a400:\"#3d5afe\",a700:\"#304ffe\"},u={50:\"#e3f2fd\",100:\"#bbdefb\",200:\"#90caf9\",300:\"#64b5f6\",400:\"#42a5f5\",500:\"#2196f3\",600:\"#1e88e5\",700:\"#1976d2\",800:\"#1565c0\",900:\"#0d47a1\",a100:\"#82b1ff\",a200:\"#448aff\",a400:\"#2979ff\",a700:\"#2962ff\"},l={50:\"#e1f5fe\",100:\"#b3e5fc\",200:\"#81d4fa\",300:\"#4fc3f7\",400:\"#29b6f6\",500:\"#03a9f4\",600:\"#039be5\",700:\"#0288d1\",800:\"#0277bd\",900:\"#01579b\",a100:\"#80d8ff\",a200:\"#40c4ff\",a400:\"#00b0ff\",a700:\"#0091ea\"},c={50:\"#e0f7fa\",100:\"#b2ebf2\",200:\"#80deea\",300:\"#4dd0e1\",400:\"#26c6da\",500:\"#00bcd4\",600:\"#00acc1\",700:\"#0097a7\",800:\"#00838f\",900:\"#006064\",a100:\"#84ffff\",a200:\"#18ffff\",a400:\"#00e5ff\",a700:\"#00b8d4\"},h={50:\"#e0f2f1\",100:\"#b2dfdb\",200:\"#80cbc4\",300:\"#4db6ac\",400:\"#26a69a\",500:\"#009688\",600:\"#00897b\",700:\"#00796b\",800:\"#00695c\",900:\"#004d40\",a100:\"#a7ffeb\",a200:\"#64ffda\",a400:\"#1de9b6\",a700:\"#00bfa5\"},f={50:\"#e8f5e9\",100:\"#c8e6c9\",200:\"#a5d6a7\",300:\"#81c784\",400:\"#66bb6a\",500:\"#4caf50\",600:\"#43a047\",700:\"#388e3c\",800:\"#2e7d32\",900:\"#1b5e20\",a100:\"#b9f6ca\",a200:\"#69f0ae\",a400:\"#00e676\",a700:\"#00c853\"},d={50:\"#f1f8e9\",100:\"#dcedc8\",200:\"#c5e1a5\",300:\"#aed581\",400:\"#9ccc65\",500:\"#8bc34a\",600:\"#7cb342\",700:\"#689f38\",800:\"#558b2f\",900:\"#33691e\",a100:\"#ccff90\",a200:\"#b2ff59\",a400:\"#76ff03\",a700:\"#64dd17\"},p={50:\"#f9fbe7\",100:\"#f0f4c3\",200:\"#e6ee9c\",300:\"#dce775\",400:\"#d4e157\",500:\"#cddc39\",600:\"#c0ca33\",700:\"#afb42b\",800:\"#9e9d24\",900:\"#827717\",a100:\"#f4ff81\",a200:\"#eeff41\",a400:\"#c6ff00\",a700:\"#aeea00\"},m={50:\"#fffde7\",100:\"#fff9c4\",200:\"#fff59d\",300:\"#fff176\",400:\"#ffee58\",500:\"#ffeb3b\",600:\"#fdd835\",700:\"#fbc02d\",800:\"#f9a825\",900:\"#f57f17\",a100:\"#ffff8d\",a200:\"#ffff00\",a400:\"#ffea00\",a700:\"#ffd600\"},g={50:\"#fff8e1\",100:\"#ffecb3\",200:\"#ffe082\",300:\"#ffd54f\",400:\"#ffca28\",500:\"#ffc107\",600:\"#ffb300\",700:\"#ffa000\",800:\"#ff8f00\",900:\"#ff6f00\",a100:\"#ffe57f\",a200:\"#ffd740\",a400:\"#ffc400\",a700:\"#ffab00\"},v={50:\"#fff3e0\",100:\"#ffe0b2\",200:\"#ffcc80\",300:\"#ffb74d\",400:\"#ffa726\",500:\"#ff9800\",600:\"#fb8c00\",700:\"#f57c00\",800:\"#ef6c00\",900:\"#e65100\",a100:\"#ffd180\",a200:\"#ffab40\",a400:\"#ff9100\",a700:\"#ff6d00\"},y={50:\"#fbe9e7\",100:\"#ffccbc\",200:\"#ffab91\",300:\"#ff8a65\",400:\"#ff7043\",500:\"#ff5722\",600:\"#f4511e\",700:\"#e64a19\",800:\"#d84315\",900:\"#bf360c\",a100:\"#ff9e80\",a200:\"#ff6e40\",a400:\"#ff3d00\",a700:\"#dd2c00\"},b={50:\"#efebe9\",100:\"#d7ccc8\",200:\"#bcaaa4\",300:\"#a1887f\",400:\"#8d6e63\",500:\"#795548\",600:\"#6d4c41\",700:\"#5d4037\",800:\"#4e342e\",900:\"#3e2723\"},_={50:\"#fafafa\",100:\"#f5f5f5\",200:\"#eeeeee\",300:\"#e0e0e0\",400:\"#bdbdbd\",500:\"#9e9e9e\",600:\"#757575\",700:\"#616161\",800:\"#424242\",900:\"#212121\"},x={50:\"#eceff1\",100:\"#cfd8dc\",200:\"#b0bec5\",300:\"#90a4ae\",400:\"#78909c\",500:\"#607d8b\",600:\"#546e7a\",700:\"#455a64\",800:\"#37474f\",900:\"#263238\"},w={primary:\"rgba(0, 0, 0, 0.87)\",secondary:\"rgba(0, 0, 0, 0.54)\",disabled:\"rgba(0, 0, 0, 0.38)\",dividers:\"rgba(0, 0, 0, 0.12)\"},S={primary:\"rgba(255, 255, 255, 1)\",secondary:\"rgba(255, 255, 255, 0.7)\",disabled:\"rgba(255, 255, 255, 0.5)\",dividers:\"rgba(255, 255, 255, 0.12)\"},E={active:\"rgba(0, 0, 0, 0.54)\",inactive:\"rgba(0, 0, 0, 0.38)\"},M={active:\"rgba(255, 255, 255, 1)\",inactive:\"rgba(255, 255, 255, 0.5)\"},T=\"#ffffff\",C=\"#000000\";e.default={red:r,pink:i,purple:a,deepPurple:o,indigo:s,blue:u,lightBlue:l,cyan:c,teal:h,green:f,lightGreen:d,lime:p,yellow:m,amber:g,orange:v,deepOrange:y,brown:b,grey:_,blueGrey:x,darkText:w,lightText:S,darkIcons:E,lightIcons:M,white:T,black:C}},function(t,e,n){var r=n(8);r.OrbitControls=function(t,e){var n,i,a,o,s;this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(l),u.update(),d=f.NONE},this.update=(n=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(t.up,new r.Vector3(0,1,0)),a=i.clone().inverse(),o=new r.Vector3,s=new r.Quaternion,function(){var t=u.object.position;return n.copy(t).sub(u.target),n.applyQuaternion(i),m.setFromVector3(n),u.autoRotate&&d===f.NONE&&A(2*Math.PI/60/60*u.autoRotateSpeed),u.enableDamping?(m.theta+=g.theta*u.dampingFactor,m.phi+=g.phi*u.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi),m.theta=Math.max(u.minAzimuthAngle,Math.min(u.maxAzimuthAngle,m.theta)),m.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(u.minDistance,Math.min(u.maxDistance,m.radius)),!0===u.enableDamping?u.target.addScaledVector(y,u.dampingFactor):u.target.add(y),n.setFromSpherical(m),n.applyQuaternion(a),t.copy(u.target).add(n),u.object.lookAt(u.target),!0===u.enableDamping?(g.theta*=1-u.dampingFactor,g.phi*=1-u.dampingFactor,y.multiplyScalar(1-u.dampingFactor)):(g.set(0,0,0),y.set(0,0,0)),v=1,!!(b||o.distanceToSquared(u.object.position)>p||8*(1-s.dot(u.object.quaternion))>p)&&(u.dispatchEvent(l),o.copy(u.object.position),s.copy(u.object.quaternion),b=!1,!0)}),this.dispose=function(){u.domElement.removeEventListener(\"contextmenu\",tt,!1),u.domElement.removeEventListener(\"mousedown\",q,!1),u.domElement.removeEventListener(\"wheel\",Q,!1),u.domElement.removeEventListener(\"touchstart\",$,!1),u.domElement.removeEventListener(\"touchend\",K,!1),u.domElement.removeEventListener(\"touchmove\",J,!1),document.removeEventListener(\"mousemove\",X,!1),document.removeEventListener(\"mouseup\",Y,!1),window.removeEventListener(\"keydown\",Z,!1)};var u=this,l={type:\"change\"},c={type:\"start\"},h={type:\"end\"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=f.NONE,p=1e-6,m=new r.Spherical,g=new r.Spherical,v=1,y=new r.Vector3,b=!1,_=new r.Vector2,x=new r.Vector2,w=new r.Vector2,S=new r.Vector2,E=new r.Vector2,M=new r.Vector2,T=new r.Vector2,C=new r.Vector2,P=new r.Vector2;function k(){return Math.pow(.95,u.zoomSpeed)}function A(t){g.theta-=t}function O(t){g.phi-=t}var L,I=(L=new r.Vector3,function(t,e){L.setFromMatrixColumn(e,0),L.multiplyScalar(-t),y.add(L)}),N=function(){var t=new r.Vector3;return function(e,n){!0===u.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(u.object.up,t)),t.multiplyScalar(e),y.add(t)}}(),R=function(){var t=new r.Vector3;return function(e,n){var r=u.domElement===document?u.domElement.body:u.domElement;if(u.object.isPerspectiveCamera){var i=u.object.position;t.copy(i).sub(u.target);var a=t.length();a*=Math.tan(u.object.fov/2*Math.PI/180),I(2*e*a/r.clientHeight,u.object.matrix),N(2*n*a/r.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(I(e*(u.object.right-u.object.left)/u.object.zoom/r.clientWidth,u.object.matrix),N(n*(u.object.top-u.object.bottom)/u.object.zoom/r.clientHeight,u.object.matrix)):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"),u.enablePan=!1)}}();function D(t){u.object.isPerspectiveCamera?v/=t:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*t)),u.object.updateProjectionMatrix(),b=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),u.enableZoom=!1)}function z(t){u.object.isPerspectiveCamera?v*=t:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/t)),u.object.updateProjectionMatrix(),b=!0):(console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"),u.enableZoom=!1)}function B(t){_.set(t.clientX,t.clientY)}function F(t){S.set(t.clientX,t.clientY)}function j(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}}function U(t){if(1==t.touches.length)S.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);S.set(e,n)}}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);T.set(0,r)}function H(t){if(1==t.touches.length)x.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);x.set(e,n)}w.subVectors(x,_).multiplyScalar(u.rotateSpeed);var r=u.domElement===document?u.domElement.body:u.domElement;A(2*Math.PI*w.x/r.clientHeight),O(2*Math.PI*w.y/r.clientHeight),_.copy(x)}function G(t){if(1==t.touches.length)E.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);E.set(e,n)}M.subVectors(E,S).multiplyScalar(u.panSpeed),R(M.x,M.y),S.copy(E)}function W(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);C.set(0,r),P.set(0,Math.pow(C.y/T.y,u.zoomSpeed)),D(P.y),T.copy(C)}function q(t){if(!1!==u.enabled){switch(t.preventDefault(),u.domElement.focus?u.domElement.focus():window.focus(),t.button){case 0:switch(u.mouseButtons.LEFT){case r.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===u.enablePan)return;F(t),d=f.PAN}else{if(!1===u.enableRotate)return;B(t),d=f.ROTATE}break;case r.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===u.enableRotate)return;B(t),d=f.ROTATE}else{if(!1===u.enablePan)return;F(t),d=f.PAN}break;default:d=f.NONE}break;case 1:switch(u.mouseButtons.MIDDLE){case r.MOUSE.DOLLY:if(!1===u.enableZoom)return;!function(t){T.set(t.clientX,t.clientY)}(t),d=f.DOLLY;break;default:d=f.NONE}break;case 2:switch(u.mouseButtons.RIGHT){case r.MOUSE.ROTATE:if(!1===u.enableRotate)return;B(t),d=f.ROTATE;break;case r.MOUSE.PAN:if(!1===u.enablePan)return;F(t),d=f.PAN;break;default:d=f.NONE}}d!==f.NONE&&(document.addEventListener(\"mousemove\",X,!1),document.addEventListener(\"mouseup\",Y,!1),u.dispatchEvent(c))}}function X(t){if(!1!==u.enabled)switch(t.preventDefault(),d){case f.ROTATE:if(!1===u.enableRotate)return;!function(t){x.set(t.clientX,t.clientY),w.subVectors(x,_).multiplyScalar(u.rotateSpeed);var e=u.domElement===document?u.domElement.body:u.domElement;A(2*Math.PI*w.x/e.clientHeight),O(2*Math.PI*w.y/e.clientHeight),_.copy(x),u.update()}(t);break;case f.DOLLY:if(!1===u.enableZoom)return;!function(t){C.set(t.clientX,t.clientY),P.subVectors(C,T),P.y>0?D(k()):P.y<0&&z(k()),T.copy(C),u.update()}(t);break;case f.PAN:if(!1===u.enablePan)return;!function(t){E.set(t.clientX,t.clientY),M.subVectors(E,S).multiplyScalar(u.panSpeed),R(M.x,M.y),S.copy(E),u.update()}(t)}}function Y(t){!1!==u.enabled&&(document.removeEventListener(\"mousemove\",X,!1),document.removeEventListener(\"mouseup\",Y,!1),u.dispatchEvent(h),d=f.NONE)}function Q(t){!1===u.enabled||!1===u.enableZoom||d!==f.NONE&&d!==f.ROTATE||(t.preventDefault(),t.stopPropagation(),u.dispatchEvent(c),function(t){t.deltaY<0?z(k()):t.deltaY>0&&D(k()),u.update()}(t),u.dispatchEvent(h))}function Z(t){!1!==u.enabled&&!1!==u.enableKeys&&!1!==u.enablePan&&function(t){var e=!1;switch(t.keyCode){case u.keys.UP:R(0,u.keyPanSpeed),e=!0;break;case u.keys.BOTTOM:R(0,-u.keyPanSpeed),e=!0;break;case u.keys.LEFT:R(u.keyPanSpeed,0),e=!0;break;case u.keys.RIGHT:R(-u.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),u.update())}(t)}function $(t){if(!1!==u.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(u.touches.ONE){case r.TOUCH.ROTATE:if(!1===u.enableRotate)return;j(t),d=f.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===u.enablePan)return;U(t),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(u.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;!function(t){u.enableZoom&&V(t),u.enablePan&&U(t)}(t),d=f.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;!function(t){u.enableZoom&&V(t),u.enableRotate&&j(t)}(t),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&u.dispatchEvent(c)}}function J(t){if(!1!==u.enabled)switch(t.preventDefault(),t.stopPropagation(),d){case f.TOUCH_ROTATE:if(!1===u.enableRotate)return;H(t),u.update();break;case f.TOUCH_PAN:if(!1===u.enablePan)return;G(t),u.update();break;case f.TOUCH_DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;!function(t){u.enableZoom&&W(t),u.enablePan&&G(t)}(t),u.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;!function(t){u.enableZoom&&W(t),u.enableRotate&&H(t)}(t),u.update();break;default:d=f.NONE}}function K(t){!1!==u.enabled&&(u.dispatchEvent(h),d=f.NONE)}function tt(t){!1!==u.enabled&&t.preventDefault()}u.domElement.addEventListener(\"contextmenu\",tt,!1),u.domElement.addEventListener(\"mousedown\",q,!1),u.domElement.addEventListener(\"wheel\",Q,!1),u.domElement.addEventListener(\"touchstart\",$,!1),u.domElement.addEventListener(\"touchend\",K,!1),u.domElement.addEventListener(\"touchmove\",J,!1),window.addEventListener(\"keydown\",Z,!1),this.update()},r.OrbitControls.prototype=Object.create(r.EventDispatcher.prototype),r.OrbitControls.prototype.constructor=r.OrbitControls,r.MapControls=function(t,e){r.OrbitControls.call(this,t,e),this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE},r.MapControls.prototype=Object.create(r.EventDispatcher.prototype),r.MapControls.prototype.constructor=r.MapControls,t.exports=e.default=r.OrbitControls},function(t,e){function n(t){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function r(e){return\"function\"==typeof Symbol&&\"symbol\"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":n(t)},r(e)}t.exports=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=h(n(0)),a=c(n(18)),o=h(n(3)),s=c(n(19)),u=c(n(56)),l=h(n(99));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.margin={top:10,bottom:30,right:10,left:10},n.id=t.id,n.divID=t.divID,n.data=o.default.getData(n.id),n.selectedRange=[n.data.data.meta.min.z,n.data.data.meta.max.z],n.state={width:t.width,height:100},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;l.default.on(\"moveCurrentLineonTimeSelector\",(function(e,n){e===t.id&&t.moveCurrentLine(n)})),l.default.on(\"updateTimeRange\",(function(e,n){e===t.id&&(t.selectedRange=n)}))}},{key:\"componentDidMount\",value:function(){this.initializeElements(),this.drawTimeSelector()}},{key:\"initializeElements\",value:function(){this.xScale=a.scaleLinear().domain([this.data.data.meta.min.z,this.data.data.meta.max.z]),this.brush=a.brushX(),this.yScale=a.scaleLinear().domain([this.data.data.meta.min.V,this.data.data.meta.max.V]),this.svg=a.select(\"#\"+this.divID).append(\"svg\").attr(\"class\",\"timeSelector\").attr(\"id\",\"timeSelectorSVG_\"+this.id),this.clip=this.svg.append(\"defs\").append(\"clipPath\").attr(\"id\",\"clipTimeSelector_\"+this.id).append(\"rect\"),this.timeCurve=a.area().curve(a.curveLinear),this.timeSelector=this.svg.append(\"g\").attr(\"class\",\"timeSelector\").attr(\"transform\",\"translate(\"+this.margin.left+\",\"+this.margin.top+\")\"),this.timeSelectorGraph=this.timeSelector.append(\"path\").datum(this.data.data.color).attr(\"class\",\"area\").attr(\"clip-path\",\"url(#clipTimeSelector_\"+this.id+\")\"),this.timeSelectorXAxis=this.timeSelector.append(\"g\").attr(\"class\",\"axis axis--x\"),this.timeSelectorBrusher=this.timeSelector.append(\"g\").attr(\"class\",\"brush\"),this.currentLine=this.svg.append(\"line\").attr(\"stroke-width\",3).attr(\"stroke\",\"orange\").attr(\"id\",\"timeSelectorCurrent_\"+this.id)}},{key:\"drawTimeSelector\",value:function(){var t=this.id,e=(this.divID,this.props.width),n=this.state.height,r=e-this.margin.left-this.margin.right,i=n-this.margin.top-this.margin.bottom;this.selectedRange;this.svg.attr(\"width\",this.props.width).attr(\"height\",this.state.height),this.xScale.range([0,r]);this.xScale;var o=a.axisBottom(this.xScale);this.brush.extent([[0,0],[r,i]]).on(\"start brush\",function(){var e=(a.event.selection||this.xScale.range).map(this.xScale.invert,this.xScale);a.selectAll(\".scatterplots\"+this.id).size()>0&&e.toString()!==this.selectedRange.toString()&&u.updateTimeRange(t,e)}.bind(this)),this.yScale.range([i,0]),this.clip.attr(\"width\",r).attr(\"height\",i),this.timeCurve.x(function(t){return this.xScale(t.z)}.bind(this)).y0(i).y1(function(t){return this.yScale(t.y)}.bind(this)),this.timeSelectorGraph.attr(\"d\",this.timeCurve),this.timeSelectorXAxis.attr(\"transform\",\"translate(0,\"+i+\")\").call(o),this.timeSelectorBrusher.call(this.brush).call(this.brush.move,[this.invertScale(this.selectedRange[0]),this.invertScale(this.selectedRange[1])]);var l=a.drag().on(\"start\",(function(){a.select(this).classed(\"selectedLine\",!0)})).on(\"drag\",function(){var t=a.select(\"#timeSelectorCurrent_\"+this.id),e=a.event.x;e<=this.margin.left?e=this.margin.left:this.margin.left+r<=e&&(e=this.margin.left+r);t.attr(\"x1\",e).attr(\"x2\",e);var n=this.xScale.invert(e-this.margin.left);s.searchTime(this.id,n)}.bind(this)).on(\"end\",(function(){a.select(this).classed(\"selectedLine\",!1)}));this.currentLine.attr(\"x1\",this.margin.left).attr(\"y1\",this.margin.top).attr(\"x2\",this.margin.left).attr(\"y2\",i+this.margin.top).call(l)}},{key:\"invertScale\",value:function(t){var e=this.xScale.range(),n=this.xScale.domain();return(t-n[0])*(e[1]-e[0])/(n[1]-n[0])+e[0]}},{key:\"updateTimeSelector\",value:function(){this.id,this.divID;var t=this.props.width,e=this.state.height,n=t-this.margin.left-this.margin.right,r=e-this.margin.top-this.margin.bottom;this.selectedRange;this.svg.attr(\"width\",this.props.width).attr(\"height\",this.state.height),this.xScale.range([0,n]);this.xScale;var i=a.axisBottom(this.xScale);this.brush.extent([[0,0],[n,r]]),this.yScale.range([r,0]),this.clip.attr(\"width\",n).attr(\"height\",r),this.timeCurve.x(function(t){return this.xScale(t.z)}.bind(this)).y0(r).y1(function(t){return this.yScale(t.y)}.bind(this)),this.timeSelectorGraph.attr(\"d\",this.timeCurve),this.timeSelectorXAxis.attr(\"transform\",\"translate(0,\"+r+\")\").call(i),this.timeSelectorBrusher.call(this.brush.move,[this.invertScale(this.selectedRange[0]),this.invertScale(this.selectedRange[1])]),this.currentLine.attr(\"y2\",r+this.margin.top)}},{key:\"moveCurrentLine\",value:function(t){var e=a.select(\"#timeSelectorCurrent_\"+this.id),n=this.xScale(t)+this.margin.left;e.attr(\"x1\",n).attr(\"x2\",n)}},{key:\"render\",value:function(){return a.selectAll(\"svg#timeSelectorSVG_\"+this.id).size()>0&&this.updateTimeSelector(),i.default.createElement(\"div\",{id:this.divID,className:\"timeSelector outerContainer\"})}}]),e}(i.default.Component);e.default=f},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(21),o=n(11),s=(r=o)&&r.__esModule?r:{default:r};var u=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.timeRange=[],t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:\"handleActions\",value:function(t){switch(t.type){case\"UPLOAD_DATA\":this.uploadData(t.data);break;case\"RESET_SCATTERPLOTS\":this.emit(\"resetScatterplots\",t.id);break;case\"MOVE_CURRENT_LINE_ON_TIMESELECTOR\":this.emit(\"moveCurrentLineonTimeSelector\",t.id,t.zpos);break;case\"UPDATE_TIME_RANGE\":this.updateTimeRange(t.id,t.range)}}},{key:\"getTimeRange\",value:function(t){return this.timeRange[t]}},{key:\"uploadData\",value:function(t){this.timeRange.push([t.meta.min.z,t.meta.max.z]),this.emit(\"upload\")}},{key:\"updateTimeRange\",value:function(t,e){this.timeRange[t]=e,this.emit(\"updateTimeRange\",t,e)}}]),e}(a.EventEmitter));s.default.register(u.handleActions.bind(u)),e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(0)),a=u(n(101)),o=(u(n(98)),u(n(3))),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(56));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.menuHeight=24,n.state={scatterplotsList:[],width:t.width,height:t.height},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;o.default.on(\"showInitSP\",(function(e){if(e===t.id){var n=t.state.scatterplotsList;n.push({x:\"z\",y:\"V\"}),t.setState({scatterplotsList:n})}}))}},{key:\"addScatterplots\",value:function(){var t=document.getElementById(\"scatterSelectXAxis_\"+this.id),e=document.getElementById(\"scatterSelectYAxis_\"+this.id),n=t.options[t.selectedIndex].value,r=e.options[e.selectedIndex].value;if(\"unselected\"!==n&&\"unselected\"!==r){var i=this.state.scatterplotsList;i.push({x:n,y:r}),this.setState({scatterplotsList:i})}}},{key:\"resetScatterplotsZoom\",value:function(){s.resetScatterplotsZoom(this.id)}},{key:\"render\",value:function(){var t=this,e=this.state.scatterplotsList.map((function(e,n){return i.default.createElement(\"div\",{key:t.id+\"_\"+n,id:\"scatterplots\"+t.id+\"_\"+n,style:{display:\"inline-block\"}},i.default.createElement(a.default,{key:t.id+\"_\"+n,id:t.id,divID:\"scatterplots\"+t.id+\"_\"+n,xItem:e.x,yItem:e.y,width:t.props.width,height:t.props.height-t.menuHeight}))})),n=[];for(var r in this.data.lookup){var o=\"\";o=this.data.lookup[r].length>1?this.data.lookup[r].join(\",\"):this.data.lookup[r],n.push(i.default.createElement(\"option\",{key:r,value:r},o))}return i.default.createElement(\"div\",{className:\"scatterplotsHolder\",id:\"scatterplotsHolder_\"+this.id},i.default.createElement(\"div\",{className:\"scatterplotsMenu row\"},this.fileName,i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",id:\"scatterResetBtn_\"+this.id,onClick:this.resetScatterplotsZoom.bind(this)},\"Reset\"),i.default.createElement(\"select\",{className:\"custom-select select_axis\",id:\"scatterSelectXAxis_\"+this.id,defaultValue:\"unselected\",style:{width:\"6rem\",height:\"1.5rem\",float:\"right\"}},i.default.createElement(\"option\",{value:\"unselected\"},\"x axis\"),n),i.default.createElement(\"select\",{className:\"custom-select select_axis\",id:\"scatterSelectYAxis_\"+this.id,defaultValue:\"unselected\",style:{width:\"6rem\",height:\"1.5rem\",float:\"right\"}},i.default.createElement(\"option\",{value:\"unselected\"},\"y axis\"),n),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",id:\"showScatter_\"+this.id,style:{float:\"right\"},onClick:this.addScatterplots.bind(this)},\"+\")),i.default.createElement(\"div\",{id:\"scatterplots_\"+this.id,className:\"scatterplotsViewports\"},e,i.default.createElement(\"div\",{style:{clear:\"both\"}})))}}]),e}(i.default.Component);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=d(n(0)),a=f(n(18)),o=f(n(19)),s=f(n(26)),u=d(n(3)),l=d(n(13)),c=d(n(99)),h=d(n(15));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}a.selection.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.margin={top:10,bottom:30,right:30,left:60},n.id=t.id,n.divID=t.divID,n.SPID=t.id+\"_\"+t.divID.split(\"_\")[1],n.data=u.default.getData(n.id);var r=c.default.getTimeRange(n.id);return n.timeRange=void 0===r?[n.data.data.meta.min.z,n.data.data.meta.max.z]:r,n.slicedData=n.data.data.spatial,n.xMinMax=[0,0],n.yMinMax=[0,0],n.selectedPeriod=[-1,-1],n.state={xItem:t.xItem,yItem:t.yItem,xItemonPanel:t.xItem,yItemonPanel:t.yItem,width:t.width,height:t.height},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;l.default.on(\"updateFocus\",(function(e,n,r){e===t.id&&(r?t.highlightCurrentPlot(n):t.updateCurrentPos(n))})),l.default.on(\"changePlotColor\",(function(e){e===t.id&&t.changePlotColor(l.default.getPlotColor(e))})),c.default.on(\"resetScatterplots\",(function(e){e===t.id&&t.reset()})),c.default.on(\"updateTimeRange\",(function(e,n){e===t.id&&(t.timeRange=n,t.computeRange(t.state.xItem,t.state.yItem),t.updateScatterplots(t.state.xItem,t.state.yItem))}))}},{key:\"componentDidMount\",value:function(){this.initalizeElements(),this.computeRange(this.state.xItem,this.state.yItem),this.drawScatterplots()}},{key:\"initalizeElements\",value:function(){this.zoom=a.zoom().scaleExtent([.5,20]),this.sp=a.select(\"#\"+this.divID).append(\"svg\").attr(\"id\",\"scatterplotsSVG_\"+this.SPID).attr(\"class\",\"scatterplot scatterplots\"+this.id+\" \"+this.divID),this.xScale=a.scaleLinear(),this.xScaleTmp=this.xScale,this.xAxis=this.sp.append(\"g\").attr(\"class\",\"x_axis \"+this.divID),this.xAxisText=a.selectAll(\"g.x_axis.\"+this.divID).append(\"text\").attr(\"class\",\"axisLabel \"+this.divID).attr(\"fill\",\"black\").attr(\"text-anchor\",\"middle\"),this.yScale=a.scaleLinear(),this.yScaleTmp=this.yScale,this.yAxis=this.sp.append(\"g\").attr(\"class\",\"y_axis \"+this.divID).attr(\"transform\",\"translate(\"+this.margin.left+\",\"+this.margin.top+\")\"),this.yAxisText=a.selectAll(\"g.y_axis.\"+this.divID).append(\"text\").attr(\"class\",\"axisLabel \"+this.divID).attr(\"fill\",\"black\").attr(\"transform\",\"rotate(-90)\").attr(\"text-anchor\",\"middle\"),this.tooltip=a.select(\"#\"+this.divID).append(\"div\").attr(\"class\",\"tooltip \"+this.divID).attr(\"id\",\"tooltip_\"+this.SPID).style(\"opacity\",.75).style(\"visibility\",\"hidden\"),this.line=a.line().x((function(t){return t[0]})).y((function(t){return t[1]})),this.lineH=this.sp.append(\"path\").attr(\"stroke\",\"orange\").attr(\"fill\",\"none\").attr(\"class\",\"currentLineH \"+this.divID+\" scatterplots\"+this.id).style(\"opacity\",.75).style(\"visibility\",\"hidden\"),this.lineV=this.sp.append(\"path\").attr(\"stroke\",\"orange\").attr(\"fill\",\"none\").attr(\"class\",\"currentLineV \"+this.divID+\" scatterplots\"+this.id).style(\"opacity\",.75).style(\"visibility\",\"hidden\"),this.clip=this.sp.append(\"defs\").append(\"clipPath\").attr(\"id\",\"clipScatterplots_\"+this.SPID).append(\"rect\"),this.point_g=this.sp.append(\"g\").attr(\"transform\",\"translate(\"+this.margin.left+\",\"+this.margin.top+\")\").attr(\"clip-path\",\"url(#clipScatterplots_\"+this.SPID+\")\").classed(\"points_g\",!0);var t=this.state.xItem,e=this.state.yItem;this.points=this.point_g.selectAll(\"circle\").data(this.slicedData).enter().append(\"circle\").select((function(n){return t in n&&e in n?this:null})).attr(\"opacity\",.7).attr(\"stroke-width\",.5).attr(\"stroke\",\"dimgray\").attr(\"r\",4).attr(\"class\",this.divID+\" scatterplots\"+this.id),this.divID.indexOf(\"QBE\")>=0&&(this.brush=a.brushX(),this.spBrusher=this.sp.append(\"g\").attr(\"transform\",\"translate(\"+this.margin.left+\",\"+this.margin.top+\")\").attr(\"class\",\"brush\"))}},{key:\"drawScatterplots\",value:function(){var t=this.id,e=this.SPID,n=this.divID,r=this.margin,i=this.data,c=this.props.width,f=this.props.height,d=c-this.margin.left-this.margin.right,p=f-this.margin.top-this.margin.bottom,m=this.state.xItem,g=this.state.yItem,v=this.tooltip;this.zoom.extent([[0,0],[d,p]]).on(\"zoom\",function(){if(n.indexOf(\"QBE\")>=0){var t=this.sp.select(\"g.brush\").select(\"rect.selection\"),e=Number(t.attr(\"x\")),r=Number(t.attr(\"width\"));this.xScale.invert(e),this.xScale.invert(e+r)}var i=a.event.transform.rescaleX(this.xScale),o=a.event.transform.rescaleY(this.yScale);this.xScaleTmp=i,this.yScaleTmp=o,this.xMinMax=i.domain(),this.yMinMax=o.domain(),this.xAxis.call(this.xLabel.scale(i)),this.yAxis.call(this.yLabel.scale(o)),this.points.attr(\"cx\",(function(t){return i(t[m])})).attr(\"cy\",(function(t){return o(t[g])}));var s=a.select(\"circle.current.\"+this.divID);if(s._groups[0][0]){var u=s.attr(\"cx\"),l=s.attr(\"cy\");l<=0||p<=l?this.lineH.attr(\"transform\",\"translate(\"+this.margin.left+\",\"+l+\")\").style(\"visibility\",\"hidden\"):this.lineH.transition().duration(0).attr(\"transform\",\"translate(\"+this.margin.left+\",\"+l+\")\").style(\"visibility\",\"visible\"),u<=0||d<=u?this.lineV.attr(\"transform\",\"translate(\"+u+\",\"+this.margin.top+\")\").style(\"visibility\",\"hidden\"):this.lineV.transition().duration(0).attr(\"transform\",\"translate(\"+u+\",\"+this.margin.top+\")\").style(\"visibility\",\"visible\")}}.bind(this)),this.sp.attr(\"width\",c).attr(\"height\",f).call(this.zoom).on(\"dblclick.zoom\",null),n.indexOf(\"QBE\")>=0&&(this.sp.on(\"mousedown.zoom\",null),this.brush.extent([[0,0],[d,p]]).on(\"start brush\",function(){var t=(a.event.selection||this.xScaleTmp.range).map(this.xScaleTmp.invert,this.xScaleTmp);this.selectedPeriod=t}.bind(this)).on(\"end\",function(){\"QBE\"===h.default.getMode()&&Number(h.default.getSource())===this.id&&(s.selectPeriodfromSP(this.selectedPeriod),this.highlightSelectedTimePeriod())}.bind(this)),this.spBrusher.call(this.brush)),this.xScale.domain(this.xMinMax).nice().range([0,d]),this.xScaleTmp=this.xScale,this.xMinMax=this.xScale.domain(),this.xLabel=a.axisBottom(this.xScale).ticks(10).tickSize(-p).tickFormat(P),this.xAxis.attr(\"transform\",\"translate(\"+this.margin.left+\",\"+(this.margin.top+p)+\")\").call(this.xLabel),this.xAxisText.attr(\"x\",d/2).attr(\"y\",this.margin.bottom/2+10).text(this.data.data.lookup[m]).on(\"click\",function(){var t=a.select(\"#changeXAxisPanel_\"+e);if(\"visible\"===t.style(\"visibility\"))t.transition().duration(50).style(\"visibility\",\"hidden\"),this.setState({xItemonPanel:this.state.xItem});else{var n=document.getElementById(\"changeXAxisPanel_\"+e).clientHeight,i=document.getElementById(\"changeXAxisPanel_\"+e).clientWidth;t.style(\"transform\",\"translate(\"+(d/2+r.left-i/2)+\"px,\"+(p+r.top-n)+\"px)\").style(\"visibility\",\"visible\")}}.bind(this)).on(\"mouseover\",(function(){a.select(this).style(\"fill\",\"orange\")})).on(\"mouseout\",(function(){a.select(this).style(\"fill\",\"black\")})),this.yScale.domain(this.yMinMax).nice().range([p,0]),this.yScaleTmp=this.yScale,this.yMinMax=this.yScale.domain(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickSize(-d).tickFormat(P),this.yAxis.call(this.yLabel),this.yAxisText.attr(\"x\",-p/2).attr(\"y\",-this.margin.left/2-10).text(this.data.data.lookup[g]).on(\"click\",function(){var t=a.select(\"#changeYAxisPanel_\"+e);if(\"visible\"===t.style(\"visibility\"))t.transition().duration(50).style(\"visibility\",\"hidden\"),this.setState({yItemonPanel:this.state.yItem});else{var n=document.getElementById(\"changeXAxisPanel_\"+e).clientHeight;document.getElementById(\"changeXAxisPanel_\"+e).clientWidth;t.style(\"transform\",\"translate(\"+r.left+\"px,\"+(p/2+r.top-n/2)+\"px)\").style(\"visibility\",\"visible\")}}.bind(this)).on(\"mouseover\",(function(){a.select(this).style(\"fill\",\"orange\")})).on(\"mouseout\",(function(){a.select(this).style(\"fill\",\"black\")}));var y=[[0,this.margin.top],[d,this.margin.top]],b=[[this.margin.left,0],[this.margin.left,p]];this.lineH.attr(\"d\",this.line(y)),this.lineV.attr(\"d\",this.line(b)),this.clip.attr(\"width\",d).attr(\"height\",p);if(this.data.data.merge){for(var _={},x=this.data.name.split(\",\"),w=[],S=0;S<x.length;S++){var E=u.default.getIdFromName(x[S]);_[x[S]]=S;var M=x[S].split(\"+\");if(M.length>1)for(var T=0;T<M.length;T++)_[M[T]]=S;w.push(l.default.getPlotColor(E))}this.points.attr(\"cx\",function(t){return this.xScale(t[m])}.bind(this)).attr(\"cy\",function(t){return this.yScale(t[g])}.bind(this)).attr(\"fill\",(function(t){return w[_[t.source]]})).on(\"mouseover\",k).on(\"mouseout\",A).on(\"dblclick\",O)}else{var C=l.default.getPlotColor(this.id);this.points.attr(\"cx\",function(t){return this.xScale(t[m])}.bind(this)).attr(\"cy\",function(t){return this.yScale(t[g])}.bind(this)).attr(\"fill\",C).on(\"mouseover\",k).on(\"mouseout\",A).on(\"dblclick\",O)}function P(t){var e=t;return Math.log10(Math.abs(t))<-2&&0!==t&&(e=t.toExponential(0)),e}function k(t){a.select(this).attr(\"stroke-width\",1).attr(\"stroke\",\"black\"),v.transition().duration(50).style(\"visibility\",\"visible\"),v.html(\"<i>\"+i.data.lookup[m]+\"</i>: \"+t[m]+\"<br/><i>\"+i.data.lookup[g]+\"</i>: \"+t[g]).style(\"left\",a.event.pageX+20+\"px\").style(\"top\",a.event.pageY-30+\"px\")}function A(t){var e=a.select(this);e.style(\"fill\")!==a.color(\"red\").toString()&&(e.attr(\"stroke-width\",.5).attr(\"stroke\",\"dimgray\"),e.attr(\"class\").indexOf(\"current\")<0?e.attr(\"stroke-width\",.5).attr(\"stroke\",\"dimgray\"):e.attr(\"stroke\",\"orange\").attr(\"stroke-width\",1)),v.transition().duration(150).style(\"visibility\",\"hidden\")}function O(e,n){o.searchTime(t,e.z)}}},{key:\"highlightCurrentPlot\",value:function(t){var e=this.margin,n=this.divID,r=t+this.data.data.spatial[0].z,i=a.selectAll(\"svg.\"+n),o=this.state.xItem,s=this.state.yItem;function u(t){var r=a.select(this),i=(r.attr(\"class\").split(\" \")[1],a.select(\"svg.\"+n)),o=i.selectAll(\".currentLineH\"),s=i.selectAll(\".currentLineV\");o.transition().duration(0).style(\"visibility\",\"visible\").attr(\"transform\",\"translate(\"+e.left+\",\"+r.attr(\"cy\")+\")\"),s.transition().duration(0).style(\"visibility\",\"visible\").attr(\"transform\",\"translate(\"+r.attr(\"cx\")+\",\"+e.top+\")\")}i.each((function(t){var e=a.select(this),n=e.selectAll(\"circle\"),i=e.attr(\"class\").split(\" \");n.attr(\"stroke-width\",.5).attr(\"stroke\",\"dimgray\").attr(\"class\",i[1]+\" \"+i[2]);var l=n.filter((function(t){return t.z===r&&o in t&&s in t}));l._groups.length>0&&l.attr(\"stroke\",\"orange\").attr(\"stroke-width\",1).attr(\"class\",i[1]+\" \"+i[2]+\" current\").moveToFront().each(u)}))}},{key:\"updateCurrentPos\",value:function(t){if(\"z\"===this.state.xItem){var e=a.scaleLinear().domain([this.xMinMax[0],this.xMinMax[1]]).range([0,this.props.width-this.margin.left-this.margin.right]),n=t+this.data.data.spatial[0].z;this.lineH.style(\"visibility\",\"hidden\"),this.lineV.transition().duration(0).style(\"visibility\",\"visible\").attr(\"transform\",\"translate(\"+e(n)+\",\"+this.margin.top+\")\")}else if(\"z\"===this.state.yItem){var r=a.scaleLinear().domain([this.yMinMax[0],this.yMinMax[1]]).range([0,this.props.height-this.margin.top-this.margin.bottom]),i=t+this.data.data.spatial[0].z;this.lineV.style(\"visibility\",\"hidden\"),this.lineH.transition().duration(0).style(\"visibility\",\"visible\").attr(\"transform\",\"translate(\"+this.margin.left+\",\"+r(i)+\")\")}}},{key:\"changePlotColor\",value:function(t){a.selectAll(\"circle\").attr(\"fill\",t)}},{key:\"onSelectXItem\",value:function(t){this.setState({xItemonPanel:t.target.value})}},{key:\"onSelectYItem\",value:function(t){this.setState({yItemonPanel:t.target.value})}},{key:\"computeRange\",value:function(t,e){this.slicedData=this.data.data.spatial.filter(function(t){return this.timeRange[0]<=t.z&&t.z<=this.timeRange[1]}.bind(this)),this.xMinMax=a.extent(this.slicedData,(function(e){return e[t]})),this.yMinMax=a.extent(this.slicedData,(function(t){return t[e]}))}},{key:\"updateScatterplots\",value:function(t,e){this.xScale.domain(this.xMinMax).nice(),this.yScale.domain(this.yMinMax).nice(),this.points.data(this.slicedData).attr(\"cx\",function(e){return this.xScale(e[t])}.bind(this)).attr(\"cy\",function(t){return this.yScale(t[e])}.bind(this)),this.points.data(this.slicedData).enter().append(\"circle\").attr(\"cx\",function(e){return this.xScale(e[t])}.bind(this)).attr(\"cy\",function(t){return this.yScale(t[e])}.bind(this)).select((function(n){return t in n&&e in n?this:null})).attr(\"opacity\",.7).attr(\"stroke-width\",.5).attr(\"stroke\",\"dimgray\").attr(\"r\",4).attr(\"class\",this.divID+\" scatterplots\"+this.id),this.points.data(this.slicedData).exit().remove(),this.xAxis.call(this.xLabel.scale(this.xScale)),this.yAxis.call(this.yLabel.scale(this.yScale))}},{key:\"highlightSelectedTimePeriod\",value:function(){var t=this.selectedPeriod;this.points.attr(\"stroke\",\"dimgray\"),this.points.select((function(e){return t[0]<=e.z&&e.z<=t[1]?this:null})).attr(\"stroke\",\"red\")}},{key:\"onClickXAxisDone\",value:function(t){this.setState({xItem:this.state.xItemonPanel}),this.computeRange(this.state.xItemonPanel,this.state.yItem),this.updateScatterplots(this.state.xItemonPanel,this.state.yItem),this.xAxisText.text(this.data.data.lookup[this.state.xItemonPanel]),a.select(\"#changeXAxisPanel_\"+this.SPID).transition().duration(50).style(\"visibility\",\"hidden\")}},{key:\"onClickYAxisDone\",value:function(t){this.setState({yItem:this.state.yItemonPanel}),this.computeRange(this.state.xItem,this.state.yItemonPanel),this.updateScatterplots(this.state.xItem,this.state.yItemonPanel),this.yAxisText.text(this.data.data.lookup[this.state.yItemonPanel]),a.select(\"#changeYAxisPanel_\"+this.SPID).transition().duration(50).style(\"visibility\",\"hidden\")}},{key:\"reset\",value:function(){this.sp.transition().duration(500).call(this.zoom.transform,a.zoomIdentity)}},{key:\"render\",value:function(){a.selectAll(\"svg#scatterplotsSVG_\"+this.SPID).size()>0&&this.drawScatterplots();var t=[],e=[],n=this.data.data.lookup;for(var r in n){var o=\"\";(o=n[r].length>1?n[r].join(\",\"):n[r]).indexOf(\"JD\")<0?(t.push(i.default.createElement(\"div\",{className:\"form-check\",key:o},i.default.createElement(\"input\",{type:\"radio\",name:\"selectXAxisForm_\"+this.SPID,value:r,checked:this.state.xItemonPanel===r,onChange:this.onSelectXItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\",key:o},o))),e.push(i.default.createElement(\"div\",{className:\"form-check\",key:o},i.default.createElement(\"input\",{type:\"radio\",name:\"selectYAxisForm_\"+this.SPID,value:r,checked:this.state.yItemonPanel===r,onChange:this.onSelectYItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\",key:o},o)))):(t.unshift(i.default.createElement(\"div\",{className:\"form-check\",key:o},i.default.createElement(\"input\",{type:\"radio\",name:\"selectXAxisForm_\"+this.SPID,value:r,checked:this.state.xItemonPanel===r,onChange:this.onSelectXItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\",key:o},o))),e.unshift(i.default.createElement(\"div\",{className:\"form-check\",key:o},i.default.createElement(\"input\",{type:\"radio\",name:\"selectYAxisForm_\"+this.SPID,value:r,checked:this.state.yItemonPanel===r,onChange:this.onSelectYItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\",key:o},o))))}return i.default.createElement(\"div\",{id:\"scatterplotsSelectors_\"+this.SPID},i.default.createElement(\"div\",{className:\"overlayPanel\",id:\"changeXAxisPanel_\"+this.SPID,style:{visibility:\"hidden\",textAlign:\"center\"}},i.default.createElement(\"h6\",null,\"Change x axis\"),i.default.createElement(\"div\",{id:\"changeXAxisItem_\"+this.SPID,style:{float:\"left\",textAlign:\"left\"}},i.default.createElement(\"form\",{id:\"selectXAxisForm_\"+this.SPID},t)),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",id:\"changeXAxisBtn_\"+this.SPID,onClick:this.onClickXAxisDone.bind(this)},\"Done\")),i.default.createElement(\"div\",{className:\"overlayPanel\",id:\"changeYAxisPanel_\"+this.SPID,style:{visibility:\"hidden\",textAlign:\"center\"}},i.default.createElement(\"h6\",null,\"Change y axis\"),i.default.createElement(\"div\",{id:\"changeYAxisItem_\"+this.SPID,style:{float:\"left\",textAlign:\"left\"}},i.default.createElement(\"form\",{id:\"selectYAxisForm_\"+this.SPID},e)),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",id:\"changeYAxisBtn_\"+this.SPID,onClick:this.onClickYAxisDone.bind(this)},\"Done\")))}}]),e}(i.default.Component);e.default=p},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(18)),o=l(n(3)),s=l(n(15)),u=l(n(101));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={data:o.default.getAllData(),source:-1},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;o.default.on(\"upload\",(function(){t.setState({data:o.default.getAllData()})})),s.default.on(\"updateSource\",(function(){var e=s.default.getSource();t.setState({source:s.default.getSource()}),e>=0&&null===document.getElementById(\"QBE_SP_\"+e)&&t.copySP(\"scatterplots\"+e+\"_0\",\"QBE_SP_\"+e)})),s.default.on(\"switchQueryMode\",(function(e){\"QBE\"===e&&t.state.source>=0&&null===document.getElementById(\"QBE_SP_\"+t.state.source)&&t.copySP(\"scatterplots\"+t.state.source+\"_0\",\"QBE_SP_\"+t.state.source)}))}},{key:\"copySP\",value:function(t,e){var n=a.select(\"#\"+t).html();a.select(\"#QBESourceSP\").append(\"div\").attr(\"id\",e).html(n)}},{key:\"render\",value:function(){var t=this,e=500;if(null!==document.getElementById(\"QBESource\")){var n=$(\"#QBESource\").outerWidth(!0)-2*Number($(\"#QBESource\").css(\"padding-left\").replace(\"px\",\"\"));n>0&&(e=n)}var r=this.state.data.map((function(n){return i.default.createElement(\"div\",{key:n.id,id:\"QBE_SP_\"+n.id,style:{display:n.id===Number(t.state.source)?\"block\":\"none\"}},i.default.createElement(u.default,{key:n.id,id:n.id,divID:\"QBE_SP_\"+n.id,xItem:\"z\",yItem:\"V\",width:e,height:Math.ceil(.8*e)}))}));return i.default.createElement(\"div\",{id:\"QBESource\",className:\"controllersElem featureColumn\",style:{float:\"left\",width:\"30%\"}},i.default.createElement(\"div\",{id:\"QBESourceTT\"}),i.default.createElement(\"div\",{id:\"QBESourceSP\"},r))}}]),e}(i.default.Component);e.default=c},function(t,e,n){\"use strict\";var r=o(n(0)),i=o(n(105)),a=o(n(109));function o(t){return t&&t.__esModule?t:{default:t}}n(313);var s=document.getElementById(\"app\");i.default.render(r.default.createElement(a.default,null),s)},function(t,e,n){\"use strict\";\n/** @license React v16.9.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var r=n(57),i=\"function\"==typeof Symbol&&Symbol.for,a=i?Symbol.for(\"react.element\"):60103,o=i?Symbol.for(\"react.portal\"):60106,s=i?Symbol.for(\"react.fragment\"):60107,u=i?Symbol.for(\"react.strict_mode\"):60108,l=i?Symbol.for(\"react.profiler\"):60114,c=i?Symbol.for(\"react.provider\"):60109,h=i?Symbol.for(\"react.context\"):60110,f=i?Symbol.for(\"react.forward_ref\"):60112,d=i?Symbol.for(\"react.suspense\"):60113,p=i?Symbol.for(\"react.suspense_list\"):60120,m=i?Symbol.for(\"react.memo\"):60115,g=i?Symbol.for(\"react.lazy\"):60116;i&&Symbol.for(\"react.fundamental\"),i&&Symbol.for(\"react.responder\");var v=\"function\"==typeof Symbol&&Symbol.iterator;function y(t){for(var e=t.message,n=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,r=1;r<arguments.length;r++)n+=\"&args[]=\"+encodeURIComponent(arguments[r]);return t.message=\"Minified React error #\"+e+\"; visit \"+n+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",t}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function x(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}function w(){}function S(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){if(\"object\"!=typeof t&&\"function\"!=typeof t&&null!=t)throw y(Error(85));this.updater.enqueueSetState(this,t,e,\"setState\")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,\"forceUpdate\")},w.prototype=x.prototype;var E=S.prototype=new w;E.constructor=S,r(E,x.prototype),E.isPureReactComponent=!0;var M={current:null},T={suspense:null},C={current:null},P=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r=void 0,i={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=\"\"+e.key),e)P.call(e,r)&&!k.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:t,key:o,ref:s,props:i,_owner:C.current}}function O(t){return\"object\"==typeof t&&null!==t&&t.$$typeof===a}var L=/\\/+/g,I=[];function N(t,e,n,r){if(I.length){var i=I.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>I.length&&I.push(t)}function D(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;\"undefined\"!==s&&\"boolean\"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case\"string\":case\"number\":u=!0;break;case\"object\":switch(e.$$typeof){case a:case o:u=!0}}if(u)return r(i,e,\"\"===n?\".\"+z(e,0):n),1;if(u=0,n=\"\"===n?\".\":n+\":\",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+z(s=e[l],l);u+=t(s,c,r,i)}else if(null===e||\"object\"!=typeof e?c=null:c=\"function\"==typeof(c=v&&e[v]||e[\"@@iterator\"])?c:null,\"function\"==typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+z(s,l++),r,i);else if(\"object\"===s)throw r=\"\"+e,y(Error(31),\"[object Object]\"===r?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":r,\"\");return u}(t,\"\",e,n)}function z(t,e){return\"object\"==typeof t&&null!==t&&null!=t.key?function(t){var e={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function B(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?j(t,r,n,(function(t){return t})):null!=t&&(O(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?\"\":(\"\"+t.key).replace(L,\"$&/\")+\"/\")+n)),r.push(t))}function j(t,e,n,r,i){var a=\"\";null!=n&&(a=(\"\"+n).replace(L,\"$&/\")+\"/\"),D(t,F,e=N(e,a,r,i)),R(e)}function U(){var t=M.current;if(null===t)throw y(Error(321));return t}var V={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return j(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;D(t,B,e=N(null,null,e,n)),R(e)},count:function(t){return D(t,(function(){return null}),null)},toArray:function(t){var e=[];return j(t,e,null,(function(t){return t})),e},only:function(t){if(!O(t))throw y(Error(143));return t}},createRef:function(){return{current:null}},Component:x,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:m,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return U().useCallback(t,e)},useContext:function(t,e){return U().useContext(t,e)},useEffect:function(t,e){return U().useEffect(t,e)},useImperativeHandle:function(t,e,n){return U().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return U().useLayoutEffect(t,e)},useMemo:function(t,e){return U().useMemo(t,e)},useReducer:function(t,e,n){return U().useReducer(t,e,n)},useRef:function(t){return U().useRef(t)},useState:function(t){return U().useState(t)},Fragment:s,Profiler:l,StrictMode:u,Suspense:d,unstable_SuspenseList:p,createElement:A,cloneElement:function(t,e,n){if(null==t)throw y(Error(267),t);var i=void 0,o=r({},t.props),s=t.key,u=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,l=C.current),void 0!==e.key&&(s=\"\"+e.key);var c=void 0;for(i in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)P.call(e,i)&&!k.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){c=Array(i);for(var h=0;h<i;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:a,type:t.type,key:s,ref:u,props:o,_owner:l}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:O,version:\"16.9.0\",unstable_withSuspenseConfig:function(t,e){var n=T.suspense;T.suspense=void 0===e?null:e;try{t()}finally{T.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:M,ReactCurrentBatchConfig:T,ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r}},H={default:V},G=H&&V||H;t.exports=G.default||G},function(t,e,n){\"use strict\";!function t(){if(\"undefined\"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&\"function\"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}}(),t.exports=n(106)},function(t,e,n){\"use strict\";\n/** @license React v16.9.0\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var r=n(0),i=n(57),a=n(107);function o(t){for(var e=t.message,n=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+e,r=1;r<arguments.length;r++)n+=\"&args[]=\"+encodeURIComponent(arguments[r]);return t.message=\"Minified React error #\"+e+\"; visit \"+n+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",t}if(!r)throw o(Error(227));var s=null,u={};function l(){if(s)for(var t in u){var e=u[t],n=s.indexOf(t);if(!(-1<n))throw o(Error(96),t);if(!h[n]){if(!e.extractEvents)throw o(Error(97),t);for(var r in h[n]=e,n=e.eventTypes){var i=void 0,a=n[r],l=e,d=r;if(f.hasOwnProperty(d))throw o(Error(99),d);f[d]=a;var p=a.phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&c(p[i],l,d);i=!0}else a.registrationName?(c(a.registrationName,l,d),i=!0):i=!1;if(!i)throw o(Error(98),r,t)}}}}function c(t,e,n){if(d[t])throw o(Error(100),t);d[t]=e,p[t]=e.eventTypes[n].dependencies}var h=[],f={},d={},p={};function m(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}var g=!1,v=null,y=!1,b=null,_={onError:function(t){g=!0,v=t}};function x(t,e,n,r,i,a,o,s,u){g=!1,v=null,m.apply(_,arguments)}var w=null,S=null,E=null;function M(t,e,n){var r=t.type||\"unknown-event\";t.currentTarget=E(n),function(t,e,n,r,i,a,s,u,l){if(x.apply(this,arguments),g){if(!g)throw o(Error(198));var c=v;g=!1,v=null,y||(y=!0,b=c)}}(r,e,void 0,t),t.currentTarget=null}function T(t,e){if(null==e)throw o(Error(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function C(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var P=null;function k(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)M(t,e[r],n[r]);else e&&M(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function A(t){if(null!==t&&(P=T(P,t)),t=P,P=null,t){if(C(t,k),P)throw o(Error(95));if(y)throw t=b,y=!1,b=null,t}}var O={injectEventPluginOrder:function(t){if(s)throw o(Error(101));s=Array.prototype.slice.call(t),l()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!u.hasOwnProperty(e)||u[e]!==r){if(u[e])throw o(Error(102),e);u[e]=r,n=!0}}n&&l()}};function L(t,e){var n=t.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[e];t:switch(e){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":(r=!r.disabled)||(r=!(\"button\"===(t=t.type)||\"input\"===t||\"select\"===t||\"textarea\"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&\"function\"!=typeof n)throw o(Error(231),e,typeof n);return n}var I=Math.random().toString(36).slice(2),N=\"__reactInternalInstance$\"+I,R=\"__reactEventHandlers$\"+I;function D(t){if(t[N])return t[N];for(;!t[N];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[N]).tag||6===t.tag?t:null}function z(t){return!(t=t[N])||5!==t.tag&&6!==t.tag?null:t}function B(t){if(5===t.tag||6===t.tag)return t.stateNode;throw o(Error(33))}function F(t){return t[R]||null}function j(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function U(t,e,n){(e=L(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function V(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=j(e);for(e=n.length;0<e--;)U(n[e],\"captured\",t);for(e=0;e<n.length;e++)U(n[e],\"bubbled\",t)}}function H(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=L(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function G(t){t&&t.dispatchConfig.registrationName&&H(t._targetInst,null,t)}function W(t){C(t,V)}var q=!(\"undefined\"==typeof window||void 0===window.document||void 0===window.document.createElement);function X(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n[\"Webkit\"+t]=\"webkit\"+e,n[\"Moz\"+t]=\"moz\"+e,n}var Y={animationend:X(\"Animation\",\"AnimationEnd\"),animationiteration:X(\"Animation\",\"AnimationIteration\"),animationstart:X(\"Animation\",\"AnimationStart\"),transitionend:X(\"Transition\",\"TransitionEnd\")},Q={},Z={};function $(t){if(Q[t])return Q[t];if(!Y[t])return t;var e,n=Y[t];for(e in n)if(n.hasOwnProperty(e)&&e in Z)return Q[t]=n[e];return t}q&&(Z=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),\"TransitionEvent\"in window||delete Y.transitionend.transition);var J=$(\"animationend\"),K=$(\"animationiteration\"),tt=$(\"animationstart\"),et=$(\"transitionend\"),nt=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),rt=null,it=null,at=null;function ot(){if(at)return at;var t,e,n=it,r=n.length,i=\"value\"in rt?rt.value:rt.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return at=i.slice(t,1<e?1-e:void 0)}function st(){return!0}function ut(){return!1}function lt(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):\"target\"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?st:ut,this.isPropagationStopped=ut,this}function ct(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ht(t){if(!(t instanceof this))throw o(Error(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ft(t){t.eventPool=[],t.getPooled=ct,t.release=ht}i(lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():\"unknown\"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=st)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():\"unknown\"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=st)},persist:function(){this.isPersistent=st},isPersistent:ut,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ut,this._dispatchInstances=this._dispatchListeners=null}}),lt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},lt.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var a=new e;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,ft(n),n},ft(lt);var dt=lt.extend({data:null}),pt=lt.extend({data:null}),mt=[9,13,27,32],gt=q&&\"CompositionEvent\"in window,vt=null;q&&\"documentMode\"in document&&(vt=document.documentMode);var yt=q&&\"TextEvent\"in window&&!vt,bt=q&&(!gt||vt&&8<vt&&11>=vt),_t=String.fromCharCode(32),xt={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",captured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},wt=!1;function St(t,e){switch(t){case\"keyup\":return-1!==mt.indexOf(e.keyCode);case\"keydown\":return 229!==e.keyCode;case\"keypress\":case\"mousedown\":case\"blur\":return!0;default:return!1}}function Et(t){return\"object\"==typeof(t=t.detail)&&\"data\"in t?t.data:null}var Mt=!1;var Tt={eventTypes:xt,extractEvents:function(t,e,n,r){var i=void 0,a=void 0;if(gt)t:{switch(t){case\"compositionstart\":i=xt.compositionStart;break t;case\"compositionend\":i=xt.compositionEnd;break t;case\"compositionupdate\":i=xt.compositionUpdate;break t}i=void 0}else Mt?St(t,n)&&(i=xt.compositionEnd):\"keydown\"===t&&229===n.keyCode&&(i=xt.compositionStart);return i?(bt&&\"ko\"!==n.locale&&(Mt||i!==xt.compositionStart?i===xt.compositionEnd&&Mt&&(a=ot()):(it=\"value\"in(rt=r)?rt.value:rt.textContent,Mt=!0)),i=dt.getPooled(i,e,n,r),a?i.data=a:null!==(a=Et(n))&&(i.data=a),W(i),a=i):a=null,(t=yt?function(t,e){switch(t){case\"compositionend\":return Et(e);case\"keypress\":return 32!==e.which?null:(wt=!0,_t);case\"textInput\":return(t=e.data)===_t&&wt?null:t;default:return null}}(t,n):function(t,e){if(Mt)return\"compositionend\"===t||!gt&&St(t,e)?(t=ot(),at=it=rt=null,Mt=!1,t):null;switch(t){case\"paste\":return null;case\"keypress\":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case\"compositionend\":return bt&&\"ko\"!==e.locale?null:e.data;default:return null}}(t,n))?((e=pt.getPooled(xt.beforeInput,e,n,r)).data=t,W(e)):e=null,null===a?e:null===e?a:[a,e]}},Ct=null,Pt=null,kt=null;function At(t){if(t=S(t)){if(\"function\"!=typeof Ct)throw o(Error(280));var e=w(t.stateNode);Ct(t.stateNode,t.type,e)}}function Ot(t){Pt?kt?kt.push(t):kt=[t]:Pt=t}function Lt(){if(Pt){var t=Pt,e=kt;if(kt=Pt=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function It(t,e){return t(e)}function Nt(t,e,n,r){return t(e,n,r)}function Rt(){}var Dt=It,zt=!1;function Bt(){null===Pt&&null===kt||(Rt(),Lt())}var Ft={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return\"input\"===e?!!Ft[t.type]:\"textarea\"===e}function Ut(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Vt(t){if(!q)return!1;var e=(t=\"on\"+t)in document;return e||((e=document.createElement(\"div\")).setAttribute(t,\"return;\"),e=\"function\"==typeof e[t]),e}function Ht(t){var e=t.type;return(t=t.nodeName)&&\"input\"===t.toLowerCase()&&(\"checkbox\"===e||\"radio\"===e)}function Gt(t){t._valueTracker||(t._valueTracker=function(t){var e=Ht(t)?\"checked\":\"value\",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=\"\"+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&\"function\"==typeof n.get&&\"function\"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=\"\"+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=\"\"+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r=\"\";return t&&(r=Ht(t)?t.checked?\"true\":\"false\":t.value),(t=r)!==n&&(e.setValue(t),!0)}var qt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;qt.hasOwnProperty(\"ReactCurrentDispatcher\")||(qt.ReactCurrentDispatcher={current:null}),qt.hasOwnProperty(\"ReactCurrentBatchConfig\")||(qt.ReactCurrentBatchConfig={suspense:null});var Xt=/^(.*)[\\\\\\/]/,Yt=\"function\"==typeof Symbol&&Symbol.for,Qt=Yt?Symbol.for(\"react.element\"):60103,Zt=Yt?Symbol.for(\"react.portal\"):60106,$t=Yt?Symbol.for(\"react.fragment\"):60107,Jt=Yt?Symbol.for(\"react.strict_mode\"):60108,Kt=Yt?Symbol.for(\"react.profiler\"):60114,te=Yt?Symbol.for(\"react.provider\"):60109,ee=Yt?Symbol.for(\"react.context\"):60110,ne=Yt?Symbol.for(\"react.concurrent_mode\"):60111,re=Yt?Symbol.for(\"react.forward_ref\"):60112,ie=Yt?Symbol.for(\"react.suspense\"):60113,ae=Yt?Symbol.for(\"react.suspense_list\"):60120,oe=Yt?Symbol.for(\"react.memo\"):60115,se=Yt?Symbol.for(\"react.lazy\"):60116;Yt&&Symbol.for(\"react.fundamental\"),Yt&&Symbol.for(\"react.responder\");var ue=\"function\"==typeof Symbol&&Symbol.iterator;function le(t){return null===t||\"object\"!=typeof t?null:\"function\"==typeof(t=ue&&t[ue]||t[\"@@iterator\"])?t:null}function ce(t){if(null==t)return null;if(\"function\"==typeof t)return t.displayName||t.name||null;if(\"string\"==typeof t)return t;switch(t){case $t:return\"Fragment\";case Zt:return\"Portal\";case Kt:return\"Profiler\";case Jt:return\"StrictMode\";case ie:return\"Suspense\";case ae:return\"SuspenseList\"}if(\"object\"==typeof t)switch(t.$$typeof){case ee:return\"Context.Consumer\";case te:return\"Context.Provider\";case re:var e=t.render;return e=e.displayName||e.name||\"\",t.displayName||(\"\"!==e?\"ForwardRef(\"+e+\")\":\"ForwardRef\");case oe:return ce(t.type);case se:if(t=1===t._status?t._result:null)return ce(t)}return null}function he(t){var e=\"\";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n=\"\";break t;default:var r=t._debugOwner,i=t._debugSource,a=ce(t.type);n=null,r&&(n=ce(r.type)),r=a,a=\"\",i?a=\" (at \"+i.fileName.replace(Xt,\"\")+\":\"+i.lineNumber+\")\":n&&(a=\" (created by \"+n+\")\"),n=\"\\n    in \"+(r||\"Unknown\")+a}e+=n,t=t.return}while(t);return e}var fe=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,de=Object.prototype.hasOwnProperty,pe={},me={};function ge(t,e,n,r,i,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a}var ve={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach((function(t){ve[t]=new ge(t,0,!1,t,null,!1)})),[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach((function(t){var e=t[0];ve[e]=new ge(e,1,!1,t[1],null,!1)})),[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach((function(t){ve[t]=new ge(t,2,!1,t.toLowerCase(),null,!1)})),[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach((function(t){ve[t]=new ge(t,2,!1,t,null,!1)})),\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach((function(t){ve[t]=new ge(t,3,!1,t.toLowerCase(),null,!1)})),[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach((function(t){ve[t]=new ge(t,3,!0,t,null,!1)})),[\"capture\",\"download\"].forEach((function(t){ve[t]=new ge(t,4,!1,t,null,!1)})),[\"cols\",\"rows\",\"size\",\"span\"].forEach((function(t){ve[t]=new ge(t,6,!1,t,null,!1)})),[\"rowSpan\",\"start\"].forEach((function(t){ve[t]=new ge(t,5,!1,t.toLowerCase(),null,!1)}));var ye=/[\\-:]([a-z])/g;function be(t){return t[1].toUpperCase()}function _e(t,e,n,r){var i=ve.hasOwnProperty(e)?ve[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&(\"o\"===e[0]||\"O\"===e[0])&&(\"n\"===e[1]||\"N\"===e[1])))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case\"function\":case\"symbol\":return!0;case\"boolean\":return!r&&(null!==n?!n.acceptsBooleans:\"data-\"!==(t=t.toLowerCase().slice(0,5))&&\"aria-\"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!de.call(me,t)||!de.call(pe,t)&&(fe.test(t)?me[t]=!0:(pe[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,\"\"+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&\"\":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?\"\":\"\"+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function xe(t){switch(typeof t){case\"boolean\":case\"number\":case\"object\":case\"string\":case\"undefined\":return t;default:return\"\"}}function we(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Se(t,e){var n=null==e.defaultValue?\"\":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=xe(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:\"checkbox\"===e.type||\"radio\"===e.type?null!=e.checked:null!=e.value}}function Ee(t,e){null!=(e=e.checked)&&_e(t,\"checked\",e,!1)}function Me(t,e){Ee(t,e);var n=xe(e.value),r=e.type;if(null!=n)\"number\"===r?(0===n&&\"\"===t.value||t.value!=n)&&(t.value=\"\"+n):t.value!==\"\"+n&&(t.value=\"\"+n);else if(\"submit\"===r||\"reset\"===r)return void t.removeAttribute(\"value\");e.hasOwnProperty(\"value\")?Ce(t,e.type,n):e.hasOwnProperty(\"defaultValue\")&&Ce(t,e.type,xe(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Te(t,e,n){if(e.hasOwnProperty(\"value\")||e.hasOwnProperty(\"defaultValue\")){var r=e.type;if(!(\"submit\"!==r&&\"reset\"!==r||void 0!==e.value&&null!==e.value))return;e=\"\"+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}\"\"!==(n=t.name)&&(t.name=\"\"),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,\"\"!==n&&(t.name=n)}function Ce(t,e,n){\"number\"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=\"\"+t._wrapperState.initialValue:t.defaultValue!==\"\"+n&&(t.defaultValue=\"\"+n))}\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach((function(t){var e=t.replace(ye,be);ve[e]=new ge(e,1,!1,t,null,!1)})),\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach((function(t){var e=t.replace(ye,be);ve[e]=new ge(e,1,!1,t,\"http://www.w3.org/1999/xlink\",!1)})),[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach((function(t){var e=t.replace(ye,be);ve[e]=new ge(e,1,!1,t,\"http://www.w3.org/XML/1998/namespace\",!1)})),[\"tabIndex\",\"crossOrigin\"].forEach((function(t){ve[t]=new ge(t,1,!1,t.toLowerCase(),null,!1)})),ve.xlinkHref=new ge(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0),[\"src\",\"href\",\"action\",\"formAction\"].forEach((function(t){ve[t]=new ge(t,1,!1,t.toLowerCase(),null,!0)}));var Pe={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function ke(t,e,n){return(t=lt.getPooled(Pe.change,t,e,n)).type=\"change\",Ot(n),W(t),t}var Ae=null,Oe=null;function Le(t){A(t)}function Ie(t){if(Wt(B(t)))return t}function Ne(t,e){if(\"change\"===t)return e}var Re=!1;function De(){Ae&&(Ae.detachEvent(\"onpropertychange\",ze),Oe=Ae=null)}function ze(t){if(\"value\"===t.propertyName&&Ie(Oe))if(t=ke(Oe,t,Ut(t)),zt)A(t);else{zt=!0;try{It(Le,t)}finally{zt=!1,Bt()}}}function Be(t,e,n){\"focus\"===t?(De(),Oe=n,(Ae=e).attachEvent(\"onpropertychange\",ze)):\"blur\"===t&&De()}function Fe(t){if(\"selectionchange\"===t||\"keyup\"===t||\"keydown\"===t)return Ie(Oe)}function je(t,e){if(\"click\"===t)return Ie(e)}function Ue(t,e){if(\"input\"===t||\"change\"===t)return Ie(e)}q&&(Re=Vt(\"input\")&&(!document.documentMode||9<document.documentMode));var Ve={eventTypes:Pe,_isInputEventSupported:Re,extractEvents:function(t,e,n,r){var i=e?B(e):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if(\"select\"===s||\"input\"===s&&\"file\"===i.type?a=Ne:jt(i)?Re?a=Ue:(a=Fe,o=Be):(s=i.nodeName)&&\"input\"===s.toLowerCase()&&(\"checkbox\"===i.type||\"radio\"===i.type)&&(a=je),a&&(a=a(t,e)))return ke(a,n,r);o&&o(t,i,e),\"blur\"===t&&(t=i._wrapperState)&&t.controlled&&\"number\"===i.type&&Ce(i,\"number\",i.value)}},He=lt.extend({view:null,detail:null}),Ge={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function We(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ge[t])&&!!e[t]}function qe(){return We}var Xe=0,Ye=0,Qe=!1,Ze=!1,$e=He.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:qe,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if(\"movementX\"in t)return t.movementX;var e=Xe;return Xe=t.screenX,Qe?\"mousemove\"===t.type?t.screenX-e:0:(Qe=!0,0)},movementY:function(t){if(\"movementY\"in t)return t.movementY;var e=Ye;return Ye=t.screenY,Ze?\"mousemove\"===t.type?t.screenY-e:0:(Ze=!0,0)}}),Je=$e.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ke={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",dependencies:[\"pointerout\",\"pointerover\"]}},tn={eventTypes:Ke,extractEvents:function(t,e,n,r){var i=\"mouseover\"===t||\"pointerover\"===t,a=\"mouseout\"===t||\"pointerout\"===t;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=e,e=(e=n.relatedTarget||n.toElement)?D(e):null):a=null,a===e)return null;var o=void 0,s=void 0,u=void 0,l=void 0;\"mouseout\"===t||\"mouseover\"===t?(o=$e,s=Ke.mouseLeave,u=Ke.mouseEnter,l=\"mouse\"):\"pointerout\"!==t&&\"pointerover\"!==t||(o=Je,s=Ke.pointerLeave,u=Ke.pointerEnter,l=\"pointer\");var c=null==a?i:B(a);if(i=null==e?i:B(e),(t=o.getPooled(s,a,n,r)).type=l+\"leave\",t.target=c,t.relatedTarget=i,(n=o.getPooled(u,e,n,r)).type=l+\"enter\",n.target=i,n.relatedTarget=c,r=e,a&&r)t:{for(i=r,l=0,o=e=a;o;o=j(o))l++;for(o=0,u=i;u;u=j(u))o++;for(;0<l-o;)e=j(e),l--;for(;0<o-l;)i=j(i),o--;for(;l--;){if(e===i||e===i.alternate)break t;e=j(e),i=j(i)}e=null}else e=null;for(i=e,e=[];a&&a!==i&&(null===(l=a.alternate)||l!==i);)e.push(a),a=j(a);for(a=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)a.push(r),r=j(r);for(r=0;r<e.length;r++)H(e[r],\"bubbled\",t);for(r=a.length;0<r--;)H(a[r],\"captured\",n);return[t,n]}};function en(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e}var nn=Object.prototype.hasOwnProperty;function rn(t,e){if(en(t,e))return!0;if(\"object\"!=typeof t||null===t||\"object\"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!nn.call(e,n[r])||!en(t[n[r]],e[n[r]]))return!1;return!0}function an(t,e){return{responder:t,props:e}}function on(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function sn(t){if(2!==on(t))throw o(Error(188))}function un(t){if(!(t=function(t){var e=t.alternate;if(!e){if(3===(e=on(t)))throw o(Error(188));return 1===e?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return sn(i),t;if(a===r)return sn(i),e;a=a.sibling}throw o(Error(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw o(Error(189))}}if(n.alternate!==r)throw o(Error(190))}if(3!==n.tag)throw o(Error(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}new Map,new Map,new Set,new Map;var ln=lt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),cn=lt.extend({clipboardData:function(t){return\"clipboardData\"in t?t.clipboardData:window.clipboardData}}),hn=He.extend({relatedTarget:null});function fn(t){var e=t.keyCode;return\"charCode\"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}for(var dn={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},pn={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},mn=He.extend({key:function(t){if(t.key){var e=dn[t.key]||t.key;if(\"Unidentified\"!==e)return e}return\"keypress\"===t.type?13===(t=fn(t))?\"Enter\":String.fromCharCode(t):\"keydown\"===t.type||\"keyup\"===t.type?pn[t.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:qe,charCode:function(t){return\"keypress\"===t.type?fn(t):0},keyCode:function(t){return\"keydown\"===t.type||\"keyup\"===t.type?t.keyCode:0},which:function(t){return\"keypress\"===t.type?fn(t):\"keydown\"===t.type||\"keyup\"===t.type?t.keyCode:0}}),gn=$e.extend({dataTransfer:null}),vn=He.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:qe}),yn=lt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),bn=$e.extend({deltaX:function(t){return\"deltaX\"in t?t.deltaX:\"wheelDeltaX\"in t?-t.wheelDeltaX:0},deltaY:function(t){return\"deltaY\"in t?t.deltaY:\"wheelDeltaY\"in t?-t.wheelDeltaY:\"wheelDelta\"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),_n=[[\"blur\",\"blur\",0],[\"cancel\",\"cancel\",0],[\"click\",\"click\",0],[\"close\",\"close\",0],[\"contextmenu\",\"contextMenu\",0],[\"copy\",\"copy\",0],[\"cut\",\"cut\",0],[\"auxclick\",\"auxClick\",0],[\"dblclick\",\"doubleClick\",0],[\"dragend\",\"dragEnd\",0],[\"dragstart\",\"dragStart\",0],[\"drop\",\"drop\",0],[\"focus\",\"focus\",0],[\"input\",\"input\",0],[\"invalid\",\"invalid\",0],[\"keydown\",\"keyDown\",0],[\"keypress\",\"keyPress\",0],[\"keyup\",\"keyUp\",0],[\"mousedown\",\"mouseDown\",0],[\"mouseup\",\"mouseUp\",0],[\"paste\",\"paste\",0],[\"pause\",\"pause\",0],[\"play\",\"play\",0],[\"pointercancel\",\"pointerCancel\",0],[\"pointerdown\",\"pointerDown\",0],[\"pointerup\",\"pointerUp\",0],[\"ratechange\",\"rateChange\",0],[\"reset\",\"reset\",0],[\"seeked\",\"seeked\",0],[\"submit\",\"submit\",0],[\"touchcancel\",\"touchCancel\",0],[\"touchend\",\"touchEnd\",0],[\"touchstart\",\"touchStart\",0],[\"volumechange\",\"volumeChange\",0],[\"drag\",\"drag\",1],[\"dragenter\",\"dragEnter\",1],[\"dragexit\",\"dragExit\",1],[\"dragleave\",\"dragLeave\",1],[\"dragover\",\"dragOver\",1],[\"mousemove\",\"mouseMove\",1],[\"mouseout\",\"mouseOut\",1],[\"mouseover\",\"mouseOver\",1],[\"pointermove\",\"pointerMove\",1],[\"pointerout\",\"pointerOut\",1],[\"pointerover\",\"pointerOver\",1],[\"scroll\",\"scroll\",1],[\"toggle\",\"toggle\",1],[\"touchmove\",\"touchMove\",1],[\"wheel\",\"wheel\",1],[\"abort\",\"abort\",2],[J,\"animationEnd\",2],[K,\"animationIteration\",2],[tt,\"animationStart\",2],[\"canplay\",\"canPlay\",2],[\"canplaythrough\",\"canPlayThrough\",2],[\"durationchange\",\"durationChange\",2],[\"emptied\",\"emptied\",2],[\"encrypted\",\"encrypted\",2],[\"ended\",\"ended\",2],[\"error\",\"error\",2],[\"gotpointercapture\",\"gotPointerCapture\",2],[\"load\",\"load\",2],[\"loadeddata\",\"loadedData\",2],[\"loadedmetadata\",\"loadedMetadata\",2],[\"loadstart\",\"loadStart\",2],[\"lostpointercapture\",\"lostPointerCapture\",2],[\"playing\",\"playing\",2],[\"progress\",\"progress\",2],[\"seeking\",\"seeking\",2],[\"stalled\",\"stalled\",2],[\"suspend\",\"suspend\",2],[\"timeupdate\",\"timeUpdate\",2],[et,\"transitionEnd\",2],[\"waiting\",\"waiting\",2]],xn={},wn={},Sn=0;Sn<_n.length;Sn++){var En=_n[Sn],Mn=En[0],Tn=En[1],Cn=En[2],Pn=\"on\"+(Tn[0].toUpperCase()+Tn.slice(1)),kn={phasedRegistrationNames:{bubbled:Pn,captured:Pn+\"Capture\"},dependencies:[Mn],eventPriority:Cn};xn[Tn]=kn,wn[Mn]=kn}var An={eventTypes:xn,getEventPriority:function(t){return void 0!==(t=wn[t])?t.eventPriority:2},extractEvents:function(t,e,n,r){var i=wn[t];if(!i)return null;switch(t){case\"keypress\":if(0===fn(n))return null;case\"keydown\":case\"keyup\":t=mn;break;case\"blur\":case\"focus\":t=hn;break;case\"click\":if(2===n.button)return null;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":t=$e;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":t=gn;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":t=vn;break;case J:case K:case tt:t=ln;break;case et:t=yn;break;case\"scroll\":t=He;break;case\"wheel\":t=bn;break;case\"copy\":case\"cut\":case\"paste\":t=cn;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":t=Je;break;default:t=lt}return W(e=t.getPooled(i,e,n,r)),e}},On=An.getEventPriority,Ln=[];function In(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=D(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Ut(t.nativeEvent);r=t.topLevelType;for(var a=t.nativeEvent,o=null,s=0;s<h.length;s++){var u=h[s];u&&(u=u.extractEvents(r,e,a,i))&&(o=T(o,u))}A(o)}}var Nn=!0;function Rn(t,e){Dn(e,t,!1)}function Dn(t,e,n){switch(On(e)){case 0:var r=zn.bind(null,e,1);break;case 1:r=Bn.bind(null,e,1);break;default:r=Fn.bind(null,e,1)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function zn(t,e,n){zt||Rt();var r=Fn,i=zt;zt=!0;try{Nt(r,t,e,n)}finally{(zt=i)||Bt()}}function Bn(t,e,n){Fn(t,e,n)}function Fn(t,e,n){if(Nn){if(null===(e=D(e=Ut(n)))||\"number\"!=typeof e.tag||2===on(e)||(e=null),Ln.length){var r=Ln.pop();r.topLevelType=t,r.nativeEvent=n,r.targetInst=e,t=r}else t={topLevelType:t,nativeEvent:n,targetInst:e,ancestors:[]};try{if(n=t,zt)In(n);else{zt=!0;try{Dt(In,n,void 0)}finally{zt=!1,Bt()}}}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Ln.length&&Ln.push(t)}}}var jn=new(\"function\"==typeof WeakMap?WeakMap:Map);function Un(t){var e=jn.get(t);return void 0===e&&(e=new Set,jn.set(t,e)),e}function Vn(t){if(void 0===(t=t||(\"undefined\"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gn(t,e){var n,r=Hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Hn(r)}}function Wn(){for(var t=window,e=Vn();e instanceof t.HTMLIFrameElement;){try{var n=\"string\"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Vn((t=e.contentWindow).document)}return e}function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(\"input\"===e&&(\"text\"===t.type||\"search\"===t.type||\"tel\"===t.type||\"url\"===t.type||\"password\"===t.type)||\"textarea\"===e||\"true\"===t.contentEditable)}var Xn=q&&\"documentMode\"in document&&11>=document.documentMode,Yn={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},Qn=null,Zn=null,$n=null,Jn=!1;function Kn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Jn||null==Qn||Qn!==Vn(n)?null:(\"selectionStart\"in(n=Qn)&&qn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},$n&&rn($n,n)?null:($n=n,(t=lt.getPooled(Yn.select,Zn,t,e)).type=\"select\",t.target=Qn,W(t),t))}var tr={eventTypes:Yn,extractEvents:function(t,e,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){t:{a=Un(a),i=p.onSelect;for(var o=0;o<i.length;o++)if(!a.has(i[o])){a=!1;break t}a=!0}i=!a}if(i)return null;switch(a=e?B(e):window,t){case\"focus\":(jt(a)||\"true\"===a.contentEditable)&&(Qn=a,Zn=e,$n=null);break;case\"blur\":$n=Zn=Qn=null;break;case\"mousedown\":Jn=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":return Jn=!1,Kn(n,r);case\"selectionchange\":if(Xn)break;case\"keydown\":case\"keyup\":return Kn(n,r)}return null}};function er(t,e){return t=i({children:void 0},e),(e=function(t){var e=\"\";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function nr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e[\"$\"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty(\"$\"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=\"\"+xe(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rr(t,e){if(null!=e.dangerouslySetInnerHTML)throw o(Error(91));return i({},e,{value:void 0,defaultValue:void 0,children:\"\"+t._wrapperState.initialValue})}function ir(t,e){var n=e.value;if(null==n){if(n=e.defaultValue,null!=(e=e.children)){if(null!=n)throw o(Error(92));if(Array.isArray(e)){if(!(1>=e.length))throw o(Error(93));e=e[0]}n=e}null==n&&(n=\"\")}t._wrapperState={initialValue:xe(n)}}function ar(t,e){var n=xe(e.value),r=xe(e.defaultValue);null!=n&&((n=\"\"+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=\"\"+r)}function or(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}O.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \")),w=F,S=z,E=B,O.injectEventPluginsByName({SimpleEventPlugin:An,EnterLeaveEventPlugin:tn,ChangeEventPlugin:Ve,SelectEventPlugin:tr,BeforeInputEventPlugin:Tt});var sr={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};function ur(t){switch(t){case\"svg\":return\"http://www.w3.org/2000/svg\";case\"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function lr(t,e){return null==t||\"http://www.w3.org/1999/xhtml\"===t?ur(e):\"http://www.w3.org/2000/svg\"===t&&\"foreignObject\"===e?\"http://www.w3.org/1999/xhtml\":t}var cr=void 0,hr=function(t){return\"undefined\"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==sr.svg||\"innerHTML\"in t)t.innerHTML=e;else{for((cr=cr||document.createElement(\"div\")).innerHTML=\"<svg>\"+e+\"</svg>\",e=cr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function fr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=[\"Webkit\",\"ms\",\"Moz\",\"O\"];function mr(t,e,n){return null==e||\"boolean\"==typeof e||\"\"===e?\"\":n||\"number\"!=typeof e||0===e||dr.hasOwnProperty(t)&&dr[t]?(\"\"+e).trim():e+\"px\"}function gr(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf(\"--\"),i=mr(n,e[n],r);\"float\"===n&&(n=\"cssFloat\"),r?t.setProperty(n,i):t[n]=i}}Object.keys(dr).forEach((function(t){pr.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dr[e]=dr[t]}))}));var vr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yr(t,e){if(e){if(vr[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw o(Error(137),t,\"\");if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw o(Error(60));if(!(\"object\"==typeof e.dangerouslySetInnerHTML&&\"__html\"in e.dangerouslySetInnerHTML))throw o(Error(61))}if(null!=e.style&&\"object\"!=typeof e.style)throw o(Error(62),\"\")}}function br(t,e){if(-1===t.indexOf(\"-\"))return\"string\"==typeof e.is;switch(t){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}function _r(t,e){var n=Un(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=p[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.has(i)){switch(i){case\"scroll\":Dn(t,\"scroll\",!0);break;case\"focus\":case\"blur\":Dn(t,\"focus\",!0),Dn(t,\"blur\",!0),n.add(\"blur\"),n.add(\"focus\");break;case\"cancel\":case\"close\":Vt(i)&&Dn(t,i,!0);break;case\"invalid\":case\"submit\":case\"reset\":break;default:-1===nt.indexOf(i)&&Rn(i,t)}n.add(i)}}}function xr(){}var wr=null,Sr=null;function Er(t,e){switch(t){case\"button\":case\"input\":case\"select\":case\"textarea\":return!!e.autoFocus}return!1}function Mr(t,e){return\"textarea\"===t||\"option\"===t||\"noscript\"===t||\"string\"==typeof e.children||\"number\"==typeof e.children||\"object\"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Tr=\"function\"==typeof setTimeout?setTimeout:void 0,Cr=\"function\"==typeof clearTimeout?clearTimeout:void 0;function Pr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}new Set;var kr=[],Ar=-1;function Or(t){0>Ar||(t.current=kr[Ar],kr[Ar]=null,Ar--)}function Lr(t,e){kr[++Ar]=t.current,t.current=e}var Ir={},Nr={current:Ir},Rr={current:!1},Dr=Ir;function zr(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Br(t){return null!=(t=t.childContextTypes)}function Fr(t){Or(Rr),Or(Nr)}function jr(t){Or(Rr),Or(Nr)}function Ur(t,e,n){if(Nr.current!==Ir)throw o(Error(168));Lr(Nr,e),Lr(Rr,n)}function Vr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,\"function\"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw o(Error(108),ce(e)||\"Unknown\",a);return i({},n,r)}function Hr(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Ir,Dr=Nr.current,Lr(Nr,e),Lr(Rr,Rr.current),!0}function Gr(t,e,n){var r=t.stateNode;if(!r)throw o(Error(169));n?(e=Vr(t,e,Dr),r.__reactInternalMemoizedMergedChildContext=e,Or(Rr),Or(Nr),Lr(Nr,e)):Or(Rr),Lr(Rr,n)}var Wr=a.unstable_runWithPriority,qr=a.unstable_scheduleCallback,Xr=a.unstable_cancelCallback,Yr=a.unstable_shouldYield,Qr=a.unstable_requestPaint,Zr=a.unstable_now,$r=a.unstable_getCurrentPriorityLevel,Jr=a.unstable_ImmediatePriority,Kr=a.unstable_UserBlockingPriority,ti=a.unstable_NormalPriority,ei=a.unstable_LowPriority,ni=a.unstable_IdlePriority,ri={},ii=void 0!==Qr?Qr:function(){},ai=null,oi=null,si=!1,ui=Zr(),li=1e4>ui?Zr:function(){return Zr()-ui};function ci(){switch($r()){case Jr:return 99;case Kr:return 98;case ti:return 97;case ei:return 96;case ni:return 95;default:throw o(Error(332))}}function hi(t){switch(t){case 99:return Jr;case 98:return Kr;case 97:return ti;case 96:return ei;case 95:return ni;default:throw o(Error(332))}}function fi(t,e){return t=hi(t),Wr(t,e)}function di(t,e,n){return t=hi(t),qr(t,e,n)}function pi(t){return null===ai?(ai=[t],oi=qr(Jr,gi)):ai.push(t),ri}function mi(){null!==oi&&Xr(oi),gi()}function gi(){if(!si&&null!==ai){si=!0;var t=0;try{var e=ai;fi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),ai=null}catch(e){throw null!==ai&&(ai=ai.slice(t+1)),qr(Jr,mi),e}finally{si=!1}}}function vi(t,e){return 1073741823===e?99:1===e?95:0>=(t=10*(1073741821-e)-10*(1073741821-t))?99:250>=t?98:5250>=t?97:95}function yi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var bi={current:null},_i=null,xi=null,wi=null;function Si(){wi=xi=_i=null}function Ei(t,e){var n=t.type._context;Lr(bi,n._currentValue),n._currentValue=e}function Mi(t){var e=bi.current;Or(bi),t.type._context._currentValue=e}function Ti(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function Ci(t,e){_i=t,wi=xi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(co=!0),t.firstContext=null)}function Pi(t,e){if(wi!==t&&!1!==e&&0!==e)if(\"number\"==typeof e&&1073741823!==e||(wi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===xi){if(null===_i)throw o(Error(308));xi=e,_i.dependencies={expirationTime:0,firstContext:e,responders:null}}else xi=xi.next=e;return t._currentValue}var ki=!1;function Ai(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Oi(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Li(t,e){return{expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Ii(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Ni(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=Ai(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=Ai(t.memoizedState),i=n.updateQueue=Ai(n.memoizedState)):r=t.updateQueue=Oi(i):null===i&&(i=n.updateQueue=Oi(r));null===i||r===i?Ii(r,e):null===r.lastUpdate||null===i.lastUpdate?(Ii(r,e),Ii(i,e)):(Ii(r,e),i.lastUpdate=e)}function Ri(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Ai(t.memoizedState):Di(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function Di(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Oi(e)),e}function zi(t,e,n,r,a,o){switch(n.tag){case 1:return\"function\"==typeof(t=n.payload)?t.call(o,r,a):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null==(a=\"function\"==typeof(t=n.payload)?t.call(o,r,a):t))break;return i({},r,a);case 2:ki=!0}return r}function Bi(t,e,n,r,i){ki=!1;for(var a=(e=Di(t,e)).baseState,o=null,s=0,u=e.firstUpdate,l=a;null!==u;){var c=u.expirationTime;c<i?(null===o&&(o=u,a=l),s<c&&(s=c)):(Vs(c,u.suspenseConfig),l=zi(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(c=null,u=e.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===c&&(c=u,null===o&&(a=l)),s<h&&(s=h)):(l=zi(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===o&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===o&&null===c&&(a=l),e.baseState=a,e.firstUpdate=o,e.firstCapturedUpdate=c,t.expirationTime=s,t.memoizedState=l}function Fi(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ji(e.firstEffect,n),e.firstEffect=e.lastEffect=null,ji(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function ji(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;if(\"function\"!=typeof n)throw o(Error(191),n);n.call(r)}t=t.nextEffect}}var Ui=qt.ReactCurrentBatchConfig,Vi=(new r.Component).refs;function Hi(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var Gi={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===on(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=ks(),i=Ui.suspense;(i=Li(r=As(r,t,i),i)).payload=e,null!=n&&(i.callback=n),Ni(t,i),Ls(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=ks(),i=Ui.suspense;(i=Li(r=As(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),Ni(t,i),Ls(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=ks(),r=Ui.suspense;(r=Li(n=As(n,t,r),r)).tag=2,null!=e&&(r.callback=e),Ni(t,r),Ls(t,n)}};function Wi(t,e,n,r,i,a,o){return\"function\"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!rn(n,r)||!rn(i,a))}function qi(t,e,n){var r=!1,i=Ir,a=e.contextType;return\"object\"==typeof a&&null!==a?a=Pi(a):(i=Br(e)?Dr:Nr.current,a=(r=null!=(r=e.contextTypes))?zr(t,i):Ir),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Gi,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Xi(t,e,n,r){t=e.state,\"function\"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),\"function\"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gi.enqueueReplaceState(e,e.state,null)}function Yi(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Vi;var a=e.contextType;\"object\"==typeof a&&null!==a?i.context=Pi(a):(a=Br(e)?Dr:Nr.current,i.context=zr(t,a)),null!==(a=t.updateQueue)&&(Bi(t,a,n,i,r),i.state=t.memoizedState),\"function\"==typeof(a=e.getDerivedStateFromProps)&&(Hi(t,e,a,n),i.state=t.memoizedState),\"function\"==typeof e.getDerivedStateFromProps||\"function\"==typeof i.getSnapshotBeforeUpdate||\"function\"!=typeof i.UNSAFE_componentWillMount&&\"function\"!=typeof i.componentWillMount||(e=i.state,\"function\"==typeof i.componentWillMount&&i.componentWillMount(),\"function\"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Gi.enqueueReplaceState(i,i.state,null),null!==(a=t.updateQueue)&&(Bi(t,a,n,i,r),i.state=t.memoizedState)),\"function\"==typeof i.componentDidMount&&(t.effectTag|=4)}var Qi=Array.isArray;function Zi(t,e,n){if(null!==(t=n.ref)&&\"function\"!=typeof t&&\"object\"!=typeof t){if(n._owner){n=n._owner;var r=void 0;if(n){if(1!==n.tag)throw o(Error(309));r=n.stateNode}if(!r)throw o(Error(147),t);var i=\"\"+t;return null!==e&&null!==e.ref&&\"function\"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===Vi&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if(\"string\"!=typeof t)throw o(Error(284));if(!n._owner)throw o(Error(290),t)}return t}function $i(t,e){if(\"textarea\"!==t.type)throw o(Error(31),\"[object Object]\"===Object.prototype.toString.call(e)?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":e,\"\")}function Ji(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=au(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=uu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Zi(t,e,n),r.return=t,r):((r=ou(n.type,n.key,n.props,null,t.mode,r)).ref=Zi(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=lu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,a){return null===e||7!==e.tag?((e=su(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if(\"string\"==typeof e||\"number\"==typeof e)return(e=uu(\"\"+e,t.mode,n)).return=t,e;if(\"object\"==typeof e&&null!==e){switch(e.$$typeof){case Qt:return(n=ou(e.type,e.key,e.props,null,t.mode,n)).ref=Zi(t,null,e),n.return=t,n;case Zt:return(e=lu(e,t.mode,n)).return=t,e}if(Qi(e)||le(e))return(e=su(e,t.mode,n,null)).return=t,e;$i(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if(\"string\"==typeof n||\"number\"==typeof n)return null!==i?null:u(t,e,\"\"+n,r);if(\"object\"==typeof n&&null!==n){switch(n.$$typeof){case Qt:return n.key===i?n.type===$t?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case Zt:return n.key===i?c(t,e,n,r):null}if(Qi(n)||le(n))return null!==i?null:h(t,e,n,r,null);$i(t,n)}return null}function p(t,e,n,r,i){if(\"string\"==typeof r||\"number\"==typeof r)return u(e,t=t.get(n)||null,\"\"+r,i);if(\"object\"==typeof r&&null!==r){switch(r.$$typeof){case Qt:return t=t.get(null===r.key?n:r.key)||null,r.type===$t?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case Zt:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(Qi(r)||le(r))return h(e,t=t.get(n)||null,r,i,null);$i(e,r)}return null}function m(i,o,s,u){for(var l=null,c=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(i,h,s[m],u);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(i,h),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v,h=g}if(m===s.length)return n(i,h),l;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(o=a(h,o,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],u))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),l}function g(i,s,u,l){var c=le(u);if(\"function\"!=typeof c)throw o(Error(150));if(null==(u=c.call(u)))throw o(Error(151));for(var h=c=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=d(i,m,y.value,l);if(null===b){null===m&&(m=v);break}t&&m&&null===b.alternate&&e(i,m),s=a(b,s,g),null===h?c=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return c}for(m=r(i,m);!y.done;g++,y=u.next())null!==(y=p(m,i,g,y.value,l))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(i,t)})),c}return function(t,r,a,u){var l=\"object\"==typeof a&&null!==a&&a.type===$t&&null===a.key;l&&(a=a.props.children);var c=\"object\"==typeof a&&null!==a;if(c)switch(a.$$typeof){case Qt:t:{for(c=a.key,l=r;null!==l;){if(l.key===c){if(7===l.tag?a.type===$t:l.elementType===a.type){n(t,l.sibling),(r=i(l,a.type===$t?a.props.children:a.props)).ref=Zi(t,l,a),r.return=t,t=r;break t}n(t,l);break}e(t,l),l=l.sibling}a.type===$t?((r=su(a.props.children,t.mode,u,a.key)).return=t,t=r):((u=ou(a.type,a.key,a.props,null,t.mode,u)).ref=Zi(t,r,a),u.return=t,t=u)}return s(t);case Zt:t:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(t,r.sibling),(r=i(r,a.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=lu(a,t.mode,u)).return=t,t=r}return s(t)}if(\"string\"==typeof a||\"number\"==typeof a)return a=\"\"+a,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,a)).return=t,t=r):(n(t,r),(r=uu(a,t.mode,u)).return=t,t=r),s(t);if(Qi(a))return m(t,r,a,u);if(le(a))return g(t,r,a,u);if(c&&$i(t,a),void 0===a&&!l)switch(t.tag){case 1:case 0:throw t=t.type,o(Error(152),t.displayName||t.name||\"Component\")}return n(t,r)}}var Ki=Ji(!0),ta=Ji(!1),ea={},na={current:ea},ra={current:ea},ia={current:ea};function aa(t){if(t===ea)throw o(Error(174));return t}function oa(t,e){Lr(ia,e),Lr(ra,t),Lr(na,ea);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lr(null,\"\");break;default:e=lr(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}Or(na),Lr(na,e)}function sa(t){Or(na),Or(ra),Or(ia)}function ua(t){aa(ia.current);var e=aa(na.current),n=lr(e,t.type);e!==n&&(Lr(ra,t),Lr(na,n))}function la(t){ra.current===t&&(Or(na),Or(ra))}var ca=1,ha=1,fa=2,da={current:0};function pa(t){for(var e=t;null!==e;){if(13===e.tag){if(null!==e.memoizedState)return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ma=0,ga=2,va=4,ya=8,ba=16,_a=32,xa=64,wa=128,Sa=qt.ReactCurrentDispatcher,Ea=0,Ma=null,Ta=null,Ca=null,Pa=null,ka=null,Aa=null,Oa=0,La=null,Ia=0,Na=!1,Ra=null,Da=0;function za(){throw o(Error(321))}function Ba(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Fa(t,e,n,r,i,a){if(Ea=a,Ma=e,Ca=null!==t?t.memoizedState:null,Sa.current=null===Ca?Ja:Ka,e=n(r,i),Na){do{Na=!1,Da+=1,Ca=null!==t?t.memoizedState:null,Aa=Pa,La=ka=Ta=null,Sa.current=Ka,e=n(r,i)}while(Na);Ra=null,Da=0}if(Sa.current=$a,(t=Ma).memoizedState=Pa,t.expirationTime=Oa,t.updateQueue=La,t.effectTag|=Ia,t=null!==Ta&&null!==Ta.next,Ea=0,Aa=ka=Pa=Ca=Ta=Ma=null,Oa=0,La=null,Ia=0,t)throw o(Error(300));return e}function ja(){Sa.current=$a,Ea=0,Aa=ka=Pa=Ca=Ta=Ma=null,Oa=0,La=null,Ia=0,Na=!1,Ra=null,Da=0}function Ua(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ka?Pa=ka=t:ka=ka.next=t,ka}function Va(){if(null!==Aa)Aa=(ka=Aa).next,Ca=null!==(Ta=Ca)?Ta.next:null;else{if(null===Ca)throw o(Error(310));var t={memoizedState:(Ta=Ca).memoizedState,baseState:Ta.baseState,queue:Ta.queue,baseUpdate:Ta.baseUpdate,next:null};ka=null===ka?Pa=t:ka.next=t,Ca=Ta.next}return ka}function Ha(t,e){return\"function\"==typeof e?e(t):e}function Ga(t){var e=Va(),n=e.queue;if(null===n)throw o(Error(311));if(n.lastRenderedReducer=t,0<Da){var r=n.dispatch;if(null!==Ra){var i=Ra.get(n);if(void 0!==i){Ra.delete(n);var a=e.memoizedState;do{a=t(a,i.action),i=i.next}while(null!==i);return en(a,e.memoizedState)||(co=!0),e.memoizedState=a,e.baseUpdate===n.last&&(e.baseState=a),n.lastRenderedState=a,[a,r]}}return[e.memoizedState,r]}r=n.last;var s=e.baseUpdate;if(a=e.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,l=r,c=!1;do{var h=l.expirationTime;h<Ea?(c||(c=!0,u=s,i=a),h>Oa&&(Oa=h)):(Vs(h,l.suspenseConfig),a=l.eagerReducer===t?l.eagerState:t(a,l.action)),s=l,l=l.next}while(null!==l&&l!==r);c||(u=s,i=a),en(a,e.memoizedState)||(co=!0),e.memoizedState=a,e.baseUpdate=u,e.baseState=i,n.lastRenderedState=a}return[e.memoizedState,n.dispatch]}function Wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===La?(La={lastEffect:null}).lastEffect=t.next=t:null===(e=La.lastEffect)?La.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,La.lastEffect=t),t}function qa(t,e,n,r){var i=Ua();Ia|=t,i.memoizedState=Wa(e,n,void 0,void 0===r?null:r)}function Xa(t,e,n,r){var i=Va();r=void 0===r?null:r;var a=void 0;if(null!==Ta){var o=Ta.memoizedState;if(a=o.destroy,null!==r&&Ba(r,o.deps))return void Wa(ma,n,a,r)}Ia|=t,i.memoizedState=Wa(e,n,a,r)}function Ya(t,e){return\"function\"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Qa(){}function Za(t,e,n){if(!(25>Da))throw o(Error(301));var r=t.alternate;if(t===Ma||null!==r&&r===Ma)if(Na=!0,t={expirationTime:Ea,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===Ra&&(Ra=new Map),void 0===(n=Ra.get(e)))Ra.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{var i=ks(),a=Ui.suspense;a={expirationTime:i=As(i,t,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var s=e.last;if(null===s)a.next=a;else{var u=s.next;null!==u&&(a.next=u),s.next=a}if(e.last=a,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var l=e.lastRenderedState,c=r(l,n);if(a.eagerReducer=r,a.eagerState=c,en(c,l))return}catch(t){}Ls(t,i)}}var $a={readContext:Pi,useCallback:za,useContext:za,useEffect:za,useImperativeHandle:za,useLayoutEffect:za,useMemo:za,useReducer:za,useRef:za,useState:za,useDebugValue:za,useResponder:za},Ja={readContext:Pi,useCallback:function(t,e){return Ua().memoizedState=[t,void 0===e?null:e],t},useContext:Pi,useEffect:function(t,e){return qa(516,wa|xa,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,qa(4,va|_a,Ya.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qa(4,va|_a,t,e)},useMemo:function(t,e){var n=Ua();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ua();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Za.bind(null,Ma,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ua().memoizedState=t},useState:function(t){var e=Ua();return\"function\"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:t}).dispatch=Za.bind(null,Ma,t),[e.memoizedState,t]},useDebugValue:Qa,useResponder:an},Ka={readContext:Pi,useCallback:function(t,e){var n=Va();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ba(e,r[1])?r[0]:(n.memoizedState=[t,e],t)},useContext:Pi,useEffect:function(t,e){return Xa(516,wa|xa,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Xa(4,va|_a,Ya.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xa(4,va|_a,t,e)},useMemo:function(t,e){var n=Va();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ba(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:Ga,useRef:function(){return Va().memoizedState},useState:function(t){return Ga(Ha)},useDebugValue:Qa,useResponder:an},to=null,eo=null,no=!1;function ro(t,e){var n=ru(5,null,null,0);n.elementType=\"DELETED\",n.type=\"DELETED\",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function io(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=\"\"===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function ao(t){if(no){var e=eo;if(e){var n=e;if(!io(t,e)){if(!(e=Pr(n.nextSibling))||!io(t,e))return t.effectTag|=2,no=!1,void(to=t);ro(to,n)}to=t,eo=Pr(e.firstChild)}else t.effectTag|=2,no=!1,to=t}}function oo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;to=t}function so(t){if(t!==to)return!1;if(!no)return oo(t),no=!0,!1;var e=t.type;if(5!==t.tag||\"head\"!==e&&\"body\"!==e&&!Mr(e,t.memoizedProps))for(e=eo;e;)ro(t,e),e=Pr(e.nextSibling);return oo(t),eo=to?Pr(t.stateNode.nextSibling):null,!0}function uo(){eo=to=null,no=!1}var lo=qt.ReactCurrentOwner,co=!1;function ho(t,e,n,r){e.child=null===t?ta(e,null,n,r):Ki(e,t.child,n,r)}function fo(t,e,n,r,i){n=n.render;var a=e.ref;return Ci(e,i),r=Fa(t,e,n,r,a,i),null===t||co?(e.effectTag|=1,ho(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Mo(t,e,i))}function po(t,e,n,r,i,a){if(null===t){var o=n.type;return\"function\"!=typeof o||iu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=ou(n.type,null,r,null,e.mode,a)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,mo(t,e,o,r,i,a))}return o=t.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:rn)(i,r)&&t.ref===e.ref)?Mo(t,e,a):(e.effectTag|=1,(t=au(o,r)).ref=e.ref,t.return=e,e.child=t)}function mo(t,e,n,r,i,a){return null!==t&&rn(t.memoizedProps,r)&&t.ref===e.ref&&(co=!1,i<a)?Mo(t,e,a):vo(t,e,n,r,a)}function go(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function vo(t,e,n,r,i){var a=Br(n)?Dr:Nr.current;return a=zr(e,a),Ci(e,i),n=Fa(t,e,n,r,a,i),null===t||co?(e.effectTag|=1,ho(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Mo(t,e,i))}function yo(t,e,n,r,i){if(Br(n)){var a=!0;Hr(e)}else a=!1;if(Ci(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),qi(e,n,r),Yi(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;\"object\"==typeof l&&null!==l?l=Pi(l):l=zr(e,l=Br(n)?Dr:Nr.current);var c=n.getDerivedStateFromProps,h=\"function\"==typeof c||\"function\"==typeof o.getSnapshotBeforeUpdate;h||\"function\"!=typeof o.UNSAFE_componentWillReceiveProps&&\"function\"!=typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Xi(e,o,r,l),ki=!1;var f=e.memoizedState;u=o.state=f;var d=e.updateQueue;null!==d&&(Bi(e,d,r,o,i),u=e.memoizedState),s!==r||f!==u||Rr.current||ki?(\"function\"==typeof c&&(Hi(e,n,c,r),u=e.memoizedState),(s=ki||Wi(e,n,s,r,f,u,l))?(h||\"function\"!=typeof o.UNSAFE_componentWillMount&&\"function\"!=typeof o.componentWillMount||(\"function\"==typeof o.componentWillMount&&o.componentWillMount(),\"function\"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),\"function\"==typeof o.componentDidMount&&(e.effectTag|=4)):(\"function\"==typeof o.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):(\"function\"==typeof o.componentDidMount&&(e.effectTag|=4),r=!1)}else o=e.stateNode,s=e.memoizedProps,o.props=e.type===e.elementType?s:yi(e.type,s),u=o.context,\"object\"==typeof(l=n.contextType)&&null!==l?l=Pi(l):l=zr(e,l=Br(n)?Dr:Nr.current),(h=\"function\"==typeof(c=n.getDerivedStateFromProps)||\"function\"==typeof o.getSnapshotBeforeUpdate)||\"function\"!=typeof o.UNSAFE_componentWillReceiveProps&&\"function\"!=typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Xi(e,o,r,l),ki=!1,u=e.memoizedState,f=o.state=u,null!==(d=e.updateQueue)&&(Bi(e,d,r,o,i),f=e.memoizedState),s!==r||u!==f||Rr.current||ki?(\"function\"==typeof c&&(Hi(e,n,c,r),f=e.memoizedState),(c=ki||Wi(e,n,s,r,u,f,l))?(h||\"function\"!=typeof o.UNSAFE_componentWillUpdate&&\"function\"!=typeof o.componentWillUpdate||(\"function\"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),\"function\"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),\"function\"==typeof o.componentDidUpdate&&(e.effectTag|=4),\"function\"==typeof o.getSnapshotBeforeUpdate&&(e.effectTag|=256)):(\"function\"!=typeof o.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),\"function\"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):(\"function\"!=typeof o.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),\"function\"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return bo(t,e,n,r,a,i)}function bo(t,e,n,r,i,a){go(t,e);var o=0!=(64&e.effectTag);if(!r&&!o)return i&&Gr(e,n,!1),Mo(t,e,a);r=e.stateNode,lo.current=e;var s=o&&\"function\"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&o?(e.child=Ki(e,t.child,null,a),e.child=Ki(e,null,s,a)):ho(t,e,s,a),e.memoizedState=r.state,i&&Gr(e,n,!0),e.child}function _o(t){var e=t.stateNode;e.pendingContext?Ur(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ur(0,e.context,!1),oa(t,e.containerInfo)}var xo={};function wo(t,e,n){var r,i=e.mode,a=e.pendingProps,o=da.current,s=null,u=!1;if((r=0!=(64&e.effectTag))||(r=0!=(o&fa)&&(null===t||null!==t.memoizedState)),r?(s=xo,u=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=ha),Lr(da,o&=ca),null===t)if(u){if(a=a.fallback,(t=su(null,i,0,null)).return=e,0==(2&e.mode))for(u=null!==e.memoizedState?e.child.child:e.child,t.child=u;null!==u;)u.return=t,u=u.sibling;(n=su(a,i,n,null)).return=e,t.sibling=n,i=t}else i=n=ta(e,null,a.children,n);else{if(null!==t.memoizedState)if(i=(o=t.child).sibling,u){if(a=a.fallback,(n=au(o,o.pendingProps)).return=e,0==(2&e.mode)&&(u=null!==e.memoizedState?e.child.child:e.child)!==o.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;(a=au(i,a,i.expirationTime)).return=e,n.sibling=a,i=n,n.childExpirationTime=0,n=a}else i=n=Ki(e,o.child,a.children,n);else if(o=t.child,u){if(u=a.fallback,(a=su(null,i,0,null)).return=e,a.child=o,null!==o&&(o.return=a),0==(2&e.mode))for(o=null!==e.memoizedState?e.child.child:e.child,a.child=o;null!==o;)o.return=a,o=o.sibling;(n=su(u,i,n,null)).return=e,a.sibling=n,n.effectTag|=2,i=a,a.childExpirationTime=0}else n=i=Ki(e,o,a.children,n);e.stateNode=t.stateNode}return e.memoizedState=s,e.child=i,n}function So(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i)}function Eo(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(ho(t,e,r.children,n),0!=((r=da.current)&fa))r=r&ca|fa,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag){if(null!==t.memoizedState){t.expirationTime<n&&(t.expirationTime=n);var o=t.alternate;null!==o&&o.expirationTime<n&&(o.expirationTime=n),Ti(t.return,n)}}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=ca}if(Lr(da,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case\"forwards\":for(n=e.child,i=null;null!==n;)null!==(r=n.alternate)&&null===pa(r)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),So(e,!1,i,n,a);break;case\"backwards\":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(r=i.alternate)&&null===pa(r)){e.child=i;break}r=i.sibling,i.sibling=n,n=i,i=r}So(e,!0,n,null,a);break;case\"together\":So(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw o(Error(153));if(null!==e.child){for(n=au(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=au(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function To(t){t.effectTag|=4}var Co=void 0,Po=void 0,ko=void 0,Ao=void 0;function Oo(t,e){switch(t.tailMode){case\"hidden\":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case\"collapsed\":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lo(t){switch(t.tag){case 1:Br(t.type)&&Fr();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:if(sa(),jr(),0!=(64&(e=t.effectTag)))throw o(Error(285));return t.effectTag=-2049&e|64,t;case 5:return la(t),null;case 13:return Or(da),2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 19:return Or(da),null;case 4:return sa(),null;case 10:return Mi(t),null;default:return null}}function Io(t,e){return{value:t,source:e,stack:he(e)}}Co=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(20===n.tag)t.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},ko=function(t,e,n,r,a){var o=t.memoizedProps;if(o!==r){var s=e.stateNode;switch(aa(na.current),t=null,n){case\"input\":o=we(s,o),r=we(s,r),t=[];break;case\"option\":o=er(s,o),r=er(s,r),t=[];break;case\"select\":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case\"textarea\":o=rr(s,o),r=rr(s,r),t=[];break;default:\"function\"!=typeof o.onClick&&\"function\"==typeof r.onClick&&(s.onclick=xr)}yr(n,r),s=n=void 0;var u=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if(\"style\"===n){var l=o[n];for(s in l)l.hasOwnProperty(s)&&(u||(u={}),u[s]=\"\")}else\"dangerouslySetInnerHTML\"!==n&&\"children\"!==n&&\"suppressContentEditableWarning\"!==n&&\"suppressHydrationWarning\"!==n&&\"autoFocus\"!==n&&(d.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var c=r[n];if(l=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if(\"style\"===n)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(u||(u={}),u[s]=\"\");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(u||(u={}),u[s]=c[s])}else u||(t||(t=[]),t.push(n,u)),u=c;else\"dangerouslySetInnerHTML\"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(n,\"\"+c)):\"children\"===n?l===c||\"string\"!=typeof c&&\"number\"!=typeof c||(t=t||[]).push(n,\"\"+c):\"suppressContentEditableWarning\"!==n&&\"suppressHydrationWarning\"!==n&&(d.hasOwnProperty(n)?(null!=c&&_r(a,n),t||l===c||(t=[])):(t=t||[]).push(n,c))}u&&(t=t||[]).push(\"style\",u),a=t,(e.updateQueue=a)&&To(e)}},Ao=function(t,e,n,r){n!==r&&To(e)};var No=\"function\"==typeof WeakSet?WeakSet:Set;function Ro(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=he(n)),null!==n&&ce(n.type),e=e.value,null!==t&&1===t.tag&&ce(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function Do(t){var e=t.ref;if(null!==e)if(\"function\"==typeof e)try{e(null)}catch(e){Zs(t,e)}else e.current=null}function zo(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&t)!==ma){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&e)!==ma&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function Bo(t,e){switch(\"function\"==typeof eu&&eu(t),t.tag){case 0:case 11:case 14:case 15:var n=t.updateQueue;if(null!==n&&null!==(n=n.lastEffect)){var r=n.next;fi(97<e?97:e,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(t){Zs(i,t)}}e=e.next}while(e!==r)}))}break;case 1:Do(t),\"function\"==typeof(e=t.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Zs(t,e)}}(t,e);break;case 5:Do(t);break;case 4:Vo(t,e)}}function Fo(t,e){for(var n=t;;)if(Bo(n,e),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function jo(t){return 5===t.tag||3===t.tag||4===t.tag}function Uo(t){t:{for(var e=t.return;null!==e;){if(jo(e)){var n=e;break t}e=e.return}throw o(Error(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw o(Error(161))}16&n.effectTag&&(fr(e,\"\"),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||jo(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){var a=5===i.tag||6===i.tag;if(a||20===i.tag){var s=a?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(a=e).nodeType?a.parentNode.insertBefore(u,s):a.insertBefore(u,s)}else e.insertBefore(s,n);else r?(8===(u=e).nodeType?(a=u.parentNode).insertBefore(s,u):(a=u).appendChild(s),null!=(u=u._reactRootContainer)||null!==a.onclick||(a.onclick=xr)):e.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Vo(t,e){for(var n=t,r=!1,i=void 0,a=void 0;;){if(!r){r=n.return;t:for(;;){if(null===r)throw o(Error(160));switch(i=r.stateNode,r.tag){case 5:a=!1;break t;case 3:case 4:i=i.containerInfo,a=!0;break t}r=r.return}r=!0}if(5===n.tag||6===n.tag)if(Fo(n,e),a){var s=i,u=n.stateNode;8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)}else i.removeChild(n.stateNode);else if(20===n.tag)u=n.stateNode.instance,Fo(n,e),a?8===(s=i).nodeType?s.parentNode.removeChild(u):s.removeChild(u):i.removeChild(u);else if(4===n.tag){if(null!==n.child){i=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(Bo(n,e),null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;4===(n=n.return).tag&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Ho(t,e){switch(e.tag){case 0:case 11:case 14:case 15:zo(va,ya,e);break;case 1:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,null!==a){for(n[R]=r,\"input\"===t&&\"radio\"===r.type&&null!=r.name&&Ee(n,r),br(t,i),e=br(t,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];\"style\"===s?gr(n,u):\"dangerouslySetInnerHTML\"===s?hr(n,u):\"children\"===s?fr(n,u):_e(n,s,u,e)}switch(t){case\"input\":Me(n,r);break;case\"textarea\":ar(n,r);break;case\"select\":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?nr(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?nr(n,!!r.multiple,r.defaultValue,!0):nr(n,!!r.multiple,r.multiple?[]:\"\",!1))}}}break;case 6:if(null===e.stateNode)throw o(Error(162));e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,ms=li()),null!==n)t:for(t=n;;){if(5===t.tag)a=t.stateNode,r?\"function\"==typeof(a=a.style).setProperty?a.setProperty(\"display\",\"none\",\"important\"):a.display=\"none\":(a=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty(\"display\")?i.display:null,a.style.display=mr(\"display\",i));else if(6===t.tag)t.stateNode.nodeValue=r?\"\":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState){(a=t.child.sibling).return=t,t=a;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break t;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}Go(e);break;case 19:Go(e);break;case 17:case 20:break;default:throw o(Error(163))}}function Go(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new No),e.forEach((function(e){var r=Js.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var Wo=\"function\"==typeof WeakMap?WeakMap:Map;function qo(t,e,n){(n=Li(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ys||(ys=!0,bs=r),Ro(t,e)},n}function Xo(t,e,n){(n=Li(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if(\"function\"==typeof r){var i=e.value;n.payload=function(){return Ro(t,e),r(i)}}var a=t.stateNode;return null!==a&&\"function\"==typeof a.componentDidCatch&&(n.callback=function(){\"function\"!=typeof r&&(null===_s?_s=new Set([this]):_s.add(this),Ro(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:\"\"})}),n}var Yo=Math.ceil,Qo=qt.ReactCurrentDispatcher,Zo=qt.ReactCurrentOwner,$o=0,Jo=8,Ko=16,ts=32,es=0,ns=1,rs=2,is=3,as=4,os=$o,ss=null,us=null,ls=0,cs=es,hs=1073741823,fs=1073741823,ds=null,ps=!1,ms=0,gs=500,vs=null,ys=!1,bs=null,_s=null,xs=!1,ws=null,Ss=90,Es=0,Ms=null,Ts=0,Cs=null,Ps=0;function ks(){return(os&(Ko|ts))!==$o?1073741821-(li()/10|0):0!==Ps?Ps:Ps=1073741821-(li()/10|0)}function As(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=ci();if(0==(4&e))return 99===r?1073741823:1073741822;if((os&Ko)!==$o)return ls;if(null!==n)t=1073741821-25*(1+((1073741821-t+(0|n.timeoutMs||5e3)/10)/25|0));else switch(r){case 99:t=1073741823;break;case 98:t=1073741821-10*(1+((1073741821-t+15)/10|0));break;case 97:case 96:t=1073741821-25*(1+((1073741821-t+500)/25|0));break;case 95:t=1;break;default:throw o(Error(326))}return null!==ss&&t===ls&&--t,t}var Os=0;function Ls(t,e){if(50<Ts)throw Ts=0,Cs=null,o(Error(185));if(null!==(t=Is(t,e))){t.pingTime=0;var n=ci();if(1073741823===e)if((os&Jo)!==$o&&(os&(Ko|ts))===$o)for(var r=Us(t,1073741823,!0);null!==r;)r=r(!0);else Ns(t,99,1073741823),os===$o&&mi();else Ns(t,n,e);(4&os)===$o||98!==n&&99!==n||(null===Ms?Ms=new Map([[t,e]]):(void 0===(n=Ms.get(t))||n>e)&&Ms.set(t,e))}}function Is(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(e>i.firstPendingTime&&(i.firstPendingTime=e),0===(t=i.lastPendingTime)||e<t)&&(i.lastPendingTime=e),i}function Ns(t,e,n){if(t.callbackExpirationTime<n){var r=t.callbackNode;null!==r&&r!==ri&&Xr(r),t.callbackExpirationTime=n,1073741823===n?t.callbackNode=pi(Rs.bind(null,t,Us.bind(null,t,n))):(r=null,1!==n&&(r={timeout:10*(1073741821-n)-li()}),t.callbackNode=di(e,Rs.bind(null,t,Us.bind(null,t,n)),r))}}function Rs(t,e,n){var r=t.callbackNode,i=null;try{return null!==(i=e(n))?Rs.bind(null,t,i):null}finally{null===i&&r===t.callbackNode&&(t.callbackNode=null,t.callbackExpirationTime=0)}}function Ds(){(os&(1|Ko|ts))===$o&&(function(){if(null!==Ms){var t=Ms;Ms=null,t.forEach((function(t,e){pi(Us.bind(null,e,t))})),mi()}}(),Xs())}function zs(t,e){var n=os;os|=1;try{return t(e)}finally{(os=n)===$o&&mi()}}function Bs(t,e,n,r){var i=os;os|=4;try{return fi(98,t.bind(null,e,n,r))}finally{(os=i)===$o&&mi()}}function Fs(t,e){var n=os;os&=-2,os|=Jo;try{return t(e)}finally{(os=n)===$o&&mi()}}function js(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Cr(n)),null!==us)for(n=us.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!=i&&Fr();break;case 3:sa(),jr();break;case 5:la(r);break;case 4:sa();break;case 13:case 19:Or(da);break;case 10:Mi(r)}n=n.return}ss=t,us=au(t.current,null),ls=e,cs=es,fs=hs=1073741823,ds=null,ps=!1}function Us(t,e,n){if((os&(Ko|ts))!==$o)throw o(Error(327));if(t.firstPendingTime<e)return null;if(n&&t.finishedExpirationTime===e)return Ws.bind(null,t);if(Xs(),t!==ss||e!==ls)js(t,e);else if(cs===is)if(ps)js(t,e);else{var r=t.lastPendingTime;if(r<e)return Us.bind(null,t,r)}if(null!==us){r=os,os|=Ko;var i=Qo.current;if(null===i&&(i=$a),Qo.current=$a,n){if(1073741823!==e){var a=ks();if(a<e)return os=r,Si(),Qo.current=i,Us.bind(null,t,a)}}else Ps=0;for(;;)try{if(n)for(;null!==us;)us=Hs(us);else for(;null!==us&&!Yr();)us=Hs(us);break}catch(n){if(Si(),ja(),null===(a=us)||null===a.return)throw js(t,e),os=r,n;t:{var s=t,u=a.return,l=a,c=n,h=ls;if(l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==c&&\"object\"==typeof c&&\"function\"==typeof c.then){var f=c,d=0!=(da.current&ha);c=u;do{var p;if((p=13===c.tag)&&(null!==c.memoizedState?p=!1:p=void 0!==(p=c.memoizedProps).fallback&&(!0!==p.unstable_avoidThisFallback||!d)),p){if(null===(u=c.updateQueue)?((u=new Set).add(f),c.updateQueue=u):u.add(f),0==(2&c.mode)){c.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((h=Li(1073741823,null)).tag=2,Ni(l,h))),l.expirationTime=1073741823;break t}l=s,s=h,null===(d=l.pingCache)?(d=l.pingCache=new Wo,u=new Set,d.set(f,u)):void 0===(u=d.get(f))&&(u=new Set,d.set(f,u)),u.has(s)||(u.add(s),l=$s.bind(null,l,f,s),f.then(l,l)),c.effectTag|=2048,c.expirationTime=h;break t}c=c.return}while(null!==c);c=Error((ce(l.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\"+he(l))}cs!==as&&(cs=ns),c=Io(c,l),l=u;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=h,Ri(l,h=qo(l,c,h));break t;case 1:if(f=c,s=l.type,u=l.stateNode,0==(64&l.effectTag)&&(\"function\"==typeof s.getDerivedStateFromError||null!==u&&\"function\"==typeof u.componentDidCatch&&(null===_s||!_s.has(u)))){l.effectTag|=2048,l.expirationTime=h,Ri(l,h=Xo(l,f,h));break t}}l=l.return}while(null!==l)}us=Gs(a)}if(os=r,Si(),Qo.current=i,null!==us)return Us.bind(null,t,e)}if(t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,function(t,e){var n=t.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=e)&&(di(97,(function(){return n._onComplete(),null})),!0)}(t,e))return null;switch(ss=null,cs){case es:throw o(Error(328));case ns:return(r=t.lastPendingTime)<e?Us.bind(null,t,r):n?Ws.bind(null,t):(js(t,e),pi(Us.bind(null,t,e)),null);case rs:return 1073741823===hs&&!n&&10<(n=ms+gs-li())?ps?(js(t,e),Us.bind(null,t,e)):(r=t.lastPendingTime)<e?Us.bind(null,t,r):(t.timeoutHandle=Tr(Ws.bind(null,t),n),null):Ws.bind(null,t);case is:if(!n){if(ps)return js(t,e),Us.bind(null,t,e);if((n=t.lastPendingTime)<e)return Us.bind(null,t,n);if(1073741823!==fs?n=10*(1073741821-fs)-li():1073741823===hs?n=0:(n=10*(1073741821-hs)-5e3,0>(n=(r=li())-n)&&(n=0),(e=10*(1073741821-e)-r)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yo(n/1960))-n)&&(n=e)),10<n)return t.timeoutHandle=Tr(Ws.bind(null,t),n),null}return Ws.bind(null,t);case as:return!n&&1073741823!==hs&&null!==ds&&(r=hs,0>=(e=0|(i=ds).busyMinDurationMs)?e=0:(n=0|i.busyDelayMs,e=(r=li()-(10*(1073741821-r)-(0|i.timeoutMs||5e3)))<=n?0:n+e-r),10<e)?(t.timeoutHandle=Tr(Ws.bind(null,t),e),null):Ws.bind(null,t);default:throw o(Error(329))}}function Vs(t,e){t<hs&&1<t&&(hs=t),null!==e&&t<fs&&1<t&&(fs=t,ds=e)}function Hs(t){var e=Ks(t.alternate,t,ls);return t.memoizedProps=t.pendingProps,null===e&&(e=Gs(t)),Zo.current=null,e}function Gs(t){us=t;do{var e=us.alternate;if(t=us.return,0==(1024&us.effectTag)){t:{var n=e,r=ls,a=(e=us).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Br(e.type)&&Fr();break;case 3:sa(),jr(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==n&&null!==n.child||(so(e),e.effectTag&=-3),Po(e);break;case 5:la(e),r=aa(ia.current);var s=e.type;if(null!==n&&null!=e.stateNode)ko(n,e,s,a,r),n.ref!==e.ref&&(e.effectTag|=128);else if(a){var u=aa(na.current);if(so(e)){a=void 0,s=(n=e).stateNode;var l=n.type,c=n.memoizedProps;switch(s[N]=n,s[R]=c,l){case\"iframe\":case\"object\":case\"embed\":Rn(\"load\",s);break;case\"video\":case\"audio\":for(var h=0;h<nt.length;h++)Rn(nt[h],s);break;case\"source\":Rn(\"error\",s);break;case\"img\":case\"image\":case\"link\":Rn(\"error\",s),Rn(\"load\",s);break;case\"form\":Rn(\"reset\",s),Rn(\"submit\",s);break;case\"details\":Rn(\"toggle\",s);break;case\"input\":Se(s,c),Rn(\"invalid\",s),_r(r,\"onChange\");break;case\"select\":s._wrapperState={wasMultiple:!!c.multiple},Rn(\"invalid\",s),_r(r,\"onChange\");break;case\"textarea\":ir(s,c),Rn(\"invalid\",s),_r(r,\"onChange\")}for(a in yr(l,c),h=null,c)c.hasOwnProperty(a)&&(u=c[a],\"children\"===a?\"string\"==typeof u?s.textContent!==u&&(h=[\"children\",u]):\"number\"==typeof u&&s.textContent!==\"\"+u&&(h=[\"children\",\"\"+u]):d.hasOwnProperty(a)&&null!=u&&_r(r,a));switch(l){case\"input\":Gt(s),Te(s,c,!0);break;case\"textarea\":Gt(s),or(s);break;case\"select\":case\"option\":break;default:\"function\"==typeof c.onClick&&(s.onclick=xr)}r=h,n.updateQueue=r,null!==r&&To(e)}else{c=s,n=a,l=e,h=9===r.nodeType?r:r.ownerDocument,u===sr.html&&(u=ur(c)),u===sr.html?\"script\"===c?((c=h.createElement(\"div\")).innerHTML=\"<script><\\/script>\",h=c.removeChild(c.firstChild)):\"string\"==typeof n.is?h=h.createElement(c,{is:n.is}):(h=h.createElement(c),\"select\"===c&&(c=h,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):h=h.createElementNS(u,c),(c=h)[N]=l,c[R]=n,Co(n=c,e,!1,!1),l=n;var f=r,p=br(s,a);switch(s){case\"iframe\":case\"object\":case\"embed\":Rn(\"load\",l),r=a;break;case\"video\":case\"audio\":for(r=0;r<nt.length;r++)Rn(nt[r],l);r=a;break;case\"source\":Rn(\"error\",l),r=a;break;case\"img\":case\"image\":case\"link\":Rn(\"error\",l),Rn(\"load\",l),r=a;break;case\"form\":Rn(\"reset\",l),Rn(\"submit\",l),r=a;break;case\"details\":Rn(\"toggle\",l),r=a;break;case\"input\":Se(l,a),r=we(l,a),Rn(\"invalid\",l),_r(f,\"onChange\");break;case\"option\":r=er(l,a);break;case\"select\":l._wrapperState={wasMultiple:!!a.multiple},r=i({},a,{value:void 0}),Rn(\"invalid\",l),_r(f,\"onChange\");break;case\"textarea\":ir(l,a),r=rr(l,a),Rn(\"invalid\",l),_r(f,\"onChange\");break;default:r=a}yr(s,r),c=void 0,h=s,u=l;var m=r;for(c in m)if(m.hasOwnProperty(c)){var g=m[c];\"style\"===c?gr(u,g):\"dangerouslySetInnerHTML\"===c?null!=(g=g?g.__html:void 0)&&hr(u,g):\"children\"===c?\"string\"==typeof g?(\"textarea\"!==h||\"\"!==g)&&fr(u,g):\"number\"==typeof g&&fr(u,\"\"+g):\"suppressContentEditableWarning\"!==c&&\"suppressHydrationWarning\"!==c&&\"autoFocus\"!==c&&(d.hasOwnProperty(c)?null!=g&&_r(f,c):null!=g&&_e(u,c,g,p))}switch(s){case\"input\":Gt(l),Te(l,a,!1);break;case\"textarea\":Gt(l),or(l);break;case\"option\":null!=a.value&&l.setAttribute(\"value\",\"\"+xe(a.value));break;case\"select\":r=l,l=a,r.multiple=!!l.multiple,null!=(c=l.value)?nr(r,!!l.multiple,c,!1):null!=l.defaultValue&&nr(r,!!l.multiple,l.defaultValue,!0);break;default:\"function\"==typeof r.onClick&&(l.onclick=xr)}Er(s,a)&&To(e),e.stateNode=n}null!==e.ref&&(e.effectTag|=128)}else if(null===e.stateNode)throw o(Error(166));break;case 6:if(n&&null!=e.stateNode)Ao(n,e,n.memoizedProps,a);else{if(\"string\"!=typeof a&&null===e.stateNode)throw o(Error(166));n=aa(ia.current),aa(na.current),so(e)?(r=e.stateNode,n=e.memoizedProps,r[N]=e,r.nodeValue!==n&&To(e)):(r=e,(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[N]=e,r.stateNode=n)}break;case 11:break;case 13:if(Or(da),a=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=r;break t}r=null!==a,a=!1,null===n?so(e):(a=null!==(s=n.memoizedState),r||null===s||null!==(s=n.child.sibling)&&(null!==(l=e.firstEffect)?(e.firstEffect=s,s.nextEffect=l):(e.firstEffect=e.lastEffect=s,s.nextEffect=null),s.effectTag=8)),r&&!a&&0!=(2&e.mode)&&(null===n&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(da.current&ha)?cs===es&&(cs=rs):cs!==es&&cs!==rs||(cs=is)),(r||a)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:sa(),Po(e);break;case 10:Mi(e);break;case 9:case 14:break;case 17:Br(e.type)&&Fr();break;case 18:break;case 19:if(Or(da),null===(a=e.memoizedState))break;if(s=0!=(64&e.effectTag),null===(l=a.rendering)){if(s)Oo(a,!1);else if(cs!==es||null!==n&&0!=(64&n.effectTag))for(n=e.child;null!==n;){if(null!==(l=pa(n))){for(e.effectTag|=64,Oo(a,!1),null!==(n=l.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),e.firstEffect=e.lastEffect=null,n=e.child;null!==n;)s=r,(a=n).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(l=a.alternate)?(a.childExpirationTime=0,a.expirationTime=s,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=l.childExpirationTime,a.expirationTime=l.expirationTime,a.child=l.child,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,s=l.dependencies,a.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;Lr(da,da.current&ca|fa),e=e.child;break t}n=n.sibling}}else{if(!s)if(null!==(n=pa(l))){if(e.effectTag|=64,s=!0,Oo(a,!0),null===a.tail&&\"hidden\"===a.tailMode){null!==(r=n.updateQueue)&&(e.updateQueue=r,e.effectTag|=4),null!==(e=e.lastEffect=a.lastEffect)&&(e.nextEffect=null);break}}else li()>a.tailExpiration&&1<r&&(e.effectTag|=64,s=!0,Oo(a,!1),e.expirationTime=e.childExpirationTime=r-1);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(r=a.last)?r.sibling=l:e.child=l,a.last=l)}if(null!==a.tail){0===a.tailExpiration&&(a.tailExpiration=li()+500),r=a.tail,a.rendering=r,a.tail=r.sibling,a.lastEffect=e.lastEffect,r.sibling=null,n=da.current,Lr(da,n=s?n&ca|fa:n&ca),e=r;break t}break;case 20:break;default:throw o(Error(156))}e=null}if(r=us,1===ls||1!==r.childExpirationTime){for(n=0,a=r.child;null!==a;)(s=a.expirationTime)>n&&(n=s),(l=a.childExpirationTime)>n&&(n=l),a=a.sibling;r.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(1024&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=us.firstEffect),null!==us.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=us.firstEffect),t.lastEffect=us.lastEffect),1<us.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=us:t.firstEffect=us,t.lastEffect=us))}else{if(null!==(e=Lo(us)))return e.effectTag&=1023,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=1024)}if(null!==(e=us.sibling))return e;us=t}while(null!==us);return cs===es&&(cs=as),null}function Ws(t){var e=ci();return fi(99,qs.bind(null,t,e)),null!==ws&&di(97,(function(){return Xs(),null})),null}function qs(t,e){if(Xs(),(os&(Ko|ts))!==$o)throw o(Error(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw o(Error(177));t.callbackNode=null,t.callbackExpirationTime=0;var i=n.expirationTime,a=n.childExpirationTime;if(i=a>i?a:i,t.firstPendingTime=i,i<t.lastPendingTime&&(t.lastPendingTime=i),t===ss&&(us=ss=null,ls=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){a=os,os|=ts,Zo.current=null,wr=Nn;var s=Wn();if(qn(s)){if(\"selectionStart\"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{u.nodeType,h.nodeType}catch(t){u=null;break t}var f=0,d=-1,p=-1,m=0,g=0,v=s,y=null;e:for(;;){for(var b;v!==u||0!==c&&3!==v.nodeType||(d=f+c),v!==h||0!==l&&3!==v.nodeType||(p=f+l),3===v.nodeType&&(f+=v.nodeValue.length),null!==(b=v.firstChild);)y=v,v=b;for(;;){if(v===s)break e;if(y===u&&++m===c&&(d=f),y===h&&++g===l&&(p=f),null!==(b=v.nextSibling))break;y=(v=y).parentNode}v=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;Sr={focusedElem:s,selectionRange:u},Nn=!1,vs=i;do{try{for(;null!==vs;){if(0!=(256&vs.effectTag)){var _=vs.alternate;switch((s=vs).tag){case 0:case 11:case 15:zo(ga,ma,s);break;case 1:if(256&s.effectTag&&null!==_){var x=_.memoizedProps,w=_.memoizedState,S=s.stateNode,E=S.getSnapshotBeforeUpdate(s.elementType===s.type?x:yi(s.type,x),w);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:case 5:case 6:case 4:case 17:break;default:throw o(Error(163))}}vs=vs.nextEffect}}catch(t){if(null===vs)throw o(Error(330));Zs(vs,t),vs=vs.nextEffect}}while(null!==vs);vs=i;do{try{for(_=e;null!==vs;){var M=vs.effectTag;if(16&M&&fr(vs.stateNode,\"\"),128&M){var T=vs.alternate;if(null!==T){var C=T.ref;null!==C&&(\"function\"==typeof C?C(null):C.current=null)}}switch(14&M){case 2:Uo(vs),vs.effectTag&=-3;break;case 6:Uo(vs),vs.effectTag&=-3,Ho(vs.alternate,vs);break;case 4:Ho(vs.alternate,vs);break;case 8:Vo(x=vs,_),x.return=null,x.child=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null;var P=x.alternate;null!==P&&(P.return=null,P.child=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null)}vs=vs.nextEffect}}catch(t){if(null===vs)throw o(Error(330));Zs(vs,t),vs=vs.nextEffect}}while(null!==vs);if(C=Sr,T=Wn(),M=C.focusedElem,_=C.selectionRange,T!==M&&M&&M.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):\"contains\"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(M.ownerDocument.documentElement,M)){null!==_&&qn(M)&&(T=_.start,void 0===(C=_.end)&&(C=T),\"selectionStart\"in M?(M.selectionStart=T,M.selectionEnd=Math.min(C,M.value.length)):(C=(T=M.ownerDocument||document)&&T.defaultView||window).getSelection&&(C=C.getSelection(),x=M.textContent.length,P=Math.min(_.start,x),_=void 0===_.end?P:Math.min(_.end,x),!C.extend&&P>_&&(x=_,_=P,P=x),x=Gn(M,P),w=Gn(M,_),x&&w&&(1!==C.rangeCount||C.anchorNode!==x.node||C.anchorOffset!==x.offset||C.focusNode!==w.node||C.focusOffset!==w.offset)&&((T=T.createRange()).setStart(x.node,x.offset),C.removeAllRanges(),P>_?(C.addRange(T),C.extend(w.node,w.offset)):(T.setEnd(w.node,w.offset),C.addRange(T))))),T=[];for(C=M;C=C.parentNode;)1===C.nodeType&&T.push({element:C,left:C.scrollLeft,top:C.scrollTop});for(\"function\"==typeof M.focus&&M.focus(),M=0;M<T.length;M++)(C=T[M]).element.scrollLeft=C.left,C.element.scrollTop=C.top}Sr=null,Nn=!!wr,wr=null,t.current=n,vs=i;do{try{for(M=r;null!==vs;){var k=vs.effectTag;if(36&k){var A=vs.alternate;switch(C=M,(T=vs).tag){case 0:case 11:case 15:zo(ba,_a,T);break;case 1:var O=T.stateNode;if(4&T.effectTag)if(null===A)O.componentDidMount();else{var L=T.elementType===T.type?A.memoizedProps:yi(T.type,A.memoizedProps);O.componentDidUpdate(L,A.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var I=T.updateQueue;null!==I&&Fi(0,I,O);break;case 3:var N=T.updateQueue;if(null!==N){if(P=null,null!==T.child)switch(T.child.tag){case 5:P=T.child.stateNode;break;case 1:P=T.child.stateNode}Fi(0,N,P)}break;case 5:var R=T.stateNode;null===A&&4&T.effectTag&&(C=R,Er(T.type,T.memoizedProps)&&C.focus());break;case 6:case 4:case 12:break;case 13:case 19:case 17:case 20:break;default:throw o(Error(163))}}if(128&k){var D=vs.ref;if(null!==D){var z=vs.stateNode;switch(vs.tag){case 5:var B=z;break;default:B=z}\"function\"==typeof D?D(B):D.current=B}}512&k&&(xs=!0),vs=vs.nextEffect}}catch(t){if(null===vs)throw o(Error(330));Zs(vs,t),vs=vs.nextEffect}}while(null!==vs);vs=null,ii(),os=a}else t.current=n;if(xs)xs=!1,ws=t,Es=r,Ss=e;else for(vs=i;null!==vs;)e=vs.nextEffect,vs.nextEffect=null,vs=e;if(0!==(e=t.firstPendingTime)?Ns(t,k=vi(k=ks(),e),e):_s=null,\"function\"==typeof tu&&tu(n.stateNode,r),1073741823===e?t===Cs?Ts++:(Ts=0,Cs=t):Ts=0,ys)throw ys=!1,t=bs,bs=null,t;return(os&Jo)!==$o?null:(mi(),null)}function Xs(){if(null===ws)return!1;var t=ws,e=Es,n=Ss;return ws=null,Es=0,Ss=90,fi(97<n?97:n,Ys.bind(null,t,e))}function Ys(t){if((os&(Ko|ts))!==$o)throw o(Error(331));var e=os;for(os|=ts,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:zo(wa,ma,n),zo(ma,xa,n)}}catch(e){if(null===t)throw o(Error(330));Zs(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return os=e,mi(),!0}function Qs(t,e,n){Ni(t,e=qo(t,e=Io(n,e),1073741823)),null!==(t=Is(t,1073741823))&&Ns(t,99,1073741823)}function Zs(t,e){if(3===t.tag)Qs(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Qs(n,t,e);break}if(1===n.tag){var r=n.stateNode;if(\"function\"==typeof n.type.getDerivedStateFromError||\"function\"==typeof r.componentDidCatch&&(null===_s||!_s.has(r))){Ni(n,t=Xo(n,t=Io(e,t),1073741823)),null!==(n=Is(n,1073741823))&&Ns(n,99,1073741823);break}}n=n.return}}function $s(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),ss===t&&ls===n?cs===is||cs===rs&&1073741823===hs&&li()-ms<gs?js(t,ls):ps=!0:t.lastPendingTime<n||(0!==(e=t.pingTime)&&e<n||(t.pingTime=n,t.finishedExpirationTime===n&&(t.finishedExpirationTime=0,t.finishedWork=null),Ns(t,e=vi(e=ks(),n),n)))}function Js(t,e){var n=t.stateNode;null!==n&&n.delete(e),n=vi(n=ks(),e=As(n,t,null)),null!==(t=Is(t,e))&&Ns(t,n,e)}var Ks=void 0;Ks=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||Rr.current)co=!0;else if(r<n){switch(co=!1,e.tag){case 3:_o(e),uo();break;case 5:if(ua(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:Br(e.type)&&Hr(e);break;case 4:oa(e,e.stateNode.containerInfo);break;case 10:Ei(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?wo(t,e,n):(Lr(da,da.current&ca),null!==(e=Mo(t,e,n))?e.sibling:null);Lr(da,da.current&ca);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return Eo(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),Lr(da,da.current),!r)return null}return Mo(t,e,n)}}else co=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=zr(e,Nr.current),Ci(e,n),i=Fa(null,e,r,t,i,n),e.effectTag|=1,\"object\"==typeof i&&null!==i&&\"function\"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,ja(),Br(r)){var a=!0;Hr(e)}else a=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;\"function\"==typeof s&&Hi(e,r,s,t),i.updater=Gi,e.stateNode=i,i._reactInternalFiber=e,Yi(e,r,t,n),e=bo(null,e,r,!0,a,n)}else e.tag=0,ho(null,e,i,n),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:switch(t._status=0,(e=(e=t._ctor)()).then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)})),t._status){case 1:return t._result;case 2:throw t._result}throw t._result=e,e}}(i),e.type=i,a=e.tag=function(t){if(\"function\"==typeof t)return iu(t)?1:0;if(null!=t){if((t=t.$$typeof)===re)return 11;if(t===oe)return 14}return 2}(i),t=yi(i,t),a){case 0:e=vo(null,e,i,t,n);break;case 1:e=yo(null,e,i,t,n);break;case 11:e=fo(null,e,i,t,n);break;case 14:e=po(null,e,i,yi(i.type,t),r,n);break;default:throw o(Error(306),i,\"\")}return e;case 0:return r=e.type,i=e.pendingProps,vo(t,e,r,i=e.elementType===r?i:yi(r,i),n);case 1:return r=e.type,i=e.pendingProps,yo(t,e,r,i=e.elementType===r?i:yi(r,i),n);case 3:if(_o(e),null===(r=e.updateQueue))throw o(Error(282));return i=null!==(i=e.memoizedState)?i.element:null,Bi(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i?(uo(),e=Mo(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(eo=Pr(e.stateNode.containerInfo.firstChild),to=e,i=no=!0),i?(e.effectTag|=2,e.child=ta(e,null,r,n)):(ho(t,e,r,n),uo()),e=e.child),e;case 5:return ua(e),null===t&&ao(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,Mr(r,i)?s=null:null!==a&&Mr(r,a)&&(e.effectTag|=16),go(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(ho(t,e,s,n),e=e.child),e;case 6:return null===t&&ao(e),null;case 13:return wo(t,e,n);case 4:return oa(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ki(e,null,r,n):ho(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,fo(t,e,r,i=e.elementType===r?i:yi(r,i),n);case 7:return ho(t,e,e.pendingProps,n),e.child;case 8:case 12:return ho(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,Ei(e,a=i.value),null!==s){var u=s.value;if(0===(a=en(u,a)?0:0|(\"function\"==typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!Rr.current){e=Mo(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&a)){1===u.tag&&((c=Li(n,null)).tag=2,Ni(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),Ti(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}ho(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(a=e.pendingProps).children,Ci(e,n),r=r(i=Pi(i,a.unstable_observedBits)),e.effectTag|=1,ho(t,e,r,n),e.child;case 14:return a=yi(i=e.type,e.pendingProps),po(t,e,i,a=yi(i.type,a),r,n);case 15:return mo(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Br(r)?(t=!0,Hr(e)):t=!1,Ci(e,n),qi(e,r,i),Yi(e,r,i,n),bo(null,e,r,!0,t,n);case 19:return Eo(t,e,n)}throw o(Error(156))};var tu=null,eu=null;function nu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ru(t,e,n,r){return new nu(t,e,n,r)}function iu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function au(t,e){var n=t.alternate;return null===n?((n=ru(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ou(t,e,n,r,i,a){var s=2;if(r=t,\"function\"==typeof t)iu(t)&&(s=1);else if(\"string\"==typeof t)s=5;else t:switch(t){case $t:return su(n.children,i,a,e);case ne:s=8,i|=7;break;case Jt:s=8,i|=1;break;case Kt:return(t=ru(12,n,e,8|i)).elementType=Kt,t.type=Kt,t.expirationTime=a,t;case ie:return(t=ru(13,n,e,i)).type=ie,t.elementType=ie,t.expirationTime=a,t;case ae:return(t=ru(19,n,e,i)).elementType=ae,t.expirationTime=a,t;default:if(\"object\"==typeof t&&null!==t)switch(t.$$typeof){case te:s=10;break t;case ee:s=9;break t;case re:s=11;break t;case oe:s=14;break t;case se:s=16,r=null;break t}throw o(Error(130),null==t?t:typeof t,\"\")}return(e=ru(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=a,e}function su(t,e,n,r){return(t=ru(7,t,r,e)).expirationTime=n,t}function uu(t,e,n){return(t=ru(6,t,null,e)).expirationTime=n,t}function lu(t,e,n){return(e=ru(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function hu(t,e,n){return t=new cu(t,e,n),e=ru(3,null,null,2===e?7:1===e?3:0),t.current=e,e.stateNode=t}function fu(t,e,n,r,i,a){var s=e.current;t:if(n){e:{if(2!==on(n=n._reactInternalFiber)||1!==n.tag)throw o(Error(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Br(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw o(Error(171))}if(1===n.tag){var l=n.type;if(Br(l)){n=Vr(n,l,u);break t}}n=u}else n=Ir;return null===e.context?e.context=n:e.pendingContext=n,e=a,(i=Li(r,i)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Ni(s,i),Ls(s,r),r}function du(t,e,n,r){var i=e.current,a=ks(),o=Ui.suspense;return fu(t,e,n,i=As(a,i,o),o,r)}function pu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function mu(t){var e=1073741821-25*(1+((1073741821-ks()+500)/25|0));e<=Os&&--e,this._expirationTime=Os=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function gu(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function vu(t,e,n){this._internalRoot=hu(t,e,n)}function yu(t,e){this._internalRoot=hu(t,2,e)}function bu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||\" react-mount-point-unstable \"!==t.nodeValue))}function _u(t,e,n,r,i){var a=n._reactRootContainer,o=void 0;if(a){if(o=a._internalRoot,\"function\"==typeof i){var s=i;i=function(){var t=pu(o);s.call(t)}}du(e,o,t,i)}else{if(a=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute(\"data-reactroot\"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new vu(t,0,e)}(n,r),o=a._internalRoot,\"function\"==typeof i){var u=i;i=function(){var t=pu(o);u.call(t)}}Fs((function(){du(e,o,t,i)}))}return pu(o)}function xu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!bu(e))throw o(Error(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Zt,key:null==r?null:\"\"+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Ct=function(t,e,n){switch(e){case\"input\":if(Me(t,n),e=n.name,\"radio\"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+e)+'][type=\"radio\"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=F(r);if(!i)throw o(Error(90));Wt(r),Me(r,i)}}}break;case\"textarea\":ar(t,n);break;case\"select\":null!=(e=n.value)&&nr(t,!!n.multiple,e,!1)}},mu.prototype.render=function(t){if(!this._defer)throw o(Error(250));this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new gu;return fu(t,e,null,n,null,r._onCommit),r},mu.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},mu.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(!this._defer||null===e)throw o(Error(251));if(this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)r=i,i=i._next;if(null===r)throw o(Error(251));r._next=i._next,this._next=e,t.firstBatch=this}if(this._defer=!1,e=n,(os&(Ko|ts))!==$o)throw o(Error(253));pi(Us.bind(null,t,e)),mi(),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},mu.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},gu.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},gu.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];if(\"function\"!=typeof n)throw o(Error(191),n);n()}}},yu.prototype.render=vu.prototype.render=function(t,e){var n=this._internalRoot,r=new gu;return null!==(e=void 0===e?null:e)&&r.then(e),du(t,n,null,r._onCommit),r},yu.prototype.unmount=vu.prototype.unmount=function(t){var e=this._internalRoot,n=new gu;return null!==(t=void 0===t?null:t)&&n.then(t),du(null,e,null,n._onCommit),n},yu.prototype.createBatch=function(){var t=new mu(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime>=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},It=zs,Nt=Bs,Rt=Ds,Dt=function(t,e){var n=os;os|=2;try{return t(e)}finally{(os=n)===$o&&mi()}};var wu,Su,Eu={createPortal:xu,findDOMNode:function(t){if(null==t)t=null;else if(1!==t.nodeType){var e=t._reactInternalFiber;if(void 0===e){if(\"function\"==typeof t.render)throw o(Error(188));throw o(Error(268),Object.keys(t))}t=null===(t=un(e))?null:t.stateNode}return t},hydrate:function(t,e,n){if(!bu(e))throw o(Error(200));return _u(null,t,e,!0,n)},render:function(t,e,n){if(!bu(e))throw o(Error(200));return _u(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){if(!bu(n))throw o(Error(200));if(null==t||void 0===t._reactInternalFiber)throw o(Error(38));return _u(t,e,n,!1,r)},unmountComponentAtNode:function(t){if(!bu(t))throw o(Error(40));return!!t._reactRootContainer&&(Fs((function(){_u(null,null,t,!1,(function(){t._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return xu.apply(void 0,arguments)},unstable_batchedUpdates:zs,unstable_interactiveUpdates:function(t,e,n,r){return Ds(),Bs(t,e,n,r)},unstable_discreteUpdates:Bs,unstable_flushDiscreteUpdates:Ds,flushSync:function(t,e){if((os&(Ko|ts))!==$o)throw o(Error(187));var n=os;os|=1;try{return fi(99,t.bind(null,e))}finally{os=n,mi()}},unstable_createRoot:function(t,e){if(!bu(t))throw o(Error(299),\"unstable_createRoot\");return new yu(t,null!=e&&!0===e.hydrate)},unstable_createSyncRoot:function(t,e){if(!bu(t))throw o(Error(299),\"unstable_createRoot\");return new vu(t,1,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=os;os|=1;try{fi(99,t)}finally{(os=e)===$o&&mi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[z,B,F,O.injectEventPluginsByName,f,W,function(t){C(t,G)},Ot,Lt,Fn,A,Xs,{current:!1}]}};Su=(wu={findFiberByHostInstance:D,bundleType:0,version:\"16.9.0\",rendererPackageName:\"react-dom\"}).findFiberByHostInstance,function(t){if(\"undefined\"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);tu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},eu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},wu,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=un(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Su?Su(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var Mu={default:Eu},Tu=Mu&&Eu||Mu;t.exports=Tu.default||Tu},function(t,e,n){\"use strict\";t.exports=n(108)},function(t,e,n){\"use strict\";\n/** @license React v0.15.0\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */Object.defineProperty(e,\"__esModule\",{value:!0});var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e.unstable_now=void 0,e.unstable_forceFrameRate=void 0,\"undefined\"==typeof window||\"function\"!=typeof MessageChannel){var u=null,l=null,c=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(t){throw setTimeout(c,0),t}};e.unstable_now=function(){return Date.now()},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(c,0))},i=function(t,e){l=setTimeout(t,e)},a=function(){clearTimeout(l)},o=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,f=window.Date,d=window.setTimeout,p=window.clearTimeout,m=window.requestAnimationFrame,g=window.cancelAnimationFrame;\"undefined\"!=typeof console&&(\"function\"!=typeof m&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\"),\"function\"!=typeof g&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\")),e.unstable_now=\"object\"==typeof h&&\"function\"==typeof h.now?function(){return h.now()}:function(){return f.now()};var v=!1,y=null,b=-1,_=-1,x=33.33,w=-1,S=-1,E=0,M=!1;o=function(){return e.unstable_now()>=E},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):0<t?(x=Math.floor(1e3/t),M=!0):(x=33.33,M=!1)};var T=function(){if(null!==y){var t=e.unstable_now(),n=0<E-t;try{y(n,t)||(y=null)}catch(t){throw P.postMessage(null),t}}},C=new MessageChannel,P=C.port2;C.port1.onmessage=T;var k=function(t){if(null===y)S=w=-1,v=!1;else{v=!0,m((function(t){p(b),k(t)}));var n=function(){E=e.unstable_now()+x/2,T(),b=d(n,3*x)};if(b=d(n,3*x),-1!==w&&.1<t-w){var r=t-w;!M&&-1!==S&&r<x&&S<x&&(8.33>(x=r<S?S:r)&&(x=8.33)),S=r}w=t,E=t+x,P.postMessage(null)}};r=function(t){y=t,v||(v=!0,m((function(t){k(t)})))},i=function(t,n){_=d((function(){t(e.unstable_now())}),n)},a=function(){p(_),_=-1}}var A=null,O=null,L=null,I=3,N=!1,R=!1,D=!1;function z(t,e){var n=t.next;if(n===t)A=null;else{t===A&&(A=n);var r=t.previous;r.next=n,n.previous=r}t.next=t.previous=null,n=t.callback,r=I;var i=L;I=t.priorityLevel,L=t;try{var a=t.expirationTime<=e;switch(I){case 1:var o=n(a);break;case 2:case 3:case 4:o=n(a);break;case 5:o=n(a)}}catch(t){throw t}finally{I=r,L=i}if(\"function\"==typeof o)if(e=t.expirationTime,t.callback=o,null===A)A=t.next=t.previous=t;else{o=null,a=A;do{if(e<=a.expirationTime){o=a;break}a=a.next}while(a!==A);null===o?o=A:o===A&&(A=t),(e=o.previous).next=o.previous=t,t.next=o,t.previous=e}}function B(t){if(null!==O&&O.startTime<=t)do{var e=O,n=e.next;if(e===n)O=null;else{O=n;var r=e.previous;r.next=n,n.previous=r}e.next=e.previous=null,V(e,e.expirationTime)}while(null!==O&&O.startTime<=t)}function F(t){D=!1,B(t),R||(null!==A?(R=!0,r(j)):null!==O&&i(F,O.startTime-t))}function j(t,n){R=!1,D&&(D=!1,a()),B(n),N=!0;try{if(t){if(null!==A)do{z(A,n),B(n=e.unstable_now())}while(null!==A&&!o())}else for(;null!==A&&A.expirationTime<=n;)z(A,n),B(n=e.unstable_now());return null!==A||(null!==O&&i(F,O.startTime-n),!1)}finally{N=!1}}function U(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function V(t,e){if(null===A)A=t.next=t.previous=t;else{var n=null,r=A;do{if(e<r.expirationTime){n=r;break}r=r.next}while(r!==A);null===n?n=A:n===A&&(A=t),(e=n.previous).next=n.previous=t,t.next=n,t.previous=e}}var H=s;e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_scheduleCallback=function(t,n,o){var s=e.unstable_now();if(\"object\"==typeof o&&null!==o){var u=o.delay;u=\"number\"==typeof u&&0<u?s+u:s,o=\"number\"==typeof o.timeout?o.timeout:U(t)}else o=U(t),u=s;if(t={callback:n,priorityLevel:t,startTime:u,expirationTime:o=u+o,next:null,previous:null},u>s){if(o=u,null===O)O=t.next=t.previous=t;else{n=null;var l=O;do{if(o<l.startTime){n=l;break}l=l.next}while(l!==O);null===n?n=O:n===O&&(O=t),(o=n.previous).next=n.previous=t,t.next=n,t.previous=o}null===A&&O===t&&(D?a():D=!0,i(F,u-s))}else V(t,o),R||N||(R=!0,r(j));return t},e.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(t===e)t===A?A=null:t===O&&(O=null);else{t===A?A=e:t===O&&(O=e);var n=t.previous;n.next=e,e.previous=n}t.next=t.previous=null}},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_shouldYield=function(){var t=e.unstable_now();return B(t),null!==L&&null!==A&&A.startTime<=t&&A.expirationTime<L.expirationTime||o()},e.unstable_requestPaint=H,e.unstable_continueExecution=function(){R||N||(R=!0,r(j))},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return A}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(0)),a=l(n(110)),o=l(n(115)),s=l(n(300)),u=l(n(58));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={menu:\"visualization\"},t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;u.default.on(\"selectMenu\",(function(e){t.setState({menu:e})}))}},{key:\"selectMainView\",value:function(){var t=void 0;switch(this.state.menu){case\"visualization\":t=this.vis;break;case\"feature\":t=this.feature}return t}},{key:\"render\",value:function(){return console.log(this.state.menu),i.default.createElement(\"div\",null,i.default.createElement(a.default,null),i.default.createElement(\"div\",{className:\"maincontainer\",id:\"visualization\",style:{display:\"visualization\"===this.state.menu?\"block\":\"none\"}},i.default.createElement(o.default,null)),i.default.createElement(\"div\",{className:\"maincontainer\",id:\"featureExtraction\",style:{display:\"feature\"===this.state.menu?\"block\":\"none\"}},i.default.createElement(s.default,null)))}}]),e}(i.default.Component);e.default=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(111)),o=s(n(58));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.menu=\"Visualization\",t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;o.default.on(\"selectMenu\",(function(e){t.menu=e}))}},{key:\"componentDidMount\",value:function(){$(\"ul[id*=mainMenuList] li\").click((function(){a.selectMenu($(this).attr(\"value\"))}))}},{key:\"render\",value:function(){return i.default.createElement(\"nav\",{className:\"navbar navbar-expand-lg navbar-dark bg-primary\",id:\"appHeader\"},i.default.createElement(\"a\",{className:\"navbar-brand\",href:\"#\"},\"TimeTubes\"),i.default.createElement(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarColor01\",\"aria-controls\":\"navbarColor01\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"},i.default.createElement(\"span\",{className:\"navbar-toggler-icon\"})),i.default.createElement(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarColor01\"},i.default.createElement(\"ul\",{className:\"navbar-nav mr-auto\",id:\"mainMenuList\"},i.default.createElement(\"li\",{className:\"nav-item mainMenu\",value:\"about\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\"},\"About\")),i.default.createElement(\"li\",{className:\"nav-item mainMenu\",value:\"visualization\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\"},\"Visualization\")),i.default.createElement(\"li\",{className:\"nav-item mainMenu\",value:\"feature\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\"},\"Feature Extraction\")),i.default.createElement(\"li\",{className:\"nav-item mainMenu\",value:\"original\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\"},\"Original Data\")),i.default.createElement(\"li\",{className:\"nav-item mainMenu\",value:\"contact\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\"},\"Contact\")))))}}]),e}(i.default.Component);e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.selectMenu=function(t){a.default.dispatch({type:\"SELECT_MENU\",menu:t})};var r,i=n(11),a=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){t.exports.Dispatcher=n(113)},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(114),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(t){var e=\"ID_\"+this._lastID++;return this._callbacks[e]=t,e},t.prototype.unregister=function(t){this._callbacks[t]||r(!1),delete this._callbacks[t]},t.prototype.waitFor=function(t){this._isDispatching||r(!1);for(var e=0;e<t.length;e++){var n=t[e];this._isPending[n]?this._isHandled[n]||r(!1):(this._callbacks[n]||r(!1),this._invokeCallback(n))}},t.prototype.dispatch=function(t){this._isDispatching&&r(!1),this._startDispatching(t);try{for(var e in this._callbacks)this._isPending[e]||this._invokeCallback(e)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},t.prototype._startDispatching=function(t){for(var e in this._callbacks)this._isPending[e]=!1,this._isHandled[e]=!1;this._pendingPayload=t,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();t.exports=i},function(t,e,n){\"use strict\";var r=function(t){};t.exports=function(t,e,n,i,a,o,s,u){if(r(e),!t){var l;if(void 0===e)l=new Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var c=[n,i,a,o,s,u],h=0;(l=new Error(e.replace(/%s/g,(function(){return c[h++]})))).name=\"Invariant Violation\"}throw l.framesToPop=1,l}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(0)),a=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(19)),u(n(116))),o=u(n(117)),s=(u(n(60)),u(n(100)),u(n(3)));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={data:s.default.getAllData(),width:$(window).width(),heightTT:$(window).height()/2,heightSP:$(window).height()/2},t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;s.default.on(\"upload\",(function(){t.setState({data:s.default.getAllData(),width:$(window).width()/s.default.getDataNum()})}))}},{key:\"collapseSidebar\",value:function(){$(\"#Controllers\").toggle(\"slow\")}},{key:\"collapseFeature\",value:function(){$(\"#Feature\").toggle(\"slow\")}},{key:\"render\",value:function(){var t=this.state.data,e=this.state.width,n=this.state.heightTT,r=this.state.heightSP,u=s.default.getDataNum();if(u>0){e=u<=3?$(window).width()/u:Math.ceil($(window).width()/3);var l=$(window).height()-$(\"#appHeader\").outerHeight()-$(\"#tubeControllers\").outerHeight();n=Math.ceil(.6*l)+100,r=l-n}var c=t.map((function(t){return i.default.createElement(o.default,{key:t.id,id:t.id,data:t.data,width:e,heightTT:n,heightSP:r})}));return i.default.createElement(\"div\",{className:\"contents\",id:\"mainVisArea\"},i.default.createElement(a.default,null),i.default.createElement(\"div\",{id:\"dataColumns\",className:\"container\",style:{display:\"inline-block\",maxWidth:\"100%\",width:\"100vw\",padding:\"unset\",overflowX:\"scroll\",overflowY:\"hidden\"}},i.default.createElement(\"div\",{style:{margin:\"unset\"}},c)))}}]),e}(i.default.Component);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=c(n(0)),a=l(n(19)),o=l(n(59)),s=c(n(13)),u=c(n(3));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={data:u.default.getAllData(),fileType:\"csv\",grid:!0,label:!0,axis:!0,plot:!0,clip:!0,shade:!0,lock:!1,multiOptions:!1},t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;u.default.on(\"upload\",(function(){t.setState({data:u.default.getAllData()}),document.getElementsByClassName(\"TimeTubes\").length>1&&t.setState({multiOptions:!0}),$(\"#fileInputPanel\").css(\"visibility\",\"hidden\")}))}},{key:\"changeFileType\",value:function(){var t=$(\"input[name=fileType]:checked\").val();this.setState({fileType:t})}},{key:\"resetCamera\",value:function(){this.getSelectedIDs().forEach((function(t){a.resetCamera(t)}))}},{key:\"switchCamera\",value:function(){this.getSelectedIDs().forEach((function(t){a.switchCamera(t)}))}},{key:\"uploadFile\",value:function(){var t=document.querySelector(\"input[type=file]\").files;o.uploadData(t)}},{key:\"searchTime\",value:function(){var t=document.getElementById(\"searchTimeForm\").value;this.getSelectedIDs().forEach((function(e){a.searchTime(e,Number(t))}))}},{key:\"switchGridDisplay\",value:function(){var t=!this.state.grid;this.setState({grid:t}),this.getSelectedIDs().forEach((function(e){a.switchGridDisplay(e,t)}))}},{key:\"switchLabelDisplay\",value:function(){var t=!this.state.label;this.setState({label:t}),this.getSelectedIDs().forEach((function(e){a.switchLabelDisplay(e,t)}))}},{key:\"switchAxisDisplay\",value:function(){var t=!this.state.axis;this.setState({axis:t}),this.getSelectedIDs().forEach((function(e){a.switchAxisDisplay(e,t)}))}},{key:\"switchPlotDisplay\",value:function(){var t=!this.state.plot;this.setState({plot:t}),this.getSelectedIDs().forEach((function(e){a.switchPlotDisplay(e,t)}))}},{key:\"changeBackground\",value:function(){var t=document.getElementById(\"backgroundList\"),e=t.selectedIndex,n=t.options[e].value;this.getSelectedIDs().forEach((function(t){a.changeBackground(t,n)}))}},{key:\"clipTube\",value:function(){var t=!this.state.clip;this.setState({clip:t}),this.getSelectedIDs().forEach((function(e){a.clipTube(e,t)}))}},{key:\"switchShade\",value:function(){var t=!this.state.shade;this.setState({shade:t}),this.getSelectedIDs().forEach((function(e){a.switchShade(e,t)}))}},{key:\"timeFitting\",value:function(){if(this.state.multiOptions){var t=s.default.getActiveId(),e=s.default.getFocused(t),n=u.default.getData(t);a.timeFitting(e+n.data.spatial[0].z)}}},{key:\"mergeTubes\",value:function(){if(this.state.multiOptions){var t=this.getSelectedIDs();o.mergeData(t)}}},{key:\"lockControl\",value:function(){if(this.state.multiOptions){var t=!this.state.lock;this.setState({lock:t});var e=this.getSelectedIDs();a.lockControl(e,t)}}},{key:\"clickClose\",value:function(){var t=document.getElementById(\"closeFilePanel\").innerText;$(\"#fileMainArea\").slideToggle(),t.match(\"Close\")?document.getElementById(\"closeFilePanel\").innerText=\"Open the file input panel\":document.getElementById(\"closeFilePanel\").innerText=\"Close the file input panel\"}},{key:\"clickSub\",value:function(){var t=Number($(\"#initialLineVal\").text());t>0&&$(\"#initialLineVal\").text(t-1)}},{key:\"clickAdd\",value:function(){var t=Number($(\"#initialLineVal\").text());$(\"#initialLineVal\").text(t+1)}},{key:\"getSelectedIDs\",value:function(){var t=s.default.getCheckedList(),e=[];return t.forEach((function(t,n){t&&e.push(n)})),e}},{key:\"basicMenu\",value:function(){return i.default.createElement(\"ul\",{className:\"navbar-nav\",id:\"basicMenu\"},i.default.createElement(\"li\",{className:\"nav-item dropdown\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\",href:\"#\",id:\"controllersFileDropdown\",role:\"button\",onClick:this.showFileInputPanel.bind(this)},\"File\"),i.default.createElement(\"div\",{className:\"input-group input-group-sm dropdownonTubeMenu\",style:{visibility:\"hidden\",position:\"absolute\",top:\"2rem\",width:\"auto\",zIndex:\"100\"},id:\"fileInputPanel\"},this.fileInputPanel())),i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"label\",{className:\"nav-link dropdown-toggle menuLabel\",href:\"#\",id:\"controllersSettingDropdown\",role:\"button\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",style:{fontSize:\"1rem\"}},\"\"),i.default.createElement(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"navbarDropdown\"})))}},{key:\"showFileInputPanel\",value:function(){var t=$(\"#fileInputPanel\").css(\"visibility\"),e=$(\"#controllersFileDropdown\").position();switch(t){case\"visible\":$(\"#fileInputPanel\").css(\"visibility\",\"hidden\");break;case\"hidden\":$(\"#fileInputPanel\").css(\"left\",e.left),$(\"#fileInputPanel\").css(\"visibility\",\"visible\")}}},{key:\"fileInputPanel\",value:function(){return i.default.createElement(\"div\",{id:\"inputFile\",className:\"controllersElem\"},i.default.createElement(\"h6\",null,\"File type\"),i.default.createElement(\"form\",{id:\"fileType\",style:{minWidth:\"200px\"},onChange:this.changeFileType.bind(this)},i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"fileType\",value:\"csv\",checked:\"csv\"===this.state.fileType,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\"},\"csv\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"fileType\",value:\"tsv\",checked:\"tsv\"===this.state.fileType,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\"},\"tsv\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"fileType\",value:\"space\",checked:\"space\"===this.state.fileType,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\"},\"space\"))),i.default.createElement(\"h6\",null,\"Initial line of the data (exclude headers)\"),i.default.createElement(\"div\",{className:\"form-row\",id:\"initialLineField\",style:{display:\"flex\",justifyContent:\"center\"}},i.default.createElement(\"button\",{type:\"button\",id:\"sub\",className:\"sub btn btn-primary  btn-sm\",style:{textAlign:\"center\"},onClick:this.clickSub.bind(this)},\"-\"),i.default.createElement(\"label\",{id:\"initialLineVal\",style:{textAlign:\"center\",width:\"30px\"}},\"2\"),i.default.createElement(\"button\",{type:\"button\",id:\"add\",className:\"add btn btn-primary btn-sm\",style:{textAlign:\"center\"},onClick:this.clickAdd.bind(this)},\"+\")),i.default.createElement(\"h6\",null,\"Select files\"),i.default.createElement(\"div\",{className:\"custom-file\"},i.default.createElement(\"input\",{type:\"file\",className:\"custom-file-input\",id:\"uploadFileForm\",onChange:this.uploadFile.bind(this),multiple:!0}),i.default.createElement(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\"})))}},{key:\"displayMenu\",value:function(){return i.default.createElement(\"ul\",{className:\"navbar-nav\",id:\"displayMenu\"},i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\",id:\"resetCameraBtn\",onClick:this.resetCamera.bind(this)},\"Reset\")),i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\",id:\"switchCameraBtn\",onClick:this.switchCamera.bind(this)},\"Switch camera\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"input\",{className:\"form-check-input menuCheck\",type:\"checkbox\",id:\"checkboxGrid\",value:\"option1\",checked:this.state.grid,onChange:this.switchGridDisplay.bind(this)}),i.default.createElement(\"label\",{className:\"nav-link menuLabel\",htmlFor:\"inlineCheckbox1\",onClick:this.switchGridDisplay.bind(this)},\"Grid\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"input\",{className:\"form-check-input menuCheck\",type:\"checkbox\",id:\"checkboxLabel\",value:\"option1\",checked:this.state.label,onChange:this.switchLabelDisplay.bind(this)}),i.default.createElement(\"label\",{className:\"nav-link menuLabel\",htmlFor:\"inlineCheckbox1\",onClick:this.switchLabelDisplay.bind(this)},\"Label\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"input\",{className:\"form-check-input menuCheck\",type:\"checkbox\",id:\"checkboxAxis\",value:\"option1\",checked:this.state.axis,onChange:this.switchAxisDisplay.bind(this)}),i.default.createElement(\"label\",{className:\"nav-link menuLabel\",htmlFor:\"inlineCheckbox1\",onClick:this.switchAxisDisplay.bind(this)},\"Axis\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"input\",{className:\"form-check-input menuCheck\",type:\"checkbox\",id:\"checkboxPlot\",value:\"option1\",checked:this.state.plot,onChange:this.switchPlotDisplay.bind(this)}),i.default.createElement(\"label\",{className:\"nav-link menuLabel\",htmlFor:\"inlineCheckbox1\",onClick:this.switchPlotDisplay.bind(this)},\"Plot\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"select\",{className:\"form-control custom-select\",id:\"backgroundList\",onChange:this.changeBackground.bind(this),style:{fontSize:\"0.8rem\",height:\"1.5rem\",width:\"5rem\"}},i.default.createElement(\"option\",{value:\"0x000000\"},\"Black\"),i.default.createElement(\"option\",{value:\"0x3f3f3f\"},\"Gray 75\"),i.default.createElement(\"option\",{value:\"0x7f7f7f\"},\"Gray 50\"),i.default.createElement(\"option\",{value:\"0xbfbfbf\"},\"Gray 25\"),i.default.createElement(\"option\",{value:\"0xffffff\"},\"White\"),i.default.createElement(\"option\",{value:\"0x191970\"},\"Navy\"))))}},{key:\"tubeMenu\",value:function(){return i.default.createElement(\"ul\",{className:\"navbar-nav\",id:\"tubeMenu\"},i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"input\",{className:\"form-check-input menuCheck\",type:\"checkbox\",id:\"checkboxClip\",value:\"option1\",checked:this.state.clip,onChange:this.clipTube.bind(this)}),i.default.createElement(\"label\",{className:\"nav-link menuLabel\",htmlFor:\"inlineCheckbox1\",onClick:this.clipTube.bind(this)},\"Clip\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"input\",{className:\"form-check-input menuCheck\",type:\"checkbox\",id:\"checkboxShade\",value:\"option1\",checked:this.state.shade,onChange:this.switchShade.bind(this)}),i.default.createElement(\"label\",{className:\"nav-link menuLabel\",htmlFor:\"inlineCheckbox1\",onClick:this.switchShade.bind(this)},\"Shade\")),i.default.createElement(\"li\",{className:\"nav-item dropdown\"},i.default.createElement(\"label\",{className:\"nav-link dropdown-toggle menuLabel\",href:\"#\",id:\"navbarDropdown\",role:\"button\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},\"Average\"),i.default.createElement(\"div\",{className:\"dropdown-menu controllersElem\",\"aria-labelledby\":\"navbarDropdown\"})),i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\"},\"Select All\")))}},{key:\"multiTubesMenu\",value:function(){return i.default.createElement(\"ul\",{className:\"navbar-nav\",id:\"multiTubesMenu\"},i.default.createElement(\"div\",{className:\"form-check form-check-inline menuItem\"},i.default.createElement(\"input\",{className:\"form-check-input menuCheck\",type:\"checkbox\",id:\"checkboxLock\",value:\"option1\",checked:this.state.lock,onChange:this.lockControl.bind(this),disabled:!this.state.multiOptions}),i.default.createElement(\"label\",{className:\"nav-link menuLabel\",htmlFor:\"inlineCheckbox1\",onClick:this.lockControl.bind(this)},\"Lock\")),i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"label\",{className:\"nav-link menuLabel\",onClick:this.timeFitting.bind(this)},\"Time Fitting\")),i.default.createElement(\"li\",{className:\"nav-item dropdown\"},i.default.createElement(\"label\",{className:\"nav-link dropdown-toggle menuLabel\",href:\"#\",id:\"navbarDropdown\",role:\"button\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},\"Fusion\"),i.default.createElement(\"div\",{className:\"dropdown-menu controllersElem\",\"aria-labelledby\":\"navbarDropdown\"},i.default.createElement(\"label\",{className:\"dropdown-item menuLabel\",id:\"mergeBtn\",onClick:this.mergeTubes.bind(this)},\"All\"))))}},{key:\"render\",value:function(){return i.default.createElement(\"nav\",{className:\"navbar navbar-expand-lg navbar-dark bg-primary\",id:\"tubeControllers\"},i.default.createElement(\"div\",{className:\"collapse navbar-collapse\",id:\"TimeTubesMenu\"},this.basicMenu(),this.displayMenu(),this.tubeMenu(),this.multiTubesMenu()))}}]),e}(i.default.Component);e.default=h},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(0)),a=s(n(118)),o=s(n(100));s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.state={width:t.width,heightTT:t.heightTT,heightSP:t.heightSP},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"render\",value:function(){return i.default.createElement(\"div\",{className:\"dataColumn\",id:\"dataColumn_\"+this.id,style:{padding:\"unset\",display:\"table-cell\"}},i.default.createElement(a.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.heightTT}),i.default.createElement(o.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.heightSP}))}}]),e}(i.default.Component);e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(0)),a=s(n(60)),o=s(n(98));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.state={width:t.width,height:t.height},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"render\",value:function(){return i.default.createElement(\"div\",{className:\"TimeTubesHolder\",id:\"TimeTubesHolder_\"+this.id},i.default.createElement(a.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.height-100}),i.default.createElement(\"div\",{id:this.divID,className:\"timeSelector\"},i.default.createElement(o.default,{id:this.id,divID:\"timeSelector_\"+this.id,width:this.props.width})))}}]),e}(i.default.Component);e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=h(n(0)),a=c(n(18)),o=(c(n(8)),n(120)),s=c(n(19)),u=h(n(13)),l=h(n(3));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.id=l.default.getTailID(),t.lookup=l.default.getData(t.id).data.lookup,t.state={fileName:l.default.getFileName(t.id),currentVal:l.default.getValues(-1,0),checked:!0},t.tubeNum=u.default.getTubeNum(),t.opacityDistSet=u.default.getOpacityDistSet(),t.opacityCurves=u.default.getOpacityCurves(),t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;l.default.on(\"upload\",(function(e){-1===t.id&&(t.id=e,t.lookup=l.default.getData(e).data.lookup,t.setState({fileName:l.default.getFileName(e),currentVal:l.default.getValues(-1,0),checked:!1}))})),l.default.on(\"updateDetail\",(function(e,n){t.id===e&&t.setState({currentVal:l.default.getValues(e,n)})})),u.default.on(\"updateChecked\",(function(e){t.id===e&&t.setState({checked:!t.state.checked})}))}},{key:\"componentDidMount\",value:function(){this.setFarSlider(),this.setColormapValueSlider(),this.setColormapHueSlider(),this.setOpacityCurve(),this.setOpacityEllipse()}},{key:\"setFarSlider\",value:function(){var t=this.id,e=$(\"#farSliderVal_\"+t);$(\"#farSlider_\"+t).slider({range:\"min\",value:0,min:1,max:100,slide:function(n,r){e.css(\"display\",\"initial\"),e.val(r.value);var i=$(\"#farSlider_\"+t).slider(\"option\",\"min\"),a=$(\"#farSlider_\"+t).slider(\"option\",\"max\")-i,o=$(\"#farSlider_\"+t).width()*(r.value-i)/a-10;e.css(\"left\",o+\"px\"),s.changeFar(t,r.value)},stop:function(){e.css(\"display\",\"none\")}}),$(\"#farSliderVal_\"+t).val($(\"#farSlider_\"+t).slider(\"value\"))}},{key:\"setColormapValueSlider\",value:function(){var t=this.id,e=$(\"#colorValue_\"+t),n=$(\"#colorValueMin_\"+t),r=$(\"#colorValueMax_\"+t);e.slider({range:!0,min:0,max:100,values:[0,100],orientation:\"vertical\",slide:function(i,a){n.css(\"display\",\"initial\"),r.css(\"display\",\"initial\");var o=l.default.getData(t),u=o.data.meta.min.V,c=o.data.meta.max.V,h=a.values[0]/100*(c-u)+u,f=a.values[1]/100*(c-u)+u;h=Math.log10(Math.abs(h))<-2&&0!==h?h.toExponential(1):h.toFixed(2),f=Math.log10(Math.abs(f))<-2&&0!==f?f.toExponential(1):f.toFixed(2),n.val(h),r.val(f);var d=e.slider(\"option\",\"min\"),p=e.slider(\"option\",\"max\")-d,m=150*(a.values[0]-d)/p-10,g=140-150*(a.values[1]-d)/p;n.css(\"bottom\",m+\"px\"),r.css(\"top\",g+\"px\");var v=o.data.meta.max.V-o.data.meta.min.V;s.updateMinMaxV(t,a.values[0]/100*v+o.data.meta.min.V,a.values[1]/100*v+o.data.meta.min.V)},stop:function(){n.css(\"display\",\"none\"),r.css(\"display\",\"none\")}}),n.val(e.slider(\"values\",0)),r.val(e.slider(\"values\",1))}},{key:\"setColormapHueSlider\",value:function(){var t=this.id,e=$(\"#colorHue_\"+t),n=$(\"#colorHueMin_\"+t),r=$(\"#colorHueMax_\"+t);e.slider({range:!0,min:0,max:100,values:[0,100],slide:function(e,i){n.css(\"display\",\"initial\"),r.css(\"display\",\"initial\");var a=l.default.getData(t),o=a.data.meta.min.H,u=a.data.meta.max.H,c=i.values[0]/100*(u-o)+o,h=i.values[1]/100*(u-o)+o;c=Math.log10(Math.abs(c))<-2&&0!==c?c.toExponential(1):c.toFixed(2),h=Math.log10(Math.abs(h))<-2&&0!==h?h.toExponential(1):h.toFixed(2),n.val(c),r.val(h);var f=150*i.values[0]/100-8,d=142-150*i.values[1]/100;n.css(\"left\",f+\"px\"),r.css(\"right\",d+\"px\");var p=a.data.meta.max.H-a.data.meta.min.H;s.updateMinMaxH(t,i.values[0]/100*p+a.data.meta.min.H,i.values[1]/100*p+a.data.meta.min.H)},stop:function(){n.css(\"display\",\"none\"),r.css(\"display\",\"none\")}}),n.val(e.slider(\"values\",0)),r.val(e.slider(\"values\",1))}},{key:\"setOpacityCurve\",value:function(){var t=10,e=10,n=10,r=150-n-10,i=150-t-e,o=a.select(\"#opacityCurve_\"+this.id).append(\"svg\").attr(\"width\",150).attr(\"height\",150).attr(\"id\",\"opacityCurveArea_\"+this.id);o.append(\"rect\").attr(\"width\",r).attr(\"height\",i).style(\"fill\",\"none\").style(\"stroke\",\"lightgray\").attr(\"transform\",\"translate(\"+n+\",\"+t+\")\");for(var s=r/(this.tubeNum-1),u=1;u<this.tubeNum;u++)o.append(\"line\").attr(\"x1\",s*u).attr(\"y1\",0).attr(\"x2\",s*u).attr(\"y2\",r).style(\"stroke\",\"lightgray\").attr(\"transform\",\"translate(\"+n+\",\"+t+\")\"),o.append(\"line\").attr(\"x1\",0).attr(\"y1\",s*u).attr(\"x2\",i).attr(\"y2\",s*u).style(\"stroke\",\"lightgray\").attr(\"transform\",\"translate(\"+n+\",\"+t+\")\");this.xScaleOpacity=a.scaleLinear().domain([0,1]).range([n,150-n]),this.yScaleOpacity=a.scaleLinear().domain([0,1]).range([150-t,e]),o.append(\"g\").attr(\"class\",\"axisLabel opacityCurveXAxis\").append(\"text\").attr(\"x\",75).attr(\"y\",150-e/2+5).style(\"fill\",\"black\").style(\"text-anchor\",\"middle\").style(\"font-size\",\"xx-small\").text(\"Radial size of the tube\"),o.append(\"g\").append(\"text\").attr(\"class\",\"axisLabel opacityCurveYAxis\").attr(\"transform\",\"rotate(-90)\").attr(\"x\",-75).attr(\"y\",n/2+2).style(\"fill\",\"black\").style(\"font-size\",\"xx-small\").style(\"text-anchor\",\"middle\").text(\"Opacity\"),o.append(\"path\").datum(this.opacityDistSet.Default).style(\"fill\",\"none\").style(\"stroke\",\"lightcoral\").style(\"stroke-width\",3).attr(\"id\",\"opacityCurvePath_\"+this.id).attr(\"d\",a.line().x(function(t){return this.xScaleOpacity(t[0])}.bind(this)).y(function(t){return this.yScaleOpacity(t[1])}.bind(this)).curve(a.curveBasis))}},{key:\"setOpacityEllipse\",value:function(){var t=10,e=10,n=150-e-10,r=150-t-10,i=a.select(\"#opacityEllipse_\"+this.id).append(\"svg\").attr(\"width\",150).attr(\"height\",150).attr(\"id\",\"opacityEllipseArea_\"+this.id);i.append(\"rect\").attr(\"width\",n).attr(\"height\",r).style(\"fill\",\"none\").style(\"stroke\",\"lightgray\").attr(\"transform\",\"translate(\"+e+\",\"+t+\")\");for(var o=Math.ceil(e+n/2),s=Math.ceil(t+r/2),u=this.opacityCurves.Default.getSpacedPoints(this.tubeNum),l=1;l<=this.tubeNum;l++){var c=1-(1-u[l-1].y)/(1-u[l].y);i.append(\"ellipse\").attr(\"cx\",o).attr(\"cy\",s).attr(\"rx\",50*l/this.tubeNum).attr(\"ry\",30*l/this.tubeNum).attr(\"id\",\"opacityEllipseEllipse_\"+this.id+\"-\"+l).style(\"fill\",\"orange\").style(\"opacity\",c)}}},{key:\"onChangeCheckbox\",value:function(t){s.updateChecked(t)}},{key:\"zoomOutTimeTubes\",value:function(){s.zoomOutTimeTubes(this.id)}},{key:\"resetZoomTimeTubes\",value:function(){s.resetZoomTimeTubes(this.id)}},{key:\"zoomInTimeTubes\",value:function(){s.zoomInTimeTubes(this.id)}},{key:\"showPopoverFar\",value:function(){var t=$(\"#changeFar_\"+this.id).css(\"visibility\"),e=$(\"#farPopoverBtn_\"+this.id).position();switch(t){case\"visible\":$(\"#changeFar_\"+this.id).css(\"visibility\",\"hidden\");break;case\"hidden\":$(\"#changeFar_\"+this.id).css(\"left\",e.left),$(\"#changeFar_\"+this.id).css(\"visibility\",\"visible\")}}},{key:\"showPopoverPlotColor\",value:function(){var t=$(\"#changePlotColor_\"+this.id).css(\"visibility\"),e=$(\"#plotColorPopoverBtn_\"+this.id).position();switch(t){case\"visible\":$(\"#changePlotColor_\"+this.id).css(\"visibility\",\"hidden\");break;case\"hidden\":$(\"#changePlotColor_\"+this.id).css(\"left\",e.left),$(\"#changePlotColor_\"+this.id).css(\"visibility\",\"visible\")}}},{key:\"showPopoverOpacity\",value:function(){var t=$(\"#changeOpacity_\"+this.id).css(\"visibility\"),e=$(\"#opacityPopoverBtn_\"+this.id).position();switch(t){case\"visible\":$(\"#changeOpacity_\"+this.id).css(\"visibility\",\"hidden\");break;case\"hidden\":$(\"#changeOpacity_\"+this.id).css(\"left\",e.left),$(\"#changeOpacity_\"+this.id).css(\"visibility\",\"visible\")}}},{key:\"showPopoverColormap\",value:function(){var t=$(\"#changeColormap_\"+this.id).css(\"visibility\"),e=$(\"#colormapPopoverBtn_\"+this.id).position();switch(t){case\"visible\":$(\"#changeColormap_\"+this.id).css(\"visibility\",\"hidden\");break;case\"hidden\":$(\"#changeColormap_\"+this.id).css(\"left\",e.left),$(\"#changeColormap_\"+this.id).css(\"visibility\",\"visible\")}}},{key:\"showPopoverSearch\",value:function(){var t=$(\"#searchTime_\"+this.id).css(\"visibility\"),e=$(\"#searchPopoverBtn_\"+this.id).position();switch(t){case\"visible\":$(\"#searchTime_\"+this.id).css(\"visibility\",\"hidden\");break;case\"hidden\":$(\"#searchTime_\"+this.id).css(\"left\",e.left),$(\"#searchTime_\"+this.id).css(\"visibility\",\"visible\")}}},{key:\"searchTime\",value:function(){var t=this.id,e=$(\"#searchTimeInput_\"+t).val();isNaN(e)||\"\"==e||s.searchTime(t,Number(e))}},{key:\"changePlotColor\",value:function(t,e){s.changePlotColor(this.id,t.hex)}},{key:\"changeOpacityDistribution\",value:function(){var t=document.getElementById(\"opacityList_\"+this.id),e=t.selectedIndex,n=t.options[e].value;this.drawOpacityCurve(n),this.drawOpacityEllipse(n),s.updateOpacity(this.id,n)}},{key:\"drawOpacityCurve\",value:function(t){a.select(\"#opacityCurvePath_\"+this.id).remove(),a.select(\"#opacityCurveArea_\"+this.id).append(\"path\").datum(this.opacityDistSet[t]).style(\"fill\",\"none\").style(\"stroke\",\"lightcoral\").style(\"stroke-width\",3).attr(\"id\",\"opacityCurvePath_\"+this.id).attr(\"d\",a.line().x(function(t){return this.xScaleOpacity(t[0])}.bind(this)).y(function(t){return this.yScaleOpacity(t[1])}.bind(this)).curve(a.curveBasis))}},{key:\"drawOpacityEllipse\",value:function(t){var e=1;if(\"Flat\"===t)for(var n=1;n<=this.tubeNum;n++)a.select(\"#opacityEllipseEllipse_\"+this.id+\"-\"+n).style(\"opacity\",e);else for(var r=this.opacityCurves[t].getSpacedPoints(this.tubeNum),i=1;i<=this.tubeNum;i++)e=1-(1-r[i-1].y)/(1-r[i].y),a.select(\"#opacityEllipseEllipse_\"+this.id+\"-\"+i).style(\"opacity\",e)}},{key:\"render\",value:function(){var t=this.state.currentVal,e=[];for(var n in t){var r=void 0;r=\"z\"===n||\"H\"===n?t[n].toFixed(3):\"V\"===n?t[n].toExponential(2):t[n].toFixed(4),e.push(i.default.createElement(\"tr\",{key:n+\"_\"+this.id,className:\"detailTableRow\"},i.default.createElement(\"td\",{className:\"detailTableData detailTableVari\"},this.lookup[n]),i.default.createElement(\"td\",{className:\"detailTableData\"},r)))}return i.default.createElement(\"div\",{id:\"onViewportControllers_\"+this.id},i.default.createElement(\"div\",{id:\"fileSelector_\"+this.id,className:\"controllersOnView\",style:{position:\"absolute\",color:\"white\",top:\"0px\",left:\"0px\",zIndex:\"10\",fontSize:\"0.8rem\",marginLeft:\"1.5rem\"}},i.default.createElement(\"input\",{type:\"checkbox\",id:\"selectView_\"+this.id,name:\"selectView\",key:this.id,value:this.id,checked:this.state.checked,onChange:this.onChangeCheckbox.bind(this,this.id)}),i.default.createElement(\"label\",{id:\"fileName_\"+this.id,style:{paddingLeft:\"0.5rem\",paddingRight:\"0.5rem\"}},this.state.fileName)),i.default.createElement(\"div\",{id:\"zoomControllers_\"+this.id,className:\"controllersOnView\",style:{position:\"absolute\",top:\"0px\",right:\"0px\",zIndex:\"20\",fontSize:\"0.8rem\"}},i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"zoomOutBtn_\"+this.id,onClick:this.zoomOutTimeTubes.bind(this)},\"-\"),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"resetZoomBtn_\"+this.id,onClick:this.resetZoomTimeTubes.bind(this)},\"\"),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"zoomInBtn_\"+this.id,onClick:this.zoomInTimeTubes.bind(this)},\"+\")),i.default.createElement(\"div\",{id:\"eachTubeControllers_\"+this.id,className:\"controllersOnView\",style:{position:\"absolute\",bottom:\"0px\",left:\"0px\",zIndex:\"30\",fontSize:\"0.8rem\"}},i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"colormapPopoverBtn_\"+this.id,onClick:this.showPopoverColormap.bind(this)},\"Colormap\"),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"farPopoverBtn_\"+this.id,onClick:this.showPopoverFar.bind(this)},\"Far\"),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"plotColorPopoverBtn_\"+this.id,onClick:this.showPopoverPlotColor.bind(this)},\"Plot Color\"),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"opacityPopoverBtn_\"+this.id,onClick:this.showPopoverOpacity.bind(this)},\"Opacity\"),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-sm btn-primary\",id:\"searchPopoverBtn_\"+this.id,onClick:this.showPopoverSearch.bind(this)},\"Search\")),i.default.createElement(\"div\",{className:\"input-group input-group-sm popover-controller\",id:\"changeColormap_\"+this.id,style:{visibility:\"hidden\",position:\"absolute\",bottom:\"1.7rem\",width:\"auto\",zIndex:\"31\"}},i.default.createElement(\"div\",{id:\"colorFilter_\"+this.id},i.default.createElement(\"div\",{id:\"colorValue_\"+this.id,style:{float:\"left\",height:\"150px\"}},i.default.createElement(\"output\",{id:\"colorValueMax_\"+this.id,style:{marginLeft:\"1.3rem\"}}),i.default.createElement(\"output\",{id:\"colorValueMin_\"+this.id,style:{marginLeft:\"1.3rem\"}})),i.default.createElement(\"div\",{id:\"colorMap_\"+this.id,style:{float:\"left\",marginLeft:\"10px\"}},i.default.createElement(\"label\",{htmlFor:\"file_photo\"},i.default.createElement(\"img\",{src:\"img/1_256.png\",style:{width:\"150px\",height:\"150px\"}}))),i.default.createElement(\"div\",{style:{clear:\"both\"}}),i.default.createElement(\"div\",{id:\"colorHue_\"+this.id,style:{width:\"150px\",marginTop:\"5px\",marginLeft:\"20px\"}},i.default.createElement(\"output\",{id:\"colorHueMax_\"+this.id,style:{bottom:\"1.3rem\"}}),i.default.createElement(\"output\",{id:\"colorHueMin_\"+this.id,style:{bottom:\"1.3rem\"}})))),i.default.createElement(\"div\",{className:\"input-group input-group-sm popover-controller\",id:\"changeFar_\"+this.id,style:{visibility:\"hidden\",position:\"absolute\",bottom:\"1.7rem\",width:\"auto\",zIndex:\"32\"}},i.default.createElement(\"div\",{id:\"farSliderArea_\"+this.id},i.default.createElement(\"label\",{id:\"idLabel_\"+this.id,style:{float:\"left\",width:\"2rem\"}},\"far\"),i.default.createElement(\"div\",{id:\"farSlider_\"+this.id,style:{float:\"left\",width:\"8rem\",marginBottom:\".5rem\",marginTop:\".5rem\"}},i.default.createElement(\"output\",{id:\"farSliderVal_\"+this.id,style:{position:\"absolute\",display:\"none\",top:\"-30px\",backgroundColor:\"#fff\",opacity:\"0.8\",borderRadius:\"3px\",color:\"#777\",padding:\"2px\"}})))),i.default.createElement(\"div\",{className:\"input-group input-group-sm popover-controller\",id:\"changePlotColor_\"+this.id,style:{visibility:\"hidden\",position:\"absolute\",bottom:\"1.7rem\",width:\"auto\",zIndex:\"33\"}},i.default.createElement(o.SketchPicker,{presetColors:u.default.getPresetColors(),color:u.default.getPlotColor(this.id),onChange:this.changePlotColor.bind(this)})),i.default.createElement(\"div\",{className:\"input-group input-group-sm popover-controller\",id:\"changeOpacity_\"+this.id,style:{visibility:\"hidden\",position:\"absolute\",bottom:\"1.7rem\",width:\"auto\",zIndex:\"34\",display:\"block\"}},i.default.createElement(\"select\",{className:\"form-control\",id:\"opacityList_\"+this.id,onChange:this.changeOpacityDistribution.bind(this),style:{fontSize:\"0.8rem\",width:\"150px\"}},i.default.createElement(\"option\",{value:\"Default\"},\"Default\"),i.default.createElement(\"option\",{value:\"Flat\"},\"Flat\"),i.default.createElement(\"option\",{value:\"Linear\"},\"Linear\"),i.default.createElement(\"option\",{value:\"Valley\"},\"Valley shaped\")),i.default.createElement(\"div\",{className:\"currentOpacity\",style:{display:\"flex\"}},i.default.createElement(\"div\",{id:\"opacityCurve_\"+this.id}),i.default.createElement(\"div\",{id:\"opacityEllipse_\"+this.id}))),i.default.createElement(\"div\",{className:\"input-group input-group-sm popover-controller\",id:\"searchTime_\"+this.id,style:{visibility:\"hidden\",position:\"absolute\",bottom:\"1.7rem\",width:\"10rem\",zIndex:\"35\"}},i.default.createElement(\"input\",{type:\"text\",className:\"form-control custom-input\",id:\"searchTimeInput_\"+this.id,placeholder:\"Input JD\"}),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",type:\"button\",id:\"searchTimeBtn_\"+this.id,onClick:this.searchTime.bind(this)},\"Search\")),i.default.createElement(\"div\",{id:\"detailValueArea\",className:\"controllersOnView\",style:{position:\"absolute\",color:\"white\",right:\"0px\",bottom:\"0px\",whiteSpace:\"pre-line\",zIndex:\"11\",fontSize:\"0.8rem\"}},i.default.createElement(\"table\",{className:\"detailTable\"},i.default.createElement(\"tbody\",{className:\"detailTableBody\"},e))))}}]),e}(i.default.Component);e.default=f},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.CustomPicker=e.TwitterPicker=e.SwatchesPicker=e.SliderPicker=e.SketchPicker=e.PhotoshopPicker=e.MaterialPicker=e.HuePicker=e.GithubPicker=e.CompactPicker=e.ChromePicker=e.default=e.CirclePicker=e.BlockPicker=e.AlphaPicker=void 0;var r=n(121);Object.defineProperty(e,\"AlphaPicker\",{enumerable:!0,get:function(){return y(r).default}});var i=n(250);Object.defineProperty(e,\"BlockPicker\",{enumerable:!0,get:function(){return y(i).default}});var a=n(252);Object.defineProperty(e,\"CirclePicker\",{enumerable:!0,get:function(){return y(a).default}});var o=n(254);Object.defineProperty(e,\"ChromePicker\",{enumerable:!0,get:function(){return y(o).default}});var s=n(259);Object.defineProperty(e,\"CompactPicker\",{enumerable:!0,get:function(){return y(s).default}});var u=n(262);Object.defineProperty(e,\"GithubPicker\",{enumerable:!0,get:function(){return y(u).default}});var l=n(264);Object.defineProperty(e,\"HuePicker\",{enumerable:!0,get:function(){return y(l).default}});var c=n(266);Object.defineProperty(e,\"MaterialPicker\",{enumerable:!0,get:function(){return y(c).default}});var h=n(267);Object.defineProperty(e,\"PhotoshopPicker\",{enumerable:!0,get:function(){return y(h).default}});var f=n(273);Object.defineProperty(e,\"SketchPicker\",{enumerable:!0,get:function(){return y(f).default}});var d=n(276);Object.defineProperty(e,\"SliderPicker\",{enumerable:!0,get:function(){return y(d).default}});var p=n(280);Object.defineProperty(e,\"SwatchesPicker\",{enumerable:!0,get:function(){return y(p).default}});var m=n(284);Object.defineProperty(e,\"TwitterPicker\",{enumerable:!0,get:function(){return y(m).default}});var g=n(94);Object.defineProperty(e,\"CustomPicker\",{enumerable:!0,get:function(){return y(g).default}});var v=y(o);function y(t){return t&&t.__esModule?t:{default:t}}e.default=v.default},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.AlphaPicker=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=u(n(0)),a=u(n(1)),o=n(2),s=u(n(249));function u(t){return t&&t.__esModule?t:{default:t}}var l=e.AlphaPicker=function(t){var e=t.rgb,n=t.hsl,s=t.width,u=t.height,l=t.onChange,c=t.direction,h=t.style,f=t.renderers,d=t.pointer,p=t.className,m=void 0===p?\"\":p,g=(0,a.default)({default:{picker:{position:\"relative\",width:s,height:u},alpha:{radius:\"2px\",style:h}}});return i.default.createElement(\"div\",{style:g.picker,className:\"alpha-picker \"+m},i.default.createElement(o.Alpha,r({},g.alpha,{rgb:e,hsl:n,pointer:d,renderers:f,onChange:l,direction:c})))};l.defaultProps={width:\"316px\",height:\"16px\",direction:\"horizontal\",pointer:s.default},e.default=(0,o.ColorWrap)(l)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.flattenNames=void 0;var r=s(n(123)),i=s(n(39)),a=s(n(68)),o=s(n(14));function s(t){return t&&t.__esModule?t:{default:t}}var u=e.flattenNames=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,o.default)(e,(function(e){Array.isArray(e)?t(e).map((function(t){return n.push(t)})):(0,a.default)(e)?(0,i.default)(e,(function(t,e){!0===t&&n.push(e),n.push(e+\"-\"+t)})):(0,r.default)(e)&&n.push(e)})),n};e.default=u},function(t,e,n){var r=n(16),i=n(5),a=n(12),o=\"[object String]\";t.exports=function(t){return\"string\"==typeof t||!i(t)&&a(t)&&r(t)==o}},function(t,e,n){var r=n(22),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(16),i=n(12),a=\"[object Arguments]\";t.exports=function(t){return i(t)&&r(t)==a}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(16),i=n(43),a=n(12),o={};o[\"[object Float32Array]\"]=o[\"[object Float64Array]\"]=o[\"[object Int8Array]\"]=o[\"[object Int16Array]\"]=o[\"[object Int32Array]\"]=o[\"[object Uint8Array]\"]=o[\"[object Uint8ClampedArray]\"]=o[\"[object Uint16Array]\"]=o[\"[object Uint32Array]\"]=!0,o[\"[object Arguments]\"]=o[\"[object Array]\"]=o[\"[object ArrayBuffer]\"]=o[\"[object Boolean]\"]=o[\"[object DataView]\"]=o[\"[object Date]\"]=o[\"[object Error]\"]=o[\"[object Function]\"]=o[\"[object Map]\"]=o[\"[object Number]\"]=o[\"[object Object]\"]=o[\"[object RegExp]\"]=o[\"[object Set]\"]=o[\"[object String]\"]=o[\"[object WeakMap]\"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},function(t,e,n){var r=n(46),i=n(132),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&\"constructor\"!=n&&e.push(n);return e}},function(t,e,n){var r=n(66)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(134),i=n(178),a=n(29),o=n(5),s=n(188);t.exports=function(t){return\"function\"==typeof t?t:null==t?a:\"object\"==typeof t?o(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(135),i=n(177),a=n(79);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(30),i=n(71),a=1,o=2;t.exports=function(t,e,n,s){var u=n.length,l=u,c=!s;if(null==t)return!l;for(t=Object(t);u--;){var h=n[u];if(c&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++u<l;){var f=(h=n[u])[0],d=t[f],p=h[1];if(c&&h[2]){if(void 0===d&&!(f in t))return!1}else{var m=new r;if(s)var g=s(d,p,f,t,e,m);if(!(void 0===g?i(p,d,a|o,s,m):g))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(32),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(32);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(32);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(32);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(31);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(31),i=n(49),a=n(50),o=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<o-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(47),i=n(147),a=n(7),o=n(70),s=/^\\[object .+?Constructor\\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp(\"^\"+c.call(h).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?f:s).test(o(t))}},function(t,e,n){var r,i=n(148),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+r:\"\";t.exports=function(t){return!!a&&a in t}},function(t,e,n){var r=n(9)[\"__core-js_shared__\"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(151),i=n(31),a=n(49);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(t,e,n){var r=n(152),i=n(153),a=n(154),o=n(155),s=n(156);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(33);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(33),i=\"__lodash_hash_undefined__\",a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return a.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(33),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(33),i=\"__lodash_hash_undefined__\";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e,n){var r=n(34);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return\"string\"==e||\"number\"==e||\"symbol\"==e||\"boolean\"==e?\"__proto__\"!==t:null===t}},function(t,e,n){var r=n(34);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(34);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(34);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(30),i=n(72),a=n(168),o=n(171),s=n(35),u=n(5),l=n(27),c=n(42),h=1,f=\"[object Arguments]\",d=\"[object Array]\",p=\"[object Object]\",m=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,y){var b=u(t),_=u(e),x=b?d:s(t),w=_?d:s(e),S=(x=x==f?p:x)==p,E=(w=w==f?p:w)==p,M=x==w;if(M&&l(t)){if(!l(e))return!1;b=!0,S=!1}if(M&&!S)return y||(y=new r),b||c(t)?i(t,e,n,g,v,y):a(t,e,x,n,g,v,y);if(!(n&h)){var T=S&&m.call(t,\"__wrapped__\"),C=E&&m.call(e,\"__wrapped__\");if(T||C){var P=T?t.value():t,k=C?e.value():e;return y||(y=new r),v(P,k,n,g,y)}}return!!M&&(y||(y=new r),o(t,e,n,g,v,y))}},function(t,e,n){var r=n(50),i=n(164),a=n(165);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},function(t,e){var n=\"__lodash_hash_undefined__\";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(22),i=n(73),a=n(24),o=n(72),s=n(169),u=n(170),l=1,c=2,h=\"[object Boolean]\",f=\"[object Date]\",d=\"[object Error]\",p=\"[object Map]\",m=\"[object Number]\",g=\"[object RegExp]\",v=\"[object Set]\",y=\"[object String]\",b=\"[object Symbol]\",_=\"[object ArrayBuffer]\",x=\"[object DataView]\",w=r?r.prototype:void 0,S=w?w.valueOf:void 0;t.exports=function(t,e,n,r,w,E,M){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!E(new i(t),new i(e)));case h:case f:case m:return a(+t,+e);case d:return t.name==e.name&&t.message==e.message;case g:case y:return t==e+\"\";case p:var T=s;case v:var C=r&l;if(T||(T=u),t.size!=e.size&&!C)return!1;var P=M.get(t);if(P)return P==e;r|=c,M.set(t,e);var k=o(T(t),T(e),r,w,E,M);return M.delete(t),k;case b:if(S)return S.call(t)==S.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(74),i=1,a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,u){var l=n&i,c=r(t),h=c.length;if(h!=r(e).length&&!l)return!1;for(var f=h;f--;){var d=c[f];if(!(l?d in e:a.call(e,d)))return!1}var p=u.get(t);if(p&&u.get(e))return p==e;var m=!0;u.set(t,e),u.set(e,t);for(var g=l;++f<h;){var v=t[d=c[f]],y=e[d];if(o)var b=l?o(y,v,d,e,t,u):o(v,y,d,t,e,u);if(!(void 0===b?v===y||s(v,y,n,o,u):b)){m=!1;break}g||(g=\"constructor\"==d)}if(m&&!g){var _=t.constructor,x=e.constructor;_!=x&&\"constructor\"in t&&\"constructor\"in e&&!(\"function\"==typeof _&&_ instanceof _&&\"function\"==typeof x&&x instanceof x)&&(m=!1)}return u.delete(t),u.delete(e),m}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},function(t,e,n){var r=n(17)(n(9),\"DataView\");t.exports=r},function(t,e,n){var r=n(17)(n(9),\"Promise\");t.exports=r},function(t,e,n){var r=n(17)(n(9),\"Set\");t.exports=r},function(t,e,n){var r=n(17)(n(9),\"WeakMap\");t.exports=r},function(t,e,n){var r=n(78),i=n(23);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},function(t,e,n){var r=n(71),i=n(179),a=n(185),o=n(52),s=n(78),u=n(79),l=n(37),c=1,h=2;t.exports=function(t,e){return o(t)&&s(e)?u(l(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,c|h)}}},function(t,e,n){var r=n(80);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(181),i=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,a=/\\\\(\\\\)?/g,o=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(\"\"),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(a,\"$1\"):n||t)})),e}));t.exports=o},function(t,e,n){var r=n(182),i=500;t.exports=function(t){var e=r(t,(function(t){return n.size===i&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(50),i=\"Expected a function\";function a(t,e){if(\"function\"!=typeof t||null!=e&&\"function\"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(a.Cache||r),n}a.Cache=r,t.exports=a},function(t,e,n){var r=n(184);t.exports=function(t){return null==t?\"\":r(t)}},function(t,e,n){var r=n(22),i=n(69),a=n(5),o=n(36),s=1/0,u=r?r.prototype:void 0,l=u?u.toString:void 0;t.exports=function t(e){if(\"string\"==typeof e)return e;if(a(e))return i(e,t)+\"\";if(o(e))return l?l.call(e):\"\";var n=e+\"\";return\"0\"==n&&1/e==-s?\"-0\":n}},function(t,e,n){var r=n(186),i=n(187);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(81),i=n(40),a=n(5),o=n(41),s=n(43),u=n(37);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&o(f,c)&&(a(t)||i(t))}},function(t,e,n){var r=n(189),i=n(190),a=n(52),o=n(37);t.exports=function(t){return a(t)?r(o(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(80);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(82),i=n(20);t.exports=function(t,e){var n=-1,a=i(t)?Array(t.length):[];return r(t,(function(t,r,i){a[++n]=e(t,r,i)})),a}},function(t,e,n){var r=n(20);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.mergeClasses=void 0;var r=o(n(39)),i=o(n(194)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function o(t){return t&&t.__esModule?t:{default:t}}var s=e.mergeClasses=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.default&&(0,i.default)(t.default)||{};return e.map((function(e){var i=t[e];return i&&(0,r.default)(i,(function(t,e){n[e]||(n[e]={}),n[e]=a({},n[e],i[e])})),e})),n};e.default=s},function(t,e,n){var r=n(195),i=1,a=4;t.exports=function(t){return r(t,i|a)}},function(t,e,n){var r=n(30),i=n(83),a=n(84),o=n(196),s=n(197),u=n(86),l=n(87),c=n(200),h=n(201),f=n(74),d=n(202),p=n(35),m=n(203),g=n(204),v=n(90),y=n(5),b=n(27),_=n(209),x=n(7),w=n(211),S=n(23),E=1,M=2,T=4,C=\"[object Arguments]\",P=\"[object Function]\",k=\"[object GeneratorFunction]\",A=\"[object Object]\",O={};O[C]=O[\"[object Array]\"]=O[\"[object ArrayBuffer]\"]=O[\"[object DataView]\"]=O[\"[object Boolean]\"]=O[\"[object Date]\"]=O[\"[object Float32Array]\"]=O[\"[object Float64Array]\"]=O[\"[object Int8Array]\"]=O[\"[object Int16Array]\"]=O[\"[object Int32Array]\"]=O[\"[object Map]\"]=O[\"[object Number]\"]=O[A]=O[\"[object RegExp]\"]=O[\"[object Set]\"]=O[\"[object String]\"]=O[\"[object Symbol]\"]=O[\"[object Uint8Array]\"]=O[\"[object Uint8ClampedArray]\"]=O[\"[object Uint16Array]\"]=O[\"[object Uint32Array]\"]=!0,O[\"[object Error]\"]=O[P]=O[\"[object WeakMap]\"]=!1,t.exports=function t(e,n,L,I,N,R){var D,z=n&E,B=n&M,F=n&T;if(L&&(D=N?L(e,I,N,R):L(e)),void 0!==D)return D;if(!x(e))return e;var j=y(e);if(j){if(D=m(e),!z)return l(e,D)}else{var U=p(e),V=U==P||U==k;if(b(e))return u(e,z);if(U==A||U==C||V&&!N){if(D=B||V?{}:v(e),!z)return B?h(e,s(D,e)):c(e,o(D,e))}else{if(!O[U])return N?e:{};D=g(e,U,z)}}R||(R=new r);var H=R.get(e);if(H)return H;if(R.set(e,D),w(e))return e.forEach((function(r){D.add(t(r,n,L,r,e,R))})),D;if(_(e))return e.forEach((function(r,i){D.set(i,t(r,n,L,i,e,R))})),D;var G=F?B?d:f:B?keysIn:S,W=j?void 0:G(e);return i(W||e,(function(r,i){W&&(r=e[i=r]),a(D,i,t(r,n,L,i,e,R))})),D}},function(t,e,n){var r=n(25),i=n(23);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(25),i=n(38);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(7),i=n(46),a=n(199),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e=i(t),n=[];for(var s in t)(\"constructor\"!=s||!e&&o.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(25),i=n(51);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(25),i=n(88);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(75),i=n(88),a=n(38);t.exports=function(t){return r(t,a,i)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&\"string\"==typeof t[0]&&n.call(t,\"index\")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(54),i=n(205),a=n(206),o=n(207),s=n(89),u=\"[object Boolean]\",l=\"[object Date]\",c=\"[object Map]\",h=\"[object Number]\",f=\"[object RegExp]\",d=\"[object Set]\",p=\"[object String]\",m=\"[object Symbol]\",g=\"[object ArrayBuffer]\",v=\"[object DataView]\",y=\"[object Float32Array]\",b=\"[object Float64Array]\",_=\"[object Int8Array]\",x=\"[object Int16Array]\",w=\"[object Int32Array]\",S=\"[object Uint8Array]\",E=\"[object Uint8ClampedArray]\",M=\"[object Uint16Array]\",T=\"[object Uint32Array]\";t.exports=function(t,e,n){var C=t.constructor;switch(e){case g:return r(t);case u:case l:return new C(+t);case v:return i(t,n);case y:case b:case _:case x:case w:case S:case E:case M:case T:return s(t,n);case c:return new C;case h:case p:return new C(t);case f:return a(t);case d:return new C;case m:return o(t)}}},function(t,e,n){var r=n(54);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(22),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},function(t,e,n){var r=n(7),i=Object.create,a=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},function(t,e,n){var r=n(210),i=n(44),a=n(45),o=a&&a.isMap,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(35),i=n(12),a=\"[object Map]\";t.exports=function(t){return i(t)&&r(t)==a}},function(t,e,n){var r=n(212),i=n(44),a=n(45),o=a&&a.isSet,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(35),i=n(12),a=\"[object Set]\";t.exports=function(t){return i(t)&&r(t)==a}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.autoprefix=void 0;var r,i=n(39),a=(r=i)&&r.__esModule?r:{default:r},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var s={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var e=t&&t.split(\" \");return{position:\"absolute\",top:e&&e[0],right:e&&e[1],bottom:e&&e[2],left:e&&e[3]}},extend:function(t,e){var n=e[t];return n||{extend:t}}},u=e.autoprefix=function(t){var e={};return(0,a.default)(t,(function(t,n){var r={};(0,a.default)(t,(function(t,e){var n=s[e];n?r=o({},r,n(t)):r[e]=t})),e[n]=r})),e};e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.hover=void 0;var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function u(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function l(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.hover=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"span\";return function(n){function r(){var n,a,l;s(this,r);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return a=l=u(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(h))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return o.default.createElement(e,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},o.default.createElement(t,i({},l.props,l.state)))},u(l,a)}return l(r,n),r}(o.default.Component)};e.default=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.active=void 0;var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function u(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function l(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"span\";return function(n){function r(){var n,a,l;s(this,r);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return a=l=u(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(h))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return o.default.createElement(e,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},o.default.createElement(t,i({},l.props,l.state)))},u(l,a)}return l(r,n),r}(o.default.Component)};e.default=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.default=function(t,e){var n={},r=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[t]=e};return 0===t&&r(\"first-child\"),t===e-1&&r(\"last-child\"),(0===t||t%2==0)&&r(\"even\"),1===Math.abs(t%2)&&r(\"odd\"),r(\"nth-child\",t),n}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Alpha=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),o=c(a),s=c(n(1)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(218)),l=c(n(55));function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}var f=e.Alpha=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=h(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.handleChange=function(t){var e=u.calculateChange(t,r.props.hsl,r.props.direction,r.props.a,r.container);e&&\"function\"==typeof r.props.onChange&&r.props.onChange(e,t)},r.handleMouseDown=function(t){r.handleChange(t),window.addEventListener(\"mousemove\",r.handleChange),window.addEventListener(\"mouseup\",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener(\"mousemove\",r.handleChange),window.removeEventListener(\"mouseup\",r.handleMouseUp)},h(r,n)}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:\"componentWillUnmount\",value:function(){this.unbindEventListeners()}},{key:\"render\",value:function(){var t=this,e=this.props.rgb,n=(0,s.default)({default:{alpha:{absolute:\"0px 0px 0px 0px\",borderRadius:this.props.radius},checkboard:{absolute:\"0px 0px 0px 0px\",overflow:\"hidden\",borderRadius:this.props.radius},gradient:{absolute:\"0px 0px 0px 0px\",background:\"linear-gradient(to right, rgba(\"+e.r+\",\"+e.g+\",\"+e.b+\", 0) 0%,\\n           rgba(\"+e.r+\",\"+e.g+\",\"+e.b+\", 1) 100%)\",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:\"relative\",height:\"100%\",margin:\"0 3px\"},pointer:{position:\"absolute\",left:100*e.a+\"%\"},slider:{width:\"4px\",borderRadius:\"1px\",height:\"8px\",boxShadow:\"0 0 2px rgba(0, 0, 0, .6)\",background:\"#fff\",marginTop:\"1px\",transform:\"translateX(-2px)\"}},vertical:{gradient:{background:\"linear-gradient(to bottom, rgba(\"+e.r+\",\"+e.g+\",\"+e.b+\", 0) 0%,\\n           rgba(\"+e.r+\",\"+e.g+\",\"+e.b+\", 1) 100%)\"},pointer:{left:0,top:100*e.a+\"%\"}},overwrite:r({},this.props.style)},{vertical:\"vertical\"===this.props.direction,overwrite:!0});return o.default.createElement(\"div\",{style:n.alpha},o.default.createElement(\"div\",{style:n.checkboard},o.default.createElement(l.default,{renderers:this.props.renderers})),o.default.createElement(\"div\",{style:n.gradient}),o.default.createElement(\"div\",{style:n.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement(\"div\",{style:n.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement(\"div\",{style:n.slider}))))}}]),e}(a.PureComponent||a.Component);e.default=f},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.calculateChange=function(t,e,n,r,i){var a=i.clientWidth,o=i.clientHeight,s=\"number\"==typeof t.pageX?t.pageX:t.touches[0].pageX,u=\"number\"==typeof t.pageY?t.pageY:t.touches[0].pageY,l=s-(i.getBoundingClientRect().left+window.pageXOffset),c=u-(i.getBoundingClientRect().top+window.pageYOffset);if(\"vertical\"===n){var h=void 0;if(h=c<0?0:c>o?1:Math.round(100*c/o)/100,e.a!==h)return{h:e.h,s:e.s,l:e.l,a:h,source:\"rgb\"}}else{var f=void 0;if(r!==(f=l<0?0:l>a?1:Math.round(100*l/a)/100))return{h:e.h,s:e.s,l:e.l,a:f,source:\"rgb\"}}return null}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r={},i=e.render=function(t,e,n,r){if(\"undefined\"==typeof document&&!r)return null;var i=r?new r:document.createElement(\"canvas\");i.width=2*n,i.height=2*n;var a=i.getContext(\"2d\");return a?(a.fillStyle=t,a.fillRect(0,0,i.width,i.height),a.fillStyle=e,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null};e.get=function(t,e,n,a){var o=t+\"-\"+e+\"-\"+n+(a?\"-server\":\"\");if(r[o])return r[o];var s=i(t,e,n,a);return r[o]=s,s}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.EditableInput=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=s(i),o=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}var u=38,l=[u,40],c=function(t){return l.indexOf(t)>-1},h=function(t){return Number(String(t).replace(/%/g,\"\"))},f=e.EditableInput=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(t){n.setUpdatedValue(t.target.value,t)},n.handleKeyDown=function(t){var e=h(t.target.value);if(!isNaN(e)&&c(t.keyCode)){var r=n.getArrowOffset(),i=t.keyCode===u?e+r:e-r;n.setUpdatedValue(i,t)}},n.handleDrag=function(t){if(n.props.dragLabel){var e=Math.round(n.props.value+t.movementX);e>=0&&e<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(e),t)}},n.handleMouseDown=function(t){n.props.dragLabel&&(t.preventDefault(),n.handleDrag(t),window.addEventListener(\"mousemove\",n.handleDrag),window.addEventListener(\"mouseup\",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener(\"mousemove\",n.handleDrag),window.removeEventListener(\"mouseup\",n.handleMouseUp)},n.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillReceiveProps\",value:function(t){var e=this.input;t.value!==this.state.value&&(e===document.activeElement?this.setState({blurValue:String(t.value).toUpperCase()}):this.setState({value:String(t.value).toUpperCase(),blurValue:!this.state.blurValue&&String(t.value).toUpperCase()}))}},{key:\"componentWillUnmount\",value:function(){this.unbindEventListeners()}},{key:\"getValueObjectWithLabel\",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.props.label,t)}},{key:\"getArrowOffset\",value:function(){return this.props.arrowOffset||1}},{key:\"setUpdatedValue\",value:function(t,e){var n=null!==this.props.label?this.getValueObjectWithLabel(t):t;this.props.onChange&&this.props.onChange(n,e);var r,i=function(t){return String(t).indexOf(\"%\")>-1}(e.target.value);this.setState({value:i?(r=t,r+\"%\"):t})}},{key:\"render\",value:function(){var t=this,e=(0,o.default)({default:{wrap:{position:\"relative\"}},\"user-override\":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},\"dragLabel-true\":{label:{cursor:\"ew-resize\"}}},{\"user-override\":!0},this.props);return a.default.createElement(\"div\",{style:e.wrap},a.default.createElement(\"input\",{style:e.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:\"false\"}),this.props.label&&!this.props.hideLabel?a.default.createElement(\"span\",{style:e.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(i.PureComponent||i.Component);e.default=f},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Hue=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=u(i),o=u(n(1)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(222));function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}var c=e.Hue=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=l(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.handleChange=function(t){var e=s.calculateChange(t,r.props.direction,r.props.hsl,r.container);e&&\"function\"==typeof r.props.onChange&&r.props.onChange(e,t)},r.handleMouseDown=function(t){r.handleChange(t),window.addEventListener(\"mousemove\",r.handleChange),window.addEventListener(\"mouseup\",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},l(r,n)}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillUnmount\",value:function(){this.unbindEventListeners()}},{key:\"unbindEventListeners\",value:function(){window.removeEventListener(\"mousemove\",this.handleChange),window.removeEventListener(\"mouseup\",this.handleMouseUp)}},{key:\"render\",value:function(){var t=this,e=this.props.direction,n=void 0===e?\"horizontal\":e,r=(0,o.default)({default:{hue:{absolute:\"0px 0px 0px 0px\",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:\"0 2px\",position:\"relative\",height:\"100%\",borderRadius:this.props.radius},pointer:{position:\"absolute\",left:100*this.props.hsl.h/360+\"%\"},slider:{marginTop:\"1px\",width:\"4px\",borderRadius:\"1px\",height:\"8px\",boxShadow:\"0 0 2px rgba(0, 0, 0, .6)\",background:\"#fff\",transform:\"translateX(-2px)\"}},vertical:{pointer:{left:\"0px\",top:-100*this.props.hsl.h/360+100+\"%\"}}},{vertical:\"vertical\"===n});return a.default.createElement(\"div\",{style:r.hue},a.default.createElement(\"div\",{className:\"hue-\"+n,style:r.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement(\"style\",null,\"\\n            .hue-horizontal {\\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n            }\\n\\n            .hue-vertical {\\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\\n            }\\n          \"),a.default.createElement(\"div\",{style:r.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement(\"div\",{style:r.slider}))))}}]),e}(i.PureComponent||i.Component);e.default=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.calculateChange=function(t,e,n,r){var i=r.clientWidth,a=r.clientHeight,o=\"number\"==typeof t.pageX?t.pageX:t.touches[0].pageX,s=\"number\"==typeof t.pageY?t.pageY:t.touches[0].pageY,u=o-(r.getBoundingClientRect().left+window.pageXOffset),l=s-(r.getBoundingClientRect().top+window.pageYOffset);if(\"vertical\"===e){var c=void 0;if(l<0)c=359;else if(l>a)c=0;else{c=360*(-100*l/a+100)/100}if(n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:\"rgb\"}}else{var h=void 0;if(u<0)h=0;else if(u>i)h=359;else{h=360*(100*u/i)/100}if(n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:\"rgb\"}}return null}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Raised=void 0;var r=s(n(0)),i=s(n(4)),a=s(n(1)),o=s(n(6));function s(t){return t&&t.__esModule?t:{default:t}}var u=e.Raised=function(t){var e=t.zDepth,n=t.radius,i=t.background,s=t.children,u=t.styles,l=void 0===u?{}:u,c=(0,a.default)((0,o.default)({default:{wrap:{position:\"relative\",display:\"inline-block\"},content:{position:\"relative\"},bg:{absolute:\"0px 0px 0px 0px\",boxShadow:\"0 \"+e+\"px \"+4*e+\"px rgba(0,0,0,.24)\",borderRadius:n,background:i}},\"zDepth-0\":{bg:{boxShadow:\"none\"}},\"zDepth-1\":{bg:{boxShadow:\"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)\"}},\"zDepth-2\":{bg:{boxShadow:\"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)\"}},\"zDepth-3\":{bg:{boxShadow:\"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)\"}},\"zDepth-4\":{bg:{boxShadow:\"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)\"}},\"zDepth-5\":{bg:{boxShadow:\"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)\"}},square:{bg:{borderRadius:\"0\"}},circle:{bg:{borderRadius:\"50%\"}}},l),{\"zDepth-1\":1===e});return r.default.createElement(\"div\",{style:c.wrap},r.default.createElement(\"div\",{style:c.bg}),r.default.createElement(\"div\",{style:c.content},s))};u.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},u.defaultProps={background:\"#fff\",zDepth:1,radius:2,styles:{}},e.default=u},function(t,e,n){\"use strict\";var r=n(225);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw s.name=\"Invariant Violation\",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){\"use strict\";t.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},function(t,e,n){var r=n(30),i=n(91),a=n(64),o=n(227),s=n(7),u=n(38),l=n(92);t.exports=function t(e,n,c,h,f){e!==n&&a(n,(function(a,u){if(s(a))f||(f=new r),o(e,n,u,c,t,h,f);else{var d=h?h(l(e,u),a,u+\"\",e,n,f):void 0;void 0===d&&(d=a),i(e,u,d)}}),u)}},function(t,e,n){var r=n(91),i=n(86),a=n(89),o=n(87),s=n(90),u=n(40),l=n(5),c=n(228),h=n(27),f=n(47),d=n(7),p=n(68),m=n(42),g=n(92),v=n(229);t.exports=function(t,e,n,y,b,_,x){var w=g(t,n),S=g(e,n),E=x.get(S);if(E)r(t,n,E);else{var M=_?_(w,S,n+\"\",t,e,x):void 0,T=void 0===M;if(T){var C=l(S),P=!C&&h(S),k=!C&&!P&&m(S);M=S,C||P||k?l(w)?M=w:c(w)?M=o(w):P?(T=!1,M=i(S,!0)):k?(T=!1,M=a(S,!0)):M=[]:p(S)||u(S)?(M=w,u(w)?M=v(w):d(w)&&!f(w)||(M=s(S))):T=!1}T&&(x.set(S,M),b(M,S,y,_,x),x.delete(S)),r(t,n,M)}}},function(t,e,n){var r=n(20),i=n(12);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(25),i=n(38);t.exports=function(t){return r(t,i(t))}},function(t,e,n){var r=n(231),i=n(238);t.exports=function(t){return r((function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&\"function\"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e}))}},function(t,e,n){var r=n(29),i=n(232),a=n(234);t.exports=function(t,e){return a(i(t,e,r),t+\"\")}},function(t,e,n){var r=n(233),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=i(a.length-e,0),u=Array(s);++o<s;)u[o]=a[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=a[o];return l[e]=n(u),r(t,this,l)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(235),i=n(237)(r);t.exports=i},function(t,e,n){var r=n(236),i=n(85),a=n(29),o=i?function(t,e){return i(t,\"toString\",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;t.exports=o},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,a=0;return function(){var o=i(),s=r-(o-a);if(a=o,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(24),i=n(20),a=n(41),o=n(7);t.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!(\"number\"==s?i(n)&&a(e,n.length):\"string\"==s&&e in n)&&r(n[e],t)}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Saturation=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=l(i),o=l(n(1)),s=l(n(240)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(243));function l(t){return t&&t.__esModule?t:{default:t}}var c=e.Saturation=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleChange=function(t){\"function\"==typeof n.props.onChange&&n.throttle(n.props.onChange,u.calculateChange(t,n.props.hsl,n.container),t)},n.handleMouseDown=function(t){n.handleChange(t),window.addEventListener(\"mousemove\",n.handleChange),window.addEventListener(\"mouseup\",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,s.default)((function(t,e,n){t(e,n)}),50),n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillUnmount\",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:\"unbindEventListeners\",value:function(){window.removeEventListener(\"mousemove\",this.handleChange),window.removeEventListener(\"mouseup\",this.handleMouseUp)}},{key:\"render\",value:function(){var t=this,e=this.props.style||{},n=e.color,r=e.white,i=e.black,s=e.pointer,u=e.circle,l=(0,o.default)({default:{color:{absolute:\"0px 0px 0px 0px\",background:\"hsl(\"+this.props.hsl.h+\",100%, 50%)\",borderRadius:this.props.radius},white:{absolute:\"0px 0px 0px 0px\",borderRadius:this.props.radius},black:{absolute:\"0px 0px 0px 0px\",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:\"absolute\",top:-100*this.props.hsv.v+100+\"%\",left:100*this.props.hsv.s+\"%\",cursor:\"default\"},circle:{width:\"4px\",height:\"4px\",boxShadow:\"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\\n            0 0 1px 2px rgba(0,0,0,.4)\",borderRadius:\"50%\",cursor:\"hand\",transform:\"translate(-2px, -2px)\"}},custom:{color:n,white:r,black:i,pointer:s,circle:u}},{custom:!!this.props.style});return a.default.createElement(\"div\",{style:l.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement(\"style\",null,\"\\n          .saturation-white {\\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\\n          }\\n          .saturation-black {\\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\\n          }\\n        \"),a.default.createElement(\"div\",{style:l.white,className:\"saturation-white\"},a.default.createElement(\"div\",{style:l.black,className:\"saturation-black\"}),a.default.createElement(\"div\",{style:l.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement(\"div\",{style:l.circle}))))}}]),e}(i.PureComponent||i.Component);e.default=c},function(t,e,n){var r=n(93),i=n(7),a=\"Expected a function\";t.exports=function(t,e,n){var o=!0,s=!0;if(\"function\"!=typeof t)throw new TypeError(a);return i(n)&&(o=\"leading\"in n?!!n.leading:o,s=\"trailing\"in n?!!n.trailing:s),r(t,e,{leading:o,maxWait:e,trailing:s})}},function(t,e,n){var r=n(9);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(7),i=n(36),a=NaN,o=/^\\s+|\\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if(\"number\"==typeof t)return t;if(i(t))return a;if(r(t)){var e=\"function\"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+\"\":e}if(\"string\"!=typeof t)return 0===t?t:+t;t=t.replace(o,\"\");var n=u.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?a:+t}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.calculateChange=function(t,e,n){var r=n.getBoundingClientRect(),i=r.width,a=r.height,o=\"number\"==typeof t.pageX?t.pageX:t.touches[0].pageX,s=\"number\"==typeof t.pageY?t.pageY:t.touches[0].pageY,u=o-(n.getBoundingClientRect().left+window.pageXOffset),l=s-(n.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:u>i?u=i:l<0?l=0:l>a&&(l=a);var c=100*u/i,h=-100*l/a+100;return{h:e.h,s:c,v:h,a:e.a,source:\"rgb\"}}},function(t,e,n){t.exports=n(245)},function(t,e,n){var r=n(83),i=n(82),a=n(67),o=n(5);t.exports=function(t,e){return(o(t)?r:i)(t,a(e))}},function(t,e,n){var r;!function(i){var a=/^\\s+/,o=/\\s+$/,s=0,u=i.round,l=i.min,c=i.max,h=i.random;function f(t,e){if(e=e||{},(t=t||\"\")instanceof f)return t;if(!(this instanceof f))return new f(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,u=null,h=!1,f=!1;\"string\"==typeof t&&(t=function(t){t=t.replace(a,\"\").replace(o,\"\").toLowerCase();var e,n=!1;if(A[t])t=A[t],n=!0;else if(\"transparent\"==t)return{r:0,g:0,b:0,a:0,format:\"name\"};if(e=H.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=H.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=H.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=H.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=H.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=H.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=H.hex8.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),a:F(e[4]),format:n?\"name\":\"hex8\"};if(e=H.hex6.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),format:n?\"name\":\"hex\"};if(e=H.hex4.exec(t))return{r:R(e[1]+\"\"+e[1]),g:R(e[2]+\"\"+e[2]),b:R(e[3]+\"\"+e[3]),a:F(e[4]+\"\"+e[4]),format:n?\"name\":\"hex8\"};if(e=H.hex3.exec(t))return{r:R(e[1]+\"\"+e[1]),g:R(e[2]+\"\"+e[2]),b:R(e[3]+\"\"+e[3]),format:n?\"name\":\"hex\"};return!1}(t));\"object\"==typeof t&&(G(t.r)&&G(t.g)&&G(t.b)?(d=t.r,p=t.g,m=t.b,e={r:255*I(d,255),g:255*I(p,255),b:255*I(m,255)},h=!0,f=\"%\"===String(t.r).substr(-1)?\"prgb\":\"rgb\"):G(t.h)&&G(t.s)&&G(t.v)?(r=z(t.s),s=z(t.v),e=function(t,e,n){t=6*I(t,360),e=I(e,100),n=I(n,100);var r=i.floor(t),a=t-r,o=n*(1-e),s=n*(1-a*e),u=n*(1-(1-a)*e),l=r%6;return{r:255*[n,s,o,o,u,n][l],g:255*[u,n,n,s,o,o][l],b:255*[o,o,u,n,n,s][l]}}(t.h,r,s),h=!0,f=\"hsv\"):G(t.h)&&G(t.s)&&G(t.l)&&(r=z(t.s),u=z(t.l),e=function(t,e,n){var r,i,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=I(t,360),e=I(e,100),n=I(n,100),0===e)r=i=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=o(u,s,t+1/3),i=o(u,s,t),a=o(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*a}}(t.h,r,u),h=!0,f=\"hsl\"),t.hasOwnProperty(\"a\")&&(n=t.a));var d,p,m;return n=L(n),{ok:h,format:t.format||f,r:l(255,c(e.r,0)),g:l(255,c(e.g,0)),b:l(255,c(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=s++}function d(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var r,i,a=c(t,e,n),o=l(t,e,n),s=(a+o)/2;if(a==o)r=i=0;else{var u=a-o;switch(i=s>.5?u/(2-a-o):u/(a+o),a){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:s}}function p(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var r,i,a=c(t,e,n),o=l(t,e,n),s=a,u=a-o;if(i=0===a?0:u/a,a==o)r=0;else{switch(a){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:s}}function m(t,e,n,r){var i=[D(u(t).toString(16)),D(u(e).toString(16)),D(u(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join(\"\")}function g(t,e,n,r){return[D(B(r)),D(u(t).toString(16)),D(u(e).toString(16)),D(u(n).toString(16))].join(\"\")}function v(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s-=e/100,n.s=N(n.s),f(n)}function y(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s+=e/100,n.s=N(n.s),f(n)}function b(t){return f(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l+=e/100,n.l=N(n.l),f(n)}function x(t,e){e=0===e?0:e||10;var n=f(t).toRgb();return n.r=c(0,l(255,n.r-u(-e/100*255))),n.g=c(0,l(255,n.g-u(-e/100*255))),n.b=c(0,l(255,n.b-u(-e/100*255))),f(n)}function w(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l-=e/100,n.l=N(n.l),f(n)}function S(t,e){var n=f(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,f(n)}function E(t){var e=f(t).toHsl();return e.h=(e.h+180)%360,f(e)}function M(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+120)%360,s:e.s,l:e.l}),f({h:(n+240)%360,s:e.s,l:e.l})]}function T(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+90)%360,s:e.s,l:e.l}),f({h:(n+180)%360,s:e.s,l:e.l}),f({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+72)%360,s:e.s,l:e.l}),f({h:(n+216)%360,s:e.s,l:e.l})]}function P(t,e,n){e=e||6,n=n||30;var r=f(t).toHsl(),i=360/n,a=[f(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(f(r));return a}function k(t,e){e=e||6;for(var n=f(t).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/e;e--;)o.push(f({h:r,s:i,v:a})),a=(a+s)%1;return o}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=L(t),this._roundA=u(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.v);return 1==this._a?\"hsv(\"+e+\", \"+n+\"%, \"+r+\"%)\":\"hsva(\"+e+\", \"+n+\"%, \"+r+\"%, \"+this._roundA+\")\"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.l);return 1==this._a?\"hsl(\"+e+\", \"+n+\"%, \"+r+\"%)\":\"hsla(\"+e+\", \"+n+\"%, \"+r+\"%, \"+this._roundA+\")\"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return\"#\"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var a=[D(u(t).toString(16)),D(u(e).toString(16)),D(u(n).toString(16)),D(B(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join(\"\")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return\"#\"+this.toHex8(t)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?\"rgb(\"+u(this._r)+\", \"+u(this._g)+\", \"+u(this._b)+\")\":\"rgba(\"+u(this._r)+\", \"+u(this._g)+\", \"+u(this._b)+\", \"+this._roundA+\")\"},toPercentageRgb:function(){return{r:u(100*I(this._r,255))+\"%\",g:u(100*I(this._g,255))+\"%\",b:u(100*I(this._b,255))+\"%\",a:this._a}},toPercentageRgbString:function(){return 1==this._a?\"rgb(\"+u(100*I(this._r,255))+\"%, \"+u(100*I(this._g,255))+\"%, \"+u(100*I(this._b,255))+\"%)\":\"rgba(\"+u(100*I(this._r,255))+\"%, \"+u(100*I(this._g,255))+\"%, \"+u(100*I(this._b,255))+\"%, \"+this._roundA+\")\"},toName:function(){return 0===this._a?\"transparent\":!(this._a<1)&&(O[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e=\"#\"+g(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?\"GradientType = 1, \":\"\";if(t){var i=f(t);n=\"#\"+g(i._r,i._g,i._b,i._a)}return\"progid:DXImageTransform.Microsoft.gradient(\"+r+\"startColorstr=\"+e+\",endColorstr=\"+n+\")\"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||\"hex\"!==t&&\"hex6\"!==t&&\"hex3\"!==t&&\"hex4\"!==t&&\"hex8\"!==t&&\"name\"!==t?(\"rgb\"===t&&(n=this.toRgbString()),\"prgb\"===t&&(n=this.toPercentageRgbString()),\"hex\"!==t&&\"hex6\"!==t||(n=this.toHexString()),\"hex3\"===t&&(n=this.toHexString(!0)),\"hex4\"===t&&(n=this.toHex8String(!0)),\"hex8\"===t&&(n=this.toHex8String()),\"name\"===t&&(n=this.toName()),\"hsl\"===t&&(n=this.toHslString()),\"hsv\"===t&&(n=this.toHsvString()),n||this.toHexString()):\"name\"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},f.fromRatio=function(t,e){if(\"object\"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=\"a\"===r?t[r]:z(t[r]));t=n}return f(t,e)},f.equals=function(t,e){return!(!t||!e)&&f(t).toRgbString()==f(e).toRgbString()},f.random=function(){return f.fromRatio({r:h(),g:h(),b:h()})},f.mix=function(t,e,n){n=0===n?0:n||50;var r=f(t).toRgb(),i=f(e).toRgb(),a=n/100;return f({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},f.readability=function(t,e){var n=f(t),r=f(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},f.isReadable=function(t,e,n){var r,i,a=f.readability(t,e);switch(i=!1,(r=function(t){var e,n;e=((t=t||{level:\"AA\",size:\"small\"}).level||\"AA\").toUpperCase(),n=(t.size||\"small\").toLowerCase(),\"AA\"!==e&&\"AAA\"!==e&&(e=\"AA\");\"small\"!==n&&\"large\"!==n&&(n=\"small\");return{level:e,size:n}}(n)).level+r.size){case\"AAsmall\":case\"AAAlarge\":i=a>=4.5;break;case\"AAlarge\":i=a>=3;break;case\"AAAsmall\":i=a>=7}return i},f.mostReadable=function(t,e,n){var r,i,a,o,s=null,u=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var l=0;l<e.length;l++)(r=f.readability(t,e[l]))>u&&(u=r,s=f(e[l]));return f.isReadable(t,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,f.mostReadable(t,[\"#fff\",\"#000\"],n))};var A=f.names={aliceblue:\"f0f8ff\",antiquewhite:\"faebd7\",aqua:\"0ff\",aquamarine:\"7fffd4\",azure:\"f0ffff\",beige:\"f5f5dc\",bisque:\"ffe4c4\",black:\"000\",blanchedalmond:\"ffebcd\",blue:\"00f\",blueviolet:\"8a2be2\",brown:\"a52a2a\",burlywood:\"deb887\",burntsienna:\"ea7e5d\",cadetblue:\"5f9ea0\",chartreuse:\"7fff00\",chocolate:\"d2691e\",coral:\"ff7f50\",cornflowerblue:\"6495ed\",cornsilk:\"fff8dc\",crimson:\"dc143c\",cyan:\"0ff\",darkblue:\"00008b\",darkcyan:\"008b8b\",darkgoldenrod:\"b8860b\",darkgray:\"a9a9a9\",darkgreen:\"006400\",darkgrey:\"a9a9a9\",darkkhaki:\"bdb76b\",darkmagenta:\"8b008b\",darkolivegreen:\"556b2f\",darkorange:\"ff8c00\",darkorchid:\"9932cc\",darkred:\"8b0000\",darksalmon:\"e9967a\",darkseagreen:\"8fbc8f\",darkslateblue:\"483d8b\",darkslategray:\"2f4f4f\",darkslategrey:\"2f4f4f\",darkturquoise:\"00ced1\",darkviolet:\"9400d3\",deeppink:\"ff1493\",deepskyblue:\"00bfff\",dimgray:\"696969\",dimgrey:\"696969\",dodgerblue:\"1e90ff\",firebrick:\"b22222\",floralwhite:\"fffaf0\",forestgreen:\"228b22\",fuchsia:\"f0f\",gainsboro:\"dcdcdc\",ghostwhite:\"f8f8ff\",gold:\"ffd700\",goldenrod:\"daa520\",gray:\"808080\",green:\"008000\",greenyellow:\"adff2f\",grey:\"808080\",honeydew:\"f0fff0\",hotpink:\"ff69b4\",indianred:\"cd5c5c\",indigo:\"4b0082\",ivory:\"fffff0\",khaki:\"f0e68c\",lavender:\"e6e6fa\",lavenderblush:\"fff0f5\",lawngreen:\"7cfc00\",lemonchiffon:\"fffacd\",lightblue:\"add8e6\",lightcoral:\"f08080\",lightcyan:\"e0ffff\",lightgoldenrodyellow:\"fafad2\",lightgray:\"d3d3d3\",lightgreen:\"90ee90\",lightgrey:\"d3d3d3\",lightpink:\"ffb6c1\",lightsalmon:\"ffa07a\",lightseagreen:\"20b2aa\",lightskyblue:\"87cefa\",lightslategray:\"789\",lightslategrey:\"789\",lightsteelblue:\"b0c4de\",lightyellow:\"ffffe0\",lime:\"0f0\",limegreen:\"32cd32\",linen:\"faf0e6\",magenta:\"f0f\",maroon:\"800000\",mediumaquamarine:\"66cdaa\",mediumblue:\"0000cd\",mediumorchid:\"ba55d3\",mediumpurple:\"9370db\",mediumseagreen:\"3cb371\",mediumslateblue:\"7b68ee\",mediumspringgreen:\"00fa9a\",mediumturquoise:\"48d1cc\",mediumvioletred:\"c71585\",midnightblue:\"191970\",mintcream:\"f5fffa\",mistyrose:\"ffe4e1\",moccasin:\"ffe4b5\",navajowhite:\"ffdead\",navy:\"000080\",oldlace:\"fdf5e6\",olive:\"808000\",olivedrab:\"6b8e23\",orange:\"ffa500\",orangered:\"ff4500\",orchid:\"da70d6\",palegoldenrod:\"eee8aa\",palegreen:\"98fb98\",paleturquoise:\"afeeee\",palevioletred:\"db7093\",papayawhip:\"ffefd5\",peachpuff:\"ffdab9\",peru:\"cd853f\",pink:\"ffc0cb\",plum:\"dda0dd\",powderblue:\"b0e0e6\",purple:\"800080\",rebeccapurple:\"663399\",red:\"f00\",rosybrown:\"bc8f8f\",royalblue:\"4169e1\",saddlebrown:\"8b4513\",salmon:\"fa8072\",sandybrown:\"f4a460\",seagreen:\"2e8b57\",seashell:\"fff5ee\",sienna:\"a0522d\",silver:\"c0c0c0\",skyblue:\"87ceeb\",slateblue:\"6a5acd\",slategray:\"708090\",slategrey:\"708090\",snow:\"fffafa\",springgreen:\"00ff7f\",steelblue:\"4682b4\",tan:\"d2b48c\",teal:\"008080\",thistle:\"d8bfd8\",tomato:\"ff6347\",turquoise:\"40e0d0\",violet:\"ee82ee\",wheat:\"f5deb3\",white:\"fff\",whitesmoke:\"f5f5f5\",yellow:\"ff0\",yellowgreen:\"9acd32\"},O=f.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(A);function L(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(t,e){(function(t){return\"string\"==typeof t&&-1!=t.indexOf(\".\")&&1===parseFloat(t)})(t)&&(t=\"100%\");var n=function(t){return\"string\"==typeof t&&-1!=t.indexOf(\"%\")}(t);return t=l(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function N(t){return l(1,c(0,t))}function R(t){return parseInt(t,16)}function D(t){return 1==t.length?\"0\"+t:\"\"+t}function z(t){return t<=1&&(t=100*t+\"%\"),t}function B(t){return i.round(255*parseFloat(t)).toString(16)}function F(t){return R(t)/255}var j,U,V,H=(U=\"[\\\\s|\\\\(]+(\"+(j=\"(?:[-\\\\+]?\\\\d*\\\\.\\\\d+%?)|(?:[-\\\\+]?\\\\d+%?)\")+\")[,|\\\\s]+(\"+j+\")[,|\\\\s]+(\"+j+\")\\\\s*\\\\)?\",V=\"[\\\\s|\\\\(]+(\"+j+\")[,|\\\\s]+(\"+j+\")[,|\\\\s]+(\"+j+\")[,|\\\\s]+(\"+j+\")\\\\s*\\\\)?\",{CSS_UNIT:new RegExp(j),rgb:new RegExp(\"rgb\"+U),rgba:new RegExp(\"rgba\"+V),hsl:new RegExp(\"hsl\"+U),hsla:new RegExp(\"hsla\"+V),hsv:new RegExp(\"hsv\"+U),hsva:new RegExp(\"hsva\"+V),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(t){return!!H.CSS_UNIT.exec(t)}t.exports?t.exports=f:void 0===(r=function(){return f}.call(e,n,e,t))||(t.exports=r)}(Math)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Swatch=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=u(n(0)),a=u(n(1)),o=n(248),s=u(n(55));function u(t){return t&&t.__esModule?t:{default:t}}var l=e.Swatch=function(t){var e=t.color,n=t.style,o=t.onClick,u=void 0===o?function(){}:o,l=t.onHover,c=t.title,h=void 0===c?e:c,f=t.children,d=t.focus,p=t.focusStyle,m=void 0===p?{}:p,g=\"transparent\"===e,v=(0,a.default)({default:{swatch:r({background:e,height:\"100%\",width:\"100%\",cursor:\"pointer\",position:\"relative\",outline:\"none\"},n,d?m:{})}}),y={};return l&&(y.onMouseOver=function(t){return l(e,t)}),i.default.createElement(\"div\",r({style:v.swatch,onClick:function(t){return u(e,t)},title:h,tabIndex:0,onKeyDown:function(t){return 13===t.keyCode&&u(e,t)}},y),f,g&&i.default.createElement(s.default,{borderRadius:v.swatch.borderRadius,boxShadow:\"inset 0 0 0 1px rgba(0,0,0,0.1)\"}))};e.default=(0,o.handleFocus)(l)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.handleFocus=void 0;var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),s=(r=o)&&r.__esModule?r:{default:r};function u(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function l(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function c(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.handleFocus=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"span\";return function(n){function r(){var t,e,n;u(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=n=l(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},l(n,e)}return c(r,n),a(r,[{key:\"render\",value:function(){return s.default.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(t,i({},this.props,this.state)))}}]),r}(s.default.Component)}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.AlphaPointer=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.AlphaPointer=function(t){var e=t.direction,n=(0,i.default)({default:{picker:{width:\"18px\",height:\"18px\",borderRadius:\"50%\",transform:\"translate(-9px, -1px)\",backgroundColor:\"rgb(248, 248, 248)\",boxShadow:\"0 1px 4px 0 rgba(0, 0, 0, 0.37)\"}},vertical:{picker:{transform:\"translate(-3px, -9px)\"}}},{vertical:\"vertical\"===e});return r.default.createElement(\"div\",{style:n.picker})};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Block=void 0;var r=c(n(0)),i=c(n(4)),a=c(n(1)),o=c(n(6)),s=c(n(10)),u=n(2),l=c(n(251));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Block=function(t){var e=t.onChange,n=t.onSwatchHover,i=t.hex,c=t.colors,h=t.width,f=t.triangle,d=t.styles,p=void 0===d?{}:d,m=t.className,g=void 0===m?\"\":m,v=\"transparent\"===i,y=function(t,n){s.default.isValidHex(t)&&e({hex:t,source:\"hex\"},n)},b=(0,a.default)((0,o.default)({default:{card:{width:h,background:\"#fff\",boxShadow:\"0 1px rgba(0,0,0,.1)\",borderRadius:\"6px\",position:\"relative\"},head:{height:\"110px\",background:i,borderRadius:\"6px 6px 0 0\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",position:\"relative\"},body:{padding:\"10px\"},label:{fontSize:\"18px\",color:s.default.getContrastingColor(i),position:\"relative\"},triangle:{width:\"0px\",height:\"0px\",borderStyle:\"solid\",borderWidth:\"0 10px 10px 10px\",borderColor:\"transparent transparent \"+i+\" transparent\",position:\"absolute\",top:\"-10px\",left:\"50%\",marginLeft:\"-10px\"},input:{width:\"100%\",fontSize:\"12px\",color:\"#666\",border:\"0px\",outline:\"none\",height:\"22px\",boxShadow:\"inset 0 0 0 1px #ddd\",borderRadius:\"4px\",padding:\"0 7px\",boxSizing:\"border-box\"}},\"hide-triangle\":{triangle:{display:\"none\"}}},p),{\"hide-triangle\":\"hide\"===f});return r.default.createElement(\"div\",{style:b.card,className:\"block-picker \"+g},r.default.createElement(\"div\",{style:b.triangle}),r.default.createElement(\"div\",{style:b.head},v&&r.default.createElement(u.Checkboard,{borderRadius:\"6px 6px 0 0\"}),r.default.createElement(\"div\",{style:b.label},i)),r.default.createElement(\"div\",{style:b.body},r.default.createElement(l.default,{colors:c,onClick:y,onSwatchHover:n}),r.default.createElement(u.EditableInput,{style:{input:b.input},value:i,onChange:y})))};h.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),colors:i.default.arrayOf(i.default.string),triangle:i.default.oneOf([\"top\",\"hide\"]),styles:i.default.object},h.defaultProps={width:170,colors:[\"#D9E3F0\",\"#F47373\",\"#697689\",\"#37D67A\",\"#2CCCE4\",\"#555555\",\"#dce775\",\"#ff8a65\",\"#ba68c8\"],triangle:\"top\",styles:{}},e.default=(0,u.ColorWrap)(h)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.BlockSwatches=void 0;var r=s(n(0)),i=s(n(1)),a=s(n(14)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var u=e.BlockSwatches=function(t){var e=t.colors,n=t.onClick,s=t.onSwatchHover,u=(0,i.default)({default:{swatches:{marginRight:\"-10px\"},swatch:{width:\"22px\",height:\"22px\",float:\"left\",marginRight:\"10px\",marginBottom:\"10px\",borderRadius:\"4px\"},clear:{clear:\"both\"}}});return r.default.createElement(\"div\",{style:u.swatches},(0,a.default)(e,(function(t){return r.default.createElement(o.Swatch,{key:t,color:t,style:u.swatch,onClick:n,onHover:s,focusStyle:{boxShadow:\"0 0 4px \"+t}})})),r.default.createElement(\"div\",{style:u.clear}))};e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Circle=void 0;var r=h(n(0)),i=h(n(4)),a=h(n(1)),o=h(n(14)),s=h(n(6)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(95)),l=n(2),c=h(n(253));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Circle=function(t){var e=t.width,n=t.onChange,i=t.onSwatchHover,u=t.colors,l=t.hex,h=t.circleSize,f=t.styles,d=void 0===f?{}:f,p=t.circleSpacing,m=t.className,g=void 0===m?\"\":m,v=(0,a.default)((0,s.default)({default:{card:{width:e,display:\"flex\",flexWrap:\"wrap\",marginRight:-p,marginBottom:-p}}},d)),y=function(t,e){return n({hex:t,source:\"hex\"},e)};return r.default.createElement(\"div\",{style:v.card,className:\"circle-picker \"+g},(0,o.default)(u,(function(t){return r.default.createElement(c.default,{key:t,color:t,onClick:y,onSwatchHover:i,active:l===t.toLowerCase(),circleSize:h,circleSpacing:p})})))};f.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),circleSize:i.default.number,circleSpacing:i.default.number,styles:i.default.object},f.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[u.red[500],u.pink[500],u.purple[500],u.deepPurple[500],u.indigo[500],u.blue[500],u.lightBlue[500],u.cyan[500],u.teal[500],u.green[500],u.lightGreen[500],u.lime[500],u.yellow[500],u.amber[500],u.orange[500],u.deepOrange[500],u.brown[500],u.blueGrey[500]],styles:{}},e.default=(0,l.ColorWrap)(f)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.CircleSwatch=void 0;var r=s(n(0)),i=n(1),a=s(i),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var u=e.CircleSwatch=function(t){var e=t.color,n=t.onClick,i=t.onSwatchHover,s=t.hover,u=t.active,l=t.circleSize,c=t.circleSpacing,h=(0,a.default)({default:{swatch:{width:l,height:l,marginRight:c,marginBottom:c,transform:\"scale(1)\",transition:\"100ms transform ease\"},Swatch:{borderRadius:\"50%\",background:\"transparent\",boxShadow:\"inset 0 0 0 \"+l/2+\"px \"+e,transition:\"100ms box-shadow ease\"}},hover:{swatch:{transform:\"scale(1.2)\"}},active:{Swatch:{boxShadow:\"inset 0 0 0 3px \"+e}}},{hover:s,active:u});return r.default.createElement(\"div\",{style:h.swatch},r.default.createElement(o.Swatch,{style:h.Swatch,color:e,onClick:n,onHover:i,focusStyle:{boxShadow:h.Swatch.boxShadow+\", 0 0 5px \"+e}}))};u.defaultProps={circleSize:28,circleSpacing:14},e.default=(0,i.handleHover)(u)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Chrome=void 0;var r=h(n(0)),i=h(n(4)),a=h(n(1)),o=h(n(6)),s=n(2),u=h(n(255)),l=h(n(257)),c=h(n(258));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Chrome=function(t){var e=t.width,n=t.onChange,i=t.disableAlpha,h=t.rgb,f=t.hsl,d=t.hsv,p=t.hex,m=t.renderers,g=t.styles,v=void 0===g?{}:g,y=t.className,b=void 0===y?\"\":y,_=(0,a.default)((0,o.default)({default:{picker:{width:e,background:\"#fff\",borderRadius:\"2px\",boxShadow:\"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)\",boxSizing:\"initial\",fontFamily:\"Menlo\"},saturation:{width:\"100%\",paddingBottom:\"55%\",position:\"relative\",borderRadius:\"2px 2px 0 0\",overflow:\"hidden\"},Saturation:{radius:\"2px 2px 0 0\"},body:{padding:\"16px 16px 12px\"},controls:{display:\"flex\"},color:{width:\"32px\"},swatch:{marginTop:\"6px\",width:\"16px\",height:\"16px\",borderRadius:\"8px\",position:\"relative\",overflow:\"hidden\"},active:{absolute:\"0px 0px 0px 0px\",borderRadius:\"8px\",boxShadow:\"inset 0 0 0 1px rgba(0,0,0,.1)\",background:\"rgba(\"+h.r+\", \"+h.g+\", \"+h.b+\", \"+h.a+\")\",zIndex:\"2\"},toggles:{flex:\"1\"},hue:{height:\"10px\",position:\"relative\",marginBottom:\"8px\"},Hue:{radius:\"2px\"},alpha:{height:\"10px\",position:\"relative\"},Alpha:{radius:\"2px\"}},disableAlpha:{color:{width:\"22px\"},alpha:{display:\"none\"},hue:{marginBottom:\"0px\"},swatch:{width:\"10px\",height:\"10px\",marginTop:\"0px\"}}},v),{disableAlpha:i});return r.default.createElement(\"div\",{style:_.picker,className:\"chrome-picker \"+b},r.default.createElement(\"div\",{style:_.saturation},r.default.createElement(s.Saturation,{style:_.Saturation,hsl:f,hsv:d,pointer:c.default,onChange:n})),r.default.createElement(\"div\",{style:_.body},r.default.createElement(\"div\",{style:_.controls,className:\"flexbox-fix\"},r.default.createElement(\"div\",{style:_.color},r.default.createElement(\"div\",{style:_.swatch},r.default.createElement(\"div\",{style:_.active}),r.default.createElement(s.Checkboard,{renderers:m}))),r.default.createElement(\"div\",{style:_.toggles},r.default.createElement(\"div\",{style:_.hue},r.default.createElement(s.Hue,{style:_.Hue,hsl:f,pointer:l.default,onChange:n})),r.default.createElement(\"div\",{style:_.alpha},r.default.createElement(s.Alpha,{style:_.Alpha,rgb:h,hsl:f,pointer:l.default,renderers:m,onChange:n})))),r.default.createElement(u.default,{rgb:h,hsl:f,hex:p,onChange:n,disableAlpha:i})))};f.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object},f.defaultProps={width:225,disableAlpha:!1,styles:{}},e.default=(0,s.ColorWrap)(f)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ChromeFields=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(0)),a=l(n(1)),o=l(n(10)),s=n(2),u=l(n(256));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}var h=e.ChromeFields=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=c(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.state={view:\"\"},r.toggleViews=function(){\"hex\"===r.state.view?r.setState({view:\"rgb\"}):\"rgb\"===r.state.view?r.setState({view:\"hsl\"}):\"hsl\"===r.state.view&&(1===r.props.hsl.a?r.setState({view:\"hex\"}):r.setState({view:\"rgb\"}))},r.handleChange=function(t,e){t.hex?o.default.isValidHex(t.hex)&&r.props.onChange({hex:t.hex,source:\"hex\"},e):t.r||t.g||t.b?r.props.onChange({r:t.r||r.props.rgb.r,g:t.g||r.props.rgb.g,b:t.b||r.props.rgb.b,source:\"rgb\"},e):t.a?(t.a<0?t.a=0:t.a>1&&(t.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(100*t.a)/100,source:\"rgb\"},e)):(t.h||t.s||t.l)&&(\"string\"==typeof t.s&&t.s.includes(\"%\")&&(t.s=t.s.replace(\"%\",\"\")),\"string\"==typeof t.l&&t.l.includes(\"%\")&&(t.l=t.l.replace(\"%\",\"\")),r.props.onChange({h:t.h||r.props.hsl.h,s:Number(t.s&&t.s||r.props.hsl.s),l:Number(t.l&&t.l||r.props.hsl.l),source:\"hsl\"},e))},r.showHighlight=function(t){t.currentTarget.style.background=\"#eee\"},r.hideHighlight=function(t){t.currentTarget.style.background=\"transparent\"},c(r,n)}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentDidMount\",value:function(){1===this.props.hsl.a&&\"hex\"!==this.state.view?this.setState({view:\"hex\"}):\"rgb\"!==this.state.view&&\"hsl\"!==this.state.view&&this.setState({view:\"rgb\"})}},{key:\"componentWillReceiveProps\",value:function(t){1!==t.hsl.a&&\"hex\"===this.state.view&&this.setState({view:\"rgb\"})}},{key:\"render\",value:function(){var t=this,e=(0,a.default)({default:{wrap:{paddingTop:\"16px\",display:\"flex\"},fields:{flex:\"1\",display:\"flex\",marginLeft:\"-6px\"},field:{paddingLeft:\"6px\",width:\"100%\"},alpha:{paddingLeft:\"6px\",width:\"100%\"},toggle:{width:\"32px\",textAlign:\"right\",position:\"relative\"},icon:{marginRight:\"-4px\",marginTop:\"12px\",cursor:\"pointer\",position:\"relative\"},iconHighlight:{position:\"absolute\",width:\"24px\",height:\"28px\",background:\"#eee\",borderRadius:\"4px\",top:\"10px\",left:\"12px\",display:\"none\"},input:{fontSize:\"11px\",color:\"#333\",width:\"100%\",borderRadius:\"2px\",border:\"none\",boxShadow:\"inset 0 0 0 1px #dadada\",height:\"21px\",textAlign:\"center\"},label:{textTransform:\"uppercase\",fontSize:\"11px\",lineHeight:\"11px\",color:\"#969696\",textAlign:\"center\",display:\"block\",marginTop:\"12px\"},svg:{fill:\"#333\",width:\"24px\",height:\"24px\",border:\"1px transparent solid\",borderRadius:\"5px\"}},disableAlpha:{alpha:{display:\"none\"}}},this.props,this.state),n=void 0;return\"hex\"===this.state.view?n=i.default.createElement(\"div\",{style:e.fields,className:\"flexbox-fix\"},i.default.createElement(\"div\",{style:e.field},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"hex\",value:this.props.hex,onChange:this.handleChange}))):\"rgb\"===this.state.view?n=i.default.createElement(\"div\",{style:e.fields,className:\"flexbox-fix\"},i.default.createElement(\"div\",{style:e.field},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"r\",value:this.props.rgb.r,onChange:this.handleChange})),i.default.createElement(\"div\",{style:e.field},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"g\",value:this.props.rgb.g,onChange:this.handleChange})),i.default.createElement(\"div\",{style:e.field},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"b\",value:this.props.rgb.b,onChange:this.handleChange})),i.default.createElement(\"div\",{style:e.alpha},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"a\",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):\"hsl\"===this.state.view&&(n=i.default.createElement(\"div\",{style:e.fields,className:\"flexbox-fix\"},i.default.createElement(\"div\",{style:e.field},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"h\",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),i.default.createElement(\"div\",{style:e.field},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"s\",value:Math.round(100*this.props.hsl.s)+\"%\",onChange:this.handleChange})),i.default.createElement(\"div\",{style:e.field},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"l\",value:Math.round(100*this.props.hsl.l)+\"%\",onChange:this.handleChange})),i.default.createElement(\"div\",{style:e.alpha},i.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:\"a\",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),i.default.createElement(\"div\",{style:e.wrap,className:\"flexbox-fix\"},n,i.default.createElement(\"div\",{style:e.toggle},i.default.createElement(\"div\",{style:e.icon,onClick:this.toggleViews,ref:function(e){return t.icon=e}},i.default.createElement(u.default,{style:e.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),e}(i.default.Component);e.default=h},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};e.default=function(t){var e=t.fill,n=void 0===e?\"currentColor\":e,r=t.width,a=void 0===r?24:r,s=t.height,u=void 0===s?24:s,l=t.style,c=void 0===l?{}:l,h=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,[\"fill\",\"width\",\"height\",\"style\"]);return o.default.createElement(\"svg\",i({viewBox:\"0 0 24 24\",style:i({fill:n,width:a,height:u},c)},h),o.default.createElement(\"path\",{d:\"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z\"}))}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ChromePointer=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.ChromePointer=function(){var t=(0,i.default)({default:{picker:{width:\"12px\",height:\"12px\",borderRadius:\"6px\",transform:\"translate(-6px, -1px)\",backgroundColor:\"rgb(248, 248, 248)\",boxShadow:\"0 1px 4px 0 rgba(0, 0, 0, 0.37)\"}}});return r.default.createElement(\"div\",{style:t.picker})};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ChromePointerCircle=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.ChromePointerCircle=function(){var t=(0,i.default)({default:{picker:{width:\"12px\",height:\"12px\",borderRadius:\"6px\",boxShadow:\"inset 0 0 0 1px #fff\",transform:\"translate(-6px, -6px)\"}}});return r.default.createElement(\"div\",{style:t.picker})};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Compact=void 0;var r=f(n(0)),i=f(n(4)),a=f(n(1)),o=f(n(14)),s=f(n(6)),u=f(n(10)),l=n(2),c=f(n(260)),h=f(n(261));function f(t){return t&&t.__esModule?t:{default:t}}var d=e.Compact=function(t){var e=t.onChange,n=t.onSwatchHover,i=t.colors,f=t.hex,d=t.rgb,p=t.styles,m=void 0===p?{}:p,g=t.className,v=void 0===g?\"\":g,y=(0,a.default)((0,s.default)({default:{Compact:{background:\"#f6f6f6\",radius:\"4px\"},compact:{paddingTop:\"5px\",paddingLeft:\"5px\",boxSizing:\"initial\",width:\"240px\"},clear:{clear:\"both\"}}},m)),b=function(t,n){t.hex?u.default.isValidHex(t.hex)&&e({hex:t.hex,source:\"hex\"},n):e(t,n)};return r.default.createElement(l.Raised,{style:y.Compact,styles:m},r.default.createElement(\"div\",{style:y.compact,className:\"compact-picker \"+v},r.default.createElement(\"div\",null,(0,o.default)(i,(function(t){return r.default.createElement(c.default,{key:t,color:t,active:t.toLowerCase()===f,onClick:b,onSwatchHover:n})})),r.default.createElement(\"div\",{style:y.clear})),r.default.createElement(h.default,{hex:f,rgb:d,onChange:b})))};d.propTypes={colors:i.default.arrayOf(i.default.string),styles:i.default.object},d.defaultProps={colors:[\"#4D4D4D\",\"#999999\",\"#FFFFFF\",\"#F44E3B\",\"#FE9200\",\"#FCDC00\",\"#DBDF00\",\"#A4DD00\",\"#68CCCA\",\"#73D8FF\",\"#AEA1FF\",\"#FDA1FF\",\"#333333\",\"#808080\",\"#cccccc\",\"#D33115\",\"#E27300\",\"#FCC400\",\"#B0BC00\",\"#68BC00\",\"#16A5A5\",\"#009CE0\",\"#7B64FF\",\"#FA28FF\",\"#000000\",\"#666666\",\"#B3B3B3\",\"#9F0500\",\"#C45100\",\"#FB9E00\",\"#808900\",\"#194D33\",\"#0C797D\",\"#0062B1\",\"#653294\",\"#AB149E\"],styles:{}},e.default=(0,l.ColorWrap)(d)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.CompactColor=void 0;var r=s(n(0)),i=s(n(1)),a=s(n(10)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var u=e.CompactColor=function(t){var e=t.color,n=t.onClick,s=void 0===n?function(){}:n,u=t.onSwatchHover,l=t.active,c=(0,i.default)({default:{color:{background:e,width:\"15px\",height:\"15px\",float:\"left\",marginRight:\"5px\",marginBottom:\"5px\",position:\"relative\",cursor:\"pointer\"},dot:{absolute:\"5px 5px 5px 5px\",background:a.default.getContrastingColor(e),borderRadius:\"50%\",opacity:\"0\"}},active:{dot:{opacity:\"1\"}},\"color-#FFFFFF\":{color:{boxShadow:\"inset 0 0 0 1px #ddd\"},dot:{background:\"#000\"}},transparent:{dot:{background:\"#000\"}}},{active:l,\"color-#FFFFFF\":\"#FFFFFF\"===e,transparent:\"transparent\"===e});return r.default.createElement(o.Swatch,{style:c.color,color:e,onClick:s,onHover:u,focusStyle:{boxShadow:\"0 0 4px \"+e}},r.default.createElement(\"div\",{style:c.dot}))};e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.CompactFields=void 0;var r=o(n(0)),i=o(n(1)),a=n(2);function o(t){return t&&t.__esModule?t:{default:t}}var s=e.CompactFields=function(t){var e=t.hex,n=t.rgb,o=t.onChange,s=(0,i.default)({default:{fields:{display:\"flex\",paddingBottom:\"6px\",paddingRight:\"5px\",position:\"relative\"},active:{position:\"absolute\",top:\"6px\",left:\"5px\",height:\"9px\",width:\"9px\",background:e},HEXwrap:{flex:\"6\",position:\"relative\"},HEXinput:{width:\"80%\",padding:\"0px\",paddingLeft:\"20%\",border:\"none\",outline:\"none\",background:\"none\",fontSize:\"12px\",color:\"#333\",height:\"16px\"},HEXlabel:{display:\"none\"},RGBwrap:{flex:\"3\",position:\"relative\"},RGBinput:{width:\"70%\",padding:\"0px\",paddingLeft:\"30%\",border:\"none\",outline:\"none\",background:\"none\",fontSize:\"12px\",color:\"#333\",height:\"16px\"},RGBlabel:{position:\"absolute\",top:\"3px\",left:\"0px\",lineHeight:\"16px\",textTransform:\"uppercase\",fontSize:\"12px\",color:\"#999\"}}}),u=function(t,e){t.r||t.g||t.b?o({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:\"rgb\"},e):o({hex:t.hex,source:\"hex\"},e)};return r.default.createElement(\"div\",{style:s.fields,className:\"flexbox-fix\"},r.default.createElement(\"div\",{style:s.active}),r.default.createElement(a.EditableInput,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:\"hex\",value:e,onChange:u}),r.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:\"r\",value:n.r,onChange:u}),r.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:\"g\",value:n.g,onChange:u}),r.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:\"b\",value:n.b,onChange:u}))};e.default=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Github=void 0;var r=c(n(0)),i=c(n(4)),a=c(n(1)),o=c(n(14)),s=c(n(6)),u=n(2),l=c(n(263));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Github=function(t){var e=t.width,n=t.colors,i=t.onChange,u=t.onSwatchHover,c=t.triangle,h=t.styles,f=void 0===h?{}:h,d=t.className,p=void 0===d?\"\":d,m=(0,a.default)((0,s.default)({default:{card:{width:e,background:\"#fff\",border:\"1px solid rgba(0,0,0,0.2)\",boxShadow:\"0 3px 12px rgba(0,0,0,0.15)\",borderRadius:\"4px\",position:\"relative\",padding:\"5px\",display:\"flex\",flexWrap:\"wrap\"},triangle:{position:\"absolute\",border:\"7px solid transparent\",borderBottomColor:\"#fff\"},triangleShadow:{position:\"absolute\",border:\"8px solid transparent\",borderBottomColor:\"rgba(0,0,0,0.15)\"}},\"hide-triangle\":{triangle:{display:\"none\"},triangleShadow:{display:\"none\"}},\"top-left-triangle\":{triangle:{top:\"-14px\",left:\"10px\"},triangleShadow:{top:\"-16px\",left:\"9px\"}},\"top-right-triangle\":{triangle:{top:\"-14px\",right:\"10px\"},triangleShadow:{top:\"-16px\",right:\"9px\"}},\"bottom-left-triangle\":{triangle:{top:\"35px\",left:\"10px\",transform:\"rotate(180deg)\"},triangleShadow:{top:\"37px\",left:\"9px\",transform:\"rotate(180deg)\"}},\"bottom-right-triangle\":{triangle:{top:\"35px\",right:\"10px\",transform:\"rotate(180deg)\"},triangleShadow:{top:\"37px\",right:\"9px\",transform:\"rotate(180deg)\"}}},f),{\"hide-triangle\":\"hide\"===c,\"top-left-triangle\":\"top-left\"===c,\"top-right-triangle\":\"top-right\"===c,\"bottom-left-triangle\":\"bottom-left\"===c,\"bottom-right-triangle\":\"bottom-right\"===c}),g=function(t,e){return i({hex:t,source:\"hex\"},e)};return r.default.createElement(\"div\",{style:m.card,className:\"github-picker \"+p},r.default.createElement(\"div\",{style:m.triangleShadow}),r.default.createElement(\"div\",{style:m.triangle}),(0,o.default)(n,(function(t){return r.default.createElement(l.default,{color:t,key:t,onClick:g,onSwatchHover:u})})))};h.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),colors:i.default.arrayOf(i.default.string),triangle:i.default.oneOf([\"hide\",\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"]),styles:i.default.object},h.defaultProps={width:200,colors:[\"#B80000\",\"#DB3E00\",\"#FCCB00\",\"#008B02\",\"#006B76\",\"#1273DE\",\"#004DCF\",\"#5300EB\",\"#EB9694\",\"#FAD0C3\",\"#FEF3BD\",\"#C1E1C5\",\"#BEDADC\",\"#C4DEF6\",\"#BED3F3\",\"#D4C4FB\"],triangle:\"top-left\",styles:{}},e.default=(0,u.ColorWrap)(h)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.GithubSwatch=void 0;var r=s(n(0)),i=n(1),a=s(i),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var u=e.GithubSwatch=function(t){var e=t.hover,n=t.color,i=t.onClick,s=t.onSwatchHover,u={position:\"relative\",zIndex:\"2\",outline:\"2px solid #fff\",boxShadow:\"0 0 5px 2px rgba(0,0,0,0.25)\"},l=(0,a.default)({default:{swatch:{width:\"25px\",height:\"25px\",fontSize:\"0\"}},hover:{swatch:u}},{hover:e});return r.default.createElement(\"div\",{style:l.swatch},r.default.createElement(o.Swatch,{color:n,onClick:i,onHover:s,focusStyle:u}))};e.default=(0,i.handleHover)(u)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.HuePicker=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=c(n(0)),a=c(n(4)),o=c(n(1)),s=c(n(6)),u=n(2),l=c(n(265));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.HuePicker=function(t){var e=t.width,n=t.height,a=t.onChange,l=t.hsl,c=t.direction,h=t.pointer,f=t.styles,d=void 0===f?{}:f,p=t.className,m=void 0===p?\"\":p,g=(0,o.default)((0,s.default)({default:{picker:{position:\"relative\",width:e,height:n},hue:{radius:\"2px\"}}},d));return i.default.createElement(\"div\",{style:g.picker,className:\"hue-picker \"+m},i.default.createElement(u.Hue,r({},g.hue,{hsl:l,pointer:h,onChange:function(t){return a({a:1,h:t.h,l:.5,s:1})},direction:c})))};h.propTypes={styles:a.default.object},h.defaultProps={width:\"316px\",height:\"16px\",direction:\"horizontal\",pointer:l.default,styles:{}},e.default=(0,u.ColorWrap)(h)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SliderPointer=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderPointer=function(t){var e=t.direction,n=(0,i.default)({default:{picker:{width:\"18px\",height:\"18px\",borderRadius:\"50%\",transform:\"translate(-9px, -1px)\",backgroundColor:\"rgb(248, 248, 248)\",boxShadow:\"0 1px 4px 0 rgba(0, 0, 0, 0.37)\"}},vertical:{picker:{transform:\"translate(-3px, -9px)\"}}},{vertical:\"vertical\"===e});return r.default.createElement(\"div\",{style:n.picker})};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Material=void 0;var r=u(n(0)),i=u(n(1)),a=u(n(6)),o=u(n(10)),s=n(2);function u(t){return t&&t.__esModule?t:{default:t}}var l=e.Material=function(t){var e=t.onChange,n=t.hex,u=t.rgb,l=t.styles,c=void 0===l?{}:l,h=t.className,f=void 0===h?\"\":h,d=(0,i.default)((0,a.default)({default:{material:{width:\"98px\",height:\"98px\",padding:\"16px\",fontFamily:\"Roboto\"},HEXwrap:{position:\"relative\"},HEXinput:{width:\"100%\",marginTop:\"12px\",fontSize:\"15px\",color:\"#333\",padding:\"0px\",border:\"0px\",borderBottom:\"2px solid \"+n,outline:\"none\",height:\"30px\"},HEXlabel:{position:\"absolute\",top:\"0px\",left:\"0px\",fontSize:\"11px\",color:\"#999999\",textTransform:\"capitalize\"},Hex:{style:{}},RGBwrap:{position:\"relative\"},RGBinput:{width:\"100%\",marginTop:\"12px\",fontSize:\"15px\",color:\"#333\",padding:\"0px\",border:\"0px\",borderBottom:\"1px solid #eee\",outline:\"none\",height:\"30px\"},RGBlabel:{position:\"absolute\",top:\"0px\",left:\"0px\",fontSize:\"11px\",color:\"#999999\",textTransform:\"capitalize\"},split:{display:\"flex\",marginRight:\"-10px\",paddingTop:\"11px\"},third:{flex:\"1\",paddingRight:\"10px\"}}},c)),p=function(t,n){t.hex?o.default.isValidHex(t.hex)&&e({hex:t.hex,source:\"hex\"},n):(t.r||t.g||t.b)&&e({r:t.r||u.r,g:t.g||u.g,b:t.b||u.b,source:\"rgb\"},n)};return r.default.createElement(s.Raised,{styles:c},r.default.createElement(\"div\",{style:d.material,className:\"material-picker \"+f},r.default.createElement(s.EditableInput,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:\"hex\",value:n,onChange:p}),r.default.createElement(\"div\",{style:d.split,className:\"flexbox-fix\"},r.default.createElement(\"div\",{style:d.third},r.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:\"r\",value:u.r,onChange:p})),r.default.createElement(\"div\",{style:d.third},r.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:\"g\",value:u.g,onChange:p})),r.default.createElement(\"div\",{style:d.third},r.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:\"b\",value:u.b,onChange:p})))))};e.default=(0,s.ColorWrap)(l)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Photoshop=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=p(n(0)),a=p(n(4)),o=p(n(1)),s=p(n(6)),u=n(2),l=p(n(268)),c=p(n(269)),h=p(n(270)),f=p(n(271)),d=p(n(272));function p(t){return t&&t.__esModule?t:{default:t}}var m=e.Photoshop=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:t.hex},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"render\",value:function(){var t=this.props,e=t.styles,n=void 0===e?{}:e,r=t.className,a=void 0===r?\"\":r,p=(0,o.default)((0,s.default)({default:{picker:{background:\"#DCDCDC\",borderRadius:\"4px\",boxShadow:\"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)\",boxSizing:\"initial\",width:\"513px\"},head:{backgroundImage:\"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)\",borderBottom:\"1px solid #B1B1B1\",boxShadow:\"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)\",height:\"23px\",lineHeight:\"24px\",borderRadius:\"4px 4px 0 0\",fontSize:\"13px\",color:\"#4D4D4D\",textAlign:\"center\"},body:{padding:\"15px 15px 0\",display:\"flex\"},saturation:{width:\"256px\",height:\"256px\",position:\"relative\",border:\"2px solid #B3B3B3\",borderBottom:\"2px solid #F0F0F0\",overflow:\"hidden\"},hue:{position:\"relative\",height:\"256px\",width:\"19px\",marginLeft:\"10px\",border:\"2px solid #B3B3B3\",borderBottom:\"2px solid #F0F0F0\"},controls:{width:\"180px\",marginLeft:\"10px\"},top:{display:\"flex\"},previews:{width:\"60px\"},actions:{flex:\"1\",marginLeft:\"20px\"}}},n));return i.default.createElement(\"div\",{style:p.picker,className:\"photoshop-picker \"+a},i.default.createElement(\"div\",{style:p.head},this.props.header),i.default.createElement(\"div\",{style:p.body,className:\"flexbox-fix\"},i.default.createElement(\"div\",{style:p.saturation},i.default.createElement(u.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:c.default,onChange:this.props.onChange})),i.default.createElement(\"div\",{style:p.hue},i.default.createElement(u.Hue,{direction:\"vertical\",hsl:this.props.hsl,pointer:h.default,onChange:this.props.onChange})),i.default.createElement(\"div\",{style:p.controls},i.default.createElement(\"div\",{style:p.top,className:\"flexbox-fix\"},i.default.createElement(\"div\",{style:p.previews},i.default.createElement(d.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),i.default.createElement(\"div\",{style:p.actions},i.default.createElement(f.default,{label:\"OK\",onClick:this.props.onAccept,active:!0}),i.default.createElement(f.default,{label:\"Cancel\",onClick:this.props.onCancel}),i.default.createElement(l.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(i.default.Component);m.propTypes={header:a.default.string,styles:a.default.object},m.defaultProps={header:\"Color Picker\",styles:{}},e.default=(0,u.ColorWrap)(m)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.PhotoshopPicker=void 0;var r=s(n(0)),i=s(n(1)),a=s(n(10)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var u=e.PhotoshopPicker=function(t){var e=t.onChange,n=t.rgb,s=t.hsv,u=t.hex,l=(0,i.default)({default:{fields:{paddingTop:\"5px\",paddingBottom:\"9px\",width:\"80px\",position:\"relative\"},divider:{height:\"5px\"},RGBwrap:{position:\"relative\"},RGBinput:{marginLeft:\"40%\",width:\"40%\",height:\"18px\",border:\"1px solid #888888\",boxShadow:\"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC\",marginBottom:\"5px\",fontSize:\"13px\",paddingLeft:\"3px\",marginRight:\"10px\"},RGBlabel:{left:\"0px\",width:\"34px\",textTransform:\"uppercase\",fontSize:\"13px\",height:\"18px\",lineHeight:\"22px\",position:\"absolute\"},HEXwrap:{position:\"relative\"},HEXinput:{marginLeft:\"20%\",width:\"80%\",height:\"18px\",border:\"1px solid #888888\",boxShadow:\"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC\",marginBottom:\"6px\",fontSize:\"13px\",paddingLeft:\"3px\"},HEXlabel:{position:\"absolute\",top:\"0px\",left:\"0px\",width:\"14px\",textTransform:\"uppercase\",fontSize:\"13px\",height:\"18px\",lineHeight:\"22px\"},fieldSymbols:{position:\"absolute\",top:\"5px\",right:\"-7px\",fontSize:\"13px\"},symbol:{height:\"20px\",lineHeight:\"22px\",paddingBottom:\"7px\"}}}),c=function(t,r){t[\"#\"]?a.default.isValidHex(t[\"#\"])&&e({hex:t[\"#\"],source:\"hex\"},r):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:\"rgb\"},r):(t.h||t.s||t.v)&&e({h:t.h||s.h,s:t.s||s.s,v:t.v||s.v,source:\"hsv\"},r)};return r.default.createElement(\"div\",{style:l.fields},r.default.createElement(o.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:\"h\",value:Math.round(s.h),onChange:c}),r.default.createElement(o.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:\"s\",value:Math.round(100*s.s),onChange:c}),r.default.createElement(o.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:\"v\",value:Math.round(100*s.v),onChange:c}),r.default.createElement(\"div\",{style:l.divider}),r.default.createElement(o.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:\"r\",value:n.r,onChange:c}),r.default.createElement(o.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:\"g\",value:n.g,onChange:c}),r.default.createElement(o.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:\"b\",value:n.b,onChange:c}),r.default.createElement(\"div\",{style:l.divider}),r.default.createElement(o.EditableInput,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:\"#\",value:u.replace(\"#\",\"\"),onChange:c}),r.default.createElement(\"div\",{style:l.fieldSymbols},r.default.createElement(\"div\",{style:l.symbol},\"\"),r.default.createElement(\"div\",{style:l.symbol},\"%\"),r.default.createElement(\"div\",{style:l.symbol},\"%\")))};e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.PhotoshopPointerCircle=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPointerCircle=function(t){var e=t.hsl,n=(0,i.default)({default:{picker:{width:\"12px\",height:\"12px\",borderRadius:\"6px\",boxShadow:\"inset 0 0 0 1px #fff\",transform:\"translate(-6px, -6px)\"}},\"black-outline\":{picker:{boxShadow:\"inset 0 0 0 1px #000\"}}},{\"black-outline\":e.l>.5});return r.default.createElement(\"div\",{style:n.picker})};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.PhotoshopPointerCircle=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPointerCircle=function(){var t=(0,i.default)({default:{triangle:{width:0,height:0,borderStyle:\"solid\",borderWidth:\"4px 0 4px 6px\",borderColor:\"transparent transparent transparent #fff\",position:\"absolute\",top:\"1px\",left:\"1px\"},triangleBorder:{width:0,height:0,borderStyle:\"solid\",borderWidth:\"5px 0 5px 8px\",borderColor:\"transparent transparent transparent #555\"},left:{Extend:\"triangleBorder\",transform:\"translate(-13px, -4px)\"},leftInside:{Extend:\"triangle\",transform:\"translate(-8px, -5px)\"},right:{Extend:\"triangleBorder\",transform:\"translate(20px, -14px) rotate(180deg)\"},rightInside:{Extend:\"triangle\",transform:\"translate(-8px, -5px)\"}}});return r.default.createElement(\"div\",{style:t.pointer},r.default.createElement(\"div\",{style:t.left},r.default.createElement(\"div\",{style:t.leftInside})),r.default.createElement(\"div\",{style:t.right},r.default.createElement(\"div\",{style:t.rightInside})))};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.PhotoshopButton=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopButton=function(t){var e=t.onClick,n=t.label,a=t.children,o=t.active,s=(0,i.default)({default:{button:{backgroundImage:\"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)\",border:\"1px solid #878787\",borderRadius:\"2px\",height:\"20px\",boxShadow:\"0 1px 0 0 #EAEAEA\",fontSize:\"14px\",color:\"#000\",lineHeight:\"20px\",textAlign:\"center\",marginBottom:\"10px\",cursor:\"pointer\"}},active:{button:{boxShadow:\"0 0 0 1px #878787\"}}},{active:o});return r.default.createElement(\"div\",{style:s.button,onClick:e},n||a)};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.PhotoshopPreviews=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPreviews=function(t){var e=t.rgb,n=t.currentColor,a=(0,i.default)({default:{swatches:{border:\"1px solid #B3B3B3\",borderBottom:\"1px solid #F0F0F0\",marginBottom:\"2px\",marginTop:\"1px\"},new:{height:\"34px\",background:\"rgb(\"+e.r+\",\"+e.g+\", \"+e.b+\")\",boxShadow:\"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000\"},current:{height:\"34px\",background:n,boxShadow:\"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000\"},label:{fontSize:\"14px\",color:\"#000\",textAlign:\"center\"}}});return r.default.createElement(\"div\",null,r.default.createElement(\"div\",{style:a.label},\"new\"),r.default.createElement(\"div\",{style:a.swatches},r.default.createElement(\"div\",{style:a.new}),r.default.createElement(\"div\",{style:a.current})),r.default.createElement(\"div\",{style:a.label},\"current\"))};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Sketch=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=h(n(0)),a=h(n(4)),o=h(n(1)),s=h(n(6)),u=n(2),l=h(n(274)),c=h(n(275));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Sketch=function(t){var e=t.width,n=t.rgb,a=t.hex,h=t.hsv,f=t.hsl,d=t.onChange,p=t.onSwatchHover,m=t.disableAlpha,g=t.presetColors,v=t.renderers,y=t.styles,b=void 0===y?{}:y,_=t.className,x=void 0===_?\"\":_,w=(0,o.default)((0,s.default)({default:r({picker:{width:e,padding:\"10px 10px 0\",boxSizing:\"initial\",background:\"#fff\",borderRadius:\"4px\",boxShadow:\"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)\"},saturation:{width:\"100%\",paddingBottom:\"75%\",position:\"relative\",overflow:\"hidden\"},Saturation:{radius:\"3px\",shadow:\"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)\"},controls:{display:\"flex\"},sliders:{padding:\"4px 0\",flex:\"1\"},color:{width:\"24px\",height:\"24px\",position:\"relative\",marginTop:\"4px\",marginLeft:\"4px\",borderRadius:\"3px\"},activeColor:{absolute:\"0px 0px 0px 0px\",borderRadius:\"2px\",background:\"rgba(\"+n.r+\",\"+n.g+\",\"+n.b+\",\"+n.a+\")\",boxShadow:\"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)\"},hue:{position:\"relative\",height:\"10px\",overflow:\"hidden\"},Hue:{radius:\"2px\",shadow:\"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)\"},alpha:{position:\"relative\",height:\"10px\",marginTop:\"4px\",overflow:\"hidden\"},Alpha:{radius:\"2px\",shadow:\"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)\"}},b),disableAlpha:{color:{height:\"10px\"},hue:{height:\"10px\"},alpha:{display:\"none\"}}},b),{disableAlpha:m});return i.default.createElement(\"div\",{style:w.picker,className:\"sketch-picker \"+x},i.default.createElement(\"div\",{style:w.saturation},i.default.createElement(u.Saturation,{style:w.Saturation,hsl:f,hsv:h,onChange:d})),i.default.createElement(\"div\",{style:w.controls,className:\"flexbox-fix\"},i.default.createElement(\"div\",{style:w.sliders},i.default.createElement(\"div\",{style:w.hue},i.default.createElement(u.Hue,{style:w.Hue,hsl:f,onChange:d})),i.default.createElement(\"div\",{style:w.alpha},i.default.createElement(u.Alpha,{style:w.Alpha,rgb:n,hsl:f,renderers:v,onChange:d}))),i.default.createElement(\"div\",{style:w.color},i.default.createElement(u.Checkboard,null),i.default.createElement(\"div\",{style:w.activeColor}))),i.default.createElement(l.default,{rgb:n,hsl:f,hex:a,onChange:d,disableAlpha:m}),i.default.createElement(c.default,{colors:g,onClick:d,onSwatchHover:p}))};f.propTypes={disableAlpha:a.default.bool,width:a.default.oneOfType([a.default.string,a.default.number]),styles:a.default.object},f.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:[\"#D0021B\",\"#F5A623\",\"#F8E71C\",\"#8B572A\",\"#7ED321\",\"#417505\",\"#BD10E0\",\"#9013FE\",\"#4A90E2\",\"#50E3C2\",\"#B8E986\",\"#000000\",\"#4A4A4A\",\"#9B9B9B\",\"#FFFFFF\"]},e.default=(0,u.ColorWrap)(f)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SketchFields=void 0;var r=s(n(0)),i=s(n(1)),a=s(n(10)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var u=e.SketchFields=function(t){var e=t.onChange,n=t.rgb,s=t.hsl,u=t.hex,l=t.disableAlpha,c=(0,i.default)({default:{fields:{display:\"flex\",paddingTop:\"4px\"},single:{flex:\"1\",paddingLeft:\"6px\"},alpha:{flex:\"1\",paddingLeft:\"6px\"},double:{flex:\"2\"},input:{width:\"80%\",padding:\"4px 10% 3px\",border:\"none\",boxShadow:\"inset 0 0 0 1px #ccc\",fontSize:\"11px\"},label:{display:\"block\",textAlign:\"center\",fontSize:\"11px\",color:\"#222\",paddingTop:\"3px\",paddingBottom:\"4px\",textTransform:\"capitalize\"}},disableAlpha:{alpha:{display:\"none\"}}},{disableAlpha:l}),h=function(t,r){t.hex?a.default.isValidHex(t.hex)&&e({hex:t.hex,source:\"hex\"},r):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,a:n.a,source:\"rgb\"},r):t.a&&(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,e({h:s.h,s:s.s,l:s.l,a:t.a,source:\"rgb\"},r))};return r.default.createElement(\"div\",{style:c.fields,className:\"flexbox-fix\"},r.default.createElement(\"div\",{style:c.double},r.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:\"hex\",value:u.replace(\"#\",\"\"),onChange:h})),r.default.createElement(\"div\",{style:c.single},r.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:\"r\",value:n.r,onChange:h,dragLabel:\"true\",dragMax:\"255\"})),r.default.createElement(\"div\",{style:c.single},r.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:\"g\",value:n.g,onChange:h,dragLabel:\"true\",dragMax:\"255\"})),r.default.createElement(\"div\",{style:c.single},r.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:\"b\",value:n.b,onChange:h,dragLabel:\"true\",dragMax:\"255\"})),r.default.createElement(\"div\",{style:c.alpha},r.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:\"a\",value:Math.round(100*n.a),onChange:h,dragLabel:\"true\",dragMax:\"100\"})))};e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SketchPresetColors=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=u(n(0)),a=u(n(4)),o=u(n(1)),s=n(2);function u(t){return t&&t.__esModule?t:{default:t}}var l=e.SketchPresetColors=function(t){var e=t.colors,n=t.onClick,a=void 0===n?function(){}:n,u=t.onSwatchHover,l=(0,o.default)({default:{colors:{margin:\"0 -10px\",padding:\"10px 0 0 10px\",borderTop:\"1px solid #eee\",display:\"flex\",flexWrap:\"wrap\",position:\"relative\"},swatchWrap:{width:\"16px\",height:\"16px\",margin:\"0 10px 10px 0\"},swatch:{borderRadius:\"3px\",boxShadow:\"inset 0 0 0 1px rgba(0,0,0,.15)\"}},\"no-presets\":{colors:{display:\"none\"}}},{\"no-presets\":!e||!e.length}),c=function(t,e){a({hex:t,source:\"hex\"},e)};return i.default.createElement(\"div\",{style:l.colors,className:\"flexbox-fix\"},e.map((function(t){var e=\"string\"==typeof t?{color:t}:t,n=\"\"+e.color+(e.title||\"\");return i.default.createElement(\"div\",{key:n,style:l.swatchWrap},i.default.createElement(s.Swatch,r({},e,{style:l.swatch,onClick:c,onHover:u,focusStyle:{boxShadow:\"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px \"+e.color}})))})))};l.propTypes={colors:a.default.arrayOf(a.default.oneOfType([a.default.string,a.default.shape({color:a.default.string,title:a.default.string})])).isRequired},e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Slider=void 0;var r=c(n(0)),i=c(n(4)),a=c(n(1)),o=c(n(6)),s=n(2),u=c(n(277)),l=c(n(279));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Slider=function(t){var e=t.hsl,n=t.onChange,i=t.pointer,l=t.styles,c=void 0===l?{}:l,h=t.className,f=void 0===h?\"\":h,d=(0,a.default)((0,o.default)({default:{hue:{height:\"12px\",position:\"relative\"},Hue:{radius:\"2px\"}}},c));return r.default.createElement(\"div\",{style:d.wrap||{},className:\"slider-picker \"+f},r.default.createElement(\"div\",{style:d.hue},r.default.createElement(s.Hue,{style:d.Hue,hsl:e,pointer:i,onChange:n})),r.default.createElement(\"div\",{style:d.swatches},r.default.createElement(u.default,{hsl:e,onClick:n})))};h.propTypes={styles:i.default.object},h.defaultProps={pointer:l.default,styles:{}},e.default=(0,s.ColorWrap)(h)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SliderSwatches=void 0;var r=o(n(0)),i=o(n(1)),a=o(n(278));function o(t){return t&&t.__esModule?t:{default:t}}var s=e.SliderSwatches=function(t){var e=t.onClick,n=t.hsl,o=(0,i.default)({default:{swatches:{marginTop:\"20px\"},swatch:{boxSizing:\"border-box\",width:\"20%\",paddingRight:\"1px\",float:\"left\"},clear:{clear:\"both\"}}});return r.default.createElement(\"div\",{style:o.swatches},r.default.createElement(\"div\",{style:o.swatch},r.default.createElement(a.default,{hsl:n,offset:\".80\",active:Math.abs(n.l-.8)<.1&&Math.abs(n.s-.5)<.1,onClick:e,first:!0})),r.default.createElement(\"div\",{style:o.swatch},r.default.createElement(a.default,{hsl:n,offset:\".65\",active:Math.abs(n.l-.65)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),r.default.createElement(\"div\",{style:o.swatch},r.default.createElement(a.default,{hsl:n,offset:\".50\",active:Math.abs(n.l-.5)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),r.default.createElement(\"div\",{style:o.swatch},r.default.createElement(a.default,{hsl:n,offset:\".35\",active:Math.abs(n.l-.35)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),r.default.createElement(\"div\",{style:o.swatch},r.default.createElement(a.default,{hsl:n,offset:\".20\",active:Math.abs(n.l-.2)<.1&&Math.abs(n.s-.5)<.1,onClick:e,last:!0})),r.default.createElement(\"div\",{style:o.clear}))};e.default=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SliderSwatch=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderSwatch=function(t){var e=t.hsl,n=t.offset,a=t.onClick,o=void 0===a?function(){}:a,s=t.active,u=t.first,l=t.last,c=(0,i.default)({default:{swatch:{height:\"12px\",background:\"hsl(\"+e.h+\", 50%, \"+100*n+\"%)\",cursor:\"pointer\"}},first:{swatch:{borderRadius:\"2px 0 0 2px\"}},last:{swatch:{borderRadius:\"0 2px 2px 0\"}},active:{swatch:{transform:\"scaleY(1.8)\",borderRadius:\"3.6px/2px\"}}},{active:s,first:u,last:l});return r.default.createElement(\"div\",{style:c.swatch,onClick:function(t){return o({h:e.h,s:.5,l:n,source:\"hsl\"},t)}})};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SliderPointer=void 0;var r=a(n(0)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderPointer=function(){var t=(0,i.default)({default:{picker:{width:\"14px\",height:\"14px\",borderRadius:\"6px\",transform:\"translate(-7px, -1px)\",backgroundColor:\"rgb(248, 248, 248)\",boxShadow:\"0 1px 4px 0 rgba(0, 0, 0, 0.37)\"}}});return r.default.createElement(\"div\",{style:t.picker})};e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Swatches=void 0;var r=f(n(0)),i=f(n(4)),a=f(n(1)),o=f(n(14)),s=f(n(6)),u=f(n(10)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(95)),c=n(2),h=f(n(281));function f(t){return t&&t.__esModule?t:{default:t}}var d=e.Swatches=function(t){var e=t.width,n=t.height,i=t.onChange,l=t.onSwatchHover,f=t.colors,d=t.hex,p=t.styles,m=void 0===p?{}:p,g=t.className,v=void 0===g?\"\":g,y=(0,a.default)((0,s.default)({default:{picker:{width:e,height:n},overflow:{height:n,overflowY:\"scroll\"},body:{padding:\"16px 0 6px 16px\"},clear:{clear:\"both\"}}},m)),b=function(t,e){u.default.isValidHex(t)&&i({hex:t,source:\"hex\"},e)};return r.default.createElement(\"div\",{style:y.picker,className:\"swatches-picker \"+v},r.default.createElement(c.Raised,null,r.default.createElement(\"div\",{style:y.overflow},r.default.createElement(\"div\",{style:y.body},(0,o.default)(f,(function(t){return r.default.createElement(h.default,{key:t.toString(),group:t,active:d,onClick:b,onSwatchHover:l})})),r.default.createElement(\"div\",{style:y.clear})))))};d.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),height:i.default.oneOfType([i.default.string,i.default.number]),colors:i.default.arrayOf(i.default.arrayOf(i.default.string)),styles:i.default.object},d.defaultProps={width:320,height:240,colors:[[l.red[900],l.red[700],l.red[500],l.red[300],l.red[100]],[l.pink[900],l.pink[700],l.pink[500],l.pink[300],l.pink[100]],[l.purple[900],l.purple[700],l.purple[500],l.purple[300],l.purple[100]],[l.deepPurple[900],l.deepPurple[700],l.deepPurple[500],l.deepPurple[300],l.deepPurple[100]],[l.indigo[900],l.indigo[700],l.indigo[500],l.indigo[300],l.indigo[100]],[l.blue[900],l.blue[700],l.blue[500],l.blue[300],l.blue[100]],[l.lightBlue[900],l.lightBlue[700],l.lightBlue[500],l.lightBlue[300],l.lightBlue[100]],[l.cyan[900],l.cyan[700],l.cyan[500],l.cyan[300],l.cyan[100]],[l.teal[900],l.teal[700],l.teal[500],l.teal[300],l.teal[100]],[\"#194D33\",l.green[700],l.green[500],l.green[300],l.green[100]],[l.lightGreen[900],l.lightGreen[700],l.lightGreen[500],l.lightGreen[300],l.lightGreen[100]],[l.lime[900],l.lime[700],l.lime[500],l.lime[300],l.lime[100]],[l.yellow[900],l.yellow[700],l.yellow[500],l.yellow[300],l.yellow[100]],[l.amber[900],l.amber[700],l.amber[500],l.amber[300],l.amber[100]],[l.orange[900],l.orange[700],l.orange[500],l.orange[300],l.orange[100]],[l.deepOrange[900],l.deepOrange[700],l.deepOrange[500],l.deepOrange[300],l.deepOrange[100]],[l.brown[900],l.brown[700],l.brown[500],l.brown[300],l.brown[100]],[l.blueGrey[900],l.blueGrey[700],l.blueGrey[500],l.blueGrey[300],l.blueGrey[100]],[\"#000000\",\"#525252\",\"#969696\",\"#D9D9D9\",\"#FFFFFF\"]],styles:{}},e.default=(0,c.ColorWrap)(d)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SwatchesGroup=void 0;var r=s(n(0)),i=s(n(1)),a=s(n(14)),o=s(n(282));function s(t){return t&&t.__esModule?t:{default:t}}var u=e.SwatchesGroup=function(t){var e=t.onClick,n=t.onSwatchHover,s=t.group,u=t.active,l=(0,i.default)({default:{group:{paddingBottom:\"10px\",width:\"40px\",float:\"left\",marginRight:\"10px\"}}});return r.default.createElement(\"div\",{style:l.group},(0,a.default)(s,(function(t,i){return r.default.createElement(o.default,{key:t,color:t,active:t.toLowerCase()===u,first:0===i,last:i===s.length-1,onClick:e,onSwatchHover:n})})))};e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SwatchesColor=void 0;var r=u(n(0)),i=u(n(1)),a=u(n(10)),o=n(2),s=u(n(283));function u(t){return t&&t.__esModule?t:{default:t}}var l=e.SwatchesColor=function(t){var e=t.color,n=t.onClick,u=void 0===n?function(){}:n,l=t.onSwatchHover,c=t.first,h=t.last,f=t.active,d=(0,i.default)({default:{color:{width:\"40px\",height:\"24px\",cursor:\"pointer\",background:e,marginBottom:\"1px\"},check:{color:a.default.getContrastingColor(e),marginLeft:\"8px\",display:\"none\"}},first:{color:{overflow:\"hidden\",borderRadius:\"2px 2px 0 0\"}},last:{color:{overflow:\"hidden\",borderRadius:\"0 0 2px 2px\"}},active:{check:{display:\"block\"}},\"color-#FFFFFF\":{color:{boxShadow:\"inset 0 0 0 1px #ddd\"},check:{color:\"#333\"}},transparent:{check:{color:\"#333\"}}},{first:c,last:h,active:f,\"color-#FFFFFF\":\"#FFFFFF\"===e,transparent:\"transparent\"===e});return r.default.createElement(o.Swatch,{color:e,style:d.color,onClick:u,onHover:l,focusStyle:{boxShadow:\"0 0 4px \"+e}},r.default.createElement(\"div\",{style:d.check},r.default.createElement(s.default,null)))};e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};e.default=function(t){var e=t.fill,n=void 0===e?\"currentColor\":e,r=t.width,a=void 0===r?24:r,s=t.height,u=void 0===s?24:s,l=t.style,c=void 0===l?{}:l,h=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,[\"fill\",\"width\",\"height\",\"style\"]);return o.default.createElement(\"svg\",i({viewBox:\"0 0 24 24\",style:i({fill:n,width:a,height:u},c)},h),o.default.createElement(\"path\",{d:\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"}))}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Twitter=void 0;var r=c(n(0)),i=c(n(4)),a=c(n(1)),o=c(n(14)),s=c(n(6)),u=c(n(10)),l=n(2);function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Twitter=function(t){var e=t.onChange,n=t.onSwatchHover,i=t.hex,c=t.colors,h=t.width,f=t.triangle,d=t.styles,p=void 0===d?{}:d,m=t.className,g=void 0===m?\"\":m,v=(0,a.default)((0,s.default)({default:{card:{width:h,background:\"#fff\",border:\"0 solid rgba(0,0,0,0.25)\",boxShadow:\"0 1px 4px rgba(0,0,0,0.25)\",borderRadius:\"4px\",position:\"relative\"},body:{padding:\"15px 9px 9px 15px\"},label:{fontSize:\"18px\",color:\"#fff\"},triangle:{width:\"0px\",height:\"0px\",borderStyle:\"solid\",borderWidth:\"0 9px 10px 9px\",borderColor:\"transparent transparent #fff transparent\",position:\"absolute\"},triangleShadow:{width:\"0px\",height:\"0px\",borderStyle:\"solid\",borderWidth:\"0 9px 10px 9px\",borderColor:\"transparent transparent rgba(0,0,0,.1) transparent\",position:\"absolute\"},hash:{background:\"#F0F0F0\",height:\"30px\",width:\"30px\",borderRadius:\"4px 0 0 4px\",float:\"left\",color:\"#98A1A4\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},input:{width:\"100px\",fontSize:\"14px\",color:\"#666\",border:\"0px\",outline:\"none\",height:\"28px\",boxShadow:\"inset 0 0 0 1px #F0F0F0\",boxSizing:\"content-box\",borderRadius:\"0 4px 4px 0\",float:\"left\",paddingLeft:\"8px\"},swatch:{width:\"30px\",height:\"30px\",float:\"left\",borderRadius:\"4px\",margin:\"0 6px 6px 0\"},clear:{clear:\"both\"}},\"hide-triangle\":{triangle:{display:\"none\"},triangleShadow:{display:\"none\"}},\"top-left-triangle\":{triangle:{top:\"-10px\",left:\"12px\"},triangleShadow:{top:\"-11px\",left:\"12px\"}},\"top-right-triangle\":{triangle:{top:\"-10px\",right:\"12px\"},triangleShadow:{top:\"-11px\",right:\"12px\"}}},p),{\"hide-triangle\":\"hide\"===f,\"top-left-triangle\":\"top-left\"===f,\"top-right-triangle\":\"top-right\"===f}),y=function(t,n){u.default.isValidHex(t)&&e({hex:t,source:\"hex\"},n)};return r.default.createElement(\"div\",{style:v.card,className:\"twitter-picker \"+g},r.default.createElement(\"div\",{style:v.triangleShadow}),r.default.createElement(\"div\",{style:v.triangle}),r.default.createElement(\"div\",{style:v.body},(0,o.default)(c,(function(t,e){return r.default.createElement(l.Swatch,{key:e,color:t,hex:t,style:v.swatch,onClick:y,onHover:n,focusStyle:{boxShadow:\"0 0 4px \"+t}})})),r.default.createElement(\"div\",{style:v.hash},\"#\"),r.default.createElement(l.EditableInput,{label:null,style:{input:v.input},value:i.replace(\"#\",\"\"),onChange:y}),r.default.createElement(\"div\",{style:v.clear})))};h.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),triangle:i.default.oneOf([\"hide\",\"top-left\",\"top-right\"]),colors:i.default.arrayOf(i.default.string),styles:i.default.object},h.defaultProps={width:276,colors:[\"#FF6900\",\"#FCB900\",\"#7BDCB5\",\"#00D084\",\"#8ED1FC\",\"#0693E3\",\"#ABB8C3\",\"#EB144C\",\"#F78DA7\",\"#9900EF\"],triangle:\"top-left\",styles:{}},e.default=(0,l.ColorWrap)(h)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(8);r.BufferGeometryUtils={computeTangents:function(t){var e=t.index,n=t.attributes;if(null!==e&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var i=e.array,a=n.position.array,o=n.normal.array,s=n.uv.array,u=a.length/3;void 0===n.tangent&&t.addAttribute(\"tangent\",new r.BufferAttribute(new Float32Array(4*u),4));for(var l=n.tangent.array,c=[],h=[],f=0;f<u;f++)c[f]=new r.Vector3,h[f]=new r.Vector3;var d=new r.Vector3,p=new r.Vector3,m=new r.Vector3,g=new r.Vector2,v=new r.Vector2,y=new r.Vector2,b=new r.Vector3,_=new r.Vector3,x=t.groups;0===x.length&&(x=[{start:0,count:i.length}]);f=0;for(var w=x.length;f<w;++f)for(var S=I=(L=x[f]).start,E=I+L.count;S<E;S+=3)N(i[S+0],i[S+1],i[S+2]);var M,T,C,P=new r.Vector3,k=new r.Vector3,A=new r.Vector3,O=new r.Vector3;for(f=0,w=x.length;f<w;++f){var L,I;for(S=I=(L=x[f]).start,E=I+L.count;S<E;S+=3)R(i[S+0]),R(i[S+1]),R(i[S+2])}}else console.warn(\"THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()\");function N(t,e,n){d.fromArray(a,3*t),p.fromArray(a,3*e),m.fromArray(a,3*n),g.fromArray(s,2*t),v.fromArray(s,2*e),y.fromArray(s,2*n);var r=p.x-d.x,i=m.x-d.x,o=p.y-d.y,u=m.y-d.y,l=p.z-d.z,f=m.z-d.z,x=v.x-g.x,w=y.x-g.x,S=v.y-g.y,E=y.y-g.y,M=1/(x*E-w*S);b.set((E*r-S*i)*M,(E*o-S*u)*M,(E*l-S*f)*M),_.set((x*i-w*r)*M,(x*u-w*o)*M,(x*f-w*l)*M),c[t].add(b),c[e].add(b),c[n].add(b),h[t].add(_),h[e].add(_),h[n].add(_)}function R(t){A.fromArray(o,3*t),O.copy(A),T=c[t],P.copy(T),P.sub(A.multiplyScalar(A.dot(T))).normalize(),k.crossVectors(O,T),C=k.dot(h[t]),M=C<0?-1:1,l[4*t]=P.x,l[4*t+1]=P.y,l[4*t+2]=P.z,l[4*t+3]=M}},mergeBufferGeometries:function(t,e){for(var n=null!==t[0].index,i=new Set(Object.keys(t[0].attributes)),a=new Set(Object.keys(t[0].morphAttributes)),o={},s={},u=new r.BufferGeometry,l=0,c=0;c<t.length;++c){var h=t[c];if(n!==(null!==h.index))return null;for(var f in h.attributes){if(!i.has(f))return null;void 0===o[f]&&(o[f]=[]),o[f].push(h.attributes[f])}for(var f in h.morphAttributes){if(!a.has(f))return null;void 0===s[f]&&(s[f]=[]),s[f].push(h.morphAttributes[f])}if(u.userData.mergedUserData=u.userData.mergedUserData||[],u.userData.mergedUserData.push(h.userData),e){var d;if(n)d=h.index.count;else{if(void 0===h.attributes.position)return null;d=h.attributes.position.count}u.addGroup(l,d,c),l+=d}}if(n){var p=0,m=[];for(c=0;c<t.length;++c){for(var g=t[c].index,v=0;v<g.count;++v)m.push(g.getX(v)+p);p+=t[c].attributes.position.count}u.setIndex(m)}for(var f in o){var y=this.mergeBufferAttributes(o[f]);if(!y)return null;u.addAttribute(f,y)}for(var f in s){var b=s[f][0].length;if(0===b)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[f]=[];for(c=0;c<b;++c){var _=[];for(v=0;v<s[f].length;++v)_.push(s[f][v][c]);var x=this.mergeBufferAttributes(_);if(!x)return null;u.morphAttributes[f].push(x)}}return u},mergeBufferAttributes:function(t){for(var e,n,i,a=0,o=0;o<t.length;++o){var s=t[o];if(s.isInterleavedBufferAttribute)return null;if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return null;if(void 0===i&&(i=s.normalized),i!==s.normalized)return null;a+=s.array.length}var u=new e(a),l=0;for(o=0;o<t.length;++o)u.set(t[o].array,l),l+=t[o].array.length;return new r.BufferAttribute(u,n,i)},interleaveAttributes:function(t){for(var e,n=0,i=0,a=0,o=t.length;a<o;++a){var s=t[a];if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.warn(\"AttributeBuffers of different types cannot be interleaved\"),null;n+=s.array.length,i+=s.itemSize}var u=new r.InterleavedBuffer(new e(n),i),l=0,c=[],h=[\"getX\",\"getY\",\"getZ\",\"getW\"],f=[\"setX\",\"setY\",\"setZ\",\"setW\"],d=0;for(o=t.length;d<o;d++){var p=(s=t[d]).itemSize,m=s.count,g=new r.InterleavedBufferAttribute(u,p,l,s.normalized);c.push(g),l+=p;for(var v=0;v<m;v++)for(var y=0;y<p;y++)g[f[y]](v,s[h[y]](v))}return c},estimateBytesUsed:function(t){var e=0;for(var n in t.attributes){var r=t.getAttribute(n);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}var i=t.getIndex();return e+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0},mergeVertices:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;e=Math.max(e,Number.EPSILON);for(var n={},i=t.getIndex(),a=t.getAttribute(\"position\"),o=i?i.count:a.count,s=0,u=Object.keys(t.attributes),l={},c={},h=[],f=[\"getX\",\"getY\",\"getZ\",\"getW\"],d=0,p=u.length;d<p;d++){l[_=u[d]]=[],(E=t.morphAttributes[_])&&(c[_]=new Array(E.length).fill().map((function(){return[]})))}var m=Math.log10(1/e),g=Math.pow(10,m);for(d=0;d<o;d++){var v=i?i.getX(d):d,y=\"\",b=0;for(p=u.length;b<p;b++)for(var _=u[b],x=(S=t.getAttribute(_)).itemSize,w=0;w<x;w++)y+=~~(S[f[w]](v)*g)+\",\";if(y in n)h.push(n[y]);else{for(b=0,p=u.length;b<p;b++){_=u[b];var S=t.getAttribute(_),E=t.morphAttributes[_],M=(x=S.itemSize,l[_]),T=c[_];for(w=0;w<x;w++){var C=f[w];if(M.push(S[C](v)),E)for(var P=0,k=E.length;P<k;P++)T[P].push(E[P][C](v))}}n[y]=s,h.push(s),s++}}var A=t.clone();for(d=0,p=u.length;d<p;d++){_=u[d];var O=t.getAttribute(_),L=new O.array.constructor(l[_]);if(O.isInterleavedBufferAttribute?S=new r.BufferAttribute(L,O.itemSize,O.itemSize):(S=t.getAttribute(_).clone()).setArray(L),A.addAttribute(_,S),_ in c)for(b=0;b<c[_].length;b++){var I=t.morphAttributes[_][b].clone();I.setArray(new I.array.constructor(c[_][b])),A.morphAttributes[_][b]=I}}var N=Uint8Array;h.length>=Math.pow(2,8)&&(N=Uint16Array),h.length>=Math.pow(2,16)&&(N=Uint32Array);var R=new N(h);h=null;return null===i?h=new r.BufferAttribute(R,1):(h=t.getIndex().clone()).setArray(R),A.setIndex(h),A}},e.default=r.BufferGeometryUtils},function(t,e,n){t.exports=function(t,e){\"use strict\";e=e&&e.hasOwnProperty(\"default\")?e.default:e;var n=new t.Vector3,r=new t.Vector3,i=new t.Vector3;return function(a){function o(n){void 0===n&&(n={});var r=n.material;void 0===r&&(r={});var i=n.maxFontSize;void 0===i&&(i=1/0);var o=n.minFontSize;void 0===o&&(o=0);var s=n.redrawInterval;void 0===s&&(s=1);var u=n.textSize;void 0===u&&(u=1);var l=n.texture;void 0===l&&(l={}),a.call(this,new t.SpriteMaterial(Object.assign({},r,{map:new e(l)}))),this.lastRedraw=0,this.maxFontSize=i,this.minFontSize=o,this.redrawInterval=s,this.textSize=u}a&&(o.__proto__=a),o.prototype=Object.create(a&&a.prototype),o.prototype.constructor=o;var s={isTextSprite:{configurable:!0}};return s.isTextSprite.get=function(){return!0},o.prototype.onBeforeRender=function(t,e,n){this.redraw(t,n)},o.prototype.updateScale=function(){this.scale.set(this.material.map.image.width/this.material.map.image.height,1,1).multiplyScalar(this.textSize*this.material.map.height)},o.prototype.updateMatrix=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.updateScale(),a.prototype.updateMatrix.apply(this,t)},o.prototype.redraw=function(t,e){var n=this;this.lastRedraw+this.redrawInterval<Date.now()&&(this.redrawInterval?setTimeout((function(){n.redrawNow(t,e)}),1):this.redrawNow(t,e))},o.prototype.redrawNow=function(e,a){this.updateScale(),this.material.map.fontSize=t.Math.clamp(t.Math.ceilPowerOfTwo(function(e,a,o){if(a.domElement.width&&a.domElement.height&&e.material.map.height){e.getWorldPosition(r),o.getWorldPosition(n);var s=r.distanceTo(n),u=2*Math.tan(t.Math.degToRad(o.fov)/2)*s;if(u){e.getWorldScale(i);var l=i.y*a.domElement.height/u;if(l)return Math.round(l/e.material.map.height)}}return 0}(this,e,a)),this.minFontSize,this.maxFontSize),this.lastRedraw=Date.now()},o.prototype.dispose=function(){this.material.map.dispose(),this.material.dispose()},Object.defineProperties(o.prototype,s),o}(t.Sprite)}(n(8),n(287))},function(t,e,n){t.exports=function(t){\"use strict\";function e(t,e,n,r,i){return[t,e,n,r+\"px\",i].join(\" \")}function n(t){return void 0===t}return function(r){function i(n){void 0===n&&(n={});var i=n.align;void 0===i&&(i=\"center\");var a=n.anisotropy,o=n.createCanvas;void 0===o&&(o=function(){return document.createElement(\"canvas\")});var s=n.fillStyle;void 0===s&&(s=\"#fff\");var u=n.fontFamily;void 0===u&&(u=\"sans-serif\");var l=n.fontSize;void 0===l&&(l=16);var c=n.fontStyle;void 0===c&&(c=\"normal\");var h=n.fontVariant;void 0===h&&(h=\"normal\");var f=n.fontWeight;void 0===f&&(f=\"normal\");var d=n.format,p=n.lineGap;void 0===p&&(p=.15);var m=n.loadFontFace;void 0===m&&(m=function(t,n,r,i){var a=e(n,r,i,1,t);return document.fonts.load(a)});var g=n.magFilter;void 0===g&&(g=t.LinearFilter);var v=n.mapping,y=n.minFilter;void 0===y&&(y=t.LinearFilter);var b=n.padding;void 0===b&&(b=.25);var _=n.strokeStyle;void 0===_&&(_=\"#000\");var x=n.strokeWidth;void 0===x&&(x=0);var w=n.text;void 0===w&&(w=\"\");var S,E,M=n.type,T=n.wrapS,C=n.wrapT;r.call(this,o(),v,T,C,g,y,d,M,a),this._align=i,this._fillStyle=s,this._fontFamily=u,this._fontSize=l,this._fontStyle=c,this._fontVariant=h,this._fontWeight=f,this._lineGap=p,this._padding=b,this._strokeStyle=_,this._strokeWidth=x,this._text=w,this.createCanvas=o,this.loadFontFace=m,this.redraw=(S=this.redrawNow,function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];return E||(E=new Promise((function(t){setTimeout(t,0)})).then((function(){return S.apply(t,e)})).finally((function(){E=void 0}))),E}),this.redrawNow()}r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i;var a={text:{configurable:!0},lines:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontWeight:{configurable:!0},fontVariant:{configurable:!0},fontStyle:{configurable:!0},font:{configurable:!0},fillStyle:{configurable:!0},strokeWidth:{configurable:!0},strokeWidthInPixels:{configurable:!0},strokeStyle:{configurable:!0},align:{configurable:!0},lineGap:{configurable:!0},lineGapInPixels:{configurable:!0},padding:{configurable:!0},paddingInPixels:{configurable:!0},textWidthInPixels:{configurable:!0},textHeight:{configurable:!0},textHeightInPixels:{configurable:!0},widthInPixels:{configurable:!0},height:{configurable:!0},heightInPixels:{configurable:!0}};return a.text.get=function(){return this._text},a.text.set=function(t){this._text!==t&&(this._text=t,this._lines=void 0,this._textWidthInPixels=void 0,this.redraw())},a.lines.get=function(){return n(this._lines)&&(this._lines=this.computeLines()),this._lines},i.prototype.computeLines=function(){var t=this.text;return t?t.split(\"\\n\"):[]},a.fontFamily.get=function(){return this._fontFamily},a.fontFamily.set=function(t){this._fontFamily!==t&&(this._fontFamily=t,this._textWidthInPixels=void 0,this.redraw())},a.fontSize.get=function(){return this._fontSize},a.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this._textWidthInPixels=void 0,this.redraw())},a.fontWeight.get=function(){return this._fontWeight},a.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this._textWidthInPixels=void 0,this.redraw())},a.fontVariant.get=function(){return this._fontVariant},a.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this._textWidthInPixels=void 0,this.redraw())},a.fontStyle.get=function(){return this._fontStyle},a.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this._textWidthInPixels=void 0,this.redraw())},a.font.get=function(){return e(this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily)},a.fillStyle.get=function(){return this._fillStyle},a.fillStyle.set=function(t){this._fillStyle!==t&&(this._fillStyle=t,this.redraw())},a.strokeWidth.get=function(){return this._strokeWidth},a.strokeWidth.set=function(t){this._strokeWidth!==t&&(this._strokeWidth=t,this.redraw())},a.strokeWidthInPixels.get=function(){return this._strokeWidth*this.fontSize},a.strokeStyle.get=function(){return this._strokeStyle},a.strokeStyle.set=function(t){this._strokeStyle!==t&&(this._strokeStyle=t,this.redraw())},a.align.get=function(){return this._align},a.align.set=function(t){this._align!==t&&(this._align=t,this.redraw())},a.lineGap.get=function(){return this._lineGap},a.lineGap.set=function(t){this._lineGap!==t&&(this._lineGap=t,this.redraw())},a.lineGapInPixels.get=function(){return this.fontSize*this.lineGap},a.padding.get=function(){return this._padding},a.padding.set=function(t){this._padding!==t&&(this._padding=t,this.redraw())},a.paddingInPixels.get=function(){return this.padding*this.fontSize},a.textWidthInPixels.get=function(){return n(this._textWidthInPixels)&&(this._textWidthInPixels=this.computeTextWidthInPixels()),this._textWidthInPixels},i.prototype.computeTextWidthInPixels=function(){var t=this.createCanvas,e=this.font,n=this.lines;if(n.length){var r=t().getContext(\"2d\");return r.font=e,n.map((function(t){return r.measureText(t).width})).reduce((function(t,e){return Math.max(t,e)}))}return 0},a.textHeight.get=function(){var t=this.lineGap,e=this.lines;return e.length?e.length+t*(e.length-1):0},a.textHeightInPixels.get=function(){return this.textHeight*this.fontSize},a.widthInPixels.get=function(){return this.textWidthInPixels+this.strokeWidthInPixels+2*this.paddingInPixels},a.height.get=function(){return this.textHeight+this.strokeWidth+2*this.padding},a.heightInPixels.get=function(){return this.height*this.fontSize},i.prototype.redrawNow=function(){var t=this;return Promise.resolve().then((function(){return t.loadFontFace(t.fontFamily,t.fontStyle,t.fontVariant,t.fontWeight)})).then((function(){var e=t.image,n=e.getContext(\"2d\");if(n.clearRect(0,0,e.width,e.height),t.widthInPixels&&t.heightInPixels){var r;switch(e.width=t.widthInPixels,e.height=t.heightInPixels,n.font=t.font,n.textBaseline=\"middle\",t.align){case\"left\":n.textAlign=\"left\",r=t.paddingInPixels+t.strokeWidthInPixels/2;break;case\"right\":n.textAlign=\"right\",r=t.paddingInPixels+t.strokeWidthInPixels/2+t.textWidthInPixels;break;case\"center\":n.textAlign=\"center\",r=t.paddingInPixels+t.strokeWidthInPixels/2+t.textWidthInPixels/2}var i=t.paddingInPixels+t.strokeWidthInPixels/2+t.fontSize/2;n.fillStyle=t.fillStyle,n.miterLimit=1,n.lineWidth=t.strokeWidthInPixels,n.strokeStyle=t.strokeStyle,t.lines.forEach((function(e){t.strokeWidthInPixels&&n.strokeText(e,r,i),n.fillText(e,r,i),i+=t.fontSize+t.lineGapInPixels}))}else e.width=e.height=1;t.needsUpdate=!0}))},Object.defineProperties(i.prototype,a),i}(t.Texture)}(n(8))},function(t,e,n){\"use strict\";function r(t){return t&&\"object\"==typeof t&&\"default\"in t?t.default:t}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(n(289)),a=r(n(290)),o=r(n(291)),s=r(n(293)),u=r(n(294)),l=r(n(97)),c=r(n(296)),h=r(n(298)),f=r(n(0));r(n(4)),r(n(299));var d,p=(d=null,function(){if(null!==d)return d;var t,e,n,r=!1;try{window.addEventListener(\"test\",null,(t={},e=\"passive\",n={get:function(){r=!0}},Object.defineProperty(t,e,n)))}catch(t){}return d=r,r}()),m={capture:!1,passive:!1};function g(t){return h({},m,t)}function v(t,e,n){var r=[t,e];return r.push(p?n:n.capture),r}function y(t,e,n,r){t.addEventListener.apply(t,v(e,n,r))}function b(t,e,n,r){t.removeEventListener.apply(t,v(e,n,r))}function _(t,e){t.children,t.target;var n=c(t,[\"children\",\"target\"]);Object.keys(n).forEach((function(t){if(\"on\"===t.substring(0,2)){var r=n[t],i=l(r),a=\"object\"===i;if(a||\"function\"===i){var o=\"capture\"===t.substr(-7).toLowerCase(),s=t.substring(2).toLowerCase();s=o?s.substring(0,s.length-7):s,a?e(s,r.handler,r.options):e(s,r,g({capture:o}))}}}))}var x=function(t){function e(){return i(this,e),o(this,s(e).apply(this,arguments))}return u(e,t),a(e,[{key:\"componentDidMount\",value:function(){this.applyListeners(y)}},{key:\"componentDidUpdate\",value:function(t){this.applyListeners(b,t),this.applyListeners(y)}},{key:\"componentWillUnmount\",value:function(){this.applyListeners(b)}},{key:\"applyListeners\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=e.target;if(n){var r=n;\"string\"==typeof n&&(r=window[n]),_(e,t.bind(null,r))}}},{key:\"render\",value:function(){return this.props.children||null}}]),e}(f.PureComponent);x.propTypes={},e.withOptions=function(t,e){return{handler:t,options:g(e)}},e.default=x},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(97),i=n(292);t.exports=function(t,e){return!e||\"object\"!==r(e)&&\"function\"!=typeof e?i(t):e}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(295);t.exports=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(297);t.exports=function(t,e){if(null==t)return{};var n,i,a=r(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e,n){\"use strict\";var r=function(){};t.exports=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(0)),a=l(n(301)),o=l(n(312)),s=l(n(102)),u=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(26)),l(n(15)));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={queryMode:u.default.getMode(),menu:\"Visualization\"},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;u.default.on(\"switchQueryMode\",(function(e){setTimeout((function(){return t.setState({queryMode:e})})),\"QBE\"===e?$(\"#extractionResults\").css({width:\"40%\"}):$(\"#extractionResults\").css({width:\"70%\"})}))}},{key:\"render\",value:function(){var t=void 0;return\"QBE\"===this.state.queryMode&&(t=i.default.createElement(s.default,null)),i.default.createElement(\"div\",{className:\"contents\",id:\"mainFeatureArea\",style:{overflow:\"auto\",display:\"flex\"}},i.default.createElement(a.default,null),t,i.default.createElement(o.default,null))}}]),e}(i.default.Component);e.default=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=c(n(0)),a=c(n(302)),o=c(n(311)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(26)),u=(c(n(102)),c(n(3))),l=c(n(15));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={queryMode:l.default.getMode()},n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;l.default.on(\"switchQueryMode\",(function(e){t.setState({queryMode:e})}))}},{key:\"selectTab\",value:function(){s.switchQueryMode(\"AE\")}},{key:\"updateTargets\",value:function(){for(var t=$(\"input[name=targetList]:checked\"),e=[],n=0;n<t.length;n++)e.push(Number(t[n].value));s.updateTarget(e)}},{key:\"render\",value:function(){var t=u.default.getAllIdsFileNames().map((function(t){return i.default.createElement(\"label\",{className:\"form-check form-check-inline\",htmlFor:\"inlineCheckbox1\",key:t.id},i.default.createElement(\"input\",{className:\"form-check-input\",type:\"checkbox\",name:\"targetList\",id:\"checkboxTarget\"+t.id,value:t.id,key:t.id}),t.name)}));return i.default.createElement(\"div\",{id:\"extractionMenu\",className:\"featureColumn\",style:{overflow:\"auto\"}},i.default.createElement(\"div\",{id:\"extractionMainMenu\"},i.default.createElement(\"div\",{id:\"targetDatasetsList\",className:\"controllersElem\"},i.default.createElement(\"h5\",null,\"Target\"),i.default.createElement(\"form\",{onChange:this.updateTargets.bind(this)},t)),i.default.createElement(\"ul\",{className:\"nav nav-tabs\"},i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"a\",{className:\"nav-link active\",\"data-toggle\":\"tab\",href:\"#automaticExtraction\",onClick:this.selectTab},\"Automatic Extraction\")),i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"a\",{className:\"nav-link\",\"data-toggle\":\"tab\",href:\"#visualQuery\"},\"Visual Query\"))),i.default.createElement(\"div\",{id:\"extractionMenuTabs\",className:\"tab-content\"},i.default.createElement(\"div\",{className:\"tab-pane fade show active\",id:\"automaticExtraction\"},i.default.createElement(o.default,null)),i.default.createElement(\"div\",{className:\"tab-pane fade\",id:\"visualQuery\"},i.default.createElement(a.default,null)))))}}]),e}(i.default.Component);e.default=h},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=f(n(0)),a=(h(n(8)),h(n(26))),o=f(n(3)),s=f(n(15)),u=f(n(303)),l=f(n(304)),c=h(n(309));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={visualQuery:!1,dragSelection:!0,queryMode:s.default.getMode(),selector:!0,source:-1,selectedInterval:[],DTWMode:\"DTWD\"},t}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentWillMount\",value:function(){var t=this;s.default.on(\"updateSelectedTimeSlice\",(function(){t.setState({selectedInterval:s.default.getSelectedInterval()}),t.updateSelectedInterval()})),s.default.on(\"updateSource\",(function(){t.setState({source:s.default.getSource()}),$(\"#stepSizeOfSlidingWindow\").val(\"5\")})),s.default.on(\"switchQueryMode\",(function(e){t.setState({queryMode:e})})),s.default.on(\"updateSelectedPeriod\",(function(){t.updateSelectedInterval()}))}},{key:\"switchSelector\",value:function(){console.log(\"switch selector\"),this.setState({selector:!this.state.selector}),a.switchSelector()}},{key:\"switchDragSelection\",value:function(){this.setState({dragSelection:!this.state.dragSelection}),a.switchDragSelection()}},{key:\"switchQueryMode\",value:function(t){var e=$(\"input[name=queryMode]:checked\").val();a.switchQueryMode(e)}},{key:\"switchDTWMode\",value:function(){var t=$(\"input[name=DTWType]:checked\").val();console.log(t),this.setState({DTWMode:t})}},{key:\"resetSelection\",value:function(){a.resetSelection()}},{key:\"selectTimeInterval\",value:function(){var t=$(\"#selectTimeIntervalInput\").val();isNaN(t)||\"\"==t||a.selectTimeInterval(this.state.source,t)}},{key:\"updateSource\",value:function(){var t=document.getElementById(\"sourceList\"),e=t.selectedIndex,n=t.options[e].value;a.updateSource(n)}},{key:\"updateTarget\",value:function(){}},{key:\"updateSelectedInterval\",value:function(){var t=s.default.getSelectedPeriod();this.setState({selectedInterval:t}),$(\"#selectedInterval\").text(\"JD: \"+t[0].toFixed(3)+\" - \"+t[1].toFixed(3)),$(\"#targetLengthMin\").val(Math.floor(t[1])-Math.ceil(t[0])),$(\"#targetLengthMax\").val(Math.floor(t[1])-Math.ceil(t[0]))}},{key:\"updateIgnoredVariables\",value:function(){var t=this.getIgnoredVariables();a.setIgnoredVariables(t)}},{key:\"getIgnoredVariables\",value:function(){for(var t=$(\"input[name=QBEIgnored]:checked\"),e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}},{key:\"extractionSource\",value:function(){var t=o.default.getAllIdsFileNames().map((function(t){return i.default.createElement(\"option\",{value:t.id,key:t.id},t.name)}));return t.unshift(i.default.createElement(\"option\",{value:\"default\",key:\"default\"},\"Select a source\")),i.default.createElement(\"div\",{className:\"featureElem\",style:{display:\"QBE\"===this.state.queryMode?\"block\":\"none\"}},i.default.createElement(\"h5\",null,\"Source\"),i.default.createElement(\"select\",{className:\"custom-select custom-select-sm\",id:\"sourceList\",style:{width:\"40%\"},onChange:this.updateSource.bind(this)},t))}},{key:\"queryModes\",value:function(){return i.default.createElement(\"div\",{className:\"featureElem\"},i.default.createElement(\"h5\",null,\"Query mode\"),i.default.createElement(\"form\",{className:\"form-check form-check-inline\",id:\"queryMode\",onChange:this.switchQueryMode.bind(this)},i.default.createElement(\"div\",{className:\"custom-control custom-radio\"},i.default.createElement(\"input\",{type:\"radio\",id:\"QBE\",name:\"queryMode\",className:\"custom-control-input\",value:\"QBE\",checked:\"QBE\"===this.state.queryMode,readOnly:!0}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"QBE\"},\"Query-by-example\")),i.default.createElement(\"div\",{className:\"custom-control custom-radio\",style:{marginLeft:\"0.5rem\"}},i.default.createElement(\"input\",{type:\"radio\",id:\"QBS\",name:\"queryMode\",className:\"custom-control-input\",value:\"QBS\",checked:\"QBS\"===this.state.queryMode,readOnly:!0}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"QBS\"},\"Query-by-sketch\"))))}},{key:\"QBESelection\",value:function(){return i.default.createElement(\"div\",{className:\"featureElem\"},i.default.createElement(\"h5\",null,\"Selection\"),i.default.createElement(\"form\",{className:\"form-check form-check-inline selector featureRow\",id:\"QBESelector\",onChange:this.switchSelector.bind(this)},i.default.createElement(\"div\",{className:\"custom-control custom-radio\"},i.default.createElement(\"input\",{type:\"radio\",id:\"QBESelect\",name:\"QBESelector\",className:\"custom-control-input\",value:\"Select\",checked:this.state.selector,readOnly:!0}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"QBESelect\"},\"Select\")),i.default.createElement(\"div\",{className:\"custom-control custom-radio\",style:{marginLeft:\"0.5rem\"}},i.default.createElement(\"input\",{type:\"radio\",id:\"QBEDeselect\",name:\"QBESelector\",className:\"custom-control-input\",value:\"Deselect\",checked:!this.state.selector,readOnly:!0}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"QBEDeselect\"},\"Deselect\"))),i.default.createElement(\"div\",{id:\"selectTimeInterval\",className:\"form-row featureRow\"},i.default.createElement(\"div\",{className:\"input-group input-group-sm\",style:{width:\"10rem\",marginRight:\"1.5rem\"}},i.default.createElement(\"span\",{style:{marginRight:\"0.3rem\"}},\"Select\"),i.default.createElement(\"input\",{type:\"text\",className:\"form-control custom-input\",id:\"selectTimeIntervalInput\"}),i.default.createElement(\"span\",{style:{marginLeft:\"0.3rem\"}},\"days\")),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",type:\"button\",id:\"selectTimeIntervalBtn\",style:{right:\"0\"},onClick:this.selectTimeInterval.bind(this)},\"Select\")),i.default.createElement(\"div\",{className:\"form-check\"},i.default.createElement(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"checkboxDragTube\",value:\"option1\",checked:this.state.dragSelection,onChange:this.switchDragSelection.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"inlineCheckbox1\"},\"Selection by drag\")),i.default.createElement(\"button\",{id:\"resetSelectionBtn\",className:\"btn btn-primary btn-sm featureRow\",onClick:this.resetSelection.bind(this)},\"Deselect all\"))}},{key:\"QBSSelection\",value:function(){var t=[];return o.default.getAllData().forEach((function(e){t.push(e.data.lookup)})),i.default.createElement(\"div\",{className:\"featureElem\",id:\"QBSArea\"},i.default.createElement(l.default,{id:this.state.source,xItem:\"z\",yItem:\"V\",lookup:t}))}},{key:\"selectionDetail\",value:function(){var t=void 0;this.state.source>=0&&\"QBE\"===this.state.queryMode&&(t=i.default.createElement(u.default,{sourceId:this.state.source}));var e=void 0;return\"QBE\"===this.state.queryMode&&(e=i.default.createElement(\"div\",{className:\"featureElem\",style:{position:\"relative\"}},i.default.createElement(\"h5\",null,\"Selection Detail\"),i.default.createElement(\"span\",{id:\"selectedInterval\"}),i.default.createElement(\"div\",{id:\"selectedIntervalViewArea\"},t))),e}},{key:\"matchingControllers\",value:function(){var t=[];if(this.state.source>=0){var e=o.default.getData(Number(this.state.source)).data.lookup;for(var n in e){var r=\"\";r=e[n].length>1?e[n].join(\",\"):e[n],\"z\"!==n&&t.push(i.default.createElement(\"div\",{className:\"form-check form-check-inline\",key:n},i.default.createElement(\"input\",{className:\"form-check-input\",type:\"checkbox\",name:\"QBEIgnored\",value:n,id:\"QBEIgnored_\"+n}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"QBEIgnored_\"+n},r)))}}return i.default.createElement(\"div\",{className:\"featureElem\",style:{position:\"relative\"}},i.default.createElement(\"h5\",null,\"Matching\"),i.default.createElement(\"h6\",null,\"Ignored variables\"),i.default.createElement(\"form\",{id:\"QBEIgnoredVariables\",onChange:this.updateIgnoredVariables.bind(this)},t),i.default.createElement(\"h6\",null,\"Options\"),i.default.createElement(\"div\",{className:\"container\",style:{paddingRight:\"0px\",paddingLeft:\"0px\",marginBottom:\"0.2rem\"}},i.default.createElement(\"div\",{className:\"row matchingOption\",style:{paddingLeft:\"15px\",paddingRight:\"15px\"}},i.default.createElement(\"div\",{className:\"custom-control custom-switch\"},i.default.createElement(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:\"QBENormalizeSwitch\"}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"QBENormalizeSwitch\"},\"Normalize\"))),i.default.createElement(\"div\",{className:\"row matchingOption\"},i.default.createElement(\"div\",{className:\"col-4\"},\"Distance metric\"),i.default.createElement(\"div\",{className:\"col\"},i.default.createElement(\"select\",{className:\"custom-select custom-select-sm\",id:\"distanceMetric\"},i.default.createElement(\"option\",{value:\"Euclidean\"},\"Euclidean\"),i.default.createElement(\"option\",{value:\"Manhattan\"},\"Manhattan\")))),i.default.createElement(\"div\",{className:\"row matchingOption\"},i.default.createElement(\"div\",{className:\"col-4\"},\"Warping window size\"),i.default.createElement(\"div\",{className:\"col form-inline\"},i.default.createElement(\"input\",{className:\"form-control form-control-sm\",type:\"text\",placeholder:\"window size\",id:\"warpingWindowSize\",style:{width:\"40%\",marginRight:\"0.5rem\"}}),i.default.createElement(\"label\",{className:\"col-form-label col-form-label-sm\"},\" days\"))),i.default.createElement(\"div\",{className:\"row matchingOption\"},i.default.createElement(\"div\",{className:\"col-4\"},\"Length of the target time series\"),i.default.createElement(\"div\",{className:\"col form-inline\"},i.default.createElement(\"input\",{className:\"form-control form-control-sm\",type:\"text\",placeholder:\"min\",id:\"targetLengthMin\",style:{width:\"20%\",marginRight:\"0.5rem\"}}),\"~\",i.default.createElement(\"input\",{className:\"form-control form-control-sm\",type:\"text\",placeholder:\"max\",id:\"targetLengthMax\",style:{width:\"20%\",marginRight:\"0.5rem\",marginLeft:\"0.5rem\"}}),i.default.createElement(\"label\",{className:\"col-form-label col-form-label-sm\"},\" days\"))),i.default.createElement(\"div\",{className:\"row matchingOption\"},i.default.createElement(\"div\",{className:\"col-4\"},\"Step size of sliding window\"),i.default.createElement(\"div\",{className:\"col form-inline\"},i.default.createElement(\"input\",{className:\"form-control form-control-sm\",type:\"text\",placeholder:\"step size\",id:\"stepSizeOfSlidingWindow\",style:{width:\"40%\",marginRight:\"0.5rem\"}}),i.default.createElement(\"label\",{className:\"col-form-label col-form-label-sm\"},\" days\"))),i.default.createElement(\"div\",{className:\"row matchingOption\"},i.default.createElement(\"div\",{className:\"col-4\"},\"Restrictions\"),i.default.createElement(\"div\",{className:\"col\"},\"Restriction checkboxes here\")),i.default.createElement(\"div\",{className:\"row matchingOption\"},i.default.createElement(\"div\",{className:\"col-4\"},\"Type of DTW\"),i.default.createElement(\"div\",{className:\"col\"},i.default.createElement(\"form\",{className:\"form-check\",id:\"DTWType\",onChange:this.switchDTWMode.bind(this)},i.default.createElement(\"div\",{className:\"custom-control custom-radio\"},i.default.createElement(\"input\",{type:\"radio\",id:\"DTWI\",name:\"DTWType\",value:\"DTWI\",checked:\"DTWI\"===this.state.DTWMode,className:\"custom-control-input\",readOnly:!0}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"DTWI\"},\"DTW\",i.default.createElement(\"sub\",null,\"I\"))),i.default.createElement(\"div\",{className:\"custom-control custom-radio\"},i.default.createElement(\"input\",{type:\"radio\",id:\"DTWD\",name:\"DTWType\",value:\"DTWD\",checked:\"DTWD\"===this.state.DTWMode,className:\"custom-control-input\",readOnly:!0}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"DTWD\"},\"DTW\",i.default.createElement(\"sub\",null,\"D\"))))))),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",type:\"button\",id:\"runMatchingBtn\",onClick:this.runMatching.bind(this)},\"Run\"))}},{key:\"runMatching\",value:function(){var t=$(\"#QBENormalizeSwitch\").prop(\"checked\"),e=document.getElementById(\"distanceMetric\"),n=e.selectedIndex,r=e.options[n].value,i=$(\"#warpingWindowSize\").val();i=\"\"===i?0:Number(i);var a=$(\"#targetLengthMin\").val(),u=$(\"#targetLengthMax\").val();a=\"\"===a?0:Number(a),u=\"\"===u?0:Number(u);var l=$(\"#stepSizeOfSlidingWindow\").val();l=\"\"===l?1:Number(l);var h=$(\"input[name=DTWType]:checked\").val();switch(this.state.queryMode){case\"QBE\":console.log(\"convert QBE into data\");var f=Number(this.state.source),d=s.default.getSelectedPeriod(),p=this.getIgnoredVariables();if(NaN!==f){var m=c.makeQueryfromQBE(f,d,p),g=o.default.getDataArray(f,1);c.runMatching(m,g,h,t,r,i,l,[a,u])}break;case\"QBS\":console.log(\"convert QBS into data\")}}},{key:\"render\",value:function(){var t=void 0;return\"QBE\"===this.state.queryMode?t=this.QBESelection():\"QBS\"===this.state.queryMode&&(t=this.QBSSelection()),i.default.createElement(\"div\",{id:\"featureArea\",className:\"controllersElem\"},this.queryModes(),this.extractionSource(),t,this.selectionDetail(),this.matchingControllers())}}]),e}(i.default.Component);e.default=d},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=c(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(8)),o=c(n(3)),s=c(n(13)),u=c(n(15)),l=c(n(96));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.sourceId=t.sourceId,n.selectedPeriod=u.default.getSelectedPeriod(),n.data=o.default.getData(n.sourceId),n.texture=s.default.getTexture(),n.segment=s.default.getSegment(),n.division=s.default.getDivision(),n.ignoredVariables=[],n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"render\",value:function(){var t=this;$(\"#selectedIntervalViewArea\").width();return i.default.createElement(\"div\",{className:\"TimeTubes\",id:\"selectedTimeSliceView\",ref:function(e){t.mount=e}})}},{key:\"componentWillMount\",value:function(){var t=this;s.default.on(\"switch\",(function(){t.camera&&t.switchCamera()})),u.default.on(\"resetSelection\",(function(){t.deselectAll()})),u.default.on(\"updateSelectedPeriod\",(function(){t.selectedPeriod=u.default.getSelectedPeriod(),t.updateTimePeriod()})),u.default.on(\"selectPeriodfromSP\",(function(e){t.selectedPeriod=u.default.getSelectedPeriod(),t.updateTimePeriod()})),u.default.on(\"selectTimeInterval\",(function(e,n){t.selectedPeriod=u.default.getSelectedPeriod(),t.updateTimePeriod()})),u.default.on(\"setIgnoredVariables\",(function(e){t.ignoredVariables=e,console.log(\"ignore\",e),t.redrawTube()}))}},{key:\"componentWillUnmount\",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:\"componentDidMount\",value:function(){if(this.sourceId>=0){var t=$(\"#selectedIntervalViewArea\").width(),e=t;this.scene=new a.Scene,this.setCameras(),this.renderer=new a.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(\"#000000\"),this.renderer.setSize(t,e),this.renderer.domElement.id=\"selectedTimeSliceView\",this.mount.appendChild(this.renderer.domElement),this.renderScene(),this.start();var n=new a.DirectionalLight(16777215,.7);n.position.set(-20,40,60),this.scene.add(n);var r=new a.AmbientLight(2697513);this.scene.add(r),this.addControls(),this.setPlaceHolder();var i=new a.AxesHelper(1e3);this.scene.add(i)}}},{key:\"start\",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate.bind(this)))}},{key:\"stop\",value:function(){cancelAnimationFrame(this.frameId)}},{key:\"animate\",value:function(){this.renderScene(),this.frameId=window.requestAnimationFrame(this.animate.bind(this))}},{key:\"renderScene\",value:function(){this.renderer&&this.renderer.render(this.scene,this.camera)}},{key:\"setCameras\",value:function(){var t=s.default.getCameraProp(this.sourceId);this.cameraSet={},this.cameraSet.perspective=new a.PerspectiveCamera(t.fov,1,.1,t.far);var e=50*t.depth,n=50*t.depth*1;this.cameraSet.orthographic=new a.OrthographicCamera(-n/2,n/2,e/2,-e/2,.1,t.far),\"Perspective\"===t.type?this.camera=this.cameraSet.perspective:this.camera=this.cameraSet.orthographic,this.camera.position.z=50,this.camera.lookAt(-this.scene.position)}},{key:\"setPlaceHolder\",value:function(){var t=s.default.getTexture(this.sourceId),e=new Float32Array(0),n=new Float32Array(0),r=new Float32Array(0),i=new Float32Array(0),o=new Uint32Array(0),u=new a.BufferGeometry;u.addAttribute(\"position\",new a.BufferAttribute(new Float32Array(e),3)),u.addAttribute(\"normal\",new a.BufferAttribute(r,3)),u.addAttribute(\"colorData\",new a.BufferAttribute(new Float32Array(n),2)),u.addAttribute(\"selected\",new a.BufferAttribute(new Float32Array(i),1)),u.setIndex(new a.BufferAttribute(new Uint32Array(o),1)),u.computeVertexNormals();var l=new a.ShaderMaterial({vertexShader:document.getElementById(\"vertexShader_tube\").textContent,fragmentShader:document.getElementById(\"fragmentShader_tube\").textContent,uniforms:{lightPosition:{value:new a.Vector3(-20,40,60)},tubeNum:{value:1},shade:{value:!1},texture:{value:t},minmaxH:{value:new a.Vector2(this.data.data.meta.min.H,this.data.data.meta.max.H)},minmaxV:{value:new a.Vector2(this.data.data.meta.min.V,this.data.data.meta.max.V)},flagH:{value:!0},flagV:{value:!0}},side:a.DoubleSide,transparent:!0});this.tube=new a.Mesh(u,l),this.tube.rotateY(Math.PI),this.scene.add(this.tube)}},{key:\"switchCamera\",value:function(){var t=this.camera.position,e=s.default.getCameraProp(this.sourceId);\"Perspective\"===e.type?(this.camera=this.cameraSet.perspective,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)):\"Orthographic\"===e.type&&(this.camera=this.cameraSet.orthographic,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)),this.addControls()}},{key:\"addControls\",value:function(){this.controls=new l.default(this.camera,this.renderer.domElement),this.controls.position0.set(0,0,50),this.controls.screenSpacePanning=!1,this.controls.enableZoom=!1}},{key:\"drawSelectedTube\",value:function(t,e,n){this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.normal.needsUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0,this.tube.geometry.index.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(t),3),this.tube.geometry.attributes.colorData=new a.BufferAttribute(new Float32Array(e),3),this.tube.geometry.attributes.selected=new a.BufferAttribute(new Float32Array(t.length/3),1),this.tube.geometry.attributes.normal=new a.BufferAttribute(new Float32Array(t.length),1),this.tube.geometry.index=new a.BufferAttribute(new Uint32Array(n),1),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}},{key:\"deselectAll\",value:function(){this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.normal.needsUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0,this.tube.geometry.index.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(0),3),this.tube.geometry.attributes.colorData=new a.BufferAttribute(new Float32Array(0),2),this.tube.geometry.attributes.selected=new a.BufferAttribute(new Float32Array(0),1),this.tube.geometry.attributes.normal=new a.BufferAttribute(new Float32Array(0),1),this.tube.geometry.index=new a.BufferAttribute(new Uint32Array(0),1),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}},{key:\"extractTubeAttributes\",value:function(){for(var t=u.default.getTubeAttributes(Number(this.sourceId)),e=Math.ceil(this.selectedPeriod[0]-this.data.data.meta.min.z)*this.division*this.segment,n=Math.ceil(this.selectedPeriod[1]-this.data.data.meta.min.z)*this.division*this.segment,r=t.position.slice(3*e,3*n),i=t.color.slice(3*e,3*n),a=r[2],o=0;o<r.length/3;o++)r[3*o+2]-=a,i[3*o+2]=1;return{pos:r,col:i,indices:t.indices.slice(0,((n-e)/this.segment-1)*(this.segment-1)*3*2)}}},{key:\"updateTimePeriod\",value:function(){var t=this.extractTubeAttributes();this.drawSelectedTube(t.pos,t.col,t.indices)}},{key:\"redrawTube\",value:function(){for(var t=this.ignoredVariables.indexOf(\"x\"),e=this.ignoredVariables.indexOf(\"y\"),n=this.ignoredVariables.indexOf(\"r_x\"),r=this.ignoredVariables.indexOf(\"r_y\"),i=this.ignoredVariables.indexOf(\"H\"),o=this.ignoredVariables.indexOf(\"V\"),s=this.data.data.meta.min.z,u=this.data.data.meta.max.z,l=this.data.data.meta.range,c=(u-s)/(this.division*Math.ceil(u-s)),h=Math.ceil((this.data.data.splines.position.getPoint(1).z-this.data.data.splines.position.getPoint(0).z)/c),f=Math.ceil((this.data.data.splines.color.getPoint(1).z-this.data.data.splines.color.getPoint(0).z)/c),d=this.data.data.splines.position.getSpacedPoints(h),p=this.data.data.splines.radius.getSpacedPoints(h),m=(this.data.data.splines.color.getSpacedPoints(f),2*Math.PI/(this.segment-1)),g=Math.ceil((this.selectedPeriod[0]-s)/c),v=Math.ceil((this.selectedPeriod[1]-s)/c),y=[],b=void 0,_=void 0,x=void 0,w=void 0,S=void 0,E=g;E<=v;E++){_=t>=0?0:d[E].x,x=e>=0?0:d[E].y,w=n>=0?1/l:p[E].x,S=r>=0?1/l:p[E].y;for(var M=0;M<this.segment;M++)b=m*M,y.push(-1*(_*l+w*l*Math.cos(b))),y.push(x*l+S*l*Math.sin(b)),y.push(d[E].z-this.selectedPeriod[0])}this.tube.material.uniforms.flagH.value=!(i>=0),this.tube.material.uniforms.flagV.value=!(o>=0),this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(y),3),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}}]),e}(i.default.Component);e.default=h},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(0)),a=l(n(305)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(18)),s=l(n(15)),u=l(n(3));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r={};t.lookup.forEach((function(t){var e=function(e){r[e]?t[e].forEach((function(t){r[e].indexOf(t)<0&&r[e].push(t)})):r[e]=t[e]};for(var n in t)e(n)}));var i=s.default.getTarget(),a={},o={},l=[],c=[];for(var h in r){l=[],c=[];for(var f=0;f<i.length;f++)l.push(u.default.getData(i[f]).data.meta.min[h]),c.push(u.default.getData(i[f]).data.meta.max[h]);a[h]=l,o[h]=c}return n.state={xItem:t.xItem,yItem:t.yItem,xItemonPanel:t.xItem,yItemonPanel:t.yItem,size:0,lookup:r,selector:\"pen\",popover:!1,assignVariables:!1,targetList:i,minList:a,maxList:o},n.margin={bottom:20,left:20},n.curveSegment=10,n.sketching=!1,n.path=null,n.pathWidth=null,n.pathUpper=null,n.pathLower=null,n.radiuses=null,n.segPoints=[],n.penSizeCircle=null,n.highlightedPoint=null,n.highlightedPointIdx=-1,n.timeStamps=[],n.selectedIdx=-1,n.selectedHandle=null,n.selectedPoint=null,n.controlPoints=[],s.default.on(\"updateTarget\",(function(){var t=s.default.getTarget(),e={},r={},i=[],a=[];for(var o in n.state.lookup){i=[],a=[];for(var l=0;l<t.length;l++)i.push(u.default.getData(t[l]).data.meta.min[o]),a.push(u.default.getData(t[l]).data.meta.max[o]);e[o]=i,r[o]=a}n.setState({targerList:t,minList:e,maxList:r});var c=Math.min.apply(null,e[n.state.xItem]),h=Math.max.apply(null,r[n.state.xItem]),f=Math.min.apply(null,e[n.state.yItem]),d=Math.max.apply(null,r[n.state.yItem]);\"z\"===n.state.xItem&&(h-=c,c=0),\"z\"===n.state.yItem&&(d-=f,f=0),n.updateXAxisValue(c,h),n.updateYAxisValue(f,d)})),n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:\"componentDidMount\",value:function(){this.initCanvas()}},{key:\"formatValue\",value:function(t){return Math.log10(Math.abs(t))<-2&&0!==t?t.toExponential(1):t.toFixed(2)}},{key:\"initCanvas\",value:function(){var t=Number($(\"#featureArea\").css(\"padding-left\").replace(\"px\",\"\")),e=Number($(\"#featureArea\").css(\"padding-right\").replace(\"px\",\"\")),n=Math.floor(.3*$(\"#mainFeatureArea\").width()-t-e);this.setState({size:n});var r=o.select(\"#QBSCanvasArea\").style(\"position\",\"relative\").style(\"padding-bottom\",n+\"px\");this.canvas=r.append(\"canvas\").attr(\"width\",n+\"px !important\").attr(\"height\",n+\"px !important\").attr(\"id\",\"QBSSketchPad\").style(\"position\",\"absolute\").style(\"border\",\"1px solid lightgray\"),a.default.setup(this.canvas.node()),this.xAxis=r.append(\"g\").attr(\"class\",\"x_axis\").style(\"position\",\"absolute\"),this.xAxis.style(\"left\",n/2+\"px\").style(\"top\",n-this.margin.bottom+\"px\"),this.xAxisText=this.xAxis.append(\"text\").attr(\"class\",\"axisLabel\").attr(\"id\",\"sketchPadXLabel\").attr(\"fill\",\"black\").attr(\"text-anchor\",\"middle\").style(\"font-size\",\"0.7rem\").text(this.state.lookup[this.state.xItem]).on(\"click\",this.CanvasXLabelOnClick().bind(this));var i=Math.min.apply(null,this.state.minList[this.state.xItem]),s=Math.max.apply(null,this.state.maxList[this.state.xItem]);\"z\"===this.state.xItem&&(s-=i,i=0),this.xMinValueText=r.append(\"g\").style(\"position\",\"absolute\").attr(\"class\",\"axisLabel\").attr(\"id\",\"sketchPadXMin\").attr(\"text-anchor\",\"left\").style(\"font-size\",\"0.5rem\").style(\"left\",this.margin.left+\"px\").style(\"bottom\",\"0.5rem\").text(this.formatValue(i)),this.xMaxValueText=r.append(\"g\").style(\"position\",\"absolute\").attr(\"class\",\"axisLabel\").attr(\"id\",\"sketchPadXMax\").attr(\"text-anchor\",\"right\").style(\"font-size\",\"0.5rem\").style(\"right\",this.margin.left+\"px\").style(\"bottom\",\"0.5rem\").text(this.formatValue(s)),this.yAxis=r.append(\"g\").attr(\"class\",\"y_axis\").style(\"position\",\"absolute\"),this.yAxis.style(\"left\",this.margin.left/2+\"px\").style(\"top\",n/2+\"px\"),this.yAxisText=this.yAxis.append(\"text\").attr(\"class\",\"axisLabel\").attr(\"fill\",\"black\").attr(\"transform\",\"rotate(-90)\").attr(\"text-anchor\",\"middle\").style(\"font-size\",\"0.7rem\").text(this.state.lookup[this.state.yItem]).on(\"click\",this.CanvasYLabelOnClick().bind(this));var u=Math.min.apply(null,this.state.minList[this.state.yItem]),l=Math.max.apply(null,this.state.maxList[this.state.yItem]);\"z\"===this.state.yItem&&(l-=Min,u=0),this.yMinValueText=r.append(\"g\").style(\"position\",\"absolute\").attr(\"class\",\"axisLabel\").attr(\"id\",\"sketchPadYMin\").attr(\"text-anchor\",\"left\").style(\"font-size\",\"0.5rem\").style(\"left\",this.margin.left/2+\"px\").style(\"bottom\",\"1rem\").text(this.formatValue(u)),this.yMaxValueText=r.append(\"g\").style(\"position\",\"absolute\").attr(\"class\",\"axisLabel\").attr(\"id\",\"sketchPadYMax\").attr(\"text-anchor\",\"right\").style(\"font-size\",\"0.5rem\").style(\"left\",this.margin.left/2+\"px\").style(\"top\",\"0.5rem\").text(this.formatValue(l)),this.tool=new a.default.Tool,this.tool.minDistance=15,this.tool.onMouseDown=this.CanvasOnMouseDown().bind(this),this.tool.onMouseDrag=this.CanvasOnMouseDrag().bind(this),this.tool.onMouseUp=this.CanvasOnMouseUp().bind(this),a.default.view.onFrame=this.CanvasOnFrame().bind(this)}},{key:\"CanvasOnFrame\",value:function(){return function(t){if(this.sketching&&this.penSizeCircle){var e=this.penSizeCircle.position,n=(Date.now()-this.timeStamps[this.timeStamps.length-1])/1e3*30+2.5;this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(e,n),this.penSizeCircle.strokeColor=\"#325D88\"}}}},{key:\"CanvasOnMouseDown\",value:function(){return function(t){var e=void 0;if(this.state.assignVariables){if(e=null,e=this.path.hitTest(t.point,{segments:!0,tolerance:5})){this.highlightedPointIdx=e.segment.index,this.highlightedPoint&&this.highlightedPoint.remove(),this.highlightedPoint=new a.default.Path.Circle({center:e.point,radius:5,fillColor:\"#d23430\"}),this.setState({popover:!0});var n=$(\"#controlPointPopover\"),r=$(\"#controlPointPopoverArrow\"),i=n.width()+8,o=n.height()+8,s=null,u=void 0,l={},c=this.state.size-e.point.x,h=e.point.x,f=e.point.y,d=this.state.size-e.point.y;for(var p in c>=i?(s=\"right\",n.attr(\"class\",\"popover bs-popover-\"+s),i=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x,y:e.point.y-o/2},l={top:o/2-16+\"px\"}):h>=i?(s=\"left\",n.attr(\"class\",\"popover bs-popover-\"+s),i=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-i,y:e.point.y-o/2},l={top:o/2-16+\"px\"}):f>=o?(s=\"top\",n.attr(\"class\",\"popover bs-popover-\"+s),i=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-i/2,y:e.point.y-o},l={left:i/2-16+\"px\"}):d>=o&&(s=\"bottom\",n.attr(\"class\",\"popover bs-popover-\"+s),i=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-i/2,y:e.point.y},l={left:i/2-16+\"px\"}),u.x<0?(u.x=0,l={left:e.point.x-16+\"px\"}):u.x>this.state.size-i&&(u.x=this.state.size-i,l={left:this.state.size-e.point.x-16+\"px\"}),u.y<0?(u.y=0,l={top:e.point.y-16+\"px\"}):u.y>this.state.size-o&&(u.y=this.state.size-o,l={top:o-(this.state.size-e.point.y)-16+\"px\"}),n.css({left:u.x+\"px\",top:u.y+\"px\"}),r.css({top:\"\",left:\"\"}),r.css(l),this.controlPoints[this.highlightedPointIdx].assignedVariables)if(this.controlPoints[this.highlightedPointIdx].assignedVariables[p].length<=0)$(\"#valueAssignmentCheckbox_\"+p).prop(\"checked\",!1),$(\"#slider_\"+p).slider(\"option\",\"values\",[0,0]),$(\"#slider_\"+p).slider(\"option\",\"disabled\",!0);else{$(\"#valueAssignmentCheckbox_\"+p).prop(\"checked\",!0);var m=Math.min.apply(null,this.state.minList[p]),g=Math.max.apply(null,this.state.maxList[p]);$(\"#slider_\"+p).slider(\"option\",\"values\",[(this.controlPoints[this.highlightedPointIdx].assignedVariables[p][0]-m)/(g-m)*100,(this.controlPoints[this.highlightedPointIdx].assignedVariables[p][1]-m)/(g-m)*100]),$(\"#slider_\"+p).slider(\"option\",\"disabled\",!1)}}}else switch(this.state.selector){case\"pen\":this.sketching=!0,this.path&&this.path.remove(),this.pathWidth&&this.pathWidth.remove(),this.penSizeCircle&&this.penSizeCircle.remove();for(var v=0;v<this.controlPoints.length;v++)this.controlPoints[v].label&&this.controlPoints[v].label.remove();this.controlPoints=[],this.timeStamps=[],this.radiuses=[],this.radiuses.push(0),this.pathWidth=new a.default.Path({segments:[t.point],strokeColor:\"#325D88\",strokeWidth:1,fillColor:\"#29ABE0\",opacity:.5}),this.path=new a.default.Path({segments:[t.point],strokeColor:\"black\",strokeWidth:5}),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor=\"#325D88\",this.timeStamps.push(Date.now());break;case\"addPoint\":if(e=null,e=this.path.hitTest(t.point,{fill:!0,stroke:!0,tolerance:5})){var y=e.location.curve,b=y.length;for(var _ in this.path.insert(y.segment2.index,e.point),this.controlPoints.splice(y.segment2.index,0,{position:{x:e.point.x,y:e.point.x},assignedVariables:{},label:null}),this.state.lookup)this.controlPoints[y.segment2.index].assignedVariables[_]=[];this.path.getOffsetOf(e.point);for(var x=0;x<y.segment1.index;x++)this.path.curves[x].length;var w=this.radiuses[y.segment1.index],S=(this.radiuses[y.segment2.index]-w)*y.length/b+w;this.radiuses.splice(y.segment2.index,0,S),this.pathWidth.remove(),this.drawPathWidth()}break;case\"eraser\":e=null,e=this.path.hitTest(t.point,{segments:!0,tolerance:5}),hitResultWidth=null,hitResultWidth=this.pathWidth.hitTest(t.point,{segments:!0,tolerance:5}),e&&(this.path.removeSegment(e.segment.index),this.controlPoints.splice(e.segment.index,1),this.radiuses.splice(e.segment.index,1),this.pathWidth.remove(),this.drawPathWidth());break;case\"controlPoint\":this.tool.minDistance=1,this.selectedIdx=-1,this.selectedHandle=null,this.selectedPoint=null,e=null,(e=this.path.hitTest(t.point,{handles:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,\"handle-in\"===e.type?this.selectedHandle=e.segment.handleIn:\"handle-out\"===e.type&&(this.selectedHandle=e.segment.handleOut)),null==this.selectedHandle&&(e=this.path.hitTest(t.point,{segments:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,this.selectedPoint=e.segment);break;case\"changeWidth\":this.tool.minDistance=1,this.selectedIdx=-1,this.selectedPoint=null,e=null,(e=this.path.hitTest(t.point,{segments:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,this.selectedPoint=e.segment)}}}},{key:\"CanvasOnMouseDrag\",value:function(){return function(t){if(!this.state.assignVariables)switch(this.state.selector){case\"pen\":this.path.add(t.point);var e=Date.now(),n=e-this.timeStamps[this.timeStamps.length-1];this.timeStamps.push(e);var r=n/1e3*30+2.5,i=t.delta.x,o=t.delta.y,s=Math.sqrt(i*i+o*o),u=t.delta;u.angle+=90;var l={x:t.middlePoint.x+r/s*u.x,y:t.middlePoint.y+r/s*u.y},c={x:t.middlePoint.x-r/s*u.x,y:t.middlePoint.y-r/s*u.y};this.pathWidth.add(l),this.pathWidth.insert(0,c),this.pathWidth.smooth(),this.radiuses.push(r),this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor=\"#325D88\";break;case\"controlPoint\":if(this.selectedHandle&&(this.selectedHandle.x+=t.delta.x,this.selectedHandle.y+=t.delta.y),this.selectedPoint&&(this.selectedPoint.point.x+=t.delta.x,this.selectedPoint.point.y+=t.delta.y,this.controlPoints[this.selectedIdx].position={x:this.selectedPoint.point.x+t.delta.x,y:this.selectedPoint.point.y+t.delta.y}),this.selectedIdx>0&&this.selectedIdx<this.path.segments.length-1){for(var h=0,f=0;f<this.selectedIdx-1;f++)h+=this.path.curves[f].length;for(var d=this.radiuses[this.selectedIdx-1],p=this.radiuses[this.selectedIdx],m=this.radiuses[this.selectedIdx+1],g=this.path.curves[this.selectedIdx-1].length,v=1;v<this.curveSegment;v++){var y=(p-d)*v/this.curveSegment+d,b=this.path.getPointAt(h+g/this.curveSegment*v),_=void 0,x=(this.selectedIdx-1)*this.curveSegment+v,w=this.segPoints[x-1];_=new a.default.Point(b.x-w.x,b.y-w.y);var S=Math.sqrt(_.x*_.x+_.y*_.y);_.angle+=90,this.segPoints[x]=b,this.pathUpper[x]={x:b.x+y/S*_.x,y:b.y+y/S*_.y},this.pathLower[x]={x:b.x-y/S*_.x,y:b.y-y/S*_.y}}h+=g,g=this.path.curves[this.selectedIdx].length;for(var E=0;E<this.curveSegment;E++){var M=(m-p)*E/this.curveSegment+p,T=this.path.getPointAt(h+g/this.curveSegment*E),C=void 0,P=this.selectedIdx*this.curveSegment+E,k=this.segPoints[P-1];C=new a.default.Point(T.x-k.x,T.y-k.y);var A=Math.sqrt(C.x*C.x+C.y*C.y);C.angle+=90,this.segPoints[P]=T,this.pathUpper[P]={x:T.x+M/A*C.x,y:T.y+M/A*C.y},this.pathLower[P]={x:T.x-M/A*C.x,y:T.y-M/A*C.y}}}else if(0===this.selectedIdx)for(var O=this.radiuses[0],L=this.radiuses[1],I=this.path.curves[0].length,N=0;N<this.curveSegment;N++){var R=(L-O)*N/this.curveSegment+O,D=this.path.getPointAt(I/this.curveSegment*N),z=void 0;if(0===N)z=new a.default.Point(this.path.segments[0].handleOut.x,this.path.segments[0].handleOut.y);else{var B=this.segPoints[N-1];z=new a.default.Point(D.x-B.x,D.y-B.y)}var F=Math.sqrt(z.x*z.x+z.y*z.y);z.angle+=90,this.segPoints[N]=D,this.pathUpper[N]={x:D.x+R/F*z.x,y:D.y+R/F*z.y},this.pathLower[N]={x:D.x-R/F*z.x,y:D.y-R/F*z.y}}else if(this.selectedIdx===this.path.segments.length-1){for(var j=0,U=0;U<this.selectedIdx-1;U++)j+=this.path.curves[U].length;for(var V=this.radiuses[this.selectedIdx-1],H=this.radiuses[this.selectedIdx],G=this.path.curves[this.selectedIdx-1].length,W=1;W<=this.curveSegment;W++){var q=(H-V)*W/this.curveSegment+V,X=void 0;X=W!==this.curveSegment?this.path.getPointAt(j+G/this.curveSegment*W):this.path.segments[this.path.segments.length-1].point;var Y=void 0,Q=(this.selectedIdx-1)*this.curveSegment+W,Z=this.segPoints[Q-1];Y=new a.default.Point(X.x-Z.x,X.y-Z.y);var $=Math.sqrt(Y.x*Y.x+Y.y*Y.y);Y.angle+=90,this.segPoints[Q]=X,this.pathUpper[Q]={x:X.x+q/$*Y.x,y:X.y+q/$*Y.y},this.pathLower[Q]={x:X.x-q/$*Y.x,y:X.y-q/$*Y.y}}}var J=this.pathLower.slice().reverse(),K=this.pathUpper.concat(J);this.pathWidth.remove(),this.pathWidth=new a.default.Path({segments:K,strokeColor:\"#325D88\",strokeWidth:1,fillColor:\"#29ABE0\",opacity:.5,closed:!0}),this.pathWidth.smooth(),this.pathWidth.sendToBack();break;case\"changeWidth\":if(this.selectedPoint){var tt=t.point.x-this.selectedPoint.point.x,et=t.point.y-this.selectedPoint.point.y,nt=Math.sqrt(tt*tt+et*et);this.penSizeCircle&&this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(this.selectedPoint.point,nt),this.penSizeCircle.strokeColor=\"#325D88\"}}}}},{key:\"CanvasOnMouseUp\",value:function(){return function(t){if(!this.state.assignVariables){switch(this.state.selector){case\"pen\":this.path.add(t.point);var e=this.path.segments.slice(0,this.path.segments.length);e[e.length-2].point.x>e[e.length-1].point.x&&!0,this.path.simplify(10),this.path.segments.forEach(function(t){for(var e in this.controlPoints.push({position:{x:t.point.x,y:t.point.y},assignedVariables:{},label:null}),this.state.lookup)this.controlPoints[this.controlPoints.length-1].assignedVariables[e]=[]}.bind(this));var n=Date.now(),r=n-this.timeStamps[this.timeStamps.length-1];this.timeStamps.push(n);var i=r/1e3*30+2.5;this.radiuses.push(i),this.pathWidth.remove();var a=e.length/this.path.segments.length;a=Math.floor(a)%2==1?Math.floor(a):Math.ceil(a);for(var o=0,s=0,u=[];o<e.length&&s<this.path.segments.length;)if(e[o].point.x!==this.path.segments[s].point.x||e[o].point.y!==this.path.segments[s].point.y)o++;else{var l=0,c=0,h=o-Math.floor(a/2),f=o+Math.floor(a/2);h=Math.max(0,h),f=Math.min(e.length-1,f);for(var d=h;d<=f;d++)l+=this.radiuses[d],c++;l/=c,u.push(l),o++,s++}this.radiuses=u,this.drawPathWidth(),this.penSizeCircle.remove(),this.penSizeCircle=null,this.sketching=!1;break;case\"controlPoint\":this.selectedHandle=null,this.selectedPoint=null;break;case\"changeWidth\":var p=this.penSizeCircle.segments[0].point.x-this.selectedPoint.point.x,m=this.penSizeCircle.segments[0].point.y-this.selectedPoint.point.y,g=Math.sqrt(p*p+m*m);this.radiuses[this.selectedIdx]=g,this.selectedHandle=null,this.selectedPoint=null,this.selectedIdx=-1,this.pathWidth.remove(),this.drawPathWidth(),this.penSizeCircle.remove()}this.tool.minDistance=15}}}},{key:\"drawPathWidth\",value:function(){this.segPoints=[];for(var t=[],e=[],n=0,r=0;r<this.path.curves.length;r++){for(var i=this.radiuses[r],o=this.radiuses[r+1],s=this.path.curves[r].length,u=0;u<this.curveSegment;u++){var l=(o-i)*u/this.curveSegment+i,c=this.path.getPointAt(n+s/this.curveSegment*u),h=void 0;if(0===u&&0!==this.path.segments[r].handleOut.x&&0!==this.path.segments[r].handleOut.y)h=new a.default.Point(this.path.segments[r].handleOut.x,this.path.segments[r].handleOut.y);else{var f=this.segPoints[this.segPoints.length-1];h=new a.default.Point(c.x-f.x,c.y-f.y)}var d=Math.sqrt(h.x*h.x+h.y*h.y);h.angle+=90,this.segPoints.push(c),t.push({x:c.x+l/d*h.x,y:c.y+l/d*h.y}),e.push({x:c.x-l/d*h.x,y:c.y-l/d*h.y})}n+=s}var p=this.radiuses[this.radiuses.length-1],m=this.path.segments[this.path.segments.length-1].point,g=this.segPoints[this.segPoints.length-1],v=new a.default.Point(m.x-g.x,m.y-g.y),y=Math.sqrt(v.x*v.x+v.y*v.y);v.angle+=90,this.segPoints.push(m),t.push({x:m.x+p/y*v.x,y:m.y+p/y*v.y}),e.push({x:m.x-p/y*v.x,y:m.y-p/y*v.y}),this.pathUpper=t,this.pathLower=e;var b=e.slice().reverse(),_=t.concat(b);this.pathWidth=new a.default.Path({segments:_,strokeColor:\"#325D88\",strokeWidth:1,fillColor:\"#29ABE0\",opacity:.5,closed:!0}),this.pathWidth.smooth(),this.pathWidth.sendToBack()}},{key:\"CanvasXLabelOnClick\",value:function(){return function(){var t=this.state.xItemonPanel,e=Math.min.apply(null,this.state.minList[t]),n=Math.max.apply(null,this.state.maxList[t]);\"z\"===t&&(n-=e,e=0),this.setValueSlider(\"sketchPadXRangeSlider\",e,n),$(\"#sketchPadXRangeSlider\").slider(\"option\",\"disabled\",!1);var r=o.select(\"#changeXAxisPanel_SketchPad\");if(\"visible\"===r.style(\"visibility\"))r.transition().duration(50).style(\"visibility\",\"hidden\"),this.setState({xItemonPanel:this.state.xItem});else{var i=document.getElementById(\"changeXAxisPanel_SketchPad\").clientHeight,a=document.getElementById(\"changeXAxisPanel_SketchPad\").clientWidth;r.style(\"transform\",\"translate(\"+(this.state.size/2-a/2)+\"px,\"+(this.state.size-i-this.margin.bottom)+\"px)\").style(\"visibility\",\"visible\")}}}},{key:\"CanvasYLabelOnClick\",value:function(){return function(){var t=this.state.yItemonPanel,e=Math.min.apply(null,this.state.minList[t]),n=Math.max.apply(null,this.state.maxList[t]);\"z\"===t&&(n-=e,e=0),this.setValueSlider(\"sketchPadYRangeSlider\",e,n),$(\"#sketchPadYRangeSlider\").slider(\"option\",\"disabled\",!1);var r=o.select(\"#changeYAxisPanel_SketchPad\");if(\"visible\"===r.style(\"visibility\"))r.transition().duration(50).style(\"visibility\",\"hidden\"),this.setState({xItemonPanel:this.state.xItem});else{var i=document.getElementById(\"changeYAxisPanel_SketchPad\").clientHeight;document.getElementById(\"changeYAxisPanel_SketchPad\").clientWidth;r.style(\"transform\",\"translate(\"+(this.margin.left+10)+\"px,\"+(this.state.size/2-i/2)+\"px)\").style(\"visibility\",\"visible\")}}}},{key:\"onSelectXItem\",value:function(t){var e=t.target.value;this.setState({xItemonPanel:e}),this.setValueSlider(\"sketchPadXRangeSlider\",Math.min.apply(null,this.state.minList[e]),Math.max.apply(null,this.state.maxList[e]))}},{key:\"onSelectYItem\",value:function(t){var e=t.target.value;this.setState({yItemonPanel:e}),this.setValueSlider(\"sketchPadYRangeSlider\",Math.min.apply(null,this.state.minList[e]),Math.max.apply(null,this.state.maxList[e]))}},{key:\"updateXAxisValue\",value:function(t,e){this.xMinValueText&&this.xMinValueText.text(this.formatValue(t)),this.xMaxValueText&&this.xMaxValueText.text(this.formatValue(e))}},{key:\"updateYAxisValue\",value:function(t,e){this.yMinValueText&&this.yMinValueText.text(this.formatValue(t)),this.yMaxValueText&&this.yMaxValueText.text(this.formatValue(e))}},{key:\"changeXAxis\",value:function(){this.setState({xItem:this.state.xItemonPanel}),this.xAxisText&&this.xAxisText.text(this.state.lookup[this.state.xItemonPanel]);var t=Math.min.apply(null,this.state.minList[this.state.xItemonPanel]),e=Math.max.apply(null,this.state.maxList[this.state.xItemonPanel]);\"z\"===this.state.xItemonPanel&&(e-=t,t=0);var n=$(\"#sketchPadXRangeSlider\").slider(\"option\",\"values\"),r=n[0]/100*(e-t)+t,i=n[1]/100*(e-t)+t;this.updateXAxisValue(r,i),o.select(\"#changeXAxisPanel_SketchPad\").transition().duration(50).style(\"visibility\",\"hidden\")}},{key:\"changeYAxis\",value:function(){this.setState({yItem:this.state.yItemonPanel}),this.yAxisText&&this.yAxisText.text(this.state.lookup[this.state.yItemonPanel]);var t=Math.min.apply(null,this.state.minList[this.state.yItemonPanel]),e=Math.max.apply(null,this.state.maxList[this.state.yItemonPanel]);\"z\"===this.state.yItemonPanel&&(e-=t,t=0);var n=$(\"#sketchPadYRangeSlider\").slider(\"option\",\"values\"),r=n[0]/100*(e-t)+t,i=n[1]/100*(e-t)+t;this.updateYAxisValue(r,i),o.select(\"#changeYAxisPanel_SketchPad\").transition().duration(50).style(\"visibility\",\"hidden\")}},{key:\"switchSelector\",value:function(){var t=$(\"input[name=QBSSelector]:checked\").val();this.setState({selector:t}),this.updateSelectedStatus(t)}},{key:\"switchVariableAssignment\",value:function(){var t=!this.state.assignVariables;this.setState({assignVariables:t}),t&&this.path?(this.path.fullySelected=!0,this.pathWidth&&(this.pathWidth.fullySelected=!1)):t||(this.setState({popover:!1}),this.highlightedPoint&&this.highlightedPoint.remove(),this.updateSelectedStatus(this.state.selector))}},{key:\"updateSelectedStatus\",value:function(t){\"addPoint\"===t||\"eraser\"===t?this.path&&(this.path.fullySelected=!0):\"controlPoint\"===t?(this.path&&(this.path.fullySelected=!0),this.pathWidth&&(this.pathWidth.fullySelected=!1)):\"changeWidth\"===t?(this.path&&(this.path.fullySelected=!0),this.pathWidth&&(this.pathWidth.fullySelected=!1)):\"pen\"===t&&(this.path&&(this.path.fullySelected=!1),this.pathWidth&&(this.pathWidth.fullySelected=!1))}},{key:\"removeAllAsignment\",value:function(){for(var t=0;t<this.controlPoints.length;t++){for(var e in this.controlPoints[t].assignedVariables)this.controlPoints[t].assignedVariables[e]=[];this.controlPoints[t].label&&(this.controlPoints[t].label.remove(),this.controlPoints[t].label=null)}}},{key:\"selectControlPoint\",value:function(){this.setState({popover:!this.state.popover})}},{key:\"axisSelectionPanel\",value:function(){var t=[],e=[];for(var n in this.state.lookup){var r=\"\";(r=this.state.lookup[n].length>1?this.state.lookup[n].join(\",\"):this.state.lookup[n]).indexOf(\"JD\")<0?(t.push(i.default.createElement(\"div\",{className:\"form-check\",key:r,style:{paddingLeft:\"0px\"}},i.default.createElement(\"input\",{type:\"radio\",name:\"selectXAxis_SketchPad\",value:n,checked:this.state.xItemonPanel===n,onChange:this.onSelectXItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",key:r},r))),e.push(i.default.createElement(\"div\",{className:\"form-check\",key:r,style:{paddingLeft:\"0px\"}},i.default.createElement(\"input\",{type:\"radio\",name:\"selectYAxis_SketchPad\",value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",key:r},r)))):(t.unshift(i.default.createElement(\"div\",{className:\"form-check\",key:r,style:{paddingLeft:\"0px\"}},i.default.createElement(\"input\",{type:\"radio\",name:\"selectXAxis_SketchPad\",value:n,checked:this.state.xItemonPanel===n,onChange:this.onSelectXItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",key:r},r))),e.unshift(i.default.createElement(\"div\",{className:\"form-check\",key:r,style:{paddingLeft:\"0px\"}},i.default.createElement(\"input\",{type:\"radio\",name:\"selectYAxis_SketchPad\",value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),i.default.createElement(\"label\",{className:\"form-check-label\",key:r},r))))}return{x:i.default.createElement(\"div\",{className:\"overlayPanel\",id:\"changeXAxisPanel_SketchPad\",style:{visibility:\"hidden\",textAlign:\"center\",zIndex:\"101\"}},i.default.createElement(\"h6\",null,\"Change x axis\"),i.default.createElement(\"div\",{id:\"changeXAxisItem_SketchPad\",style:{textAlign:\"left\"}},i.default.createElement(\"form\",{id:\"changeXAxisForm_SketchPad\"},t),i.default.createElement(\"div\",{className:\"featureElem\",id:\"sketchPadXRangeSlider\",style:{width:\"150px\"}},i.default.createElement(\"output\",{id:\"sketchPadXRangeSliderMax\",style:{bottom:\"1.3rem\",zIndex:200}}),i.default.createElement(\"output\",{id:\"sketchPadXRangeSliderMin\",style:{bottom:\"1.3rem\",zIndex:201}})),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",id:\"changeXAxisBtn_SketchPad\",style:{float:\"right\"},onClick:this.changeXAxis.bind(this)},\"Done\"))),y:i.default.createElement(\"div\",{className:\"overlayPanel\",id:\"changeYAxisPanel_SketchPad\",style:{visibility:\"hidden\",textAlign:\"center\",zIndex:\"102\"}},i.default.createElement(\"h6\",null,\"Change y axis\"),i.default.createElement(\"div\",{id:\"changeYAxisItem_SketchPad\",style:{textAlign:\"left\"}},i.default.createElement(\"form\",{id:\"changeYAxisForm_SketchPad\"},e)),i.default.createElement(\"div\",{className:\"featureElem\",id:\"sketchPadYRangeSlider\",style:{width:\"150px\"}},i.default.createElement(\"output\",{id:\"sketchPadYRangeSliderMax\",style:{bottom:\"1.3rem\",zIndex:200}}),i.default.createElement(\"output\",{id:\"sketchPadYRangeSliderMin\",style:{bottom:\"1.3rem\",zIndex:201}})),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",id:\"changeXAxisBtn_SketchPad\",style:{float:\"right\"},onClick:this.changeYAxis.bind(this)},\"Done\"))}}},{key:\"sketchMenu\",value:function(){return i.default.createElement(\"div\",{id:\"QBSSelectorMenu\",className:\"featureElem\"},i.default.createElement(\"h5\",null,\"Selection\"),i.default.createElement(\"form\",{className:\"selector featureRow\",onChange:this.switchSelector.bind(this)},i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"QBSSelector\",value:\"pen\",checked:\"pen\"===this.state.selector,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"pen\"},\"Pen\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"QBSSelector\",value:\"addPoint\",checked:\"addPoint\"===this.state.selector,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"addPoint\"},\"Add points\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"QBSSelector\",value:\"eraser\",checked:\"eraser\"===this.state.selector,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"eraser\"},\"Eraser\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"QBSSelector\",value:\"controlPoint\",checked:\"controlPoint\"===this.state.selector,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"controlPoint\"},\"Control point\")),i.default.createElement(\"div\",{className:\"form-check form-check-inline\"},i.default.createElement(\"input\",{type:\"radio\",name:\"QBSSelector\",value:\"changeWidth\",checked:\"changeWidth\"===this.state.selector,readOnly:!0}),i.default.createElement(\"label\",{className:\"form-check-label\",htmlFor:\"changeWidth\"},\"Change width\"))))}},{key:\"sketchOptions\",value:function(){return i.default.createElement(\"div\",{id:\"QBSSketchOptions\",className:\"featureElem\"},i.default.createElement(\"h5\",null,\"Options\"),this.assignVariables())}},{key:\"assignVariables\",value:function(){return i.default.createElement(\"div\",{id:\"variableAssignment\"},i.default.createElement(\"h6\",null,\"Assign variables to the sketch\"),i.default.createElement(\"div\",{className:\"form-group\"},i.default.createElement(\"div\",{className:\"custom-control custom-switch\"},i.default.createElement(\"input\",{type:\"checkbox\",className:\"custom-control-input\",id:\"variableAssignmentSwitch\",onChange:this.switchVariableAssignment.bind(this),checked:this.state.assignVariables}),i.default.createElement(\"label\",{className:\"custom-control-label\",htmlFor:\"variableAssignmentSwitch\"},\"Assign variables\")),i.default.createElement(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",id:\"removeAllAssignment\",onClick:this.removeAllAsignment.bind(this)},\"Remove all assignment\")))}},{key:\"onClickValueAssignmentCheckbox\",value:function(t){var e=t.target.value,n=t.target.checked;$(\"#slider_\"+e).slider(\"option\",\"disabled\",!n)}},{key:\"onClickValueAssignmentDone\",value:function(){this.setState({popover:!1});for(var t=$(\"input[name=assignedVariableList]:checked\"),e=\"\",n=(this.controlPoints[this.highlightedPointIdx].assignedVariables,0);n<t.length;n++){var r=t[n].value,i=Math.min.apply(null,this.state.minList[r]),o=Math.max.apply(null,this.state.maxList[r]),s=$(\"#slider_\"+t[n].value).slider(\"option\",\"values\");this.controlPoints[this.highlightedPointIdx].assignedVariables[r]=[i+(o-i)*s[0]/100,i+(o-i)*s[1]/100],e+=this.state.lookup[r]+\", \"}this.controlPoints[this.highlightedPointIdx].label&&this.controlPoints[this.highlightedPointIdx].label.remove(),this.controlPoints[this.highlightedPointIdx].label=new a.default.PointText({position:{x:this.controlPoints[this.highlightedPointIdx].position.x,y:this.controlPoints[this.highlightedPointIdx].position.y-10},fillColor:\"#7b7971\",justification:\"center\",fontSize:8}),e=e.slice(0,-2),this.controlPoints[this.highlightedPointIdx].label.content=e}},{key:\"setValueSlider\",value:function(t,e,n){var r=$(\"#\"+t),i=$(\"#\"+t+\"Min\"),a=$(\"#\"+t+\"Max\");t.slice(\"_\")[1];r.slider({range:!0,disabled:!0,//!$('#valueAssignmentCheckbox_' + key).prop('checked'),\nmin:0,max:100,values:[0,100],slide:function(t,r){i.css(\"display\",\"initial\"),a.css(\"display\",\"initial\");var o=r.values[0]/100*(n-e)+e,s=r.values[1]/100*(n-e)+e;i.val(this.formatValue(o)),a.val(this.formatValue(s));var u=150*r.values[0]/100-8,l=142-150*r.values[1]/100;i.css(\"left\",u+\"px\"),a.css(\"right\",l+\"px\")}.bind(this),stop:function(){i.css(\"display\",\"none\"),a.css(\"display\",\"none\")}}),i.val(r.slider(\"values\",0)),a.val(r.slider(\"values\",1))}},{key:\"controlPointPopover\",value:function(){var t=0,e=[];for(var n in this.state.lookup){var r=\"\";if((r=this.state.lookup[n].length>1?this.state.lookup[n].join(\",\"):this.state.lookup[n][0]).indexOf(\"JD\")<0){var a=\"slider_\"+n;e.push(i.default.createElement(\"div\",{id:\"assignVariable_\"+n,className:\"row align-items-center\",key:r},i.default.createElement(\"div\",{className:\"form-check col-4\",style:{paddingLeft:\"0px\"},onChange:this.onClickValueAssignmentCheckbox.bind(this)},i.default.createElement(\"input\",{type:\"checkbox\",id:\"valueAssignmentCheckbox_\"+n,name:\"assignedVariableList\",value:n}),i.default.createElement(\"label\",{className:\"form-check-label\",key:r},r)),i.default.createElement(\"div\",{className:\"col\",id:a,style:{width:\"150px\"}},i.default.createElement(\"output\",{id:a+\"Max\",style:{bottom:\"1.3rem\",zIndex:100+t}}),i.default.createElement(\"output\",{id:a+\"Min\",style:{bottom:\"1.3rem\",zIndex:150+t}})))),this.setValueSlider(a,Math.min.apply(null,this.state.minList[n]),Math.max.apply(null,this.state.maxList[n]))}t++}return i.default.createElement(\"div\",{id:\"controlPointPopover\",className:\"popover\",style:{position:\"absolute\",opacity:\"0.85\",display:this.state.popover?\"block\":\"none\",padding:\"0.5rem 0.8rem\"}},i.default.createElement(\"div\",{id:\"controlPointPopoverArrow\",className:\"arrow\"}),i.default.createElement(\"form\",{className:\"container\",name:\"assignVariablesForm\",style:{paddingRight:\"0px\",paddingLeft:\"0px\",marginBottom:\"0.2rem\"}},e),i.default.createElement(\"button\",{className:\"btn btn-primary btn-sm\",id:\"valueAssignmentDoneBtn\",style:{float:\"right\"},onClick:this.onClickValueAssignmentDone.bind(this)},\"Done\"))}},{key:\"render\",value:function(){var t=this.axisSelectionPanel();return i.default.createElement(\"div\",{id:\"QBSQuerying\"},i.default.createElement(\"div\",{id:\"QBSCanvasArea\"},t.x,t.y,this.controlPointPopover()),i.default.createElement(\"div\",{id:\"QBSSketchMenuArea\"},this.sketchMenu(),this.sketchOptions()))}}]),e}(i.default.Component);e.default=c},function(t,e,n){var r,i,a;(function(o,s){var u=(o=o||n(306)).window,l=o.document,c=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],n=e.slice,r=Object.create,i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=e.forEach||function(t,e){for(var n=0,r=this.length;n<r;n++)t.call(e,this[n],n,this)},u=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},l=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},c=function(t,e,n){if(t){var r=i(t,\"length\");(r&&\"number\"==typeof r.value?o:u).call(t,e,n=n||t)}return n};function h(e,n,r,o,s){var u={};function l(t,l){\"string\"==typeof(l=l||(l=i(n,t))&&(l.get?l:l.value))&&\"#\"===l[0]&&(l=e[l.substring(1)]||l);var c,h=\"function\"==typeof l,d=l,p=s||h&&!l.base?l&&l.get?t in e:e[t]:null;s&&p||(h&&p&&(l.base=p),h&&!1!==o&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),d&&!h&&d.get&&\"function\"==typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(i(e,t)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!c),a(e,t,d))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&l(c);for(var c in u){var h=u[c],d=e[\"set\"+h],p=e[\"get\"+h]||d&&e[\"is\"+h];!p||!0!==o&&0!==p.length||l(c,{get:p,set:d})}}return e}function f(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n)}return this}return h(f,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,r=t.preserve;e!==t&&h(this.prototype,t,t.enumerable,n,r),h(this,e,null,n,r)}for(var i=1,a=arguments.length;i<a;i++)this.inject(arguments[i]);return this},extend:function(){for(var t,e,n,i=this,o=0,s=arguments.length;o<s&&(!t||!e);o++)n=arguments[o],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){i.apply(this,arguments)}).prototype=e||r(this.prototype),a(e,\"constructor\",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:c,create:r,define:a,describe:i,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===f||\"Object\"===e.name)},pick:function(t,e){return t!==s?t:e},slice:function(t,e,r){return n.call(t,e,r)}}})};t.exports=c,c.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||\"Object\")+(this._name?\" '\"+this._name+\"'\":\" @\"+this._id):\"{ \"+c.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+\": \"+(\"number\"===n?p.instance.number(t):\"string\"===n?\"'\"+t+\"'\":t))}}),[]).join(\", \")+\" }\"},getClassName:function(){return this._class||\"\"},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&\"object\"==typeof t&&\"object\"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var n,r=Object.keys(t);if((n=r.length)!==Object.keys(e).length)return!1;for(;n--;){var i=r[n];if(!e.hasOwnProperty(i)||!c.equals(t[i],e[i]))return!1}}return!0}return!1},read:function(t,e,n,r){if(this===c){var i=this.peek(t,e);return t.__index++,i}var a=this.prototype,o=a._readIndex,u=e||o&&t.__index||0,l=t.length,h=t[u];if(r=r||l-u,h instanceof this||n&&n.readNull&&null==h&&r<=1)return o&&(t.__index=u+1),h&&n&&n.clone?h.clone():h;if(h=c.create(a),o&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+r<l?c.slice(t,u,u+r):t)||h,o){t.__index=u+h.__read;var f=h.__filtered;f&&(t.__filtered=f,h.__filtered=s),h.__read=s}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,r){for(var i,a=[],o=e||0,s=r?o+r:t.length,u=o;u<s;u++)a.push(Array.isArray(i=t[u])?this.read(i,0,n):this.read(t,u,n,1));return a},readNamed:function(t,e,n,r,i){var a=this.getNamed(t,e),o=a!==s;if(o){var u=t.__filtered;u||((u=t.__filtered=c.create(t[0])).__unfiltered=t[0]),u[e]=s}var l=o?[a]:t;return this.read(l,n,r,i)},getNamed:function(t,e){var n=t[0];if(t._hasObject===s&&(t._hasObject=1===t.length&&c.isPlainObject(n)),t._hasObject)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,r){var i;function a(r){if(!(n&&r in n||i&&r in i)){var a=e[r];a!==s&&(t[r]=a)}}if(r){for(var o,u={},l=0,c=r.length;l<c;l++)(o=r[l])in e&&(a(o),u[o]=!0);i=u}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&\"string\"==typeof t},serialize:function(t,e,n,r){e=e||{};var i,a=!r;if(a&&(e.formatter=new p(e.precision),r={length:0,definitions:{},references:{},add:function(t,e){var n=\"#\"+t._id,r=this.references[n];if(!r){this.length++;var i=e.call(t),a=t._class;a&&i[0]!==a&&i.unshift(a),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),t&&t._serialize){i=t._serialize(e,r);var o=t._class;!o||t._compactSerialize||!a&&n||i[0]===o||i.unshift(o)}else if(Array.isArray(t)){i=[];for(var s=0,u=t.length;s<u;s++)i[s]=c.serialize(t[s],e,n,r)}else if(c.isPlainObject(t)){i={};var l=Object.keys(t);for(s=0,u=l.length;s<u;s++){var h=l[s];i[h]=c.serialize(t[h],e,n,r)}}else i=\"number\"==typeof t?e.formatter.number(t,e.precision):t;return a&&r.length>0?[[\"dictionary\",r.definitions],i]:i},deserialize:function(t,e,n,r,i){var a=t,o=!n,s=o&&t&&t.length&&\"dictionary\"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],l=\"dictionary\"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];a=[];for(var h=(u=c.exports[u])?1:0,f=t.length;h<f;h++)a.push(c.deserialize(t[h],e,n,l,s));if(u){var d=a;a=e?e(u,d,o||i):new u(d)}}else if(c.isPlainObject(t))for(var p in a={},r&&(n.dictionary=a),t)a[p]=c.deserialize(t[p],e,n);return s?a[1]:a},exportJSON:function(t,e){var n=c.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return c.deserialize(\"string\"==typeof t?JSON.parse(t):t,(function(t,n,r){var i=r&&e&&e.constructor===t,a=i?e:c.create(t.prototype);if(1===n.length&&a instanceof T&&(i||!(a instanceof P))){var o=n[0];c.isPlainObject(o)&&(o.insert=!1,i&&(n=n.concat([{insert:!0}])))}return(i?a.set:t).apply(a,n),i&&(e=null),a}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var r=t.length;t.length+=n;for(var i=0;i<n;i++)t[r+i]=e[i]}return t},splice:function(t,e,n,r){var i=e&&e.length,a=n===s;(n=a?t.length:n)>t.length&&(n=t.length);for(var o=0;o<i;o++)e[o]._index=n+o;if(a)return c.push(t,e),[];var u=[n,r];e&&c.push(u,e);for(var l=t.splice.apply(t,u),h=(o=0,l.length);o<h;o++)l[o]._index=s;for(o=n+i,h=t.length;o<h;o++)t[o]._index=o;return l},capitalize:function(t){return t.replace(/\\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,\"$1-$2\").toLowerCase()}}});var h={on:function(t,e){if(\"string\"!=typeof t)c.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,r=n&&n[t],i=this._callbacks=this._callbacks||{};-1===(i=i[t]=i[t]||[]).indexOf(e)&&(i.push(e),r&&r.install&&1===i.length&&r.install.call(this,t))}return this},off:function(t,e){if(\"string\"==typeof t){var n,r=this._eventTypes,i=r&&r[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(n=a.indexOf(e))&&1===a.length?(i&&i.uninstall&&i.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&a.splice(n,1)),this}c.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var r=c.slice(arguments,1),i=e&&e.target&&!e.currentTarget;n=n.slice(),i&&(e.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,r)){e&&e.stop&&e.stop();break}return i&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:\"#on\",detach:\"#off\",fire:\"#emit\",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,r=t?\"install\":\"uninstall\";if(e)for(var i in n)if(n[i].length>0){var a=e[i],o=a&&a[r];o&&o.call(this,i)}},statics:{inject:function t(e){var n=e._events;if(n){var r={};c.each(n,(function(t,n){var i=\"string\"==typeof t,a=i?t:n,o=c.capitalize(a),s=a.substring(2).toLowerCase();r[s]=i?{}:t,a=\"_\"+a,e[\"get\"+o]=function(){return this[a]},e[\"set\"+o]=function(t){var e=this[a];e&&this.off(s,e),t&&this.on(s,t),this[a]=t}})),e._eventTypes=r}return t.base.apply(this,arguments)}}},f=c.extend({_class:\"PaperScope\",initialize:function t(){ht=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=st.getContext(1,1)||{};e.support={nativeDash:\"setLineDash\"in n||\"mozDash\"in n,nativeBlendModes:ut.nativeModes},st.release(n)}if(!this.agent){var r=o.navigator.userAgent.toLowerCase(),i=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],a=\"darwin\"===i?\"mac\":i,s=e.agent=e.browser={platform:a};a&&(s[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g,(function(t,e,n,r,i){if(!s.chrome){var a=\"opera\"===e?r:/^(node|trident)$/.test(e)?i:n;s.version=a,s.versionNumber=parseFloat(a),e={trident:\"msie\",jsdom:\"node\"}[e]||e,s.name=e,s[e]=!0}})),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:\"0.12.3\",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=ht.PaperScript.execute(t,this,e);return $.updateFocus(),n},install:function(t){var e=this;for(var n in c.each([\"project\",\"view\",\"tool\"],(function(n){c.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ht=this,this.project=new M(t),this},createCanvas:function(t,e){return st.getCanvas(t,e)},activate:function(){ht=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+=\"Attribute\",function(e,n){return e[t](n)||e[t](\"data-paper-\"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t(\"get\"),hasAttribute:t(\"has\")}}}),d=c.extend(h,{initialize:function(t){this._scope=ht,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit(\"deactivate\"),this._scope[this._reference]=this,this.emit(\"activate\",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),p=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||\",\")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||\",\")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||\",\")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||\",\")+this.size(t,e)}});p.instance=new p;var m=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function o(t,e,n){return t<e?e:t>n?n:t}function s(t,e,r){function i(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var a=e*e-t*r,o=e*e+t*r;if(3*n(a)<o){var s=i(t),u=i(e),l=i(r),c=e*e,h=t*r;a=c-h+(u[0]*u[0]-c+2*u[0]*u[1]+u[1]*u[1]-(s[0]*l[0]-h+s[0]*l[1]+s[1]*l[0]+s[1]*l[1]))}return a}function u(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?i(2,-Math.round(a(t))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(r(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:o,integrate:function(n,r,i,a){for(var o=t[a-2],s=e[a-2],u=.5*(i-r),l=u+r,c=0,h=a+1>>1,f=1&a?s[c++]*n(l):0;c<h;){var d=u*o[c];f+=s[c++]*(n(l+d)+n(l-d))}return u*f},findRoot:function(t,e,r,i,a,s,u){for(var l=0;l<s;l++){var c=t(r),h=c/e(r),f=r-h;if(n(h)<u){r=f;break}c>0?(a=r,r=f<=i?.5*(i+a):f):(i=r,r=f>=a?.5*(i+a):f)}return o(r,i,a)},solveQuadratic:function(t,e,i,a,l,c){var h,f=1/0;if(n(t)<1e-12){if(n(e)<1e-12)return n(i)<1e-12?-1:0;h=-i/e}else{var d=s(t,e*=-.5,i);if(d&&n(d)<112e-18){var p=u(n(t),n(e),n(i));p&&(d=s(t*=p,e*=p,i*=p))}if(d>=-112e-18){var m=d<0?0:r(d),g=e+(e<0?-m:m);0===g?f=-(h=i/t):(h=g/t,f=i/g)}}var v=0,y=null==l,b=l-1e-12,_=c+1e-12;return isFinite(h)&&(y||h>b&&h<_)&&(a[v++]=y?h:o(h,l,c)),f!==h&&isFinite(f)&&(y||f>b&&f<_)&&(a[v++]=y?f:o(f,l,c)),v},solveCubic:function(t,e,a,s,l,c,h){var f,d,p,g,v,y=u(n(t),n(e),n(a),n(s));function b(n){var r=t*(f=n);g=(r+(d=r+e))*f+(p=d*f+a),v=p*f+s}if(y&&(t*=y,e*=y,a*=y,s*=y),n(t)<1e-12)t=e,d=a,p=s,f=1/0;else if(n(s)<1e-12)d=e,p=a,f=0;else{b(-e/t/3);var _=v/t,x=i(n(_),1/3),w=_<0?-1:1,S=-g/t,E=S>0?1.324717957244746*Math.max(x,r(S)):x,M=f-w*E;if(M!==f){do{b(M),M=0===g?f:f-v/g/(1+112e-18)}while(w*M>w*f);n(t)*f*f>n(s/f)&&(d=((p=-s/f)-a)/f)}}var T=m.solveQuadratic(t,d,p,l,c,h),C=null==c;return isFinite(f)&&(0===T||T>0&&f!==l[0]&&f!==l[1])&&(C||f>c-1e-12&&f<h+1e-12)&&(l[T++]=C?f:o(f,c,h)),T}}},g={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},v=c.extend({_class:\"Point\",_readIndex:!0,initialize:function(t,e){var n=typeof t,r=this.__read,i=0;if(\"number\"===n){var a=\"number\"==typeof e;this._set(t,a?e:t),r&&(i=a?2:1)}else if(\"undefined\"===n||null===t)this._set(0,0),r&&(i=null===t?1:0);else{var o=\"string\"===n?t.split(/[\\s,]+/)||[]:t;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):\"x\"in o?this._set(o.x||0,o.y||0):\"width\"in o?this._set(o.width||0,o.height||0):\"angle\"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:\"#initialize\",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new v(this.x,this.y)},toString:function(){var t=p.instance;return\"{ x: \"+t.number(this.x)+\", y: \"+t.number(this.y)+\" }\"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();m.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:\"#getAngle\",setAngleInDegrees:\"#setAngle\",getAngleInRadians:function(){if(arguments.length){var t=v.read(arguments),e=this.getLength()*t.getLength();if(m.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=v.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=v.read(arguments),e=t.x-this.x,n=t.y-this.y,r=e*e+n*n,i=c.read(arguments);return i?r:Math.sqrt(r)},normalize:function(t){t===s&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,r=new v(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,r=Math.sin(t),i=Math.cos(t);return n=new v(n.x*i-n.y*r,n.x*r+n.y*i),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=v.read(arguments);return new v(this.x+t.x,this.y+t.y)},subtract:function(){var t=v.read(arguments);return new v(this.x-t.x,this.y-t.y)},multiply:function(){var t=v.read(arguments);return new v(this.x*t.x,this.y*t.y)},divide:function(){var t=v.read(arguments);return new v(this.x/t.x,this.y/t.y)},modulo:function(){var t=v.read(arguments);return new v(this.x%t.x,this.y%t.y)},negate:function(){return new v(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var t=v.read(arguments),e=c.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=v.read(arguments);return v.isCollinear(this.x,this.y,t.x,t.y)},isColinear:\"#isCollinear\",isOrthogonal:function(){var t=v.read(arguments);return v.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=m.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=v.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=v.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=v.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new v(t.x*e,t.y*e)},statics:{min:function(){var t=v.read(arguments),e=v.read(arguments);return new v(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=v.read(arguments),e=v.read(arguments);return new v(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new v(Math.random(),Math.random())},isCollinear:function(t,e,n,r){return Math.abs(t*r-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+r*r))},isOrthogonal:function(t,e,n,r){return Math.abs(t*n+e*r)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+r*r))}}},c.each([\"round\",\"ceil\",\"floor\",\"abs\"],(function(t){var e=Math[t];this[t]=function(){return new v(e(this.x),e(this.y))}}),{})),y=v.extend({initialize:function(t,e,n,r){this._x=t,this._y=e,this._owner=n,this._setter=r},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return\"setPosition\"===this._setter?4:0}}),b=c.extend({_class:\"Size\",_readIndex:!0,initialize:function(t,e){var n=typeof t,r=this.__read,i=0;if(\"number\"===n){var a=\"number\"==typeof e;this._set(t,a?e:t),r&&(i=a?2:1)}else if(\"undefined\"===n||null===t)this._set(0,0),r&&(i=null===t?1:0);else{var o=\"string\"===n?t.split(/[\\s,]+/)||[]:t;i=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):\"width\"in o?this._set(o.width||0,o.height||0):\"x\"in o?this._set(o.x||0,o.y||0):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:\"#initialize\",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var t=p.instance;return\"{ width: \"+t.number(this.width)+\", height: \"+t.number(this.height)+\" }\"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=b.read(arguments);return new b(this.width+t.width,this.height+t.height)},subtract:function(){var t=b.read(arguments);return new b(this.width-t.width,this.height-t.height)},multiply:function(){var t=b.read(arguments);return new b(this.width*t.width,this.height*t.height)},divide:function(){var t=b.read(arguments);return new b(this.width/t.width,this.height/t.height)},modulo:function(){var t=b.read(arguments);return new b(this.width%t.width,this.height%t.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var t=m.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new b(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new b(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new b(Math.random(),Math.random())}}},c.each([\"round\",\"ceil\",\"floor\",\"abs\"],(function(t){var e=Math[t];this[t]=function(){return new b(e(this.width),e(this.height))}}),{})),_=b.extend({initialize:function(t,e,n,r){this._width=t,this._height=e,this._owner=n,this._setter=r},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),x=c.extend({_class:\"Rectangle\",_readIndex:!0,beans:!0,initialize:function(t,e,n,r){var i,a=typeof t;if(\"number\"===a?(this._set(t,e,n,r),i=4):\"undefined\"===a||null===t?(this._set(0,0,0,0),i=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),i=1):t.x!==s||t.width!==s?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),i=1):t.from===s&&t.to===s&&(this._set(0,0,0,0),c.filter(this,t),i=1)),i===s){var o,u,l=v.readNamed(arguments,\"from\"),h=c.peek(arguments),f=l.x,d=l.y;if(h&&h.x!==s||c.hasNamed(arguments,\"to\")){var p=v.readNamed(arguments,\"to\");o=p.x-f,u=p.y-d,o<0&&(f=p.x,o=-o),u<0&&(d=p.y,u=-u)}else{var m=b.read(arguments);o=m.width,u=m.height}this._set(f,d,o,u),i=arguments.__index;var g=arguments.__filtered;g&&(this.__filtered=g)}return this.__read&&(this.__read=i),this},set:\"#initialize\",_set:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?x.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=p.instance;return\"{ x: \"+t.number(this.x)+\", y: \"+t.number(this.y)+\", width: \"+t.number(this.width)+\", height: \"+t.number(this.height)+\" }\"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?v:y)(this.x,this.y,this,\"setPoint\")},setPoint:function(){var t=v.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?b:_)(this.width,this.height,this,\"setSize\")},_fw:1,_fh:1,setSize:function(){var t=b.read(arguments),e=this._sx,n=this._sy,r=t.width,i=t.height;e&&(this.x+=(this.width-r)*e),n&&(this.y+=(this.height-i)*n),this.width=r,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?v:y)(this.getCenterX(),this.getCenterY(),this,\"setCenter\")},setCenter:function(){var t=v.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==s||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(x.read(arguments)):this._containsPoint(v.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=x.read(arguments),e=c.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=x.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),i=Math.min(this.y+this.height,t.y+t.height);return new x(e,n,r-e,i-n)},unite:function(){var t=x.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),i=Math.max(this.y+this.height,t.y+t.height);return new x(e,n,r-e,i-n)},include:function(){var t=v.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),i=Math.max(this.y+this.height,t.y);return new x(e,n,r-e,i-n)},expand:function(){var t=b.read(arguments),e=t.width,n=t.height;return new x(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===s?t:e)-this.height)}},c.each([[\"Top\",\"Left\"],[\"Top\",\"Right\"],[\"Bottom\",\"Left\"],[\"Bottom\",\"Right\"],[\"Left\",\"Center\"],[\"Top\",\"Center\"],[\"Right\",\"Center\"],[\"Bottom\",\"Center\"]],(function(t,e){var n=t.join(\"\"),r=/^[RL]/.test(n);e>=4&&(t[1]+=r?\"Y\":\"X\");var i=t[r?0:1],a=t[r?1:0],o=\"get\"+i,s=\"get\"+a,u=\"set\"+i,l=\"set\"+a,c=\"set\"+n;this[\"get\"+n]=function(t){return new(t?v:y)(this[o](),this[s](),this,c)},this[c]=function(){var t=v.read(arguments);this[u](t.x),this[l](t.y)}}),{beans:!0})),w=x.extend({initialize:function(t,e,n,r,i,a){this._set(t,e,n,r,!0),this._owner=i,this._setter=a},_set:function(t,e,n,r,i){return this._x=t,this._y=e,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var t=x.prototype;return c.each([\"x\",\"y\",\"width\",\"height\"],(function(t){var e=c.capitalize(t),n=\"_\"+t;this[\"get\"+e]=function(){return this[n]},this[\"set\"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),c.each([\"Point\",\"Size\",\"Center\",\"Left\",\"Top\",\"Right\",\"Bottom\",\"CenterX\",\"CenterY\",\"TopLeft\",\"TopRight\",\"BottomLeft\",\"BottomRight\",\"LeftCenter\",\"TopCenter\",\"RightCenter\",\"BottomCenter\"],(function(e){var n=\"set\"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),S=c.extend({_class:\"Matrix\",initialize:function t(e,n){var r=arguments.length,i=!0;if(r>=6?this._set.apply(this,arguments):1===r||2===r?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):i=!1:r?i=!1:this.reset(),!i)throw new Error(\"Unsupported matrix parameters\");return this},set:\"#initialize\",_set:function(t,e,n,r,i,a,o){return this._a=t,this._b=e,this._c=n,this._d=r,this._tx=i,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=p.instance;return\"[[\"+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(\", \")+\"], [\"+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(\", \")+\"]]\"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=v.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=v.read(arguments),e=v.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=v.read(arguments,1),n=e.x,r=e.y,i=Math.cos(t),a=Math.sin(t),o=n-n*i+r*a,s=r-n*a-r*i,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=i*u+a*c,this._b=i*l+a*h,this._c=-a*u+i*c,this._d=-a*l+i*h,this._tx+=o*u+s*c,this._ty+=o*l+s*h,this._changed(),this},shear:function(){var t=v.read(arguments),e=v.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,r=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*r,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=v.read(arguments),e=v.read(arguments,0,{readNull:!0}),n=Math.PI/180,r=new v(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(r,e)},append:function(t,e){if(t){var n=this._a,r=this._b,i=this._c,a=this._d,o=t._a,s=t._c,u=t._b,l=t._d,c=t._tx,h=t._ty;this._a=o*n+u*i,this._c=s*n+l*i,this._b=o*r+u*a,this._d=s*r+l*a,this._tx+=c*n+h*i,this._ty+=c*r+h*a,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,r=this._b,i=this._c,a=this._d,o=this._tx,s=this._ty,u=t._a,l=t._c,c=t._b,h=t._d,f=t._tx,d=t._ty;this._a=u*n+l*r,this._c=u*i+l*a,this._b=c*n+h*r,this._d=c*i+h*a,this._tx=u*o+l*s+f,this._ty=c*o+h*s+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,r=this._d,i=this._tx,a=this._ty,o=t*r-e*n,s=null;return o&&!isNaN(o)&&isFinite(i)&&isFinite(a)&&(this._a=r/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*a-r*i)/o,this._ty=(e*i-t*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:\"#append\",preConcatenate:\"#prepend\",chain:\"#appended\",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(v.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var r=t.x,i=t.y;return e||(e=new v),e._set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var r=0,i=2*n;r<i;r+=2){var a=t[r],o=t[r+1];e[r]=a*this._a+o*this._c+this._tx,e[r+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,r=e+t.width,i=n+t.height,a=[e,n,r,n,r,i,e,i];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var r=this._transformCorners(t),i=r.slice(0,2),a=i.slice(),o=2;o<8;o++){var s=r[o],u=1&o;s<i[u]?i[u]=s:s>a[u]&&(a[u]=s)}return e||(e=new x),e._set(i[0],i[1],a[0]-i[0],a[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(v.read(arguments))},_inverseTransform:function(t,e,n){var r=this._a,i=this._b,a=this._c,o=this._d,s=this._tx,u=this._ty,l=r*o-i*a,c=null;if(l&&!isNaN(l)&&isFinite(s)&&isFinite(u)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new v),c=e._set((h*o-f*a)/l,(f*r-h*i)/l,n)}return c},decompose:function(){var t,e,n,r=this._a,i=this._b,a=this._c,o=this._d,s=r*o-i*a,u=Math.sqrt,l=Math.atan2,c=180/Math.PI;if(0!==r||0!==i){var h=u(r*r+i*i);t=Math.acos(r/h)*(i>0?1:-1),e=[h,s/h],n=[l(r*a+i*o,h*h),0]}else if(0!==a||0!==o){var f=u(a*a+o*o);t=Math.asin(a/f)*(o>0?1:-1),e=[s/f,f],n=[0,l(r*a+i*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new v(e),skewing:new v(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new v(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each([\"a\",\"b\",\"c\",\"d\",\"tx\",\"ty\"],(function(t){var e=c.capitalize(t),n=\"_\"+t;this[\"get\"+e]=function(){return this[n]},this[\"set\"+e]=function(t){this[n]=t,this._changed()}}),{})),E=c.extend({_class:\"Line\",initialize:function(t,e,n,r,i){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=r,a=i):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new v(this._px,this._py)},getVector:function(){return new v(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return E.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return E.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return E.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return v.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return v.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,r,i,a,o,s,u,l){u||(n-=t,r-=e,o-=i,s-=a);var c=n*s-r*o;if(!m.isZero(c)){var h=t-i,f=e-a,d=(o*f-s*h)/c,p=(n*f-r*h)/c;if(l||-1e-12<d&&d<1+1e-12&&-1e-12<p&&p<1+1e-12)return l||(d=d<=0?0:d>=1?1:d),new v(t+d*n,e+d*r)}},getSide:function(t,e,n,r,i,a,o,s){o||(n-=t,r-=e);var u=i-t,l=u*r-(a-e)*n;return!s&&m.isZero(l)&&(l=(u*n+u*n)/(n*n+r*r))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(t,e,n,r,i,a,o){return o||(n-=t,r-=e),0===n?r>0?i-t:t-i:0===r?n<0?a-e:e-a:((i-t)*r-(a-e)*n)/Math.sqrt(n*n+r*r)},getDistance:function(t,e,n,r,i,a,o){return Math.abs(E.getSignedDistance(t,e,n,r,i,a,o))}}}),M=d.extend({_class:\"Project\",_list:\"projects\",_reference:\"project\",_compactSerialize:!0,initialize:function(t){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=$.create(this,t||st.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&e){var i=this._changesById,a=e._id,o=i[a];o?o.flags|=t:r.push(i[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new P({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:O,match:function(n){var r=n._definition,i=r._id;return e[i]||(e[i]=!0,t.push(r)),!1}}),t},getSymbols:\"getSymbolDefinitions\",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var r=t[n],i=r._selection;1&i&&r.isInserted()?e.push(r):i||this._updateSelection(r)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(s,t)},insertLayer:function(t,e){if(e instanceof P){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(s,new P(T.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return T._getItems(this,t)},getItem:function(t){return T._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){\"mouseup\"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var r in n){var i=n[r];for(var a in e){var o=e[a];o&&o!=n&&delete o[i._id]}i.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=this._children,i=new c({offset:new v(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new S],updateMatrix:!0}),a=0,o=r.length;a<o;a++)r[a].draw(t,i);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var s=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var h in s)s[h]._drawSelection(t,e,u,s,l);t.restore()}}}),T=c.extend(h,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:\"Item\",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:\"normal\",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:\"normal\",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:[\"applyMatrix\"]},new function(){var t=[\"onMouseDown\",\"onMouseUp\",\"onMouseDrag\",\"onClick\",\"onDoubleClick\",\"onMouseMove\",\"onMouseEnter\",\"onMouseLeave\"];return c.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&c.isPlainObject(t),r=n&&!0===t.internal,i=this._matrix=new S,a=n&&t.project||ht.project,o=ht.settings;return this._id=r?null:g.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&i.translate(e),i._owner=this,this._style=new Y(a._currentStyle,this,a),r||n&&0==t.insert||!o.insertItems&&(!n||!0!==t.insert)?this._setProject(a):(n&&t.parent||a)._insertItem(s,this,!0),n&&t!==T.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},r=this;function i(i){for(var a in i){var o=r[a];c.equals(o,\"leading\"===a?1.2*i.fontSize:i[a])||(n[a]=c.serialize(o,t,\"data\"!==a,e))}}return i(this._serializeFields),this instanceof C||i(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=s),16&t&&(this._globalMatrix=s),n&&72&t&&T._clearBoundsCache(n),2&t&&T._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+\"\")throw new Error(\"Names consisting only of numbers are not supported.\");var e=this._getOwner();if(t&&e){var n=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||s,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each([\"locked\",\"visible\",\"blendMode\",\"opacity\",\"guide\"],(function(t){var e=c.capitalize(t),n=\"_\"+t,r={locked:256,visible:265};this[\"get\"+e]=function(){return this[n]},this[\"set\"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(r[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,r=e.length;n<r;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,r=t.length;n<r;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,r=e.length;n<r;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?v:y,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,\"setPosition\")},setPosition:function(){this.translate(v.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new y(t.x,t.y,this,\"setPivot\"):null},setPivot:function(){this._pivot=v.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof S,r=c.set({},n?e:t,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var i=this._getCachedBounds(n&&t,r).rect;return arguments.length?i:new w(i.x,i.y,i.width,i.height,this,\"setBounds\")},setBounds:function(){var t=x.read(arguments),e=this.getBounds(),n=this._matrix,r=new S,i=t.getCenter();r.translate(i),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new S).translate(n.getTranslation())),e=this.getBounds()),r.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),i=e.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(T._updateBoundsCache(this,e.cacheItem),T._getBounds(n,t,e)):new x},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join(\"\")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var r=e.internal&&!n,i=e.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),o=i&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,r),s=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,i),o&&s&&o in s)return{rect:(f=s[o]).rect.clone(),nonscaling:f.nonscaling};var u=this._getBounds(t||a,e),l=u.rect||u,c=this._style,h=u.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(o){s||(this._bounds=s={});var f=s[o]={rect:l.clone(),nonscaling:h,internal:r}}return{rect:l,nonscaling:h}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(e),r.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=s;for(var n=0,r=e.list,i=r.length;n<i;n++){var a=r[n];a!==t&&(a._bounds=a._position=s,a._boundsCache&&T._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var r=1/0,i=-r,a=r,o=i,s=!1;n=n||{};for(var u=0,l=t.length;u<l;u++){var c=t[u];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),f=h.rect;r=Math.min(f.x,r),a=Math.min(f.y,a),i=Math.max(f.x+f.width,i),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(r)?new x(r,a,i-r,o-a):new x,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new y(e?e.x:1,e?e.y:1,this,\"setScaling\")},setScaling:function(){var t=this.getScaling(),e=v.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),r=this._decomposed,i=new S,a=this.getPosition(!0);i.translate(a),n&&i.rotate(n),i.scale(e.x/t.x,e.y/t.y),n&&i.rotate(-n),i.translate(a.negate()),this.transform(i),r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){e=null;for(var i=0,a=r.length;i<a;i++)r[i]._globalMatrix=null;break}r.push(n),n=n._parent}e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0)));return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:\"#getApplyMatrix\",setTransformContent:\"#setApplyMatrix\"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof P)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:\"#getParent\",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(T.NO_INSERT),n=this._children,r=c.pick(t?t.insert:s,t===s||!0===t),i=c.pick(t?t.deep:s,!0);n&&e.copyAttributes(this),n&&!i||e.copyContent(this),n||e.copyAttributes(this),r&&e.insertAbove(this);var a=this._name,o=this._parent;if(a&&o){n=o._children;for(var u=a,l=1;n[a];)a=u+\" \"+l++;a!==u&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,n=0,r=e&&e.length;n<r;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=[\"_locked\",\"_visible\",\"_blendMode\",\"_opacity\",\"_clipMask\",\"_guide\"],r=0,i=n.length;r<i;r++){var a=n[r];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,s=t._name;this._data=o?c.clone(o):null,s&&this.setName(s)},rasterize:function(t,e){var n=this.getStrokeBounds(),r=(t||this.getView().getResolution())/72,i=n.getTopLeft().floor(),a=n.getBottomRight().ceil(),o=new b(a.subtract(i)),u=new A(T.NO_INSERT);if(!o.isZero()){var l=st.getCanvas(o.multiply(r)),h=l.getContext(\"2d\"),f=(new S).scale(r).translate(i.negate());h.save(),f.applyToContext(h),this.draw(h,new c({matrices:[f]})),h.restore(),u.setCanvas(l)}return u.transform((new S).translate(i.add(o.divide(2))).scale(1/r)),(e===s||e)&&u.insertAbove(this),u},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(v.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new F.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof T&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(v.read(arguments),I.getOptions(arguments))}function e(){var t=v.read(arguments),e=I.getOptions(arguments),n=[];return this._hitTest(t,c.set({all:n},e)),n}function n(t,e,n,r){var i=this._children;if(i)for(var a=i.length-1;a>=0;a--){var o=i[a],s=o!==r&&o._hitTest(t,e,n);if(s&&!e.all)return s}return null}return M.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,i=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new b(F._getStrokePadding(a,r._shiftless().invert()));if(!(t=r._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var s,u,l=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,f=this;function d(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function p(e,n){var r=n?s[\"get\"+n]():f.getPosition();if(t.subtract(r).divide(o).length<=1)return new I(e,f,{name:n?c.hyphenate(n):e,point:r})}var m=e.position,g=e.center,v=e.bounds;if(l&&this._parent&&(m||g||v)){if((g||v)&&(s=this.getInternalBounds()),!(u=m&&p(\"position\")||g&&p(\"center\",\"Center\"))&&v)for(var y=[\"TopLeft\",\"TopRight\",\"BottomLeft\",\"BottomRight\",\"LeftCenter\",\"TopCenter\",\"RightCenter\",\"BottomCenter\"],_=0;_<8&&!u;_++)u=p(\"bounds\",y[_]);u=d(u)}return u||(u=this._hitTestChildren(t,e,i)||l&&d(this._hitTestSelf(t,e,i,this.getStrokeScaling()?null:i._shiftless().invert()))||null),u&&u.point&&(u.point=r.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new I(\"fill\",this)},matches:function(t,e){var n=typeof t;if(\"object\"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if(\"function\"===n)return t(this);if(\"match\"===t)return e(this);var i=/^(empty|editable)$/.test(t)?this[\"is\"+c.capitalize(t)]():\"type\"===t?c.hyphenate(this._class):this[t];if(\"class\"===t){if(\"function\"==typeof e)return this instanceof e;i=this._class}if(\"function\"==typeof e)return!!e(i);if(e){if(e.test)return e.test(i);if(c.isPlainObject(e))return function t(e,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=n[r];if(c.isPlainObject(i)&&c.isPlainObject(a)){if(!t(i,a))return!1}else if(!c.equals(i,a))return!1}return!0}(e,i)}return c.equals(i,e)},getItems:function(t){return T._getItems(this,t,this._matrix)},getItem:function(t){return T._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,r,i,a){if(!i){var o=\"object\"==typeof n&&n,s=o&&o.overlapping,u=o&&o.inside,l=(y=s||u)&&x.read([y]);i={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!s,rect:l,path:s&&new F.Rectangle({rectangle:l,insert:!1})},o&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=e._children,f=i.items;r=(l=i.rect)&&(r||new S);for(var d=0,p=h&&h.length;d<p;d++){var m=h[d],g=r&&r.appended(m._matrix),v=!0;if(l){var y=m.getBounds(g);if(!l.intersects(y))continue;l.contains(y)||i.overlapping&&(y.contains(l)||i.path.intersects(m,g))||(v=!1)}if(v&&m.matches(n)&&(f.push(m),a))break;if(!1!==i.recursive&&t(m,n,g,i,a),a&&f.length>0)break}return f}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(s,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var r={},i=(e=c.slice(e)).length-1;i>=0;i--){var a=(l=e[i])&&l._id;!l||r[a]?e.splice(i,1):(l._remove(!1,!0),r[a]=!0)}c.splice(n,e,t,0);for(var o=this._project,s=o._changes,u=(i=0,e.length);i<u;i++){var l,h=(l=e[i])._name;l._parent=this,l._setProject(o,!0),h&&l.setName(h),s&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:\"#insertChild\",_insertAt:function(t,e){var n=t&&t._getOwner(),r=t!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(t._index+e,r)),r},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(s,this):null},appendTop:\"#addChild\",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:\"#insertAbove\",moveBelow:\"#insertBelow\",addTo:function(t){return t._insertItem(s,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,r=this._name,i=n[r],a=i?i.indexOf(this):-1;-1!==a&&(e[r]==this&&delete e[r],i.splice(a,1),i.length?e[r]=i[0]:delete n[r])}},_remove:function(t,e){var n=this._getOwner(),r=this._project,i=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,i,1)),this._installEvents(!1),t&&r._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var n=c.splice(this._children,null,t,e-t),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:\"#removeChildren\",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var r=0;r<n;r++)if(!e[r].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),r=e(t),i=0,a=Math.min(n.length,r.length);i<a;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each([\"rotate\",\"scale\",\"shear\",\"skew\"],(function(t){var e=\"rotate\"===t;this[t]=function(){var n=(e?c:v).read(arguments),r=v.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,r||this.getPosition(!0)))}}),{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,r){var i=this._matrix,a=t&&!t.isIdentity(),o=(e||this._applyMatrix)&&(!i.isIdentity()||a||e&&n&&this._children);if(!a&&!o)return this;if(a){!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t,!0);var s=this._style,u=s.getFillColor(!0),l=s.getStrokeColor(!0);u&&u.transform(t),l&&l.transform(t)}if(o&&(o=this._transformContent(i,n,r))){var c=this._pivot;c&&i._transformPoint(c,c,!0),i.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var h=this._bounds,f=this._position;(a||o)&&this._changed(25);var d=a&&h&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var p in h){var m=h[p];if(m.nonscaling)delete h[p];else if(o||!m.internal){var g=m.rect;t._transformBounds(g,g)}}this._bounds=h;var v=h[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else a&&f&&this._pivot&&(this._position=t._transformPoint(f,f));return this},_transformContent:function(t,e,n){var r=this._children;if(r){for(var i=0,a=r.length;i<a;i++)r[i].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(v.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(v.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(v.read(arguments))},localToParent:function(){return this._matrix._transformPoint(v.read(arguments))},fitBounds:function(t,e){t=x.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=t.height/t.width,a=(e?r>i:r<i)?t.width/n.width:t.height/n.height,o=new x(new v,new b(n.width*a,n.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var r=this._style,i=this._matrix;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,i)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,i),t.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),o=r.getStrokeCap(),s=r.getMiterLimit();if(a&&(t.lineJoin=a),o&&(t.lineCap=o),s&&(t.miterLimit=s),ht.support.nativeDash){var u=r.getDashArray(),l=r.getDashOffset();u&&u.length&&(\"setLineDash\"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(r.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend((new S).scale(c,c)),f=h.transform(new v(r.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,i=e.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){i=i?i.appended(o):o,r.push(o),e.updateMatrix&&(this._globalMatrix=o);var s,u,l,c=this._blendMode,h=this._opacity,f=\"normal\"===c,d=ut.nativeModes[c],p=f&&1===h||e.dontStart||e.clip||(d||f&&h<1)&&this._canComposite(),m=e.pixelRatio||1;if(!p){var g=this.getStrokeBounds(i);if(!g.width||!g.height)return void r.pop();l=e.offset,u=e.offset=g.getTopLeft().floor(),s=t,t=st.getContext(g.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var v=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i,y=!p&&e.clipItem,b=!v||y;if(p?(t.globalAlpha=h,d&&(t.globalCompositeOperation=c)):b&&t.translate(-u.x,-u.y),b&&(p?a:i).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),v){t.setTransform(m,0,0,m,0,0);var _=e.offset;_&&t.translate(-_.x,-_.y)}this._draw(t,e,i,v),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),p||(ut.process(c,t,s,h,u.subtract(l).multiply(m)),st.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof j)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,r,i){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,u=4&a;if(this._drawSelected||(o=!1),(o||s||u)&&this._isUpdated(i)){var l,c=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):\"#009dec\",o&&this._drawSelected(t,h,r),u){var d=this.getPosition(!0),p=this._parent,m=p?p.localToGlobal(d):d,g=m.x,v=m.y;t.beginPath(),t.arc(g,v,f,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],b=f,_=n+1,x=0;x<4;x++){var w=y[x],S=w[0],E=w[1];t.moveTo(g+S*b,v+E*b),t.lineTo(g+S*_,v+E*_),t.stroke()}}if(s){var M=h._transformCorners(this.getInternalBounds());t.beginPath();for(x=0;x<8;x++)t[x?\"lineTo\":\"moveTo\"](M[x],M[++x]);t.closePath(),t.stroke();for(x=0;x<8;x++)t.fillRect(M[x]-f,M[++x]-f,n,n)}}},_canComposite:function(){return!1}},c.each([\"down\",\"drag\",\"up\",\"move\"],(function(t){this[\"removeOn\"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n=\"mouse\"+e,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var r=n&&n.easing,i=n&&n.start,a=null!=n&&(\"number\"==typeof n?n:n.duration),o=new at(this,t,e,a,r,i);return a&&this.on(\"frame\",(function t(e){o._handleFrame(1e3*e.time),o.running||this.off(\"frame\",t)})),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),C=T.extend({_class:\"Group\",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=s)},_getClipItem:function(){var t=this._clipItem;if(t===s){t=null;for(var e=this._children,n=0,r=e.length;n<r;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(e),c.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,r){var i=this._getClipItem();return(!i||i.contains(e))&&t.base.call(this,e,n,r,i)},_draw:function(t,e){var n=e.clip,r=!n&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(t,e.extend({clip:!0}));for(var i=this._children,a=0,o=i.length;a<o;a++){var s=i[a];s!==r&&s.draw(t,e)}}}),P=C.extend({_class:\"Layer\",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),k=T.extend({_class:\"Shape\",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:\"#getType\",setShape:\"#setType\",getSize:function(){var t=this._size;return new _(t.width,t.height,this,\"setSize\")},setSize:function(){var t=b.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,r=t.height;\"rectangle\"===e?this._radius.set(b.min(this._radius,t.divide(2))):\"circle\"===e?(n=r=(n+r)/2,this._radius=n/2):\"ellipse\"===e&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return\"circle\"===this._type?t:new _(t.width,t.height,this,\"setRadius\")},setRadius:function(t){var e=this._type;if(\"circle\"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=b.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),\"rectangle\"===e){n=b.max(this._size,t.multiply(2));this._size.set(n)}else\"ellipse\"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(F[c.capitalize(this._type)])({center:new v,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),ht.settings.applyMatrix&&e.setApplyMatrix(!0),(t===s||t)&&e.insertAbove(this),e},toShape:\"#clone\",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,r){var i=this._style,a=i.hasFill(),o=i.hasStroke(),s=e.dontFinish||e.clip,u=!r;if(a||o||s){var l=this._type,c=this._radius,h=\"circle\"===l;if(e.dontStart||t.beginPath(),u&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,p=this._size,m=p.width,g=p.height;if(u&&\"rectangle\"===l&&0===f&&0===d)t.rect(-m/2,-g/2,m,g);else{var v=m/2,y=g/2,b=.44771525016920644,_=f*b,x=d*b,w=[-v,-y+d,-v,-y+x,-v+_,-y,-v+f,-y,v-f,-y,v-_,-y,v,-y+x,v,-y+d,v,y-d,v,y-x,v-_,y,v-f,y,-v+f,y,-v+_,y,-v,y-x,-v,y-d];r&&r.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}s||!a&&!o||(this._setStyles(t,e,n),a&&(t.fill(i.getFillRule()),t.shadowColor=\"rgba(0,0,0,0)\"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new x(this._size).setCenter(0,0),r=this._style,i=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(n=t._transformBounds(n)),i?n.expand(F._getStrokePadding(i,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var r=t._radius;if(!r.isZero())for(var i=t._size.divide(2),a=1;a<=4;a++){var o=new v(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(i),u=s.subtract(o.multiply(r));if(new x(n?s.add(o.multiply(n)):s,u).contains(e))return{point:u,quadrant:a}}}function e(t,e,n,r){var i=t.divide(e);return(!r||i.isInQuadrant(r))&&i.subtract(i.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if(\"rectangle\"===this._type){var r=t(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,a,o){var s=!1,u=this._style,l=i.stroke&&u.hasStroke(),c=i.fill&&u.hasFill();if(l||c){var h=this._type,f=this._radius,d=l?u.getStrokeWidth()/2:0,p=i._tolerancePadding.add(F._getStrokePadding(d,!u.getStrokeScaling()&&o));if(\"rectangle\"===h){var m=p.multiply(2),g=t(this,r,m);if(g)s=e(r.subtract(g.point),f,p,g.quadrant);else{var v=new x(this._size).setCenter(0,0),y=v.expand(m),b=v.expand(m.negate());s=y._containsPoint(r)&&!b._containsPoint(r)}}else s=e(r,f,p)}return s?new I(l?\"stroke\":\"fill\",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,r,i){var a=new k(c.getNamed(i),e);return a._type=t,a._size=n,a._radius=r,a}return{Circle:function(){var e=v.readNamed(arguments,\"center\"),n=c.readNamed(arguments,\"radius\");return t(\"circle\",e,new b(2*n),n,arguments)},Rectangle:function(){var e=x.readNamed(arguments,\"rectangle\"),n=b.min(b.readNamed(arguments,\"radius\"),e.getSize(!0).divide(2));return t(\"rectangle\",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=k._readEllipse(arguments),n=e.radius;return t(\"ellipse\",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(c.hasNamed(t,\"radius\"))e=v.readNamed(t,\"center\"),n=b.readNamed(t,\"radius\");else{var r=x.readNamed(t,\"rectangle\");e=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),A=T.extend({},{_class:\"Raster\",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:[\"crossOrigin\"],_smoothing:!0,beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==s&&v.read(arguments))){var n,r=typeof t,i=\"string\"===r?l.getElementById(t):\"object\"===r?t:null;if(i&&i!==T.NO_INSERT)if(i.getContent||null!=i.naturalHeight)n=i;else if(i){var a=b.read(arguments);a.isZero()||(n=st.getCanvas(a))}n?this.setImage(n):this.setSource(t)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var r=st.getCanvas(t._size);r.getContext(\"2d\").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new _(t?t.width:0,t?t.height:0,this,\"setSize\")},setSize:function(){var t=b.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(st.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&st.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new v(0,0).transform(t),n=new v(1,0).transform(t).subtract(e),r=new v(0,1).transform(t).subtract(e);return new b(72/n.getLength(),72/r.getLength())},getPpi:\"#getResolution\",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),r=t&&t.type||\"load\";n&&e.responds(r)&&(ht=n._scope,e.emit(r,new K(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Z.add(t,{load:function(r){e._setImage(t),n(r)},error:n})},_setImage:function(t){this._canvas&&st.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new b(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=st.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){st.release(t)}}return this._canvas},setCanvas:\"#setImage\",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext(\"2d\")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new o.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||\"\"},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=t,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=x.read(arguments),e=st.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=x.read(arguments),e=new A(T.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=v.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof B?(n=t,e=t.getBounds()):\"object\"==typeof t&&(\"width\"in t?e=new x(t):\"x\"in t&&(e=new x(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=Math.min(e.width,32),i=Math.min(e.height,32),a=A._sampleContext;a?a.clearRect(0,0,33,33):a=A._sampleContext=st.getContext(new b(32)),a.save();var o=(new S).scale(r/e.width,i/e.height).translate(-e.x,-e.y);o.applyToContext(a),n&&n.draw(a,new c({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var s=this.getElement(),u=this._size;s&&a.drawImage(s,-u.width/2,-u.height/2),a.restore();for(var l=a.getImageData(.5,.5,Math.ceil(r),Math.ceil(i)).data,h=[0,0,0],f=0,d=0,p=l.length;d<p;d+=4){var m=l[d+3];f+=m,m/=255,h[0]+=l[d]*m,h[1]+=l[d+1]*m,h[2]+=l[d+2]*m}for(d=0;d<3;d++)h[d]/=f;return f?W.read(h):null},getPixel:function(){var t=v.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new W(\"rgb\",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=v.read(arguments),e=W.read(arguments),n=e._convert(\"rgb\"),r=e._alpha,i=this.getContext(!0),a=i.createImageData(1,1),o=a.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=r?255*r:255,i.putImageData(a,t.x,t.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=b.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=x.read(arguments);return t.isEmpty()&&(t=new x(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=v.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new x(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new I(\"pixel\",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var r=this.getElement();r&&r.width>0&&r.height>0&&(t.globalAlpha=this._opacity,this._setStyles(t,e,n),Q.setPrefixed(t,\"imageSmoothingEnabled\",this._smoothing),t.drawImage(r,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),O=T.extend({_class:\"SymbolItem\",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==s&&v.read(arguments,1))||this.setDefinition(t instanceof L?t:new L(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:\"#getDefinition\",setSymbol:\"#setDefinition\",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var r=this._definition._item._hitTest(t,e,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),L=c.extend({_class:\"SymbolDefinition\",initialize:function(t,e){this._id=g.get(),this.project=ht.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&T._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new v),t._symbol=this,this._changed(9)},getDefinition:\"#getItem\",setDefinition:\"#setItem\",place:function(t){return new O(this,t)},clone:function(){return new L(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),I=c.extend({_class:\"HitResult\",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&c.read(t);return c.set({type:null,tolerance:ht.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),N=c.extend({_class:\"Segment\",beans:!0,_selection:0,initialize:function(t,e,n,r,i,a){var o,u,l,c,h=arguments.length;h>0&&(null==t||\"object\"==typeof t?1===h&&t&&\"point\"in t?(o=t.point,u=t.handleIn,l=t.handleOut,c=t.selection):(o=t,u=e,l=n,c=r):(o=[t,e],u=n!==s?[n,r]:null,l=i!==s?[i,a]:null)),new R(o,this,\"_point\"),new R(u,this,\"_handleIn\"),new R(l,this,\"_handleOut\"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),c.serialize(i,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,r=e._curves,i=this._index;r&&(t&&t!==this._point&&t!==this._handleIn||!(n=i>0?r[i-1]:e._closed?r[r.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=r[i])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(v.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(v.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(v.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new z(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var r=t||{},i=r.type,a=r.factor,o=this.getPrevious(),u=this.getNext(),l=(o||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c),d=c.getDistance(h);if(i&&\"catmull-rom\"!==i){if(\"geometric\"!==i)throw new Error(\"Smoothing method '\"+i+\"' not supported.\");if(o&&u){var p=l.subtract(h),m=a===s?.4:a,g=m*f/(f+d);e||this.setHandleIn(p.multiply(g)),n||this.setHandleOut(p.multiply(g-m))}}else{var y=a===s?.5:a,b=Math.pow(f,y),_=b*b,x=Math.pow(d,y),w=x*x;if(!e&&o){var S=2*w+3*x*b+_,E=3*x*(x+b);this.setHandleIn(0!==E?new v((w*l._x+S*c._x-_*h._x)/E-c._x,(w*l._y+S*c._y-_*h._y)/E-c._y):new v)}if(!n&&u){S=2*_+3*b*x+w,E=3*b*(b+x);this.setHandleOut(0!==E?new v((_*h._x+S*c._x-w*l._x)/E-c._x,(_*h._y+S*c._y-w*l._y)/E-c._y):new v)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new N(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new N(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=[\"point: \"+this._point];return this._handleIn.isZero()||t.push(\"handleIn: \"+this._handleIn),this._handleOut.isZero()||t.push(\"handleOut: \"+this._handleOut),\"{ \"+t.join(\", \")+\" }\"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var r=1-n,i=n,a=t._point,o=e._point,s=t._handleIn,u=e._handleIn,l=e._handleOut,c=t._handleOut;this._point._set(r*a._x+i*o._x,r*a._y+i*o._y,!0),this._handleIn._set(r*s._x+i*u._x,r*s._y+i*u._y,!0),this._handleOut._set(r*c._x+i*l._x,r*c._y+i*l._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=r._x,s=r._y,u=2;return e[0]=o,e[1]=s,i&&(e[u++]=i._x+o,e[u++]=i._y+s),a&&(e[u++]=a._x+o,e[u++]=a._y+s),t&&(t._transformCoordinates(e,e,u/2),o=e[0],s=e[1],n?(r._x=o,r._y=s,u=2,i&&(i._x=e[u++]-o,i._y=e[u++]-s),a&&(a._x=e[u++]-o,a._y=e[u++]-s)):(i||(e[u++]=o,e[u++]=s),a||(e[u++]=o,e[u++]=s))),e}}),R=v.extend({initialize:function(t,e,n){var r,i,a;if(t)if((r=t[0])!==s)i=t[1];else{var o=t;(r=o.x)===s&&(r=(o=v.read(arguments)).x),i=o.y,a=o.selected}else r=i=0;this._x=r,this._y=i,this._owner=e,e[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=m.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),D=c.extend({_class:\"Curve\",beans:!0,initialize:function(t,e,n,r,i,a,o,s){var u,l,c,h,f,d,p=arguments.length;3===p?(this._path=t,u=e,l=n):p?1===p?\"segment1\"in t?(u=new N(t.segment1),l=new N(t.segment2)):\"point1\"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new N(t),l=new N(e)):4===p?(c=t,f=e,d=n,h=r):8===p&&(c=[t,e],h=[o,s],f=[n-t,r-e],d=[i-o,a-s]):(u=new N,l=new N),this._segment1=u||new N(c,null,f),this._segment2=l||new N(h,d,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=s},clone:function(){return new D(this._segment1,this._segment2)},toString:function(){var t=[\"point1: \"+this._segment1._point];return this._segment1._handleOut.isZero()||t.push(\"handle1: \"+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push(\"handle2: \"+this._segment2._handleIn),t.push(\"point2: \"+this._segment2._point),\"{ \"+t.join(\", \")+\" }\"},classify:function(){return D.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(v.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(v.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(v.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(v.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return D.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new v(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=D.getLength(this.getValues(),0,1)),this._length},getArea:function(){return D.getArea(this.getValues())},getLine:function(){return new E(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new D(D.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return D.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=1-1e-8){var r=D.subdivide(this.getValues(),t),i=r[0],a=r[1],o=e||this.hasHandles(),s=this._segment1,u=this._segment2,l=this._path;o&&(s._handleOut._set(i[2]-i[0],i[3]-i[1]),u._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=i[6],h=i[7],f=new N(new v(c,h),o&&new v(i[4]-c,i[5]-h),o&&new v(a[2]-c,a[3]-h));l?(l.insert(s._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new D(f,u))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===s?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===s?.5:e?t:this.getTimeAt(t))},reversed:function(){return new D(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,r){var i=t._point,a=t._handleOut,o=e._handleIn,s=e._point,u=i.x,l=i.y,c=s.x,h=s.y,f=r?[u,l,u,l,c,h,c,h]:[u,l,u+a._x,l+a._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7];e===s&&(e=.5);var h=1-e,f=h*n+e*i,d=h*r+e*a,p=h*i+e*o,m=h*a+e*u,g=h*o+e*l,v=h*u+e*c,y=h*f+e*p,b=h*d+e*m,_=h*p+e*g,x=h*m+e*v,w=h*y+e*_,S=h*b+e*x;return[[n,r,f,d,y,b,w,S],[w,S,_,x,g,v,l,c]]},getMonoCurves:function(t,e){var n=[],r=e?0:1,i=t[r+0],a=t[r+2],o=t[r+4],s=t[r+6];if(i>=a==a>=o&&a>=o==o>=s||D.isStraight(t))n.push(t);else{var u=3*(a-o)-i+s,l=2*(i+o)-4*a,c=a-i,h=[],f=m.solveQuadratic(u,l,c,h,1e-8,1-1e-8);if(f){h.sort();var d=h[0],p=D.subdivide(t,d);n.push(p[0]),f>1&&(d=(h[1]-d)/(1-d),p=D.subdivide(p[1],d),n.push(p[0])),n.push(p[1])}else n.push(t)}return n},solveCubic:function(t,e,n,r,i,a){var o=t[e],s=t[e+2],u=t[e+4],l=t[e+6],c=0;if(!(o<n&&l<n&&s<n&&u<n||o>n&&l>n&&s>n&&u>n)){var h=3*(s-o),f=3*(u-s)-h,d=l-o-h-f;c=m.solveCubic(d,f,h,o-n,r,i,a)}return c},getTimeOf:function(t,e){var n=new v(t[0],t[1]),r=new v(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(r,1e-12)?1:null))for(var i=[e.x,e.y],a=[],o=0;o<2;o++)for(var s=D.solveCubic(t,o,i[o],a,0,1),u=0;u<s;u++){var l=a[u];if(e.isClose(D.getPoint(t,l),1e-7))return l}return e.isClose(n,1e-7)?0:e.isClose(r,1e-7)?1:null},getNearestTime:function(t,e){if(D.isStraight(t)){var n=t[0],r=t[1],i=t[6]-n,a=t[7]-r,o=i*i+a*a;if(0===o)return 0;var s=((e.x-n)*i+(e.y-r)*a)/o;return s<1e-12?0:s>.999999999999?1:D.getTimeOf(t,new v(n+s*i,r+s*a))}var u=1/0,l=0;function c(n){if(n>=0&&n<=1){var r=e.getDistance(D.getPoint(t,n),!0);if(r<u)return u=r,l=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var f=.005;f>1e-8;)c(l-f)||c(l+f)||(f/=2);return l},getPart:function(t,e,n){var r=e>n;if(r){var i=e;e=n,n=i}return e>0&&(t=D.subdivide(t,e)[1]),n<1&&(t=D.subdivide(t,(n-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=3*i-2*n-u,h=3*a-2*r-l,f=3*o-2*u-n,d=3*s-2*l-r;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7];return 3*((u-n)*(r+a)-(s-e)*(i+o)+i*(e-a)-r*(n-o)+u*(a+e/3)-s*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),r=[0,0],i=0;i<2;i++)D._addBounds(t[i],t[i+2],t[i+4],t[i+6],i,0,e,n,r);return new x(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,r,i,a,o,s,u){function l(t,e){var n=t-e,r=t+e;n<o[i]&&(o[i]=n),r>s[i]&&(s[i]=r)}a/=2;var c=o[i]-a,h=s[i]+a;if(t<c||e<c||n<c||r<c||t>h||e>h||n>h||r>h)if(e<t!=e<r&&n<t!=n<r)l(t,a),l(r,a);else{var f=3*(e-n)-t+r,d=2*(t+n)-4*e,p=e-t,g=m.solveQuadratic(f,d,p,u);l(r,0);for(var v=0;v<g;v++){var y=u[v],b=1-y;1e-8<=y&&y<=1-1e-8&&l(b*b*b*t+3*b*b*y*e+3*b*y*y*n+y*y*y*r,a)}}}}},c.each([\"getBounds\",\"getStrokeBounds\",\"getHandleBounds\"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=F[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),c.each({isStraight:function(t,e,n,r){if(e.isZero()&&n.isZero())return!0;var i=r.subtract(t);if(i.isZero())return!1;if(i.isCollinear(e)&&i.isCollinear(n)){var a=new E(t,r);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(r.add(n))<1e-7){var o=i.dot(i),s=i.dot(e)/o,u=i.dot(n)/o;return s>=0&&s<=1&&u<=0&&u>=-1}}return!1},isLinear:function(t,e,n,r){var i=r.subtract(t).divide(3);return e.equals(i)&&n.negate().equals(i)}},(function(t,e){this[e]=function(e){var n=this._segment1,r=this._segment2;return t(n._point,n._handleOut,r._handleIn,r._point,e)},this.statics[e]=function(e,n){var r=e[0],i=e[1],a=e[6],o=e[7];return t(new v(r,i),new v(e[2]-r,e[3]-i),new v(e[4]-a,e[5]-o),new v(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new z(this,t):null},getTimeAt:function(t,e){return D.getTimeAt(this.getValues(),t,e)},getParameterAt:\"#getTimeAt\",getTimesWithTangent:function(){var t=v.read(arguments);return t.isZero()?[]:D.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(v.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return D.getTimeOf(this.getValues(),v.read(arguments))},getParameterOf:\"#getTimeOf\",getNearestLocation:function(){var t=v.read(arguments),e=this.getValues(),n=D.getNearestTime(e,t),r=D.getPoint(e,n);return new z(this,n,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=[\"getPoint\",\"getTangent\",\"getNormal\",\"getWeightedTangent\",\"getWeightedNormal\",\"getCurvature\"];return c.each(t,(function(t){this[t+\"At\"]=function(e,n){var r=this.getValues();return D[t](r,n?e:D.getTimeAt(r,e))},this[t+\"AtTime\"]=function(e){return D[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=9*(r-a)+3*(s-e),c=6*(e+a)-12*r,h=3*(r-e),f=9*(i-o)+3*(u-n),d=6*(n+o)-12*i,p=3*(i-n);return function(t){var e=(l*t+c)*t+h,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,r){if(null==e||e<0||e>1)return null;var i=t[0],a=t[1],o=t[2],s=t[3],u=t[4],l=t[5],c=t[6],h=t[7],f=m.isZero;f(o-i)&&f(s-a)&&(o=i,s=a),f(u-c)&&f(l-h)&&(u=c,l=h);var d,p,g=3*(o-i),y=3*(u-o)-g,b=c-i-g-y,_=3*(s-a),x=3*(l-s)-_,w=h-a-_-x;if(0===n)d=0===e?i:1===e?c:((b*e+y)*e+g)*e+i,p=0===e?a:1===e?h:((w*e+x)*e+_)*e+a;else{if(e<1e-8?(d=g,p=_):e>1-1e-8?(d=3*(c-u),p=3*(h-l)):(d=(3*b*e+2*y)*e+g,p=(3*w*e+2*x)*e+_),r){0===d&&0===p&&(e<1e-8||e>1-1e-8)&&(d=u-o,p=l-s);var S=Math.sqrt(d*d+p*p);S&&(d/=S,p/=S)}if(3===n){u=6*b*e+2*y,l=6*w*e+2*x;var E=Math.pow(d*d+p*p,1.5);d=0!==E?(d*l-p*u)/E:0,p=0}}return 2===n?new v(p,-d):new v(d,p)}return{statics:{classify:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=r*(n-l)+i*(u-e)+e*l-n*u,h=3*(a*(i-n)+o*(e-r)+r*n-i*e),f=h-c,d=f-c+(e*(l-o)+n*(a-u)+u*o-l*a),p=Math.sqrt(d*d+f*f+h*h),g=0!==p?1/p:0,v=m.isZero;function y(t,e,n){var r=e!==s,i=r&&e>0&&e<1,a=r&&n>0&&n<1;return!r||(i||a)&&(\"loop\"!==t||i&&a)||(t=\"arch\",i=a=!1),{type:t,roots:i||a?i&&a?e<n?[e,n]:[n,e]:[i?e:n]:null}}if(f*=g,h*=g,v(d*=g))return v(f)?y(v(h)?\"line\":\"quadratic\"):y(\"serpentine\",h/(3*f));var b=3*f*f-4*d*h;if(v(b))return y(\"cusp\",f/(2*d));var _=b>0?Math.sqrt(b/3):Math.sqrt(-b),x=2*d;return y(b>0?\"serpentine\":\"loop\",(f+_)/x,(f-_)/x)},getLength:function(n,r,i,a){if(r===s&&(r=0),i===s&&(i=1),D.isStraight(n)){var o=n;i<1&&(o=D.subdivide(o,i)[0],r/=i),r>0&&(o=D.subdivide(o,r)[1]);var u=o[6]-o[0],l=o[7]-o[1];return Math.sqrt(u*u+l*l)}return m.integrate(a||t(n),r,i,e(r,i))},getTimeAt:function(n,r,i){if(i===s&&(i=r<0?1:0),0===r)return i;var a=Math.abs,o=r>0,u=o?i:0,l=o?1:i,c=t(n),h=D.getLength(n,u,l,c),f=a(r)-h;if(a(f)<1e-12)return o?l:u;if(f>1e-12)return null;var d=r/h,p=0;return m.findRoot((function(t){return p+=m.integrate(c,i,t,e(i,t)),i=t,p-r}),c,i+d,u,l,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=3*r-e-3*a+t[6],u=3*e-6*r+3*a,l=-3*e+3*r,c=3*i-n-3*o+t[7],h=3*n-6*i+3*o,f=-3*n+3*i,d=[];return m.solveCubic(9*(s*s+c*c),9*(s*u+h*c),2*(u*u+h*h)+3*(l*s+f*c),l*u+h*f,d,1e-8,1-1e-8),d.sort()}}}},new function(){function t(t,e,n,r,i,a,o){var s=!o&&n.getPrevious()===i,u=!o&&n!==i&&n.getNext()===i;if(null!==r&&r>=(s?1e-8:0)&&r<=(u?1-1e-8:1)&&null!==a&&a>=(u?1e-8:0)&&a<=(s?1-1e-8:1)){var l=new z(n,r,null,o),c=new z(i,a,null,o);l._intersection=c,c._intersection=l,e&&!e(l)||z.insert(t,l,!0)}}function e(r,i,a,o,s,u,l,c,h,f,d,p,m){if(++h>=4096||++c>=40)return h;var g,v,y=i[0],b=i[1],_=i[6],x=i[7],w=E.getSignedDistance,S=w(y,b,_,x,i[2],i[3]),M=w(y,b,_,x,i[4],i[5]),T=S*M>0?.75:4/9,C=T*Math.min(0,S,M),P=T*Math.max(0,S,M),k=w(y,b,_,x,r[0],r[1]),A=w(y,b,_,x,r[2],r[3]),O=w(y,b,_,x,r[4],r[5]),L=w(y,b,_,x,r[6],r[7]),I=function(t,e,n,r){var i,a=[0,t],o=[1/3,e],s=[2/3,n],u=[1,r],l=e-(2*t+r)/3,c=n-(t+2*r)/3;if(l*c<0)i=[[a,o,u],[a,s,u]];else{var h=l/c;i=[h>=2?[a,o,u]:h<=.5?[a,s,u]:[a,o,s,u],[a,u]]}return(l||c)<0?i.reverse():i}(k,A,O,L),N=I[0],R=I[1];if(0===S&&0===M&&0===k&&0===A&&0===O&&0===L||null==(g=n(N,R,C,P))||null==(v=n(N.reverse(),R.reverse(),C,P)))return h;var z=f+(d-f)*g,B=f+(d-f)*v;if(Math.max(m-p,B-z)<1e-9){var F=(z+B)/2,j=(p+m)/2;t(s,u,l?o:a,l?j:F,l?a:o,l?F:j)}else if(r=D.getPart(r,g,v),v-g>.8)if(B-z>m-p){F=(z+B)/2;h=e(i,(U=D.subdivide(r,.5))[0],o,a,s,u,!l,c,h,p,m,z,F),h=e(i,U[1],o,a,s,u,!l,c,h,p,m,F,B)}else{var U;j=(p+m)/2;h=e((U=D.subdivide(i,.5))[0],r,o,a,s,u,!l,c,h,p,j,z,B),h=e(U[1],r,o,a,s,u,!l,c,h,j,m,z,B)}else h=m-p>=1e-9?e(i,r,o,a,s,u,!l,c,h,p,m,z,B):e(r,i,a,o,s,u,l,c,h,z,B,p,m);return h}function n(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0]}function r(t,e,n){for(var r=t[0][0],i=t[0][1],a=1,o=t.length;a<o;a++){var s=t[a][0],u=t[a][1];if(e?u>=n:u<=n)return u===n?s:r+(n-i)*(s-r)/(u-i);r=s,i=u}return null}function i(t,e,n,r,i){var a=m.isZero;if(a(r)&&a(i)){var o=D.getTimeOf(t,new v(e,n));return null===o?[]:[o]}for(var s=Math.atan2(-i,r),u=Math.sin(s),l=Math.cos(s),c=[],h=[],f=0;f<8;f+=2){var d=t[f]-e,p=t[f+1]-n;c.push(d*l-p*u,d*u+p*l)}return D.solveCubic(c,1,0,h,0,1),h}function a(e,n,r,a,o,s,u){for(var l=n[0],c=n[1],h=i(e,l,c,n[6]-l,n[7]-c),f=0,d=h.length;f<d;f++){var p=h[f],m=D.getPoint(e,p),g=D.getTimeOf(n,m);null!==g&&t(o,s,u?a:r,u?g:p,u?r:a,u?p:g)}}function o(e,n,r,i,a,o){var s=E.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(a,o,r,D.getTimeOf(e,s),i,D.getTimeOf(n,s))}function s(n,r,i,s,u,c){var h=Math.min,f=Math.max;if(f(n[0],n[2],n[4],n[6])+1e-12>h(r[0],r[2],r[4],r[6])&&h(n[0],n[2],n[4],n[6])-1e-12<f(r[0],r[2],r[4],r[6])&&f(n[1],n[3],n[5],n[7])+1e-12>h(r[1],r[3],r[5],r[7])&&h(n[1],n[3],n[5],n[7])-1e-12<f(r[1],r[3],r[5],r[7])){var d=l(n,r);if(d)for(var p=0;p<2;p++){var m=d[p];t(u,c,i,m[0],s,m[1],!0)}else{var g=D.isStraight(n),y=D.isStraight(r),b=g&&y,_=g&&!y,x=u.length;if((b?o:g||y?a:e)(_?r:n,_?n:r,_?s:i,_?i:s,u,c,_,0,0,0,1,0,1),!b||u.length===x)for(p=0;p<4;p++){var w=p>>1,S=1&p,E=6*w,M=6*S,T=new v(n[E],n[E+1]),C=new v(r[M],r[M+1]);T.isClose(C,1e-12)&&t(u,c,i,w,s,S)}}}return u}function u(e,n,r,i){var a=D.classify(e);if(\"loop\"===a.type){var o=a.roots;t(r,i,n,o[0],n,o[1])}return r}function l(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var r=Math.abs,i=E.getDistance,a=D.isStraight(t),o=D.isStraight(e),s=a&&o,u=n(t)<n(e),l=u?e:t,c=u?t:e,h=l[0],f=l[1],d=l[6]-h,p=l[7]-f;if(i(h,f,d,p,c[0],c[1],!0)<1e-7&&i(h,f,d,p,c[6],c[7],!0)<1e-7)!s&&i(h,f,d,p,l[2],l[3],!0)<1e-7&&i(h,f,d,p,l[4],l[5],!0)<1e-7&&i(h,f,d,p,c[2],c[3],!0)<1e-7&&i(h,f,d,p,c[4],c[5],!0)<1e-7&&(a=o=s=!0);else if(s)return null;if(a^o)return null;for(var m=[t,e],g=[],y=0;y<4&&g.length<2;y++){var b=1&y,_=1^b,x=y>>1,w=D.getTimeOf(m[b],new v(m[_][x?6:0],m[_][x?7:1]));if(null!=w){var S=b?[x,w]:[w,x];(!g.length||r(S[0]-g[0][0])>1e-8&&r(S[1]-g[0][1])>1e-8)&&g.push(S)}if(y>2&&!g.length)break}if(2!==g.length)g=null;else if(!s){var M=D.getPart(t,g[0][0],g[1][0]),T=D.getPart(e,g[0][1],g[1][1]);(r(T[2]-M[2])>1e-7||r(T[3]-M[3])>1e-7||r(T[4]-M[4])>1e-7||r(T[5]-M[5])>1e-7)&&(g=null)}return g}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?s(e,n,this,t,[]):u(e,this,[])},statics:{getOverlaps:l,getIntersections:function(t,e,n,r,i,a){var o=!e;o&&(e=t);for(var l,h,f=t.length,d=e.length,p=[],m=[],g=0;g<d;g++)p[g]=e[g].getValues(i);for(g=0;g<f;g++){var v=t[g],y=o?p[g]:v.getValues(r),b=v.getPath();b!==h&&(h=b,l=[],m.push(l)),o&&u(y,v,l,n);for(var _=o?g+1:0;_<d;_++){if(a&&l.length)return l;s(y,p[_],v,e[_],l,n)}}l=[],g=0;for(var x=m.length;g<x;g++)c.push(l,m[g]);return l},getCurveLineIntersections:i,getTimesWithTangent:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=e.normalize(),h=c.x,f=c.y,d=3*u-9*o+9*i-3*n,p=3*l-9*s+9*a-3*r,g=6*o-12*i+6*n,v=6*s-12*a+6*r,y=3*i-3*n,b=3*a-3*r,_=2*d*f-2*p*h,x=[];if(Math.abs(_)<m.CURVETIME_EPSILON){if(0!=(_=d*v-p*g)){var w=-(d*b-p*y)/_;w>=0&&w<=1&&x.push(w)}}else{var S=(g*g-4*d*y)*f*f+(-2*g*v+4*p*y+4*d*b)*h*f+(v*v-4*p*b)*h*h,E=g*f-v*h;if(S>=0&&0!=_){var M=Math.sqrt(S),T=-(E+M)/_,C=(-E+M)/_;T>=0&&T<=1&&x.push(T),C>=0&&C<=1&&x.push(C)}}return x}}}}),z=c.extend({_class:\"CurveLocation\",initialize:function(t,e,n,r,i){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:\"#getTime\",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var r=e.getCurves(),i=0;i<n;i++)t+=r[i].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof z){var r=this.getCurve(),i=t.getCurve(),a=r._path;if(a===i._path){var o=Math.abs,s=o(this.getOffset()-t.getOffset()),u=!e&&this._intersection,l=!e&&t._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!u&&!l||u&&l&&u.equals(l,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=p.instance;e&&t.push(\"point: \"+e);var r=this.getIndex();null!=r&&t.push(\"index: \"+r);var i=this.getTime();return null!=i&&t.push(\"time: \"+n.number(i)),null!=this._distance&&t.push(\"distance: \"+n.number(this._distance)),\"{ \"+t.join(\", \")+\" }\"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),r=e>=1e-8&&e<=1-1e-8,i=n>=1e-8&&n<=1-1e-8;if(r&&i)return!this.isTouching();var a=this.getCurve(),o=e<1e-8?a.getPrevious():a,s=t.getCurve(),u=n<1e-8?s.getPrevious():s;if(e>1-1e-8&&(a=a.getNext()),n>1-1e-8&&(s=s.getNext()),!(o&&a&&u&&s))return!1;var l=[];function c(t,e){var n=t.getValues(),r=D.classify(n).roots||D.getPeaks(n),i=r.length,a=e&&i>1?r[i-1]:i>0?r[0]:.5;l.push(D.getLength(n,e?a:0,e?1:a)/2)}function h(t,e,n){return e<n?t>e&&t<n:t>e||t<n}r||(c(o,!0),c(a,!1)),i||(c(u,!0),c(s,!1));var f=this.getPoint(),d=Math.min.apply(Math,l),p=r?a.getTangentAtTime(e):a.getPointAt(d).subtract(f),m=r?p.negate():o.getPointAt(-d).subtract(f),g=i?s.getTangentAtTime(n):s.getPointAt(d).subtract(f),v=i?g.negate():u.getPointAt(-d).subtract(f),y=m.getAngle(),b=p.getAngle(),_=v.getAngle(),x=g.getAngle();return!!(r?h(y,_,x)^h(b,_,x)&&h(y,x,_)^h(b,x,_):h(_,y,b)^h(x,y,b)&&h(_,b,y)^h(x,b,y))},hasOverlap:function(){return!!this._overlap}},c.each(D._evaluateMethods,(function(t){var e=t+\"At\";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var r=t.length,i=0,a=r-1;function o(n,i){for(var a=n+i;a>=-1&&a<=r;a+=i){var o=t[(a%r+r)%r];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;i<=a;){var s,u=i+a>>>1,l=t[u];if(n&&(s=e.equals(l)?l:o(u,-1)||o(u,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),h=l.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()))<0?a=u-1:i=u+1}return t.splice(i,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),r=e.length-1;r>=0;r--)t(n,e[r]._intersection,!1);return n}}}}),B=T.extend({_class:\"PathItem\",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,r;if(c.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:\"string\"==typeof t&&(e=t),n){var i=n[0];r=i&&Array.isArray(i[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\\s*\\S+/i.test(e));return new(r?j:F)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,r,i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new v,s=new v;function u(t,n){var r=+e[t];return a&&(r+=o[n]),r}function l(t){return new v(u(t,\"x\"),u(t+1,\"y\"))}this.clear();for(var c=0,h=i&&i.length;c<h;c++){var f=i[c],d=f[0],p=d.toLowerCase(),m=(e=f.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g))&&e.length;switch(a=d===p,\"z\"!==n||/[mz]/.test(p)||this.moveTo(o),p){case\"m\":case\"l\":for(var g=\"m\"===p,y=0;y<m;y+=2)this[g?\"moveTo\":\"lineTo\"](o=l(y)),g&&(s=o,g=!1);r=o;break;case\"h\":case\"v\":var _=\"h\"===p?\"x\":\"y\";o=o.clone();for(y=0;y<m;y++)o[_]=u(y,_),this.lineTo(o);r=o;break;case\"c\":for(y=0;y<m;y+=6)this.cubicCurveTo(l(y),r=l(y+2),o=l(y+4));break;case\"s\":for(y=0;y<m;y+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(r):o,r=l(y),o=l(y+2)),n=p;break;case\"q\":for(y=0;y<m;y+=4)this.quadraticCurveTo(r=l(y),o=l(y+2));break;case\"t\":for(y=0;y<m;y+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?o.multiply(2).subtract(r):o,o=l(y)),n=p;break;case\"a\":for(y=0;y<m;y+=7)this.arcTo(o=l(y+5),new b(+e[y],+e[y+1]),+e[y+2],+e[y+4],+e[y+3]);break;case\"z\":this.closePath(1e-12),o=s}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!(\"evenodd\"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,r){var i=this===t||!t,a=this._matrix._orNullIfIdentity(),o=i?a:(n||t._matrix)._orNullIfIdentity();return i||this.getBounds(a).intersects(t.getBounds(o),1e-12)?D.getIntersections(this.getCurves(),!i&&t.getCurves(),e,a,o,r):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.hasOverlap()||t.isCrossing()}))},getNearestLocation:function(){for(var t=v.read(arguments),e=this.getCurves(),n=1/0,r=null,i=0,a=e.length;i<a;i++){var o=e[i].getNearestLocation(t);o._distance<n&&(n=o._distance,r=o)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var r=!this._children,i=r?\"_segments\":\"_children\",a=t[i],o=e[i],s=this[i];if(!a||!o||a.length!==o.length)throw new Error(\"Invalid operands in interpolate() call: \"+t+\", \"+e);var u=s.length,l=o.length;if(u<l)for(var c=r?N:F,h=u;h<l;h++)this.add(new c);else u>l&&this[r?\"removeSegments\":\"removeChildren\"](l,u);for(h=0;h<l;h++)s[h].interpolate(a[h],o[h],n);r&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],r=t._children?t._children.slice():[t],i=n.length,a=r.length,o=[],s=0;e=!0;for(var u=i-1;u>=0&&e;u--){var l=n[u];e=!1;for(var c=a-1;c>=0&&!e;c--)l.compare(r[c])&&(o[c]||(o[c]=!0,s++),e=!0)}e=e&&s===a}return e}}),F=B.extend({_class:\"Path\",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?\"object\"==typeof t[0]?t:arguments:!t||t.size!==s||t.x===s&&t.point===s?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=s,this._segmentSelection=0,e||\"string\"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=s,32&e)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=s)},getStyle:function(){var t=this._parent;return(t instanceof j?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,n){var r=t[n-1];\"boolean\"==typeof r&&(this.setClosed(r),n--),this._add(N.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var r=0;r<n;r++)t[r]=new D(this,e[r],e[r+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new D(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,r,i,a,o,s,u,l,c=this._segments,h=c.length,f=new p(e),d=new Array(6),m=!0,g=[];function v(e,c){if(e._transformCoordinates(t,d),n=d[0],r=d[1],m)g.push(\"M\"+f.pair(n,r)),m=!1;else if(o=d[2],s=d[3],o===n&&s===r&&u===i&&l===a){if(!c){var h=n-i,p=r-a;g.push(0===h?\"v\"+f.number(p):0===p?\"h\"+f.number(h):\"l\"+f.pair(h,p))}}else g.push(\"c\"+f.pair(u-i,l-a)+\" \"+f.pair(o-i,s-a)+\" \"+f.pair(n-i,r-a));i=n,a=r,u=d[4],l=d[5]}if(!h)return\"\";for(var y=0;y<h;y++)v(c[y]);return this._closed&&h>0&&(v(c[0],!0),g.push(\"z\")),g.join(\"\")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),r=0,i=e.length;r<i;r++)e[r]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,r=this._curves,i=t.length,a=null==e,o=(e=a?n.length:e,0);o<i;o++){var s=t[o];s._path&&(s=t[o]=s.clone()),s._path=this,s._index=e+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)c.push(n,t);else{n.splice.apply(n,[e,0].concat(t));o=e+i;for(var u=n.length;o<u;o++)n[o]._index=o}if(r){var l=this._countCurves(),h=e>0&&e+i-1===l?e-1:e,f=h,d=Math.min(h+i,l);t._curves&&(r.splice.apply(r,[h,0].concat(t._curves)),f+=t._curves.length);for(o=f;o<d;o++)r.splice(o,0,new D(this,null,null));this._adjustCurves(h,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,r=this._segments,i=this._curves,a=t;a<e;a++)(n=i[a])._path=this,n._segment1=r[a],n._segment2=r[a+1]||r[0],n._changed();(n=i[this._closed&&!t?r.length-1:t-1])&&(n._segment2=r[t]||r[0],n._changed()),(n=i[e])&&(n._segment1=r[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&\"number\"!=typeof t?this._add(N.readList(arguments)):this._add([N.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&\"number\"!=typeof e?this._add(N.readList(arguments,1),t):this._add([N.read(arguments,1)],t)[0]},addSegment:function(){return this._add([N.read(arguments)])[0]},insertSegment:function(t){return this._add([N.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(N.readList(t))},insertSegments:function(t,e){return this._add(N.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=c.pick(e,this._segments.length);var r=this._segments,i=this._curves,a=r.length,o=r.splice(t,e-t),s=o.length;if(!s)return o;for(var u=0;u<s;u++){var l=o[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}u=t;for(var h=r.length;u<h;u++)r[u]._index=u;if(i){var f=t>0&&e===a+(this._closed?1:0)?t-1:t;for(u=(i=i.splice(f,s)).length-1;u>=0;u--)i[u]._path=null;n&&(o._curves=i.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:\"#removeSegments\",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,r=t.length;n<r;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var r=0,i=e.length;r<i;r++){var a=r+1===i;t+=D.getArea(D.getValues(e[r],e[a?0:r+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,r=t?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)e[i]._selection=r},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,r=e&&e.time;r>1-1e-8&&(n++,r=0);var i=this.getCurves();if(n>=0&&n<i.length){r>=1e-8&&i[n++].divideAtTime(r);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new F(T.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(t,e){var n,r=e===s?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var r=t._segments,i=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;i&&i._point.isClose(a._point,n)&&t.reverse();var o=t.getFirstSegment();if(i&&i._point.isClose(o._point,n))i.setHandleOut(o._handleOut),this._add(r.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&t.reverse(),a=t.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,r=n?1e-7:0,i=e.length-1;i>=0;i--){var a=e[i];!a.hasHandles()&&(!a.hasLength(r)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new U(this,t||.25,256,!0).parts,n=e.length,r=[],i=0;i<n;i++)r.push(new N(e[i].curve.slice(0,2)));!this._closed&&n>0&&r.push(new N(e[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var e=new V(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,n=t||{},r=n.type||\"asymmetric\",i=this._segments,a=i.length,o=this._closed;function u(t,n){var r=t&&t.index;if(null!=r){var i=t.path;if(i&&i!==e)throw new Error(t._class+\" \"+r+\" of \"+i+\" is not part of \"+e);n&&t instanceof D&&r++}else r=\"number\"==typeof t?t:n;return Math.min(r<0&&o?r%a:r<0?r+a:r,a-1)}var l=o&&n.from===s&&n.to===s,c=u(n.from,0),h=u(n.to,a-1);if(c>h)if(o)c-=a;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(r)){var d=\"asymmetric\"===r,p=Math.min,m=h-c+1,g=m-1,v=l?p(m,4):1,y=v,b=v,_=[];if(o||(y=p(1,c),b=p(1,a-h-1)),(g+=y+b)<=1)return;for(var x=0,w=c-y;x<=g;x++,w++)_[x]=i[(w<0?w+a:w)%a]._point;var S=_[0]._x+2*_[1]._x,E=_[0]._y+2*_[1]._y,M=2,T=g-1,C=[S],P=[E],k=[M],A=[],O=[];for(x=1;x<g;x++){var L=x<T,I=L?4:d?2:7,N=L?4:d?3:8,R=L?2:d?0:1,z=(L?1:d?1:2)/M;M=k[x]=I-z,S=C[x]=N*_[x]._x+R*_[x+1]._x-z*S,E=P[x]=N*_[x]._y+R*_[x+1]._y-z*E}A[T]=C[T]/k[T],O[T]=P[T]/k[T];for(x=g-2;x>=0;x--)A[x]=(C[x]-A[x+1])/k[x],O[x]=(P[x]-O[x+1])/k[x];A[g]=(3*_[g]._x-A[T])/2,O[g]=(3*_[g]._y-O[T])/2;x=y;var B=g-b;for(w=c;x<=B;x++,w++){var F=i[w<0?w+a:w],j=F._point,U=A[x]-j._x,V=O[x]-j._y;(l||x<B)&&F.setHandleOut(U,V),(l||x>y)&&F.setHandleIn(-U,-V)}}else for(x=c;x<=h;x++)i[x<0?x+a:x].smooth(n,!l&&x===c,!l&&x===h)},toShape:function(t){if(!this._closed)return null;var e,n,r,i,a,o,u,l=this._segments;function c(t,e){var n=l[t],r=n.getNext(),i=l[e],a=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&a._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(a._point.subtract(i._point))}function h(t){var e=l[t],n=e.getNext(),r=e._handleOut,i=n._handleIn;if(r.isOrthogonal(i)){var a=e._point,o=n._point,s=new E(a,r,!0).intersect(new E(o,i,!0),!0);return s&&m.isZero(r.getLength()/s.subtract(a).getLength()-.5522847498307936)&&m.isZero(i.getLength()/s.subtract(o).getLength()-.5522847498307936)}return!1}function f(t,e){return l[t]._point.getDistance(l[e]._point)}if(!this.hasHandles()&&4===l.length&&c(0,2)&&c(1,3)&&(a=l[1],o=a.getPrevious(),u=a.getNext(),o._handleOut.isZero()&&a._handleIn.isZero()&&a._handleOut.isZero()&&u._handleIn.isZero()&&a._point.subtract(o._point).isOrthogonal(u._point.subtract(a._point)))?(e=k.Rectangle,n=new b(f(0,3),f(0,1)),i=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&h(0)&&h(2)&&h(4)&&h(6)&&c(1,5)&&c(3,7)?(e=k.Rectangle,r=(n=new b(f(1,6),f(0,3))).subtract(new b(f(0,7),f(1,2))).divide(2),i=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&h(0)&&h(1)&&h(2)&&h(3)&&(m.isZero(f(0,2)-f(1,3))?(e=k.Circle,r=f(0,2)/2):(e=k.Ellipse,r=new b(f(2,0)/2,f(3,1)/2)),i=l[1]._point),e){var d=this.getPosition(!0),p=new e({center:d,size:n,radius:r,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(i.subtract(d).getAngle()+90),(t===s||t)&&p.insertAbove(this),p}return null},toPath:\"#clone\",compare:function t(e){if(!e||e instanceof j)return t.base.call(this,e);var n=this.getCurves(),r=e.getCurves(),i=n.length,a=r.length;if(!i||!a)return i==a;for(var o,s,u=n[0].getValues(),l=[],c=0,h=0,f=0;f<a;f++){var d=r[f].getValues();if(l.push(d),g=D.getOverlaps(u,d)){o=!f&&g[0][0]>0?a-1:f,s=g[0][1];break}}var p,m=Math.abs;for(d=l[o];u&&d;){var g;if(g=D.getOverlaps(u,d))if(m(g[0][0]-h)<1e-8){1===(h=g[1][0])&&(u=++c<i?n[c].getValues():null,h=0);var v=g[0][1];if(m(v-s)<1e-8){if(p||(p=[o,v]),1===(s=g[1][1])&&(++o>=a&&(o=0),d=l[o]||r[o].getValues(),s=0),!u)return p[0]===o&&p[1]===s;continue}}break}return!1},_hitTestSelf:function(t,e,n,r){var i,a,o,s,u,l,c=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,m=e._tolerancePadding,g=m,v=e.stroke&&h.hasStroke(),y=e.fill&&h.hasFill(),b=e.curves,_=v?h.getStrokeWidth()/2:y&&e.tolerance>0||b?0:null;function x(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,r){if(!e.selected||n.isSelected()){var i=t._point;if(n!==i&&(n=n.add(i)),x(n,g))return new I(r,c,{segment:t,point:n})}}function S(t,n){return(n||e.segments)&&w(t,t._point,\"segment\")||!n&&e.handles&&(w(t,t._handleIn,\"handle-in\")||w(t,t._handleOut,\"handle-out\"))}function E(t){s.add(t)}function M(e){var n,u=p||e._index>0&&e._index<d-1;return\"round\"===(u?i:a)?x(e._point,g):(s=new F({internal:!0,closed:!0}),u?e.isSmooth()||F._addBevelJoin(e,i,_,o,null,r,E,!0):\"square\"===a&&F._addSquareCap(e,a,_,null,r,E,!0),s.isEmpty()?void 0:s.contains(t)||(n=s.getNearestLocation(t))&&x(n.getPoint(),m))}if(null!==_&&(_>0?(i=h.getStrokeJoin(),a=h.getStrokeCap(),o=h.getMiterLimit(),g=g.add(F._getStrokePadding(_,r))):i=a=\"round\"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var T=0;T<d;T++)if(l=S(f[T]))return l}else if(l=S(f[0],!0)||S(f[d-1],!0))return l;if(null!==_){if(u=this.getNearestLocation(t)){var C=u.getTime();0===C||1===C&&d>1?M(u.getSegment())||(u=null):x(u.getPoint(),g)||(u=null)}if(!u&&\"miter\"===i&&d>1)for(T=0;T<d;T++){var P=f[T];if(t.getDistance(P._point)<=o*_&&M(P)){u=P.getLocation();break}}}return!u&&y&&this._contains(t)||u&&!v&&!b?new I(\"fill\",this):u?new I(v?\"stroke\":\"curve\",this,{location:u,point:u.getPoint()}):null}},c.each(D._evaluateMethods,(function(t){this[t+\"At\"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=v.read(arguments),e=this.getCurves(),n=0,r=e.length;n<r;n++){var i=e[n].getLocationOf(t);if(i)return i}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(\"number\"==typeof t){for(var e=this.getCurves(),n=0,r=0,i=e.length;r<i;r++){var a=n,o=e[r];if((n+=o.getLength())>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new z(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=v.read(arguments);if(t.isZero())return[];for(var e=[],n=0,r=this.getCurves(),i=0,a=r.length;i<a;i++){for(var o=r[i],s=o.getTimesWithTangent(t),u=0,l=s.length;u<l;u++){var c=n+o.getOffsetAtTime(s[u]);e.indexOf(c)<0&&e.push(c)}n+=o.length}return e}}),new function(){function t(t,e,n){var r,i,a,o,s,u,l,c,h=e._segments,f=h.length,d=new Array(6),p=!0;function m(e){if(n)e._transformCoordinates(n,d),r=d[0],i=d[1];else{var h=e._point;r=h._x,i=h._y}if(p)t.moveTo(r,i),p=!1;else{if(n)s=d[2],u=d[3];else{var f=e._handleIn;s=r+f._x,u=i+f._y}s===r&&u===i&&l===a&&c===o?t.lineTo(r,i):t.bezierCurveTo(l,c,s,u,r,i)}if(a=r,o=i,n)l=d[4],c=d[5];else{f=e._handleOut;l=a+f._x,c=o+f._y}}for(var g=0;g<f;g++)m(h[g]);e._closed&&f>0&&m(h[0])}return{_draw:function(e,n,r,i){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),u=s.hasFill(),l=s.hasStroke(),c=s.getDashArray(),h=!ht.support.nativeDash&&l&&c&&c.length;function f(t){return c[(t%h+h)%h]}if(a||e.beginPath(),(u||l&&!h||o)&&(t(e,this,i),this._closed&&e.closePath()),!o&&(u||l)&&(this._setStyles(e,n,r),u&&(e.fill(s.getFillRule()),e.shadowColor=\"rgba(0,0,0,0)\"),l)){if(h){a||e.beginPath();var d,p=new U(this,.25,32,!1,i),m=p.length,g=-s.getDashOffset(),v=0;for(g%=m;g>0;)g-=f(v--)+f(v--);for(;g<m;)d=g+f(v++),(g>0||d>0)&&p.drawPart(e,Math.max(g,0),Math.max(d,0)),g=d+f(v++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,r){if(!(r<=0))for(var i,a,o=r/2,s=r-2,u=o-1,l=new Array(6),c=0,h=e.length;c<h;c++){var f=e[c],d=f._selection;if(f._transformCoordinates(n,l),i=l[0],a=l[1],2&d&&m(2),4&d&&m(4),t.fillRect(i-o,a-o,r,r),s>0&&!(1&d)){var p=t.fillStyle;t.fillStyle=\"#ffffff\",t.fillRect(i-u,a-u,s,s),t.fillStyle=p}}function m(e){var n=l[e],r=l[e+1];i==n&&a==r||(t.beginPath(),t.moveTo(i,a),t.lineTo(n,r),t.stroke(),t.beginPath(),t.arc(n,r,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ht.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error(\"Use a moveTo() command first\");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new N(v.read(arguments))])},moveBy:function(){throw new Error(\"moveBy() is unsupported on Path items.\")},lineTo:function(){this._add([new N(v.read(arguments))])},cubicCurveTo:function(){var e=v.read(arguments),n=v.read(arguments),r=v.read(arguments),i=t(this);i.setHandleOut(e.subtract(i._point)),this._add([new N(r,n.subtract(r))])},quadraticCurveTo:function(){var e=v.read(arguments),n=v.read(arguments),r=t(this)._point;this.cubicCurveTo(e.add(r.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=v.read(arguments),n=v.read(arguments),r=c.pick(c.read(arguments),.5),i=1-r,a=t(this)._point,o=e.subtract(a.multiply(i*i)).subtract(n.multiply(r*r)).divide(2*r*i);if(o.isNaN())throw new Error(\"Cannot put a curve through points with parameter = \"+r);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,r,i,a=Math.abs,o=Math.sqrt,s=t(this),u=s._point,l=v.read(arguments),h=c.peek(arguments);if(\"boolean\"==typeof(y=c.pick(h,!0)))var f=(x=u.add(l).divide(2)).add(x.subtract(u).rotate(y?-90:90));else if(c.remain(arguments)<=2)f=l,l=v.read(arguments);else if(!u.equals(l)){var d=b.read(arguments),p=m.isZero;if(p(d.width)||p(d.height))return this.lineTo(l);var g=c.read(arguments),y=!!c.read(arguments),_=!!c.read(arguments),x=u.add(l).divide(2),w=(X=u.subtract(x).rotate(-g)).x,M=X.y,T=a(d.width),C=a(d.height),P=T*T,k=C*C,A=w*w,O=M*M,L=o(A/P+O/k);if(L>1&&(P=(T*=L)*T,k=(C*=L)*C),a(L=(P*k-P*O-k*A)/(P*O+k*A))<1e-12&&(L=0),L<0)throw new Error(\"Cannot create an arc with the given arguments\");e=new v(T*M/C,-C*w/T).multiply((_===y?-1:1)*o(L)).rotate(g).add(x),n=(r=(i=(new S).translate(e).rotate(g).scale(T,C))._inverseTransform(u)).getDirectedAngle(i._inverseTransform(l)),!y&&n>0?n-=360:y&&n<0&&(n+=360)}if(f){var I=new E(u.add(f).divide(2),f.subtract(u).rotate(90),!0),R=new E(f.add(l).divide(2),l.subtract(f).rotate(90),!0),D=new E(u,l),z=D.getSide(f);if(!(e=I.intersect(R,!0))){if(!z)return this.lineTo(l);throw new Error(\"Cannot create an arc with the given arguments\")}n=(r=u.subtract(e)).getDirectedAngle(l.subtract(e));var B=D.getSide(e,!0);0===B?n=z*a(n):z===B&&(n+=n<0?360:-360)}if(n){for(var F=1e-7,j=a(n),U=j>=360?4:Math.ceil((j-F)/90),V=n/U,H=V*Math.PI/360,G=4/3*Math.sin(H)/(1+Math.cos(H)),W=[],q=0;q<=U;q++){var X=l,Y=null;if(q<U&&(Y=r.rotate(90).multiply(G),i?(X=i._transformPoint(r),Y=i._transformPoint(r.add(Y)).subtract(X)):X=e.add(r)),q){var Q=r.rotate(-90).multiply(G);i&&(Q=i._transformPoint(r.add(Q)).subtract(X)),W.push(new N(X,Q,Y))}else s.setHandleOut(Y);r=r.rotate(V)}this._add(W)}},lineBy:function(){var e=v.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=v.read(arguments),n=v.read(arguments),r=c.read(arguments),i=t(this)._point;this.curveTo(i.add(e),i.add(n),r)},cubicCurveBy:function(){var e=v.read(arguments),n=v.read(arguments),r=v.read(arguments),i=t(this)._point;this.cubicCurveTo(i.add(e),i.add(n),i.add(r))},quadraticCurveBy:function(){var e=v.read(arguments),n=v.read(arguments),r=t(this)._point;this.quadraticCurveTo(r.add(e),r.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(v.read(arguments)),r=c.pick(c.peek(arguments),!0);\"boolean\"==typeof r?this.arcTo(n,r):this.arcTo(n,e.add(v.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?\"getHandleBounds\":e.stroke?\"getStrokeBounds\":\"getBounds\";return F[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,r,i,a){var o=t[0];if(!o)return new x;var s=new Array(6),u=o._transformCoordinates(r,new Array(6)),l=u.slice(0,2),c=l.slice(),h=new Array(2);function f(t){t._transformCoordinates(r,s);for(var e=0;e<2;e++)D._addBounds(u[e],u[e+4],s[e+2],s[e],e,a?a[e]:0,l,c,h);var n=u;u=s,s=n}for(var d=1,p=t.length;d<p;d++)f(t[d]);return e&&f(o),new x(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,n,r,i){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),u=o&&n._getStrokeMatrix(r,i),l=o&&F._getStrokePadding(s,u),c=F.getBounds(t,e,n,r,i,l);if(!o)return c;var h=s/2,f=a.getStrokeJoin(),d=a.getStrokeCap(),p=a.getMiterLimit(),m=new x(new b(l));function g(t){c=c.include(t)}function v(t){c=c.unite(m.setCenter(t._point.transform(r)))}function y(t,e){\"round\"===e||t.isSmooth()?v(t):F._addBevelJoin(t,e,h,p,r,u,g)}function _(t,e){\"round\"===e?v(t):F._addSquareCap(t,e,h,r,u,g)}for(var w=t.length-(e?0:1),S=1;S<w;S++)y(t[S],f);return e?y(t[0],f):w>0&&(_(t[0],d),_(t[t.length-1],d)),c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new v(t,0).transform(e),r=new v(0,t).transform(e),i=n.getAngleInRadians(),a=n.getLength(),o=r.getLength(),s=Math.sin(i),u=Math.cos(i),l=Math.tan(i),c=Math.atan2(o*l,a),h=Math.atan2(o,l*a);return[Math.abs(a*Math.cos(c)*u+o*Math.sin(c)*s),Math.abs(o*Math.sin(h)*u+a*Math.cos(h)*s)]},_addBevelJoin:function(t,e,n,r,i,a,o,s){var u=t.getCurve(),l=u.getPrevious(),c=u.getPoint1().transform(i),h=l.getNormalAtTime(1).multiply(n).transform(a),f=u.getNormalAtTime(0).multiply(n).transform(a),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),s&&o(c),o(c.add(h)),\"miter\"===e){var p=new E(c.add(h),new v(-h.y,h.x),!0).intersect(new E(c.add(f),new v(-f.y,f.x),!0),!0);p&&c.getDistance(p)<=r*n&&o(p)}o(c.add(f))},_addSquareCap:function(t,e,n,r,i,a,o){var s=t._point.transform(r),u=t.getLocation(),l=u.getNormal().multiply(0===u.getTime()?n:-n).transform(i);\"square\"===e&&(o&&(a(s.subtract(l)),a(s.add(l))),s=s.add(l.rotate(-90))),a(s.add(l)),a(s.subtract(l))},getHandleBounds:function(t,e,n,r,i){var a,o,s=n.getStyle();if(i.stroke&&s.hasStroke()){var u=n._getStrokeMatrix(r,i),l=s.getStrokeWidth()/2,c=l;\"miter\"===s.getStrokeJoin()&&(c=l*s.getMiterLimit()),\"square\"===s.getStrokeCap()&&(c=Math.max(c,l*Math.SQRT2)),a=F._getStrokePadding(l,u),o=F._getStrokePadding(c,u)}for(var h=new Array(6),f=1/0,d=-f,p=f,m=d,g=0,v=t.length;g<v;g++){t[g]._transformCoordinates(r,h);for(var y=0;y<6;y+=2){var b=y?a:o,_=b?b[0]:0,w=b?b[1]:0,S=h[y],E=h[y+1],M=S-_,T=S+_,C=E-w,P=E+w;M<f&&(f=M),T>d&&(d=T),C<p&&(p=C),P>m&&(m=P)}}return new x(f,p,d-f,m-p)}}});F.inject({statics:new function(){var t=.5522847498307936,e=[new N([-1,0],[0,t],[0,-t]),new N([0,-1],[-t,0],[t,0]),new N([1,0],[0,-t],[0,t]),new N([0,1],[t,0],[-t,0])];function n(t,e,n){var r=c.getNamed(n),i=new F(r&&0==r.insert&&T.NO_INSERT);return i._add(t),i._closed=e,i.set(r,{insert:!0})}function r(t,r,i){for(var a=new Array(4),o=0;o<4;o++){var s=e[o];a[o]=new N(s._point.multiply(r).add(t),s._handleIn.multiply(r),s._handleOut.multiply(r))}return n(a,!0,i)}return{Line:function(){return n([new N(v.readNamed(arguments,\"from\")),new N(v.readNamed(arguments,\"to\"))],!1,arguments)},Circle:function(){var t=v.readNamed(arguments,\"center\"),e=c.readNamed(arguments,\"radius\");return r(t,new b(e),arguments)},Rectangle:function(){var e,r=x.readNamed(arguments,\"rectangle\"),i=b.readNamed(arguments,\"radius\",0,{readNull:!0}),a=r.getBottomLeft(!0),o=r.getTopLeft(!0),s=r.getTopRight(!0),u=r.getBottomRight(!0);if(!i||i.isZero())e=[new N(a),new N(o),new N(s),new N(u)];else{var l=(i=b.min(i,r.getSize(!0).divide(2))).width,c=i.height,h=l*t,f=c*t;e=[new N(a.add(l,0),null,[-h,0]),new N(a.subtract(0,c),[0,f]),new N(o.add(0,c),null,[0,-f]),new N(o.add(l,0),[-h,0],null),new N(s.subtract(l,0),null,[h,0]),new N(s.add(0,c),[0,-f],null),new N(u.subtract(0,c),null,[0,f]),new N(u.subtract(l,0),[h,0])]}return n(e,!0,arguments)},RoundRectangle:\"#Rectangle\",Ellipse:function(){var t=k._readEllipse(arguments);return r(t.center,t.radius,arguments)},Oval:\"#Ellipse\",Arc:function(){var t=v.readNamed(arguments,\"from\"),e=v.readNamed(arguments,\"through\"),n=v.readNamed(arguments,\"to\"),r=c.getNamed(arguments),i=new F(r&&0==r.insert&&T.NO_INSERT);return i.moveTo(t),i.arcTo(e,n),i.set(r)},RegularPolygon:function(){for(var t=v.readNamed(arguments,\"center\"),e=c.readNamed(arguments,\"sides\"),r=c.readNamed(arguments,\"radius\"),i=360/e,a=e%3==0,o=new v(0,a?-r:r),s=a?-1:.5,u=new Array(e),l=0;l<e;l++)u[l]=new N(t.add(o.rotate((l+s)*i)));return n(u,!0,arguments)},Star:function(){for(var t=v.readNamed(arguments,\"center\"),e=2*c.readNamed(arguments,\"points\"),r=c.readNamed(arguments,\"radius1\"),i=c.readNamed(arguments,\"radius2\"),a=360/e,o=new v(0,-1),s=new Array(e),u=0;u<e;u++)s[u]=new N(t.add(o.rotate(a*u).multiply(u%2?i:r)));return n(s,!0,arguments)}}}});var j=B.extend({_class:\"CompoundPath\",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(\"string\"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var r=n,i=r[0];i&&\"number\"==typeof i[0]&&(r=[r]);for(var a=n.length-1;a>=0;a--){var o=r[a];r!==n||o instanceof F||(r=c.slice(r)),Array.isArray(o)?r[a]=new F({segments:o,insert:!1}):o instanceof j&&(r.splice.apply(r,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,r)},reduce:function t(e){for(var n=this._children,r=n.length-1;r>=0;r--){var i;(i=n[r].reduce(e)).isEmpty()&&i.remove()}return n.length?t.base.call(this):((i=new F(T.NO_INSERT)).copyAttributes(this),i.insertAbove(this),this.remove(),i)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,r=e.length;n<r;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,r=t.length;n<r;n++)c.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,r=t.length;n<r;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,r=t.length;n<r;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,r=[],i=0,a=n.length;i<a;i++){var o=n[i],s=o._matrix;r.push(o.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return r.join(\"\")},_hitTestChildren:function t(e,n,r){return t.base.call(this,e,n.class===F||\"path\"===n.type?n:c.set({},n,{fill:!1}),r)},_draw:function(t,e,n,r){var i=this._children;if(i.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=i.length;a<o;a++)i[a].draw(t,e,r);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor=\"rgba(0,0,0,0)\"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var r=this._children,i=0,a=r.length;i<a;i++){var o=r[i],s=o._matrix;n[o._id]||o._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error(\"Use a moveTo() command first\");return n[n.length-1]}return c.each([\"lineTo\",\"cubicCurveTo\",\"quadraticCurveTo\",\"curveTo\",\"arcTo\",\"lineBy\",\"cubicCurveBy\",\"quadraticCurveBy\",\"curveBy\",\"arcBy\"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new F(T.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),r=v.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(e){t(this,!0).closePath(e)}})},c.each([\"reverse\",\"flatten\",\"simplify\",\"smooth\"],(function(t){this[t]=function(e){for(var n,r=this._children,i=0,a=r.length;i<a;i++)n=r[i][t](e)||n;return n}}),{}));B.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,\"-1\":!0}};function i(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient(\"nonzero\"===n.getFillRule(),!0):n}function a(t,e,n,r,i){var a=new j(T.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),i&&0==i.insert||a.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),a.copyAttributes(n,!0),a}function o(t,e,n,o){if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(n))return u(t,e,n);var s=i(t,!0),l=e&&t!==e&&i(e,!0),h=r[n];h[n]=!0,l&&(h.subtract||h.exclude)^l.isClockwise()^s.isClockwise()&&l.reverse();var p,m=d(z.expand(s.getCrossings(l))),y=s._children||[s],b=l&&(l._children||[l]),_=[],x=[];function w(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];c.push(_,r._segments),c.push(x,r.getCurves()),r._overlapsOnly=!0}}if(m.length){w(y),b&&w(b);for(var S=0,E=m.length;S<E;S++)g(m[S]._segment,s,l,x,h);for(S=0,E=_.length;S<E;S++){var M=_[S],T=M._intersection;M._winding||g(M,s,l,x,h),T&&T._overlap||(M._path._overlapsOnly=!1)}p=v(_,h)}else p=f(b?y.concat(b):y.slice(),(function(t){return!!h[t]}));return a(p,!0,t,e,o)}function u(t,e,n){var r=i(t),o=i(e),s=r.getCrossings(o),u=\"subtract\"===n,l=\"divide\"===n,c={},h=[];function f(t){if(!c[t._id]&&(l||o.contains(t.getPointAt(t.getLength()/2))^u))return h.unshift(t),c[t._id]=!0}for(var d=s.length-1;d>=0;d--){var p=s[d].split();p&&(f(p)&&p.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return f(r),a(h,!1,t,e)}function l(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function h(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function f(t,e,r){var i=t&&t.length;if(i){var a=c.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),o=t.slice().sort((function(t,e){return n(e.getArea())-n(t.getArea())})),s=o[0];null==r&&(r=s.isClockwise());for(var u=0;u<i;u++){for(var l=o[u],h=a[l._id],f=l.getInteriorPoint(),d=0,p=u-1;p>=0;p--){var m=o[p];if(m.contains(f)){var g=a[m._id];d=g.winding,h.winding+=d,h.container=g.exclude?g.container:m;break}}if(e(h.winding)===e(d))h.exclude=!0,t[h.index]=null;else{var v=h.container;l.setClockwise(v?!v.isClockwise():r)}}}return t}function d(t,e,n){var r,i,a,o=e&&[],s=!1,u=n||[],c=n&&{};function f(t){return t._path._id+\".\"+t._segment1._index}for(var d=(n&&n.length)-1;d>=0;d--){(p=n[d])._path&&(c[f(p)]=!0)}for(d=t.length-1;d>=0;d--){var p,m,g=t[d],v=g._time,y=v,b=e&&!e(g);if((p=g._curve)&&(p!==i?(s=!p.hasHandles()||c&&c[f(p)],r=[],a=null,i=p):a>=1e-8&&(v/=a)),b)r&&r.push(g);else{if(e&&o.unshift(g),a=y,v<1e-8)m=p._segment1;else if(v>1-1e-8)m=p._segment2;else{var _=p.divideAtTime(v,!0);s&&u.push(p,_),m=_._segment1;for(var x=r.length-1;x>=0;x--){var w=r[x];w._time=(w._time-v)/(1-v)}}g._setSegment(m);var S=m._intersection,E=g._intersection;if(S){l(S,E);for(var M=S;M;)l(M._intersection,S),M=M._next}else m._intersection=E}}return n||h(u),o||t}function p(r,i,a,o,s){var u,l,c=a?1:0,h=1^c,f=[r.x,r.y],d=f[c],m=f[h],g=1e-6,v=d-1e-9,y=d+1e-9,b=0,_=0,x=0,w=0,S=!1,E=!1,M=1,T=[];function C(n){var l=n[h+0],f=n[h+6];if(!(m<t(l,f)||m>e(l,f))){var b=n[c+0],_=n[c+2],E=n[c+4],C=n[c+6];if(l!==f){var P=m===l?0:m===f?1:v>e(b,_,E,C)||y<t(b,_,E,C)?1:D.solveCubic(n,h,m,T,0,1)>0?T[0]:1,k=0===P?b:1===P?C:D.getPoint(n,P)[a?\"y\":\"x\"],A=l>f?1:-1,O=u[h]>u[h+6]?1:-1,L=u[c+6];return m!==l?(k<v?x+=A:k>y?w+=A:S=!0,k>d-g&&k<d+g&&(M/=2)):(A!==O?b<v?x+=A:b>y&&(w+=A):b!=L&&(L<y&&k>y?(w+=A,S=!0):L>v&&k<v&&(x+=A,S=!0)),M=0),u=n,!s&&k>v&&k<y&&0===D.getTangent(n,P)[a?\"x\":\"y\"]&&p(r,i,!a,o,!0)}(b<y&&C>v||C<y&&b>v)&&(S=!0)}}function P(n){var r=n[h+0],i=n[h+2],o=n[h+4],s=n[h+6];if(m<=e(r,i,o,s)&&m>=t(r,i,o,s))for(var u,l=n[c+0],f=n[c+2],d=n[c+4],p=n[c+6],g=v>e(l,f,d,p)||y<t(l,f,d,p)?[n]:D.getMonoCurves(n,a),b=0,_=g.length;b<_;b++)if(u=C(g[b]))return u}for(var k=0,A=i.length;k<A;k++){var O,L=i[k],I=L._path,N=L.getValues();if(!(k&&i[k-1]._path===I||(u=null,I._closed||(l=D.getValues(I.getLastCurve().getSegment2(),L.getSegment1(),null,!o))[h]!==l[h+6]&&(u=l),u))){u=N;for(var R=I.getLastCurve();R&&R!==L;){var z=R.getValues();if(z[h]!==z[h+6]){u=z;break}R=R.getPrevious()}}if(O=P(N))return O;if(k+1===A||i[k+1]._path!==I){if(l&&(O=P(l)))return O;!S||x||w||(x=w=I.isClockwise(o)^a?1:-1),b+=x,_+=w,x=w=0,S&&(E=!0,S=!1),l=null}}return b=n(b),_=n(_),{winding:e(b,_),windingL:b,windingR:_,quality:M,onPath:E}}function g(t,e,r,i,a){var o=[],s=t,u=0;do{var l=(b=t.getCurve()).getLength();o.push({segment:t,curve:b,length:l}),u+=l,t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var c=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<c.length&&h.quality<.5;f++){l=u*c[f];for(var d=0,g=o.length;d<g;d++){var v=o[d],y=v.length;if(l<=y){var b,_=(b=v.curve)._path,x=_._parent,w=x instanceof j?x:_,S=m.clamp(b.getTimeAt(l),1e-8,1-1e-8),E=b.getPointAtTime(S),M=n(b.getTangentAtTime(S).y)<Math.SQRT1_2,T=null;if(a.subtract&&r){var C=w===e?r._getWinding(E,M,!0):e._getWinding(E,M,!0);if(w===e&&C.winding||w===r&&!C.winding){if(C.quality<1)continue;T={winding:0,quality:1}}}(T=T||p(E,i,M,!0)).quality>h.quality&&(h=T);break}l-=y}}for(d=o.length-1;d>=0;d--)o[d].segment._winding=h}function v(t,e){var n,r=[];function i(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(t){if(t)for(var e=0,r=n.length;e<r;e++)if(t===n[e])return!0;return!1}function o(t){for(var e=t._segments,n=0,r=e.length;n<r;n++)e[n]._visited=!0}function s(t,e){var r=t._intersection,o=r,s=[];function u(r,o){for(;r&&r!==o;){var u=r._segment,l=u&&u._path;if(l){var c=u.getNext()||l.getFirstSegment(),h=c._intersection;u!==t&&(a(u)||a(c)||c&&i(u)&&(i(c)||h&&i(h._segment)))&&s.push(u),e&&n.push(u)}r=r._next}}if(e&&(n=[t]),r){for(u(r);r&&r._prev;)r=r._prev;u(r,o)}return s}t.sort((function(t,e){var n=t._intersection,r=e._intersection,i=!(!n||!n._overlap),a=!(!r||!r._overlap),o=t._path,s=e._path;return i^a?i?1:-1:!n^!r?n?1:-1:o!==s?o._id-s._id:t._index-e._index}));for(var u=0,l=t.length;u<l;u++){var c,h,f,d=t[u],p=i(d),m=null,g=!1,v=!0,y=[];if(p&&d._path._overlapsOnly){var b=d._path,_=d._intersection._segment._path;b.compare(_)&&(b.getArea()&&r.push(b.clone(!1)),o(b),o(_),p=!1)}for(;p;){var x=!m,w=s(d,x),S=w.shift(),E=!(g=!x&&(a(d)||a(S)))&&S;if(x&&(m=new F(T.NO_INSERT),c=null),g){(d.isFirst()||d.isLast())&&(v=d._path._closed),d._visited=!0;break}if(E&&c&&(y.push(c),c=null),c||(E&&w.push(d),c={start:m._segments.length,crossings:w,visited:h=[],handleIn:f}),E&&(d=S),!i(d)){m.removeSegments(c.start);for(var M=0,C=h.length;M<C;M++)h[M]._visited=!1;h.length=0;do{(d=c&&c.crossings.shift())&&d._path||(d=null,(c=y.pop())&&(h=c.visited,f=c.handleIn))}while(c&&!i(d));if(!d)break}var P=d.getNext();m.add(new N(d._point,f,P&&d._handleOut)),d._visited=!0,h.push(d),d=P||d._path.getFirstSegment(),f=P&&P._handleIn}g&&(v&&(m.getFirstSegment().setHandleIn(f),m.setClosed(v)),0!==m.getArea()&&r.push(m))}return r}return{_getWinding:function(t,e,n){return p(t,this.getCurves(),e,n)},unite:function(t,e){return o(this,t,\"unite\",e)},intersect:function(t,e){return o(this,t,\"intersect\",e)},subtract:function(t,e){return o(this,t,\"subtract\",e)},exclude:function(t,e){return o(this,t,\"exclude\",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?u(this,t,\"divide\"):a([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var r=!1,i=!1,a=this.getIntersections(null,(function(t){return t.hasOverlap()&&(r=!0)||t.isCrossing()&&(i=!0)})),o=r&&i&&[];if(a=z.expand(a),r)for(var s=d(a,(function(t){return t.hasOverlap()}),o),u=s.length-1;u>=0;u--){var l=s[u],f=l._path,p=l._segment,m=p.getPrevious(),g=p.getNext();n(m,f)&&n(g,f)&&(p.remove(),m._handleOut._set(0,0),g._handleIn._set(0,0),m===p||m.getCurve().hasLength()||(g._handleIn.set(m._handleIn),m.remove()))}i&&(d(a,r&&function(t){var e=t.getCurve(),n=t.getSegment(),r=t._intersection,i=r._curve,a=r._segment;if(e&&i&&e._path&&i._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},o),o&&h(o),e=v(c.each(e,(function(t){c.push(this,t._segments)}),[])));var y,b=e.length;return b>1&&t?(e!==t&&this.setChildren(e),y=this):1!==b||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),y=this),y||((y=new j(T.NO_INSERT)).addChildren(e),(y=y.reduce()).copyAttributes(this),this.replaceWith(y)),y},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(f(this.removeChildren(),(function(e){return!!(t?e:1&e)}),e)):e!==s&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var r=this.getCurves(),i=n.y,a=[],o=[],s=0,u=r.length;s<u;s++){var l=r[s].getValues(),c=l[1],h=l[3],f=l[5],d=l[7];if(i>=t(c,h,f,d)&&i<=e(c,h,f,d))for(var p=D.getMonoCurves(l),m=0,g=p.length;m<g;m++){var v=p[m],y=v[1],b=v[7];if(y!==b&&(i>=y&&i<=b||i>=b&&i<=y)){var _=i===y?v[0]:i===b?v[6]:1===D.solveCubic(v,1,i,o,0,1)?D.getPoint(v,o[0]).x:(v[0]+v[6])/2;a.push(_)}}}a.length>1&&(a.sort((function(t,e){return t-e})),n.x=(a[0]+a[1])/2)}return n}}});var U=c.extend({_class:\"PathFlattener\",initialize:function(t,e,n,r,i){var a,o=[],s=[],u=0,l=1/(n||32),c=t._segments,h=c[0];function f(t,n){var a=D.getValues(t,n,i);o.push(a),function t(n,i,a,o){if(!(o-a>l)||r&&D.isStraight(n)||D.isFlatEnough(n,e||.25)){var c=n[6]-n[0],h=n[7]-n[1],f=Math.sqrt(c*c+h*h);f>0&&(u+=f,s.push({offset:u,curve:n,index:i,time:o}))}else{var d=D.subdivide(n,.5),p=(a+o)/2;t(d[0],i,a,p),t(d[1],i,p,o)}}(a,t._index,0,1)}for(var d=1,p=c.length;d<p;d++)f(h,a=c[d]),h=a;t._closed&&f(a||h,c[0]),this.curves=o,this.parts=s,this.length=u,this.index=0},_get:function(t){for(var e,n=this.parts,r=n.length,i=this.index;e=i,i&&!(n[--i].offset<t););for(;e<r;e++){var a=n[e];if(a.offset>=t){this.index=e;var o=n[e-1],s=o&&o.index===a.index?o.time:0,u=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-u)/(a.offset-u)}}}return{index:n[r-1].index,time:1}},drawPart:function(t,e,n){for(var r=this._get(e),i=this._get(n),a=r.index,o=i.index;a<=o;a++){var s=D.getPart(this.curves[a],a===r.index?r.time:0,a===i.index?i.time:1);a===r.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},c.each(D._evaluateMethods,(function(t){this[t+\"At\"]=function(e){var n=this._get(e);return D[t](this.curves[n.index],n.time)}}),{})),V=c.extend({initialize:function(t){for(var e,n=this.points=[],r=t._segments,i=t._closed,a=0,o=r.length;a<o;a++){var s=r[a].point;e&&e.equals(s)||n.push(e=s.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(t){var e=this.points,n=e.length,r=null;return n>0&&(r=[new N(e[0])],n>1&&(this.fitCubic(r,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,e,n,r,i,a){var o=this.points;if(r-n!=1){for(var s,u=this.chordLengthParameterize(n,r),l=Math.max(e,e*e),c=!0,h=0;h<=4;h++){var f=this.generateBezier(n,r,u,i,a),d=this.findMaxError(n,r,f,u);if(d.error<e&&c)return void this.addCurve(t,f);if(s=d.index,d.error>=l)break;c=this.reparameterize(n,r,u,f),l=d.error}var p=o[s-1].subtract(o[s+1]);this.fitCubic(t,e,n,s,i,p),this.fitCubic(t,e,s,r,p.negate(),a)}else{var m=o[n],g=o[r],v=m.getDistance(g)/3;this.addCurve(t,[m,m.add(i.normalize(v)),g.add(a.normalize(v)),g])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new N(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,r,i){for(var a=Math.abs,o=this.points,s=o[t],u=o[e],l=[[0,0],[0,0]],c=[0,0],h=0,f=e-t+1;h<f;h++){var d=n[h],p=1-d,m=3*d*p,g=p*p*p,v=m*p,y=m*d,b=d*d*d,_=r.normalize(v),x=i.normalize(y),w=o[t+h].subtract(s.multiply(g+v)).subtract(u.multiply(y+b));l[0][0]+=_.dot(_),l[0][1]+=_.dot(x),l[1][0]=l[0][1],l[1][1]+=x.dot(x),c[0]+=_.dot(w),c[1]+=x.dot(w)}var S,E,M=l[0][0]*l[1][1]-l[1][0]*l[0][1];if(a(M)>1e-12){var T=l[0][0]*c[1]-l[1][0]*c[0];S=(c[0]*l[1][1]-c[1]*l[0][1])/M,E=T/M}else{var C=l[0][0]+l[0][1],P=l[1][0]+l[1][1];S=E=a(C)>1e-12?c[0]/C:a(P)>1e-12?c[1]/P:0}var k,A,O=u.getDistance(s),L=1e-12*O;if(S<L||E<L)S=E=O/3;else{var I=u.subtract(s);k=r.normalize(S),A=i.normalize(E),k.dot(I)-A.dot(I)>O*O&&(S=E=O/3,k=A=null)}return[s,s.add(k||r.normalize(S)),u.add(A||i.normalize(E)),u]},reparameterize:function(t,e,n,r){for(var i=t;i<=e;i++)n[i-t]=this.findRoot(r,this.points[i],n[i-t]);i=1;for(var a=n.length;i<a;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(t,e,n){for(var r=[],i=[],a=0;a<=2;a++)r[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)i[a]=r[a+1].subtract(r[a]).multiply(2);var o=this.evaluate(3,t,n),s=this.evaluate(2,r,n),u=this.evaluate(1,i,n),l=o.subtract(e),c=s.dot(s)+l.dot(u);return m.isZero(c)?n:n-l.dot(s)/c},evaluate:function(t,e,n){for(var r=e.slice(),i=1;i<=t;i++)for(var a=0;a<=t-i;a++)r[a]=r[a].multiply(1-n).add(r[a+1].multiply(n));return r[0]},chordLengthParameterize:function(t,e){for(var n=[0],r=t+1;r<=e;r++)n[r-t]=n[r-t-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var i=e-t;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(t,e,n,r){for(var i=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var s=this.evaluate(3,n,r[o-t]).subtract(this.points[o]),u=s.x*s.x+s.y*s.y;u>=a&&(a=u,i=o)}return{error:a,index:i}}}),H=T.extend({_class:\"TextItem\",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content=\"\",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===s&&t.y===s;this._initialize(e&&t,!e&&v.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=\"\"+t,this._lines=this._content.split(/\\r\\n|\\n|\\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:\"#getStyle\",setCharacterStyle:\"#setStyle\",getParagraphStyle:\"#getStyle\",setParagraphStyle:\"#setStyle\"}),G=H.extend({_class:\"PointText\",initialize:function(){H.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new y(t.x,t.y,this,\"setPoint\")},setPoint:function(){var t=v.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var r=this._lines,i=this._style,a=i.hasFill(),o=i.hasStroke(),s=i.getLeading(),u=t.shadowColor;t.font=i.getFontStyle(),t.textAlign=i.getJustification();for(var l=0,c=r.length;l<c;l++){t.shadowColor=u;var h=r[l];a&&(t.fillText(h,0,0),t.shadowColor=\"rgba(0,0,0,0)\"),o&&t.strokeText(h,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,r=this._lines,i=r.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),r),u=0;\"left\"!==a&&(u-=s/(\"center\"===a?2:1));var l=new x(u,i?-.75*o:0,s,i*o);return t?t._transformBounds(l,l):l}}),W=c.extend(new function(){var t,e={gray:[\"gray\"],rgb:[\"red\",\"green\",\"blue\"],hsb:[\"hue\",\"saturation\",\"brightness\"],hsl:[\"hue\",\"saturation\",\"lightness\"],gradient:[\"gradient\",\"origin\",\"destination\",\"highlight\"]},n={},r={transparent:[0,0,0,0]};function i(e){var n,i=e.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i)||e.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),a=\"rgb\";if(i){var o=i[4]?4:3;n=new Array(o);for(var s=0;s<o;s++){var l=i[s+1];n[s]=parseInt(1==l.length?l+l:l,16)/255}}else if(i=e.match(/^(rgb|hsl)a?\\((.*)\\)$/)){a=i[1],n=i[2].trim().split(/[,\\s]+/g);for(var c=\"hsl\"===a,h=(s=0,Math.min(n.length,4));s<h;s++){var f=n[s];l=parseFloat(f);if(c)if(0===s){var d=f.match(/([a-z]*)$/)[1];l*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else s<3&&(l/=100);else s<3&&(l/=255);n[s]=l}}else{var p=r[e];if(!p)if(u){t||((t=st.getContext(1,1)).globalCompositeOperation=\"copy\"),t.fillStyle=\"rgba(0,0,0,0)\",t.fillStyle=e,t.fillRect(0,0,1,1);var m=t.getImageData(0,0,1,1).data;p=r[e]=[m[0]/255,m[1]/255,m[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={\"rgb-hsb\":function(t,e,n){var r=Math.max(t,e,n),i=r-Math.min(t,e,n);return[0===i?0:60*(r==t?(e-n)/i+(e<n?6:0):r==e?(n-t)/i+2:(t-e)/i+4),0===r?0:i/r,r]},\"hsb-rgb\":function(t,e,n){var r,i=(t=(t/60%6+6)%6)-(r=Math.floor(t)),o=[n,n*(1-e),n*(1-e*i),n*(1-e*(1-i))];return[o[(r=a[r])[0]],o[r[1]],o[r[2]]]},\"rgb-hsl\":function(t,e,n){var r=Math.max(t,e,n),i=Math.min(t,e,n),a=r-i,o=0===a,s=(r+i)/2;return[o?0:60*(r==t?(e-n)/a+(e<n?6:0):r==e?(n-t)/a+2:(t-e)/a+4),o?0:s<.5?a/(r+i):a/(2-r-i),s]},\"hsl-rgb\":function(t,e,n){if(0===e)return[n,n,n];for(var r=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],i=n<.5?n*(1+e):n+e-n*e,a=2*n-i,o=[],s=0;s<3;s++){var u=r[s];u<0&&(u+=1),u>1&&(u-=1),o[s]=6*u<1?a+6*(i-a)*u:2*u<1?i:3*u<2?a+(i-a)*(2/3-u)*6:a}return o},\"rgb-gray\":function(t,e,n){return[.2989*t+.587*e+.114*n]},\"gray-rgb\":function(t){return[t,t,t]},\"gray-hsb\":function(t){return[0,0,t]},\"gray-hsl\":function(t){return[0,0,t]},\"gradient-rgb\":function(){return[]},\"rgb-gradient\":function(){return[]}};return c.each(e,(function(t,r){n[r]=[],c.each(t,(function(t,i){var a=c.capitalize(t),o=/^(hue|saturation)$/.test(t),s=n[r][i]=\"gradient\"===r?\"gradient\"===t?function(t){var e=this._components[0];return e!==(t=q.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return v.read(arguments,0,{readNull:\"highlight\"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this[\"get\"+a]=function(){return this._type===r||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(r)[i]},this[\"set\"+a]=function(t){this._type===r||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(r),this._properties=e[r],this._type=r),this._components[i]=s.call(this,t),this._changed()}}),this)}),{_class:\"Color\",_readIndex:!0,initialize:function t(r){var a,o,s,u,l=arguments,h=this.__read,f=0;Array.isArray(r)&&(r=(l=r)[0]);var d=null!=r&&typeof r;if(\"string\"===d&&r in e&&(a=r,r=l[1],Array.isArray(r)?(o=r,s=l[2]):(h&&(f=1),l=c.slice(l,1),d=typeof r)),!o){if(u=\"number\"===d?l:\"object\"===d&&null!=r.length?r:null){a||(a=u.length>=3?\"rgb\":\"gray\");var p=e[a].length;s=u[p],h&&(f+=u===arguments?p+(null!=s?1:0):1),u.length>p&&(u=c.slice(u,0,p))}else if(\"string\"===d){var m=i(r);a=m[0],4===(o=m[1]).length&&(s=o[3],o.length--)}else if(\"object\"===d)if(r.constructor===t){if(a=r._type,o=r._components.slice(),s=r._alpha,\"gradient\"===a)for(var g=1,v=o.length;g<v;g++){var y=o[g];y&&(o[g]=y.clone())}}else if(r.constructor===q)a=\"gradient\",u=l;else{var b=e[a=\"hue\"in r?\"lightness\"in r?\"hsl\":\"hsb\":\"gradient\"in r||\"stops\"in r||\"radial\"in r?\"gradient\":\"gray\"in r?\"gray\":\"rgb\"],_=n[a];this._components=o=[];for(g=0,v=b.length;g<v;g++){null==(x=r[b[g]])&&!g&&\"gradient\"===a&&\"stops\"in r&&(x={stops:r.stops,radial:r.radial}),null!=(x=_[g].call(this,x))&&(o[g]=x)}s=r.alpha}h&&a&&(f=1)}if(this._type=a||\"rgb\",!o){this._components=o=[];for(g=0,v=(_=n[this._type]).length;g<v;g++){var x;null!=(x=_[g].call(this,u&&u[g]))&&(o[g]=x)}}return this._components=o,this._properties=e[this._type],this._alpha=s,h&&(this.__read=f),this},set:\"#initialize\",_serialize:function(t,e){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+\"-\"+t])?e.apply(this,this._components):o[\"rgb-\"+t].apply(this,o[this._type+\"-rgb\"].apply(this,this._components))},convert:function(t){return new W(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?W.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n=\"gradient\"===this._type,r=p.instance,i=0,a=t.length;i<a;i++){var o=this._components[i];null!=o&&e.push(t[i]+\": \"+(n?o:r.number(o)))}return null!=this._alpha&&e.push(\"alpha: \"+r.number(this._alpha)),\"{ \"+e.join(\", \")+\" }\"},toCSS:function(t){var e=this._convert(\"rgb\"),n=t||null==this._alpha?1:this._alpha;function r(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[r(e[0]),r(e[1]),r(e[2])],n<1&&e.push(n<0?0:n),t?\"#\"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?\"rgba(\":\"rgb(\")+e.join(\",\")+\")\"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if(\"gradient\"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,i=r[0],a=i._stops,o=r[1],s=r[2],u=r[3],l=e&&e.inverted();if(l&&(o=l._transformPoint(o),s=l._transformPoint(s),u&&(u=l._transformPoint(u))),i._radial){var c=s.getDistance(o);if(u){var h=u.subtract(o);h.getLength()>c&&(u=o.add(h.normalize(c-.1)))}var f=u||o;n=t.createRadialGradient(f.x,f.y,0,o.x,o.y,c)}else n=t.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var m=a[d],g=m._offset;n.addColorStop(null==g?d/(p-1):g,m._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if(\"gradient\"===this._type){for(var e=this._components,n=1,r=e.length;n<r;n++){var i=e[n];t._transformPoint(i,i,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new W(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return c.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=W.read(arguments);for(var n=this._type,r=this._components,i=e._convert(n),a=0,o=r.length;a<o;a++)i[a]=t(r[a],i[a]);return new W(n,i,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),q=c.extend({_class:\"Gradient\",initialize:function(t,e){this._id=g.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||[\"white\",\"black\"]),null==this._radial&&this.setRadial(\"string\"==typeof e&&\"radial\"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=s))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new q(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error(\"Gradient stop list needs to contain at least two stops.\");var e=this._stops;if(e)for(var n=0,r=e.length;n<r;n++)e[n]._owner=s;for(n=0,r=(e=this._stops=X.readList(t,0,{clone:!0})).length;n<r;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,r=e.length;if(r===n.length){for(var i=0;i<r;i++)if(!e[i].equals(n[i]))return!1;return!0}}return!1}}),X=c.extend({_class:\"GradientStop\",initialize:function(t,e){var n=t,r=e;\"object\"==typeof t&&e===s&&(Array.isArray(t)&&\"number\"!=typeof t[0]?(n=t[0],r=t[1]):(\"color\"in t||\"offset\"in t||\"rampPoint\"in t)&&(n=t.color,r=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new X(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,r=this._offset;return c.serialize(null==r?[n]:[n,r],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:\"#getOffset\",setRampPoint:\"#setOffset\",getColor:function(){return this._color},setColor:function(){W._setOwner(this._color,null),this._color=W._setOwner(W.read(arguments,0),this,\"setColor\"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Y=c.extend(new function(){var t={fillColor:null,fillRule:\"nonzero\",strokeColor:null,strokeWidth:1,strokeCap:\"butt\",strokeJoin:\"miter\",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new v,selectedColor:null},e=c.set({},t,{fontFamily:\"sans-serif\",fontWeight:\"normal\",fontSize:12,leading:null,justification:\"left\"}),n=c.set({},e,{fillColor:new W}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},i={beans:!0},a={_class:\"Style\",beans:!0,initialize:function(r,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||ht.project,this._defaults=!i||i instanceof C?e:i instanceof H?n:t,r&&this.set(r)}};return c.each(e,(function(t,e){var n=/Color$/.test(e),o=\"shadowOffset\"===e,u=c.capitalize(e),l=r[e],h=\"set\"+u,f=\"get\"+u;a[h]=function(t){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof j);if(a)for(var o=0,s=i.length;o<s;o++)i[o]._style[h](t);if((\"selectedColor\"===e||!a)&&e in this._defaults){var u=this._values[e];u!==t&&(n&&(u&&(W._setOwner(u,null),u._canvasStyle=null),t&&t.constructor===W&&(t=W._setOwner(t,r,a&&h))),this._values[e]=t,r&&r._changed(l||129))}},a[f]=function(t){var r=this._owner,i=r&&r._children,a=i&&i.length>0&&!(r instanceof j);if(a&&!t)for(var u=0,l=i.length;u<l;u++){var d=i[u]._style[f]();if(u){if(!c.equals(p,d))return s}else p=d}else if(e in this._defaults){var p;if((p=this._values[e])===s)(p=this._defaults[e])&&p.clone&&(p=p.clone());else{var m=n?W:o?v:null;!m||p&&p.constructor===m||(this._values[e]=p=m.read([p],0,{readNull:!0,clone:!0}))}}return p&&n&&(p=W._setOwner(p,r,a&&h)),p},i[f]=function(t){return this._style[f](t)},i[h]=function(t){this._style[h](t)}})),c.each({Font:\"FontFamily\",WindingRule:\"FillRule\"},(function(t,e){var n=\"get\"+e,r=\"set\"+e;a[n]=i[n]=\"#get\"+t,a[r]=i[r]=\"#set\"+t})),T.inject(i),a},{set:function(t){var e=t instanceof Y,n=e?t._values:t;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&e&&i.clone?i.clone():i}},equals:function(t){function e(t,e,n){var r=t._values,i=e._values,a=e._defaults;for(var o in r){var u=r[o],l=i[o];if(!(n&&o in i||c.equals(u,l===s?a[o]:l)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+\" \"+t+(/[a-z]/i.test(t+\"\")?\" \":\"px \")+this.getFontFamily()},getFont:\"#getFontFamily\",setFont:\"#setFontFamily\",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),Q=new function(){function t(t,e,n,r){for(var i=[\"\",\"webkit\",\"moz\",\"Moz\",\"ms\",\"o\"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var s=i[o],u=s?s+a:e;if(u in t){if(!n)return t[u];t[u]=r;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,\"\")},getBounds:function(t,e){var n,r=t.ownerDocument,i=r.body,a=r.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||i.clientLeft||0),s=n.top-(a.clientTop||i.clientTop||0);if(!e){var u=r.defaultView;o+=u.pageXOffset||a.scrollLeft||i.scrollLeft,s+=u.pageYOffset||a.scrollTop||i.scrollTop}return new x(o,s,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,r=e.documentElement;return new x(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(t,e){return Q.getBounds(t,e).getPoint()},getSize:function(t){return Q.getBounds(t,!0).getSize()},isInvisible:function(t){return Q.getSize(t).equals(new b(0,0))},isInView:function(t){return!Q.isInvisible(t)&&Q.getViewportBounds(t).intersects(Q.getBounds(t,!0))},isInserted:function(t){return l.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,r){if(\"object\"==typeof n)for(var i in n)t(e,i,!0,n[i]);else t(e,n,!0,r)}}},Z={add:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\\s,]+/g),a=0,o=i.length;a<o;a++){var s=i[a],u=t===l&&(\"touchstart\"===s||\"touchmove\"===s)&&{passive:!1};t.addEventListener(s,r,u)}},remove:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\\s,]+/g),a=0,o=i.length;a<o;a++)t.removeEventListener(i[a],r,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new v(e.pageX||e.clientX+l.documentElement.scrollLeft,e.pageY||e.clientY+l.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Z.getPoint(t).subtract(Q.getOffset(e||Z.getTarget(t)))}};Z.requestAnimationFrame=new function(){var t,e=Q.getPrefixed(u,\"requestAnimationFrame\"),n=!1,r=[];function i(){var t=r;r=[];for(var a=0,o=t.length;a<o;a++)t[a]();(n=e&&r.length)&&e(i)}return function(a){r.push(a),e?n||(e(i),n=!0):t||(t=setInterval(i,1e3/60))}};var $=c.extend(h,{_class:\"View\",initialize:function t(e,n){function r(t){return n[t]||parseInt(n.getAttribute(t),10)}function i(){var t=Q.getSize(n);return t.isNaN()||t.isZero()?new b(r(\"width\"),r(\"height\")):t}var a;if(u&&n){this._id=n.getAttribute(\"id\"),null==this._id&&n.setAttribute(\"id\",this._id=\"view-\"+t._id++),Z.add(n,this._viewEvents);if(Q.setPrefixed(n.style,{userDrag:\"none\",userSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}),f.hasAttribute(n,\"resize\")){var o=this;Z.add(u,this._windowEvents={resize:function(){o.setViewSize(i())}})}if(a=i(),f.hasAttribute(n,\"stats\")&&\"undefined\"!=typeof Stats){this._stats=new Stats;var s=this._stats.domElement,c=s.style,h=Q.getOffset(n);c.position=\"absolute\",c.left=h.x+\"px\",c.top=h.y+\"px\",l.body.appendChild(s)}}else a=new b(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new S)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ht.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;$._focused===this&&($._focused=null),$._views.splice($._views.indexOf(this),1),delete $._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Z.remove(this._element,this._viewEvents),Z.remove(u,this._windowEvents),this._element=this._project=null,this.off(\"frame\"),this._animate=!1,this._frameItems={},!0},_events:c.each(T._itemHandlers.concat([\"onResize\",\"onKeyDown\",\"onKeyUp\"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Z.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;Q.getPrefixed(l,\"hidden\")&&\"true\"!==f.getAttribute(e,\"keepalive\")||!Q.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ht=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit(\"frame\",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on(\"frame\",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off(\"frame\",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit(\"frame\",new c(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new _(t.width,t.height,this,\"setViewSize\")},setViewSize:function(){var t=b.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit(\"resize\",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new v,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Q.isInView(this._element)},isInserted:function(){return Q.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var r=n.parentNode,i=l.createElement(\"div\");i.style.fontSize=t,r.appendChild(i),e=parseFloat(Q.getStyles(i).fontSize),r.removeChild(i)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each([\"rotate\",\"scale\",\"shear\",\"skew\"],(function(t){var e=\"rotate\"===t;this[t]=function(){var n=(e?c:v).read(arguments),r=v.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,r||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=v.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new S).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new y(t.x,t.y,this,\"setScaling\")},setScaling:function(){var t=this.getScaling(),e=v.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(v.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(v.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(v.read(arguments))},getEventPoint:function(t){return this.viewToProject(Z.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return l&&\"string\"==typeof e&&(e=l.getElementById(e)),new(u?J:$)(t,e)}}},new function(){if(u){var t,e,n,r,i,a=!1,o=!1,s=u.navigator;s.pointerEnabled||s.msPointerEnabled?(n=\"pointerdown MSPointerDown\",r=\"pointermove MSPointerMove\",i=\"pointerup pointercancel MSPointerUp MSPointerCancel\"):(n=\"touchstart\",r=\"touchmove\",i=\"touchend touchcancel\",\"ontouchstart\"in u&&s.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=\" mousedown\",r+=\" mousemove\",i+=\" mouseup\"));var c={},h={mouseout:function(t){var e=$._focused,n=Z.getRelatedTarget(t);if(e&&(!n||\"HTML\"===n.nodeName)){var r=Z.getOffset(t,e._element),i=r.x,a=Math.abs,o=a(i),s=o-(1<<25);r.x=a(s)<o?s*(i<0?-1:1):i,C(e,t,e.viewToProject(r))}},scroll:T};c[n]=function(t){var e=$._focused=M(t);a||(a=!0,e._handleMouseEvent(\"mousedown\",t))},h[r]=function(n){var r=$._focused;if(!o){var i=M(n);i?r!==i&&(r&&C(r,n),t||(t=r),r=$._focused=e=i):e&&e===r&&(t&&!t.isInserted()&&(t=null),r=$._focused=t,t=null,T())}r&&C(r,n)},h[n]=function(){o=!0},h[i]=function(t){var e=$._focused;e&&a&&e._handleMouseEvent(\"mouseup\",t),o=a=!1},Z.add(l,h),Z.add(u,{load:T});var f,d,p,m,g,v,y,b,_=!1,x=!1,w={doubleclick:\"click\",mousedrag:\"mousemove\"},S=!1,E={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var r=this._itemEvents,i=r.native[t],o=\"mousemove\"===t,s=this._scope.tool,u=this;function l(t){return r.virtual[t]||u.responds(t)||s&&s.responds(t)}o&&a&&l(\"mousedrag\")&&(t=\"mousedrag\"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),h=i&&c&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,E=!1,M={};if(M[t.substr(5)]=!0,i&&w!==m&&(m&&P(m,null,\"mouseleave\",e,n),w&&P(w,null,\"mouseenter\",e,n),m=w),S^c&&(P(this,null,c?\"mouseenter\":\"mouseleave\",e,n),c?this:null,E=!0),!c&&!M.drag||n.equals(d)||(k(this,w,o?t:\"mousemove\",e,n,d),E=!0),S=c,M.down&&c||M.up&&f){if(k(this,w,t,e,n,f),M.down){if(b=w===v&&Date.now()-y<300,p=v=w,!x&&w){for(var T=w;T&&!T.responds(\"mousedrag\");)T=T._parent;T&&(g=w)}f=n}else M.up&&(x||w!==p||(y=Date.now(),k(this,w,b?\"doubleclick\":\"click\",e,n,f),b=!1),p=g=null);S=!1,E=!0}d=n,E&&s&&(_=s._handleMouseEvent(t,e,n,M)||_),!1!==e.cancelable&&(_&&!M.move||M.down&&l(\"mouseup\"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,r){var i,a=this._scope,o=a.tool;function s(o){o.responds(t)&&(ht=a,o.emit(t,i=i||new tt(t,e,n,r)))}this.isVisible()&&(s(this),o&&o.responds(t)&&s(o))},_countItemEvent:function(t,e){var n=this._itemEvents,r=n.native,i=n.virtual;for(var a in E)r[a]=(r[a]||0)+(E[a][t]||0)*e;i[t]=(i[t]||0)+e},statics:{updateFocus:T,_resetState:function(){a=o=_=S=!1,t=e=f=d=p=m=g=v=y=b=null}}}}function M(t){var e=Z.getTarget(t);return e.getAttribute&&$._viewsById[e.getAttribute(\"id\")]}function T(){var t=$._focused;if(!t||!t.isVisible())for(var n=0,r=$._views.length;n<r;n++)if((t=$._views[n]).isVisible()){$._focused=e=t;break}}function C(t,e,n){t._handleMouseEvent(\"mousemove\",e,n)}function P(t,e,n,r,i,a,o){var s,u=!1;function l(t,n){if(t.responds(n)){if(s||(s=new nt(n,r,i,e||t,a?i.subtract(a):null)),t.emit(n,s)&&(_=!0,s.prevented&&(x=!0),s.stopped))return u=!0}else{var o=w[n];if(o)return l(t,o)}}for(;t&&t!==o&&!l(t,n);)t=t._parent;return u}function k(t,e,n,r,i,a){return t._project.removeOn(n),x=_=!1,g&&P(g,null,n,r,i,a)||e&&e!==g&&!e.isDescendant(g)&&P(e,null,\"mousedrag\"===n?\"mousemove\":n,r,i,a,g)||P(t,g||e||t,n,r,i,a)}}),J=$.extend({_class:\"CanvasView\",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error(\"Cannot create CanvasView with the provided argument: \"+c.slice(arguments,1));e=st.getCanvas(n)}var r=this._context=e.getContext(\"2d\");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,\"hidpi\"))){var i=u.devicePixelRatio||1,a=Q.getPrefixed(r,\"backingStorePixelRatio\")||1;this._pixelRatio=i/a}$.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var r=this._pixelRatio;if(t.base.call(this,e*r,n*r),1!==r){var i=this._element,a=this._context;if(!f.hasAttribute(i,\"resize\")){var o=i.style;o.width=e+\"px\",o.height=n+\"px\"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,r=ht.agent;if(r&&r.firefox)n=t.base.call(this,e);else{var i=this._context,a=i.font;i.font=e+\" serif\",n=parseFloat(i.font),i.font=a}return n},getTextWidth:function(t,e){var n=this._context,r=n.font,i=0;n.font=t;for(var a=0,o=e.length;a<o;a++)i=Math.max(i,n.measureText(e[a]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),K=c.extend({_class:\"Event\",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return et.modifiers}}),tt=K.extend({_class:\"KeyEvent\",initialize:function(t,e,n,r){this.type=t,this.event=e,this.key=n,this.character=r},toString:function(){return\"{ type: '\"+this.type+\"', key: '\"+this.key+\"', character: '\"+this.character+\"', modifiers: \"+this.getModifiers()+\" }\"}}),et=new function(){var t,e,n={\"\\t\":\"tab\",\" \":\"space\",\"\\b\":\"backspace\",\"\":\"delete\",Spacebar:\"space\",Del:\"delete\",Win:\"meta\",Esc:\"escape\"},r={tab:\"\\t\",space:\" \",enter:\"\\r\"},i={},a={},o=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ht&&ht.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var e=t.key||t.keyIdentifier;return e=/^U\\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):\"Unidentified\"===e||e===s?String.fromCharCode(t.keyCode):e,n[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function f(e,n,r,s){var u,l=$._focused;if(i[n]=e,e?a[n]=r:delete a[n],n.length>1&&(u=c.camelize(n))in o){o[u]=e;var h=ht&&ht.agent;if(\"meta\"===u&&h&&h.mac)if(e)t={};else{for(var d in t)d in a&&f(!1,d,t[d],s);t=null}}else e&&t&&(t[n]=r);l&&l._handleKeyEvent(e?\"keydown\":\"keyup\",s,n,r)}return Z.add(l,{keydown:function(t){var n=h(t),i=ht&&ht.agent;n.length>1||i&&i.chrome&&(t.altKey||i.mac&&t.metaKey||!i.mac&&t.ctrlKey)?f(!0,n,r[n]||(n.length>1?\"\":n),t):e=n},keypress:function(t){if(e){var n=h(t),r=t.charCode,i=r>=32?String.fromCharCode(r):n.length>1?\"\":n;n!==e&&(n=i.toLowerCase()),f(!0,n,i,t),e=null}},keyup:function(t){var e=h(t);e in a&&f(!1,e,a[e],t)}}),Z.add(u,{blur:function(t){for(var e in a)f(!1,e,a[e],t)}}),{modifiers:o,isDown:function(t){return!!i[t]}}},nt=K.extend({_class:\"MouseEvent\",initialize:function(t,e,n,r,i){this.type=t,this.event=e,this.point=n,this.target=r,this.delta=i},toString:function(){return\"{ type: '\"+this.type+\"', point: \"+this.point+\", target: \"+this.target+(this.delta?\", delta: \"+this.delta:\"\")+\", modifiers: \"+this.getModifiers()+\" }\"}}),rt=K.extend({_class:\"ToolEvent\",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?\"_downCount\":\"_moveCount\"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?\"downCount\":\"count\"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return\"{ type: \"+this.type+\", point: \"+this.getPoint()+\", count: \"+this.getCount()+\", modifiers: \"+this.getModifiers()+\" }\"}}),it=d.extend({_class:\"Tool\",_list:\"tools\",_reference:\"tool\",_events:[\"onMouseDown\",\"onMouseUp\",\"onMouseDrag\",\"onMouseMove\",\"onActivate\",\"onDeactivate\",\"onEditOptions\",\"onKeyDown\",\"onKeyUp\"],initialize:function(t){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,r){ht=this._scope,r.drag&&!this.responds(t)&&(t=\"mousemove\");var i=r.move||r.drag,a=this.responds(t),o=this.minDistance,s=this.maxDistance,u=!1,l=this;function c(t,e){var a=n,o=i?l._point:l._downPoint||a;if(i){if(l._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=t||null!=e)){var s=a.subtract(o),u=s.getLength();if(u<(t||0))return!1;e&&(a=o.add(s.normalize(Math.min(u,e))))}l._moveCount++}return l._point=a,l._lastPoint=o||a,r.down&&(l._moveCount=-1,l._downPoint=a,l._downCount++),!0}function h(){a&&(u=l.emit(t,new rt(l,t,e))||u)}if(r.down)c(),h();else if(r.up)c(null,s),h();else if(a)for(;c(o,s);)h();return u}}),at=c.extend(h,{_class:\"Tween\",statics:{easings:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},initialize:function t(e,n,r,i,a,o){this.object=e;var s=typeof a,u=\"function\"===s;this.type=u?s:\"string\"===s?a:\"linear\",this.easing=u?a:t.easings[this.type],this.duration=i,this.running=!1,this._then=null,this._startTime=null;var l=n||r;this._keys=l?Object.keys(l):[],this._parsedKeys=this._parseKeys(this._keys),this._from=l&&this._getState(n),this._to=l&&this._getState(r),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,r=function(n){return\"function\"==typeof n?n(e,t):n},i=0,a=n&&n.length;i<a;i++){var o=n[i],s=r(this._from[o]),u=r(this._to[o]),l=s&&u&&s.__add&&u.__add?u.__subtract(s).__multiply(e).__add(s):(u-s)*e+s;this._setProperty(this._parsedKeys[o],l)}!this.running&&this._then&&this._then(this.object),this.responds(\"update\")&&this.emit(\"update\",new c({progress:t,factor:e}))}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},r=0,i=e.length;r<i;r++){var a,o=e[r],s=this._parsedKeys[o],u=this._getProperty(s);if(t){var l=this._resolveValue(u,t[o]);this._setProperty(s,l),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,u)}else a=u&&u.clone?u.clone():u;n[o]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\\-\\*\\/]=/)?this._calculate(t,n[0],e[1]):e}if(\"string\"==typeof e){var r=e.match(/^[+\\-*\\/]=(.*)/);if(r){var i=JSON.parse(r[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g,'\"$2\": '));return this._calculate(t,e[0],i)}}}return e},_calculate:function(t,e,n){return ht.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n],a=i.replace(/\\.([^.]*)/g,\"/$1\").replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g,\"/$1\");e[i]=a.split(\"/\")}return e},_getProperty:function(t,e){for(var n=this.object,r=0,i=t.length-(e||0);r<i&&n;r++)n=n[t[r]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),ot={request:function(t){var e=new o.XMLHttpRequest;return e.open((t.method||\"get\").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,r='Could not load \"'+t.url+'\" (Status: '+n+\")\";if(!t.onError)throw new Error(r);t.onError(r,n)},e.send(null)}},st={canvases:[],getCanvas:function(t,e){if(!u)return null;var n,r=!0;\"object\"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=l.createElement(\"canvas\"),r=!1);var i=n.getContext(\"2d\");if(!i)throw new Error(\"Canvas \"+n+\" is unable to provide a 2D context.\");return n.width===t&&n.height===e?r&&i.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),i.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext(\"2d\"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext(\"2d\").restore(),this.canvases.push(e))}},ut=new function(){var t,e,n,r,i,a,o,s,u,l,h,f=Math.min,d=Math.max,p=Math.abs;function m(t,e,n){return.2989*t+.587*e+.114*n}function g(t,e,n,r){var i=r-m(t,e,n),a=(r=m(u=t+i,l=e+i,h=n+i),f(u,l,h)),o=d(u,l,h);if(a<0){var s=r-a;u=r+(u-r)*r/s,l=r+(l-r)*r/s,h=r+(h-r)*r/s}if(o>255){var c=255-r,p=o-r;u=r+(u-r)*c/p,l=r+(l-r)*c/p,h=r+(h-r)*c/p}}function v(t,e,n){return d(t,e,n)-f(t,e,n)}function y(t,e,n,r){var i,a=[t,e,n],o=d(t,e,n),s=f(t,e,n);i=0===f(s=s===t?0:s===e?1:2,o=o===t?0:o===e?1:2)?1===d(s,o)?2:1:0,a[o]>a[s]?(a[i]=(a[i]-a[s])*r/(a[o]-a[s]),a[o]=r):a[i]=a[o]=0,a[s]=0,u=a[0],l=a[1],h=a[2]}var b={multiply:function(){u=i*t/255,l=a*e/255,h=o*n/255},screen:function(){u=i+t-i*t/255,l=a+e-a*e/255,h=o+n-o*n/255},overlay:function(){u=i<128?2*i*t/255:255-2*(255-i)*(255-t)/255,l=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},\"soft-light\":function(){var r=t*i/255;u=r+i*(255-(255-i)*(255-t)/255-r)/255,l=(r=e*a/255)+a*(255-(255-a)*(255-e)/255-r)/255,h=(r=n*o/255)+o*(255-(255-o)*(255-n)/255-r)/255},\"hard-light\":function(){u=t<128?2*t*i/255:255-2*(255-t)*(255-i)/255,l=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},\"color-dodge\":function(){u=0===i?0:255===t?255:f(255,255*i/(255-t)),l=0===a?0:255===e?255:f(255,255*a/(255-e)),h=0===o?0:255===n?255:f(255,255*o/(255-n))},\"color-burn\":function(){u=255===i?255:0===t?0:d(0,255-255*(255-i)/t),l=255===a?255:0===e?0:d(0,255-255*(255-a)/e),h=255===o?255:0===n?0:d(0,255-255*(255-o)/n)},darken:function(){u=i<t?i:t,l=a<e?a:e,h=o<n?o:n},lighten:function(){u=i>t?i:t,l=a>e?a:e,h=o>n?o:n},difference:function(){(u=i-t)<0&&(u=-u),(l=a-e)<0&&(l=-l),(h=o-n)<0&&(h=-h)},exclusion:function(){u=i+t*(255-i-i)/255,l=a+e*(255-a-a)/255,h=o+n*(255-o-o)/255},hue:function(){y(t,e,n,v(i,a,o)),g(u,l,h,m(i,a,o))},saturation:function(){y(i,a,o,v(t,e,n)),g(u,l,h,m(i,a,o))},luminosity:function(){g(i,a,o,m(t,e,n))},color:function(){g(t,e,n,m(i,a,o))},add:function(){u=f(i+t,255),l=f(a+e,255),h=f(o+n,255)},subtract:function(){u=d(i-t,0),l=d(a-e,0),h=d(o-n,0)},average:function(){u=(i+t)/2,l=(a+e)/2,h=(o+n)/2},negation:function(){u=255-p(255-t-i),l=255-p(255-e-a),h=255-p(255-n-o)}},_=this.nativeModes=c.each([\"source-over\",\"source-in\",\"source-out\",\"source-atop\",\"destination-over\",\"destination-in\",\"destination-out\",\"destination-atop\",\"lighter\",\"darker\",\"copy\",\"xor\"],(function(t){this[t]=!0}),{}),x=st.getContext(1,1);x&&(c.each(b,(function(t,e){var n=\"darken\"===e,r=!1;x.save();try{x.fillStyle=n?\"#300\":\"#a00\",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,x.globalCompositeOperation===e&&(x.fillStyle=n?\"#a00\":\"#300\",x.fillRect(0,0,1,1),r=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}x.restore(),_[e]=r})),st.release(x)),this.process=function(c,f,d,p,m){var g=f.canvas,v=\"normal\"===c;if(v||_[c])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,v||(d.globalCompositeOperation=c),d.drawImage(g,m.x,m.y),d.restore();else{var y=b[c];if(!y)return;for(var x=d.getImageData(m.x,m.y,g.width,g.height),w=x.data,S=f.getImageData(0,0,g.width,g.height).data,E=0,M=w.length;E<M;E+=4){t=S[E],i=w[E],e=S[E+1],a=w[E+1],n=S[E+2],o=w[E+2],r=S[E+3],s=w[E+3],y();var T=r*p/255,C=1-T;w[E]=T*u+C*i,w[E+1]=T*l+C*a,w[E+2]=T*h+C*o,w[E+3]=r*p+C*s}d.putImageData(x,m.x,m.y)}}},lt=new function(){var t=\"http://www.w3.org/2000/svg\",e=\"http://www.w3.org/2000/xmlns\",n=\"http://www.w3.org/1999/xlink\",r={href:n,xlink:e,xmlns:e+\"/\",\"xmlns:xlink\":e+\"/\"};function i(t,e,n){for(var i in e){var a=e[i],o=r[i];\"number\"==typeof a&&n&&(a=n.number(a)),o?t.setAttributeNS(o,i,a):t.setAttribute(i,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,r){return i(l.createElementNS(t,e),n,r)},get:function(t,e){var n=r[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return\"null\"===i?null:i},set:i}},ct=c.each({fillColor:[\"fill\",\"color\"],fillRule:[\"fill-rule\",\"string\"],strokeColor:[\"stroke\",\"color\"],strokeWidth:[\"stroke-width\",\"number\"],strokeCap:[\"stroke-linecap\",\"string\"],strokeJoin:[\"stroke-linejoin\",\"string\"],strokeScaling:[\"vector-effect\",\"lookup\",{true:\"none\",false:\"non-scaling-stroke\"},function(t,e){return!e&&(t instanceof B||t instanceof k||t instanceof H)}],miterLimit:[\"stroke-miterlimit\",\"number\"],dashArray:[\"stroke-dasharray\",\"array\"],dashOffset:[\"stroke-dashoffset\",\"number\"],fontFamily:[\"font-family\",\"string\"],fontWeight:[\"font-weight\",\"string\"],fontSize:[\"font-size\",\"number\"],justification:[\"text-anchor\",\"lookup\",{left:\"start\",center:\"middle\",right:\"end\"}],opacity:[\"opacity\",\"number\"],blendMode:[\"mix-blend-mode\",\"style\"]},(function(t,e){var n=c.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:r,fromSVG:r&&c.each(r,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:\"get\"+n,set:\"set\"+n}}),{});new function(){var t;function e(e,n,r){var i,a=new c,o=e.getTranslation();n&&(e.isInvertible()?(i=(e=e._shiftless())._inverseTransform(o),o=null):i=new v,a[r?\"cx\":\"x\"]=i.x,a[r?\"cy\":\"y\"]=i.y);if(!e.isIdentity()){var s=e.decompose();if(s){var u=[],l=s.rotation,h=s.scaling,f=s.skewing;o&&!o.isZero()&&u.push(\"translate(\"+t.point(o)+\")\"),l&&u.push(\"rotate(\"+t.number(l)+\")\"),m.isZero(h.x-1)&&m.isZero(h.y-1)||u.push(\"scale(\"+t.point(h)+\")\"),f.x&&u.push(\"skewX(\"+t.number(f.x)+\")\"),f.y&&u.push(\"skewY(\"+t.number(f.y)+\")\"),a.transform=u.join(\" \")}else a.transform=\"matrix(\"+e.getValues().join(\",\")+\")\"}return a}function n(n,r){for(var i=e(n._matrix),a=n._children,o=lt.create(\"g\",i,t),s=0,u=a.length;s<u;s++){var c=a[s],h=f(c,r);if(h)if(c.isClipMask()){var d=lt.create(\"clipPath\");d.appendChild(h),l(c,d,\"clip\"),lt.set(o,{\"clip-path\":\"url(#\"+d.id+\")\"})}else o.appendChild(h)}return o}function r(n){var r=n._type,i=n._radius,a=e(n._matrix,!0,\"rectangle\"!==r);if(\"rectangle\"===r){r=\"rect\";var o=n._size,s=o.width,u=o.height;a.x-=s/2,a.y-=u/2,a.width=s,a.height=u,i.isZero()&&(i=null)}return i&&(\"circle\"===r?a.r=i:(a.rx=i.width,a.ry=i.height)),lt.create(r,a,t)}var i,a={Group:n,Layer:n,Raster:function(n,r){var i=e(n._matrix,!0),a=n.getSize(),o=n.getImage();return i.x-=a.width/2,i.y-=a.height/2,i.width=a.width,i.height=a.height,i.href=0==r.embedImages&&o&&o.src||n.toDataURL(),lt.create(\"image\",i,t)},Path:function(n,i){var a=i.matchShapes;if(a){var o=n.toShape(!1);if(o)return r(o)}var s,u=n._segments,l=u.length,c=e(n._matrix);if(a&&l>=2&&!n.hasHandles())if(l>2){s=n._closed?\"polygon\":\"polyline\";for(var h=[],f=0;f<l;f++)h.push(t.point(u[f]._point));c.points=h.join(\" \")}else{s=\"line\";var d=u[0]._point,p=u[1]._point;c.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else s=\"path\",c.d=n.getPathData(null,i.precision);return lt.create(s,c,t)},Shape:r,CompoundPath:function(n,r){var i=e(n._matrix),a=n.getPathData(null,r.precision);return a&&(i.d=a),lt.create(\"path\",i,t)},SymbolItem:function(n,r){var i=e(n._matrix,!0),a=n._definition,o=u(a,\"symbol\"),s=a._item,c=s.getStrokeBounds();return o||((o=lt.create(\"symbol\",{viewBox:t.rectangle(c)})).appendChild(f(s,r)),l(a,o,\"symbol\")),i.href=\"#\"+o.id,i.x+=c.x,i.y+=c.y,i.width=c.width,i.height=c.height,i.overflow=\"visible\",lt.create(\"use\",i,t)},PointText:function(n){var r=lt.create(\"text\",e(n._matrix,!0),t);return r.textContent=n._content,r}};function s(e,n,r){var i={},a=!r&&e.getParent(),o=[];return null!=e._name&&(i.id=e._name),c.each(ct,(function(n){var r=n.get,s=n.type,h=e[r]();if(n.exportFilter?n.exportFilter(e,h):!a||!c.equals(a[r](),h)){if(\"color\"===s&&null!=h){var f=h.getAlpha();f<1&&(i[n.attribute+\"-opacity\"]=f)}\"style\"===s?o.push(n.attribute+\": \"+h):i[n.attribute]=null==h?\"none\":\"color\"===s?h.gradient?function(e){var n=u(e,\"color\");if(!n){var r,i=e.getGradient(),a=i._radial,o=e.getOrigin(),s=e.getDestination();if(a){r={cx:o.x,cy:o.y,r:o.getDistance(s)};var c=e.getHighlight();c&&(r.fx=c.x,r.fy=c.y)}else r={x1:o.x,y1:o.y,x2:s.x,y2:s.y};r.gradientUnits=\"userSpaceOnUse\",n=lt.create((a?\"radial\":\"linear\")+\"Gradient\",r,t);for(var h=i._stops,f=0,d=h.length;f<d;f++){var p=h[f],m=p._color,g=m.getAlpha(),v=p._offset;r={offset:null==v?f/(d-1):v},m&&(r[\"stop-color\"]=m.toCSS(!0)),g<1&&(r[\"stop-opacity\"]=g),n.appendChild(lt.create(\"stop\",r,t))}l(e,n,\"color\")}return\"url(#\"+n.id+\")\"}(h):h.toCSS(!0):\"array\"===s?h.join(\",\"):\"lookup\"===s?n.toSVG[h]:h}})),o.length&&(i.style=o.join(\";\")),1===i.opacity&&delete i.opacity,e._visible||(i.visibility=\"hidden\"),lt.set(n,i,t)}function u(t,e){return i||(i={ids:{},svgs:{}}),t&&i.svgs[e+\"-\"+(t._id||t.__id||(t.__id=g.get(\"svg\")))]}function l(t,e,n){i||u();var r=i.ids[n]=(i.ids[n]||0)+1;e.id=n+\"-\"+r,i.svgs[n+\"-\"+(t._id||t.__id)]=e}function h(t,e){var n=t,r=null;if(i){for(var a in n=\"svg\"===t.nodeName.toLowerCase()&&t,i.svgs)r||(n||(n=lt.create(\"svg\")).appendChild(t),r=n.insertBefore(lt.create(\"defs\"),n.firstChild)),r.appendChild(i.svgs[a]);i=null}return e.asString?(new o.XMLSerializer).serializeToString(n):n}function f(t,e,n){var r=a[t._class],i=r&&r(t,e);if(i){var o=e.onExport;o&&(i=o(t,i,e)||i);var u=JSON.stringify(t._data);u&&\"{}\"!==u&&\"null\"!==u&&i.setAttribute(\"data-paper-data\",u)}return i&&s(t,i,n)}function d(e){return e||(e={}),t=new p(e.precision),e}T.inject({exportSVG:function(t){return h(f(this,t=d(t),!0),t)}}),M.inject({exportSVG:function(n){n=d(n);var r=this._children,i=this.getView(),a=c.pick(n.bounds,\"view\"),o=n.matrix||\"view\"===a&&i._matrix,s=o&&S.read([o]),u=\"view\"===a?new x([0,0],i.getViewSize()):\"content\"===a?T._getBounds(r,s,{stroke:!0}).rect:x.read([a],0,{readNull:!0}),l={version:\"1.1\",xmlns:lt.svg,\"xmlns:xlink\":lt.xlink};u&&(l.width=u.width,l.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(l.viewBox=t.rectangle(u)));var p=lt.create(\"svg\",l,t),m=p;s&&!s.isIdentity()&&(m=p.appendChild(lt.create(\"g\",e(s),t)));for(var g=0,v=r.length;g<v;g++)m.appendChild(f(r[g],n,!0));return h(p,n)}})},new function(){var t,e={};function n(e,n,r,i,a,o){var s=lt.get(e,n)||o,u=null==s?i?null:r?\"\":0:r?s:parseFloat(s);return/%\\s*$/.test(s)?u/100*(a?1:t[/x|^width/.test(n)?\"width\":\"height\"]):u}function r(t,e,r,i,a,o,s){return e=n(t,e||\"x\",!1,i,a,o),r=n(t,r||\"y\",!1,i,a,s),!i||null!=e&&null!=r?new v(e,r):null}function i(t,e,r,i,a){return e=n(t,e||\"width\",!1,i,a),r=n(t,r||\"height\",!1,i,a),!i||null!=e&&null!=r?new b(e,r):null}function a(t,e,n){return\"none\"===t?null:\"number\"===e?parseFloat(t):\"array\"===e?t?t.split(/[\\s,]+/g).map(parseFloat):[]:\"color\"===e?E(t)||t:\"lookup\"===e?n[t]:t}function h(t,e,n,r){var i=t.childNodes,a=\"clippath\"===e,o=\"defs\"===e,s=new C,u=s._project,l=u._currentStyle,c=[];if(a||o||(s=w(s,t,r),u._currentStyle=s._style.clone()),r)for(var h=t.querySelectorAll(\"defs\"),f=0,d=h.length;f<d;f++)P(h[f],n,!1);for(f=0,d=i.length;f<d;f++){var p,m=i[f];1!==m.nodeType||/^defs$/i.test(m.nodeName)||!(p=P(m,n,!1))||p instanceof L||c.push(p)}return s.addChildren(c),a&&(s=w(s.reduce(),t,r)),u._currentStyle=l,(a||o)&&(s.remove(),s=null),s}function f(t,e){for(var n=t.getAttribute(\"points\").match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),r=[],i=0,a=n.length;i<a;i+=2)r.push(new v(parseFloat(n[i]),parseFloat(n[i+1])));var o=new F(r);return\"polygon\"===e&&o.closePath(),o}function d(t,i){var a,o=(n(t,\"href\",!0)||\"\").substring(1),s=\"radialgradient\"===i;if(o)(a=e[o].getGradient())._radial^s&&((a=a.clone())._radial=s);else{for(var u=t.childNodes,l=[],c=0,h=u.length;c<h;c++){var f=u[c];1===f.nodeType&&l.push(w(new X,f))}a=new q(l,s)}var d,p,m,g=\"userSpaceOnUse\"!==n(t,\"gradientUnits\",!0);return s?(p=(d=r(t,\"cx\",\"cy\",!1,g,\"50%\",\"50%\")).add(n(t,\"r\",!1,!1,g,\"50%\"),0),m=r(t,\"fx\",\"fy\",!0,g)):(d=r(t,\"x1\",\"y1\",!1,g,\"0%\",\"0%\"),p=r(t,\"x2\",\"y2\",!1,g,\"100%\",\"0%\")),w(new W(a,d,p,m),t)._scaleToBounds=g,null}var p={\"#document\":function(t,e,n,r){for(var i=t.childNodes,a=0,o=i.length;a<o;a++){var s=i[a];if(1===s.nodeType)return P(s,n,r)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(t){return B.create(t.getAttribute(\"d\"))},lineargradient:d,radialgradient:d,image:function(t){var e=new A(n(t,\"href\",!0));return e.on(\"load\",(function(){var e=i(t);this.setSize(e);var n=r(t).add(e.divide(2));this._matrix.append((new S).translate(n))})),e},symbol:function(t,e,n,r){return new L(h(t,e,n,r),!0)},defs:h,use:function(t){var i=(n(t,\"href\",!0)||\"\").substring(1),a=e[i],o=r(t);return a?a instanceof L?a.place(o):a.clone().translate(o):null},circle:function(t){return new k.Circle(r(t,\"cx\",\"cy\"),n(t,\"r\"))},ellipse:function(t){return new k.Ellipse({center:r(t,\"cx\",\"cy\"),radius:i(t,\"rx\",\"ry\")})},rect:function(t){return new k.Rectangle(new x(r(t),i(t)),i(t,\"rx\",\"ry\"))},line:function(t){return new F.Line(r(t,\"x1\",\"y1\"),r(t,\"x2\",\"y2\"))},text:function(t){var e=new G(r(t).add(r(t,\"dx\",\"dy\")));return e.setContent(t.textContent.trim()||\"\"),e},switch:h};function m(t,e,n,r){if(t.transform){for(var i=(r.getAttribute(n)||\"\").split(/\\)\\s*/g),a=new S,o=0,s=i.length;o<s;o++){var u=i[o];if(!u)break;for(var l=u.split(/\\(\\s*/),c=l[0],h=l[1].split(/[\\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case\"matrix\":a.append(new S(h[0],h[1],h[2],h[3],h[4],h[5]));break;case\"rotate\":a.rotate(h[0],h[1]||0,h[2]||0);break;case\"translate\":a.translate(h[0],h[1]||0);break;case\"scale\":a.scale(h);break;case\"skewX\":a.skew(h[0],0);break;case\"skewY\":a.skew(0,h[0])}}t.transform(a)}}function g(t,e,n){var r=\"fill-opacity\"===n?\"getFillColor\":\"getStrokeColor\",i=t[r]&&t[r]();i&&i.setAlpha(parseFloat(e))}var y=c.set(c.each(ct,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](a(n,t.type,t.fromSVG)),\"color\"===t.type)){var r=e[t.get]();if(r&&r._scaleToBounds){var i=e.getBounds();r.transform((new S).translate(i.getPoint()).scale(i.getSize()))}}}}),{}),{id:function(t,n){e[n]=t,t.setName&&t.setName(n)},\"clip-path\":function(t,e){var n=E(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof C))return new C(n,t);t.insertChild(0,n)}},gradientTransform:m,transform:m,\"fill-opacity\":g,\"stroke-opacity\":g,visibility:function(t,e){t.setVisible&&t.setVisible(\"visible\"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},\"stop-color\":function(t,e){t.setColor&&t.setColor(e)},\"stop-opacity\":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,r,o){var s,u=new x(a(e,\"array\")),l=i(r,null,null,!0);if(t instanceof C){var c=l?l.divide(u.getSize()):1,h=(new S).scale(c).translate(u.getPoint().negate());s=t}else t instanceof L&&(l&&u.setSize(l),s=t._item);if(s){if(\"visible\"!==_(r,\"overflow\",o)){var f=new k.Rectangle(u);f.setClipMask(!0),s.addChild(f)}h&&s.transform(h)}}});function _(t,e,n){var r=t.attributes[e],i=r&&r.value;if(!i&&t.style){var a=c.camelize(e);(i=t.style[a])||n.node[a]===n.parent[a]||(i=n.node[a])}return i?\"none\"===i?null:i:s}function w(t,e,n){var r=e.parentNode,i={node:Q.getStyles(e)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&Q.getStyles(r)||{}};return c.each(y,(function(n,r){var a=_(e,r,i);t=a!==s&&n(t,a,r,e,i)||t})),t}function E(t){var n=t&&t.match(/\\((?:[\"'#]*)([^\"')]+)/),r=n&&n[1],i=r&&e[u?r.replace(u.location.href.split(\"#\")[0]+\"#\",\"\"):r];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function P(n,r,a){var o,s,u,h=n.nodeName.toLowerCase(),f=\"#document\"!==h,d=l.body;a&&f&&(t=ht.getView().getSize(),t=i(n,null,null,!0)||t,o=lt.create(\"svg\",{style:\"stroke-width: 1px; stroke-miterlimit: 10\"}),s=n.parentNode,u=n.nextSibling,o.appendChild(n),d.appendChild(o));var m=ht.settings,g=m.applyMatrix,v=m.insertItems;m.applyMatrix=!1,m.insertItems=!1;var y=p[h],b=y&&y(n,h,r,a)||null;if(m.insertItems=v,m.applyMatrix=g,b){!f||b instanceof C||(b=w(b,n,a));var _=r.onImport,x=f&&n.getAttribute(\"data-paper-data\");_&&(b=_(n,b,r)||b),r.expandShapes&&b instanceof k&&(b.remove(),b=b.toPath()),x&&(b._data=JSON.parse(x))}return o&&(d.removeChild(o),s&&(u?s.insertBefore(n,u):s.appendChild(n))),a&&(e={},b&&c.pick(r.applyMatrix,g)&&b.matrix.apply(!0,!0)),b}function O(t,e,n){if(!t)return null;e=\"function\"==typeof e?{onLoad:e}:e||{};var r=ht,i=null;function a(a){try{var l=\"object\"==typeof a?a:(new o.DOMParser).parseFromString(a,\"image/svg+xml\");if(!l.nodeName)throw l=null,new Error(\"Unsupported SVG source: \"+t);ht=r,i=P(l,e,!0),e&&!1===e.insert||n._insertItem(s,i);var c=e.onLoad;c&&c(i,a)}catch(t){u(t)}}function u(t,n){var r=e.onError;if(!r)throw new Error(t);r(t,n)}if(\"string\"!=typeof t||/^.*</.test(t)){if(\"undefined\"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){a(c.result)},c.onerror=function(){u(c.error)},c.readAsText(t)}a(t)}else{var h=l.getElementById(t);h?a(h):ot.request({url:t,async:!0,onLoad:a,onError:u})}return i}T.inject({importSVG:function(t,e){return O(t,e,this)}}),M.inject({importSVG:function(t,e){return this.activate(),O(t,e,this)}})},c.exports.PaperScript=function(){var t,e,h,d=this,p=d.acorn;if(!p)try{p=n(307)}catch(t){}p||(p=t=e={},h=function(t){\"use strict\";var e,n,r,i;t.version=\"0.5.0\",t.parse=function(t,i){return n=String(t),r=n.length,o(i),qt(),function(t){v=y=s,e.locations&&(b=new Wt),_=w=null,x=[],Jt();var n=t||ce(),r=!0;for(t||(n.body=[]);f!==A;){var i=we();n.body.push(i),r&&de(i)&&se(!0),r=!1}return fe(n,\"Program\")}(e.program)};var a=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function o(t){for(var n in e=t||{},a)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=a[n]);i=e.sourceFile||null}var s,u,l,c,h,f,d,p,m,g,v,y,b,_,x,w,S=t.getLineInfo=function(t,e){for(var n=1,r=0;;){Vt.lastIndex=r;var i=Vt.exec(t);if(!(i&&i.index<e))break;++n,r=i.index+i[0].length}return{line:n,column:e-r}};function E(t,e){var r=S(n,t);e+=\" (\"+r.line+\":\"+r.column+\")\";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=s,i}t.tokenize=function(t,i){n=String(t),r=n.length,o(i),qt();var a={};function v(t){return y=l,Jt(t),a.start=u,a.end=l,a.startLoc=c,a.endLoc=h,a.type=f,a.value=d,a}return v.jumpTo=function(t,r){var i;if(s=t,e.locations)for(m=1,g=Vt.lastIndex=0;(i=Vt.exec(n))&&i.index<t;)++m,g=i.index+i[0].length;p=r,Zt()},v};var M=[],T={type:\"num\"},C={type:\"regexp\"},P={type:\"string\"},k={type:\"name\"},A={type:\"eof\"},O={keyword:\"break\"},L={keyword:\"case\",beforeExpr:!0},I={keyword:\"catch\"},N={keyword:\"continue\"},R={keyword:\"debugger\"},D={keyword:\"default\"},z={keyword:\"do\",isLoop:!0},B={keyword:\"else\",beforeExpr:!0},F={keyword:\"finally\"},j={keyword:\"for\",isLoop:!0},U={keyword:\"function\"},V={keyword:\"if\"},H={keyword:\"return\",beforeExpr:!0},G={keyword:\"switch\"},W={keyword:\"throw\",beforeExpr:!0},q={keyword:\"try\"},X={keyword:\"var\"},Y={keyword:\"while\",isLoop:!0},Q={keyword:\"with\"},Z={keyword:\"new\",beforeExpr:!0},$={keyword:\"this\"},J={keyword:\"null\",atomValue:null},K={keyword:\"true\",atomValue:!0},tt={keyword:\"false\",atomValue:!1},et={keyword:\"in\",binop:7,beforeExpr:!0},nt={break:O,case:L,catch:I,continue:N,debugger:R,default:D,do:z,else:B,finally:F,for:j,function:U,if:V,return:H,switch:G,throw:W,try:q,var:X,while:Y,with:Q,null:J,true:K,false:tt,new:Z,in:et,instanceof:{keyword:\"instanceof\",binop:7,beforeExpr:!0},this:$,typeof:{keyword:\"typeof\",prefix:!0,beforeExpr:!0},void:{keyword:\"void\",prefix:!0,beforeExpr:!0},delete:{keyword:\"delete\",prefix:!0,beforeExpr:!0}},rt={type:\"[\",beforeExpr:!0},it={type:\"]\"},at={type:\"{\",beforeExpr:!0},ot={type:\"}\"},st={type:\"(\",beforeExpr:!0},ut={type:\")\"},lt={type:\",\",beforeExpr:!0},ct={type:\";\",beforeExpr:!0},ht={type:\":\",beforeExpr:!0},ft={type:\".\"},dt={type:\"?\",beforeExpr:!0},pt={binop:10,beforeExpr:!0},mt={isAssign:!0,beforeExpr:!0},gt={isAssign:!0,beforeExpr:!0},vt={postfix:!0,prefix:!0,isUpdate:!0},yt={prefix:!0,beforeExpr:!0},bt={binop:1,beforeExpr:!0},_t={binop:2,beforeExpr:!0},xt={binop:3,beforeExpr:!0},wt={binop:4,beforeExpr:!0},St={binop:5,beforeExpr:!0},Et={binop:6,beforeExpr:!0},Mt={binop:7,beforeExpr:!0},Tt={binop:8,beforeExpr:!0},Ct={binop:9,prefix:!0,beforeExpr:!0},Pt={binop:10,beforeExpr:!0};for(var kt in t.tokTypes={bracketL:rt,bracketR:it,braceL:at,braceR:ot,parenL:st,parenR:ut,comma:lt,semi:ct,colon:ht,dot:ft,question:dt,slash:pt,eq:mt,name:k,eof:A,num:T,regexp:C,string:P},nt)t.tokTypes[\"_\"+kt]=nt[kt];function At(t){t=t.split(\" \");var e=\"\",n=[];t:for(var r=0;r<t.length;++r){for(var i=0;i<n.length;++i)if(n[i][0].length==t[r].length){n[i].push(t[r]);continue t}n.push([t[r]])}function a(t){if(1==t.length)return e+=\"return str === \"+JSON.stringify(t[0])+\";\";e+=\"switch(str){\";for(var n=0;n<t.length;++n)e+=\"case \"+JSON.stringify(t[n])+\":\";e+=\"return true}return false;\"}if(n.length>3){for(n.sort((function(t,e){return e.length-t.length})),e+=\"switch(str.length){\",r=0;r<n.length;++r){var o=n[r];e+=\"case \"+o[0].length+\":\",a(o)}e+=\"}\"}else a(t);return new Function(\"str\",e)}var Ot,Lt=At(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\"),It=At(\"class enum extends super const export import\"),Nt=At(\"implements interface let package private protected public static yield\"),Rt=At(\"eval arguments\"),Dt=At(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\"),zt=/[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/,Bt=\"------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\",Ft=new RegExp(\"[\"+Bt+\"]\"),jt=new RegExp(\"[\"+Bt+\"------------------------------------------------------------------------------------------------------------------------------------------]\"),Ut=/[\\n\\r\\u2028\\u2029]/,Vt=/\\r\\n|[\\n\\r\\u2028\\u2029]/g,Ht=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Ft.test(String.fromCharCode(t)))},Gt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&jt.test(String.fromCharCode(t))))};function Wt(){this.line=m,this.column=s-g}function qt(){m=1,s=g=0,p=!0,Zt()}function Xt(t,n){l=s,e.locations&&(h=new Wt),f=t,Zt(),d=n,p=t.beforeExpr}function Yt(){var t,r=e.onComment&&e.locations&&new Wt,i=s,a=n.indexOf(\"*/\",s+=2);if(-1===a&&E(s-2,\"Unterminated comment\"),s=a+2,e.locations)for(Vt.lastIndex=i;(t=Vt.exec(n))&&t.index<s;)++m,g=t.index+t[0].length;e.onComment&&e.onComment(!0,n.slice(i+2,a),i,s,r,e.locations&&new Wt)}function Qt(){for(var t=s,i=e.onComment&&e.locations&&new Wt,a=n.charCodeAt(s+=2);s<r&&10!==a&&13!==a&&8232!==a&&8233!==a;)++s,a=n.charCodeAt(s);e.onComment&&e.onComment(!1,n.slice(t+2,s),t,s,i,e.locations&&new Wt)}function Zt(){for(;s<r;){var t=n.charCodeAt(s);if(32===t)++s;else if(13===t)++s,10===(i=n.charCodeAt(s))&&++s,e.locations&&(++m,g=s);else if(10===t||8232===t||8233===t)++s,e.locations&&(++m,g=s);else if(t>8&&t<14)++s;else if(47===t){var i;if(42===(i=n.charCodeAt(s+1)))Yt();else{if(47!==i)break;Qt()}}else if(160===t)++s;else{if(!(t>=5760&&zt.test(String.fromCharCode(t))))break;++s}}}function $t(t){switch(t){case 46:return function(){var t=n.charCodeAt(s+1);return t>=48&&t<=57?ne(!0):(++s,Xt(ft))}();case 40:return++s,Xt(st);case 41:return++s,Xt(ut);case 59:return++s,Xt(ct);case 44:return++s,Xt(lt);case 91:return++s,Xt(rt);case 93:return++s,Xt(it);case 123:return++s,Xt(at);case 125:return++s,Xt(ot);case 58:return++s,Xt(ht);case 63:return++s,Xt(dt);case 48:var i=n.charCodeAt(s+1);if(120===i||88===i)return function(){s+=2;var t=ee(16);return null==t&&E(u+2,\"Expected hexadecimal number\"),Ht(n.charCodeAt(s))&&E(s,\"Identifier directly after number\"),Xt(T,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ne(!1);case 34:case 39:return function(t){s++;for(var i=\"\";;){s>=r&&E(u,\"Unterminated string constant\");var a=n.charCodeAt(s);if(a===t)return++s,Xt(P,i);if(92===a){a=n.charCodeAt(++s);var o=/^[0-7]+/.exec(n.slice(s,s+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if(\"0\"===o&&(o=null),++s,o)w&&E(s-2,\"Octal literal in strict mode\"),i+=String.fromCharCode(parseInt(o,8)),s+=o.length-1;else switch(a){case 110:i+=\"\\n\";break;case 114:i+=\"\\r\";break;case 120:i+=String.fromCharCode(re(2));break;case 117:i+=String.fromCharCode(re(4));break;case 85:i+=String.fromCharCode(re(8));break;case 116:i+=\"\\t\";break;case 98:i+=\"\\b\";break;case 118:i+=\"\\v\";break;case 102:i+=\"\\f\";break;case 48:i+=\"\\0\";break;case 13:10===n.charCodeAt(s)&&++s;case 10:e.locations&&(g=s,++m);break;default:i+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||E(u,\"Unterminated string constant\"),i+=String.fromCharCode(a),++s}}(t);case 47:return function(){var t=n.charCodeAt(s+1);return p?(++s,te()):61===t?Kt(gt,2):Kt(pt,1)}();case 37:case 42:return 61===n.charCodeAt(s+1)?Kt(gt,2):Kt(Pt,1);case 124:case 38:return function(t){var e=n.charCodeAt(s+1);return e===t?Kt(124===t?bt:_t,2):61===e?Kt(gt,2):Kt(124===t?xt:St,1)}(t);case 94:return 61===n.charCodeAt(s+1)?Kt(gt,2):Kt(wt,1);case 43:case 45:return function(t){var e=n.charCodeAt(s+1);return e===t?45==e&&62==n.charCodeAt(s+2)&&Ut.test(n.slice(y,s))?(s+=3,Qt(),Zt(),Jt()):Kt(vt,2):61===e?Kt(gt,2):Kt(Ct,1)}(t);case 60:case 62:return function(t){var e=n.charCodeAt(s+1),r=1;return e===t?(r=62===t&&62===n.charCodeAt(s+2)?3:2,61===n.charCodeAt(s+r)?Kt(gt,r+1):Kt(Tt,r)):33==e&&60==t&&45==n.charCodeAt(s+2)&&45==n.charCodeAt(s+3)?(s+=4,Qt(),Zt(),Jt()):(61===e&&(r=61===n.charCodeAt(s+2)?3:2),Kt(Mt,r))}(t);case 61:case 33:return function(t){return 61===n.charCodeAt(s+1)?Kt(Et,61===n.charCodeAt(s+2)?3:2):Kt(61===t?mt:yt,1)}(t);case 126:return Kt(yt,1)}return!1}function Jt(t){if(t?s=u+1:u=s,e.locations&&(c=new Wt),t)return te();if(s>=r)return Xt(A);var i=n.charCodeAt(s);if(Ht(i)||92===i)return ae();var a=$t(i);if(!1===a){var o=String.fromCharCode(i);if(\"\\\\\"===o||Ft.test(o))return ae();E(s,\"Unexpected character '\"+o+\"'\")}return a}function Kt(t,e){var r=n.slice(s,s+e);s+=e,Xt(t,r)}function te(){for(var t,e,i=s;;){s>=r&&E(i,\"Unterminated regular expression\");var a=n.charAt(s);if(Ut.test(a)&&E(i,\"Unterminated regular expression\"),t)t=!1;else{if(\"[\"===a)e=!0;else if(\"]\"===a&&e)e=!1;else if(\"/\"===a&&!e)break;t=\"\\\\\"===a}++s}var o=n.slice(i,s);++s;var u=ie();u&&!/^[gmsiy]*$/.test(u)&&E(i,\"Invalid regexp flag\");try{var l=new RegExp(o,u)}catch(t){t instanceof SyntaxError&&E(i,t.message),E(t)}return Xt(C,l)}function ee(t,e){for(var r=s,i=0,a=0,o=null==e?1/0:e;a<o;++a){var u,l=n.charCodeAt(s);if((u=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=t)break;++s,i=i*t+u}return s===r||null!=e&&s-r!==e?null:i}function ne(t){var e=s,r=!1,i=48===n.charCodeAt(s);t||null!==ee(10)||E(e,\"Invalid number\"),46===n.charCodeAt(s)&&(++s,ee(10),r=!0);var a=n.charCodeAt(s);69!==a&&101!==a||(43!==(a=n.charCodeAt(++s))&&45!==a||++s,null===ee(10)&&E(e,\"Invalid number\"),r=!0),Ht(n.charCodeAt(s))&&E(s,\"Identifier directly after number\");var o,u=n.slice(e,s);return r?o=parseFloat(u):i&&1!==u.length?/[89]/.test(u)||w?E(e,\"Invalid number\"):o=parseInt(u,8):o=parseInt(u,10),Xt(T,o)}function re(t){var e=ee(16,t);return null===e&&E(u,\"Bad character escape sequence\"),e}function ie(){Ot=!1;for(var t,e=!0,r=s;;){var i=n.charCodeAt(s);if(Gt(i))Ot&&(t+=n.charAt(s)),++s;else{if(92!==i)break;Ot||(t=n.slice(r,s)),Ot=!0,117!=n.charCodeAt(++s)&&E(s,\"Expecting Unicode escape sequence \\\\uXXXX\"),++s;var a=re(4),o=String.fromCharCode(a);o||E(s-1,\"Invalid Unicode escape\"),(e?Ht(a):Gt(a))||E(s-4,\"Invalid Unicode escape\"),t+=o}e=!1}return Ot?t:n.slice(r,s)}function ae(){var t=ie(),e=k;return!Ot&&Dt(t)&&(e=nt[t]),Xt(e,t)}function oe(){v=u,y=l,b=h,Jt()}function se(t){if(w=t,s=u,e.locations)for(;s<g;)g=n.lastIndexOf(\"\\n\",g-2)+1,--m;Zt(),Jt()}function ue(){this.type=null,this.start=u,this.end=null}function le(){this.start=c,this.end=null,null!==i&&(this.source=i)}function ce(){var t=new ue;return e.locations&&(t.loc=new le),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[u,0]),t}function he(t){var n=new ue;return n.start=t.start,e.locations&&(n.loc=new le,n.loc.start=t.loc.start),e.ranges&&(n.range=[t.range[0],0]),n}function fe(t,n){return t.type=n,t.end=y,e.locations&&(t.loc.end=b),e.ranges&&(t.range[1]=y),t}function de(t){return e.ecmaVersion>=5&&\"ExpressionStatement\"===t.type&&\"Literal\"===t.expression.type&&\"use strict\"===t.expression.value}function pe(t){if(f===t)return oe(),!0}function me(){return!e.strictSemicolons&&(f===A||f===ot||Ut.test(n.slice(y,u)))}function ge(){pe(ct)||me()||ye()}function ve(t){f===t?oe():ye()}function ye(){E(u,\"Unexpected token\")}function be(t){\"Identifier\"!==t.type&&\"MemberExpression\"!==t.type&&E(t.start,\"Assigning to rvalue\"),w&&\"Identifier\"===t.type&&Rt(t.name)&&E(t.start,\"Assigning to \"+t.name+\" in strict mode\")}var _e={kind:\"loop\"},xe={kind:\"switch\"};function we(){(f===pt||f===gt&&\"/=\"==d)&&Jt(!0);var t=f,r=ce();switch(t){case O:case N:oe();var i=t===O;pe(ct)||me()?r.label=null:f!==k?ye():(r.label=De(),ge());for(var a=0;a<x.length;++a){var o=x[a];if(null==r.label||o.name===r.label.name){if(null!=o.kind&&(i||\"loop\"===o.kind))break;if(r.label&&i)break}}return a===x.length&&E(r.start,\"Unsyntactic \"+t.keyword),fe(r,i?\"BreakStatement\":\"ContinueStatement\");case R:return oe(),ge(),fe(r,\"DebuggerStatement\");case z:return oe(),x.push(_e),r.body=we(),x.pop(),ve(Y),r.test=Se(),ge(),fe(r,\"DoWhileStatement\");case j:if(oe(),x.push(_e),ve(st),f===ct)return Me(r,null);if(f===X){var s=ce();return oe(),Ce(s,!0),fe(s,\"VariableDeclaration\"),1===s.declarations.length&&pe(et)?Te(r,s):Me(r,s)}return s=Pe(!1,!0),pe(et)?(be(s),Te(r,s)):Me(r,s);case U:return oe(),Ne(r,!0);case V:return oe(),r.test=Se(),r.consequent=we(),r.alternate=pe(B)?we():null,fe(r,\"IfStatement\");case H:return _||e.allowReturnOutsideFunction||E(u,\"'return' outside of function\"),oe(),pe(ct)||me()?r.argument=null:(r.argument=Pe(),ge()),fe(r,\"ReturnStatement\");case G:oe(),r.discriminant=Se(),r.cases=[],ve(at),x.push(xe);for(var l,c;f!=ot;)if(f===L||f===D){var h=f===L;l&&fe(l,\"SwitchCase\"),r.cases.push(l=ce()),l.consequent=[],oe(),h?l.test=Pe():(c&&E(v,\"Multiple default clauses\"),c=!0,l.test=null),ve(ht)}else l||ye(),l.consequent.push(we());return l&&fe(l,\"SwitchCase\"),oe(),x.pop(),fe(r,\"SwitchStatement\");case W:return oe(),Ut.test(n.slice(y,u))&&E(y,\"Illegal newline after throw\"),r.argument=Pe(),ge(),fe(r,\"ThrowStatement\");case q:if(oe(),r.block=Ee(),r.handler=null,f===I){var p=ce();oe(),ve(st),p.param=De(),w&&Rt(p.param.name)&&E(p.param.start,\"Binding \"+p.param.name+\" in strict mode\"),ve(ut),p.guard=null,p.body=Ee(),r.handler=fe(p,\"CatchClause\")}return r.guardedHandlers=M,r.finalizer=pe(F)?Ee():null,r.handler||r.finalizer||E(r.start,\"Missing catch or finally clause\"),fe(r,\"TryStatement\");case X:return oe(),Ce(r),ge(),fe(r,\"VariableDeclaration\");case Y:return oe(),r.test=Se(),x.push(_e),r.body=we(),x.pop(),fe(r,\"WhileStatement\");case Q:return w&&E(u,\"'with' in strict mode\"),oe(),r.object=Se(),r.body=we(),fe(r,\"WithStatement\");case at:return Ee();case ct:return oe(),fe(r,\"EmptyStatement\");default:var m=d,g=Pe();if(t===k&&\"Identifier\"===g.type&&pe(ht)){for(a=0;a<x.length;++a)x[a].name===m&&E(g.start,\"Label '\"+m+\"' is already declared\");var b=f.isLoop?\"loop\":f===G?\"switch\":null;return x.push({name:m,kind:b}),r.body=we(),x.pop(),r.label=g,fe(r,\"LabeledStatement\")}return r.expression=g,ge(),fe(r,\"ExpressionStatement\")}}function Se(){ve(st);var t=Pe();return ve(ut),t}function Ee(t){var e,n=ce(),r=!0,i=!1;for(n.body=[],ve(at);!pe(ot);){var a=we();n.body.push(a),r&&t&&de(a)&&(e=i,se(i=!0)),r=!1}return i&&!e&&se(!1),fe(n,\"BlockStatement\")}function Me(t,e){return t.init=e,ve(ct),t.test=f===ct?null:Pe(),ve(ct),t.update=f===ut?null:Pe(),ve(ut),t.body=we(),x.pop(),fe(t,\"ForStatement\")}function Te(t,e){return t.left=e,t.right=Pe(),ve(ut),t.body=we(),x.pop(),fe(t,\"ForInStatement\")}function Ce(t,e){for(t.declarations=[],t.kind=\"var\";;){var n=ce();if(n.id=De(),w&&Rt(n.id.name)&&E(n.id.start,\"Binding \"+n.id.name+\" in strict mode\"),n.init=pe(mt)?Pe(!0,e):null,t.declarations.push(fe(n,\"VariableDeclarator\")),!pe(lt))break}return t}function Pe(t,e){var n=ke(e);if(!t&&f===lt){var r=he(n);for(r.expressions=[n];pe(lt);)r.expressions.push(ke(e));return fe(r,\"SequenceExpression\")}return n}function ke(t){var e=function(t){var e=function(t){return function t(e,n,r){var i=f.binop;if(null!=i&&(!r||f!==et)&&i>n){var a=he(e);a.left=e,a.operator=d;var o=f;oe(),a.right=t(Ae(),i,r);var s=fe(a,o===bt||o===_t?\"LogicalExpression\":\"BinaryExpression\");return t(s,n,r)}return e}(Ae(),-1,t)}(t);if(pe(dt)){var n=he(e);return n.test=e,n.consequent=Pe(!0),ve(ht),n.alternate=Pe(!0,t),fe(n,\"ConditionalExpression\")}return e}(t);if(f.isAssign){var n=he(e);return n.operator=d,n.left=e,oe(),n.right=ke(t),be(e),fe(n,\"AssignmentExpression\")}return e}function Ae(){if(f.prefix){var t=ce(),e=f.isUpdate;return t.operator=d,t.prefix=!0,p=!0,oe(),t.argument=Ae(),e?be(t.argument):w&&\"delete\"===t.operator&&\"Identifier\"===t.argument.type&&E(t.start,\"Deleting local variable in strict mode\"),fe(t,e?\"UpdateExpression\":\"UnaryExpression\")}for(var n=Oe(Le());f.postfix&&!me();)(t=he(n)).operator=d,t.prefix=!1,t.argument=n,be(n),oe(),n=fe(t,\"UpdateExpression\");return n}function Oe(t,e){var n;return pe(ft)?((n=he(t)).object=t,n.property=De(!0),n.computed=!1,Oe(fe(n,\"MemberExpression\"),e)):pe(rt)?((n=he(t)).object=t,n.property=Pe(),n.computed=!0,ve(it),Oe(fe(n,\"MemberExpression\"),e)):!e&&pe(st)?((n=he(t)).callee=t,n.arguments=Re(ut,!1),Oe(fe(n,\"CallExpression\"),e)):t}function Le(){switch(f){case $:var t=ce();return oe(),fe(t,\"ThisExpression\");case k:return De();case T:case P:case C:return(t=ce()).value=d,t.raw=n.slice(u,l),oe(),fe(t,\"Literal\");case J:case K:case tt:return(t=ce()).value=f.atomValue,t.raw=f.keyword,oe(),fe(t,\"Literal\");case st:var r=c,i=u;oe();var a=Pe();return a.start=i,a.end=l,e.locations&&(a.loc.start=r,a.loc.end=h),e.ranges&&(a.range=[i,l]),ve(ut),a;case rt:return t=ce(),oe(),t.elements=Re(it,!0,!0),fe(t,\"ArrayExpression\");case at:return function(){var t=ce(),n=!0,r=!1;for(t.properties=[],oe();!pe(ot);){if(n)n=!1;else if(ve(lt),e.allowTrailingCommas&&pe(ot))break;var i,a={key:Ie()},o=!1;if(pe(ht)?(a.value=Pe(!0),i=a.kind=\"init\"):e.ecmaVersion>=5&&\"Identifier\"===a.key.type&&(\"get\"===a.key.name||\"set\"===a.key.name)?(o=r=!0,i=a.kind=a.key.name,a.key=Ie(),f!==st&&ye(),a.value=Ne(ce(),!1)):ye(),\"Identifier\"===a.key.type&&(w||r))for(var s=0;s<t.properties.length;++s){var u=t.properties[s];if(u.key.name===a.key.name){var l=i==u.kind||o&&\"init\"===u.kind||\"init\"===i&&(\"get\"===u.kind||\"set\"===u.kind);l&&!w&&\"init\"===i&&\"init\"===u.kind&&(l=!1),l&&E(a.key.start,\"Redefinition of property\")}}t.properties.push(a)}return fe(t,\"ObjectExpression\")}();case U:return t=ce(),oe(),Ne(t,!1);case Z:return function(){var t=ce();return oe(),t.callee=Oe(Le(),!0),pe(st)?t.arguments=Re(ut,!1):t.arguments=M,fe(t,\"NewExpression\")}();default:ye()}}function Ie(){return f===T||f===P?Le():De(!0)}function Ne(t,e){f===k?t.id=De():e?ye():t.id=null,t.params=[];var n=!0;for(ve(st);!pe(ut);)n?n=!1:ve(lt),t.params.push(De());var r=_,i=x;if(_=!0,x=[],t.body=Ee(!0),_=r,x=i,w||t.body.body.length&&de(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=a<0?t.id:t.params[a];if((Nt(o.name)||Rt(o.name))&&E(o.start,\"Defining '\"+o.name+\"' in strict mode\"),a>=0)for(var s=0;s<a;++s)o.name===t.params[s].name&&E(o.start,\"Argument name clash in strict mode\")}return fe(t,e?\"FunctionDeclaration\":\"FunctionExpression\")}function Re(t,n,r){for(var i=[],a=!0;!pe(t);){if(a)a=!1;else if(ve(lt),n&&e.allowTrailingCommas&&pe(t))break;r&&f===lt?i.push(null):i.push(Pe(!0))}return i}function De(t){var r=ce();return t&&\"everywhere\"==e.forbidReserved&&(t=!1),f===k?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?Lt:It)(d)||w&&Nt(d))&&-1==n.slice(u,l).indexOf(\"\\\\\")&&E(u,\"The keyword '\"+d+\"' is reserved\"),r.name=d):t&&f.keyword?r.name=f.keyword:ye(),p=!1,oe(),fe(r,\"Identifier\")}},\"object\"==typeof t&&\"object\"==typeof e?h(t):(r=[t],(a=\"function\"==typeof(i=h)?i.apply(t,r):i)===s||(e.exports=a)),p.version||(p=null));function m(t,e){return(d.acorn||p).parse(t,e)}var g={\"+\":\"__add\",\"-\":\"__subtract\",\"*\":\"__multiply\",\"/\":\"__divide\",\"%\":\"__modulo\",\"==\":\"__equals\",\"!=\":\"__equals\"},y={\"-\":\"__negate\",\"+\":\"__self\"},_=c.each([\"add\",\"subtract\",\"multiply\",\"divide\",\"modulo\",\"equals\",\"negate\"],(function(t){this[\"__\"+t]=\"#\"+t}),{__self:function(){return this}});function x(t,e,n){var r=g[e];if(t&&t[r]){var i=t[r](n);return\"!=\"===e?!i:i}switch(e){case\"+\":return t+n;case\"-\":return t-n;case\"*\":return t*n;case\"/\":return t/n;case\"%\":return t%n;case\"==\":return t==n;case\"!=\":return t!=n}}function w(t,e){var n=y[t];if(e&&e[n])return e[n]();switch(t){case\"+\":return+e;case\"-\":return-e}}function S(t,e){if(!t)return\"\";var n=[];function r(t){for(var e=0,r=n.length;e<r;e++){var i=n[e];if(i[0]>=t)break;t+=i[1]}return t}function i(e){return t.substring(r(e.range[0]),r(e.range[1]))}function a(e,i){for(var a=r(e.range[0]),o=r(e.range[1]),s=0,u=n.length-1;u>=0;u--)if(a>n[u][0]){s=u+1;break}n.splice(s,0,[a,i.length-o+a]),t=t.substring(0,a)+i+t.substring(o)}var s,c=(e=e||{}).url||\"\",h=ht.agent,f=h.versionNumber,d=!1,p=e.sourceMaps,v=e.source||t,b=/\\r\\n|\\n|\\r/gm,_=e.offset||0;if(p&&(h.chrome&&f>=30||h.webkit&&f>=537.76||h.firefox&&f>=23||h.node)){if(h.node)_-=2;else if(u&&c&&!u.location.href.indexOf(c)){var x=l.getElementsByTagName(\"html\")[0].innerHTML;_=x.substr(0,x.indexOf(t)+1).match(b).length+1}var w=[\"AA\"+function(t){var e=\"\";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[n]}return e}((d=_>0&&!(h.chrome&&f>=36||h.safari&&f>=600||h.firefox&&f>=40||h.node))?0:_)+\"A\"];w.length=(t.match(b)||[]).length+1+(d?_:0),s={version:3,file:c,names:[],mappings:w.join(\";AACA\"),sourceRoot:\"\",sources:[c],sourcesContent:[v]}}return function e(n,o){if(n){for(var s in n)if(\"range\"!==s&&\"loc\"!==s){var u=n[s];if(Array.isArray(u))for(var l=0,c=u.length;l<c;l++)e(u[l],n);else u&&\"object\"==typeof u&&e(u,n)}switch(n.type){case\"UnaryExpression\":if(n.operator in y&&\"Literal\"!==n.argument.type){var h=i(n.argument);a(n,'$__(\"'+n.operator+'\", '+h+\")\")}break;case\"BinaryExpression\":if(n.operator in g&&\"Literal\"!==n.left.type){var f=i(n.left),d=i(n.right),p=function(e,n){return t.substring(r(e.range[1]),r(n.range[0]))}(n.left,n.right),m=n.operator;a(n,\"__$__(\"+f+\",\"+p.replace(new RegExp(\"\\\\\"+m),'\"'+m+'\"')+\", \"+d+\")\")}break;case\"UpdateExpression\":case\"AssignmentExpression\":var v=o&&o.type;if(!(\"ForStatement\"===v||\"BinaryExpression\"===v&&/^[=!<>]/.test(o.operator)||\"MemberExpression\"===v&&o.computed))if(\"UpdateExpression\"===n.type){var b=(h=i(n.argument))+\" = \"+(_=\"__$__(\"+h+', \"'+n.operator[0]+'\", 1)');n.prefix?b=\"(\"+b+\")\":\"AssignmentExpression\"!==v&&\"VariableDeclarator\"!==v&&\"BinaryExpression\"!==v||(i(o.left||o.id)===h&&(b=_),b=h+\"; \"+b),a(n,b)}else if(/^.=$/.test(n.operator)&&\"Literal\"!==n.left.type){f=i(n.left),d=i(n.right);var _=f+\" = __$__(\"+f+', \"'+n.operator[0]+'\", '+d+\")\";a(n,/^\\(.*\\)$/.test(i(n))?\"(\"+_+\")\":_)}break;case\"ExportDefaultDeclaration\":a({range:[n.start,n.declaration.start]},\"module.exports = \");break;case\"ExportNamedDeclaration\":var x=n.declaration,w=n.specifiers;if(x){var S=x.declarations;S&&(S.forEach((function(t){a(t,\"module.exports.\"+i(t))})),a({range:[n.start,x.start+x.kind.length]},\"\"))}else if(w){var E=w.map((function(t){var e=i(t);return\"module.exports.\"+e+\" = \"+e+\"; \"})).join(\"\");E&&a(n,E)}}}}(m(t,{ranges:!0,preserveParens:!0,sourceType:\"module\"})),s&&(d&&(t=new Array(_+1).join(\"\\n\")+t),/^(inline|both)$/.test(p)&&(t+=\"\\n//# sourceMappingURL=data:application/json;base64,\"+o.btoa(unescape(encodeURIComponent(JSON.stringify(s))))),t+=\"\\n//# sourceURL=\"+(c||\"paperscript\")),{url:c,source:v,code:t,map:s}}function E(t,e,n){ht=e;var r,i=e.getView(),a=/\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/.test(t)&&!/\\bnew\\s+Tool\\b/.test(t)?new it:null,o=a?a._events:[],s=[\"onFrame\",\"onResize\"].concat(o),u=[],h=[],f=\"object\"==typeof t?t:S(t,n);function d(e,n){for(var r in e)!n&&/^_/.test(r)||!new RegExp(\"([\\\\b\\\\s\\\\W]|^)\"+r.replace(/\\$/g,\"\\\\$\")+\"\\\\b\").test(t)||(u.push(r),h.push(e[r]))}t=f.code,d({__$__:x,$__:w,paper:e,tool:a},!0),d(e),t=\"var module = { exports: {} }; \"+t,(y=c.each(s,(function(e){new RegExp(\"\\\\s+\"+e+\"\\\\b\").test(t)&&(u.push(e),this.push(\"module.exports.\"+e+\" = \"+e+\";\"))}),[]).join(\"\\n\"))&&(t+=\"\\n\"+y),t+=\"\\nreturn module.exports;\";var p=ht.agent;if(l&&(p.chrome||p.firefox&&p.versionNumber<40)){var m=l.createElement(\"script\"),g=l.head||l.getElementsByTagName(\"head\")[0];p.firefox&&(t=\"\\n\"+t),m.appendChild(l.createTextNode(\"document.__paperscript__ = function(\"+u+\") {\"+t+\"\\n}\")),g.appendChild(m),r=l.__paperscript__,delete l.__paperscript__,g.removeChild(m)}else r=Function(u,t);var y,b=(y=r&&r.apply(e,h))||{};return c.each(o,(function(t){var e=b[t];e&&(a[t]=e)})),i&&(b.onResize&&i.setOnResize(b.onResize),i.emit(\"resize\",{size:i.size,delta:new v}),b.onFrame&&i.setOnFrame(b.onFrame),i.requestUpdate()),y}function M(t){if(/^text\\/(?:x-|)paperscript$/.test(t.type)&&\"true\"!==f.getAttribute(t,\"ignore\")){var e=f.getAttribute(t,\"canvas\"),n=l.getElementById(e),r=t.src||t.getAttribute(\"data-src\"),i=f.hasAttribute(t,\"async\");if(!n)throw new Error('Unable to find canvas with id \"'+e+'\"');var a=f.get(n.getAttribute(\"data-paper-scope\"))||(new f).setup(n);return n.setAttribute(\"data-paper-scope\",a._id),r?ot.request({url:r,async:i,mimeType:\"text/plain\",onLoad:function(t){E(t,a,r)}}):E(t.innerHTML,a,t.baseURI),t.setAttribute(\"data-paper-ignore\",\"true\"),a}}function T(){c.each(l&&l.getElementsByTagName(\"script\"),M)}return v.inject(_),b.inject(_),W.inject(_),u&&(\"complete\"===l.readyState?setTimeout(T):Z.add(u,{load:T})),{compile:S,execute:E,load:function(t){return t?M(t):T()},parse:m,calculateBinary:x,calculateUnary:w}}.call(this);var ht=new(f.inject(c.exports,{Base:c,Numerical:m,Key:et,DomEvent:Z,DomElement:Q,document:l,window:u,Symbol:L,PlacedSymbol:O}));return ht.agent.node&&n(308)(ht),(a=\"function\"==typeof(i=ht)?i.call(e,n,e,t):i)===s||(t.exports=a),ht}).call(this,\"object\"==typeof self?self:null)},function(t,e){},function(t,e,n){\"use strict\";n.r(e),n.d(e,\"Node\",(function(){return st})),n.d(e,\"Parser\",(function(){return G})),n.d(e,\"Position\",(function(){return N})),n.d(e,\"SourceLocation\",(function(){return R})),n.d(e,\"TokContext\",(function(){return ct})),n.d(e,\"Token\",(function(){return It})),n.d(e,\"TokenType\",(function(){return g})),n.d(e,\"defaultOptions\",(function(){return z})),n.d(e,\"getLineInfo\",(function(){return D})),n.d(e,\"isIdentifierChar\",(function(){return m})),n.d(e,\"isIdentifierStart\",(function(){return p})),n.d(e,\"isNewLine\",(function(){return M})),n.d(e,\"keywordTypes\",(function(){return _})),n.d(e,\"lineBreak\",(function(){return S})),n.d(e,\"lineBreakG\",(function(){return E})),n.d(e,\"nonASCIIwhitespace\",(function(){return T})),n.d(e,\"parse\",(function(){return Bt})),n.d(e,\"parseExpressionAt\",(function(){return Ft})),n.d(e,\"tokContexts\",(function(){return ht})),n.d(e,\"tokTypes\",(function(){return w})),n.d(e,\"tokenizer\",(function(){return jt})),n.d(e,\"version\",(function(){return zt}));var r={3:\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\",5:\"class enum extends super const export import\",6:\"enum\",strict:\"implements interface let package private protected public static yield\",strictBind:\"eval arguments\"},i=\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\",a={5:i,\"5module\":i+\" export import\",6:i+\" const class extends export import super\"},o=/^in(stanceof)?$/,s=\"---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\",u=\"--------------------------------------------------------------------------------------------------------------------------------------------------\",l=new RegExp(\"[\"+s+\"]\"),c=new RegExp(\"[\"+s+u+\"]\");s=u=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],f=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function d(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&l.test(String.fromCharCode(t)):!1!==e&&d(t,h)))}function m(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&c.test(String.fromCharCode(t)):!1!==e&&(d(t,h)||d(t,f)))))}var g=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function v(t,e){return new g(t,{beforeExpr:!0,binop:e})}var y={beforeExpr:!0},b={startsExpr:!0},_={};function x(t,e){return void 0===e&&(e={}),e.keyword=t,_[t]=new g(t,e)}var w={num:new g(\"num\",b),regexp:new g(\"regexp\",b),string:new g(\"string\",b),name:new g(\"name\",b),eof:new g(\"eof\"),bracketL:new g(\"[\",{beforeExpr:!0,startsExpr:!0}),bracketR:new g(\"]\"),braceL:new g(\"{\",{beforeExpr:!0,startsExpr:!0}),braceR:new g(\"}\"),parenL:new g(\"(\",{beforeExpr:!0,startsExpr:!0}),parenR:new g(\")\"),comma:new g(\",\",y),semi:new g(\";\",y),colon:new g(\":\",y),dot:new g(\".\"),question:new g(\"?\",y),arrow:new g(\"=>\",y),template:new g(\"template\"),invalidTemplate:new g(\"invalidTemplate\"),ellipsis:new g(\"...\",y),backQuote:new g(\"`\",b),dollarBraceL:new g(\"${\",{beforeExpr:!0,startsExpr:!0}),eq:new g(\"=\",{beforeExpr:!0,isAssign:!0}),assign:new g(\"_=\",{beforeExpr:!0,isAssign:!0}),incDec:new g(\"++/--\",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g(\"!/~\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:v(\"||\",1),logicalAND:v(\"&&\",2),bitwiseOR:v(\"|\",3),bitwiseXOR:v(\"^\",4),bitwiseAND:v(\"&\",5),equality:v(\"==/!=/===/!==\",6),relational:v(\"</>/<=/>=\",7),bitShift:v(\"<</>>/>>>\",8),plusMin:new g(\"+/-\",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:v(\"%\",10),star:v(\"*\",10),slash:v(\"/\",10),starstar:new g(\"**\",{beforeExpr:!0}),_break:x(\"break\"),_case:x(\"case\",y),_catch:x(\"catch\"),_continue:x(\"continue\"),_debugger:x(\"debugger\"),_default:x(\"default\",y),_do:x(\"do\",{isLoop:!0,beforeExpr:!0}),_else:x(\"else\",y),_finally:x(\"finally\"),_for:x(\"for\",{isLoop:!0}),_function:x(\"function\",b),_if:x(\"if\"),_return:x(\"return\",y),_switch:x(\"switch\"),_throw:x(\"throw\",y),_try:x(\"try\"),_var:x(\"var\"),_const:x(\"const\"),_while:x(\"while\",{isLoop:!0}),_with:x(\"with\"),_new:x(\"new\",{beforeExpr:!0,startsExpr:!0}),_this:x(\"this\",b),_super:x(\"super\",b),_class:x(\"class\",b),_extends:x(\"extends\",y),_export:x(\"export\"),_import:x(\"import\",b),_null:x(\"null\",b),_true:x(\"true\",b),_false:x(\"false\",b),_in:x(\"in\",{beforeExpr:!0,binop:7}),_instanceof:x(\"instanceof\",{beforeExpr:!0,binop:7}),_typeof:x(\"typeof\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x(\"void\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x(\"delete\",{beforeExpr:!0,prefix:!0,startsExpr:!0})},S=/\\r\\n?|\\n|\\u2028|\\u2029/,E=new RegExp(S.source,\"g\");function M(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\\u1680\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/,C=/(?:\\s|\\/\\/.*|\\/\\*[^]*?\\*\\/)*/g,P=Object.prototype,k=P.hasOwnProperty,A=P.toString;function O(t,e){return k.call(t,e)}var L=Array.isArray||function(t){return\"[object Array]\"===A.call(t)};function I(t){return new RegExp(\"^(?:\"+t.replace(/ /g,\"|\")+\")$\")}var N=function(t,e){this.line=t,this.column=e};N.prototype.offset=function(t){return new N(this.line,this.column+t)};var R=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function D(t,e){for(var n=1,r=0;;){E.lastIndex=r;var i=E.exec(t);if(!(i&&i.index<e))return new N(n,e-r);++n,r=i.index+i[0].length}}var z={ecmaVersion:9,sourceType:\"script\",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(t){var e={};for(var n in z)e[n]=t&&O(t,n)?t[n]:z[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),L(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return L(e.onComment)&&(e.onComment=function(t,e){return function(n,r,i,a,o,s){var u={type:n?\"Block\":\"Line\",value:r,start:i,end:a};t.locations&&(u.loc=new R(this,o,s)),t.ranges&&(u.range=[i,a]),e.push(u)}}(e,e.onComment)),e}var F=2,j=1|F,U=4,V=8;function H(t,e){return F|(t?U:0)|(e?V:0)}var G=function(t,e,n){this.options=t=B(t),this.sourceFile=t.sourceFile,this.keywords=I(a[t.ecmaVersion>=6?6:\"module\"===t.sourceType?\"5module\":5]);var i=\"\";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(i=r[o]);o--);\"module\"===t.sourceType&&(i+=\" await\")}this.reservedWords=I(i);var s=(i?i+\" \":\"\")+r.strict;this.reservedWordsStrict=I(s),this.reservedWordsStrictBind=I(s+\" \"+r.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(\"\\n\",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(S).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=\"module\"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&\"#!\"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},W={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};G.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},W.inFunction.get=function(){return(this.currentVarScope().flags&F)>0},W.inGenerator.get=function(){return(this.currentVarScope().flags&V)>0},W.inAsync.get=function(){return(this.currentVarScope().flags&U)>0},W.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},W.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},W.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},G.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&F)>0},G.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},G.parse=function(t,e){return new this(e,t).parse()},G.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},G.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(G.prototype,W);var q=G.prototype,X=/^(?:'((?:\\\\.|[^'])*?)'|\"((?:\\\\.|[^\"])*?)\")/;function Y(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}q.strictDirective=function(t){for(;;){C.lastIndex=t,t+=C.exec(this.input)[0].length;var e=X.exec(this.input.slice(t));if(!e)return!1;if(\"use strict\"===(e[1]||e[2]))return!0;t+=e[0].length,C.lastIndex=t,t+=C.exec(this.input)[0].length,\";\"===this.input[t]&&t++}},q.eat=function(t){return this.type===t&&(this.next(),!0)},q.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},q.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},q.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},q.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||S.test(this.input.slice(this.lastTokEnd,this.start))},q.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},q.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},q.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},q.expect=function(t){this.eat(t)||this.unexpected()},q.unexpected=function(t){this.raise(null!=t?t:this.start,\"Unexpected token\")},q.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,\"Comma is not permitted after the rest element\");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,\"Parenthesized pattern\")}},q.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,\"Shorthand property assignments are valid only in destructuring patterns\"),r>=0&&this.raiseRecoverable(r,\"Redefinition of __proto__ property\")},q.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,\"Yield expression cannot be a default value\"),this.awaitPos&&this.raise(this.awaitPos,\"Await expression cannot be a default value\")},q.isSimpleAssignTarget=function(t){return\"ParenthesizedExpression\"===t.type?this.isSimpleAssignTarget(t.expression):\"Identifier\"===t.type||\"MemberExpression\"===t.type};var Q=G.prototype;Q.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,\"Export '\"+a+\"' is not defined\")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,\"Program\")};var Z={kind:\"loop\"},$={kind:\"switch\"};Q.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual(\"let\"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(p(r,!0)){for(var i=n+1;m(this.input.charCodeAt(i),!0);)++i;var a=this.input.slice(n,i);if(!o.test(a))return!0}return!1},Q.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual(\"async\"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),e=this.pos+t[0].length;return!(S.test(this.input.slice(this.pos,e))||\"function\"!==this.input.slice(e,e+8)||e+8!==this.input.length&&m(this.input.charAt(e+8)))},Q.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet(t)&&(i=w._var,r=\"let\"),i){case w._break:case w._continue:return this.parseBreakContinueStatement(a,i.keyword);case w._debugger:return this.parseDebuggerStatement(a);case w._do:return this.parseDoStatement(a);case w._for:return this.parseForStatement(a);case w._function:return t&&(this.strict||\"if\"!==t&&\"label\"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case w._class:return t&&this.unexpected(),this.parseClass(a,!0);case w._if:return this.parseIfStatement(a);case w._return:return this.parseReturnStatement(a);case w._switch:return this.parseSwitchStatement(a);case w._throw:return this.parseThrowStatement(a);case w._try:return this.parseTryStatement(a);case w._const:case w._var:return r=r||this.value,t&&\"var\"!==r&&this.unexpected(),this.parseVarStatement(a,r);case w._while:return this.parseWhileStatement(a);case w._with:return this.parseWithStatement(a);case w.braceL:return this.parseBlock(!0,a);case w.semi:return this.parseEmptyStatement(a);case w._export:case w._import:if(this.options.ecmaVersion>10&&i===w._import){C.lastIndex=this.pos;var o=C.exec(this.input),s=this.pos+o[0].length;if(40===this.input.charCodeAt(s))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,\"'import' and 'export' may only appear at the top level\"),this.inModule||this.raise(this.start,\"'import' and 'export' may appear only with 'sourceType: module'\")),i===w._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var u=this.value,l=this.parseExpression();return i===w.name&&\"Identifier\"===l.type&&this.eat(w.colon)?this.parseLabeledStatement(a,u,l,t):this.parseExpressionStatement(a,l)}},Q.parseBreakContinueStatement=function(t,e){var n=\"break\"===e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||\"loop\"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,\"Unsyntactic \"+e),this.finishNode(t,n?\"BreakStatement\":\"ContinueStatement\")},Q.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,\"DebuggerStatement\")},Q.parseDoStatement=function(t){return this.next(),this.labels.push(Z),t.body=this.parseStatement(\"do\"),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,\"DoWhileStatement\")},Q.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual(\"await\")?this.lastTokStart:-1;if(this.labels.push(Z),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===w._var||this.type===w._const||n){var r=this.startNode(),i=n?\"let\":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,\"VariableDeclaration\"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var a=new Y,o=this.parseExpression(!0,a);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},Q.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,K|(n?0:tt),!1,e)},Q.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(\"if\"),t.alternate=this.eat(w._else)?this.parseStatement(\"if\"):null,this.finishNode(t,\"IfStatement\")},Q.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,\"'return' outside of function\"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,\"ReturnStatement\")},Q.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push($),this.enterScope(0);for(var n=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var r=this.type===w._case;e&&this.finishNode(e,\"SwitchCase\"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,\"Multiple default clauses\"),n=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,\"SwitchCase\"),this.next(),this.labels.pop(),this.finishNode(t,\"SwitchStatement\")},Q.parseThrowStatement=function(t){return this.next(),S.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,\"Illegal newline after throw\"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,\"ThrowStatement\")};var J=[];Q.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();if(this.next(),this.eat(w.parenL)){e.param=this.parseBindingAtom();var n=\"Identifier\"===e.param.type;this.enterScope(n?32:0),this.checkLVal(e.param,n?4:2),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,\"CatchClause\")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,\"Missing catch or finally clause\"),this.finishNode(t,\"TryStatement\")},Q.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,\"VariableDeclaration\")},Q.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(Z),t.body=this.parseStatement(\"while\"),this.labels.pop(),this.finishNode(t,\"WhileStatement\")},Q.parseWithStatement=function(t){return this.strict&&this.raise(this.start,\"'with' in strict mode\"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(\"with\"),this.finishNode(t,\"WithStatement\")},Q.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,\"EmptyStatement\")},Q.parseLabeledStatement=function(t,e,n,r){for(var i=0,a=this.labels;i<a.length;i+=1){a[i].name===e&&this.raise(n.start,\"Label '\"+e+\"' is already declared\")}for(var o=this.type.isLoop?\"loop\":this.type===w._switch?\"switch\":null,s=this.labels.length-1;s>=0;s--){var u=this.labels[s];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf(\"label\")?r+\"label\":r:\"label\"),this.labels.pop(),t.label=n,this.finishNode(t,\"LabeledStatement\")},Q.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,\"ExpressionStatement\")},Q.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(w.braceL),t&&this.enterScope(0);!this.eat(w.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,\"BlockStatement\")},Q.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),t.body=this.parseStatement(\"for\"),this.exitScope(),this.labels.pop(),this.finishNode(t,\"ForStatement\")},Q.parseForIn=function(t,e){var n=this.type===w._in;return this.next(),\"VariableDeclaration\"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||\"var\"!==e.kind||\"Identifier\"!==e.declarations[0].id.type)?this.raise(e.start,(n?\"for-in\":\"for-of\")+\" loop variable declaration may not have an initializer\"):\"AssignmentPattern\"===e.type&&this.raise(e.start,\"Invalid left-hand side in for-loop\"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),t.body=this.parseStatement(\"for\"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?\"ForInStatement\":\"ForOfStatement\")},Q.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(w.eq)?r.init=this.parseMaybeAssign(e):\"const\"!==n||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\")?\"Identifier\"===r.id.type||e&&(this.type===w._in||this.isContextual(\"of\"))?r.init=null:this.raise(this.lastTokEnd,\"Complex binding patterns require an initialization value\"):this.unexpected(),t.declarations.push(this.finishNode(r,\"VariableDeclarator\")),!this.eat(w.comma))break}return t},Q.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,\"var\"===e?1:2,!1)};var K=1,tt=2;Q.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===w.star&&e&tt&&this.unexpected(),t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&K&&(t.id=4&e&&this.type!==w.name?null:this.parseIdent(),!t.id||e&tt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(t.async,t.generator)),e&K||(t.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&K?\"FunctionDeclaration\":\"FunctionExpression\")},Q.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Q.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(w.braceL);!this.eat(w.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),\"MethodDefinition\"===a.type&&\"constructor\"===a.kind&&(i&&this.raise(a.start,\"Duplicate constructor in the same class\"),i=!0))}return t.body=this.finishNode(r,\"ClassBody\"),this.strict=n,this.finishNode(t,e?\"ClassDeclaration\":\"ClassExpression\")},Q.parseClassElement=function(t){var e=this;if(this.eat(w.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===w.parenL||r&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,\"Identifier\"),!1))};n.kind=\"method\",n.static=r(\"static\");var i=this.eat(w.star),a=!1;i||(this.options.ecmaVersion>=8&&r(\"async\",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(w.star)):r(\"get\")?n.kind=\"get\":r(\"set\")&&(n.kind=\"set\")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!(\"Identifier\"===o.type&&\"constructor\"===o.name||\"Literal\"===o.type&&\"constructor\"===o.value)?n.static&&\"Identifier\"===o.type&&\"prototype\"===o.name&&this.raise(o.start,\"Classes may not have a static property named prototype\"):(\"method\"!==n.kind&&this.raise(o.start,\"Constructor can't have get/set modifier\"),i&&this.raise(o.start,\"Constructor can't be a generator\"),a&&this.raise(o.start,\"Constructor can't be an async method\"),n.kind=\"constructor\",s=t),this.parseClassMethod(n,i,a,s),\"get\"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,\"getter should have no params\"),\"set\"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,\"setter should have exactly one param\"),\"set\"===n.kind&&\"RestElement\"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,\"Setter cannot use rest params\"),n},Q.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,\"MethodDefinition\")},Q.parseClassId=function(t,e){this.type===w.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},Q.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},Q.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.expectContextual(\"from\"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,\"ExportAllDeclaration\");if(this.eat(w._default)){var n;if(this.checkExport(e,\"default\",this.lastTokStart),this.type===w._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,4|K,!1,n)}else if(this.type===w._class){var i=this.startNode();t.declaration=this.parseClass(i,\"nullableID\")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,\"ExportDefaultDeclaration\")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),\"VariableDeclaration\"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual(\"from\"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,\"ExportNamedDeclaration\")},Q.checkExport=function(t,e,n){t&&(O(t,e)&&this.raiseRecoverable(n,\"Duplicate export '\"+e+\"'\"),t[e]=!0)},Q.checkPatternExport=function(t,e){var n=e.type;if(\"Identifier\"===n)this.checkExport(t,e.name,e.start);else if(\"ObjectPattern\"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(t,a)}else if(\"ArrayPattern\"===n)for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(t,u)}else\"Property\"===n?this.checkPatternExport(t,e.value):\"AssignmentPattern\"===n?this.checkPatternExport(t,e.left):\"RestElement\"===n?this.checkPatternExport(t,e.argument):\"ParenthesizedExpression\"===n&&this.checkPatternExport(t,e.expression)},Q.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},Q.shouldParseExportStatement=function(){return\"var\"===this.type.keyword||\"const\"===this.type.keyword||\"class\"===this.type.keyword||\"function\"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Q.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(n)n=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual(\"as\")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,\"ExportSpecifier\"))}return e},Q.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=J,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual(\"from\"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,\"ImportDeclaration\")},Q.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,\"ImportDefaultSpecifier\")),!this.eat(w.comma))return t}if(this.type===w.star){var r=this.startNode();return this.next(),this.expectContextual(\"as\"),r.local=this.parseIdent(),this.checkLVal(r.local,2),t.push(this.finishNode(r,\"ImportNamespaceSpecifier\")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual(\"as\")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),t.push(this.finishNode(i,\"ImportSpecifier\"))}return t},Q.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Q.isDirectiveCandidate=function(t){return\"ExpressionStatement\"===t.type&&\"Literal\"===t.expression.type&&\"string\"==typeof t.expression.value&&('\"'===this.input[t.start]||\"'\"===this.input[t.start])};var et=G.prototype;et.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case\"Identifier\":this.inAsync&&\"await\"===t.name&&this.raise(t.start,\"Cannot use 'await' as identifier inside an async function\");break;case\"ObjectPattern\":case\"ArrayPattern\":case\"RestElement\":break;case\"ObjectExpression\":t.type=\"ObjectPattern\",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),\"RestElement\"!==a.type||\"ArrayPattern\"!==a.argument.type&&\"ObjectPattern\"!==a.argument.type||this.raise(a.argument.start,\"Unexpected token\")}break;case\"Property\":\"init\"!==t.kind&&this.raise(t.key.start,\"Object pattern can't contain getter or setter\"),this.toAssignable(t.value,e);break;case\"ArrayExpression\":t.type=\"ArrayPattern\",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case\"SpreadElement\":t.type=\"RestElement\",this.toAssignable(t.argument,e),\"AssignmentPattern\"===t.argument.type&&this.raise(t.argument.start,\"Rest elements cannot have a default value\");break;case\"AssignmentExpression\":\"=\"!==t.operator&&this.raise(t.left.end,\"Only '=' operator can be used for specifying default value.\"),t.type=\"AssignmentPattern\",delete t.operator,this.toAssignable(t.left,e);case\"AssignmentPattern\":break;case\"ParenthesizedExpression\":this.toAssignable(t.expression,e,n);break;case\"MemberExpression\":if(!e)break;default:this.raise(t.start,\"Assigning to rvalue\")}else n&&this.checkPatternErrors(n,!0);return t},et.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&\"RestElement\"===a.type&&\"Identifier\"!==a.argument.type&&this.unexpected(a.argument.start)}return t},et.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,\"SpreadElement\")},et.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,\"RestElement\")},et.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,\"ArrayPattern\");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},et.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(w.comma),e&&this.type===w.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===w.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},et.parseBindingListItem=function(t){return t},et.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,\"AssignmentPattern\")},et.checkLVal=function(t,e,n){switch(void 0===e&&(e=0),t.type){case\"Identifier\":2===e&&\"let\"===t.name&&this.raiseRecoverable(t.start,\"let is disallowed as a lexically bound name\"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?\"Binding \":\"Assigning to \")+t.name+\" in strict mode\"),n&&(O(n,t.name)&&this.raiseRecoverable(t.start,\"Argument name clash\"),n[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case\"MemberExpression\":e&&this.raiseRecoverable(t.start,\"Binding member expression\");break;case\"ObjectPattern\":for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,e,n)}break;case\"Property\":this.checkLVal(t.value,e,n);break;case\"ArrayPattern\":for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLVal(u,e,n)}break;case\"AssignmentPattern\":this.checkLVal(t.left,e,n);break;case\"RestElement\":this.checkLVal(t.argument,e,n);break;case\"ParenthesizedExpression\":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?\"Binding\":\"Assigning to\")+\" rvalue\")}};var nt=G.prototype;nt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&\"SpreadElement\"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case\"Identifier\":r=i.name;break;case\"Literal\":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)\"__proto__\"===r&&\"init\"===a&&(e.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,\"Redefinition of __proto__ property\")),e.proto=!0);else{var o=e[r=\"$\"+r];if(o)(\"init\"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,\"Redefinition of property\");else o=e[r]={init:!1,get:!1,set:!1};o[a]=!0}}},nt.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===w.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(w.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,\"SequenceExpression\")}return i},nt.parseMaybeAssign=function(t,e,n){if(this.isContextual(\"yield\")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,a=-1,o=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,o=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new Y,r=!0);var s=this.start,u=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(t,e);if(n&&(l=n.call(this,l,s,u)),this.type.isAssign){var c=this.startNodeAt(s,u);return c.operator=this.value,c.left=this.type===w.eq?this.toAssignable(l,!1,e):l,r||Y.call(e),e.shorthandAssign=-1,this.checkLVal(l),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,\"AssignmentExpression\")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),o>-1&&(e.shorthandAssign=o),l},nt.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(w.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(w.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,\"ConditionalExpression\")}return i},nt.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?i:i.start===n&&\"ArrowFunctionExpression\"===i.type?i:this.parseExprOp(i,n,r,-1,t)},nt.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==w._in)&&a>r){var o=this.type===w.logicalOR||this.type===w.logicalAND,s=this.value;this.next();var u=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),u,l,a,i),h=this.buildBinary(e,n,t,c,s,o);return this.parseExprOp(h,e,n,r,i)}return t},nt.buildBinary=function(t,e,n,r,i,a){var o=this.startNodeAt(t,e);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?\"LogicalExpression\":\"BinaryExpression\")},nt.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual(\"await\")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===w.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&\"delete\"===a.operator&&\"Identifier\"===a.argument.type?this.raiseRecoverable(a.start,\"Deleting local variable in strict mode\"):e=!0,n=this.finishNode(a,o?\"UpdateExpression\":\"UnaryExpression\")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,\"UpdateExpression\")}}return!e&&this.eat(w.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),\"**\",!1):n},nt.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t),i=\"ArrowFunctionExpression\"===r.type&&\")\"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||i)return r;var a=this.parseSubscripts(r,e,n);return t&&\"MemberExpression\"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1)),a},nt.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&\"Identifier\"===t.type&&\"async\"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&\"async\"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,r,i);if(a===t||\"ArrowFunctionExpression\"===a.type)return a;t=a}},nt.parseSubscript=function(t,e,n,r,i){var a=this.eat(w.bracketL);if(a||this.eat(w.dot)){var o=this.startNodeAt(e,n);o.object=t,o.property=a?this.parseExpression():this.parseIdent(\"never\"!==this.options.allowReserved),o.computed=!!a,a&&this.expect(w.bracketR),t=this.finishNode(o,\"MemberExpression\")}else if(!r&&this.eat(w.parenL)){var s=new Y,u=this.yieldPos,l=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&\"Import\"!==t.type,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,\"Cannot use 'await' as identifier inside an async function\"),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(s,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var f=this.startNodeAt(e,n);if(f.callee=t,f.arguments=h,\"Import\"===f.callee.type){1!==f.arguments.length&&this.raise(f.start,\"import() requires exactly one argument\");var d=f.arguments[0];d&&\"SpreadElement\"===d.type&&this.raise(d.start,\"... is not allowed in import()\")}t=this.finishNode(f,\"CallExpression\")}else if(this.type===w.backQuote){var p=this.startNodeAt(e,n);p.tag=t,p.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(p,\"TaggedTemplateExpression\")}return t},nt.parseExprAtom=function(t){this.type===w.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,\"'super' keyword outside a method\"),e=this.startNode(),this.next(),this.type!==w.parenL||this.allowDirectSuper||this.raise(e.start,\"super() call outside constructor of a subclass\"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,\"Super\");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,\"ThisExpression\");case w.name:var r=this.start,i=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&\"async\"===o.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[o],!1);if(this.options.ecmaVersion>=8&&\"async\"===o.name&&this.type===w.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[o],!0)}return o;case w.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,\"Literal\");case w.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),l;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,\"ArrayExpression\");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},nt.parseDynamicImport=function(){var t=this.startNode();return this.next(),this.type!==w.parenL&&this.unexpected(),this.finishNode(t,\"Import\")},nt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,\"Literal\")},nt.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},nt.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,u=[],l=!0,c=!1,h=new Y,f=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(l?l=!1:this.expect(w.comma),i&&this.afterTrailingComma(w.parenR,!0)){c=!0;break}if(this.type===w.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var p=this.start,m=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(n,r,u);u.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,u.length>1?((e=this.startNodeAt(o,s)).expressions=u,this.finishNodeAt(e,\"SequenceExpression\",p,m)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=e,this.finishNode(g,\"ParenthesizedExpression\")}return e},nt.parseParenItem=function(t){return t},nt.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var rt=[];nt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),(\"target\"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,\"The only valid meta property for new is new.target\"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,\"new.target can only be used in functions\"),this.finishNode(t,\"MetaProperty\")}var r=this.start,i=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.options.ecmaVersion>10&&\"Import\"===t.callee.type&&this.raise(t.callee.start,\"Cannot use new with import(...)\"),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&\"Import\"!==t.callee.type,!1):t.arguments=rt,this.finishNode(t,\"NewExpression\")},nt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,\"Bad escape sequence in untagged template literal\"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\\r\\n?/g,\"\\n\"),cooked:this.value},this.next(),n.tail=this.type===w.backQuote,this.finishNode(n,\"TemplateElement\")},nt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===w.eof&&this.raise(this.pos,\"Unterminated template literal\"),this.expect(w.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(w.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,\"TemplateLiteral\")},nt.isAsyncProp=function(t){return!t.computed&&\"Identifier\"===t.key.type&&\"async\"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!S.test(this.input.slice(this.lastTokEnd,this.start))},nt.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(w.braceR);){if(r)r=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?\"ObjectPattern\":\"ObjectExpression\")},nt.parseProperty=function(t,e){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\"),this.finishNode(o,\"RestElement\")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,\"SpreadElement\"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(w.star)));var s=this.containsEsc;return this.parsePropertyName(o),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(o,e)):r=!1,this.parsePropertyValue(o,t,n,r,i,a,e,s),this.finishNode(o,\"Property\")},nt.parsePropertyValue=function(t,e,n,r,i,a,o,s){if((n||r)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind=\"init\";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind=\"init\",t.method=!0,t.value=this.parseMethod(n,r);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||\"Identifier\"!==t.key.type||\"get\"!==t.key.name&&\"set\"!==t.key.name||this.type===w.comma||this.type===w.braceR)this.options.ecmaVersion>=6&&!t.computed&&\"Identifier\"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),\"await\"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind=\"init\",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===w.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u=\"get\"===t.kind?0:1;if(t.value.params.length!==u){var l=t.value.start;\"get\"===t.kind?this.raiseRecoverable(l,\"getter should have no params\"):this.raiseRecoverable(l,\"setter should have exactly one param\")}else\"set\"===t.kind&&\"RestElement\"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,\"Setter cannot use rest params\")}},nt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(\"never\"!==this.options.allowReserved)},nt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},nt.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|H(e,r.generator)|(n?128:0)),this.expect(w.parenL),r.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,\"FunctionExpression\")},nt.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|H(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,\"ArrowFunctionExpression\")},nt.parseFunctionBody=function(t,e,n){var r=e&&this.type!==w.braceL,i=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,\"Illegal 'use strict' directive in function with non-simple parameter list\");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!i&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=i},nt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if(\"Identifier\"!==n[e].type)return!1}return!0},nt.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,1,e?null:n)}},nt.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===w.comma?o=null:this.type===w.ellipsis?(o=this.parseSpread(r),r&&this.type===w.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},nt.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;(this.inGenerator&&\"yield\"===r&&this.raiseRecoverable(e,\"Cannot use 'yield' as identifier inside a generator\"),this.inAsync&&\"await\"===r&&this.raiseRecoverable(e,\"Cannot use 'await' as identifier inside an async function\"),this.keywords.test(r)&&this.raise(e,\"Unexpected keyword '\"+r+\"'\"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf(\"\\\\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||\"await\"!==r||this.raiseRecoverable(e,\"Cannot use keyword 'await' outside an async function\"),this.raiseRecoverable(e,\"The keyword '\"+r+\"' is reserved\"))},nt.parseIdent=function(t,e){var n=this.startNode();return this.type===w.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,\"class\"!==n.name&&\"function\"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,\"Identifier\"),t||(this.checkUnreserved(n),\"await\"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},nt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(w.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,\"YieldExpression\")},nt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,\"AwaitExpression\")};var it=G.prototype;it.raise=function(t,e){var n=D(this.input,t);e+=\" (\"+n.line+\":\"+n.column+\")\";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},it.raiseRecoverable=it.raise,it.curPosition=function(){if(this.options.locations)return new N(this.curLine,this.pos-this.lineStart)};var at=G.prototype,ot=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};at.enterScope=function(t){this.scopeStack.push(new ot(t))},at.exitScope=function(){this.scopeStack.pop()},at.treatFunctionsAsVarInScope=function(t){return t.flags&F||!this.inModule&&1&t.flags},at.declareName=function(t,e,n){var r=!1;if(2===e){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&1&i.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(t)>-1&&!(32&s.flags&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(t)>-1){r=!0;break}if(s.var.push(t),this.inModule&&1&s.flags&&delete this.undefinedExports[t],s.flags&j)break}r&&this.raiseRecoverable(n,\"Identifier '\"+t+\"' has already been declared\")},at.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},at.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},at.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&j)return e}},at.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&j&&!(16&e.flags))return e}};var st=function(t,e,n){this.type=\"\",this.start=e,this.end=0,t.options.locations&&(this.loc=new R(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},ut=G.prototype;function lt(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}ut.startNode=function(){return new st(this,this.start,this.startLoc)},ut.startNodeAt=function(t,e){return new st(this,t,e)},ut.finishNode=function(t,e){return lt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},ut.finishNodeAt=function(t,e,n,r){return lt.call(this,t,e,n,r)};var ct=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},ht={b_stat:new ct(\"{\",!1),b_expr:new ct(\"{\",!0),b_tmpl:new ct(\"${\",!1),p_stat:new ct(\"(\",!1),p_expr:new ct(\"(\",!0),q_tmpl:new ct(\"`\",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new ct(\"function\",!1),f_expr:new ct(\"function\",!0),f_expr_gen:new ct(\"function\",!0,!1,null,!0),f_gen:new ct(\"function\",!1,!1,null,!0)},ft=G.prototype;ft.initialContext=function(){return[ht.b_stat]},ft.braceIsBlock=function(t){var e=this.curContext();return e===ht.f_expr||e===ht.f_stat||(t!==w.colon||e!==ht.b_stat&&e!==ht.b_expr?t===w._return||t===w.name&&this.exprAllowed?S.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t===w.arrow||(t===w.braceL?e===ht.b_stat:t!==w._var&&t!==w._const&&t!==w.name&&!this.exprAllowed):!e.isExpr)},ft.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(\"function\"===e.token)return e.generator}return!1},ft.updateContext=function(t){var e,n=this.type;n.keyword&&t===w.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===ht.b_stat&&\"function\"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ht.b_stat:ht.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(ht.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?ht.p_stat:ht.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){!t.beforeExpr||t===w.semi||t===w._else||t===w._return&&S.test(this.input.slice(this.lastTokEnd,this.start))||(t===w.colon||t===w.braceL)&&this.curContext()===ht.b_stat?this.context.push(ht.f_stat):this.context.push(ht.f_expr),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===ht.q_tmpl?this.context.pop():this.context.push(ht.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t===w._function){var e=this.context.length-1;this.context[e]===ht.f_expr?this.context[e]=ht.f_expr_gen:this.context[e]=ht.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==w.dot&&(\"of\"===this.value&&!this.exprAllowed||\"yield\"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var dt=\"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS\",pt=dt+\" Extended_Pictographic\",mt={9:dt,10:pt,11:\"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic\"},gt=\"Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu\",vt=\"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb\",yt=vt+\" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd\",bt={9:vt,10:yt,11:\"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho\"},_t={};function xt(t){var e=_t[t]={binary:I(mt[t]+\" \"+gt),nonBinary:{General_Category:I(gt),Script:I(bt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}xt(9),xt(10),xt(11);var wt=G.prototype,St=function(t){this.parser=t,this.validFlags=\"gim\"+(t.options.ecmaVersion>=6?\"uy\":\"\")+(t.options.ecmaVersion>=9?\"s\":\"\"),this.unicodeProperties=_t[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source=\"\",this.flags=\"\",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue=\"\",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Et(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Mt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Tt(t){return t>=65&&t<=90||t>=97&&t<=122}function Ct(t){return Tt(t)||95===t}function Pt(t){return Ct(t)||kt(t)}function kt(t){return t>=48&&t<=57}function At(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Ot(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Lt(t){return t>=48&&t<=55}St.prototype.reset=function(t,e,n){var r=-1!==n.indexOf(\"u\");this.start=0|t,this.source=e+\"\",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},St.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,\"Invalid regular expression: /\"+this.source+\"/: \"+t)},St.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=n?r:(r<<10)+e.charCodeAt(t+1)-56613888},St.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=n?t+1:t+2},St.prototype.current=function(){return this.at(this.pos)},St.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},St.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},St.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},wt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,\"Invalid regular expression flag\"),n.indexOf(i,r+1)>-1&&this.raise(t.start,\"Duplicate regular expression flag\")}},wt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},wt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue=\"\",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise(\"Unmatched ')'\"),(t.eat(93)||t.eat(125))&&t.raise(\"Lone quantifier brackets\")),t.maxBackReference>t.numCapturingParens&&t.raise(\"Invalid escape\");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise(\"Invalid named capture referenced\")}},wt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise(\"Nothing to repeat\"),t.eat(123)&&t.raise(\"Lone quantifier brackets\")},wt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},wt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise(\"Invalid quantifier\"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},wt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise(\"Unterminated group\"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},wt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},wt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},wt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise(\"numbers out of order in {} quantifier\"),!0;t.switchU&&!e&&t.raise(\"Incomplete quantifier\"),t.pos=n}return!1},wt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},wt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},wt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise(\"Unterminated group\")}t.pos=e}return!1},wt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise(\"Invalid group\"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise(\"Unterminated group\")}return!1},wt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},wt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise(\"Nothing to repeat\"),!1},wt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Mt(e)&&(t.lastIntValue=e,t.advance(),!0)},wt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!Mt(n);)t.advance();return t.pos!==e},wt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},wt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise(\"Duplicate capture group name\"),void t.groupNames.push(t.lastStringValue);t.raise(\"Invalid group\")}},wt.regexp_eatGroupName=function(t){if(t.lastStringValue=\"\",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise(\"Invalid capture group name\")}return!1},wt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue=\"\",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Et(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Et(t.lastIntValue);return!0}return!1},wt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return p(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},wt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return m(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},wt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise(\"Invalid unicode escape\"),t.raise(\"Invalid escape\")),!1)},wt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},wt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise(\"Invalid named reference\")}return!1},wt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},wt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},wt.regexp_eatZero=function(t){return 48===t.current()&&!kt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},wt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},wt.regexp_eatControlLetter=function(t){var e=t.current();return!!Tt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},wt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,n=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(t.switchU&&r>=55296&&r<=56319){var i=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(r-55296)+(a-56320)+65536,!0}t.pos=i,t.lastIntValue=r}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((e=t.lastIntValue)>=0&&e<=1114111))return!0;t.switchU&&t.raise(\"Invalid unicode escape\"),t.pos=n}return!1},wt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},wt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},wt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise(\"Invalid property name\")}return!1},wt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},wt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){O(t.unicodeProperties.nonBinary,e)||t.raise(\"Invalid property name\"),t.unicodeProperties.nonBinary[e].test(n)||t.raise(\"Invalid property value\")},wt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise(\"Invalid property name\")},wt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue=\"\";Ct(e=t.current());)t.lastStringValue+=Et(e),t.advance();return\"\"!==t.lastStringValue},wt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue=\"\";Pt(e=t.current());)t.lastStringValue+=Et(e),t.advance();return\"\"!==t.lastStringValue},wt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},wt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise(\"Unterminated character class\")}return!1},wt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise(\"Invalid character class\"),-1!==e&&-1!==n&&e>n&&t.raise(\"Range out of order in character class\")}}},wt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Lt(n))&&t.raise(\"Invalid class escape\"),t.raise(\"Invalid escape\")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},wt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},wt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!kt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},wt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise(\"Invalid escape\"),t.pos=e}return!1},wt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;kt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},wt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;At(n=t.current());)t.lastIntValue=16*t.lastIntValue+Ot(n),t.advance();return t.pos!==e},wt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},wt.regexp_eatOctalDigit=function(t){var e=t.current();return Lt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},wt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!At(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Ot(i),t.advance()}return!0};var It=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new R(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nt=G.prototype;function Rt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Nt.next=function(){this.options.onToken&&this.options.onToken(new It(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Nt.getToken=function(){return this.next(),new It(this)},\"undefined\"!=typeof Symbol&&(Nt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),Nt.curContext=function(){return this.context[this.context.length-1]},Nt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Nt.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Nt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Nt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf(\"*/\",this.pos+=2);if(-1===r&&this.raise(this.pos-2,\"Unterminated comment\"),this.pos=r+2,this.options.locations)for(E.lastIndex=n;(t=E.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},Nt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!M(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Nt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},Nt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Nt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},Nt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},Nt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,n+1):this.finishOp(r,n)},Nt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?w.logicalOR:w.logicalAND,2):61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},Nt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},Nt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!S.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},Nt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(w.assign,n+1):this.finishOp(w.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(w.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Nt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},Nt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 63:return++this.pos,this.finishToken(w.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,\"Unexpected character '\"+Rt(t)+\"'\")},Nt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Nt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,\"Unterminated regular expression\");var r=this.input.charAt(this.pos);if(S.test(r)&&this.raise(n,\"Unterminated regular expression\"),t)t=!1;else{if(\"[\"===r)e=!0;else if(\"]\"===r&&e)e=!1;else if(\"/\"===r&&!e)break;t=\"\\\\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new St(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,o)}catch(t){}return this.finishToken(w.regexp,{pattern:i,flags:o,value:u})},Nt.readInt=function(t,e){for(var n=this.pos,r=0,i=0,a=null==e?1/0:e;i<a;++i){var o=this.input.charCodeAt(this.pos),s=void 0;if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,r=r*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:r},Nt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,\"Expected number in radix \"+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=\"undefined\"!=typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\"),this.finishToken(w.num,n)},Nt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,\"Invalid number\");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,\"Invalid number\"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(e,this.pos),a=\"undefined\"!=typeof BigInt?BigInt(i):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\"),this.finishToken(w.num,a)}46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,\"Invalid number\")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\");var o=this.input.slice(e,this.pos),s=n?parseInt(o,8):parseFloat(o);return this.finishToken(w.num,s)},Nt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf(\"}\",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,\"Code point out of bounds\")}else t=this.readHexChar(4);return t},Nt.readString=function(t){for(var e=\"\",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,\"Unterminated string constant\");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(M(r,this.options.ecmaVersion>=10)&&this.raise(this.start,\"Unterminated string constant\"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(w.string,e)};var Dt={};Nt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Dt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Nt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Dt;this.raise(t,e)},Nt.readTmplToken=function(){for(var t=\"\",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,\"Unterminated template\");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===n?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(M(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+=\"\\n\";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Nt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case\"\\\\\":++this.pos;break;case\"$\":if(\"{\"!==this.input[this.pos+1])break;case\"`\":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,\"Unterminated template\")},Nt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return\"\\n\";case 114:return\"\\r\";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Rt(this.readCodePoint());case 116:return\"\\t\";case 98:return\"\\b\";case 118:return\"\\v\";case 102:return\"\\f\";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),\"\";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),\"0\"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?\"Octal literal in template string\":\"Octal literal in strict mode\"),String.fromCharCode(r)}return M(e)?\"\":String.fromCharCode(e)}},Nt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,\"Bad character escape sequence\"),n},Nt.readWord1=function(){this.containsEsc=!1;for(var t=\"\",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(m(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,\"Expecting Unicode escape sequence \\\\uXXXX\"),++this.pos;var o=this.readCodePoint();(e?p:m)(o,r)||this.invalidStringToken(a,\"Invalid Unicode escape\"),t+=Rt(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Nt.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,\"Escape sequence in keyword \"+t),e=_[t]),this.finishToken(e,t)};var zt=\"6.3.0\";function Bt(t,e){return G.parse(t,e)}function Ft(t,e,n){return G.parseExpressionAt(t,e,n)}function jt(t,e){return G.tokenizer(t,e)}},function(t,e){},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.makeQueryfromQBE=function(t,e,n){var i=[Math.floor(e[0]),Math.ceil(e[1])],a=r.default.getData(t).data.meta.min.z,o=r.default.getData(t).data.lookup,s={};for(var u in o)n.indexOf(u)<0&&(s[u]=[]);for(var l=i[0];l<=i[1];l++){var c=r.default.getValues(t,l-a);for(var h in s)\"z\"!==h?s[h].push(c[h]):s[h].push(l)}return s.minJD=i[0],s.arrayLength=i[1]-i[0]+1,s},e.runMatching=function(t,e,n,r,i,a,f,d){var p=e.z[0],m=void 0;switch(i){case\"Euclidean\":m=h}r&&(t=o(t));var g=[];switch(n){case\"DTWI\":if(a>0)for(var v=0;v<e.arrayLength-d[0];){for(var y=[],b=d[0];b<=d[1]&&!(v+b>e.arrayLength-1);b++){var _=0;for(var x in t)if(Array.isArray(e[x])&&\"z\"!==x){var w=e[x].slice(v,v+b);r&&(w=o(w));var S=l(t[x],w,a,m);_+=S}y.push(_)}for(var E=0,M=1/0,T=0;T<y.length;T++)y[T]<M&&(M=y[T],E=T);g.push([v+p,d[0]+E,M]),v+=f}else for(var C=0;C<e.arrayLength-d[0];){var P=[],k=C+d[1]<e.arrayLength-1?d[1]:e.arrayLength-C;for(var A in t)if(Array.isArray(e[A])&&\"z\"!==A){var O=e[A].slice(C,C+k);r&&(O=o(O));var L=s(t[A],O,m,k-d[0]+1);P.push(L)}for(var I=0,N=1/0,R=0;R<P[0].length;R++){for(var D=0,z=0;z<P.length;z++)D+=P[z][R];D<N&&(N=D,I=R)}g.push([C+p,d[0]+I,N]),C+=f}break;case\"DTWD\":var B=[];for(var F in t)Array.isArray(t[F])&&\"z\"!==F&&B.push(F);a>0?function(){for(var n=0;n<e.arrayLength-d[0];){for(var i=[],s=function(s){if(n+s>e.arrayLength-1)return\"break\";var u={};B.forEach((function(t){u[t]=e[t].slice(n,n+s)})),u.arrayLength=s,r&&(u=o(u)),i.push(c(t,u,a,B,m))},u=d[0];u<=d[1];u++){if(\"break\"===s(u))break}for(var l=0,h=1/0,v=0;v<i.length;v++)i[v]<h&&(h=i[v],l=v);g.push([n+p,d[0]+l,h]),n+=f}}():function(){for(var n=0,i=function(){var i={},a=n+d[1]<e.arrayLength-1?d[1]:e.arrayLength-n;B.forEach((function(t){i[t]=e[t].slice(n,n+a)})),i.arrayLength=a,r&&(i=o(i));for(var s=u(t,i,B,m,a-d[0]+1),l=0,c=1/0,h=0;h<s.length;h++)s[h]<c&&(c=s[h],l=h);g.push([n+p,d[0]+l,c]),n+=f};n<e.arrayLength-d[0];)i()}()}console.log(g)},e.testDTW=function(){var t=[71,73,75,80,80,80,78,76,75,73,71,71,71,73,75,76,76,68,76,76,75,73,71,70,70,69,68,68,72,74,78,79,80,80,78],e=[69,69,73,75,79,80,79,78,76,73,72,71,70,70,69,69,69,71,73,75,76,76,76,76,76,75,73,71,70,70,71,73,75,80,80,80,78],n=new i.default(t,e,(function(t,e){return Math.abs(t-e)}));console.log(n.getDistance(),n.getPath(),n.getDistance()/n.getPath().length),console.log(l(t,e,e.length))},e.DTWSimple=s,e.DTWSimpleMD=u,e.DTW=l,e.DTWMD=c;var r=a(n(3)),i=a(n(310));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){var e={};for(var n in t)Array.isArray(t[n])?function(){var r=Math.min.apply(null,t[n]),i=Math.max.apply(null,t[n]),a=t[n].map((function(t){return(t-r)/(i-r)}));e[n]=a}():e[n]=t[n];return e}function s(t,e,n,r){for(var i=[],a=0;a<t.length;a++){i[a]=[];for(var o=0;o<e.length;o++)i[a][o]=1/0}for(var s=0;s<t.length;s++)for(var u=0;u<e.length;u++)i[s][u]=s>0?u>0?n(t[s],e[u])+Math.min(i[s-1][u],i[s][u-1],i[s-1][u-1]):n(t[s],e[u])+i[s-1][u]:u>0?n(t[s],e[u])+i[s][u-1]:0;for(var l=[],c=1;c<=r;c++)l.push(i[t.length-1][e.length-1-r+c]);return l}function u(t,e,n,r,i){for(var a=[],o=0;o<t.arrayLength;o++){a[o]=[];for(var s=0;s<e.arrayLength;s++)a[o][s]=1/0}for(var u=function(i){var o=[];n.forEach((function(e){o.push(t[e][i])}));for(var s=function(t){var s=[];n.forEach((function(n){s.push(e[n][t])})),a[i][t]=i>0?t>0?r(o,s)+Math.min(a[i-1][t],a[i][t-1],a[i-1][t-1]):r(o,s)+a[i-1][t]:t>0?r(o,s)+a[i][t-1]:0},u=0;u<e.arrayLength;u++)s(u)},l=0;l<t.arrayLength;l++)u(l);for(var c=[],h=1;h<=i;h++)c.push(a[t.arrayLength-1][e.arrayLength-1-i+h]);return c}function l(t,e,n,r){var i=[];n=Math.max(n,Math.abs(t.length-e.length));for(var a=0;a<t.length;a++){i[a]=[];for(var o=0;o<e.length;o++)i[a][o]=1/0}i[0][0]=0;for(var s=1;s<t.length;s++)for(var u=Math.max(1,s-n),l=Math.min(e.length,s+n),c=u;c<l;c++)i[s][c]=0;for(var h=1;h<t.length;h++)for(var f=Math.max(1,h-n),d=Math.min(e.length,h+n),p=f;p<d;p++)i[h][p]=r(t[h],e[p])+Math.min(i[h-1][p],i[h][p-1],i[h-1][p-1]);return i[t.length-1][e.length-1]}function c(t,e,n,r,i){var a=[];n=Math.max(n,Math.abs(t.arrayLength-e.arrayLength));for(var o=0;o<t.arrayLength;o++){a[o]=[];for(var s=0;s<e.arrayLength;s++)a[o][s]=1/0}a[0][0]=0;for(var u=1;u<t.arrayLength;u++)for(var l=Math.max(1,u-n),c=Math.min(e.arrayLength,u+n),h=l;h<c;h++)a[u][h]=0;for(var f=function(o){var s=Math.max(1,o-n),u=Math.min(e.arrayLength,o+n),l=[];r.forEach((function(e){l.push(t[e][o])}));for(var c=function(t){var n=[];r.forEach((function(r){n.push(e[r][t])})),a[o][t]=i(l,n)+Math.min(a[o-1][t],a[o][t-1],a[o-1][t-1])},h=s;h<u;h++)c(h)},d=1;d<t.arrayLength;d++)f(d);return a[t.arrayLength-1][e.arrayLength-1]}function h(t,e){if(Array.isArray(t)){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)}return Math.abs(t-e)}},function(t,e,n){(function(t,n){var r;!function(){\"use strict\";function i(t,e,n){var r,i,a=t,o=e,s=n,u=function(){r=[];for(var t=0;t<a.length;t++){r[t]=[];for(var e=0;e<o.length;e++){var n=1/0;t>0?(n=Math.min(n,r[t-1][e]),e>0&&(n=Math.min(n,r[t-1][e-1]),n=Math.min(n,r[t][e-1]))):n=e>0?Math.min(n,r[t][e-1]):0,r[t][e]=n+s(a[t],o[e])}}return r[a.length-1][o.length-1]};this.getDistance=u;this.getPath=function(){if(void 0!==i)return i;void 0===r&&u();var t=a.length-1,e=o.length-1;for(i=[[t,e]];t>0||e>0;)t>0?e>0?r[t-1][e]<r[t-1][e-1]?r[t-1][e]<r[t][e-1]?(i.push([t-1,e]),t--):(i.push([t,e-1]),e--):r[t-1][e-1]<r[t][e-1]?(i.push([t-1,e-1]),t--,e--):(i.push([t,e-1]),e--):(i.push([t-1,e]),t--):(i.push([t,e-1]),e--);return i=i.reverse()}}var a=\"object\"==typeof self&&self.self===self&&self||\"object\"==typeof t&&t.global===t&&t||this;e.nodeType?a.DynamicTimeWarping=i:(!n.nodeType&&n.exports&&(e=n.exports=i),e.DynamicTimeWarping=i),void 0===(r=function(){return i}.apply(e,[]))||(n.exports=r)}()}).call(this,n(62),n(28)(t))},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r};var s=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:\"render\",value:function(){return o.default.createElement(\"div\",null,\"Automatic extraction of anomaly, flares, and rotations\")}}]),e}(o.default.Component);e.default=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r};var s=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:\"render\",value:function(){return o.default.createElement(\"div\",{id:\"extractionResults\",className:\"featureColumn\"},\"Results of feature extraction will be shown here\")}}]),e}(o.default.Component);e.default=s},function(t,e,n){\"use strict\";$((function(){var t=$(\"#farSliderVal\");$(\"#farSlider\").slider({range:\"min\",value:0,min:1,max:100,slide:function(e,n){t.css(\"display\",\"initial\"),t.val(n.value);var r=$(\"#farSlider\").slider(\"option\",\"min\"),i=$(\"#farSlider\").slider(\"option\",\"max\")-r,a=$(\"#farSlider\").width()*(n.value-r)/i-10;t.css(\"left\",a+\"px\")},stop:function(){t.css(\"display\",\"none\")}}),$(\"#farSliderVal\").val($(\"#farSlider\").slider(\"value\"))})),$((function(){var t=$(\"#color_value\"),e=$(\"#color_value_min\"),n=$(\"#color_value_max\");t.slider({range:!0,min:0,max:100,values:[0,100],orientation:\"vertical\",slide:function(r,i){e.css(\"display\",\"initial\"),n.css(\"display\",\"initial\"),e.val(i.values[0]),n.val(i.values[1]);var a=t.slider(\"option\",\"min\"),o=t.slider(\"option\",\"max\")-a,s=150*(i.values[0]-a)/o-10,u=140-150*(i.values[1]-a)/o;if(e.css(\"bottom\",s+\"px\"),n.css(\"top\",u+\"px\"),0!==blazarData[currentIdx].length){var l=blazarMax[currentIdx][\"Flx(V)\"]-blazarMin[currentIdx][\"Flx(V)\"];timetubes[currentIdx].tube.material.uniforms.minmaxFlx.value=new THREE.Vector2(i.values[0]/100*l+blazarMin[currentIdx][\"Flx(V)\"],i.values[1]/100*l+blazarMin[currentIdx][\"Flx(V)\"])}},stop:function(){e.css(\"display\",\"none\"),n.css(\"display\",\"none\")}}),e.val(t.slider(\"values\",0)),n.val(t.slider(\"values\",1))})),$((function(){var t=$(\"#color_hue\"),e=$(\"#color_hue_min\"),n=$(\"#color_hue_max\");t.slider({range:!0,min:0,max:100,values:[0,100],slide:function(t,r){e.css(\"display\",\"initial\"),n.css(\"display\",\"initial\"),e.val(r.values[0]),n.val(r.values[1]);var i=150*r.values[0]/100-35,a=130-150*r.values[1]/100;if(e.css(\"left\",i+\"px\"),n.css(\"right\",a+\"px\"),0!==blazarData[currentIdx].length){var o=blazarMax[currentIdx][\"V-J\"]-blazarMin[currentIdx][\"V-J\"];timetubes[currentIdx].tube.material.uniforms.minmaxVJ.value=new THREE.Vector2(r.values[0]/100*o+blazarMin[currentIdx][\"V-J\"],r.values[1]/100*o+blazarMin[currentIdx][\"V-J\"])}},stop:function(){e.css(\"display\",\"none\"),n.css(\"display\",\"none\")}}),e.val(t.slider(\"values\",0)),n.val(t.slider(\"values\",1))}))}]);","extractedComments":[]}