!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=107)}([function(t,e,n){"use strict";t.exports=n(108)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactCSS=e.loop=e.handleActive=e.handleHover=e.hover=void 0;var i=u(n(124)),r=u(n(195)),a=u(n(215)),o=u(n(216)),s=u(n(217)),l=u(n(218));function u(t){return t&&t.__esModule?t:{default:t}}e.hover=o.default,e.handleHover=o.default,e.handleActive=s.default,e.loop=l.default;var c=e.ReactCSS=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var s=(0,i.default)(n),l=(0,r.default)(t,s);return(0,a.default)(l)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(219);Object.defineProperty(e,"Alpha",{enumerable:!0,get:function(){return h(i).default}});var r=n(61);Object.defineProperty(e,"Checkboard",{enumerable:!0,get:function(){return h(r).default}});var a=n(222);Object.defineProperty(e,"EditableInput",{enumerable:!0,get:function(){return h(a).default}});var o=n(223);Object.defineProperty(e,"Hue",{enumerable:!0,get:function(){return h(o).default}});var s=n(225);Object.defineProperty(e,"Raised",{enumerable:!0,get:function(){return h(s).default}});var l=n(241);Object.defineProperty(e,"Saturation",{enumerable:!0,get:function(){return h(l).default}});var u=n(101);Object.defineProperty(e,"ColorWrap",{enumerable:!0,get:function(){return h(u).default}});var c=n(249);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Swatch",{enumerable:!0,get:function(){return h(c).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(24),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(15)),n(14)),s=(i=o)&&i.__esModule?i:{default:i};var l=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.data=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPLOAD_DATA":this.uploadData(t.data);break;case"UPDATE_DETAIL":this.emit("updateDetail",t.id,t.zpos);break;case"UPDATE_PRIVATE_COMMENT":this.updatePrivateComment()}}},{key:"uploadData",value:function(t){var e=this.data.length;this.data.push({id:e,name:t.name,data:t}),this.emit("upload",e),this.emit("showInitSP",e)}},{key:"getAllData",value:function(){return this.data}},{key:"getAllFileNames",value:function(){for(var t=[],e=0;e<this.data.length;e++)t.push(this.data[e].name);return t}},{key:"getAllIdsFileNames",value:function(){for(var t=[],e=0;e<this.data.length;e++)t.push({id:this.data[e].id,name:this.data[e].name});return t}},{key:"getData",value:function(t){return this.data[t]}},{key:"getDataArray",value:function(t,e){var n={};for(var i in this.data[t].data.lookup)n[i]=[];for(var r=this.data[t].data.meta.min.z,a=Math.ceil(this.data[t].data.meta.min.z),o=Math.floor(this.data[t].data.meta.max.z),s=a;s<=o;s+=e){var l=this.getValues(t,s-r);for(var u in l)n[u].push(l[u]);n.z[n.z.length-1]=s}return n.arrayLength=o-a+1,n}},{key:"getDataNum",value:function(){return this.data.length}},{key:"getTailID",value:function(){return this.data[this.data.length-1].id||0}},{key:"getFileName",value:function(t){return this.data[t].name||""}},{key:"getValues",value:function(t,e){if(t<0)return{};var n=e+this.data[t].data.meta.min.z,i=void 0;for(i=1;i<this.data[t].data.position.length&&!(this.data[t].data.position[i-1].z<=n&&n<this.data[t].data.position[i].z);i++);var r=void 0;r=n===this.data[t].data.meta.min.z||i<0?0:n===this.data[t].data.position[this.data[t].data.position.length-1].z||i>this.data[t].data.position.length-1?1:(i-1+(n-this.data[t].data.position[i-1].z)/(this.data[t].data.position[i].z-this.data[t].data.position[i-1].z))/(this.data[t].data.position.length-1);var a=void 0;for(a=1;a<this.data[t].data.color.length&&!(this.data[t].data.color[a-1].z<=n&&n<this.data[t].data.color[a].z);a++);var o=void 0;o=a>=this.data[t].data.color.length-1?1:(a-1+(n-this.data[t].data.color[a-1].z)/(this.data[t].data.color[a].z-this.data[t].data.color[a-1].z))/(this.data[t].data.color.length-1);var s=this.data[t].data.splines.position.getPoint(r),l=this.data[t].data.splines.radius.getPoint(r),u=this.data[t].data.splines.color.getPoint(o);return{z:s.z,x:s.x,r_x:l.x,y:s.y,r_y:l.y,V:u.y,H:u.x}}},{key:"getIdFromName",value:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].name===t)return e;return-1}},{key:"getAverage",value:function(t,e,n){for(var i=void 0,r=void 0,a={x:0,y:0},o=0;o<n;o++)i=e+o,r=this.getValues(t,i),a.x+=r.x,a.y+=r.y;return a.x/=n,a.y/=n,a}},{key:"updatePrivateComment",value:function(){this.emit("updatePrivateComment")}}]),e}(a.EventEmitter));s.default.register(l.handleActions.bind(l)),e.default=l},function(t,e,n){t.exports=n(226)()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(24),a=l(n(14)),o=l(n(11)),s=l(n(3));function l(t){return t&&t.__esModule?t:{default:t}}var u=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.visualQuery=!1,t.mode="AE",t.AEOptions={flare:!1,rotation:!1,anomaly:!1},t.source=-1,t.target=[],t.selector=!0,t.dragSelection=!0,t.tubeAttributes=[],t.selectedPeriod=[-1,-1],t.extractionResults=[],t.query={},t.ignored=[],t.parameters={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPDATE_SOURCE":this.updateSource(t.id);break;case"UPDATE_TARGET":this.updateTarget(t.ids);break;case"SWITCH_SELECTOR":this.switchSelector(t.selector);break;case"SWITCH_DRAGSELECTION":this.switchDragSelection();break;case"RESET_SELECTION":this.resetSelection();break;case"SELECT_TIMEINTERVAL":this.selectTimeInterval(t.value);break;case"SWITCH_QUERY_MODE":this.switchQueryMode(t.mode);break;case"UPLOAD_TUBE_ATTRIBUTES":this.uploadTubeAttributes(t.id,t.position,t.color,t.indices);break;case"UPDATE_SELECTED_PERIOD":this.updateSelectedPeriod(t.period);break;case"SELECT_PERIOD_FROM_SP":this.selectPeriodfromSP(t.period);break;case"SET_IGNORED_VARIALES":this.setIgnoredVariables(t.varList);break;case"SET_EXTRACTION_RESULTS":this.setExtractionResults(t.parameters,t.results,t.query,t.ignored);break;case"SHOW_LINE_CHARTS":this.showLineCharts(t.LC);break;case"UPDATE_SELECTED_RESULT":this.updateSelectedResult(t.result,t.width,t.height);break;case"CLEAR_RESULTS":this.emit("clearResults");break;case"SET_QUERY":this.setQuery(t.query);break;case"CONVERT_RESULT_INTO_QUERY":this.convertResultIntoQuery(t.id,t.period,t.ignored);break;case"UPDATE_AE_OPTION":this.updateAEOption(t.option,t.value);break;case"UPDATE_SHOWN_RESULTS":this.updateShownResults(t.results);break;case"FOCUS_RESULT_FROM_TIMELINE":this.focusResultFromTimeline(t.result);break;case"SELECT_RESULT_FROM_TIMELINE":this.selectResultFromTimeline(t.result);break;case"SWITCH_QBE_SELECTOR_SP":this.switchQBESelectorSP(t.selector)}}},{key:"getVisualQuery",value:function(){return this.visualQuery}},{key:"getSource",value:function(){return this.source}},{key:"getTarget",value:function(){return this.target}},{key:"getSelector",value:function(){return this.selector}},{key:"getDragSelection",value:function(){return this.dragSelection}},{key:"getSelectedPeriod",value:function(){return this.selectedPeriod}},{key:"getMode",value:function(){return this.mode}},{key:"getTubeAttributes",value:function(t){return this.tubeAttributes[t]}},{key:"getExtractionResults",value:function(){return this.extractionResults}},{key:"getIgnored",value:function(){return this.ignored}},{key:"getQuery",value:function(){return this.query}},{key:"getAEOptions",value:function(){return this.AEOptions}},{key:"getAEOptionStatus",value:function(t){return this.AEOptions[t]}},{key:"getParameters",value:function(){return this.parameters}},{key:"updateSource",value:function(t){this.source=t,this.emit("updateSource")}},{key:"updateTarget",value:function(t){this.target=t,this.emit("updateTarget")}},{key:"switchSelector",value:function(t){this.selector=t,this.emit("switchSelector")}},{key:"switchDragSelection",value:function(){this.dragSelection=!this.dragSelection,this.emit("switchDragSelection")}},{key:"resetSelection",value:function(){this.emit("resetSelection")}},{key:"selectTimeInterval",value:function(t){var e=this.source,n=o.default.getFocused(Number(e))+s.default.getData(Number(e)).data.meta.min.z;-1!==this.selectedPeriod[0]&&-1!==this.selectedPeriod[1]?this.selectedPeriod[0]<=n&&n<=this.selectedPeriod[1]?this.selectedPeriod[1]=Math.max(this.selectedPeriod[1],n+valueNum):this.selectedPeriod[0]<=n+valueNum&&n+valueNum<=this.selectedPeriod[1]?this.selectedPeriod[0]=Math.min(this.selectedPeriod[0],n):n+valueNum<this.selectedPeriod[0]?this.selectedPeriod[0]=n:this.selectedPeriod[1]<n?this.selectedPeriod[1]=n+valueNum:n<this.selectedPeriod[0]&&this.selectedPeriod[1]<n+valueNum&&(this.selectedPeriod=[n,n+valueNum]):-1===this.selectedPeriod[0]&&-1===this.selectedPeriod[1]&&(this.selectedPeriod=[n,n+valueNum]),this.emit("selectTimeInterval",e,valueNum)}},{key:"switchQueryMode",value:function(t){if(this.mode=t,"AE"!==t)for(var e in this.AEOptions)this.AEOptions[e]=!1;this.emit("switchQueryMode",t)}},{key:"uploadTubeAttributes",value:function(t,e,n,i){this.tubeAttributes[t]={position:e,color:n,indices:i},this.emit("uploadTubeAttributes")}},{key:"updateSelectedPeriod",value:function(t){this.selectedPeriod=t,this.emit("updateSelectedPeriod")}},{key:"selectPeriodfromSP",value:function(t){this.selectedPeriod=t,this.emit("updateSelectedPeriod")}},{key:"setIgnoredVariables",value:function(t){this.emit("setIgnoredVariables",t)}},{key:"setExtractionResults",value:function(t,e,n,i){this.parameters=t,this.extractionResults=e,this.query=n,this.ignored=i,this.emit("setExtractionResults")}},{key:"setTexture",value:function(t){this.texture=t,this.emit("setTexture")}},{key:"showLineCharts",value:function(t){this.emit("showLineCharts",t)}},{key:"updateSelectedResult",value:function(t,e,n){this.emit("updateSelectedResult",t,e,n)}},{key:"setQuery",value:function(t){this.query=t}},{key:"convertResultIntoQuery",value:function(t,e,n){"QBE"==this.mode&&(this.selectedPeriod=e,this.ignored=n),this.emit("convertResultIntoQuery",t,e,n)}},{key:"updateAEOption",value:function(t,e){this.AEOptions[t]=e,this.emit("updateAEOption")}},{key:"updateShownResults",value:function(t){this.emit("updateShownResults",t)}},{key:"focusResultFromTimeline",value:function(t){this.emit("focusResultFromTimeline",t)}},{key:"selectResultFromTimeline",value:function(t){this.emit("selectResultFromTimeline",t)}},{key:"switchQBESelectorSP",value:function(t){this.emit("switchQBESelectorSP",t)}}]),e}(r.EventEmitter));a.default.register(u.handleActions.bind(u)),e.default=u},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var i=n(228),r=n(232)((function(t,e,n){i(t,e,n)}));t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateSource=function(t){a.default.dispatch({type:"UPDATE_SOURCE",id:t})},e.updateTarget=function(t){a.default.dispatch({type:"UPDATE_TARGET",ids:t})},e.switchSelector=function(t){a.default.dispatch({type:"SWITCH_SELECTOR",selector:t})},e.switchDragSelection=function(){a.default.dispatch({type:"SWITCH_DRAGSELECTION"})},e.resetSelection=function(){a.default.dispatch({type:"RESET_SELECTION"})},e.selectTimeInterval=function(t){a.default.dispatch({type:"SELECT_TIMEINTERVAL",value:t})},e.updateSelectedPeriod=function(t){a.default.dispatch({type:"UPDATE_SELECTED_PERIOD",period:t})},e.selectPeriodfromSP=function(t){a.default.dispatch({type:"SELECT_PERIOD_FROM_SP",period:t})},e.switchQueryMode=function(t){a.default.dispatch({type:"SWITCH_QUERY_MODE",mode:t})},e.setIgnoredVariables=function(t){a.default.dispatch({type:"SET_IGNORED_VARIALES",varList:t})},e.setExtractionResults=function(t,e,n,i){a.default.dispatch({type:"SET_EXTRACTION_RESULTS",parameters:t,results:e,query:n,ignored:i})},e.showLineCharts=function(t){a.default.dispatch({type:"SHOW_LINE_CHARTS",LC:t})},e.updateSelectedResult=function(t,e,n){a.default.dispatch({type:"UPDATE_SELECTED_RESULT",result:t,width:e,height:n})},e.clearResults=function(){a.default.dispatch({type:"CLEAR_RESULTS"})},e.setQuery=function(t){a.default.dispatch({type:"SET_QUERY",query:t})},e.convertResultIntoQuery=function(t,e,n){a.default.dispatch({type:"CONVERT_RESULT_INTO_QUERY",id:t,period:e,ignored:n})},e.updateAEOption=function(t,e){a.default.dispatch({type:"UPDATE_AE_OPTION",option:t,value:e})},e.updateShownResults=function(t){a.default.dispatch({type:"UPDATE_SHOWN_RESULTS",results:t})},e.focusResultfromTimeline=function(t){a.default.dispatch({type:"FOCUS_RESULT_FROM_TIMELINE",result:t})},e.selectResultFromTimeline=function(t){a.default.dispatch({type:"SELECT_RESULT_FROM_TIMELINE",result:t})},e.switchQBESelectorSP=function(t){a.default.dispatch({type:"SWITCH_QBE_SELECTOR_SP",selector:t})};var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i};n(4)},function(t,e,n){"use strict";n.r(e);var i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},r=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}};var a=r(i),o=a.right,s=a.left,l=o,u=function(t,e){null==e&&(e=c);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return a};function c(t,e){return[t,e]}var h=function(t,e,n){var i,r,a,o,s=t.length,l=e.length,u=new Array(s*l);for(null==n&&(n=c),i=a=0;i<s;++i)for(o=t[i],r=0;r<l;++r,++a)u[a]=n(o,e[r]);return u},f=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},d=function(t){return null===t?NaN:+t},p=function(t,e){var n,i,r=t.length,a=0,o=-1,s=0,l=0;if(null==e)for(;++o<r;)isNaN(n=d(t[o]))||(l+=(i=n-s)*(n-(s+=i/++a)));else for(;++o<r;)isNaN(n=d(e(t[o],o,t)))||(l+=(i=n-s)*(n-(s+=i/++a)));if(a>1)return l/(a-1)},m=function(t,e){var n=p(t,e);return n?Math.sqrt(n):n},g=function(t,e){var n,i,r,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(i=r=n;++o<a;)null!=(n=t[o])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=r=n;++o<a;)null!=(n=e(t[o],o,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]},v=Array.prototype,y=v.slice,b=v.map,x=function(t){return function(){return t}},_=function(t){return t},w=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a},S=Math.sqrt(50),E=Math.sqrt(10),M=Math.sqrt(2),T=function(t,e,n){var i,r,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=C(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(r=Math.ceil(t-e+1));++s<r;)a[s]=(t-s)/o;return i&&a.reverse(),a};function C(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=S?10:a>=E?5:a>=M?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=S?10:a>=E?5:a>=M?2:1)}function k(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=S?r*=10:a>=E?r*=5:a>=M&&(r*=2),e<t?-r:r}var P=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},A=function(){var t=_,e=g,n=P;function i(i){var r,a,o=i.length,s=new Array(o);for(r=0;r<o;++r)s[r]=t(i[r],r,i);var u=e(s),c=u[0],h=u[1],f=n(s,c,h);Array.isArray(f)||(f=k(c,h,f),f=w(Math.ceil(c/f)*f,h,f));for(var d=f.length;f[0]<=c;)f.shift(),--d;for(;f[d-1]>h;)f.pop(),--d;var p,m=new Array(d+1);for(r=0;r<=d;++r)(p=m[r]=[]).x0=r>0?f[r-1]:c,p.x1=r<d?f[r]:h;for(r=0;r<o;++r)c<=(a=s[r])&&a<=h&&m[l(f,a,0,d)].push(i[r]);return m}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:x(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:x([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?x(y.call(t)):x(t),i):n},i},O=function(t,e,n){if(null==n&&(n=d),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(r-a)}},L=function(t,e,n){return t=b.call(t,d).sort(i),Math.ceil((n-e)/(2*(O(t,.75)-O(t,.25))*Math.pow(t.length,-1/3)))},I=function(t,e,n){return Math.ceil((n-e)/(3.5*m(t)*Math.pow(t.length,-1/3)))},N=function(t,e){var n,i,r=t.length,a=-1;if(null==e){for(;++a<r;)if(null!=(n=t[a])&&n>=n)for(i=n;++a<r;)null!=(n=t[a])&&n>i&&(i=n)}else for(;++a<r;)if(null!=(n=e(t[a],a,t))&&n>=n)for(i=n;++a<r;)null!=(n=e(t[a],a,t))&&n>i&&(i=n);return i},R=function(t,e){var n,i=t.length,r=i,a=-1,o=0;if(null==e)for(;++a<i;)isNaN(n=d(t[a]))?--r:o+=n;else for(;++a<i;)isNaN(n=d(e(t[a],a,t)))?--r:o+=n;if(r)return o/r},D=function(t,e){var n,r=t.length,a=-1,o=[];if(null==e)for(;++a<r;)isNaN(n=d(t[a]))||o.push(n);else for(;++a<r;)isNaN(n=d(e(t[a],a,t)))||o.push(n);return O(o.sort(i),.5)},z=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--o]=i[e];return n},B=function(t,e){var n,i,r=t.length,a=-1;if(null==e){for(;++a<r;)if(null!=(n=t[a])&&n>=n)for(i=n;++a<r;)null!=(n=t[a])&&i>n&&(i=n)}else for(;++a<r;)if(null!=(n=e(t[a],a,t))&&n>=n)for(i=n;++a<r;)null!=(n=e(t[a],a,t))&&i>n&&(i=n);return i},F=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},j=function(t,e){if(n=t.length){var n,r,a=0,o=0,s=t[o];for(null==e&&(e=i);++a<n;)(e(r=t[a],s)<0||0!==e(s,s))&&(s=r,o=a);return 0===e(s,s)?o:void 0}},V=function(t,e,n){for(var i,r,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},U=function(t,e){var n,i=t.length,r=-1,a=0;if(null==e)for(;++r<i;)(n=+t[r])&&(a+=n);else for(;++r<i;)(n=+e(t[r],r,t))&&(a+=n);return a},H=function(t){if(!(r=t.length))return[];for(var e=-1,n=B(t,G),i=new Array(n);++e<n;)for(var r,a=-1,o=i[e]=new Array(r);++a<r;)o[a]=t[a][e];return i};function G(t){return t.length}var W=function(){return H(arguments)},q=Array.prototype.slice,Q=function(t){return t},Y=1,X=2,$=3,Z=4,J=1e-6;function K(t){return"translate("+(t+.5)+",0)"}function tt(t){return"translate(0,"+(t+.5)+")"}function et(t){return function(e){return+t(e)}}function nt(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function it(){return!this.__axis}function rt(t,e){var n=[],i=null,r=null,a=6,o=6,s=3,l=t===Y||t===Z?-1:1,u=t===Z||t===X?"x":"y",c=t===Y||t===$?K:tt;function h(h){var f=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,d=null==r?e.tickFormat?e.tickFormat.apply(e,n):Q:r,p=Math.max(a,0)+s,m=e.range(),g=+m[0]+.5,v=+m[m.length-1]+.5,y=(e.bandwidth?nt:et)(e.copy()),b=h.selection?h.selection():h,x=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(f,e).order(),w=_.exit(),S=_.enter().append("g").attr("class","tick"),E=_.select("line"),M=_.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(S),E=E.merge(S.append("line").attr("stroke","currentColor").attr(u+"2",l*a)),M=M.merge(S.append("text").attr("fill","currentColor").attr(u,l*p).attr("dy",t===Y?"0em":t===$?"0.71em":"0.32em")),h!==b&&(x=x.transition(h),_=_.transition(h),E=E.transition(h),M=M.transition(h),w=w.transition(h).attr("opacity",J).attr("transform",(function(t){return isFinite(t=y(t))?c(t):this.getAttribute("transform")})),S.attr("opacity",J).attr("transform",(function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:y(t))}))),w.remove(),x.attr("d",t===Z||t==X?o?"M"+l*o+","+g+"H0.5V"+v+"H"+l*o:"M0.5,"+g+"V"+v:o?"M"+g+","+l*o+"V0.5H"+v+"V"+l*o:"M"+g+",0.5H"+v),_.attr("opacity",1).attr("transform",(function(t){return c(y(t))})),E.attr(u+"2",l*a),M.attr(u,l*p).text(d),b.filter(it).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===X?"start":t===Z?"end":"middle"),b.each((function(){this.__axis=y}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=q.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:q.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(i=null==t?null:q.call(t),h):i&&i.slice()},h.tickFormat=function(t){return arguments.length?(r=t,h):r},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function at(t){return rt(Y,t)}function ot(t){return rt(X,t)}function st(t){return rt($,t)}function lt(t){return rt(Z,t)}var ut={value:function(){}};function ct(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new ht(i)}function ht(t){this._=t}function ft(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function dt(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function pt(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ut,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}ht.prototype=ct.prototype={constructor:ht,on:function(t,e){var n,i=this._,r=ft(t+"",i),a=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=r[a]).type)i[n]=pt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=pt(i[n],t.name,null);return this}for(;++a<o;)if((n=(t=r[a]).type)&&(n=dt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ht(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var mt=ct;function gt(){}var vt=function(t){return null==t?gt:function(){return this.querySelector(t)}};function yt(){return[]}var bt=function(t){return null==t?yt:function(){return this.querySelectorAll(t)}},xt=function(t){return function(){return this.matches(t)}},_t=function(t){return new Array(t.length)};function wt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}wt.prototype={constructor:wt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var St="$";function Et(t,e,n,i,r,a){for(var o,s=0,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new wt(t,a[s]);for(;s<l;++s)(o=e[s])&&(r[s]=o)}function Mt(t,e,n,i,r,a,o){var s,l,u,c={},h=e.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(d[s]=u=St+o.call(l,l.__data__,s,e),u in c?r[s]=l:c[u]=l);for(s=0;s<f;++s)(l=c[u=St+o.call(t,a[s],s,a)])?(i[s]=l,l.__data__=a[s],c[u]=null):n[s]=new wt(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&c[d[s]]===l&&(r[s]=l)}function Tt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var Ct="http://www.w3.org/1999/xhtml",kt={svg:"http://www.w3.org/2000/svg",xhtml:Ct,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Pt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),kt.hasOwnProperty(e)?{space:kt[e],local:t}:t};function At(t){return function(){this.removeAttribute(t)}}function Ot(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lt(t,e){return function(){this.setAttribute(t,e)}}function It(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Nt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Rt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Dt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function zt(t){return function(){this.style.removeProperty(t)}}function Bt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ft(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function jt(t,e){return t.style.getPropertyValue(e)||Dt(t).getComputedStyle(t,null).getPropertyValue(e)}function Vt(t){return function(){delete this[t]}}function Ut(t,e){return function(){this[t]=e}}function Ht(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Gt(t){return t.trim().split(/^|\s+/)}function Wt(t){return t.classList||new qt(t)}function qt(t){this._node=t,this._names=Gt(t.getAttribute("class")||"")}function Qt(t,e){for(var n=Wt(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Yt(t,e){for(var n=Wt(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Xt(t){return function(){Qt(this,t)}}function $t(t){return function(){Yt(this,t)}}function Zt(t,e){return function(){(e.apply(this,arguments)?Qt:Yt)(this,t)}}qt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Jt(){this.textContent=""}function Kt(t){return function(){this.textContent=t}}function te(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ee(){this.innerHTML=""}function ne(t){return function(){this.innerHTML=t}}function ie(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function re(){this.nextSibling&&this.parentNode.appendChild(this)}function ae(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ct&&e.documentElement.namespaceURI===Ct?e.createElement(t):e.createElementNS(n,t)}}function se(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var le=function(t){var e=Pt(t);return(e.local?se:oe)(e)};function ue(){return null}function ce(){var t=this.parentNode;t&&t.removeChild(this)}function he(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var de={},pe=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(de={mouseenter:"mouseover",mouseleave:"mouseout"}));function me(t,e,n){return t=ge(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function ge(t,e,n){return function(i){var r=pe;pe=i;try{t.call(this,this.__data__,e,n)}finally{pe=r}}}function ve(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ye(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,a=e.length;i<a;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function be(t,e,n){var i=de.hasOwnProperty(t.type)?me:ge;return function(r,a,o){var s,l=this.__on,u=i(e,a,o);if(l)for(var c=0,h=l.length;c<h;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function xe(t,e,n,i){var r=pe;t.sourceEvent=pe,pe=t;try{return e.apply(n,i)}finally{pe=r}}function _e(t,e,n){var i=Dt(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function we(t,e){return function(){return _e(this,t,e)}}function Se(t,e){return function(){return _e(this,t,e.apply(this,arguments))}}var Ee=[null];function Me(t,e){this._groups=t,this._parents=e}function Te(){return new Me([[document.documentElement]],Ee)}Me.prototype=Te.prototype={constructor:Me,select:function(t){"function"!=typeof t&&(t=vt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],l=s.length,u=i[r]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new Me(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=bt(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(i.push(t.call(o,o.__data__,u,s)),r.push(o));return new Me(i,r)},filter:function(t){"function"!=typeof t&&(t=xt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Me(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each((function(t){p[++c]=t})),p;var n,i=e?Mt:Et,r=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var h=r[c],f=a[c],d=f.length,p=t.call(h,h&&h.__data__,c,r),m=p.length,g=l[c]=new Array(m),v=s[c]=new Array(m);i(h,f,g,v,u[c]=new Array(d),p,e);for(var y,b,x=0,_=0;x<m;++x)if(y=g[x]){for(x>=_&&(_=x+1);!(b=v[_])&&++_<m;);y._next=b||null}}return(s=new Me(s,r))._enter=l,s._exit=u,s},enter:function(){return new Me(this._enter||this._groups.map(_t),this._parents)},exit:function(){return new Me(this._exit||this._groups.map(_t),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=e[s],c=n[s],h=u.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;s<i;++s)o[s]=e[s];return new Me(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Tt);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o,s=n[a],l=s.length,u=r[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new Me(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=Pt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Ot:At:"function"==typeof e?n.local?Rt:Nt:n.local?It:Lt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?zt:"function"==typeof e?Ft:Bt)(t,e,null==n?"":n)):jt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Vt:"function"==typeof e?Ht:Ut)(t,e)):this.node()[t]},classed:function(t,e){var n=Gt(t+"");if(arguments.length<2){for(var i=Wt(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Zt:e?Xt:$t)(n,e))},text:function(t){return arguments.length?this.each(null==t?Jt:("function"==typeof t?te:Kt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ee:("function"==typeof t?ie:ne)(t)):this.node().innerHTML},raise:function(){return this.each(re)},lower:function(){return this.each(ae)},append:function(t){var e="function"==typeof t?t:le(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:le(t),i=null==e?ue:"function"==typeof e?e:vt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(ce)},clone:function(t){return this.select(t?fe:he)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=ve(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?be:ye,null==n&&(n=!1),i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<o;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Se:we)(t,e))}};var Ce=Te,ke=function(t){return"string"==typeof t?new Me([[document.querySelector(t)]],[document.documentElement]):new Me([[t]],Ee)};function Pe(){pe.stopImmediatePropagation()}var Ae=function(){pe.preventDefault(),pe.stopImmediatePropagation()},Oe=function(t){var e=t.document.documentElement,n=ke(t).on("dragstart.drag",Ae,!0);"onselectstart"in e?n.on("selectstart.drag",Ae,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Le(t,e){var n=t.document.documentElement,i=ke(t).on("dragstart.drag",null);e&&(i.on("click.drag",Ae,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ie=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Ne(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Re(){}var De="\\s*([+-]?\\d+)\\s*",ze="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Be="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fe=/^#([0-9a-f]{3,8})$/,je=new RegExp("^rgb\\("+[De,De,De]+"\\)$"),Ve=new RegExp("^rgb\\("+[Be,Be,Be]+"\\)$"),Ue=new RegExp("^rgba\\("+[De,De,De,ze]+"\\)$"),He=new RegExp("^rgba\\("+[Be,Be,Be,ze]+"\\)$"),Ge=new RegExp("^hsl\\("+[ze,Be,Be]+"\\)$"),We=new RegExp("^hsla\\("+[ze,Be,Be,ze]+"\\)$"),qe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qe(){return this.rgb().formatHex()}function Ye(){return this.rgb().formatRgb()}function Xe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Fe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?$e(e):3===n?new tn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new tn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new tn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=je.exec(t))?new tn(e[1],e[2],e[3],1):(e=Ve.exec(t))?new tn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ue.exec(t))?Ze(e[1],e[2],e[3],e[4]):(e=He.exec(t))?Ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ge.exec(t))?an(e[1],e[2]/100,e[3]/100,1):(e=We.exec(t))?an(e[1],e[2]/100,e[3]/100,e[4]):qe.hasOwnProperty(t)?$e(qe[t]):"transparent"===t?new tn(NaN,NaN,NaN,0):null}function $e(t){return new tn(t>>16&255,t>>8&255,255&t,1)}function Ze(t,e,n,i){return i<=0&&(t=e=n=NaN),new tn(t,e,n,i)}function Je(t){return t instanceof Re||(t=Xe(t)),t?new tn((t=t.rgb()).r,t.g,t.b,t.opacity):new tn}function Ke(t,e,n,i){return 1===arguments.length?Je(t):new tn(t,e,n,null==i?1:i)}function tn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function en(){return"#"+rn(this.r)+rn(this.g)+rn(this.b)}function nn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function rn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function an(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ln(t,e,n,i)}function on(t){if(t instanceof ln)return new ln(t.h,t.s,t.l,t.opacity);if(t instanceof Re||(t=Xe(t)),!t)return new ln;if(t instanceof ln)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new ln(o,s,l,t.opacity)}function sn(t,e,n,i){return 1===arguments.length?on(t):new ln(t,e,n,null==i?1:i)}function ln(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function un(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function cn(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}Ie(Re,Xe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Qe,formatHex:Qe,formatHsl:function(){return on(this).formatHsl()},formatRgb:Ye,toString:Ye}),Ie(tn,Ke,Ne(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatRgb:nn,toString:nn})),Ie(ln,sn,Ne(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ln(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ln(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new tn(un(t>=240?t-240:t+120,r,i),un(t,r,i),un(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var hn=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],a=t[i+1],o=i>0?t[i-1]:2*r-a,s=i<e-1?t[i+2]:2*a-r;return cn((n-i/e)*e,o,r,a,s)}},fn=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],a=t[i%e],o=t[(i+1)%e],s=t[(i+2)%e];return cn((n-i/e)*e,r,a,o,s)}},dn=function(t){return function(){return t}};function pn(t,e){return function(n){return t+n*e}}function mn(t,e){var n=e-t;return n?pn(t,n>180||n<-180?n-360*Math.round(n/360):n):dn(isNaN(t)?e:t)}function gn(t){return 1==(t=+t)?vn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):dn(isNaN(e)?n:e)}}function vn(t,e){var n=e-t;return n?pn(t,n):dn(isNaN(t)?e:t)}var yn=function t(e){var n=gn(e);function i(t,e){var i=n((t=Ke(t)).r,(e=Ke(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),o=vn(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function bn(t){return function(e){var n,i,r=e.length,a=new Array(r),o=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=Ke(e[n]),a[n]=i.r||0,o[n]=i.g||0,s[n]=i.b||0;return a=t(a),o=t(o),s=t(s),i.opacity=1,function(t){return i.r=a(t),i.g=o(t),i.b=s(t),i+""}}}var xn=bn(hn),_n=bn(fn),wn=function(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(n=0;n<i;++n)r[n]=t[n]*(1-a)+e[n]*a;return r}};function Sn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var En=function(t,e){return(Sn(e)?wn:Mn)(t,e)};function Mn(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=Nn(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}var Tn=function(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}},Cn=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},kn=function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Nn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,An=new RegExp(Pn.source,"g");var On,Ln,In=function(t,e){var n,i,r,a=Pn.lastIndex=An.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=Pn.exec(t))&&(i=An.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Cn(n,i)})),a=An.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})},Nn=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?dn(e):("number"===i?Cn:"string"===i?(n=Xe(e))?(e=n,yn):In:e instanceof Xe?yn:e instanceof Date?Tn:Sn(e)?wn:Array.isArray(e)?Mn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?kn:Cn)(t,e)},Rn=function(){for(var t,e=pe;t=e.sourceEvent;)e=t;return e},Dn=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]},zn=function(t,e,n){arguments.length<3&&(n=e,e=Rn().changedTouches);for(var i,r=0,a=e?e.length:0;r<a;++r)if((i=e[r]).identifier===n)return Dn(t,i);return null},Bn=function(t){var e=Rn();return e.changedTouches&&(e=e.changedTouches[0]),Dn(t,e)},Fn=0,jn=0,Vn=0,Un=1e3,Hn=0,Gn=0,Wn=0,qn="object"==typeof performance&&performance.now?performance:Date,Qn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yn(){return Gn||(Qn(Xn),Gn=qn.now()+Wn)}function Xn(){Gn=0}function $n(){this._call=this._time=this._next=null}function Zn(t,e,n){var i=new $n;return i.restart(t,e,n),i}function Jn(){Yn(),++Fn;for(var t,e=On;e;)(t=Gn-e._time)>=0&&e._call.call(null,t),e=e._next;--Fn}function Kn(){Gn=(Hn=qn.now())+Wn,Fn=jn=0;try{Jn()}finally{Fn=0,function(){var t,e,n=On,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:On=e);Ln=t,ei(i)}(),Gn=0}}function ti(){var t=qn.now(),e=t-Hn;e>Un&&(Wn-=e,Hn=t)}function ei(t){Fn||(jn&&(jn=clearTimeout(jn)),t-Gn>24?(t<1/0&&(jn=setTimeout(Kn,t-qn.now()-Wn)),Vn&&(Vn=clearInterval(Vn))):(Vn||(Hn=qn.now(),Vn=setInterval(ti,Un)),Fn=1,Qn(Kn)))}$n.prototype=Zn.prototype={constructor:$n,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Yn():+n)+(null==e?0:+e),this._next||Ln===this||(Ln?Ln._next=this:On=this,Ln=this),this._call=t,this._time=n,ei()},stop:function(){this._call&&(this._call=null,this._time=1/0,ei())}};var ni=function(t,e,n){var i=new $n;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i},ii=mt("start","end","cancel","interrupt"),ri=[],ai=0,oi=1,si=2,li=3,ui=4,ci=5,hi=6,fi=function(t,e,n,i,r,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function a(l){var u,c,h,f;if(n.state!==oi)return s();for(u in r)if((f=r[u]).name===n.name){if(f.state===li)return ni(a);f.state===ui?(f.state=hi,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=hi,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(ni((function(){n.state===li&&(n.state=ui,n.timer.restart(o,n.delay,n.time),o(l))})),n.state=si,n.on.call("start",t,t.__data__,n.index,n.group),n.state===si){for(n.state=li,i=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=f);i.length=c+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=ci,1),a=-1,o=i.length;++a<o;)i[a].call(t,r);n.state===ci&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=hi,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Zn((function(t){n.state=oi,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:ii,tween:ri,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ai})};function di(t,e){var n=mi(t,e);if(n.state>ai)throw new Error("too late; already scheduled");return n}function pi(t,e){var n=mi(t,e);if(n.state>li)throw new Error("too late; already running");return n}function mi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var gi,vi,yi,bi,xi=function(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>si&&n.state<ci,n.state=hi,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}},_i=180/Math.PI,wi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Si=function(t,e,n,i,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*_i,skewX:Math.atan(l)*_i,scaleX:o,scaleY:s}};function Ei(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,i,r,a,o,s){if(t!==r||i!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:Cn(t,r)},{i:l-2,x:Cn(i,a)})}else(r||a)&&o.push("translate("+r+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Cn(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Cn(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(a.skewX,o.skewX,s,l),function(t,e,n,i,a,o){if(t!==n||e!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Cn(t,n)},{i:s-2,x:Cn(e,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Mi=Ei((function(t){return"none"===t?wi:(gi||(gi=document.createElement("DIV"),vi=document.documentElement,yi=document.defaultView),gi.style.transform=t,t=yi.getComputedStyle(vi.appendChild(gi),null).getPropertyValue("transform"),vi.removeChild(gi),t=t.slice(7,-1).split(","),Si(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Ti=Ei((function(t){return null==t?wi:(bi||(bi=document.createElementNS("http://www.w3.org/2000/svg","g")),bi.setAttribute("transform",t),(t=bi.transform.baseVal.consolidate())?(t=t.matrix,Si(t.a,t.b,t.c,t.d,t.e,t.f)):wi)}),", ",")",")");function Ci(t,e){var n,i;return function(){var r=pi(this,t),a=r.tween;if(a!==n)for(var o=0,s=(i=n=a).length;o<s;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function ki(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=pi(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=s;break}l===u&&r.push(s)}a.tween=r}}function Pi(t,e,n){var i=t._id;return t.each((function(){var t=pi(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return mi(t,i).value[e]}}var Ai=function(t,e){var n;return("number"==typeof e?Cn:e instanceof Xe?yn:(n=Xe(e))?(e=n,yn):In)(t,e)};function Oi(t){return function(){this.removeAttribute(t)}}function Li(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ii(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===i?r:r=e(i=o,n)}}function Ni(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===i?r:r=e(i=o,n)}}function Ri(t,e,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,l));this.removeAttribute(t)}}function Di(t,e,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,l));this.removeAttributeNS(t.space,t.local)}}function zi(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,r)),n}return r._value=e,r}function Bi(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,r)),n}return r._value=e,r}function Fi(t,e){return function(){di(this,t).delay=+e.apply(this,arguments)}}function ji(t,e){return e=+e,function(){di(this,t).delay=e}}function Vi(t,e){return function(){pi(this,t).duration=+e.apply(this,arguments)}}function Ui(t,e){return e=+e,function(){pi(this,t).duration=e}}function Hi(t,e){if("function"!=typeof e)throw new Error;return function(){pi(this,t).ease=e}}function Gi(t,e,n){var i,r,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?di:pi;return function(){var o=a(this,t),s=o.on;s!==i&&(r=(i=s).copy()).on(e,n),o.on=r}}var Wi=Ce.prototype.constructor;function qi(t){return function(){this.style.removeProperty(t)}}function Qi(t,e,n){var i,r;function a(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,a,n)),i}return a._value=e,a}function Yi(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}var Xi=0;function $i(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Zi(t){return Ce().transition(t)}function Ji(){return++Xi}var Ki=Ce.prototype;function tr(t){return t*t*t}function er(t){return--t*t*t+1}function nr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}$i.prototype=Zi.prototype={constructor:$i,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=vt(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,l,u=i[o],c=u.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=t.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,fi(h[f],e,n,f,h,mi(s,n)));return new $i(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=bt(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var f,d=t.call(l,l.__data__,h,u),p=mi(l,n),m=0,g=d.length;m<g;++m)(f=d[m])&&fi(f,e,n,m,d,p);a.push(d),o.push(l)}return new $i(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=xt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new $i(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=e[s],c=n[s],h=u.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;s<i;++s)o[s]=e[s];return new $i(o,this._parents,this._name,this._id)},selection:function(){return new Wi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ji(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=mi(o,e);fi(o,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $i(i,this._parents,t,n)},call:Ki.call,nodes:Ki.nodes,node:Ki.node,size:Ki.size,empty:Ki.empty,each:Ki.each,on:function(t,e){var n=this._id;return arguments.length<2?mi(this.node(),n).on.on(t):this.each(Gi(n,t,e))},attr:function(t,e){var n=Pt(t),i="transform"===n?Ti:Ai;return this.attrTween(t,"function"==typeof e?(n.local?Di:Ri)(n,i,Pi(this,"attr."+t,e)):null==e?(n.local?Li:Oi)(n):(n.local?Ni:Ii)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Pt(t);return this.tween(n,(i.local?zi:Bi)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Mi:Ai;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var a=jt(this,t),o=(this.style.removeProperty(t),jt(this,t));return a===o?null:a===n&&o===i?r:r=e(n=a,i=o)}}(t,i)).on("end.style."+t,qi(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,a;return function(){var o=jt(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=jt(this,t)),o===l?null:o===i&&l===r?a:(r=l,a=e(i=o,s))}}(t,i,Pi(this,"style."+t,e))).each(function(t,e){var n,i,r,a,o="style."+e,s="end."+o;return function(){var l=pi(this,t),u=l.on,c=null==l.value[o]?a||(a=qi(e)):void 0;u===n&&r===c||(i=(n=u).copy()).on(s,r=c),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,a=n+"";return function(){var o=jt(this,t);return o===a?null:o===i?r:r=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Qi(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Pi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Yi(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=mi(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?Ci:ki)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fi:ji)(e,t)):mi(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vi:Ui)(e,t)):mi(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Hi(e,t)):mi(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--r&&a()}};n.each((function(){var n=pi(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}))}))}};var ir={time:null,delay:0,duration:250,ease:nr};function rr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ir.time=Yn(),ir;return n}Ce.prototype.interrupt=function(t){return this.each((function(){xi(this,t)}))},Ce.prototype.transition=function(t){var e,n;t instanceof $i?(e=t._id,t=t._name):(e=Ji(),(n=ir).time=Yn(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)(o=s[u])&&fi(o,t,e,u,s,n||rr(o,e));return new $i(i,this._parents,t,e)};var ar=[null],or=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>oi&&n.name===e)return new $i([[t]],ar,e,+i);return null},sr=function(t){return function(){return t}},lr=function(t,e,n){this.target=t,this.type=e,this.selection=n};function ur(){pe.stopImmediatePropagation()}var cr=function(){pe.preventDefault(),pe.stopImmediatePropagation()},hr={name:"drag"},fr={name:"space"},dr={name:"handle"},pr={name:"center"};function mr(t){return[+t[0],+t[1]]}function gr(t){return[mr(t[0]),mr(t[1])]}var vr={name:"x",handles:["w","e"].map(Mr),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},yr={name:"y",handles:["n","s"].map(Mr),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},br={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Mr),input:function(t){return null==t?null:gr(t)},output:function(t){return t}},xr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_r={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Sr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Er={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Mr(t){return{type:t}}function Tr(){return!pe.ctrlKey&&!pe.button}function Cr(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function kr(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ar(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Or(){return Nr(vr)}function Lr(){return Nr(yr)}var Ir=function(){return Nr(br)};function Nr(t){var e,n=Cr,i=Tr,r=kr,a=!0,o=mt("start","brush","end"),s=6;function l(e){var n=e.property("__brush",m).selectAll(".overlay").data([Mr("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xr.overlay).merge(n).each((function(){var t=Pr(this).extent;ke(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Mr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return xr[t.type]})),e.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var t=ke(this),e=Pr(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if((!e||pe.touches)&&i.apply(this,arguments)){var n,r,o,s,l,h,f,d,p,m,g,v,y=this,b=pe.target.__data__.type,x="selection"===(a&&pe.metaKey?b="overlay":b)?hr:a&&pe.altKey?pr:dr,_=t===yr?null:Sr[b],w=t===vr?null:Er[b],S=Pr(y),E=S.extent,M=S.selection,T=E[0][0],C=E[0][1],k=E[1][0],P=E[1][1],A=0,O=0,L=_&&w&&a&&pe.shiftKey,I=pe.touches?(v=pe.changedTouches[0].identifier,function(t){return zn(t,pe.touches,v)}):Bn,N=I(y),R=N,D=c(y,arguments,!0).beforestart();"overlay"===b?(M&&(p=!0),S.selection=M=[[n=t===yr?T:N[0],o=t===vr?C:N[1]],[l=t===yr?k:n,f=t===vr?P:o]]):(n=M[0][0],o=M[0][1],l=M[1][0],f=M[1][1]),r=n,s=o,h=l,d=f;var z=ke(y).attr("pointer-events","none"),B=z.selectAll(".overlay").attr("cursor",xr[b]);if(pe.touches)D.moved=j,D.ended=U;else{var F=ke(pe.view).on("mousemove.brush",j,!0).on("mouseup.brush",U,!0);a&&F.on("keydown.brush",(function(){switch(pe.keyCode){case 16:L=_&&w;break;case 18:x===dr&&(_&&(l=h-A*_,n=r+A*_),w&&(f=d-O*w,o=s+O*w),x=pr,V());break;case 32:x!==dr&&x!==pr||(_<0?l=h-A:_>0&&(n=r-A),w<0?f=d-O:w>0&&(o=s-O),x=fr,B.attr("cursor",xr.selection),V());break;default:return}cr()}),!0).on("keyup.brush",(function(){switch(pe.keyCode){case 16:L&&(m=g=L=!1,V());break;case 18:x===pr&&(_<0?l=h:_>0&&(n=r),w<0?f=d:w>0&&(o=s),x=dr,V());break;case 32:x===fr&&(pe.altKey?(_&&(l=h-A*_,n=r+A*_),w&&(f=d-O*w,o=s+O*w),x=pr):(_<0?l=h:_>0&&(n=r),w<0?f=d:w>0&&(o=s),x=dr),B.attr("cursor",xr[b]),V());break;default:return}cr()}),!0),Oe(pe.view)}ur(),xi(y),u.call(y),D.start()}function j(){var t=I(y);!L||m||g||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?g=!0:m=!0),R=t,p=!0,cr(),V()}function V(){var t;switch(A=R[0]-N[0],O=R[1]-N[1],x){case fr:case hr:_&&(A=Math.max(T-n,Math.min(k-l,A)),r=n+A,h=l+A),w&&(O=Math.max(C-o,Math.min(P-f,O)),s=o+O,d=f+O);break;case dr:_<0?(A=Math.max(T-n,Math.min(k-n,A)),r=n+A,h=l):_>0&&(A=Math.max(T-l,Math.min(k-l,A)),r=n,h=l+A),w<0?(O=Math.max(C-o,Math.min(P-o,O)),s=o+O,d=f):w>0&&(O=Math.max(C-f,Math.min(P-f,O)),s=o,d=f+O);break;case pr:_&&(r=Math.max(T,Math.min(k,n-A*_)),h=Math.max(T,Math.min(k,l+A*_))),w&&(s=Math.max(C,Math.min(P,o-O*w)),d=Math.max(C,Math.min(P,f+O*w)))}h<r&&(_*=-1,t=n,n=l,l=t,t=r,r=h,h=t,b in _r&&B.attr("cursor",xr[b=_r[b]])),d<s&&(w*=-1,t=o,o=f,f=t,t=s,s=d,d=t,b in wr&&B.attr("cursor",xr[b=wr[b]])),S.selection&&(M=S.selection),m&&(r=M[0][0],h=M[1][0]),g&&(s=M[0][1],d=M[1][1]),M[0][0]===r&&M[0][1]===s&&M[1][0]===h&&M[1][1]===d||(S.selection=[[r,s],[h,d]],u.call(y),D.brush())}function U(){if(ur(),pe.touches){if(pe.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Le(pe.view,p),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);z.attr("pointer-events","all"),B.attr("cursor",xr.overlay),S.selection&&(M=S.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(M)&&(S.selection=null,u.call(y)),D.end()}}function d(){c(this,arguments).moved()}function p(){c(this,arguments).ended()}function m(){var e=this.__brush||{selection:null};return e.extent=gr(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n){e.selection?e.on("start.brush",(function(){c(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){c(this,arguments).end()})).tween("brush",(function(){var e=this,i=e.__brush,r=c(e,arguments),a=i.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=Nn(a,o);function l(t){i.selection=1===t&&null===o?null:s(t),u.call(e),r.brush()}return null!==a&&null!==o?l:l(1)})):e.each((function(){var e=this,i=arguments,r=e.__brush,a=t.input("function"==typeof n?n.apply(e,i):n,r.extent),o=c(e,i).beforestart();xi(e),r.selection=null===a?null:a,u.call(e),o.start().brush().end()}))},l.clear=function(t){l.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){xe(new lr(l,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:sr(gr(t)),l):n},l.filter=function(t){return arguments.length?(i="function"==typeof t?t:sr(!!t),l):i},l.touchable=function(t){return arguments.length?(r="function"==typeof t?t:sr(!!t),l):r},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(a=!!t,l):a},l.on=function(){var t=o.on.apply(o,arguments);return t===o?l:t},l}var Rr=Math.cos,Dr=Math.sin,zr=Math.PI,Br=zr/2,Fr=2*zr,jr=Math.max;function Vr(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Ur=function(){var t=0,e=null,n=null,i=null;function r(r){var a,o,s,l,u,c,h=r.length,f=[],d=w(h),p=[],m=[],g=m.groups=new Array(h),v=new Array(h*h);for(a=0,u=-1;++u<h;){for(o=0,c=-1;++c<h;)o+=r[u][c];f.push(o),p.push(w(h)),a+=o}for(e&&d.sort((function(t,n){return e(f[t],f[n])})),n&&p.forEach((function(t,e){t.sort((function(t,i){return n(r[e][t],r[e][i])}))})),l=(a=jr(0,Fr-t*h)/a)?t:Fr/h,o=0,u=-1;++u<h;){for(s=o,c=-1;++c<h;){var y=d[u],b=p[y][c],x=r[y][b],_=o,S=o+=x*a;v[b*h+y]={index:y,subindex:b,startAngle:_,endAngle:S,value:x}}g[y]={index:y,startAngle:s,endAngle:o,value:f[y]},o+=l}for(u=-1;++u<h;)for(c=u-1;++c<h;){var E=v[c*h+u],M=v[u*h+c];(E.value||M.value)&&m.push(E.value<M.value?{source:M,target:E}:{source:E,target:M})}return i?m.sort(i):m}return r.padAngle=function(e){return arguments.length?(t=jr(0,e),r):t},r.sortGroups=function(t){return arguments.length?(e=t,r):e},r.sortSubgroups=function(t){return arguments.length?(n=t,r):n},r.sortChords=function(t){return arguments.length?(null==t?i=null:(i=Vr(t))._=t,r):i&&i._},r},Hr=Array.prototype.slice,Gr=function(t){return function(){return t}},Wr=Math.PI,qr=2*Wr,Qr=qr-1e-6;function Yr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Xr(){return new Yr}Yr.prototype=Xr.prototype={constructor:Yr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,l=i-e,u=a-t,c=o-e,h=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(c*s-l*u)>1e-6&&r){var f=n-a,d=i-o,p=s*s+l*l,m=f*f+d*d,g=Math.sqrt(p),v=Math.sqrt(h),y=r*Math.tan((Wr-Math.acos((p+h-m)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*u)+","+(e+b*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+o,u=e+s,c=1^a,h=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%qr+qr),h>Qr?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=Wr)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var $r=Xr;function Zr(t){return t.source}function Jr(t){return t.target}function Kr(t){return t.radius}function ta(t){return t.startAngle}function ea(t){return t.endAngle}var na=function(){var t=Zr,e=Jr,n=Kr,i=ta,r=ea,a=null;function o(){var o,s=Hr.call(arguments),l=t.apply(this,s),u=e.apply(this,s),c=+n.apply(this,(s[0]=l,s)),h=i.apply(this,s)-Br,f=r.apply(this,s)-Br,d=c*Rr(h),p=c*Dr(h),m=+n.apply(this,(s[0]=u,s)),g=i.apply(this,s)-Br,v=r.apply(this,s)-Br;if(a||(a=o=$r()),a.moveTo(d,p),a.arc(0,0,c,h,f),h===g&&f===v||(a.quadraticCurveTo(0,0,m*Rr(g),m*Dr(g)),a.arc(0,0,m,g,v)),a.quadraticCurveTo(0,0,d,p),a.closePath(),o)return a=null,o+""||null}return o.radius=function(t){return arguments.length?(n="function"==typeof t?t:Gr(+t),o):n},o.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Gr(+t),o):i},o.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Gr(+t),o):r},o.source=function(e){return arguments.length?(t=e,o):t},o.target=function(t){return arguments.length?(e=t,o):e},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o};function ia(){}function ra(t,e){var n=new ia;if(t instanceof ia)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,a=t.length;if(null==e)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e(i=t[r],r,t),i)}else if(t)for(var o in t)n.set(o,t[o]);return n}ia.prototype=ra.prototype={constructor:ia,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var aa=ra,oa=function(){var t,e,n,i=[],r=[];function a(n,r,o,s){if(r>=i.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,u,c,h=-1,f=n.length,d=i[r++],p=aa(),m=o();++h<f;)(c=p.get(l=d(u=n[h])+""))?c.push(u):p.set(l,[u]);return p.each((function(t,e){s(m,e,a(t,r,o,s))})),m}return n={object:function(t){return a(t,0,sa,la)},map:function(t){return a(t,0,ua,ca)},entries:function(t){return function t(n,a){if(++a>i.length)return n;var o,s=r[a-1];return null!=e&&a>=i.length?o=n.entries():(o=[],n.each((function(e,n){o.push({key:n,values:t(e,a)})}))),null!=s?o.sort((function(t,e){return s(t.key,e.key)})):o}(a(t,0,ua,ca),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return r[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function sa(){return{}}function la(t,e,n){t[e]=n}function ua(){return aa()}function ca(t,e,n){t.set(e,n)}function ha(){}var fa=aa.prototype;function da(t,e){var n=new ha;if(t instanceof ha)t.each((function(t){n.add(t)}));else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}ha.prototype=da.prototype={constructor:ha,has:fa.has,add:function(t){return this["$"+(t+="")]=t,this},remove:fa.remove,clear:fa.clear,values:fa.keys,size:fa.size,empty:fa.empty,each:fa.each};var pa=da,ma=function(t){var e=[];for(var n in t)e.push(n);return e},ga=function(t){var e=[];for(var n in t)e.push(t[n]);return e},va=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ya=Math.PI/180,ba=180/Math.PI,xa=.96422,_a=1,wa=.82521,Sa=4/29,Ea=6/29,Ma=3*Ea*Ea,Ta=Ea*Ea*Ea;function Ca(t){if(t instanceof Aa)return new Aa(t.l,t.a,t.b,t.opacity);if(t instanceof Ba)return Fa(t);t instanceof tn||(t=Je(t));var e,n,i=Na(t.r),r=Na(t.g),a=Na(t.b),o=Oa((.2225045*i+.7168786*r+.0606169*a)/_a);return i===r&&r===a?e=n=o:(e=Oa((.4360747*i+.3850649*r+.1430804*a)/xa),n=Oa((.0139322*i+.0971045*r+.7141733*a)/wa)),new Aa(116*o-16,500*(e-o),200*(o-n),t.opacity)}function ka(t,e){return new Aa(t,0,0,null==e?1:e)}function Pa(t,e,n,i){return 1===arguments.length?Ca(t):new Aa(t,e,n,null==i?1:i)}function Aa(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Oa(t){return t>Ta?Math.pow(t,1/3):t/Ma+Sa}function La(t){return t>Ea?t*t*t:Ma*(t-Sa)}function Ia(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Na(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ra(t){if(t instanceof Ba)return new Ba(t.h,t.c,t.l,t.opacity);if(t instanceof Aa||(t=Ca(t)),0===t.a&&0===t.b)return new Ba(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ba;return new Ba(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Da(t,e,n,i){return 1===arguments.length?Ra(t):new Ba(n,e,t,null==i?1:i)}function za(t,e,n,i){return 1===arguments.length?Ra(t):new Ba(t,e,n,null==i?1:i)}function Ba(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Fa(t){if(isNaN(t.h))return new Aa(t.l,0,0,t.opacity);var e=t.h*ya;return new Aa(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ie(Aa,Pa,Ne(Re,{brighter:function(t){return new Aa(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Aa(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new tn(Ia(3.1338561*(e=xa*La(e))-1.6168667*(t=_a*La(t))-.4906146*(n=wa*La(n))),Ia(-.9787684*e+1.9161415*t+.033454*n),Ia(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ie(Ba,za,Ne(Re,{brighter:function(t){return new Ba(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ba(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Fa(this).rgb()}}));var ja=-.29227,Va=-.90649,Ua=1.97294,Ha=Ua*Va,Ga=1.78277*Ua,Wa=1.78277*ja- -.14861*Va;function qa(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Qa)return new Qa(t.h,t.s,t.l,t.opacity);t instanceof tn||(t=Je(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Wa*i+Ha*e-Ga*n)/(Wa+Ha-Ga),a=i-r,o=(Ua*(n-r)-ja*a)/Va,s=Math.sqrt(o*o+a*a)/(Ua*r*(1-r)),l=s?Math.atan2(o,a)*ba-120:NaN;return new Qa(l<0?l+360:l,s,r,t.opacity)}(t):new Qa(t,e,n,null==i?1:i)}function Qa(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ie(Qa,qa,Ne(Re,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qa(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qa(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ya,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new tn(255*(e+n*(-.14861*i+1.78277*r)),255*(e+n*(ja*i+Va*r)),255*(e+n*(Ua*i)),this.opacity)}}));var Ya=Array.prototype.slice,Xa=function(t,e){return t-e},$a=function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i},Za=function(t){return function(){return t}},Ja=function(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=Ka(t,e[i]))return n;return 0};function Ka(t,e){for(var n=e[0],i=e[1],r=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],u=l[0],c=l[1],h=t[s],f=h[0],d=h[1];if(to(l,h,e))return 0;c>i!=d>i&&n<(f-u)*(i-c)/(d-c)+u&&(r=-r)}return r}function to(t,e,n){var i,r,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(r=t[i=+(t[0]===e[0])],a=n[i],o=e[i],r<=a&&a<=o||o<=a&&a<=r)}var eo=function(){},no=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],io=function(){var t=1,e=1,n=P,i=s;function r(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Xa);else{var i=g(t),r=i[0],o=i[1];e=k(r,o,e),e=w(Math.floor(r/e)*e,Math.floor(o/e)*e,e)}return e.map((function(e){return a(t,e)}))}function a(n,r){var a=[],s=[];return function(n,i,r){var a,s,l,u,c,h,f=new Array,d=new Array;a=s=-1,u=n[0]>=i,no[u<<1].forEach(p);for(;++a<t-1;)l=u,u=n[a+1]>=i,no[l|u<<1].forEach(p);no[u<<0].forEach(p);for(;++s<e-1;){for(a=-1,u=n[s*t+t]>=i,c=n[s*t]>=i,no[u<<1|c<<2].forEach(p);++a<t-1;)l=u,u=n[s*t+t+a+1]>=i,h=c,c=n[s*t+a+1]>=i,no[l|u<<1|c<<2|h<<3].forEach(p);no[u|c<<3].forEach(p)}a=-1,c=n[s*t]>=i,no[c<<2].forEach(p);for(;++a<t-1;)h=c,c=n[s*t+a+1]>=i,no[c<<2|h<<3].forEach(p);function p(t){var e,n,i=[t[0][0]+a,t[0][1]+s],l=[t[1][0]+a,t[1][1]+s],u=o(i),c=o(l);(e=d[u])?(n=f[c])?(delete d[e.end],delete f[n.start],e===n?(e.ring.push(l),r(e.ring)):f[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(l),d[e.end=c]=e):(e=f[c])?(n=d[u])?(delete f[e.start],delete d[n.end],e===n?(e.ring.push(l),r(e.ring)):f[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(i),f[e.start=u]=e):f[u]=d[c]={start:u,end:c,ring:[i,l]}}no[c<<3].forEach(p)}(n,r,(function(t){i(t,n,r),$a(t)>0?a.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,i=a.length;n<i;++n)if(-1!==Ja((e=a[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:r,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,i,r){n.forEach((function(n){var a,o=n[0],s=n[1],l=0|o,u=0|s,c=i[u*t+l];o>0&&o<t&&l===o&&(a=i[u*t+l-1],n[0]=o+(r-a)/(c-a)-.5),s>0&&s<e&&u===s&&(a=i[(u-1)*t+l],n[1]=s+(r-a)/(c-a)-.5)}))}return r.contour=a,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(i>0&&a>0))throw new Error("invalid size");return t=i,e=a,r},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Za(Ya.call(t)):Za(t),r):n},r.smooth=function(t){return arguments.length?(i=t?s:eo,r):i===s},r};function ro(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=t.data[s+o*i]),s>=n&&(s>=a&&(l-=t.data[s-a+o*i]),e.data[s-n+o*i]=l/Math.min(s+1,i-1+a-s,a))}function ao(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=t.data[o+s*i]),s>=n&&(s>=a&&(l-=t.data[o+(s-a)*i]),e.data[o+(s-n)*i]=l/Math.min(s+1,r-1+a-s,a))}function oo(t){return t[0]}function so(t){return t[1]}function lo(){return 1}var uo=function(){var t=oo,e=so,n=lo,i=960,r=500,a=20,o=2,s=3*a,l=i+2*s>>o,u=r+2*s>>o,c=Za(20);function h(i){var r=new Float32Array(l*u),h=new Float32Array(l*u);i.forEach((function(i,a,c){var h=+t(i,a,c)+s>>o,f=+e(i,a,c)+s>>o,d=+n(i,a,c);h>=0&&h<l&&f>=0&&f<u&&(r[h+f*l]+=d)})),ro({width:l,height:u,data:r},{width:l,height:u,data:h},a>>o),ao({width:l,height:u,data:h},{width:l,height:u,data:r},a>>o),ro({width:l,height:u,data:r},{width:l,height:u,data:h},a>>o),ao({width:l,height:u,data:h},{width:l,height:u,data:r},a>>o),ro({width:l,height:u,data:r},{width:l,height:u,data:h},a>>o),ao({width:l,height:u,data:h},{width:l,height:u,data:r},a>>o);var d=c(r);if(!Array.isArray(d)){var p=N(r);d=k(0,p,d),(d=w(0,Math.floor(p/d)*d,d)).shift()}return io().thresholds(d).size([l,u])(r).map(f)}function f(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function g(){return l=i+2*(s=3*a)>>o,u=r+2*s>>o,h}return h.x=function(e){return arguments.length?(t="function"==typeof e?e:Za(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:Za(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:Za(+t),h):n},h.size=function(t){if(!arguments.length)return[i,r];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return i=e,r=n,g()},h.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),g()},h.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?Za(Ya.call(t)):Za(t),h):c},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),g()},h},co=function(t){return function(){return t}};function ho(t,e,n,i,r,a,o,s,l,u){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=u}function fo(){return!pe.ctrlKey&&!pe.button}function po(){return this.parentNode}function mo(t){return null==t?{x:pe.x,y:pe.y}:t}function go(){return navigator.maxTouchPoints||"ontouchstart"in this}ho.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var vo=function(){var t,e,n,i,r=fo,a=po,o=mo,s=go,l={},u=mt("start","drag","end"),c=0,h=0;function f(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!i&&r.apply(this,arguments)){var o=b("mouse",a.apply(this,arguments),Bn,this,arguments);o&&(ke(pe.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),Oe(pe.view),Pe(),n=!1,t=pe.clientX,e=pe.clientY,o("start"))}}function p(){if(Ae(),!n){var i=pe.clientX-t,r=pe.clientY-e;n=i*i+r*r>h}l.mouse("drag")}function m(){ke(pe.view).on("mousemove.drag mouseup.drag",null),Le(pe.view,n),Ae(),l.mouse("end")}function g(){if(r.apply(this,arguments)){var t,e,n=pe.changedTouches,i=a.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=b(n[t].identifier,i,zn,this,arguments))&&(Pe(),e("start"))}}function v(){var t,e,n=pe.changedTouches,i=n.length;for(t=0;t<i;++t)(e=l[n[t].identifier])&&(Ae(),e("drag"))}function y(){var t,e,n=pe.changedTouches,r=n.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),t=0;t<r;++t)(e=l[n[t].identifier])&&(Pe(),e("end"))}function b(t,e,n,i,r){var a,s,h,d=n(e,t),p=u.copy();if(xe(new ho(f,"beforestart",a,t,c,d[0],d[1],0,0,p),(function(){return null!=(pe.subject=a=o.apply(i,r))&&(s=a.x-d[0]||0,h=a.y-d[1]||0,!0)})))return function o(u){var m,g=d;switch(u){case"start":l[t]=o,m=c++;break;case"end":delete l[t],--c;case"drag":d=n(e,t),m=c}xe(new ho(f,u,a,t,m,d[0]+s,d[1]+h,d[0]-g[0],d[1]-g[1],p),p.apply,p,[u,i,r])}}return f.filter=function(t){return arguments.length?(r="function"==typeof t?t:co(!!t),f):r},f.container=function(t){return arguments.length?(a="function"==typeof t?t:co(t),f):a},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:co(t),f):o},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:co(!!t),f):s},f.on=function(){var t=u.on.apply(u,arguments);return t===u?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f},yo={},bo={},xo=34,_o=10,wo=13;function So(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Eo(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function Mo(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function To(t){var e,n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Mo(-e,6):e>9999?"+"+Mo(e,6):Mo(e,4))+"-"+Mo(t.getUTCMonth()+1,2)+"-"+Mo(t.getUTCDate(),2)+(a?"T"+Mo(n,2)+":"+Mo(i,2)+":"+Mo(r,2)+"."+Mo(a,3)+"Z":r?"T"+Mo(n,2)+":"+Mo(i,2)+":"+Mo(r,2)+"Z":i||n?"T"+Mo(n,2)+":"+Mo(i,2)+"Z":"")}var Co=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],a=t.length,o=0,s=0,l=a<=0,u=!1;function c(){if(l)return bo;if(u)return u=!1,yo;var e,i,r=o;if(t.charCodeAt(r)===xo){for(;o++<a&&t.charCodeAt(o)!==xo||t.charCodeAt(++o)===xo;);return(e=o)>=a?l=!0:(i=t.charCodeAt(o++))===_o?u=!0:i===wo&&(u=!0,t.charCodeAt(o)===_o&&++o),t.slice(r+1,e-1).replace(/""/g,'"')}for(;o<a;){if((i=t.charCodeAt(e=o++))===_o)u=!0;else if(i===wo)u=!0,t.charCodeAt(o)===_o&&++o;else if(i!==n)continue;return t.slice(r,e)}return l=!0,t.slice(r,a)}for(t.charCodeAt(a-1)===_o&&--a,t.charCodeAt(a-1)===wo&&--a;(i=c())!==bo;){for(var h=[];i!==yo&&i!==bo;)h.push(i),i=c();e&&null==(h=e(h,s++))||r.push(h)}return r}function r(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?To(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,a=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=So(t);return function(i,r){return e(n(i),r,t)}}(t,e):So(t)}));return a.columns=r||[],a},parseRows:i,format:function(e,n){return null==n&&(n=Eo(e)),[n.map(o).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Eo(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}},ko=Co(","),Po=ko.parse,Ao=ko.parseRows,Oo=ko.format,Lo=ko.formatBody,Io=ko.formatRows,No=ko.formatRow,Ro=ko.formatValue,Do=Co("\t"),zo=Do.parse,Bo=Do.parseRows,Fo=Do.format,jo=Do.formatBody,Vo=Do.formatRows,Uo=Do.formatRow,Ho=Do.formatValue;function Go(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Wo&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t}var Wo=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function qo(t){return+t}function Qo(t){return t*t}function Yo(t){return t*(2-t)}function Xo(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var $o=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Zo=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Jo=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Ko=Math.PI,ts=Ko/2;function es(t){return 1-Math.cos(t*ts)}function ns(t){return Math.sin(t*ts)}function is(t){return(1-Math.cos(Ko*t))/2}function rs(t){return Math.pow(2,10*t-10)}function as(t){return 1-Math.pow(2,-10*t)}function os(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function ss(t){return 1-Math.sqrt(1-t*t)}function ls(t){return Math.sqrt(1- --t*t)}function us(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var cs=4/11,hs=6/11,fs=8/11,ds=.75,ps=9/11,ms=10/11,gs=.9375,vs=21/22,ys=63/64,bs=1/cs/cs;function xs(t){return 1-_s(1-t)}function _s(t){return(t=+t)<cs?bs*t*t:t<fs?bs*(t-=hs)*t+ds:t<ms?bs*(t-=ps)*t+gs:bs*(t-=vs)*t+ys}function ws(t){return((t*=2)<=1?1-_s(1-t):_s(t-1)+1)/2}var Ss=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),Es=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),Ms=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Ts=2*Math.PI,Cs=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Ts);function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*Ts)},r.period=function(n){return t(e,n)},r}(1,.3),ks=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Ts);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*Ts)},r.period=function(n){return t(e,n)},r}(1,.3),Ps=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Ts);function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*Ts)},r.period=function(n){return t(e,n)},r}(1,.3);function As(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var Os=function(t,e){return fetch(t,e).then(As)};function Ls(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var Is=function(t,e){return fetch(t,e).then(Ls)};function Ns(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var Rs=function(t,e){return fetch(t,e).then(Ns)};function Ds(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),Rs(e,n).then((function(e){return t(e,i)}))}}function zs(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=Co(t);return Rs(e,n).then((function(t){return r.parse(t,i)}))}var Bs=Ds(Po),Fs=Ds(zo),js=function(t,e){return new Promise((function(n,i){var r=new Image;for(var a in e)r[a]=e[a];r.onerror=i,r.onload=function(){n(r)},r.src=t}))};function Vs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var Us=function(t,e){return fetch(t,e).then(Vs)};function Hs(t){return function(e,n){return Rs(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var Gs=Hs("application/xml"),Ws=Hs("text/html"),qs=Hs("image/svg+xml"),Qs=function(t,e){var n;function i(){var i,r,a=n.length,o=0,s=0;for(i=0;i<a;++i)o+=(r=n[i]).x,s+=r.y;for(o=o/a-t,s=s/a-e,i=0;i<a;++i)(r=n[i]).x-=o,r.y-=s}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},Ys=function(t){return function(){return t}},Xs=function(){return 1e-6*(Math.random()-.5)};function $s(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a,o,s,l,u,c,h,f,d=t._root,p={data:i},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(a=(m+v)/2))?m=a:v=a,(c=n>=(o=(g+y)/2))?g=o:y=o,r=d,!(d=d[h=c<<1|u]))return r[h]=p,t;if(s=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===s&&n===l)return p.next=d,r?r[h]=p:t._root=p,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(u=e>=(a=(m+v)/2))?m=a:v=a,(c=n>=(o=(g+y)/2))?g=o:y=o}while((h=c<<1|u)==(f=(l>=o)<<1|s>=a));return r[f]=d,r[h]=p,t}var Zs=function(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r};function Js(t){return t[0]}function Ks(t){return t[1]}function tl(t,e,n){var i=new el(null==e?Js:e,null==n?Ks:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function el(t,e,n,i,r,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function nl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var il=tl.prototype=el.prototype;function rl(t){return t.x+t.vx}function al(t){return t.y+t.vy}il.copy=function(){var t,e,n=new el(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=nl(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=nl(e));return n},il.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return $s(this.cover(e,n),e,n,t)},il.addAll=function(t){var e,n,i,r,a=t.length,o=new Array(a),s=new Array(a),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(o[n]=i,s[n]=r,i<l&&(l=i),i>c&&(c=i),r<u&&(u=r),r>h&&(h=r));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<a;++n)$s(this,o[n],s[n],t[n]);return this},il.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{for(var o,s,l=r-n,u=this._root;n>t||t>=r||i>e||e>=a;)switch(s=(e<i)<<1|t<n,(o=new Array(4))[s]=u,u=o,l*=2,s){case 0:r=n+l,a=i+l;break;case 1:n=r-l,a=i+l;break;case 2:r=n+l,i=a-l;break;case 3:n=r-l,i=a-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this},il.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},il.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},il.find=function(t,e,n){var i,r,a,o,s,l,u,c=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new Zs(m,c,h,f,d)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>f||(a=l.y0)>d||(o=l.x1)<c||(s=l.y1)<h))if(m.length){var g=(r+o)/2,v=(a+s)/2;p.push(new Zs(m[3],g,v,o,s),new Zs(m[2],r,v,g,s),new Zs(m[1],g,a,o,v),new Zs(m[0],r,a,g,v)),(u=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),x=y*y+b*b;if(x<n){var _=Math.sqrt(n=x);c=t-_,h=e-_,f=t+_,d=e+_,i=m.data}}return i},il.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,a,o,s,l,u,c,h,f,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((u=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(l=(m+v)/2))?m=l:v=l,e=d,!(d=d[h=c<<1|u]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},il.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},il.root=function(){return this._root},il.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},il.visit=function(t){var e,n,i,r,a,o,s=[],l=this._root;for(l&&s.push(new Zs(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,a=e.x1,o=e.y1)&&l.length){var u=(i+a)/2,c=(r+o)/2;(n=l[3])&&s.push(new Zs(n,u,c,a,o)),(n=l[2])&&s.push(new Zs(n,i,c,u,o)),(n=l[1])&&s.push(new Zs(n,u,r,a,c)),(n=l[0])&&s.push(new Zs(n,i,r,u,c))}return this},il.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Zs(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var a,o=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(o+l)/2,h=(s+u)/2;(a=r[0])&&n.push(new Zs(a,o,s,c,h)),(a=r[1])&&n.push(new Zs(a,c,s,l,h)),(a=r[2])&&n.push(new Zs(a,o,h,c,u)),(a=r[3])&&n.push(new Zs(a,c,h,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},il.x=function(t){return arguments.length?(this._x=t,this):this._x},il.y=function(t){return arguments.length?(this._y=t,this):this._y};var ol=function(t){var e,n,i=1,r=1;function a(){for(var t,a,s,l,u,c,h,f=e.length,d=0;d<r;++d)for(a=tl(e,rl,al).visitAfter(o),t=0;t<f;++t)s=e[t],c=n[s.index],h=c*c,l=s.x+s.vx,u=s.y+s.vy,a.visit(p);function p(t,e,n,r,a){var o=t.data,f=t.r,d=c+f;if(!o)return e>l+d||r<l-d||n>u+d||a<u-d;if(o.index>s.index){var p=l-o.x-o.vx,m=u-o.y-o.vy,g=p*p+m*m;g<d*d&&(0===p&&(g+=(p=Xs())*p),0===m&&(g+=(m=Xs())*m),g=(d-(g=Math.sqrt(g)))/g*i,s.vx+=(p*=g)*(d=(f*=f)/(h+f)),s.vy+=(m*=g)*d,o.vx-=p*(d=1-d),o.vy-=m*d)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var i,r,a=e.length;for(n=new Array(a),i=0;i<a;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=Ys(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(r=+t,a):r},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Ys(+e),s(),a):t},a};function sl(t){return t.index}function ll(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var ul=function(t){var e,n,i,r,a,o=sl,s=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},l=Ys(30),u=1;function c(i){for(var r=0,o=t.length;r<u;++r)for(var s,l,c,h,f,d,p,m=0;m<o;++m)l=(s=t[m]).source,h=(c=s.target).x+c.vx-l.x-l.vx||Xs(),f=c.y+c.vy-l.y-l.vy||Xs(),h*=d=((d=Math.sqrt(h*h+f*f))-n[m])/d*i*e[m],f*=d,c.vx-=h*(p=a[m]),c.vy-=f*p,l.vx+=h*(p=1-p),l.vy+=f*p}function h(){if(i){var s,l,u=i.length,c=t.length,h=aa(i,o);for(s=0,r=new Array(u);s<c;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=ll(h,l.source)),"object"!=typeof l.target&&(l.target=ll(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)l=t[s],a[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(c),f(),n=new Array(c),d()}}function f(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+s(t[n],n,t)}function d(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){i=t,h()},c.links=function(e){return arguments.length?(t=e,h(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(u=+t,c):u},c.strength=function(t){return arguments.length?(s="function"==typeof t?t:Ys(+t),f(),c):s},c.distance=function(t){return arguments.length?(l="function"==typeof t?t:Ys(+t),d(),c):l},c};function cl(t){return t.x}function hl(t){return t.y}var fl=10,dl=Math.PI*(3-Math.sqrt(5)),pl=function(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,o=.6,s=aa(),l=Zn(c),u=mt("tick","end");function c(){h(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function h(i){var l,u,c=t.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(a-n)*r,s.each((function(t){t(n)})),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=fl*Math.sqrt(n),a=n*dl;e.x=r*Math.cos(a),e.y=r*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,i){var r,a,o,s,l,u=0,c=t.length;for(null==i?i=1/0:i*=i,u=0;u<c;++u)(o=(r=e-(s=t[u]).x)*r+(a=n-s.y)*a)<i&&(l=s,i=o);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}},ml=function(){var t,e,n,i,r=Ys(-30),a=1,o=1/0,s=.81;function l(i){var r,a=t.length,o=tl(t,cl,hl).visitAfter(c);for(n=i,r=0;r<a;++r)e=t[r],o.visit(h)}function u(){if(t){var e,n,a=t.length;for(i=new Array(a),e=0;e<a;++e)n=t[e],i[n.index]=+r(n,e,t)}}function c(t){var e,n,r,a,o,s=0,l=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,a+=n*e.y);t.x=r/l,t.y=a/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,r,l,u){if(!t.value)return!0;var c=t.x-e.x,h=t.y-e.y,f=u-r,d=c*c+h*h;if(f*f/s<d)return d<o&&(0===c&&(d+=(c=Xs())*c),0===h&&(d+=(h=Xs())*h),d<a&&(d=Math.sqrt(a*d)),e.vx+=c*t.value*n/d,e.vy+=h*t.value*n/d),!0;if(!(t.length||d>=o)){(t.data!==e||t.next)&&(0===c&&(d+=(c=Xs())*c),0===h&&(d+=(h=Xs())*h),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(f=i[t.data.index]*n/d,e.vx+=c*f,e.vy+=h*f)}while(t=t.next)}}return l.initialize=function(e){t=e,u()},l.strength=function(t){return arguments.length?(r="function"==typeof t?t:Ys(+t),u(),l):r},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l},gl=function(t,e,n){var i,r,a,o=Ys(.1);function s(t){for(var o=0,s=i.length;o<s;++o){var l=i[o],u=l.x-e||1e-6,c=l.y-n||1e-6,h=Math.sqrt(u*u+c*c),f=(a[o]-h)*r[o]*t/h;l.vx+=u*f,l.vy+=c*f}}function l(){if(i){var e,n=i.length;for(r=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(i[e],e,i),r[e]=isNaN(a[e])?0:+o(i[e],e,i)}}return"function"!=typeof t&&(t=Ys(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){i=t,l()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:Ys(+t),l(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Ys(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},vl=function(t){var e,n,i,r=Ys(.1);function a(t){for(var r,a=0,o=e.length;a<o;++a)(r=e[a]).vx+=(i[a]-r.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),i=new Array(o),a=0;a<o;++a)n[a]=isNaN(i[a]=+t(e[a],a,e))?0:+r(e[a],a,e)}}return"function"!=typeof t&&(t=Ys(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(r="function"==typeof t?t:Ys(+t),o(),a):r},a.x=function(e){return arguments.length?(t="function"==typeof e?e:Ys(+e),o(),a):t},a},yl=function(t){var e,n,i,r=Ys(.1);function a(t){for(var r,a=0,o=e.length;a<o;++a)(r=e[a]).vy+=(i[a]-r.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),i=new Array(o),a=0;a<o;++a)n[a]=isNaN(i[a]=+t(e[a],a,e))?0:+r(e[a],a,e)}}return"function"!=typeof t&&(t=Ys(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(r="function"==typeof t?t:Ys(+t),o(),a):r},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Ys(+e),o(),a):t},a},bl=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},xl=function(t){return(t=bl(Math.abs(t)))?t[1]:NaN},_l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wl(t){if(!(e=_l.exec(t)))throw new Error("invalid format: "+t);var e;return new Sl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Sl(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}wl.prototype=Sl.prototype,Sl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var El,Ml,Tl,Cl,kl=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(r>0){if(!+t[i])break t;r=0}}return r>0?t.slice(0,r)+t.slice(e+1):t},Pl=function(t,e){var n=bl(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},Al={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Pl(100*t,e)},r:Pl,s:function(t,e){var n=bl(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(El=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+bl(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ol=function(t){return t},Ll=Array.prototype.map,Il=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],Nl=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Ol:(e=Ll.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,a=[],o=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Ol:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ll.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=wl(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Al[y]||(void 0===g&&(g=12),v=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===f?r:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?a:/[%p]/.test(y)?l:"",_=Al[y],w=/[defgprs%]/.test(y);function S(t){var r,a,l,f=b,S=x;if("c"===y)S=_(t)+S,t="";else{var E=(t=+t)<0;if(t=isNaN(t)?c:_(Math.abs(t),g),v&&(t=kl(t)),E&&0==+t&&(E=!1),f=(E?"("===h?h:u:"-"===h||"("===h?"":h)+f,S=("s"===y?Il[8+El/3]:"")+S+(E&&"("===h?")":""),w)for(r=-1,a=t.length;++r<a;)if(48>(l=t.charCodeAt(r))||l>57){S=(46===l?o+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}m&&!d&&(t=i(t,1/0));var M=f.length+t.length+S.length,T=M<p?new Array(p-M+1).join(e):"";switch(m&&d&&(t=i(T+t,T.length?p-S.length:1/0),T=""),n){case"<":t=f+t+S+T;break;case"=":t=f+T+t+S;break;case"^":t=T.slice(0,M=T.length>>1)+f+t+S+T.slice(M);break;default:t=T+f+t+S}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=wl(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(xl(e)/3))),r=Math.pow(10,-i),a=Il[8+i/3];return function(t){return n(r*t)+a}}}};function Rl(t){return Ml=Nl(t),Tl=Ml.format,Cl=Ml.formatPrefix,Ml}Rl({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Dl=function(t){return Math.max(0,-xl(Math.abs(t)))},zl=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xl(e)/3)))-xl(Math.abs(t)))},Bl=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xl(e)-xl(t))+1},Fl=function(){return new jl};function jl(){this.reset()}jl.prototype={constructor:jl,reset:function(){this.s=this.t=0},add:function(t){Ul(Vl,t,this.t),Ul(this,Vl.s,this.s),this.s?this.t+=Vl.t:this.s=Vl.t},valueOf:function(){return this.s}};var Vl=new jl;function Ul(t,e,n){var i=t.s=e+n,r=i-e,a=i-r;t.t=e-a+(n-r)}var Hl=1e-6,Gl=1e-12,Wl=Math.PI,ql=Wl/2,Ql=Wl/4,Yl=2*Wl,Xl=180/Wl,$l=Wl/180,Zl=Math.abs,Jl=Math.atan,Kl=Math.atan2,tu=Math.cos,eu=Math.ceil,nu=Math.exp,iu=(Math.floor,Math.log),ru=Math.pow,au=Math.sin,ou=Math.sign||function(t){return t>0?1:t<0?-1:0},su=Math.sqrt,lu=Math.tan;function uu(t){return t>1?0:t<-1?Wl:Math.acos(t)}function cu(t){return t>1?ql:t<-1?-ql:Math.asin(t)}function hu(t){return(t=au(t/2))*t}function fu(){}function du(t,e){t&&mu.hasOwnProperty(t.type)&&mu[t.type](t,e)}var pu={Feature:function(t,e){du(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)du(n[i].geometry,e)}},mu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){gu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)gu(n[i],e,0)},Polygon:function(t,e){vu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)vu(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)du(n[i],e)}};function gu(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function vu(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)gu(t[n],e,1);e.polygonEnd()}var yu,bu,xu,_u,wu,Su=function(t,e){t&&pu.hasOwnProperty(t.type)?pu[t.type](t,e):du(t,e)},Eu=Fl(),Mu=Fl(),Tu={point:fu,lineStart:fu,lineEnd:fu,polygonStart:function(){Eu.reset(),Tu.lineStart=Cu,Tu.lineEnd=ku},polygonEnd:function(){var t=+Eu;Mu.add(t<0?Yl+t:t),this.lineStart=this.lineEnd=this.point=fu},sphere:function(){Mu.add(Yl)}};function Cu(){Tu.point=Pu}function ku(){Au(yu,bu)}function Pu(t,e){Tu.point=Au,yu=t,bu=e,xu=t*=$l,_u=tu(e=(e*=$l)/2+Ql),wu=au(e)}function Au(t,e){var n=(t*=$l)-xu,i=n>=0?1:-1,r=i*n,a=tu(e=(e*=$l)/2+Ql),o=au(e),s=wu*o,l=_u*a+s*tu(r),u=s*i*au(r);Eu.add(Kl(u,l)),xu=t,_u=a,wu=o}var Ou=function(t){return Mu.reset(),Su(t,Tu),2*Mu};function Lu(t){return[Kl(t[1],t[0]),cu(t[2])]}function Iu(t){var e=t[0],n=t[1],i=tu(n);return[i*tu(e),i*au(e),au(n)]}function Nu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ru(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Du(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function zu(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Bu(t){var e=su(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Fu,ju,Vu,Uu,Hu,Gu,Wu,qu,Qu,Yu,Xu=Fl(),$u={point:Zu,lineStart:Ku,lineEnd:tc,polygonStart:function(){$u.point=ec,$u.lineStart=nc,$u.lineEnd=ic,Xu.reset(),Tu.polygonStart()},polygonEnd:function(){Tu.polygonEnd(),$u.point=Zu,$u.lineStart=Ku,$u.lineEnd=tc,Eu<0?(Fu=-(Vu=180),ju=-(Uu=90)):Xu>Hl?Uu=90:Xu<-Hl&&(ju=-90),Yu[0]=Fu,Yu[1]=Vu},sphere:function(){Fu=-(Vu=180),ju=-(Uu=90)}};function Zu(t,e){Qu.push(Yu=[Fu=t,Vu=t]),e<ju&&(ju=e),e>Uu&&(Uu=e)}function Ju(t,e){var n=Iu([t*$l,e*$l]);if(qu){var i=Ru(qu,n),r=Ru([i[1],-i[0],0],i);Bu(r),r=Lu(r);var a,o=t-Hu,s=o>0?1:-1,l=r[0]*Xl*s,u=Zl(o)>180;u^(s*Hu<l&&l<s*t)?(a=r[1]*Xl)>Uu&&(Uu=a):u^(s*Hu<(l=(l+360)%360-180)&&l<s*t)?(a=-r[1]*Xl)<ju&&(ju=a):(e<ju&&(ju=e),e>Uu&&(Uu=e)),u?t<Hu?rc(Fu,t)>rc(Fu,Vu)&&(Vu=t):rc(t,Vu)>rc(Fu,Vu)&&(Fu=t):Vu>=Fu?(t<Fu&&(Fu=t),t>Vu&&(Vu=t)):t>Hu?rc(Fu,t)>rc(Fu,Vu)&&(Vu=t):rc(t,Vu)>rc(Fu,Vu)&&(Fu=t)}else Qu.push(Yu=[Fu=t,Vu=t]);e<ju&&(ju=e),e>Uu&&(Uu=e),qu=n,Hu=t}function Ku(){$u.point=Ju}function tc(){Yu[0]=Fu,Yu[1]=Vu,$u.point=Zu,qu=null}function ec(t,e){if(qu){var n=t-Hu;Xu.add(Zl(n)>180?n+(n>0?360:-360):n)}else Gu=t,Wu=e;Tu.point(t,e),Ju(t,e)}function nc(){Tu.lineStart()}function ic(){ec(Gu,Wu),Tu.lineEnd(),Zl(Xu)>Hl&&(Fu=-(Vu=180)),Yu[0]=Fu,Yu[1]=Vu,qu=null}function rc(t,e){return(e-=t)<0?e+360:e}function ac(t,e){return t[0]-e[0]}function oc(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var sc,lc,uc,cc,hc,fc,dc,pc,mc,gc,vc,yc,bc,xc,_c,wc,Sc=function(t){var e,n,i,r,a,o,s;if(Uu=Vu=-(Fu=ju=1/0),Qu=[],Su(t,$u),n=Qu.length){for(Qu.sort(ac),e=1,a=[i=Qu[0]];e<n;++e)oc(i,(r=Qu[e])[0])||oc(i,r[1])?(rc(i[0],r[1])>rc(i[0],i[1])&&(i[1]=r[1]),rc(r[0],i[1])>rc(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,e=0,i=a[n=a.length-1];e<=n;i=r,++e)r=a[e],(s=rc(i[1],r[0]))>o&&(o=s,Fu=r[0],Vu=i[1])}return Qu=Yu=null,Fu===1/0||ju===1/0?[[NaN,NaN],[NaN,NaN]]:[[Fu,ju],[Vu,Uu]]},Ec={sphere:fu,point:Mc,lineStart:Cc,lineEnd:Ac,polygonStart:function(){Ec.lineStart=Oc,Ec.lineEnd=Lc},polygonEnd:function(){Ec.lineStart=Cc,Ec.lineEnd=Ac}};function Mc(t,e){t*=$l;var n=tu(e*=$l);Tc(n*tu(t),n*au(t),au(e))}function Tc(t,e,n){++sc,uc+=(t-uc)/sc,cc+=(e-cc)/sc,hc+=(n-hc)/sc}function Cc(){Ec.point=kc}function kc(t,e){t*=$l;var n=tu(e*=$l);xc=n*tu(t),_c=n*au(t),wc=au(e),Ec.point=Pc,Tc(xc,_c,wc)}function Pc(t,e){t*=$l;var n=tu(e*=$l),i=n*tu(t),r=n*au(t),a=au(e),o=Kl(su((o=_c*a-wc*r)*o+(o=wc*i-xc*a)*o+(o=xc*r-_c*i)*o),xc*i+_c*r+wc*a);lc+=o,fc+=o*(xc+(xc=i)),dc+=o*(_c+(_c=r)),pc+=o*(wc+(wc=a)),Tc(xc,_c,wc)}function Ac(){Ec.point=Mc}function Oc(){Ec.point=Ic}function Lc(){Nc(yc,bc),Ec.point=Mc}function Ic(t,e){yc=t,bc=e,t*=$l,e*=$l,Ec.point=Nc;var n=tu(e);xc=n*tu(t),_c=n*au(t),wc=au(e),Tc(xc,_c,wc)}function Nc(t,e){t*=$l;var n=tu(e*=$l),i=n*tu(t),r=n*au(t),a=au(e),o=_c*a-wc*r,s=wc*i-xc*a,l=xc*r-_c*i,u=su(o*o+s*s+l*l),c=cu(u),h=u&&-c/u;mc+=h*o,gc+=h*s,vc+=h*l,lc+=c,fc+=c*(xc+(xc=i)),dc+=c*(_c+(_c=r)),pc+=c*(wc+(wc=a)),Tc(xc,_c,wc)}var Rc=function(t){sc=lc=uc=cc=hc=fc=dc=pc=mc=gc=vc=0,Su(t,Ec);var e=mc,n=gc,i=vc,r=e*e+n*n+i*i;return r<Gl&&(e=fc,n=dc,i=pc,lc<Hl&&(e=uc,n=cc,i=hc),(r=e*e+n*n+i*i)<Gl)?[NaN,NaN]:[Kl(n,e)*Xl,cu(i/su(r))*Xl]},Dc=function(t){return function(){return t}},zc=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};function Bc(t,e){return[Zl(t)>Wl?t+Math.round(-t/Yl)*Yl:t,e]}function Fc(t,e,n){return(t%=Yl)?e||n?zc(Vc(t),Uc(e,n)):Vc(t):e||n?Uc(e,n):Bc}function jc(t){return function(e,n){return[(e+=t)>Wl?e-Yl:e<-Wl?e+Yl:e,n]}}function Vc(t){var e=jc(t);return e.invert=jc(-t),e}function Uc(t,e){var n=tu(t),i=au(t),r=tu(e),a=au(e);function o(t,e){var o=tu(e),s=tu(t)*o,l=au(t)*o,u=au(e),c=u*n+s*i;return[Kl(l*r-c*a,s*n-u*i),cu(c*r+l*a)]}return o.invert=function(t,e){var o=tu(e),s=tu(t)*o,l=au(t)*o,u=au(e),c=u*r-l*a;return[Kl(l*r+u*a,s*n+c*i),cu(c*n-s*i)]},o}Bc.invert=Bc;var Hc=function(t){function e(e){return(e=t(e[0]*$l,e[1]*$l))[0]*=Xl,e[1]*=Xl,e}return t=Fc(t[0]*$l,t[1]*$l,t.length>2?t[2]*$l:0),e.invert=function(e){return(e=t.invert(e[0]*$l,e[1]*$l))[0]*=Xl,e[1]*=Xl,e},e};function Gc(t,e,n,i,r,a){if(n){var o=tu(e),s=au(e),l=i*n;null==r?(r=e+i*Yl,a=e-l/2):(r=Wc(o,r),a=Wc(o,a),(i>0?r<a:r>a)&&(r+=i*Yl));for(var u,c=r;i>0?c>a:c<a;c-=l)u=Lu([o,-s*tu(c),-s*au(c)]),t.point(u[0],u[1])}}function Wc(t,e){(e=Iu(e))[0]-=t,Bu(e);var n=uu(-e[1]);return((-e[2]<0?-n:n)+Yl-Hl)%Yl}var qc=function(){var t,e,n=Dc([0,0]),i=Dc(90),r=Dc(6),a={point:function(n,i){t.push(n=e(n,i)),n[0]*=Xl,n[1]*=Xl}};function o(){var o=n.apply(this,arguments),s=i.apply(this,arguments)*$l,l=r.apply(this,arguments)*$l;return t=[],e=Fc(-o[0]*$l,-o[1]*$l,0).invert,Gc(a,s,l,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n="function"==typeof t?t:Dc([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(i="function"==typeof t?t:Dc(+t),o):i},o.precision=function(t){return arguments.length?(r="function"==typeof t?t:Dc(+t),o):r},o},Qc=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:fu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Yc=function(t,e){return Zl(t[0]-e[0])<Hl&&Zl(t[1]-e[1])<Hl};function Xc(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var $c=function(t,e,n,i,r){var a,o,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(Yc(i,o)){for(r.lineStart(),a=0;a<e;++a)r.point((i=t[a])[0],i[1]);r.lineEnd()}else s.push(n=new Xc(i,t,null,!0)),l.push(n.o=new Xc(i,null,n,!1)),s.push(n=new Xc(o,t,null,!1)),l.push(n.o=new Xc(o,null,n,!0))}})),s.length){for(l.sort(e),Zc(s),Zc(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var u,c,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,o=u.length;a<o;++a)r.point((c=u[a])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(u=f.p.z,a=u.length-1;a>=0;--a)r.point((c=u[a])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,d=!d}while(!f.v);r.lineEnd()}}};function Zc(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}var Jc=Fl();function Kc(t){return Zl(t[0])<=Wl?t[0]:ou(t[0])*((Zl(t[0])+Wl)%Yl-Wl)}var th=function(t,e){var n=Kc(e),i=e[1],r=au(i),a=[au(n),-tu(n),0],o=0,s=0;Jc.reset(),1===r?i=ql+Hl:-1===r&&(i=-ql-Hl);for(var l=0,u=t.length;l<u;++l)if(h=(c=t[l]).length)for(var c,h,f=c[h-1],d=Kc(f),p=f[1]/2+Ql,m=au(p),g=tu(p),v=0;v<h;++v,d=b,m=_,g=w,f=y){var y=c[v],b=Kc(y),x=y[1]/2+Ql,_=au(x),w=tu(x),S=b-d,E=S>=0?1:-1,M=E*S,T=M>Wl,C=m*_;if(Jc.add(Kl(C*E*au(M),g*w+C*tu(M))),o+=T?S+E*Yl:S,T^d>=n^b>=n){var k=Ru(Iu(f),Iu(y));Bu(k);var P=Ru(a,k);Bu(P);var A=(T^S>=0?-1:1)*cu(P[2]);(i>A||i===A&&(k[0]||k[1]))&&(s+=T^S>=0?1:-1)}}return(o<-Hl||o<Hl&&Jc<-Hl)^1&s},eh=function(t,e,n,i){return function(r){var a,o,s,l=e(r),u=Qc(),c=e(u),h=!1,f={point:d,lineStart:m,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=b,o=[],a=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=g,o=z(o);var t=th(a,i);o.length?(h||(r.polygonStart(),h=!0),$c(o,ih,t,n,r)):t&&(h||(r.polygonStart(),h=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),o=a=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(e,n){t(e,n)&&r.point(e,n)}function p(t,e){l.point(t,e)}function m(){f.point=p,l.lineStart()}function g(){f.point=d,l.lineEnd()}function v(t,e){s.push([t,e]),c.point(t,e)}function y(){c.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),c.lineEnd();var t,e,n,i,l=c.clean(),f=u.result(),d=f.length;if(s.pop(),a.push(s),s=null,d)if(1&l){if((e=(n=f[0]).length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else d>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter(nh))}return f}};function nh(t){return t.length>1}function ih(t,e){return((t=t.x)[0]<0?t[1]-ql-Hl:ql-t[1])-((e=e.x)[0]<0?e[1]-ql-Hl:ql-e[1])}var rh=eh((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Wl:-Wl,l=Zl(a-n);Zl(l-Wl)<Hl?(t.point(n,i=(i+o)/2>0?ql:-ql),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&l>=Wl&&(Zl(n-r)<Hl&&(n-=r*Hl),Zl(a-s)<Hl&&(a-=s*Hl),i=function(t,e,n,i){var r,a,o=au(t-n);return Zl(o)>Hl?Jl((au(e)*(a=tu(i))*au(n)-au(i)*(r=tu(e))*au(t))/(r*a*o)):(e+i)/2}(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*ql,i.point(-Wl,r),i.point(0,r),i.point(Wl,r),i.point(Wl,0),i.point(Wl,-r),i.point(0,-r),i.point(-Wl,-r),i.point(-Wl,0),i.point(-Wl,r);else if(Zl(t[0]-e[0])>Hl){var a=t[0]<e[0]?Wl:-Wl;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}),[-Wl,-ql]);var ah=function(t){var e=tu(t),n=6*$l,i=e>0,r=Zl(e)>Hl;function a(t,n){return tu(t)*tu(n)>e}function o(t,n,i){var r=[1,0,0],a=Ru(Iu(t),Iu(n)),o=Nu(a,a),s=a[0],l=o-s*s;if(!l)return!i&&t;var u=e*o/l,c=-e*s/l,h=Ru(r,a),f=zu(r,u);Du(f,zu(a,c));var d=h,p=Nu(f,d),m=Nu(d,d),g=p*p-m*(Nu(f,f)-1);if(!(g<0)){var v=su(g),y=zu(d,(-p-v)/m);if(Du(y,f),y=Lu(y),!i)return y;var b,x=t[0],_=n[0],w=t[1],S=n[1];_<x&&(b=x,x=_,_=b);var E=_-x,M=Zl(E-Wl)<Hl;if(!M&&S<w&&(b=w,w=S,S=b),M||E<Hl?M?w+S>0^y[1]<(Zl(y[0]-x)<Hl?w:S):w<=y[1]&&y[1]<=S:E>Wl^(x<=y[0]&&y[0]<=_)){var T=zu(d,(-p+v)/m);return Du(T,f),[y,Lu(T)]}}}function s(e,n){var r=i?t:Wl-t,a=0;return e<-r?a|=1:e>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}return eh(a,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,p=[h,f],m=a(h,f),g=i?m?0:s(h,f):m?s(h+(h<0?Wl:-Wl),f):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(!(d=o(e,p))||Yc(e,d)||Yc(p,d))&&(p[0]+=Hl,p[1]+=Hl,m=a(p[0],p[1])),m!==l)c=0,m?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(r&&e&&i^m){var v;g&n||!(v=o(p,e,!0))||(c=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&Yc(e,p)||t.point(p[0],p[1]),e=p,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(e,i,r,a){Gc(a,t,n,r,e,i)}),i?[0,-t]:[-Wl,t-Wl])},oh=function(t,e,n,i,r,a){var o,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,f=e[1]-l;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<u)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>u&&(u=o)}if(o=r-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>u&&(u=o)}else if(h>0){if(o<u)return;o<c&&(c=o)}if(o=i-l,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>u&&(u=o)}if(o=a-l,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<c&&(c=o)}return u>0&&(t[0]=s+u*h,t[1]=l+u*f),c<1&&(e[0]=s+c*h,e[1]=l+c*f),!0}}}}},sh=1e9,lh=-sh;function uh(t,e,n,i){function r(r,a){return t<=r&&r<=n&&e<=a&&a<=i}function a(r,a,s,u){var c=0,h=0;if(null==r||(c=o(r,s))!==(h=o(a,s))||l(r,a)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+s+4)%4)!==h);else u.point(a[0],a[1])}function o(i,r){return Zl(i[0]-t)<Hl?r>0?0:3:Zl(i[0]-n)<Hl?r>0?2:1:Zl(i[1]-e)<Hl?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,u,c,h,f,d,p,m,g,v,y,b=o,x=Qc(),_={point:w,lineStart:function(){_.point=S,u&&u.push(c=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(S(h,f),d&&g&&x.rejoin(),l.push(x.result()));_.point=w,g&&b.lineEnd()},polygonStart:function(){b=x,l=[],u=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var a,o,s=u[n],l=1,c=s.length,h=s[0],f=h[0],d=h[1];l<c;++l)a=f,o=d,h=s[l],f=h[0],d=h[1],o<=i?d>i&&(f-a)*(i-o)>(d-o)*(t-a)&&++e:d<=i&&(f-a)*(i-o)<(d-o)*(t-a)&&--e;return e}(),n=y&&e,r=(l=z(l)).length;(n||r)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),r&&$c(l,s,e,a,o),o.polygonEnd());b=o,l=u=c=null}};function w(t,e){r(t,e)&&b.point(t,e)}function S(a,o){var s=r(a,o);if(u&&c.push([a,o]),v)h=a,f=o,d=s,v=!1,s&&(b.lineStart(),b.point(a,o));else if(s&&g)b.point(a,o);else{var l=[p=Math.max(lh,Math.min(sh,p)),m=Math.max(lh,Math.min(sh,m))],x=[a=Math.max(lh,Math.min(sh,a)),o=Math.max(lh,Math.min(sh,o))];oh(l,x,t,e,n,i)?(g||(b.lineStart(),b.point(l[0],l[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(a,o),y=!1)}p=a,m=o,g=s}return _}}var ch,hh,fh,dh=function(){var t,e,n,i=0,r=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=uh(i,r,a,o)(e=n)},extent:function(s){return arguments.length?(i=+s[0][0],r=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[i,r],[a,o]]}}},ph=Fl(),mh={sphere:fu,point:fu,lineStart:function(){mh.point=vh,mh.lineEnd=gh},lineEnd:fu,polygonStart:fu,polygonEnd:fu};function gh(){mh.point=mh.lineEnd=fu}function vh(t,e){ch=t*=$l,hh=au(e*=$l),fh=tu(e),mh.point=yh}function yh(t,e){t*=$l;var n=au(e*=$l),i=tu(e),r=Zl(t-ch),a=tu(r),o=i*au(r),s=fh*n-hh*i*a,l=hh*n+fh*i*a;ph.add(Kl(su(o*o+s*s),l)),ch=t,hh=n,fh=i}var bh=function(t){return ph.reset(),Su(t,mh),+ph},xh=[null,null],_h={type:"LineString",coordinates:xh},wh=function(t,e){return xh[0]=t,xh[1]=e,bh(_h)},Sh={Feature:function(t,e){return Mh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(Mh(n[i].geometry,e))return!0;return!1}},Eh={Sphere:function(){return!0},Point:function(t,e){return Th(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Th(n[i],e))return!0;return!1},LineString:function(t,e){return Ch(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ch(n[i],e))return!0;return!1},Polygon:function(t,e){return kh(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(kh(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(Mh(n[i],e))return!0;return!1}};function Mh(t,e){return!(!t||!Eh.hasOwnProperty(t.type))&&Eh[t.type](t,e)}function Th(t,e){return 0===wh(t,e)}function Ch(t,e){for(var n,i,r,a=0,o=t.length;a<o;a++){if(0===(i=wh(t[a],e)))return!0;if(a>0&&(r=wh(t[a],t[a-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<Gl*r)return!0;n=i}return!1}function kh(t,e){return!!th(t.map(Ph),Ah(e))}function Ph(t){return(t=t.map(Ah)).pop(),t}function Ah(t){return[t[0]*$l,t[1]*$l]}var Oh=function(t,e){return(t&&Sh.hasOwnProperty(t.type)?Sh[t.type]:Mh)(t,e)};function Lh(t,e,n){var i=w(t,e-Hl,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function Ih(t,e,n){var i=w(t,e-Hl,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Nh(){var t,e,n,i,r,a,o,s,l,u,c,h,f=10,d=f,p=90,m=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return w(eu(i/p)*p,n,p).map(c).concat(w(eu(s/m)*m,o,m).map(h)).concat(w(eu(e/f)*f,t,f).filter((function(t){return Zl(t%p)>Hl})).map(l)).concat(w(eu(a/d)*d,r,d).filter((function(t){return Zl(t%m)>Hl})).map(u))}return v.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(h(o).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],i>n&&(t=i,i=n,n=t),s>o&&(t=s,s=o,o=t),v.precision(g)):[[i,s],[n,o]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),a>r&&(n=a,a=r,r=n),v.precision(g)):[[e,a],[t,r]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],v):[p,m]},v.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],v):[f,d]},v.precision=function(f){return arguments.length?(g=+f,l=Lh(a,r,90),u=Ih(e,t,g),c=Lh(s,o,90),h=Ih(i,n,g),v):g},v.extentMajor([[-180,-90+Hl],[180,90-Hl]]).extentMinor([[-180,-80-Hl],[180,80+Hl]])}function Rh(){return Nh()()}var Dh,zh,Bh,Fh,jh=function(t,e){var n=t[0]*$l,i=t[1]*$l,r=e[0]*$l,a=e[1]*$l,o=tu(i),s=au(i),l=tu(a),u=au(a),c=o*tu(n),h=o*au(n),f=l*tu(r),d=l*au(r),p=2*cu(su(hu(a-i)+o*l*hu(r-n))),m=au(p),g=p?function(t){var e=au(t*=p)/m,n=au(p-t)/m,i=n*c+e*f,r=n*h+e*d,a=n*s+e*u;return[Kl(r,i)*Xl,Kl(a,su(i*i+r*r))*Xl]}:function(){return[n*Xl,i*Xl]};return g.distance=p,g},Vh=function(t){return t},Uh=Fl(),Hh=Fl(),Gh={point:fu,lineStart:fu,lineEnd:fu,polygonStart:function(){Gh.lineStart=Wh,Gh.lineEnd=Yh},polygonEnd:function(){Gh.lineStart=Gh.lineEnd=Gh.point=fu,Uh.add(Zl(Hh)),Hh.reset()},result:function(){var t=Uh/2;return Uh.reset(),t}};function Wh(){Gh.point=qh}function qh(t,e){Gh.point=Qh,Dh=Bh=t,zh=Fh=e}function Qh(t,e){Hh.add(Fh*t-Bh*e),Bh=t,Fh=e}function Yh(){Qh(Dh,zh)}var Xh=Gh,$h=1/0,Zh=$h,Jh=-$h,Kh=Jh;var tf,ef,nf,rf,af={point:function(t,e){t<$h&&($h=t);t>Jh&&(Jh=t);e<Zh&&(Zh=e);e>Kh&&(Kh=e)},lineStart:fu,lineEnd:fu,polygonStart:fu,polygonEnd:fu,result:function(){var t=[[$h,Zh],[Jh,Kh]];return Jh=Kh=-(Zh=$h=1/0),t}},of=0,sf=0,lf=0,uf=0,cf=0,hf=0,ff=0,df=0,pf=0,mf={point:gf,lineStart:vf,lineEnd:xf,polygonStart:function(){mf.lineStart=_f,mf.lineEnd=wf},polygonEnd:function(){mf.point=gf,mf.lineStart=vf,mf.lineEnd=xf},result:function(){var t=pf?[ff/pf,df/pf]:hf?[uf/hf,cf/hf]:lf?[of/lf,sf/lf]:[NaN,NaN];return of=sf=lf=uf=cf=hf=ff=df=pf=0,t}};function gf(t,e){of+=t,sf+=e,++lf}function vf(){mf.point=yf}function yf(t,e){mf.point=bf,gf(nf=t,rf=e)}function bf(t,e){var n=t-nf,i=e-rf,r=su(n*n+i*i);uf+=r*(nf+t)/2,cf+=r*(rf+e)/2,hf+=r,gf(nf=t,rf=e)}function xf(){mf.point=gf}function _f(){mf.point=Sf}function wf(){Ef(tf,ef)}function Sf(t,e){mf.point=Ef,gf(tf=nf=t,ef=rf=e)}function Ef(t,e){var n=t-nf,i=e-rf,r=su(n*n+i*i);uf+=r*(nf+t)/2,cf+=r*(rf+e)/2,hf+=r,ff+=(r=rf*t-nf*e)*(nf+t),df+=r*(rf+e),pf+=3*r,gf(nf=t,rf=e)}var Mf=mf;function Tf(t){this._context=t}Tf.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Yl)}},result:fu};var Cf,kf,Pf,Af,Of,Lf=Fl(),If={point:fu,lineStart:function(){If.point=Nf},lineEnd:function(){Cf&&Rf(kf,Pf),If.point=fu},polygonStart:function(){Cf=!0},polygonEnd:function(){Cf=null},result:function(){var t=+Lf;return Lf.reset(),t}};function Nf(t,e){If.point=Rf,kf=Af=t,Pf=Of=e}function Rf(t,e){Af-=t,Of-=e,Lf.add(su(Af*Af+Of*Of)),Af=t,Of=e}var Df=If;function zf(){this._string=[]}function Bf(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}zf.prototype={_radius:4.5,_circle:Bf(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Bf(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Ff=function(t,e){var n,i,r=4.5;function a(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),Su(t,n(i))),i.result()}return a.area=function(t){return Su(t,n(Xh)),Xh.result()},a.measure=function(t){return Su(t,n(Df)),Df.result()},a.bounds=function(t){return Su(t,n(af)),af.result()},a.centroid=function(t){return Su(t,n(Mf)),Mf.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Vh):(t=e).stream,a):t},a.context=function(t){return arguments.length?(i=null==t?(e=null,new zf):new Tf(e=t),"function"!=typeof r&&i.pointRadius(r),a):e},a.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),a):r},a.projection(t).context(e)},jf=function(t){return{stream:Vf(t)}};function Vf(t){return function(e){var n=new Uf;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Uf(){}function Hf(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Su(n,t.stream(af)),e(af.result()),null!=i&&t.clipExtent(i),t}function Gf(t,e,n){return Hf(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],a=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),o=+e[0][0]+(i-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(r-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function Wf(t,e,n){return Gf(t,[[0,0],e],n)}function qf(t,e,n){return Hf(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),a=(i-r*(n[1][0]+n[0][0]))/2,o=-r*n[0][1];t.scale(150*r).translate([a,o])}),n)}function Qf(t,e,n){return Hf(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),a=-r*n[0][0],o=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([a,o])}),n)}Uf.prototype={constructor:Uf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Yf=16,Xf=tu(30*$l),$f=function(t,e){return+e?function(t,e){function n(i,r,a,o,s,l,u,c,h,f,d,p,m,g){var v=u-i,y=c-r,b=v*v+y*y;if(b>4*e&&m--){var x=o+f,_=s+d,w=l+p,S=su(x*x+_*_+w*w),E=cu(w/=S),M=Zl(Zl(w)-1)<Hl||Zl(a-h)<Hl?(a+h)/2:Kl(_,x),T=t(M,E),C=T[0],k=T[1],P=C-i,A=k-r,O=y*P-v*A;(O*O/b>e||Zl((v*P+y*A)/b-.5)>.3||o*f+s*d+l*p<Xf)&&(n(i,r,a,o,s,l,C,k,M,x/=S,_/=S,w,m,g),g.point(C,k),n(C,k,M,x,_,w,u,c,h,f,d,p,m,g))}}return function(e){var i,r,a,o,s,l,u,c,h,f,d,p,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,i){n=t(n,i),e.point(n[0],n[1])}function v(){c=NaN,m.point=y,e.lineStart()}function y(i,r){var a=Iu([i,r]),o=t(i,r);n(c,h,u,f,d,p,c=o[0],h=o[1],u=i,f=a[0],d=a[1],p=a[2],Yf,e),e.point(c,h)}function b(){m.point=g,e.lineEnd()}function x(){v(),m.point=_,m.lineEnd=w}function _(t,e){y(i=t,e),r=c,a=h,o=f,s=d,l=p,m.point=y}function w(){n(c,h,u,f,d,p,r,a,i,o,s,l,Yf,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return Vf({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var Zf=Vf({point:function(t,e){this.stream.point(t*$l,e*$l)}});function Jf(t,e,n){function i(i,r){return[e+t*i,n-t*r]}return i.invert=function(i,r){return[(i-e)/t,(n-r)/t]},i}function Kf(t,e,n,i){var r=tu(i),a=au(i),o=r*t,s=a*t,l=r/t,u=a/t,c=(a*n-r*e)/t,h=(a*e+r*n)/t;function f(t,i){return[o*t-s*i+e,n-s*t-o*i]}return f.invert=function(t,e){return[l*t-u*e+c,h-u*t-l*e]},f}function td(t){return ed((function(){return t}))()}function ed(t){var e,n,i,r,a,o,s,l,u,c,h=150,f=480,d=250,p=0,m=0,g=0,v=0,y=0,b=0,x=null,_=rh,w=null,S=Vh,E=.5;function M(t){return l(t[0]*$l,t[1]*$l)}function T(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Xl,t[1]*Xl]}function C(){var t=Kf(h,0,0,b).apply(null,e(p,m)),i=(b?Kf:Jf)(h,f-t[0],d-t[1],b);return n=Fc(g,v,y),s=zc(e,i),l=zc(n,s),o=$f(s,E),k()}function k(){return u=c=null,M}return M.stream=function(t){return u&&c===t?u:u=Zf(function(t){return Vf({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(_(o(S(c=t)))))},M.preclip=function(t){return arguments.length?(_=t,x=void 0,k()):_},M.postclip=function(t){return arguments.length?(S=t,w=i=r=a=null,k()):S},M.clipAngle=function(t){return arguments.length?(_=+t?ah(x=t*$l):(x=null,rh),k()):x*Xl},M.clipExtent=function(t){return arguments.length?(S=null==t?(w=i=r=a=null,Vh):uh(w=+t[0][0],i=+t[0][1],r=+t[1][0],a=+t[1][1]),k()):null==w?null:[[w,i],[r,a]]},M.scale=function(t){return arguments.length?(h=+t,C()):h},M.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],C()):[f,d]},M.center=function(t){return arguments.length?(p=t[0]%360*$l,m=t[1]%360*$l,C()):[p*Xl,m*Xl]},M.rotate=function(t){return arguments.length?(g=t[0]%360*$l,v=t[1]%360*$l,y=t.length>2?t[2]%360*$l:0,C()):[g*Xl,v*Xl,y*Xl]},M.angle=function(t){return arguments.length?(b=t%360*$l,C()):b*Xl},M.precision=function(t){return arguments.length?(o=$f(s,E=t*t),k()):su(E)},M.fitExtent=function(t,e){return Gf(M,t,e)},M.fitSize=function(t,e){return Wf(M,t,e)},M.fitWidth=function(t,e){return qf(M,t,e)},M.fitHeight=function(t,e){return Qf(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&T,C()}}function nd(t){var e=0,n=Wl/3,i=ed(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*$l,n=t[1]*$l):[e*Xl,n*Xl]},r}function id(t,e){var n=au(t),i=(n+au(e))/2;if(Zl(i)<Hl)return function(t){var e=tu(t);function n(t,n){return[t*e,au(n)/e]}return n.invert=function(t,n){return[t/e,cu(n*e)]},n}(t);var r=1+n*(2*i-n),a=su(r)/i;function o(t,e){var n=su(r-2*i*au(e))/i;return[n*au(t*=i),a-n*tu(t)]}return o.invert=function(t,e){var n=a-e;return[Kl(t,Zl(n))/i*ou(n),cu((r-(t*t+n*n)*i*i)/(2*i))]},o}var rd=function(){return nd(id).scale(155.424).center([0,33.6442])},ad=function(){return rd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var od=function(){var t,e,n,i,r,a,o=ad(),s=rd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=rd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(i.point(e,o),a)||(r.point(e,o),a)}function h(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:o).invert(t)},c.stream=function(n){return t&&e===n?t:(i=[o.stream(e=n),s.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},c.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),l.precision(t),h()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),l.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(u),i=s.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+Hl,c+.12*e+Hl],[a-.214*e-Hl,c+.234*e-Hl]]).stream(u),r=l.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+Hl,c+.166*e+Hl],[a-.115*e-Hl,c+.234*e-Hl]]).stream(u),h()},c.fitExtent=function(t,e){return Gf(c,t,e)},c.fitSize=function(t,e){return Wf(c,t,e)},c.fitWidth=function(t,e){return qf(c,t,e)},c.fitHeight=function(t,e){return Qf(c,t,e)},c.scale(1070)};function sd(t){return function(e,n){var i=tu(e),r=tu(n),a=t(i*r);return[a*r*au(e),a*au(n)]}}function ld(t){return function(e,n){var i=su(e*e+n*n),r=t(i),a=au(r),o=tu(r);return[Kl(e*a,i*o),cu(i&&n*a/i)]}}var ud=sd((function(t){return su(2/(1+t))}));ud.invert=ld((function(t){return 2*cu(t/2)}));var cd=function(){return td(ud).scale(124.75).clipAngle(179.999)},hd=sd((function(t){return(t=uu(t))&&t/au(t)}));hd.invert=ld((function(t){return t}));var fd=function(){return td(hd).scale(79.4188).clipAngle(179.999)};function dd(t,e){return[t,iu(lu((ql+e)/2))]}dd.invert=function(t,e){return[t,2*Jl(nu(e))-ql]};var pd=function(){return md(dd).scale(961/Yl)};function md(t){var e,n,i,r=td(t),a=r.center,o=r.scale,s=r.translate,l=r.clipExtent,u=null;function c(){var a=Wl*o(),s=r(Hc(r.rotate()).invert([0,0]));return l(null==u?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===dd?[[Math.max(s[0]-a,u),e],[Math.min(s[0]+a,n),i]]:[[u,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,i)]])}return r.scale=function(t){return arguments.length?(o(t),c()):o()},r.translate=function(t){return arguments.length?(s(t),c()):s()},r.center=function(t){return arguments.length?(a(t),c()):a()},r.clipExtent=function(t){return arguments.length?(null==t?u=e=n=i=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),c()):null==u?null:[[u,e],[n,i]]},c()}function gd(t){return lu((ql+t)/2)}function vd(t,e){var n=tu(t),i=t===e?au(t):iu(n/tu(e))/iu(gd(e)/gd(t)),r=n*ru(gd(t),i)/i;if(!i)return dd;function a(t,e){r>0?e<-ql+Hl&&(e=-ql+Hl):e>ql-Hl&&(e=ql-Hl);var n=r/ru(gd(e),i);return[n*au(i*t),r-n*tu(i*t)]}return a.invert=function(t,e){var n=r-e,a=ou(i)*su(t*t+n*n);return[Kl(t,Zl(n))/i*ou(n),2*Jl(ru(r/a,1/i))-ql]},a}var yd=function(){return nd(vd).scale(109.5).parallels([30,30])};function bd(t,e){return[t,e]}bd.invert=bd;var xd=function(){return td(bd).scale(152.63)};function _d(t,e){var n=tu(t),i=t===e?au(t):(n-tu(e))/(e-t),r=n/i+t;if(Zl(i)<Hl)return bd;function a(t,e){var n=r-e,a=i*t;return[n*au(a),r-n*tu(a)]}return a.invert=function(t,e){var n=r-e;return[Kl(t,Zl(n))/i*ou(n),r-ou(i)*su(t*t+n*n)]},a}var wd=function(){return nd(_d).scale(131.154).center([0,13.9389])},Sd=1.340264,Ed=-.081106,Md=893e-6,Td=.003796,Cd=su(3)/2;function kd(t,e){var n=cu(Cd*au(e)),i=n*n,r=i*i*i;return[t*tu(n)/(Cd*(Sd+3*Ed*i+r*(7*Md+9*Td*i))),n*(Sd+Ed*i+r*(Md+Td*i))]}kd.invert=function(t,e){for(var n,i=e,r=i*i,a=r*r*r,o=0;o<12&&(a=(r=(i-=n=(i*(Sd+Ed*r+a*(Md+Td*r))-e)/(Sd+3*Ed*r+a*(7*Md+9*Td*r)))*i)*r*r,!(Zl(n)<Gl));++o);return[Cd*t*(Sd+3*Ed*r+a*(7*Md+9*Td*r))/tu(i),cu(au(i)/Cd)]};var Pd=function(){return td(kd).scale(177.158)};function Ad(t,e){var n=tu(e),i=tu(t)*n;return[n*au(t)/i,au(e)/i]}Ad.invert=ld(Jl);var Od=function(){return td(Ad).scale(144.049).clipAngle(60)};function Ld(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?Vh:Vf({point:function(r,a){this.stream.point(r*t+n,a*e+i)}})}var Id=function(){var t,e,n,i,r,a,o=1,s=0,l=0,u=1,c=1,h=Vh,f=null,d=Vh;function p(){return i=r=null,a}return a={stream:function(t){return i&&r===t?i:i=h(d(r=t))},postclip:function(i){return arguments.length?(d=i,f=t=e=n=null,p()):d},clipExtent:function(i){return arguments.length?(d=null==i?(f=t=e=n=null,Vh):uh(f=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),p()):null==f?null:[[f,t],[e,n]]},scale:function(t){return arguments.length?(h=Ld((o=+t)*u,o*c,s,l),p()):o},translate:function(t){return arguments.length?(h=Ld(o*u,o*c,s=+t[0],l=+t[1]),p()):[s,l]},reflectX:function(t){return arguments.length?(h=Ld(o*(u=t?-1:1),o*c,s,l),p()):u<0},reflectY:function(t){return arguments.length?(h=Ld(o*u,o*(c=t?-1:1),s,l),p()):c<0},fitExtent:function(t,e){return Gf(a,t,e)},fitSize:function(t,e){return Wf(a,t,e)},fitWidth:function(t,e){return qf(a,t,e)},fitHeight:function(t,e){return Qf(a,t,e)}}};function Nd(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}Nd.invert=function(t,e){var n,i=e,r=25;do{var a=i*i,o=a*a;i-=n=(i*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(Zl(n)>Hl&&--r>0);return[t/(.8707+(a=i*i)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),i]};var Rd=function(){return td(Nd).scale(175.295)};function Dd(t,e){return[tu(e)*au(t),au(e)]}Dd.invert=ld(cu);var zd=function(){return td(Dd).scale(249.5).clipAngle(90+Hl)};function Bd(t,e){var n=tu(e),i=1+tu(t)*n;return[n*au(t)/i,au(e)/i]}Bd.invert=ld((function(t){return 2*Jl(t)}));var Fd=function(){return td(Bd).scale(250).clipAngle(142)};function jd(t,e){return[iu(lu((ql+e)/2)),-t]}jd.invert=function(t,e){return[-e,2*Jl(nu(t))-ql]};var Vd=function(){var t=md(jd),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function Ud(t,e){return t.parent===e.parent?1:2}function Hd(t,e){return t+e.x}function Gd(t,e){return Math.max(t,e.y)}var Wd=function(){var t=Ud,e=1,n=1,i=!1;function r(r){var a,o=0;r.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Hd,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Gd,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),u=s.x-t(s,l)/2,c=l.x+t(l,s)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r};function qd(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function Qd(t,e){var n,i,r,a,o,s=new Zd(t),l=+t.value&&(s.value=t.value),u=[s];for(null==e&&(e=Yd);n=u.pop();)if(l&&(n.value=+n.data.value),(r=e(n.data))&&(o=r.length))for(n.children=new Array(o),a=o-1;a>=0;--a)u.push(i=n.children[a]=new Zd(r[a])),i.parent=n,i.depth=n.depth+1;return s.eachBefore($d)}function Yd(t){return t.children}function Xd(t){t.data=t.data.data}function $d(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Zd(t){this.data=t,this.depth=this.height=0,this.parent=null}Zd.prototype=Qd.prototype={constructor:Zd,count:function(){return this.eachAfter(qd)},each:function(t){var e,n,i,r,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i])}while(o.length);return this},eachAfter:function(t){for(var e,n,i,r=this,a=[r],o=[];r=a.pop();)if(o.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)a.push(e[n]);for(;r=o.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Qd(this).eachBefore(Xd)}};var Jd=Array.prototype.slice;var Kd=function(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Jd.call(t))).length,a=[];i<r;)e=t[i],n&&np(n,e)?++i:(n=rp(a=tp(a,e)),i=0);return n};function tp(t,e){var n,i;if(ip(e,t))return[e];for(n=0;n<t.length;++n)if(ep(e,t[n])&&ip(ap(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(ep(ap(t[n],t[i]),e)&&ep(ap(t[n],e),t[i])&&ep(ap(t[i],e),t[n])&&ip(op(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function ep(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function np(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function ip(t,e){for(var n=0;n<e.length;++n)if(!np(t,e[n]))return!1;return!0}function rp(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return ap(t[0],t[1]);case 3:return op(t[0],t[1],t[2])}var e}function ap(t,e){var n=t.x,i=t.y,r=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-i,c=s-r,h=Math.sqrt(l*l+u*u);return{x:(n+a+l/h*c)/2,y:(i+o+u/h*c)/2,r:(h+r+s)/2}}function op(t,e,n){var i=t.x,r=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,c=n.y,h=n.r,f=i-o,d=i-u,p=r-s,m=r-c,g=l-a,v=h-a,y=i*i+r*r-a*a,b=y-o*o-s*s+l*l,x=y-u*u-c*c+h*h,_=d*p-f*m,w=(p*x-m*b)/(2*_)-i,S=(m*g-p*v)/_,E=(d*b-f*x)/(2*_)-r,M=(f*v-d*g)/_,T=S*S+M*M-1,C=2*(a+w*S+E*M),k=w*w+E*E-a*a,P=-(T?(C+Math.sqrt(C*C-4*T*k))/(2*T):k/C);return{x:i+w+S*P,y:r+E+M*P,r:P}}function sp(t,e,n){var i,r,a,o,s=t.x-e.x,l=t.y-e.y,u=s*s+l*l;u?(r=e.r+n.r,r*=r,o=t.r+n.r,r>(o*=o)?(i=(u+o-r)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x-i*s-a*l,n.y=t.y-i*l+a*s):(i=(u+r-o)/(2*u),a=Math.sqrt(Math.max(0,r/u-i*i)),n.x=e.x+i*s-a*l,n.y=e.y+i*l+a*s)):(n.x=e.x+n.r,n.y=e.y)}function lp(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function up(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,a=(e.y*n.r+n.y*e.r)/i;return r*r+a*a}function cp(t){this._=t,this.next=null,this.previous=null}function hp(t){if(!(r=t.length))return 0;var e,n,i,r,a,o,s,l,u,c,h;if((e=t[0]).x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;sp(n,e,i=t[2]),e=new cp(e),n=new cp(n),i=new cp(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;s<r;++s){sp(e._,n._,i=t[s]),i=new cp(i),l=n.next,u=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(lp(l._,i._)){n=l,e.next=n,n.previous=e,--s;continue t}c+=l._.r,l=l.next}else{if(lp(u._,i._)){(e=u).next=n,n.previous=e,--s;continue t}h+=u._.r,u=u.previous}}while(l!==u.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,a=up(e);(i=i.next)!==n;)(o=up(i))<a&&(e=i,a=o);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Kd(e),s=0;s<r;++s)(e=t[s]).x-=i.x,e.y-=i.y;return i.r}var fp=function(t){return hp(t),t};function dp(t){return null==t?null:pp(t)}function pp(t){if("function"!=typeof t)throw new Error;return t}function mp(){return 0}var gp=function(t){return function(){return t}};function vp(t){return Math.sqrt(t.value)}var yp=function(){var t=null,e=1,n=1,i=mp;function r(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(bp(t)).eachAfter(xp(i,.5)).eachBefore(_p(1)):r.eachBefore(bp(vp)).eachAfter(xp(mp,1)).eachAfter(xp(i,r.r/Math.min(e,n))).eachBefore(_p(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=dp(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:gp(+t),r):i},r};function bp(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function xp(t,e){return function(n){if(i=n.children){var i,r,a,o=i.length,s=t(n)*e||0;if(s)for(r=0;r<o;++r)i[r].r+=s;if(a=hp(i),s)for(r=0;r<o;++r)i[r].r-=s;n.r=a+s}}}function _p(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var wp=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Sp=function(t,e,n,i,r){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(i-e)/t.value;++s<l;)(a=o[s]).y0=n,a.y1=r,a.x0=e,a.x1=e+=a.value*u},Ep=function(){var t=1,e=1,n=0,i=!1;function r(r){var a=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/a,r.eachBefore(function(t,e){return function(i){i.children&&Sp(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,a=i.y0,o=i.x1-n,s=i.y1-n;o<r&&(r=o=(r+o)/2),s<a&&(a=s=(a+s)/2),i.x0=r,i.y0=a,i.x1=o,i.y1=s}}(e,a)),i&&r.eachBefore(wp),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},Mp="$",Tp={depth:-1},Cp={};function kp(t){return t.id}function Pp(t){return t.parentId}var Ap=function(){var t=kp,e=Pp;function n(n){var i,r,a,o,s,l,u,c=n.length,h=new Array(c),f={};for(r=0;r<c;++r)i=n[r],s=h[r]=new Zd(i),null!=(l=t(i,r,n))&&(l+="")&&(f[u=Mp+(s.id=l)]=u in f?Cp:s);for(r=0;r<c;++r)if(s=h[r],null!=(l=e(n[r],r,n))&&(l+="")){if(!(o=f[Mp+l]))throw new Error("missing: "+l);if(o===Cp)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=Tp,a.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore($d),a.parent=null,c>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=pp(e),n):t},n.parentId=function(t){return arguments.length?(e=pp(t),n):e},n};function Op(t,e){return t.parent===e.parent?1:2}function Lp(t){var e=t.children;return e?e[0]:t.t}function Ip(t){var e=t.children;return e?e[e.length-1]:t.t}function Np(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Rp(t,e,n){return t.a.parent===e.parent?t.a:n}function Dp(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Dp.prototype=Object.create(Zd.prototype);var zp=function(){var t=Op,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,a,o=new Dp(t,0),s=[o];e=s.pop();)if(i=e._.children)for(e.children=new Array(a=i.length),r=a-1;r>=0;--r)s.push(n=e.children[r]=new Dp(i[r],r)),n.parent=e;return(o.parent=new Dp(null,0)).children=[o],o}(r);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),i)r.eachBefore(s);else{var u=r,c=r,h=r;r.eachBefore((function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)}));var f=u===c?1:t(u,c)/2,d=f-u.x,p=e/(c.x+f+d),m=n/(h.depth||1);r.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*m}))}return r}function a(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,a=e,o=e,s=n,l=a.parent.children[0],u=a.m,c=o.m,h=s.m,f=l.m;s=Ip(s),a=Lp(a),s&&a;)l=Lp(l),(o=Ip(o)).a=e,(r=s.z+h-a.z-u+t(s._,a._))>0&&(Np(Rp(s,e,i),e,r),u+=r,c+=r),h+=s.m,u+=a.m,f+=l.m,c+=o.m;s&&!Ip(o)&&(o.t=s,o.m+=h-c),a&&!Lp(l)&&(l.t=a,l.m+=u-f,i=e)}return i}(e,r,e.parent.A||i[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},Bp=function(t,e,n,i,r){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(r-n)/t.value;++s<l;)(a=o[s]).x0=e,a.x1=i,a.y0=n,a.y1=n+=a.value*u},Fp=(1+Math.sqrt(5))/2;function jp(t,e,n,i,r,a){for(var o,s,l,u,c,h,f,d,p,m,g,v=[],y=e.children,b=0,x=0,_=y.length,w=e.value;b<_;){l=r-n,u=a-i;do{c=y[x++].value}while(!c&&x<_);for(h=f=c,g=c*c*(m=Math.max(u/l,l/u)/(w*t)),p=Math.max(f/g,g/h);x<_;++x){if(c+=s=y[x].value,s<h&&(h=s),s>f&&(f=s),g=c*c*m,(d=Math.max(f/g,g/h))>p){c-=s;break}p=d}v.push(o={value:c,dice:l<u,children:y.slice(b,x)}),o.dice?Sp(o,n,i,r,w?i+=u*c/w:a):Bp(o,n,i,w?n+=l*c/w:r,a),w-=c,b=x}return v}var Vp=function t(e){function n(t,n,i,r,a){jp(e,t,n,i,r,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Fp),Up=function(){var t=Vp,e=!1,n=1,i=1,r=[0],a=mp,o=mp,s=mp,l=mp,u=mp;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),r=[0],e&&t.eachBefore(wp),t}function h(e){var n=r[e.depth],i=e.x0+n,c=e.y0+n,h=e.x1-n,f=e.y1-n;h<i&&(i=h=(i+h)/2),f<c&&(c=f=(c+f)/2),e.x0=i,e.y0=c,e.x1=h,e.y1=f,e.children&&(n=r[e.depth+1]=a(e)/2,i+=u(e)-n,c+=o(e)-n,(h-=s(e)-n)<i&&(i=h=(i+h)/2),(f-=l(e)-n)<c&&(c=f=(c+f)/2),t(e,i,c,h,f))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],i=+t[1],c):[n,i]},c.tile=function(e){return arguments.length?(t=pp(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:gp(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:gp(+t),c):o},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:gp(+t),c):s},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:gp(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:gp(+t),c):u},c},Hp=function(t,e,n,i,r){var a,o,s=t.children,l=s.length,u=new Array(l+1);for(u[0]=o=a=0;a<l;++a)u[a+1]=o+=s[a].value;!function t(e,n,i,r,a,o,l){if(e>=n-1){var c=s[e];return c.x0=r,c.y0=a,c.x1=o,void(c.y1=l)}var h=u[e],f=i/2+h,d=e+1,p=n-1;for(;d<p;){var m=d+p>>>1;u[m]<f?d=m+1:p=m}f-u[d-1]<u[d]-f&&e+1<d&&--d;var g=u[d]-h,v=i-g;if(o-r>l-a){var y=(r*v+o*g)/i;t(e,d,g,r,a,y,l),t(d,n,v,y,a,o,l)}else{var b=(a*v+l*g)/i;t(e,d,g,r,a,o,b),t(d,n,v,r,b,o,l)}}(0,l,t.value,e,n,i,r)},Gp=function(t,e,n,i,r){(1&t.depth?Bp:Sp)(t,e,n,i,r)},Wp=function t(e){function n(t,n,i,r,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,u,c,h=-1,f=o.length,d=t.value;++h<f;){for(l=(s=o[h]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?Sp(s,n,i,r,i+=(a-i)*s.value/d):Bp(s,n,i,n+=(r-n)*s.value/d,a),d-=s.value}else t._squarify=o=jp(e,t,n,i,r,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Fp),qp=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},Qp=function(t,e){var n=mn(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Yp=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Xp=Math.SQRT2;function $p(t){return((t=Math.exp(t))+1/t)/2}var Zp=function(t,e){var n,i,r=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],c=s-r,h=l-a,f=c*c+h*h;if(f<1e-12)i=Math.log(u/o)/Xp,n=function(t){return[r+t*c,a+t*h,o*Math.exp(Xp*t*i)]};else{var d=Math.sqrt(f),p=(u*u-o*o+4*f)/(2*o*2*d),m=(u*u-o*o-4*f)/(2*u*2*d),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);i=(v-g)/Xp,n=function(t){var e,n=t*i,s=$p(g),l=o/(2*d)*(s*(e=Xp*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[r+l*c,a+l*h,o*s/$p(Xp*n+g)]}}return n.duration=1e3*i,n};function Jp(t){return function(e,n){var i=t((e=sn(e)).h,(n=sn(n)).h),r=vn(e.s,n.s),a=vn(e.l,n.l),o=vn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=a(t),e.opacity=o(t),e+""}}}var Kp=Jp(mn),tm=Jp(vn);function em(t,e){var n=vn((t=Pa(t)).l,(e=Pa(e)).l),i=vn(t.a,e.a),r=vn(t.b,e.b),a=vn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=a(e),t+""}}function nm(t){return function(e,n){var i=t((e=za(e)).h,(n=za(n)).h),r=vn(e.c,n.c),a=vn(e.l,n.l),o=vn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=a(t),e.opacity=o(t),e+""}}}var im=nm(mn),rm=nm(vn);function am(t){return function e(n){function i(e,i){var r=t((e=qa(e)).h,(i=qa(i)).h),a=vn(e.s,i.s),o=vn(e.l,i.l),s=vn(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}var om=am(mn),sm=am(vn);function lm(t,e){for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[e](t-e)}}var um=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},cm=function(t){for(var e,n=-1,i=t.length,r=t[i-1],a=0;++n<i;)e=r,r=t[n],a+=e[1]*r[0]-e[0]*r[1];return a/2},hm=function(t){for(var e,n,i=-1,r=t.length,a=0,o=0,s=t[r-1],l=0;++i<r;)e=s,s=t[i],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(l*=3),o/l]},fm=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function dm(t,e){return t[0]-e[0]||t[1]-e[1]}function pm(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;++r){for(;i>1&&fm(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}var mm=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(dm),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var a=pm(i),o=pm(r),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(e=a.length-1;e>=0;--e)u.push(t[i[a[e]][2]]);for(e=+s;e<o.length-l;++e)u.push(t[i[o[e]][2]]);return u},gm=function(t,e){for(var n,i,r=t.length,a=t[r-1],o=e[0],s=e[1],l=a[0],u=a[1],c=!1,h=0;h<r;++h)n=(a=t[h])[0],(i=a[1])>s!=u>s&&o<(l-n)*(s-i)/(u-i)+n&&(c=!c),l=n,u=i;return c},vm=function(t){for(var e,n,i=-1,r=t.length,a=t[r-1],o=a[0],s=a[1],l=0;++i<r;)e=o,n=s,e-=o=(a=t[i])[0],n-=s=a[1],l+=Math.sqrt(e*e+n*n);return l},ym=function(){return Math.random()},bm=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(ym),xm=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=i)a=i,i=null;else do{i=2*e()-1,a=2*e()-1,r=i*i+a*a}while(!r||r>1);return t+n*a*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(ym),_m=function t(e){function n(){var t=xm.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(ym),wm=function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(ym),Sm=function t(e){function n(t){var n=wm.source(e)(t);return function(){return n()/t}}return n.source=t,n}(ym),Em=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(ym);function Mm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Tm(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Cm=Array.prototype,km=Cm.map,Pm=Cm.slice,Am={name:"implicit"};function Om(){var t=aa(),e=[],n=[],i=Am;function r(r){var a=r+"",o=t.get(a);if(!o){if(i!==Am)return i;t.set(a,o=e.push(r))}return n[(o-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=aa();for(var i,a,o=-1,s=n.length;++o<s;)t.has(a=(i=n[o])+"")||t.set(a,e.push(i));return r},r.range=function(t){return arguments.length?(n=Pm.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Om(e,n).unknown(i)},Mm.apply(r,arguments),r}function Lm(){var t,e,n=Om().unknown(void 0),i=n.domain,r=n.range,a=[0,1],o=!1,s=0,l=0,u=.5;function c(){var n=i().length,c=a[1]<a[0],h=a[c-0],f=a[1-c];t=(f-h)/Math.max(1,n-s+2*l),o&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*u,e=t*(1-s),o&&(h=Math.round(h),e=Math.round(e));var d=w(n).map((function(e){return h+t*e}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),c()):i()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,c()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,l=+t),c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),c()):s},n.paddingOuter=function(t){return arguments.length?(l=+t,c()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.copy=function(){return Lm(i(),a).round(o).paddingInner(s).paddingOuter(l).align(u)},Mm.apply(c(),arguments)}function Im(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Lm.apply(null,arguments).paddingInner(1))}var Nm=function(t){return function(){return t}},Rm=function(t){return+t},Dm=[0,1];function zm(t){return t}function Bm(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Nm(isNaN(e)?NaN:.5)}function Fm(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function jm(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=Bm(r,i),a=n(o,a)):(i=Bm(i,r),a=n(a,o)),function(t){return a(i(t))}}function Vm(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Bm(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=l(t,e,1,i)-1;return a[n](r[n](e))}}function Um(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hm(){var t,e,n,i,r,a,o=Dm,s=Dm,l=Nn,u=zm;function c(){return i=Math.min(o.length,s.length)>2?Vm:jm,r=a=null,h}function h(e){return isNaN(e=+e)?n:(r||(r=i(o.map(t),s,l)))(t(u(e)))}return h.invert=function(n){return u(e((a||(a=i(s,o.map(t),Cn)))(n)))},h.domain=function(t){return arguments.length?(o=km.call(t,Rm),u===zm||(u=Fm(o)),c()):o.slice()},h.range=function(t){return arguments.length?(s=Pm.call(t),c()):s.slice()},h.rangeRound=function(t){return s=Pm.call(t),l=Yp,c()},h.clamp=function(t){return arguments.length?(u=t?Fm(o):zm,h):u!==zm},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,c()}}function Gm(t,e){return Hm()(t,e)}var Wm=function(t,e,n,i){var r,a=k(t,e,n);switch((i=wl(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=zl(a,o))||(i.precision=r),Cl(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Bl(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=Dl(a))||(i.precision=r-2*("%"===i.type))}return Tl(i)};function qm(t){var e=t.domain;return t.ticks=function(t){var n=e();return T(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Wm(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),a=0,o=r.length-1,s=r[a],l=r[o];return l<s&&(i=s,s=l,l=i,i=a,a=o,o=i),(i=C(s,l,n))>0?i=C(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=C(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[a]=Math.floor(s/i)*i,r[o]=Math.ceil(l/i)*i,e(r)):i<0&&(r[a]=Math.ceil(s*i)/i,r[o]=Math.floor(l*i)/i,e(r)),t},t}function Qm(){var t=Gm(zm,zm);return t.copy=function(){return Um(t,Qm())},Mm.apply(t,arguments),qm(t)}function Ym(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=km.call(e,Rm),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Ym(t).unknown(e)},t=arguments.length?km.call(t,Rm):[0,1],qm(n)}var Xm=function(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t};function $m(t){return Math.log(t)}function Zm(t){return Math.exp(t)}function Jm(t){return-Math.log(-t)}function Km(t){return-Math.exp(-t)}function tg(t){return isFinite(t)?+("1e"+t):t<0?0:t}function eg(t){return function(e){return-t(-e)}}function ng(t){var e,n,i=t($m,Zm),r=i.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?tg:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),r()[0]<0?(e=eg(e),n=eg(n),t(Jm,Km)):t($m,Zm),i}return i.base=function(t){return arguments.length?(a=+t,o()):a},i.domain=function(t){return arguments.length?(r(t),o()):r()},i.ticks=function(t){var i,o=r(),s=o[0],l=o[o.length-1];(i=l<s)&&(f=s,s=l,l=f);var u,c,h,f=e(s),d=e(l),p=null==t?10:+t,m=[];if(!(a%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,s>0){for(;f<d;++f)for(c=1,u=n(f);c<a;++c)if(!((h=u*c)<s)){if(h>l)break;m.push(h)}}else for(;f<d;++f)for(c=a-1,u=n(f);c>=1;--c)if(!((h=u*c)<s)){if(h>l)break;m.push(h)}}else m=T(f,d,Math.min(d-f,p)).map(n);return i?m.reverse():m},i.tickFormat=function(t,r){if(null==r&&(r=10===a?".0e":","),"function"!=typeof r&&(r=Tl(r)),t===1/0)return r;null==t&&(t=10);var o=Math.max(1,a*t/i.ticks().length);return function(t){var i=t/n(Math.round(e(t)));return i*a<a-.5&&(i*=a),i<=o?r(t):""}},i.nice=function(){return r(Xm(r(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},i}function ig(){var t=ng(Hm()).domain([1,10]);return t.copy=function(){return Um(t,ig()).base(t.base())},Mm.apply(t,arguments),t}function rg(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ag(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function og(t){var e=1,n=t(rg(e),ag(e));return n.constant=function(n){return arguments.length?t(rg(e=+n),ag(e)):e},qm(n)}function sg(){var t=og(Hm());return t.copy=function(){return Um(t,sg()).constant(t.constant())},Mm.apply(t,arguments)}function lg(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ug(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function cg(t){return t<0?-t*t:t*t}function hg(t){var e=t(zm,zm),n=1;function i(){return 1===n?t(zm,zm):.5===n?t(ug,cg):t(lg(n),lg(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},qm(e)}function fg(){var t=hg(Hm());return t.copy=function(){return Um(t,fg()).exponent(t.exponent())},Mm.apply(t,arguments),t}function dg(){return fg.apply(null,arguments).exponent(.5)}function pg(){var t,e=[],n=[],r=[];function a(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=O(e,t/i);return o}function o(e){return isNaN(e=+e)?t:n[l(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,o=t.length;r<o;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(i),a()},o.range=function(t){return arguments.length?(n=Pm.call(t),a()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return pg().domain(e).range(n).unknown(t)},Mm.apply(o,arguments)}function mg(){var t,e=0,n=1,i=1,r=[.5],a=[0,1];function o(e){return e<=e?a[l(r,e,0,i)]:t}function s(){var t=-1;for(r=new Array(i);++t<i;)r[t]=((t+1)*n-(t-i)*e)/(i+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},o.range=function(t){return arguments.length?(i=(a=Pm.call(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,r[0]]:o>=i?[r[i-1],n]:[r[o-1],r[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return r.slice()},o.copy=function(){return mg().domain([e,n]).range(a).unknown(t)},Mm.apply(qm(o),arguments)}function gg(){var t,e=[.5],n=[0,1],i=1;function r(r){return r<=r?n[l(e,r,0,i)]:t}return r.domain=function(t){return arguments.length?(e=Pm.call(t),i=Math.min(e.length,n.length-1),r):e.slice()},r.range=function(t){return arguments.length?(n=Pm.call(t),i=Math.min(e.length,n.length-1),r):n.slice()},r.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return gg().domain(e).range(n).unknown(t)},Mm.apply(r,arguments)}var vg=new Date,yg=new Date;function bg(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<i);return s},r.filter=function(n){return bg((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return vg.setTime(+e),yg.setTime(+i),t(vg),t(yg),Math.floor(n(vg,yg))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var xg=bg((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));xg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?bg((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var _g=xg,wg=xg.range,Sg=bg((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Eg=Sg,Mg=Sg.range,Tg=6e4,Cg=6048e5;function kg(t){return bg((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Tg)/Cg}))}var Pg=kg(0),Ag=kg(1),Og=kg(2),Lg=kg(3),Ig=kg(4),Ng=kg(5),Rg=kg(6),Dg=Pg.range,zg=Ag.range,Bg=Og.range,Fg=Lg.range,jg=Ig.range,Vg=Ng.range,Ug=Rg.range,Hg=bg((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Tg)/864e5}),(function(t){return t.getDate()-1})),Gg=Hg,Wg=Hg.range,qg=bg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Tg)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Qg=qg,Yg=qg.range,Xg=bg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+e*Tg)}),(function(t,e){return(e-t)/Tg}),(function(t){return t.getMinutes()})),$g=Xg,Zg=Xg.range,Jg=bg((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),Kg=Jg,tv=Jg.range,ev=bg((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));ev.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?bg((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):ev:null};var nv=ev,iv=ev.range;function rv(t){return bg((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Cg}))}var av=rv(0),ov=rv(1),sv=rv(2),lv=rv(3),uv=rv(4),cv=rv(5),hv=rv(6),fv=av.range,dv=ov.range,pv=sv.range,mv=lv.range,gv=uv.range,vv=cv.range,yv=hv.range,bv=bg((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),xv=bv,_v=bv.range,wv=bg((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));wv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?bg((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Sv=wv,Ev=wv.range;function Mv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Tv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Cv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function kv(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=jv(r),c=Vv(r),h=jv(a),f=Vv(a),d=jv(o),p=Vv(o),m=jv(s),g=Vv(s),v=jv(l),y=Vv(l),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:ly,e:ly,f:dy,H:uy,I:cy,j:hy,L:fy,m:py,M:my,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Hy,s:Gy,S:gy,u:vy,U:yy,V:by,w:xy,W:_y,x:null,X:null,y:wy,Y:Sy,Z:Ey,"%":Uy},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:My,e:My,f:Ay,H:Ty,I:Cy,j:ky,L:Py,m:Oy,M:Ly,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Hy,s:Gy,S:Iy,u:Ny,U:Ry,V:Dy,w:zy,W:By,x:null,X:null,y:Fy,Y:jy,Z:Vy,"%":Uy},_={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return E(t,e,n,i)},d:Jv,e:Jv,f:ry,H:ty,I:ty,j:Kv,L:iy,m:Zv,M:ey,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=c[i[0].toLowerCase()],n+i[0].length):-1},q:$v,Q:oy,s:sy,S:ny,u:Hv,U:Gv,V:Wv,w:Uv,W:qv,x:function(t,e,i){return E(t,n,e,i)},X:function(t,e,n){return E(t,i,e,n)},y:Yv,Y:Qv,Z:Xv,"%":ay};function w(t,e){return function(n){var i,r,a,o=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(r=Nv[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(a=e[i])&&(i=a(n,r)),o.push(i),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function S(t,e){return function(n){var i,r,a=Cv(1900,void 0,1);if(E(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(!e||"Z"in a||(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(i=Tv(Cv(a.y,0,1))).getUTCDay(),i=r>4||0===r?ov.ceil(i):ov(i),i=xv.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(r=(i=Mv(Cv(a.y,0,1))).getDay(),i=r>4||0===r?Ag.ceil(i):Ag(i),i=Gg.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?Tv(Cv(a.y,0,1)).getUTCDay():Mv(Cv(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Tv(a)):Mv(a)}}function E(t,e,n,i){for(var r,a,o=0,s=e.length,l=n.length;o<s;){if(i>=l)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=_[r in Nv?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return(b.x=w(n,b),b.X=w(i,b),b.c=w(e,b),x.x=w(n,x),x.X=w(i,x),x.c=w(e,x),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}})}var Pv,Av,Ov,Lv,Iv,Nv={"-":"",_:" ",0:"0"},Rv=/^\s*\d+/,Dv=/^%/,zv=/[\\^$*+?|[\]().{}]/g;function Bv(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function Fv(t){return t.replace(zv,"\\$&")}function jv(t){return new RegExp("^(?:"+t.map(Fv).join("|")+")","i")}function Vv(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Uv(t,e,n){var i=Rv.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Hv(t,e,n){var i=Rv.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Gv(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Wv(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function qv(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Qv(t,e,n){var i=Rv.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Yv(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Xv(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function $v(t,e,n){var i=Rv.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Zv(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Jv(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Kv(t,e,n){var i=Rv.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function ty(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ey(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function ny(t,e,n){var i=Rv.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function iy(t,e,n){var i=Rv.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function ry(t,e,n){var i=Rv.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function ay(t,e,n){var i=Dv.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function oy(t,e,n){var i=Rv.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function sy(t,e,n){var i=Rv.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function ly(t,e){return Bv(t.getDate(),e,2)}function uy(t,e){return Bv(t.getHours(),e,2)}function cy(t,e){return Bv(t.getHours()%12||12,e,2)}function hy(t,e){return Bv(1+Gg.count(_g(t),t),e,3)}function fy(t,e){return Bv(t.getMilliseconds(),e,3)}function dy(t,e){return fy(t,e)+"000"}function py(t,e){return Bv(t.getMonth()+1,e,2)}function my(t,e){return Bv(t.getMinutes(),e,2)}function gy(t,e){return Bv(t.getSeconds(),e,2)}function vy(t){var e=t.getDay();return 0===e?7:e}function yy(t,e){return Bv(Pg.count(_g(t)-1,t),e,2)}function by(t,e){var n=t.getDay();return t=n>=4||0===n?Ig(t):Ig.ceil(t),Bv(Ig.count(_g(t),t)+(4===_g(t).getDay()),e,2)}function xy(t){return t.getDay()}function _y(t,e){return Bv(Ag.count(_g(t)-1,t),e,2)}function wy(t,e){return Bv(t.getFullYear()%100,e,2)}function Sy(t,e){return Bv(t.getFullYear()%1e4,e,4)}function Ey(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Bv(e/60|0,"0",2)+Bv(e%60,"0",2)}function My(t,e){return Bv(t.getUTCDate(),e,2)}function Ty(t,e){return Bv(t.getUTCHours(),e,2)}function Cy(t,e){return Bv(t.getUTCHours()%12||12,e,2)}function ky(t,e){return Bv(1+xv.count(Sv(t),t),e,3)}function Py(t,e){return Bv(t.getUTCMilliseconds(),e,3)}function Ay(t,e){return Py(t,e)+"000"}function Oy(t,e){return Bv(t.getUTCMonth()+1,e,2)}function Ly(t,e){return Bv(t.getUTCMinutes(),e,2)}function Iy(t,e){return Bv(t.getUTCSeconds(),e,2)}function Ny(t){var e=t.getUTCDay();return 0===e?7:e}function Ry(t,e){return Bv(av.count(Sv(t)-1,t),e,2)}function Dy(t,e){var n=t.getUTCDay();return t=n>=4||0===n?uv(t):uv.ceil(t),Bv(uv.count(Sv(t),t)+(4===Sv(t).getUTCDay()),e,2)}function zy(t){return t.getUTCDay()}function By(t,e){return Bv(ov.count(Sv(t)-1,t),e,2)}function Fy(t,e){return Bv(t.getUTCFullYear()%100,e,2)}function jy(t,e){return Bv(t.getUTCFullYear()%1e4,e,4)}function Vy(){return"+0000"}function Uy(){return"%"}function Hy(t){return+t}function Gy(t){return Math.floor(+t/1e3)}function Wy(t){return Pv=kv(t),Av=Pv.format,Ov=Pv.parse,Lv=Pv.utcFormat,Iv=Pv.utcParse,Pv}Wy({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var qy=1e3,Qy=60*qy,Yy=60*Qy,Xy=24*Yy,$y=7*Xy,Zy=30*Xy,Jy=365*Xy;function Ky(t){return new Date(t)}function tb(t){return t instanceof Date?+t:+new Date(+t)}function eb(t,e,n,i,a,o,s,l,u){var c=Gm(zm,zm),h=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),x=u("%Y"),_=[[s,1,qy],[s,5,5*qy],[s,15,15*qy],[s,30,30*qy],[o,1,Qy],[o,5,5*Qy],[o,15,15*Qy],[o,30,30*Qy],[a,1,Yy],[a,3,3*Yy],[a,6,6*Yy],[a,12,12*Yy],[i,1,Xy],[i,2,2*Xy],[n,1,$y],[e,1,Zy],[e,3,3*Zy],[t,1,Jy]];function w(r){return(s(r)<r?d:o(r)<r?p:a(r)<r?m:i(r)<r?g:e(r)<r?n(r)<r?v:y:t(r)<r?b:x)(r)}function S(e,n,i,a){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(i-n)/e,s=r((function(t){return t[2]})).right(_,o);s===_.length?(a=k(n/Jy,i/Jy,e),e=t):s?(a=(s=_[o/_[s-1][2]<_[s][2]/o?s-1:s])[1],e=s[0]):(a=Math.max(k(n,i,e),1),e=l)}return null==a?e:e.every(a)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(km.call(t,tb)):f().map(Ky)},c.ticks=function(t,e){var n,i=f(),r=i[0],a=i[i.length-1],o=a<r;return o&&(n=r,r=a,a=n),n=(n=S(t,r,a,e))?n.range(r,a+1):[],o?n.reverse():n},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t,e){var n=f();return(t=S(t,n[0],n[n.length-1],e))?f(Xm(n,t)):c},c.copy=function(){return Um(c,eb(t,e,n,i,a,o,s,l,u))},c}var nb=function(){return Mm.apply(eb(_g,Eg,Pg,Gg,Qg,$g,Kg,nv,Av).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},ib=bg((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),rb=ib,ab=ib.range,ob=bg((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),sb=ob,lb=ob.range,ub=bg((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Tg)}),(function(t,e){return(e-t)/Tg}),(function(t){return t.getUTCMinutes()})),cb=ub,hb=ub.range,fb=function(){return Mm.apply(eb(Sv,rb,av,xv,sb,cb,Kg,nv,Lv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function db(){var t,e,n,i,r,a=0,o=1,s=zm,l=!1;function u(e){return isNaN(e=+e)?r:s(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}return u.domain=function(r){return arguments.length?(t=i(a=+r[0]),e=i(o=+r[1]),n=t===e?0:1/(e-t),u):[a,o]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(s=t,u):s},u.unknown=function(t){return arguments.length?(r=t,u):r},function(r){return i=r,t=r(a),e=r(o),n=t===e?0:1/(e-t),u}}function pb(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function mb(){var t=qm(db()(zm));return t.copy=function(){return pb(t,mb())},Tm.apply(t,arguments)}function gb(){var t=ng(db()).domain([1,10]);return t.copy=function(){return pb(t,gb()).base(t.base())},Tm.apply(t,arguments)}function vb(){var t=og(db());return t.copy=function(){return pb(t,vb()).constant(t.constant())},Tm.apply(t,arguments)}function yb(){var t=hg(db());return t.copy=function(){return pb(t,yb()).exponent(t.exponent())},Tm.apply(t,arguments)}function bb(){return yb.apply(null,arguments).exponent(.5)}function xb(){var t=[],e=zm;function n(n){if(!isNaN(n=+n))return e((l(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,a=0,o=e.length;a<o;++a)null==(r=e[a])||isNaN(r=+r)||t.push(r);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return xb(e).domain(t)},Tm.apply(n,arguments)}function _b(){var t,e,n,i,r,a,o,s=0,l=.5,u=1,c=zm,h=!1;function f(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(t<e?i:r),c(h?Math.max(0,Math.min(1,t)):t))}return f.domain=function(o){return arguments.length?(t=a(s=+o[0]),e=a(l=+o[1]),n=a(u=+o[2]),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),f):[s,l,u]},f.clamp=function(t){return arguments.length?(h=!!t,f):h},f.interpolator=function(t){return arguments.length?(c=t,f):c},f.unknown=function(t){return arguments.length?(o=t,f):o},function(o){return a=o,t=o(s),e=o(l),n=o(u),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),f}}function wb(){var t=qm(_b()(zm));return t.copy=function(){return pb(t,wb())},Tm.apply(t,arguments)}function Sb(){var t=ng(_b()).domain([.1,1,10]);return t.copy=function(){return pb(t,Sb()).base(t.base())},Tm.apply(t,arguments)}function Eb(){var t=og(_b());return t.copy=function(){return pb(t,Eb()).constant(t.constant())},Tm.apply(t,arguments)}function Mb(){var t=hg(_b());return t.copy=function(){return pb(t,Mb()).exponent(t.exponent())},Tm.apply(t,arguments)}function Tb(){return Mb.apply(null,arguments).exponent(.5)}var Cb=function(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n},kb=Cb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Pb=Cb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ab=Cb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ob=Cb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Lb=Cb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ib=Cb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Nb=Cb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Rb=Cb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Db=Cb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),zb=Cb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Bb=function(t){return xn(t[t.length-1])},Fb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Cb),jb=Bb(Fb),Vb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Cb),Ub=Bb(Vb),Hb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Cb),Gb=Bb(Hb),Wb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Cb),qb=Bb(Wb),Qb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Cb),Yb=Bb(Qb),Xb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Cb),$b=Bb(Xb),Zb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Cb),Jb=Bb(Zb),Kb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Cb),tx=Bb(Kb),ex=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Cb),nx=Bb(ex),ix=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Cb),rx=Bb(ix),ax=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Cb),ox=Bb(ax),sx=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Cb),lx=Bb(sx),ux=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Cb),cx=Bb(ux),hx=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Cb),fx=Bb(hx),dx=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Cb),px=Bb(dx),mx=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Cb),gx=Bb(mx),vx=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Cb),yx=Bb(vx),bx=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Cb),xx=Bb(bx),_x=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Cb),wx=Bb(_x),Sx=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Cb),Ex=Bb(Sx),Mx=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Cb),Tx=Bb(Mx),Cx=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Cb),kx=Bb(Cx),Px=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Cb),Ax=Bb(Px),Ox=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Cb),Lx=Bb(Ox),Ix=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Cb),Nx=Bb(Ix),Rx=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Cb),Dx=Bb(Rx),zx=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Cb),Bx=Bb(zx),Fx=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},jx=sm(qa(300,.5,0),qa(-240,.5,1)),Vx=sm(qa(-100,.75,.35),qa(80,1.5,.8)),Ux=sm(qa(260,.75,.35),qa(80,1.5,.8)),Hx=qa(),Gx=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Hx.h=360*t-100,Hx.s=1.5-1.5*e,Hx.l=.8-.9*e,Hx+""},Wx=Ke(),qx=Math.PI/3,Qx=2*Math.PI/3,Yx=function(t){var e;return t=(.5-t)*Math.PI,Wx.r=255*(e=Math.sin(t))*e,Wx.g=255*(e=Math.sin(t+qx))*e,Wx.b=255*(e=Math.sin(t+Qx))*e,Wx+""},Xx=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function $x(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Zx=$x(Cb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Jx=$x(Cb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Kx=$x(Cb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),t_=$x(Cb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),e_=function(t){return ke(le(t).call(document.documentElement))},n_=0;function i_(){return new r_}function r_(){this._="@"+(++n_).toString(36)}r_.prototype=i_.prototype={constructor:r_,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var a_=function(t){return"string"==typeof t?new Me([document.querySelectorAll(t)],[document.documentElement]):new Me([null==t?[]:t],Ee)},o_=function(t,e){null==e&&(e=Rn().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=Dn(t,e[n]);return r},s_=function(t){return function(){return t}},l_=Math.abs,u_=Math.atan2,c_=Math.cos,h_=Math.max,f_=Math.min,d_=Math.sin,p_=Math.sqrt,m_=1e-12,g_=Math.PI,v_=g_/2,y_=2*g_;function b_(t){return t>=1?v_:t<=-1?-v_:Math.asin(t)}function x_(t){return t.innerRadius}function __(t){return t.outerRadius}function w_(t){return t.startAngle}function S_(t){return t.endAngle}function E_(t){return t&&t.padAngle}function M_(t,e,n,i,r,a,o){var s=t-n,l=e-i,u=(o?a:-a)/p_(s*s+l*l),c=u*l,h=-u*s,f=t+c,d=e+h,p=n+c,m=i+h,g=(f+p)/2,v=(d+m)/2,y=p-f,b=m-d,x=y*y+b*b,_=r-a,w=f*m-p*d,S=(b<0?-1:1)*p_(h_(0,_*_*x-w*w)),E=(w*b-y*S)/x,M=(-w*y-b*S)/x,T=(w*b+y*S)/x,C=(-w*y+b*S)/x,k=E-g,P=M-v,A=T-g,O=C-v;return k*k+P*P>A*A+O*O&&(E=T,M=C),{cx:E,cy:M,x01:-c,y01:-h,x11:E*(r/_-1),y11:M*(r/_-1)}}var T_=function(){var t=x_,e=__,n=s_(0),i=null,r=w_,a=S_,o=E_,s=null;function l(){var l,u,c,h=+t.apply(this,arguments),f=+e.apply(this,arguments),d=r.apply(this,arguments)-v_,p=a.apply(this,arguments)-v_,m=l_(p-d),g=p>d;if(s||(s=l=$r()),f<h&&(u=f,f=h,h=u),f>m_)if(m>y_-m_)s.moveTo(f*c_(d),f*d_(d)),s.arc(0,0,f,d,p,!g),h>m_&&(s.moveTo(h*c_(p),h*d_(p)),s.arc(0,0,h,p,d,g));else{var v,y,b=d,x=p,_=d,w=p,S=m,E=m,M=o.apply(this,arguments)/2,T=M>m_&&(i?+i.apply(this,arguments):p_(h*h+f*f)),C=f_(l_(f-h)/2,+n.apply(this,arguments)),k=C,P=C;if(T>m_){var A=b_(T/h*d_(M)),O=b_(T/f*d_(M));(S-=2*A)>m_?(_+=A*=g?1:-1,w-=A):(S=0,_=w=(d+p)/2),(E-=2*O)>m_?(b+=O*=g?1:-1,x-=O):(E=0,b=x=(d+p)/2)}var L=f*c_(b),I=f*d_(b),N=h*c_(w),R=h*d_(w);if(C>m_){var D,z=f*c_(x),B=f*d_(x),F=h*c_(_),j=h*d_(_);if(m<g_&&(D=function(t,e,n,i,r,a,o,s){var l=n-t,u=i-e,c=o-r,h=s-a,f=h*l-c*u;if(!(f*f<m_))return[t+(f=(c*(e-a)-h*(t-r))/f)*l,e+f*u]}(L,I,F,j,z,B,N,R))){var V=L-D[0],U=I-D[1],H=z-D[0],G=B-D[1],W=1/d_(((c=(V*H+U*G)/(p_(V*V+U*U)*p_(H*H+G*G)))>1?0:c<-1?g_:Math.acos(c))/2),q=p_(D[0]*D[0]+D[1]*D[1]);k=f_(C,(h-q)/(W-1)),P=f_(C,(f-q)/(W+1))}}E>m_?P>m_?(v=M_(F,j,L,I,f,P,g),y=M_(z,B,N,R,f,P,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),P<C?s.arc(v.cx,v.cy,P,u_(v.y01,v.x01),u_(y.y01,y.x01),!g):(s.arc(v.cx,v.cy,P,u_(v.y01,v.x01),u_(v.y11,v.x11),!g),s.arc(0,0,f,u_(v.cy+v.y11,v.cx+v.x11),u_(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,P,u_(y.y11,y.x11),u_(y.y01,y.x01),!g))):(s.moveTo(L,I),s.arc(0,0,f,b,x,!g)):s.moveTo(L,I),h>m_&&S>m_?k>m_?(v=M_(N,R,z,B,h,-k,g),y=M_(L,I,F,j,h,-k,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),k<C?s.arc(v.cx,v.cy,k,u_(v.y01,v.x01),u_(y.y01,y.x01),!g):(s.arc(v.cx,v.cy,k,u_(v.y01,v.x01),u_(v.y11,v.x11),!g),s.arc(0,0,h,u_(v.cy+v.y11,v.cx+v.x11),u_(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,k,u_(y.y11,y.x11),u_(y.y01,y.x01),!g))):s.arc(0,0,h,w,_,g):s.lineTo(N,R)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-g_/2;return[c_(i)*n,d_(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:s_(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:s_(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:s_(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:s_(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:s_(+t),l):r},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:s_(+t),l):a},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:s_(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l};function C_(t){this._context=t}C_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var k_=function(t){return new C_(t)};function P_(t){return t[0]}function A_(t){return t[1]}var O_=function(){var t=P_,e=A_,n=s_(!0),i=null,r=k_,a=null;function o(o){var s,l,u,c=o.length,h=!1;for(null==i&&(a=r(u=$r())),s=0;s<=c;++s)!(s<c&&n(l=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(l,s,o),+e(l,s,o));if(u)return a=null,u+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:s_(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:s_(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:s_(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(a=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=a=null:a=r(i=t),o):i},o},L_=function(){var t=P_,e=null,n=s_(0),i=A_,r=s_(!0),a=null,o=k_,s=null;function l(l){var u,c,h,f,d,p=l.length,m=!1,g=new Array(p),v=new Array(p);for(null==a&&(s=o(d=$r())),u=0;u<=p;++u){if(!(u<p&&r(f=l[u],u,l))===m)if(m=!m)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=c;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[u]=+t(f,u,l),v[u]=+n(f,u,l),s.point(e?+e(f,u,l):g[u],i?+i(f,u,l):v[u]))}if(d)return s=null,d+""||null}function u(){return O_().defined(r).curve(o).context(a)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:s_(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:s_(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:s_(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:s_(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:s_(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:s_(+t),l):i},l.lineX0=l.lineY0=function(){return u().x(t).y(n)},l.lineY1=function(){return u().x(t).y(i)},l.lineX1=function(){return u().x(e).y(n)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:s_(!!t),l):r},l.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),l):o},l.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),l):a},l},I_=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},N_=function(t){return t},R_=function(){var t=N_,e=I_,n=null,i=s_(0),r=s_(y_),a=s_(0);function o(o){var s,l,u,c,h,f=o.length,d=0,p=new Array(f),m=new Array(f),g=+i.apply(this,arguments),v=Math.min(y_,Math.max(-y_,r.apply(this,arguments)-g)),y=Math.min(Math.abs(v)/f,a.apply(this,arguments)),b=y*(v<0?-1:1);for(s=0;s<f;++s)(h=m[p[s]=s]=+t(o[s],s,o))>0&&(d+=h);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(o[t],o[e])})),s=0,u=d?(v-f*b)/d:0;s<f;++s,g=c)l=p[s],c=g+((h=m[l])>0?h*u:0)+b,m[l]={data:o[l],index:s,value:h,startAngle:g,endAngle:c,padAngle:y};return m}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:s_(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:s_(+t),o):i},o.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:s_(+t),o):r},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:s_(+t),o):a},o},D_=B_(k_);function z_(t){this._curve=t}function B_(t){function e(e){return new z_(t(e))}return e._curve=t,e}function F_(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(B_(t)):e()._curve},t}z_.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var j_=function(){return F_(O_().curve(D_))},V_=function(){var t=L_().curve(D_),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return F_(n())},delete t.lineX0,t.lineEndAngle=function(){return F_(i())},delete t.lineX1,t.lineInnerRadius=function(){return F_(r())},delete t.lineY0,t.lineOuterRadius=function(){return F_(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(B_(t)):e()._curve},t},U_=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},H_=Array.prototype.slice;function G_(t){return t.source}function W_(t){return t.target}function q_(t){var e=G_,n=W_,i=P_,r=A_,a=null;function o(){var o,s=H_.call(arguments),l=e.apply(this,s),u=n.apply(this,s);if(a||(a=o=$r()),t(a,+i.apply(this,(s[0]=l,s)),+r.apply(this,s),+i.apply(this,(s[0]=u,s)),+r.apply(this,s)),o)return a=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(i="function"==typeof t?t:s_(+t),o):i},o.y=function(t){return arguments.length?(r="function"==typeof t?t:s_(+t),o):r},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}function Q_(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function Y_(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function X_(t,e,n,i,r){var a=U_(e,n),o=U_(e,n=(n+r)/2),s=U_(i,n),l=U_(i,r);t.moveTo(a[0],a[1]),t.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function $_(){return q_(Q_)}function Z_(){return q_(Y_)}function J_(){var t=q_(X_);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var K_={draw:function(t,e){var n=Math.sqrt(e/g_);t.moveTo(n,0),t.arc(0,0,n,0,y_)}},tw={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ew=Math.sqrt(1/3),nw=2*ew,iw={draw:function(t,e){var n=Math.sqrt(e/nw),i=n*ew;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},rw=Math.sin(g_/10)/Math.sin(7*g_/10),aw=Math.sin(y_/10)*rw,ow=-Math.cos(y_/10)*rw,sw={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=aw*n,r=ow*n;t.moveTo(0,-n),t.lineTo(i,r);for(var a=1;a<5;++a){var o=y_*a/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n),t.lineTo(s*i-l*r,l*i+s*r)}t.closePath()}},lw={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},uw=Math.sqrt(3),cw={draw:function(t,e){var n=-Math.sqrt(e/(3*uw));t.moveTo(0,2*n),t.lineTo(-uw*n,-n),t.lineTo(uw*n,-n),t.closePath()}},hw=Math.sqrt(3)/2,fw=1/Math.sqrt(12),dw=3*(fw/2+1),pw={draw:function(t,e){var n=Math.sqrt(e/dw),i=n/2,r=n*fw,a=i,o=n*fw+n,s=-a,l=o;t.moveTo(i,r),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(-.5*i-hw*r,hw*i+-.5*r),t.lineTo(-.5*a-hw*o,hw*a+-.5*o),t.lineTo(-.5*s-hw*l,hw*s+-.5*l),t.lineTo(-.5*i+hw*r,-.5*r-hw*i),t.lineTo(-.5*a+hw*o,-.5*o-hw*a),t.lineTo(-.5*s+hw*l,-.5*l-hw*s),t.closePath()}},mw=[K_,tw,iw,lw,sw,cw,pw],gw=function(){var t=s_(K_),e=s_(64),n=null;function i(){var i;if(n||(n=i=$r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:s_(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:s_(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},vw=function(){};function yw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bw(t){this._context=t}bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var xw=function(t){return new bw(t)};function _w(t){this._context=t}_w.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var ww=function(t){return new _w(t)};function Sw(t){this._context=t}Sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:yw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Ew=function(t){return new Sw(t)};function Mw(t,e){this._basis=new bw(t),this._beta=e}Mw.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],a=e[0],o=t[n]-r,s=e[n]-a,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*o),this._beta*e[l]+(1-this._beta)*(a+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Tw=function t(e){function n(t){return 1===e?new bw(t):new Mw(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Cw(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function kw(t,e){this._context=t,this._k=(1-e)/6}kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Cw(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Cw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pw=function t(e){function n(t){return new kw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Aw(t,e){this._context=t,this._k=(1-e)/6}Aw.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Cw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ow=function t(e){function n(t){return new Aw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Lw(t,e){this._context=t,this._k=(1-e)/6}Lw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Cw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Iw=function t(e){function n(t){return new Lw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Nw(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>m_){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>m_){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}function Rw(t,e){this._context=t,this._alpha=e}Rw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Nw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Dw=function t(e){function n(t){return e?new Rw(t,e):new kw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function zw(t,e){this._context=t,this._alpha=e}zw.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Nw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bw=function t(e){function n(t){return e?new zw(t,e):new Aw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Fw(t,e){this._context=t,this._alpha=e}Fw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Nw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var jw=function t(e){function n(t){return e?new Fw(t,e):new Lw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Vw(t){this._context=t}Vw.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Uw=function(t){return new Vw(t)};function Hw(t){return t<0?-1:1}function Gw(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Hw(a)+Hw(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Ww(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qw(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function Qw(t){this._context=t}function Yw(t){this._context=new Xw(t)}function Xw(t){this._context=t}function $w(t){return new Qw(t)}function Zw(t){return new Yw(t)}function Jw(t){this._context=t}function Kw(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(r[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;e>=0;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}Qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qw(this,this._t0,Ww(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qw(this,Ww(this,n=Gw(this,t,e)),n);break;default:qw(this,this._t0,n=Gw(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Yw.prototype=Object.create(Qw.prototype)).point=function(t,e){Qw.prototype.point.call(this,e,t)},Xw.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},Jw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Kw(t),r=Kw(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var tS=function(t){return new Jw(t)};function eS(t,e){this._context=t,this._t=e}eS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var nS=function(t){return new eS(t,.5)};function iS(t){return new eS(t,0)}function rS(t){return new eS(t,1)}var aS=function(t,e){if((r=t.length)>1)for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]},oS=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function sS(t,e){return t[e]}var lS=function(){var t=s_([]),e=oS,n=aS,i=sS;function r(r){var a,o,s=t.apply(this,arguments),l=r.length,u=s.length,c=new Array(u);for(a=0;a<u;++a){for(var h,f=s[a],d=c[a]=new Array(l),p=0;p<l;++p)d[p]=h=[0,+i(r[p],f,p,r)],h.data=r[p];d.key=f}for(a=0,o=e(c);a<u;++a)c[o[a]].index=a;return n(c,o),c}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:s_(H_.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:s_(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?oS:"function"==typeof t?t:s_(H_.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?aS:t,r):n},r},uS=function(t,e){if((i=t.length)>0){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}aS(t,e)}},cS=function(t,e){if((s=t.length)>0)for(var n,i,r,a,o,s,l=0,u=t[e[0]].length;l<u;++l)for(a=o=0,n=0;n<s;++n)(r=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):(i[0]=0,i[1]=r)},hS=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}aS(t,e)}},fS=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,l=0,u=0;s<r;++s){for(var c=t[e[s]],h=c[o][1]||0,f=(h-(c[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}l+=h,u+=f*h}n[o-1][1]+=n[o-1][0]=a,l&&(a-=u/l)}n[o-1][1]+=n[o-1][0]=a,aS(t,e)}},dS=function(t){var e=t.map(pS);return oS(t).sort((function(t,n){return e[t]-e[n]}))};function pS(t){for(var e,n=-1,i=0,r=t.length,a=-1/0;++n<r;)(e=+t[n][1])>a&&(a=e,i=n);return i}var mS=function(t){var e=t.map(gS);return oS(t).sort((function(t,n){return e[t]-e[n]}))};function gS(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}var vS=function(t){return mS(t).reverse()},yS=function(t){var e,n,i=t.length,r=t.map(gS),a=dS(t),o=0,s=0,l=[],u=[];for(e=0;e<i;++e)n=a[e],o<s?(o+=r[n],l.push(n)):(s+=r[n],u.push(n));return u.reverse().concat(l)},bS=function(t){return oS(t).reverse()};var xS=Date.prototype.toISOString?function(t){return t.toISOString()}:Lv("%Y-%m-%dT%H:%M:%S.%LZ");var _S=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Iv("%Y-%m-%dT%H:%M:%S.%LZ"),wS=function(t,e,n){var i=new $n,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?Yn():+n,i.restart((function a(o){o+=r,i.restart(a,r+=e,n),t(o)}),e,n),i)},SS=function(t){return function(){return t}};function ES(t){return t[0]}function MS(t){return t[1]}function TS(){this._=null}function CS(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function kS(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function PS(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function AS(t){for(;t.L;)t=t.L;return t}TS.prototype={constructor:TS,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=AS(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(kS(this,n),n=(t=n).U),n.C=!1,i.C=!0,PS(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(PS(this,n),n=(t=n).U),n.C=!1,i.C=!0,kS(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?AS(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,kS(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,PS(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,kS(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,PS(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,kS(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,PS(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var OS=TS;function LS(t,e,n,i){var r=[null,null],a=nE.push(r)-1;return r.left=t,r.right=e,n&&NS(r,t,e,n),i&&NS(r,e,t,i),tE[t.index].halfedges.push(a),tE[e.index].halfedges.push(a),r}function IS(t,e,n){var i=[e,n];return i.left=t,i}function NS(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function RS(t,e,n,i,r){var a,o=t[0],s=t[1],l=o[0],u=o[1],c=0,h=1,f=s[0]-l,d=s[1]-u;if(a=e-l,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>c&&(c=a)}if(a=i-l,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<h&&(h=a)}if(a=n-u,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>c&&(c=a)}if(a=r-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<h&&(h=a)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*f,u+c*d]),h<1&&(t[1]=[l+h*f,u+h*d]),!0)}}}}}function DS(t,e,n,i,r){var a=t[1];if(a)return!0;var o,s,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],d=c[0],p=c[1],m=(h+d)/2,g=(f+p)/2;if(p===f){if(m<e||m>=i)return;if(h>d){if(l){if(l[1]>=r)return}else l=[m,n];a=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];a=[m,n]}}else if(s=g-(o=(h-d)/(p-f))*m,o<-1||o>1)if(h>d){if(l){if(l[1]>=r)return}else l=[(n-s)/o,n];a=[(r-s)/o,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/o,r];a=[(n-s)/o,n]}else if(f<p){if(l){if(l[0]>=i)return}else l=[e,o*e+s];a=[i,o*i+s]}else{if(l){if(l[0]<e)return}else l=[i,o*i+s];a=[e,o*e+s]}return t[0]=l,t[1]=a,!0}function zS(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function BS(t,e){return e[+(e.left!==t.site)]}function FS(t,e){return e[+(e.left===t.site)]}var jS,VS=[];function US(){CS(this),this.x=this.y=this.arc=this.site=this.cy=null}function HS(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r[0],s=r[1],l=i[0]-o,u=i[1]-s,c=a[0]-o,h=a[1]-s,f=2*(l*h-u*c);if(!(f>=-rE)){var d=l*l+u*u,p=c*c+h*h,m=(h*d-u*p)/f,g=(l*p-c*d)/f,v=VS.pop()||new US;v.arc=t,v.site=r,v.x=m+o,v.y=(v.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=v;for(var y=null,b=eE._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}eE.insert(y,v),y||(jS=v)}}}}function GS(t){var e=t.circle;e&&(e.P||(jS=e.N),eE.remove(e),VS.push(e),CS(e),t.circle=null)}var WS=[];function qS(){CS(this),this.edge=this.site=this.circle=null}function QS(t){var e=WS.pop()||new qS;return e.site=t,e}function YS(t){GS(t),KS.remove(t),WS.push(t),CS(t)}function XS(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],a=t.P,o=t.N,s=[t];YS(t);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<iE&&Math.abs(i-l.circle.cy)<iE;)a=l.P,s.unshift(l),YS(l),l=a;s.unshift(l),GS(l);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<iE&&Math.abs(i-u.circle.cy)<iE;)o=u.N,s.push(u),YS(u),u=o;s.push(u),GS(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],NS(u.edge,l.site,u.site,r);l=s[0],(u=s[h-1]).edge=LS(l.site,u.site,null,r),HS(l),HS(u)}function $S(t){for(var e,n,i,r,a=t[0],o=t[1],s=KS._;s;)if((i=ZS(s,o)-a)>iE)s=s.L;else{if(!((r=a-JS(s,o))>iE)){i>-iE?(e=s.P,n=s):r>-iE?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){tE[t.index]={site:t,halfedges:[]}}(t);var l=QS(t);if(KS.insert(e,l),e||n){if(e===n)return GS(e),n=QS(e.site),KS.insert(l,n),l.edge=n.edge=LS(e.site,l.site),HS(e),void HS(n);if(n){GS(e),GS(n);var u=e.site,c=u[0],h=u[1],f=t[0]-c,d=t[1]-h,p=n.site,m=p[0]-c,g=p[1]-h,v=2*(f*g-d*m),y=f*f+d*d,b=m*m+g*g,x=[(g*y-d*b)/v+c,(f*b-m*y)/v+h];NS(n.edge,u,p,x),l.edge=LS(u,t,null,x),n.edge=LS(t,p,null,x),HS(e),HS(n)}else l.edge=LS(e.site,l.site)}}function ZS(t,e){var n=t.site,i=n[0],r=n[1],a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-i,h=1/a-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+r-a/2)))/h+i:(i+s)/2}function JS(t,e){var n=t.N;if(n)return ZS(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var KS,tE,eE,nE,iE=1e-6,rE=1e-12;function aE(t,e){return e[1]-t[1]||e[0]-t[0]}function oE(t,e){var n,i,r,a=t.sort(aE).pop();for(nE=[],tE=new Array(t.length),KS=new OS,eE=new OS;;)if(r=jS,a&&(!r||a[1]<r.y||a[1]===r.y&&a[0]<r.x))a[0]===n&&a[1]===i||($S(a),n=a[0],i=a[1]),a=t.pop();else{if(!r)break;XS(r.arc)}if(function(){for(var t,e,n,i,r=0,a=tE.length;r<a;++r)if((t=tE[r])&&(i=(e=t.halfedges).length)){var o=new Array(i),s=new Array(i);for(n=0;n<i;++n)o[n]=n,s[n]=zS(t,nE[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[o[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,a=nE.length;a--;)DS(r=nE[a],t,e,n,i)&&RS(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>iE||Math.abs(r[0][1]-r[1][1])>iE)||delete nE[a]}(o,s,l,u),function(t,e,n,i){var r,a,o,s,l,u,c,h,f,d,p,m,g=tE.length,v=!0;for(r=0;r<g;++r)if(a=tE[r]){for(o=a.site,s=(l=a.halfedges).length;s--;)nE[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)p=(d=FS(a,nE[l[s]]))[0],m=d[1],h=(c=BS(a,nE[l[++s%u]]))[0],f=c[1],(Math.abs(p-h)>iE||Math.abs(m-f)>iE)&&(l.splice(s,0,nE.push(IS(o,d,Math.abs(p-t)<iE&&i-m>iE?[t,Math.abs(h-t)<iE?f:i]:Math.abs(m-i)<iE&&n-p>iE?[Math.abs(f-i)<iE?h:n,i]:Math.abs(p-n)<iE&&m-e>iE?[n,Math.abs(h-n)<iE?f:e]:Math.abs(m-e)<iE&&p-t>iE?[Math.abs(f-e)<iE?h:t,e]:null))-1),++u);u&&(v=!1)}if(v){var y,b,x,_=1/0;for(r=0,v=null;r<g;++r)(a=tE[r])&&(x=(y=(o=a.site)[0]-t)*y+(b=o[1]-e)*b)<_&&(_=x,v=a);if(v){var w=[t,e],S=[t,i],E=[n,i],M=[n,e];v.halfedges.push(nE.push(IS(o=v.site,w,S))-1,nE.push(IS(o,S,E))-1,nE.push(IS(o,E,M))-1,nE.push(IS(o,M,w))-1)}}for(r=0;r<g;++r)(a=tE[r])&&(a.halfedges.length||delete tE[r])}(o,s,l,u)}this.edges=nE,this.cells=tE,KS=eE=nE=tE=null}oE.prototype={constructor:oE,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return BS(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(a=(r=n.halfedges).length)for(var r,a,o,s,l,u,c=n.site,h=-1,f=e[r[a-1]],d=f.left===c?f.right:f.left;++h<a;)o=d,d=(f=e[r[h]]).left===c?f.right:f.left,o&&d&&i<o.index&&i<d.index&&(l=o,u=d,((s=c)[0]-u[0])*(l[1]-s[1])-(s[0]-l[0])*(u[1]-s[1])<0)&&t.push([c.data,o.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,a=this,o=a._found||0,s=a.cells.length;!(r=a.cells[o]);)if(++o>=s)return null;var l=t-r.site[0],u=e-r.site[1],c=l*l+u*u;do{r=a.cells[i=o],o=null,r.halfedges.forEach((function(n){var i=a.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,o=s.index)}}))}while(null!==o);return a._found=i,null==n||c<=n*n?r.site:null}};var sE=function(){var t=ES,e=MS,n=null;function i(i){return new oE(i.map((function(n,r){var a=[Math.round(t(n,r,i)/iE)*iE,Math.round(e(n,r,i)/iE)*iE];return a.index=r,a.data=n,a})),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:SS(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:SS(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},lE=function(t){return function(){return t}};function uE(t,e,n){this.target=t,this.type=e,this.transform=n}function cE(t,e,n){this.k=t,this.x=e,this.y=n}cE.prototype={constructor:cE,scale:function(t){return 1===t?this:new cE(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new cE(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var hE=new cE(1,0,0);function fE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return hE;return t.__zoom}function dE(){pe.stopImmediatePropagation()}fE.prototype=cE.prototype;var pE=function(){pe.preventDefault(),pe.stopImmediatePropagation()};function mE(){return!pe.ctrlKey&&!pe.button}function gE(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function vE(){return this.__zoom||hE}function yE(){return-pe.deltaY*(1===pe.deltaMode?.05:pe.deltaMode?1:.002)}function bE(){return navigator.maxTouchPoints||"ontouchstart"in this}function xE(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var _E=function(){var t,e,n=mE,i=gE,r=xE,a=yE,o=bE,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,c=Zp,h=mt("start","zoom","end"),f=500,d=150,p=0;function m(t){t.property("__zoom",vE).on("wheel.zoom",w).on("mousedown.zoom",S).on("dblclick.zoom",E).filter(o).on("touchstart.zoom",M).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new cE(e,t.x,t.y)}function v(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new cE(t.k,i,r)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n){t.on("start.zoom",(function(){x(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).end()})).tween("zoom",(function(){var t=this,r=arguments,a=x(t,r),o=i.apply(t,r),s=null==n?y(o):"function"==typeof n?n.apply(t,r):n,l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=t.__zoom,h="function"==typeof e?e.apply(t,r):e,f=c(u.invert(s).concat(l/u.k),h.invert(s).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=l/e[2];t=new cE(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function x(t,e,n){return!n&&t.__zooming||new _(t,e)}function _(t,e){this.that=t,this.args=e,this.active=0,this.extent=i.apply(t,e),this.taps=0}function w(){if(n.apply(this,arguments)){var t=x(this,arguments),e=this.__zoom,i=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,a.apply(this,arguments)))),o=Bn(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===i)return;t.mouse=[o,e.invert(o)],xi(this),t.start()}pE(),t.wheel=setTimeout((function(){t.wheel=null,t.end()}),d),t.zoom("mouse",r(v(g(e,i),t.mouse[0],t.mouse[1]),t.extent,l))}}function S(){if(!e&&n.apply(this,arguments)){var t=x(this,arguments,!0),i=ke(pe.view).on("mousemove.zoom",(function(){if(pE(),!t.moved){var e=pe.clientX-o,n=pe.clientY-s;t.moved=e*e+n*n>p}t.zoom("mouse",r(v(t.that.__zoom,t.mouse[0]=Bn(t.that),t.mouse[1]),t.extent,l))}),!0).on("mouseup.zoom",(function(){i.on("mousemove.zoom mouseup.zoom",null),Le(pe.view,t.moved),pE(),t.end()}),!0),a=Bn(this),o=pe.clientX,s=pe.clientY;Oe(pe.view),dE(),t.mouse=[a,this.__zoom.invert(a)],xi(this),t.start()}}function E(){if(n.apply(this,arguments)){var t=this.__zoom,e=Bn(this),a=t.invert(e),o=t.k*(pe.shiftKey?.5:2),s=r(v(g(t,o),e,a),i.apply(this,arguments),l);pE(),u>0?ke(this).transition().duration(u).call(b,s,e):ke(this).call(m.transform,s)}}function M(){if(n.apply(this,arguments)){var e,i,r,a,o=pe.touches,s=o.length,l=x(this,arguments,pe.changedTouches.length===s);for(dE(),i=0;i<s;++i)r=o[i],a=[a=zn(this,o,r.identifier),this.__zoom.invert(a),r.identifier],l.touch0?l.touch1||l.touch0[2]===a[2]||(l.touch1=a,l.taps=0):(l.touch0=a,e=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(l.taps<2&&(t=setTimeout((function(){t=null}),f)),xi(this),l.start())}}function T(){if(this.__zooming){var e,n,i,a,o=x(this,arguments),s=pe.changedTouches,u=s.length;for(pE(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<u;++e)n=s[e],i=zn(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=i:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=i);if(n=o.that.__zoom,o.touch1){var c=o.touch0[0],h=o.touch0[1],f=o.touch1[0],d=o.touch1[1],p=(p=f[0]-c[0])*p+(p=f[1]-c[1])*p,m=(m=d[0]-h[0])*m+(m=d[1]-h[1])*m;n=g(n,Math.sqrt(p/m)),i=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(h[0]+d[0])/2,(h[1]+d[1])/2]}else{if(!o.touch0)return;i=o.touch0[0],a=o.touch0[1]}o.zoom("touch",r(v(n,i,a),o.extent,l))}}function C(){if(this.__zooming){var t,n,i=x(this,arguments),r=pe.changedTouches,a=r.length;for(dE(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),f),t=0;t<a;++t)n=r[t],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var o=ke(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return m.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",vE),t!==i?b(t,e,n):i.interrupt().each((function(){x(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},m.scaleBy=function(t,e,n){m.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},m.scaleTo=function(t,e,n){m.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,o=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,s=a.invert(o),u="function"==typeof e?e.apply(this,arguments):e;return r(v(g(a,u),o,s),t,l)}),n)},m.translateBy=function(t,e,n){m.transform(t,(function(){return r(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}))},m.translateTo=function(t,e,n,a){m.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==a?y(t):"function"==typeof a?a.apply(this,arguments):a;return r(hE.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),a)},_.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){xe(new uE(m,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},m.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:lE(+t),m):a},m.filter=function(t){return arguments.length?(n="function"==typeof t?t:lE(!!t),m):n},m.touchable=function(t){return arguments.length?(o="function"==typeof t?t:lE(!!t),m):o},m.extent=function(t){return arguments.length?(i="function"==typeof t?t:lE([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):i},m.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],m):[s[0],s[1]]},m.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],m):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},m.constrain=function(t){return arguments.length?(r=t,m):r},m.duration=function(t){return arguments.length?(u=+t,m):u},m.interpolate=function(t){return arguments.length?(c=t,m):c},m.on=function(){var t=h.on.apply(h,arguments);return t===h?m:t},m.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,m):Math.sqrt(p)},m};n.d(e,"version",(function(){return"5.14.2"})),n.d(e,"bisect",(function(){return l})),n.d(e,"bisectRight",(function(){return o})),n.d(e,"bisectLeft",(function(){return s})),n.d(e,"ascending",(function(){return i})),n.d(e,"bisector",(function(){return r})),n.d(e,"cross",(function(){return h})),n.d(e,"descending",(function(){return f})),n.d(e,"deviation",(function(){return m})),n.d(e,"extent",(function(){return g})),n.d(e,"histogram",(function(){return A})),n.d(e,"thresholdFreedmanDiaconis",(function(){return L})),n.d(e,"thresholdScott",(function(){return I})),n.d(e,"thresholdSturges",(function(){return P})),n.d(e,"max",(function(){return N})),n.d(e,"mean",(function(){return R})),n.d(e,"median",(function(){return D})),n.d(e,"merge",(function(){return z})),n.d(e,"min",(function(){return B})),n.d(e,"pairs",(function(){return u})),n.d(e,"permute",(function(){return F})),n.d(e,"quantile",(function(){return O})),n.d(e,"range",(function(){return w})),n.d(e,"scan",(function(){return j})),n.d(e,"shuffle",(function(){return V})),n.d(e,"sum",(function(){return U})),n.d(e,"ticks",(function(){return T})),n.d(e,"tickIncrement",(function(){return C})),n.d(e,"tickStep",(function(){return k})),n.d(e,"transpose",(function(){return H})),n.d(e,"variance",(function(){return p})),n.d(e,"zip",(function(){return W})),n.d(e,"axisTop",(function(){return at})),n.d(e,"axisRight",(function(){return ot})),n.d(e,"axisBottom",(function(){return st})),n.d(e,"axisLeft",(function(){return lt})),n.d(e,"brush",(function(){return Ir})),n.d(e,"brushX",(function(){return Or})),n.d(e,"brushY",(function(){return Lr})),n.d(e,"brushSelection",(function(){return Ar})),n.d(e,"chord",(function(){return Ur})),n.d(e,"ribbon",(function(){return na})),n.d(e,"nest",(function(){return oa})),n.d(e,"set",(function(){return pa})),n.d(e,"map",(function(){return aa})),n.d(e,"keys",(function(){return ma})),n.d(e,"values",(function(){return ga})),n.d(e,"entries",(function(){return va})),n.d(e,"color",(function(){return Xe})),n.d(e,"rgb",(function(){return Ke})),n.d(e,"hsl",(function(){return sn})),n.d(e,"lab",(function(){return Pa})),n.d(e,"hcl",(function(){return za})),n.d(e,"lch",(function(){return Da})),n.d(e,"gray",(function(){return ka})),n.d(e,"cubehelix",(function(){return qa})),n.d(e,"contours",(function(){return io})),n.d(e,"contourDensity",(function(){return uo})),n.d(e,"dispatch",(function(){return mt})),n.d(e,"drag",(function(){return vo})),n.d(e,"dragDisable",(function(){return Oe})),n.d(e,"dragEnable",(function(){return Le})),n.d(e,"dsvFormat",(function(){return Co})),n.d(e,"csvParse",(function(){return Po})),n.d(e,"csvParseRows",(function(){return Ao})),n.d(e,"csvFormat",(function(){return Oo})),n.d(e,"csvFormatBody",(function(){return Lo})),n.d(e,"csvFormatRows",(function(){return Io})),n.d(e,"csvFormatRow",(function(){return No})),n.d(e,"csvFormatValue",(function(){return Ro})),n.d(e,"tsvParse",(function(){return zo})),n.d(e,"tsvParseRows",(function(){return Bo})),n.d(e,"tsvFormat",(function(){return Fo})),n.d(e,"tsvFormatBody",(function(){return jo})),n.d(e,"tsvFormatRows",(function(){return Vo})),n.d(e,"tsvFormatRow",(function(){return Uo})),n.d(e,"tsvFormatValue",(function(){return Ho})),n.d(e,"autoType",(function(){return Go})),n.d(e,"easeLinear",(function(){return qo})),n.d(e,"easeQuad",(function(){return Xo})),n.d(e,"easeQuadIn",(function(){return Qo})),n.d(e,"easeQuadOut",(function(){return Yo})),n.d(e,"easeQuadInOut",(function(){return Xo})),n.d(e,"easeCubic",(function(){return nr})),n.d(e,"easeCubicIn",(function(){return tr})),n.d(e,"easeCubicOut",(function(){return er})),n.d(e,"easeCubicInOut",(function(){return nr})),n.d(e,"easePoly",(function(){return Jo})),n.d(e,"easePolyIn",(function(){return $o})),n.d(e,"easePolyOut",(function(){return Zo})),n.d(e,"easePolyInOut",(function(){return Jo})),n.d(e,"easeSin",(function(){return is})),n.d(e,"easeSinIn",(function(){return es})),n.d(e,"easeSinOut",(function(){return ns})),n.d(e,"easeSinInOut",(function(){return is})),n.d(e,"easeExp",(function(){return os})),n.d(e,"easeExpIn",(function(){return rs})),n.d(e,"easeExpOut",(function(){return as})),n.d(e,"easeExpInOut",(function(){return os})),n.d(e,"easeCircle",(function(){return us})),n.d(e,"easeCircleIn",(function(){return ss})),n.d(e,"easeCircleOut",(function(){return ls})),n.d(e,"easeCircleInOut",(function(){return us})),n.d(e,"easeBounce",(function(){return _s})),n.d(e,"easeBounceIn",(function(){return xs})),n.d(e,"easeBounceOut",(function(){return _s})),n.d(e,"easeBounceInOut",(function(){return ws})),n.d(e,"easeBack",(function(){return Ms})),n.d(e,"easeBackIn",(function(){return Ss})),n.d(e,"easeBackOut",(function(){return Es})),n.d(e,"easeBackInOut",(function(){return Ms})),n.d(e,"easeElastic",(function(){return ks})),n.d(e,"easeElasticIn",(function(){return Cs})),n.d(e,"easeElasticOut",(function(){return ks})),n.d(e,"easeElasticInOut",(function(){return Ps})),n.d(e,"blob",(function(){return Os})),n.d(e,"buffer",(function(){return Is})),n.d(e,"dsv",(function(){return zs})),n.d(e,"csv",(function(){return Bs})),n.d(e,"tsv",(function(){return Fs})),n.d(e,"image",(function(){return js})),n.d(e,"json",(function(){return Us})),n.d(e,"text",(function(){return Rs})),n.d(e,"xml",(function(){return Gs})),n.d(e,"html",(function(){return Ws})),n.d(e,"svg",(function(){return qs})),n.d(e,"forceCenter",(function(){return Qs})),n.d(e,"forceCollide",(function(){return ol})),n.d(e,"forceLink",(function(){return ul})),n.d(e,"forceManyBody",(function(){return ml})),n.d(e,"forceRadial",(function(){return gl})),n.d(e,"forceSimulation",(function(){return pl})),n.d(e,"forceX",(function(){return vl})),n.d(e,"forceY",(function(){return yl})),n.d(e,"formatDefaultLocale",(function(){return Rl})),n.d(e,"format",(function(){return Tl})),n.d(e,"formatPrefix",(function(){return Cl})),n.d(e,"formatLocale",(function(){return Nl})),n.d(e,"formatSpecifier",(function(){return wl})),n.d(e,"FormatSpecifier",(function(){return Sl})),n.d(e,"precisionFixed",(function(){return Dl})),n.d(e,"precisionPrefix",(function(){return zl})),n.d(e,"precisionRound",(function(){return Bl})),n.d(e,"geoArea",(function(){return Ou})),n.d(e,"geoBounds",(function(){return Sc})),n.d(e,"geoCentroid",(function(){return Rc})),n.d(e,"geoCircle",(function(){return qc})),n.d(e,"geoClipAntimeridian",(function(){return rh})),n.d(e,"geoClipCircle",(function(){return ah})),n.d(e,"geoClipExtent",(function(){return dh})),n.d(e,"geoClipRectangle",(function(){return uh})),n.d(e,"geoContains",(function(){return Oh})),n.d(e,"geoDistance",(function(){return wh})),n.d(e,"geoGraticule",(function(){return Nh})),n.d(e,"geoGraticule10",(function(){return Rh})),n.d(e,"geoInterpolate",(function(){return jh})),n.d(e,"geoLength",(function(){return bh})),n.d(e,"geoPath",(function(){return Ff})),n.d(e,"geoAlbers",(function(){return ad})),n.d(e,"geoAlbersUsa",(function(){return od})),n.d(e,"geoAzimuthalEqualArea",(function(){return cd})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return ud})),n.d(e,"geoAzimuthalEquidistant",(function(){return fd})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return hd})),n.d(e,"geoConicConformal",(function(){return yd})),n.d(e,"geoConicConformalRaw",(function(){return vd})),n.d(e,"geoConicEqualArea",(function(){return rd})),n.d(e,"geoConicEqualAreaRaw",(function(){return id})),n.d(e,"geoConicEquidistant",(function(){return wd})),n.d(e,"geoConicEquidistantRaw",(function(){return _d})),n.d(e,"geoEqualEarth",(function(){return Pd})),n.d(e,"geoEqualEarthRaw",(function(){return kd})),n.d(e,"geoEquirectangular",(function(){return xd})),n.d(e,"geoEquirectangularRaw",(function(){return bd})),n.d(e,"geoGnomonic",(function(){return Od})),n.d(e,"geoGnomonicRaw",(function(){return Ad})),n.d(e,"geoIdentity",(function(){return Id})),n.d(e,"geoProjection",(function(){return td})),n.d(e,"geoProjectionMutator",(function(){return ed})),n.d(e,"geoMercator",(function(){return pd})),n.d(e,"geoMercatorRaw",(function(){return dd})),n.d(e,"geoNaturalEarth1",(function(){return Rd})),n.d(e,"geoNaturalEarth1Raw",(function(){return Nd})),n.d(e,"geoOrthographic",(function(){return zd})),n.d(e,"geoOrthographicRaw",(function(){return Dd})),n.d(e,"geoStereographic",(function(){return Fd})),n.d(e,"geoStereographicRaw",(function(){return Bd})),n.d(e,"geoTransverseMercator",(function(){return Vd})),n.d(e,"geoTransverseMercatorRaw",(function(){return jd})),n.d(e,"geoRotation",(function(){return Hc})),n.d(e,"geoStream",(function(){return Su})),n.d(e,"geoTransform",(function(){return jf})),n.d(e,"cluster",(function(){return Wd})),n.d(e,"hierarchy",(function(){return Qd})),n.d(e,"pack",(function(){return yp})),n.d(e,"packSiblings",(function(){return fp})),n.d(e,"packEnclose",(function(){return Kd})),n.d(e,"partition",(function(){return Ep})),n.d(e,"stratify",(function(){return Ap})),n.d(e,"tree",(function(){return zp})),n.d(e,"treemap",(function(){return Up})),n.d(e,"treemapBinary",(function(){return Hp})),n.d(e,"treemapDice",(function(){return Sp})),n.d(e,"treemapSlice",(function(){return Bp})),n.d(e,"treemapSliceDice",(function(){return Gp})),n.d(e,"treemapSquarify",(function(){return Vp})),n.d(e,"treemapResquarify",(function(){return Wp})),n.d(e,"interpolate",(function(){return Nn})),n.d(e,"interpolateArray",(function(){return En})),n.d(e,"interpolateBasis",(function(){return hn})),n.d(e,"interpolateBasisClosed",(function(){return fn})),n.d(e,"interpolateDate",(function(){return Tn})),n.d(e,"interpolateDiscrete",(function(){return qp})),n.d(e,"interpolateHue",(function(){return Qp})),n.d(e,"interpolateNumber",(function(){return Cn})),n.d(e,"interpolateNumberArray",(function(){return wn})),n.d(e,"interpolateObject",(function(){return kn})),n.d(e,"interpolateRound",(function(){return Yp})),n.d(e,"interpolateString",(function(){return In})),n.d(e,"interpolateTransformCss",(function(){return Mi})),n.d(e,"interpolateTransformSvg",(function(){return Ti})),n.d(e,"interpolateZoom",(function(){return Zp})),n.d(e,"interpolateRgb",(function(){return yn})),n.d(e,"interpolateRgbBasis",(function(){return xn})),n.d(e,"interpolateRgbBasisClosed",(function(){return _n})),n.d(e,"interpolateHsl",(function(){return Kp})),n.d(e,"interpolateHslLong",(function(){return tm})),n.d(e,"interpolateLab",(function(){return em})),n.d(e,"interpolateHcl",(function(){return im})),n.d(e,"interpolateHclLong",(function(){return rm})),n.d(e,"interpolateCubehelix",(function(){return om})),n.d(e,"interpolateCubehelixLong",(function(){return sm})),n.d(e,"piecewise",(function(){return lm})),n.d(e,"quantize",(function(){return um})),n.d(e,"path",(function(){return $r})),n.d(e,"polygonArea",(function(){return cm})),n.d(e,"polygonCentroid",(function(){return hm})),n.d(e,"polygonHull",(function(){return mm})),n.d(e,"polygonContains",(function(){return gm})),n.d(e,"polygonLength",(function(){return vm})),n.d(e,"quadtree",(function(){return tl})),n.d(e,"randomUniform",(function(){return bm})),n.d(e,"randomNormal",(function(){return xm})),n.d(e,"randomLogNormal",(function(){return _m})),n.d(e,"randomBates",(function(){return Sm})),n.d(e,"randomIrwinHall",(function(){return wm})),n.d(e,"randomExponential",(function(){return Em})),n.d(e,"scaleBand",(function(){return Lm})),n.d(e,"scalePoint",(function(){return Im})),n.d(e,"scaleIdentity",(function(){return Ym})),n.d(e,"scaleLinear",(function(){return Qm})),n.d(e,"scaleLog",(function(){return ig})),n.d(e,"scaleSymlog",(function(){return sg})),n.d(e,"scaleOrdinal",(function(){return Om})),n.d(e,"scaleImplicit",(function(){return Am})),n.d(e,"scalePow",(function(){return fg})),n.d(e,"scaleSqrt",(function(){return dg})),n.d(e,"scaleQuantile",(function(){return pg})),n.d(e,"scaleQuantize",(function(){return mg})),n.d(e,"scaleThreshold",(function(){return gg})),n.d(e,"scaleTime",(function(){return nb})),n.d(e,"scaleUtc",(function(){return fb})),n.d(e,"scaleSequential",(function(){return mb})),n.d(e,"scaleSequentialLog",(function(){return gb})),n.d(e,"scaleSequentialPow",(function(){return yb})),n.d(e,"scaleSequentialSqrt",(function(){return bb})),n.d(e,"scaleSequentialSymlog",(function(){return vb})),n.d(e,"scaleSequentialQuantile",(function(){return xb})),n.d(e,"scaleDiverging",(function(){return wb})),n.d(e,"scaleDivergingLog",(function(){return Sb})),n.d(e,"scaleDivergingPow",(function(){return Mb})),n.d(e,"scaleDivergingSqrt",(function(){return Tb})),n.d(e,"scaleDivergingSymlog",(function(){return Eb})),n.d(e,"tickFormat",(function(){return Wm})),n.d(e,"schemeCategory10",(function(){return kb})),n.d(e,"schemeAccent",(function(){return Pb})),n.d(e,"schemeDark2",(function(){return Ab})),n.d(e,"schemePaired",(function(){return Ob})),n.d(e,"schemePastel1",(function(){return Lb})),n.d(e,"schemePastel2",(function(){return Ib})),n.d(e,"schemeSet1",(function(){return Nb})),n.d(e,"schemeSet2",(function(){return Rb})),n.d(e,"schemeSet3",(function(){return Db})),n.d(e,"schemeTableau10",(function(){return zb})),n.d(e,"interpolateBrBG",(function(){return jb})),n.d(e,"schemeBrBG",(function(){return Fb})),n.d(e,"interpolatePRGn",(function(){return Ub})),n.d(e,"schemePRGn",(function(){return Vb})),n.d(e,"interpolatePiYG",(function(){return Gb})),n.d(e,"schemePiYG",(function(){return Hb})),n.d(e,"interpolatePuOr",(function(){return qb})),n.d(e,"schemePuOr",(function(){return Wb})),n.d(e,"interpolateRdBu",(function(){return Yb})),n.d(e,"schemeRdBu",(function(){return Qb})),n.d(e,"interpolateRdGy",(function(){return $b})),n.d(e,"schemeRdGy",(function(){return Xb})),n.d(e,"interpolateRdYlBu",(function(){return Jb})),n.d(e,"schemeRdYlBu",(function(){return Zb})),n.d(e,"interpolateRdYlGn",(function(){return tx})),n.d(e,"schemeRdYlGn",(function(){return Kb})),n.d(e,"interpolateSpectral",(function(){return nx})),n.d(e,"schemeSpectral",(function(){return ex})),n.d(e,"interpolateBuGn",(function(){return rx})),n.d(e,"schemeBuGn",(function(){return ix})),n.d(e,"interpolateBuPu",(function(){return ox})),n.d(e,"schemeBuPu",(function(){return ax})),n.d(e,"interpolateGnBu",(function(){return lx})),n.d(e,"schemeGnBu",(function(){return sx})),n.d(e,"interpolateOrRd",(function(){return cx})),n.d(e,"schemeOrRd",(function(){return ux})),n.d(e,"interpolatePuBuGn",(function(){return fx})),n.d(e,"schemePuBuGn",(function(){return hx})),n.d(e,"interpolatePuBu",(function(){return px})),n.d(e,"schemePuBu",(function(){return dx})),n.d(e,"interpolatePuRd",(function(){return gx})),n.d(e,"schemePuRd",(function(){return mx})),n.d(e,"interpolateRdPu",(function(){return yx})),n.d(e,"schemeRdPu",(function(){return vx})),n.d(e,"interpolateYlGnBu",(function(){return xx})),n.d(e,"schemeYlGnBu",(function(){return bx})),n.d(e,"interpolateYlGn",(function(){return wx})),n.d(e,"schemeYlGn",(function(){return _x})),n.d(e,"interpolateYlOrBr",(function(){return Ex})),n.d(e,"schemeYlOrBr",(function(){return Sx})),n.d(e,"interpolateYlOrRd",(function(){return Tx})),n.d(e,"schemeYlOrRd",(function(){return Mx})),n.d(e,"interpolateBlues",(function(){return kx})),n.d(e,"schemeBlues",(function(){return Cx})),n.d(e,"interpolateGreens",(function(){return Ax})),n.d(e,"schemeGreens",(function(){return Px})),n.d(e,"interpolateGreys",(function(){return Lx})),n.d(e,"schemeGreys",(function(){return Ox})),n.d(e,"interpolatePurples",(function(){return Nx})),n.d(e,"schemePurples",(function(){return Ix})),n.d(e,"interpolateReds",(function(){return Dx})),n.d(e,"schemeReds",(function(){return Rx})),n.d(e,"interpolateOranges",(function(){return Bx})),n.d(e,"schemeOranges",(function(){return zx})),n.d(e,"interpolateCividis",(function(){return Fx})),n.d(e,"interpolateCubehelixDefault",(function(){return jx})),n.d(e,"interpolateRainbow",(function(){return Gx})),n.d(e,"interpolateWarm",(function(){return Vx})),n.d(e,"interpolateCool",(function(){return Ux})),n.d(e,"interpolateSinebow",(function(){return Yx})),n.d(e,"interpolateTurbo",(function(){return Xx})),n.d(e,"interpolateViridis",(function(){return Zx})),n.d(e,"interpolateMagma",(function(){return Jx})),n.d(e,"interpolateInferno",(function(){return Kx})),n.d(e,"interpolatePlasma",(function(){return t_})),n.d(e,"create",(function(){return e_})),n.d(e,"creator",(function(){return le})),n.d(e,"local",(function(){return i_})),n.d(e,"matcher",(function(){return xt})),n.d(e,"mouse",(function(){return Bn})),n.d(e,"namespace",(function(){return Pt})),n.d(e,"namespaces",(function(){return kt})),n.d(e,"clientPoint",(function(){return Dn})),n.d(e,"select",(function(){return ke})),n.d(e,"selectAll",(function(){return a_})),n.d(e,"selection",(function(){return Ce})),n.d(e,"selector",(function(){return vt})),n.d(e,"selectorAll",(function(){return bt})),n.d(e,"style",(function(){return jt})),n.d(e,"touch",(function(){return zn})),n.d(e,"touches",(function(){return o_})),n.d(e,"window",(function(){return Dt})),n.d(e,"event",(function(){return pe})),n.d(e,"customEvent",(function(){return xe})),n.d(e,"arc",(function(){return T_})),n.d(e,"area",(function(){return L_})),n.d(e,"line",(function(){return O_})),n.d(e,"pie",(function(){return R_})),n.d(e,"areaRadial",(function(){return V_})),n.d(e,"radialArea",(function(){return V_})),n.d(e,"lineRadial",(function(){return j_})),n.d(e,"radialLine",(function(){return j_})),n.d(e,"pointRadial",(function(){return U_})),n.d(e,"linkHorizontal",(function(){return $_})),n.d(e,"linkVertical",(function(){return Z_})),n.d(e,"linkRadial",(function(){return J_})),n.d(e,"symbol",(function(){return gw})),n.d(e,"symbols",(function(){return mw})),n.d(e,"symbolCircle",(function(){return K_})),n.d(e,"symbolCross",(function(){return tw})),n.d(e,"symbolDiamond",(function(){return iw})),n.d(e,"symbolSquare",(function(){return lw})),n.d(e,"symbolStar",(function(){return sw})),n.d(e,"symbolTriangle",(function(){return cw})),n.d(e,"symbolWye",(function(){return pw})),n.d(e,"curveBasisClosed",(function(){return ww})),n.d(e,"curveBasisOpen",(function(){return Ew})),n.d(e,"curveBasis",(function(){return xw})),n.d(e,"curveBundle",(function(){return Tw})),n.d(e,"curveCardinalClosed",(function(){return Ow})),n.d(e,"curveCardinalOpen",(function(){return Iw})),n.d(e,"curveCardinal",(function(){return Pw})),n.d(e,"curveCatmullRomClosed",(function(){return Bw})),n.d(e,"curveCatmullRomOpen",(function(){return jw})),n.d(e,"curveCatmullRom",(function(){return Dw})),n.d(e,"curveLinearClosed",(function(){return Uw})),n.d(e,"curveLinear",(function(){return k_})),n.d(e,"curveMonotoneX",(function(){return $w})),n.d(e,"curveMonotoneY",(function(){return Zw})),n.d(e,"curveNatural",(function(){return tS})),n.d(e,"curveStep",(function(){return nS})),n.d(e,"curveStepAfter",(function(){return rS})),n.d(e,"curveStepBefore",(function(){return iS})),n.d(e,"stack",(function(){return lS})),n.d(e,"stackOffsetExpand",(function(){return uS})),n.d(e,"stackOffsetDiverging",(function(){return cS})),n.d(e,"stackOffsetNone",(function(){return aS})),n.d(e,"stackOffsetSilhouette",(function(){return hS})),n.d(e,"stackOffsetWiggle",(function(){return fS})),n.d(e,"stackOrderAppearance",(function(){return dS})),n.d(e,"stackOrderAscending",(function(){return mS})),n.d(e,"stackOrderDescending",(function(){return vS})),n.d(e,"stackOrderInsideOut",(function(){return yS})),n.d(e,"stackOrderNone",(function(){return oS})),n.d(e,"stackOrderReverse",(function(){return bS})),n.d(e,"timeInterval",(function(){return bg})),n.d(e,"timeMillisecond",(function(){return nv})),n.d(e,"timeMilliseconds",(function(){return iv})),n.d(e,"utcMillisecond",(function(){return nv})),n.d(e,"utcMilliseconds",(function(){return iv})),n.d(e,"timeSecond",(function(){return Kg})),n.d(e,"timeSeconds",(function(){return tv})),n.d(e,"utcSecond",(function(){return Kg})),n.d(e,"utcSeconds",(function(){return tv})),n.d(e,"timeMinute",(function(){return $g})),n.d(e,"timeMinutes",(function(){return Zg})),n.d(e,"timeHour",(function(){return Qg})),n.d(e,"timeHours",(function(){return Yg})),n.d(e,"timeDay",(function(){return Gg})),n.d(e,"timeDays",(function(){return Wg})),n.d(e,"timeWeek",(function(){return Pg})),n.d(e,"timeWeeks",(function(){return Dg})),n.d(e,"timeSunday",(function(){return Pg})),n.d(e,"timeSundays",(function(){return Dg})),n.d(e,"timeMonday",(function(){return Ag})),n.d(e,"timeMondays",(function(){return zg})),n.d(e,"timeTuesday",(function(){return Og})),n.d(e,"timeTuesdays",(function(){return Bg})),n.d(e,"timeWednesday",(function(){return Lg})),n.d(e,"timeWednesdays",(function(){return Fg})),n.d(e,"timeThursday",(function(){return Ig})),n.d(e,"timeThursdays",(function(){return jg})),n.d(e,"timeFriday",(function(){return Ng})),n.d(e,"timeFridays",(function(){return Vg})),n.d(e,"timeSaturday",(function(){return Rg})),n.d(e,"timeSaturdays",(function(){return Ug})),n.d(e,"timeMonth",(function(){return Eg})),n.d(e,"timeMonths",(function(){return Mg})),n.d(e,"timeYear",(function(){return _g})),n.d(e,"timeYears",(function(){return wg})),n.d(e,"utcMinute",(function(){return cb})),n.d(e,"utcMinutes",(function(){return hb})),n.d(e,"utcHour",(function(){return sb})),n.d(e,"utcHours",(function(){return lb})),n.d(e,"utcDay",(function(){return xv})),n.d(e,"utcDays",(function(){return _v})),n.d(e,"utcWeek",(function(){return av})),n.d(e,"utcWeeks",(function(){return fv})),n.d(e,"utcSunday",(function(){return av})),n.d(e,"utcSundays",(function(){return fv})),n.d(e,"utcMonday",(function(){return ov})),n.d(e,"utcMondays",(function(){return dv})),n.d(e,"utcTuesday",(function(){return sv})),n.d(e,"utcTuesdays",(function(){return pv})),n.d(e,"utcWednesday",(function(){return lv})),n.d(e,"utcWednesdays",(function(){return mv})),n.d(e,"utcThursday",(function(){return uv})),n.d(e,"utcThursdays",(function(){return gv})),n.d(e,"utcFriday",(function(){return cv})),n.d(e,"utcFridays",(function(){return vv})),n.d(e,"utcSaturday",(function(){return hv})),n.d(e,"utcSaturdays",(function(){return yv})),n.d(e,"utcMonth",(function(){return rb})),n.d(e,"utcMonths",(function(){return ab})),n.d(e,"utcYear",(function(){return Sv})),n.d(e,"utcYears",(function(){return Ev})),n.d(e,"timeFormatDefaultLocale",(function(){return Wy})),n.d(e,"timeFormat",(function(){return Av})),n.d(e,"timeParse",(function(){return Ov})),n.d(e,"utcFormat",(function(){return Lv})),n.d(e,"utcParse",(function(){return Iv})),n.d(e,"timeFormatLocale",(function(){return kv})),n.d(e,"isoFormat",(function(){return xS})),n.d(e,"isoParse",(function(){return _S})),n.d(e,"now",(function(){return Yn})),n.d(e,"timer",(function(){return Zn})),n.d(e,"timerFlush",(function(){return Jn})),n.d(e,"timeout",(function(){return ni})),n.d(e,"interval",(function(){return wS})),n.d(e,"transition",(function(){return Zi})),n.d(e,"active",(function(){return or})),n.d(e,"interrupt",(function(){return xi})),n.d(e,"voronoi",(function(){return sE})),n.d(e,"zoom",(function(){return _E})),n.d(e,"zoomTransform",(function(){return fE})),n.d(e,"zoomIdentity",(function(){return hE}))},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(24),a=l(n(14)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(15)),s=l(n(3));function l(t){return t&&t.__esModule?t:{default:t}}var u={Default:[[0,1],[.05,.75],[.37,.5],[.62,.5],[.95,.25],[1,0]],Linear:[[0,1],[.25,.75],[.5,.5],[.75,.25],[1,0]],Flat:[[0,1],[.25,1],[.5,1],[.75,1],[1,1]],Valley:[[0,1],[.25,.75],[.5,.5],[.75,.75],[1,1]]},c=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(var n in t.initColorIdx=5,t.presetColors=["#DC143C","#FF6347","#FFA500","#FFFF00","#00FF00","#7FFFD4","#00FFFF","#00BFFF","#1E90FF","#7B68EE","#9932CC","#FF00FF","#FF69B4","#FFFFFF","#FFF8DC","#CD853F"],t.cameraProp=[{xpos:0,ypos:0,zpos:50,fov:45,far:2e3,depth:0,aspect:1,zoom:1,type:"Perspective"}],t.texture=[],t.checked=[],t.focused=[],t.minmaxV=[],t.minmaxH=[],t.plotColor=[],t.gridSize=15,t.tubeNum=16,t.segment=16,t.division=5,t.visualQuery=!1,t.dragSelection=!0,t.activeId=-1,t.lock=[],t.opacityCurves={},u){for(var i=[],r=0;r<u[n].length;r++)i.push(new o.Vector2(u[n][r][0],u[n][r][1]));t.opacityCurves[n]=new o.SplineCurve(i)}return t.averagePeriod=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPLOAD_DATA":this.uploadData();break;case"UPDATE_CAMERA":this.updateCamera(t.id,t.cameraProp);break;case"SWITCH_CAMERA":this.switchCamera(t.id);break;case"RESET_CAMERA":this.resetCamera(t.id);break;case"SEARCH_TIME":this.searchTime(t.id,t.dst);break;case"UPDATE_CHECKED":this.updateChecked(t.id);break;case"SWITCH_GRID":this.switchGridDisplay(t.id,t.state);break;case"SWITCH_LABEL":this.switchLabelDisplay(t.id,t.state);break;case"SWITCH_AXIS":this.switchAxisDisplay(t.id,t.state);break;case"SWITCH_PLOT":this.switchPlotDisplay(t.id,t.state);break;case"CHANGE_BACKGROUND":this.changeBackground(t.id,t.color);break;case"CLIP_TUBE":this.clipTube(t.id,t.state);break;case"SWITCH_SHADE":this.switchShade(t.id,t.state);break;case"UPDATE_FOCUS":this.updateFocus(t.id,t.zpos,t.flag);break;case"CHANGE_FAR":this.changeFar(t.id,t.value);break;case"UPDATE_MINMAXH":this.updateMinMaxH(t.id,t.min,t.max);break;case"UPDATE_MINMAXV":this.updateMinMaxV(t.id,t.min,t.max);break;case"CHANGE_PLOTCOLOR":this.changePlotColor(t.id,t.color);break;case"SET_TEXTURE":this.setTexture(t.id,t.texture);break;case"UPDATE_TEXTURE":this.updateTexture(t.id,t.texture);break;case"ACTIVATE_VIEWPORT":this.activateViewport(t.id);break;case"TIME_FITTING":this.timeFitting(t.dst);break;case"LOCK_CONTROL":this.lockControl(t.ids,t.state);break;case"SYNCHRONIZE_TUBES":this.synchronizeTubes(t.id,t.zpos,t.pos,t.deg);break;case"ZOOM_OUT_TIMETUBE":this.zoomOutTimeTubes(t.id);break;case"RESET_ZOOM_TIMETUBES":this.resetZoomTimeTubes(t.id);break;case"ZOOM_IN_TIMETUBES":this.zoomInTimeTubes(t.id);break;case"UPDATE_OPACITY":this.updateOpacity(t.id,t.opt);break;case"TAKE_SNAPSHOT":this.takeSnapshot(t.id,t.pos,t.far);break;case"RECOVER_TUBE":this.recoverTube(t.id,t.cameraProp,t.tubePos);break;case"SHOW_TIMETUBES_OF_TIME_SLICE":this.showTimeTubesofTimeSlice(t.id,t.period);break;case"UPDATE_AVERAGE_PERIOD":this.updateAveragePeriod(t.value);break;case"SHOW_ROTATION_CENTER":this.showRotationCenter(t.id,t.period,t.center);break;case"SWITCH_COMMENT":this.switchComment(t.id,t.state)}}},{key:"getCameraProp",value:function(t){return this.cameraProp[t]}},{key:"getDefaultCameraProp",value:function(){return{xpos:0,ypos:0,zpos:50,fov:45,far:2e3,depth:0,aspect:1,zoom:1,type:"Perspective"}}},{key:"getChecked",value:function(t){return this.checked[t]}},{key:"getCheckedList",value:function(){return this.checked}},{key:"getFocused",value:function(t){return this.focused[t]}},{key:"getMinMaxH",value:function(t){return this.minmaxH[t]}},{key:"getMinMaxV",value:function(t){return this.minmaxV[t]}},{key:"getActiveId",value:function(){return this.activeId}},{key:"getPresetColors",value:function(){return this.presetColors}},{key:"getPresetColor",value:function(t){return this.presetColors[t]}},{key:"getPresetNum",value:function(){return this.presetColors.length}},{key:"getPlotColor",value:function(t){return this.plotColor[t]}},{key:"getInitColorIdx",value:function(){return this.initColorIdx}},{key:"getGridSize",value:function(){return this.gridSize}},{key:"getVisualQuery",value:function(){return this.visualQuery}},{key:"getTexture",value:function(t){return this.texture[t]}},{key:"getTubeNum",value:function(){return this.tubeNum}},{key:"getDivision",value:function(){return this.division}},{key:"getSegment",value:function(){return this.segment}},{key:"getLock",value:function(t){return this.lock[t]}},{key:"getOpacityDistSet",value:function(){return u}},{key:"getOpacityCurves",value:function(){return this.opacityCurves}},{key:"getOpacityCurve",value:function(t){return this.opacityCurves[t]}},{key:"getAveragePeriod",value:function(){return this.averagePeriod}},{key:"setPlotColor",value:function(t,e){this.plotColor[t]=e}},{key:"setPlotColorbyIdx",value:function(t,e){this.plotColor[t]=this.presetColors[e]}},{key:"setLock",value:function(t,e){this.lock[t]=e}},{key:"uploadData",value:function(){this.cameraProp.length;this.cameraProp.push({xpos:0,ypos:0,zpos:50,fov:45,depth:0,far:2e3,aspect:1,zoom:1,type:"Perspective"}),this.checked.push(!0),this.focused.push(0),this.minmaxV.push([0,0]),this.minmaxV.push([0,0]),this.lock.push(0),this.emit("upload")}},{key:"updateCamera",value:function(t,e){for(var n in e)this.cameraProp[t][n]=e[n];this.emit("updateCamera",t)}},{key:"resetCamera",value:function(t){this.cameraProp[t].xpos=0,this.cameraProp[t].ypos=0,this.cameraProp[t].zpos=50,this.emit("reset")}},{key:"switchCamera",value:function(t){"Perspective"===this.cameraProp[t].type?this.cameraProp[t].type="Orthographic":this.cameraProp[t].type="Perspective",this.emit("switch")}},{key:"searchTime",value:function(t,e){this.emit("searchTime",t,e)}},{key:"updateChecked",value:function(t){this.checked[t]=!this.checked[t],this.emit("updateChecked",t)}},{key:"switchGridDisplay",value:function(t,e){this.emit("switchGrid",t,e)}},{key:"switchLabelDisplay",value:function(t,e){this.emit("switchLabel",t,e)}},{key:"switchAxisDisplay",value:function(t,e){this.emit("switchAxis",t,e)}},{key:"switchPlotDisplay",value:function(t,e){this.emit("switchPlot",t,e)}},{key:"changeBackground",value:function(t,e){this.emit("changeBackground",t,e)}},{key:"clipTube",value:function(t,e){this.emit("clipTube",t,e)}},{key:"switchShade",value:function(t,e){this.emit("switchShade",t,e)}},{key:"updateFocus",value:function(t,e,n){this.focused[t]=e,this.emit("updateFocus",t,e,n)}},{key:"changeFar",value:function(t,e){this.cameraProp[t].far=e,this.emit("changeFar",t,e)}},{key:"updateMinMaxH",value:function(t,e,n){this.minmaxH[t]=[e,n],this.emit("updateMinMaxH",t)}},{key:"updateMinMaxV",value:function(t,e,n){this.minmaxV[t]=[e,n],this.emit("updateMinMaxV",t)}},{key:"changePlotColor",value:function(t,e){this.plotColor[t]=e,this.emit("changePlotColor",t)}},{key:"setTexture",value:function(t,e){this.texture[t]=e}},{key:"updateTexture",value:function(t,e){this.texture[t]=e,this.emit("updateTexture",t,e)}},{key:"activateViewport",value:function(t){this.activeId=t}},{key:"timeFitting",value:function(t){this.emit("timeFitting",t)}},{key:"lockControl",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.lock[t[n]]=this.getFocused(t[n]);else for(var i=0;i<this.lock.length;i++)this.lock[i]=0;this.emit("lockControl",t,e)}},{key:"synchronizeTubes",value:function(t,e,n,i){this.emit("synchronizeTubes",t,e,n,i)}},{key:"zoomOutTimeTubes",value:function(t){this.cameraProp[t].zoom>=.2&&(this.cameraProp[t].zoom-=.1,this.emit("updateZoomTimeTubes",t))}},{key:"resetZoomTimeTubes",value:function(t){this.cameraProp[t].zoom=1,this.emit("updateZoomTimeTubes",t)}},{key:"zoomInTimeTubes",value:function(t){this.cameraProp[t].zoom+=.1,this.emit("updateZoomTimeTubes",t)}},{key:"updateOpacity",value:function(t,e){this.emit("updateOpacity",t,e)}},{key:"takeSnapshot",value:function(t,e,n){this.emit("takeSnapshot",t,e,n)}},{key:"recoverTube",value:function(t,e,n){for(var i in e)this.cameraProp[t][i]=e[i];this.focused[t]=n,this.emit("recoverTube",t,e,n)}},{key:"showTimeTubesofTimeSlice",value:function(t,e){this.focused[t]=e[0]-s.default.getData(t).data.meta.min.z,this.emit("showTimeTubesOfTimeSlice",t,e)}},{key:"updateAveragePeriod",value:function(t){this.averagePeriod=t,this.emit("updateAveragePeriod")}},{key:"showRotationCenter",value:function(t,e,n){this.focused[t]=e[0]-s.default.getData(t).data.meta.min.z,this.emit("showRotationCenter",t,e,n)}},{key:"switchComment",value:function(t,e){this.emit("switchComment",t,e)}}]),e}(r.EventEmitter));a.default.register(c.handleActions.bind(c)),e.default=c},function(t,e,n){var i=n(68),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.red=e.getContrastingColor=e.isValidHex=e.toState=e.simpleCheckForValidColor=void 0;var i=a(n(246)),r=a(n(248));function a(t){return t&&t.__esModule?t:{default:t}}e.simpleCheckForValidColor=function(t){var e=0,n=0;return(0,i.default)(["r","g","b","a","h","s","l","v"],(function(i){if(t[i]&&(e+=1,isNaN(t[i])||(n+=1),"s"===i||"l"===i)){/^\d+%$/.test(t[i])&&(n+=1)}})),e===n&&t};var o=e.toState=function(t,e){var n=t.hex?(0,r.default)(t.hex):(0,r.default)(t),i=n.toHsl(),a=n.toHsv(),o=n.toRgb(),s=n.toHex();return 0===i.s&&(i.h=e||0,a.h=e||0),{hsl:i,hex:"000000"===s&&0===o.a?"transparent":"#"+s,rgb:o,hsv:a,oldHue:t.h||e||i.h,source:t.source}};e.isValidHex=function(t){var e="#"===String(t).charAt(0)?1:0;return t.length!==4+e&&t.length<7+e&&(0,r.default)(t).isValid()},e.getContrastingColor=function(t){if(!t)return"#fff";var e=o(t);return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=128?"#000":"#fff"},e.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}};e.default=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(114);e.default=new i.Dispatcher},function(t,e,n){"use strict";function i(){}n.r(e),n.d(e,"ACESFilmicToneMapping",(function(){return ut})),n.d(e,"AddEquation",(function(){return O})),n.d(e,"AddOperation",(function(){return it})),n.d(e,"AdditiveBlending",(function(){return C})),n.d(e,"AlphaFormat",(function(){return Ht})),n.d(e,"AlwaysDepth",(function(){return Y})),n.d(e,"AlwaysStencilFunc",(function(){return sn})),n.d(e,"AmbientLight",(function(){return Oc})),n.d(e,"AmbientLightProbe",(function(){return th})),n.d(e,"AnimationClip",(function(){return Bu})),n.d(e,"AnimationLoader",(function(){return qu})),n.d(e,"AnimationMixer",(function(){return Ah})),n.d(e,"AnimationObjectGroup",(function(){return kh})),n.d(e,"AnimationUtils",(function(){return Mu})),n.d(e,"ArcCurve",(function(){return tc})),n.d(e,"ArrayCamera",(function(){return Jo})),n.d(e,"ArrowHelper",(function(){return Of})),n.d(e,"Audio",(function(){return ch})),n.d(e,"AudioAnalyser",(function(){return gh})),n.d(e,"AudioContext",(function(){return Xc})),n.d(e,"AudioListener",(function(){return uh})),n.d(e,"AudioLoader",(function(){return $c})),n.d(e,"AxesHelper",(function(){return Lf})),n.d(e,"AxisHelper",(function(){return rd})),n.d(e,"BackSide",(function(){return y})),n.d(e,"BasicDepthPacking",(function(){return Ve})),n.d(e,"BasicShadowMap",(function(){return d})),n.d(e,"BinaryTextureLoader",(function(){return ud})),n.d(e,"Bone",(function(){return Ls})),n.d(e,"BooleanKeyframeTrack",(function(){return Ou})),n.d(e,"BoundingBoxHelper",(function(){return ad})),n.d(e,"Box2",(function(){return Fh})),n.d(e,"Box3",(function(){return ci})),n.d(e,"Box3Helper",(function(){return Tf})),n.d(e,"BoxBufferGeometry",(function(){return Dr})),n.d(e,"BoxGeometry",(function(){return Rr})),n.d(e,"BoxHelper",(function(){return Mf})),n.d(e,"BufferAttribute",(function(){return Gi})),n.d(e,"BufferGeometry",(function(){return ur})),n.d(e,"BufferGeometryLoader",(function(){return zc})),n.d(e,"ByteType",(function(){return Lt})),n.d(e,"Cache",(function(){return ju})),n.d(e,"Camera",(function(){return Hr})),n.d(e,"CameraHelper",(function(){return wf})),n.d(e,"CanvasRenderer",(function(){return hd})),n.d(e,"CanvasTexture",(function(){return Ks})),n.d(e,"CatmullRomCurve3",(function(){return oc})),n.d(e,"CineonToneMapping",(function(){return lt})),n.d(e,"CircleBufferGeometry",(function(){return fu})),n.d(e,"CircleGeometry",(function(){return hu})),n.d(e,"ClampToEdgeWrapping",(function(){return bt})),n.d(e,"Clock",(function(){return rh})),n.d(e,"ClosedSplineCurve3",(function(){return ed})),n.d(e,"Color",(function(){return Di})),n.d(e,"ColorKeyframeTrack",(function(){return Lu})),n.d(e,"CompressedTexture",(function(){return Js})),n.d(e,"CompressedTextureLoader",(function(){return Qu})),n.d(e,"ConeBufferGeometry",(function(){return cu})),n.d(e,"ConeGeometry",(function(){return uu})),n.d(e,"CubeCamera",(function(){return Qr})),n.d(e,"CubeGeometry",(function(){return Rr})),n.d(e,"CubeReflectionMapping",(function(){return ht})),n.d(e,"CubeRefractionMapping",(function(){return ft})),n.d(e,"CubeTexture",(function(){return _a})),n.d(e,"CubeTextureLoader",(function(){return $u})),n.d(e,"CubeUVReflectionMapping",(function(){return gt})),n.d(e,"CubeUVRefractionMapping",(function(){return vt})),n.d(e,"CubicBezierCurve",(function(){return cc})),n.d(e,"CubicBezierCurve3",(function(){return hc})),n.d(e,"CubicInterpolant",(function(){return Cu})),n.d(e,"CullFaceBack",(function(){return l})),n.d(e,"CullFaceFront",(function(){return u})),n.d(e,"CullFaceFrontBack",(function(){return c})),n.d(e,"CullFaceNone",(function(){return s})),n.d(e,"Curve",(function(){return Ju})),n.d(e,"CurvePath",(function(){return yc})),n.d(e,"CustomBlending",(function(){return A})),n.d(e,"CylinderBufferGeometry",(function(){return lu})),n.d(e,"CylinderGeometry",(function(){return su})),n.d(e,"Cylindrical",(function(){return zh})),n.d(e,"DataTexture",(function(){return Xr})),n.d(e,"DataTexture2DArray",(function(){return wa})),n.d(e,"DataTexture3D",(function(){return Sa})),n.d(e,"DataTextureLoader",(function(){return Yu})),n.d(e,"DecrementStencilOp",(function(){return Xe})),n.d(e,"DecrementWrapStencilOp",(function(){return Ze})),n.d(e,"DefaultLoadingManager",(function(){return Uu})),n.d(e,"DepthFormat",(function(){return Xt})),n.d(e,"DepthStencilFormat",(function(){return $t})),n.d(e,"DepthTexture",(function(){return tl})),n.d(e,"DirectionalLight",(function(){return Ac})),n.d(e,"DirectionalLightHelper",(function(){return bf})),n.d(e,"DirectionalLightShadow",(function(){return Pc})),n.d(e,"DiscreteInterpolant",(function(){return Pu})),n.d(e,"DodecahedronBufferGeometry",(function(){return dl})),n.d(e,"DodecahedronGeometry",(function(){return fl})),n.d(e,"DoubleSide",(function(){return b})),n.d(e,"DstAlphaFactor",(function(){return U})),n.d(e,"DstColorFactor",(function(){return G})),n.d(e,"DynamicBufferAttribute",(function(){return Wf})),n.d(e,"EdgesGeometry",(function(){return ou})),n.d(e,"EdgesHelper",(function(){return od})),n.d(e,"EllipseCurve",(function(){return Ku})),n.d(e,"EqualDepth",(function(){return Z})),n.d(e,"EqualStencilFunc",(function(){return en})),n.d(e,"EquirectangularReflectionMapping",(function(){return dt})),n.d(e,"EquirectangularRefractionMapping",(function(){return pt})),n.d(e,"Euler",(function(){return Rn})),n.d(e,"EventDispatcher",(function(){return i})),n.d(e,"ExtrudeBufferGeometry",(function(){return ql})),n.d(e,"ExtrudeGeometry",(function(){return Wl})),n.d(e,"Face3",(function(){return ji})),n.d(e,"Face4",(function(){return If})),n.d(e,"FaceColors",(function(){return S})),n.d(e,"FaceNormalsHelper",(function(){return mf})),n.d(e,"FileLoader",(function(){return Wu})),n.d(e,"FlatShading",(function(){return x})),n.d(e,"Float32Attribute",(function(){return Kf})),n.d(e,"Float32BufferAttribute",(function(){return Ji})),n.d(e,"Float64Attribute",(function(){return td})),n.d(e,"Float64BufferAttribute",(function(){return Ki})),n.d(e,"FloatType",(function(){return zt})),n.d(e,"Fog",(function(){return ss})),n.d(e,"FogExp2",(function(){return os})),n.d(e,"Font",(function(){return qc})),n.d(e,"FontLoader",(function(){return Yc})),n.d(e,"FrontFaceDirectionCCW",(function(){return f})),n.d(e,"FrontFaceDirectionCW",(function(){return h})),n.d(e,"FrontSide",(function(){return v})),n.d(e,"Frustum",(function(){return na})),n.d(e,"GammaEncoding",(function(){return Re})),n.d(e,"Geometry",(function(){return Nr})),n.d(e,"GeometryUtils",(function(){return cd})),n.d(e,"GreaterDepth",(function(){return K})),n.d(e,"GreaterEqualDepth",(function(){return J})),n.d(e,"GreaterEqualStencilFunc",(function(){return on})),n.d(e,"GreaterStencilFunc",(function(){return rn})),n.d(e,"GridHelper",(function(){return uf})),n.d(e,"Group",(function(){return Zo})),n.d(e,"HalfFloatType",(function(){return Bt})),n.d(e,"HemisphereLight",(function(){return wc})),n.d(e,"HemisphereLightHelper",(function(){return sf})),n.d(e,"HemisphereLightProbe",(function(){return Kc})),n.d(e,"IcosahedronBufferGeometry",(function(){return hl})),n.d(e,"IcosahedronGeometry",(function(){return cl})),n.d(e,"ImageBitmapLoader",(function(){return Gc})),n.d(e,"ImageLoader",(function(){return Xu})),n.d(e,"ImageUtils",(function(){return bn})),n.d(e,"ImmediateRenderObject",(function(){return Hh})),n.d(e,"IncrementStencilOp",(function(){return Ye})),n.d(e,"IncrementWrapStencilOp",(function(){return $e})),n.d(e,"InstancedBufferAttribute",(function(){return Dc})),n.d(e,"InstancedBufferGeometry",(function(){return Rc})),n.d(e,"InstancedInterleavedBuffer",(function(){return Lh})),n.d(e,"Int16Attribute",(function(){return Xf})),n.d(e,"Int16BufferAttribute",(function(){return Yi})),n.d(e,"Int32Attribute",(function(){return Zf})),n.d(e,"Int32BufferAttribute",(function(){return $i})),n.d(e,"Int8Attribute",(function(){return qf})),n.d(e,"Int8BufferAttribute",(function(){return Wi})),n.d(e,"IntType",(function(){return Rt})),n.d(e,"InterleavedBuffer",(function(){return ls})),n.d(e,"InterleavedBufferAttribute",(function(){return us})),n.d(e,"Interpolant",(function(){return Tu})),n.d(e,"InterpolateDiscrete",(function(){return Ee})),n.d(e,"InterpolateLinear",(function(){return Me})),n.d(e,"InterpolateSmooth",(function(){return Te})),n.d(e,"InvertStencilOp",(function(){return Je})),n.d(e,"JSONLoader",(function(){return fd})),n.d(e,"KeepStencilOp",(function(){return qe})),n.d(e,"KeyframeTrack",(function(){return Au})),n.d(e,"LOD",(function(){return Cs})),n.d(e,"LatheBufferGeometry",(function(){return nu})),n.d(e,"LatheGeometry",(function(){return eu})),n.d(e,"Layers",(function(){return Dn})),n.d(e,"LensFlare",(function(){return pd})),n.d(e,"LessDepth",(function(){return X})),n.d(e,"LessEqualDepth",(function(){return $})),n.d(e,"LessEqualStencilFunc",(function(){return nn})),n.d(e,"LessStencilFunc",(function(){return tn})),n.d(e,"Light",(function(){return _c})),n.d(e,"LightProbe",(function(){return Jc})),n.d(e,"LightProbeHelper",(function(){return lf})),n.d(e,"LightShadow",(function(){return Sc})),n.d(e,"Line",(function(){return Fs})),n.d(e,"Line3",(function(){return Uh})),n.d(e,"LineBasicMaterial",(function(){return Is})),n.d(e,"LineCurve",(function(){return fc})),n.d(e,"LineCurve3",(function(){return dc})),n.d(e,"LineDashedMaterial",(function(){return Su})),n.d(e,"LineLoop",(function(){return Hs})),n.d(e,"LinePieces",(function(){return Rf})),n.d(e,"LineSegments",(function(){return Us})),n.d(e,"LineStrip",(function(){return Nf})),n.d(e,"LinearEncoding",(function(){return Ie})),n.d(e,"LinearFilter",(function(){return Tt})),n.d(e,"LinearInterpolant",(function(){return ku})),n.d(e,"LinearMipMapLinearFilter",(function(){return At})),n.d(e,"LinearMipMapNearestFilter",(function(){return kt})),n.d(e,"LinearMipmapLinearFilter",(function(){return Pt})),n.d(e,"LinearMipmapNearestFilter",(function(){return Ct})),n.d(e,"LinearToneMapping",(function(){return at})),n.d(e,"Loader",(function(){return Hu})),n.d(e,"LoaderUtils",(function(){return Nc})),n.d(e,"LoadingManager",(function(){return Vu})),n.d(e,"LogLuvEncoding",(function(){return ze})),n.d(e,"LoopOnce",(function(){return _e})),n.d(e,"LoopPingPong",(function(){return Se})),n.d(e,"LoopRepeat",(function(){return we})),n.d(e,"LuminanceAlphaFormat",(function(){return Qt})),n.d(e,"LuminanceFormat",(function(){return qt})),n.d(e,"MOUSE",(function(){return a})),n.d(e,"Material",(function(){return Ui})),n.d(e,"MaterialLoader",(function(){return Ic})),n.d(e,"Math",(function(){return cn})),n.d(e,"Matrix3",(function(){return yn})),n.d(e,"Matrix4",(function(){return Ln})),n.d(e,"MaxEquation",(function(){return R})),n.d(e,"Mesh",(function(){return Cr})),n.d(e,"MeshBasicMaterial",(function(){return Hi})),n.d(e,"MeshDepthMaterial",(function(){return Ho})),n.d(e,"MeshDistanceMaterial",(function(){return Go})),n.d(e,"MeshFaceMaterial",(function(){return Df})),n.d(e,"MeshLambertMaterial",(function(){return _u})),n.d(e,"MeshMatcapMaterial",(function(){return wu})),n.d(e,"MeshNormalMaterial",(function(){return xu})),n.d(e,"MeshPhongMaterial",(function(){return yu})),n.d(e,"MeshPhysicalMaterial",(function(){return vu})),n.d(e,"MeshStandardMaterial",(function(){return gu})),n.d(e,"MeshToonMaterial",(function(){return bu})),n.d(e,"MinEquation",(function(){return N})),n.d(e,"MirroredRepeatWrapping",(function(){return xt})),n.d(e,"MixOperation",(function(){return nt})),n.d(e,"MultiMaterial",(function(){return zf})),n.d(e,"MultiplyBlending",(function(){return P})),n.d(e,"MultiplyOperation",(function(){return et})),n.d(e,"NearestFilter",(function(){return _t})),n.d(e,"NearestMipMapLinearFilter",(function(){return Mt})),n.d(e,"NearestMipMapNearestFilter",(function(){return St})),n.d(e,"NearestMipmapLinearFilter",(function(){return Et})),n.d(e,"NearestMipmapNearestFilter",(function(){return wt})),n.d(e,"NeverDepth",(function(){return Q})),n.d(e,"NeverStencilFunc",(function(){return Ke})),n.d(e,"NoBlending",(function(){return M})),n.d(e,"NoColors",(function(){return w})),n.d(e,"NoToneMapping",(function(){return rt})),n.d(e,"NormalBlending",(function(){return T})),n.d(e,"NotEqualDepth",(function(){return tt})),n.d(e,"NotEqualStencilFunc",(function(){return an})),n.d(e,"NumberKeyframeTrack",(function(){return Iu})),n.d(e,"Object3D",(function(){return $n})),n.d(e,"ObjectLoader",(function(){return Fc})),n.d(e,"ObjectSpaceNormalMap",(function(){return Ge})),n.d(e,"OctahedronBufferGeometry",(function(){return ul})),n.d(e,"OctahedronGeometry",(function(){return ll})),n.d(e,"OneFactor",(function(){return z})),n.d(e,"OneMinusDstAlphaFactor",(function(){return H})),n.d(e,"OneMinusDstColorFactor",(function(){return W})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return V})),n.d(e,"OneMinusSrcColorFactor",(function(){return F})),n.d(e,"OrthographicCamera",(function(){return kc})),n.d(e,"PCFShadowMap",(function(){return p})),n.d(e,"PCFSoftShadowMap",(function(){return m})),n.d(e,"ParametricBufferGeometry",(function(){return il})),n.d(e,"ParametricGeometry",(function(){return nl})),n.d(e,"Particle",(function(){return Ff})),n.d(e,"ParticleBasicMaterial",(function(){return Uf})),n.d(e,"ParticleSystem",(function(){return jf})),n.d(e,"ParticleSystemMaterial",(function(){return Hf})),n.d(e,"Path",(function(){return bc})),n.d(e,"PerspectiveCamera",(function(){return Gr})),n.d(e,"Plane",(function(){return Kr})),n.d(e,"PlaneBufferGeometry",(function(){return ua})),n.d(e,"PlaneGeometry",(function(){return la})),n.d(e,"PlaneHelper",(function(){return Cf})),n.d(e,"PointCloud",(function(){return Bf})),n.d(e,"PointCloudMaterial",(function(){return Vf})),n.d(e,"PointLight",(function(){return Cc})),n.d(e,"PointLightHelper",(function(){return ef})),n.d(e,"Points",(function(){return Xs})),n.d(e,"PointsMaterial",(function(){return Gs})),n.d(e,"PolarGridHelper",(function(){return cf})),n.d(e,"PolyhedronBufferGeometry",(function(){return al})),n.d(e,"PolyhedronGeometry",(function(){return rl})),n.d(e,"PositionalAudio",(function(){return mh})),n.d(e,"PositionalAudioHelper",(function(){return hf})),n.d(e,"PropertyBinding",(function(){return Ch})),n.d(e,"PropertyMixer",(function(){return vh})),n.d(e,"QuadraticBezierCurve",(function(){return pc})),n.d(e,"QuadraticBezierCurve3",(function(){return mc})),n.d(e,"Quaternion",(function(){return fn})),n.d(e,"QuaternionKeyframeTrack",(function(){return Ru})),n.d(e,"QuaternionLinearInterpolant",(function(){return Nu})),n.d(e,"REVISION",(function(){return r})),n.d(e,"RGBADepthPacking",(function(){return Ue})),n.d(e,"RGBAFormat",(function(){return Wt})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return ye})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return me})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return ge})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return ve})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return be})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return xe})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return se})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return le})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return ue})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return ce})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return he})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return fe})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return de})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return pe})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return ae})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return re})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return Kt})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return te})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return ee})),n.d(e,"RGBDEncoding",(function(){return je})),n.d(e,"RGBEEncoding",(function(){return De})),n.d(e,"RGBEFormat",(function(){return Yt})),n.d(e,"RGBFormat",(function(){return Gt})),n.d(e,"RGBM16Encoding",(function(){return Fe})),n.d(e,"RGBM7Encoding",(function(){return Be})),n.d(e,"RGB_ETC1_Format",(function(){return oe})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return ie})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return ne})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return Jt})),n.d(e,"RawShaderMaterial",(function(){return mu})),n.d(e,"Ray",(function(){return _i})),n.d(e,"Raycaster",(function(){return Ih})),n.d(e,"RectAreaLight",(function(){return Lc})),n.d(e,"RectAreaLightHelper",(function(){return nf})),n.d(e,"RedFormat",(function(){return Zt})),n.d(e,"ReinhardToneMapping",(function(){return ot})),n.d(e,"RepeatWrapping",(function(){return yt})),n.d(e,"ReplaceStencilOp",(function(){return Qe})),n.d(e,"ReverseSubtractEquation",(function(){return I})),n.d(e,"RingBufferGeometry",(function(){return tu})),n.d(e,"RingGeometry",(function(){return Kl})),n.d(e,"Scene",(function(){return Zn})),n.d(e,"SceneUtils",(function(){return dd})),n.d(e,"ShaderChunk",(function(){return ia})),n.d(e,"ShaderLib",(function(){return aa})),n.d(e,"ShaderMaterial",(function(){return Ur})),n.d(e,"ShadowMaterial",(function(){return pu})),n.d(e,"Shape",(function(){return xc})),n.d(e,"ShapeBufferGeometry",(function(){return ru})),n.d(e,"ShapeGeometry",(function(){return iu})),n.d(e,"ShapePath",(function(){return Wc})),n.d(e,"ShapeUtils",(function(){return Ul})),n.d(e,"ShortType",(function(){return It})),n.d(e,"Skeleton",(function(){return Os})),n.d(e,"SkeletonHelper",(function(){return tf})),n.d(e,"SkinnedMesh",(function(){return ks})),n.d(e,"SmoothShading",(function(){return _})),n.d(e,"Sphere",(function(){return di})),n.d(e,"SphereBufferGeometry",(function(){return Jl})),n.d(e,"SphereGeometry",(function(){return Zl})),n.d(e,"Spherical",(function(){return Dh})),n.d(e,"SphericalHarmonics3",(function(){return Zc})),n.d(e,"SphericalReflectionMapping",(function(){return mt})),n.d(e,"Spline",(function(){return id})),n.d(e,"SplineCurve",(function(){return gc})),n.d(e,"SplineCurve3",(function(){return nd})),n.d(e,"SpotLight",(function(){return Mc})),n.d(e,"SpotLightHelper",(function(){return $h})),n.d(e,"SpotLightShadow",(function(){return Ec})),n.d(e,"Sprite",(function(){return Ss})),n.d(e,"SpriteMaterial",(function(){return cs})),n.d(e,"SrcAlphaFactor",(function(){return j})),n.d(e,"SrcAlphaSaturateFactor",(function(){return q})),n.d(e,"SrcColorFactor",(function(){return B})),n.d(e,"StereoCamera",(function(){return ih})),n.d(e,"StringKeyframeTrack",(function(){return Du})),n.d(e,"SubtractEquation",(function(){return L})),n.d(e,"SubtractiveBlending",(function(){return k})),n.d(e,"TOUCH",(function(){return o})),n.d(e,"TangentSpaceNormalMap",(function(){return He})),n.d(e,"TetrahedronBufferGeometry",(function(){return sl})),n.d(e,"TetrahedronGeometry",(function(){return ol})),n.d(e,"TextBufferGeometry",(function(){return $l})),n.d(e,"TextGeometry",(function(){return Xl})),n.d(e,"Texture",(function(){return _n})),n.d(e,"TextureLoader",(function(){return Zu})),n.d(e,"TorusBufferGeometry",(function(){return bl})),n.d(e,"TorusGeometry",(function(){return yl})),n.d(e,"TorusKnotBufferGeometry",(function(){return vl})),n.d(e,"TorusKnotGeometry",(function(){return gl})),n.d(e,"Triangle",(function(){return Li})),n.d(e,"TriangleFanDrawMode",(function(){return Le})),n.d(e,"TriangleStripDrawMode",(function(){return Oe})),n.d(e,"TrianglesDrawMode",(function(){return Ae})),n.d(e,"TubeBufferGeometry",(function(){return ml})),n.d(e,"TubeGeometry",(function(){return pl})),n.d(e,"UVMapping",(function(){return ct})),n.d(e,"Uint16Attribute",(function(){return $f})),n.d(e,"Uint16BufferAttribute",(function(){return Xi})),n.d(e,"Uint32Attribute",(function(){return Jf})),n.d(e,"Uint32BufferAttribute",(function(){return Zi})),n.d(e,"Uint8Attribute",(function(){return Qf})),n.d(e,"Uint8BufferAttribute",(function(){return qi})),n.d(e,"Uint8ClampedAttribute",(function(){return Yf})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return Qi})),n.d(e,"Uncharted2ToneMapping",(function(){return st})),n.d(e,"Uniform",(function(){return Oh})),n.d(e,"UniformsLib",(function(){return ra})),n.d(e,"UniformsUtils",(function(){return Fr})),n.d(e,"UnsignedByteType",(function(){return Ot})),n.d(e,"UnsignedInt248Type",(function(){return Ut})),n.d(e,"UnsignedIntType",(function(){return Dt})),n.d(e,"UnsignedShort4444Type",(function(){return Ft})),n.d(e,"UnsignedShort5551Type",(function(){return jt})),n.d(e,"UnsignedShort565Type",(function(){return Vt})),n.d(e,"UnsignedShortType",(function(){return Nt})),n.d(e,"VSMShadowMap",(function(){return g})),n.d(e,"Vector2",(function(){return hn})),n.d(e,"Vector3",(function(){return mn})),n.d(e,"Vector4",(function(){return wn})),n.d(e,"VectorKeyframeTrack",(function(){return zu})),n.d(e,"Vertex",(function(){return Gf})),n.d(e,"VertexColors",(function(){return E})),n.d(e,"VertexNormalsHelper",(function(){return Yh})),n.d(e,"VideoTexture",(function(){return Zs})),n.d(e,"WebGLMultisampleRenderTarget",(function(){return En})),n.d(e,"WebGLRenderTarget",(function(){return Sn})),n.d(e,"WebGLRenderTargetCube",(function(){return Yr})),n.d(e,"WebGLRenderer",(function(){return as})),n.d(e,"WebGLUtils",(function(){return $o})),n.d(e,"WireframeGeometry",(function(){return el})),n.d(e,"WireframeHelper",(function(){return sd})),n.d(e,"WrapAroundEnding",(function(){return Pe})),n.d(e,"XHRLoader",(function(){return ld})),n.d(e,"ZeroCurvatureEnding",(function(){return Ce})),n.d(e,"ZeroFactor",(function(){return D})),n.d(e,"ZeroSlopeEnding",(function(){return ke})),n.d(e,"ZeroStencilOp",(function(){return We})),n.d(e,"sRGBEncoding",(function(){return Ne})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});for(var r="108",a={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,l=1,u=2,c=3,h=0,f=1,d=0,p=1,m=2,g=3,v=0,y=1,b=2,x=1,_=2,w=0,S=1,E=2,M=0,T=1,C=2,k=3,P=4,A=5,O=100,L=101,I=102,N=103,R=104,D=200,z=201,B=202,F=203,j=204,V=205,U=206,H=207,G=208,W=209,q=210,Q=0,Y=1,X=2,$=3,Z=4,J=5,K=6,tt=7,et=0,nt=1,it=2,rt=0,at=1,ot=2,st=3,lt=4,ut=5,ct=300,ht=301,ft=302,dt=303,pt=304,mt=305,gt=306,vt=307,yt=1e3,bt=1001,xt=1002,_t=1003,wt=1004,St=1004,Et=1005,Mt=1005,Tt=1006,Ct=1007,kt=1007,Pt=1008,At=1008,Ot=1009,Lt=1010,It=1011,Nt=1012,Rt=1013,Dt=1014,zt=1015,Bt=1016,Ft=1017,jt=1018,Vt=1019,Ut=1020,Ht=1021,Gt=1022,Wt=1023,qt=1024,Qt=1025,Yt=Wt,Xt=1026,$t=1027,Zt=1028,Jt=33776,Kt=33777,te=33778,ee=33779,ne=35840,ie=35841,re=35842,ae=35843,oe=36196,se=37808,le=37809,ue=37810,ce=37811,he=37812,fe=37813,de=37814,pe=37815,me=37816,ge=37817,ve=37818,ye=37819,be=37820,xe=37821,_e=2200,we=2201,Se=2202,Ee=2300,Me=2301,Te=2302,Ce=2400,ke=2401,Pe=2402,Ae=0,Oe=1,Le=2,Ie=3e3,Ne=3001,Re=3007,De=3002,ze=3003,Be=3004,Fe=3005,je=3006,Ve=3200,Ue=3201,He=0,Ge=1,We=0,qe=7680,Qe=7681,Ye=7682,Xe=7683,$e=34055,Ze=34056,Je=5386,Ke=512,tn=513,en=514,nn=515,rn=516,an=517,on=518,sn=519,ln=[],un=0;un<256;un++)ln[un]=(un<16?"0":"")+un.toString(16);var cn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ln[255&t]+ln[t>>8&255]+ln[t>>16&255]+ln[t>>24&255]+"-"+ln[255&e]+ln[e>>8&255]+"-"+ln[e>>16&15|64]+ln[e>>24&255]+"-"+ln[63&n|128]+ln[n>>8&255]+"-"+ln[n>>16&255]+ln[n>>24&255]+ln[255&i]+ln[i>>8&255]+ln[i>>16&255]+ln[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*cn.DEG2RAD},radToDeg:function(t){return t*cn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function hn(t,e){this.x=t||0,this.y=e||0}function fn(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}Object.defineProperties(hn.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(hn.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}}),Object.assign(fn,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[a+0],f=r[a+1],d=r[a+2],p=r[a+3];if(c!==p||s!==h||l!==f||u!==d){var m=1-o,g=s*h+l*f+u*d+c*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,g*v);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var _=o*v;if(s=s*m+h*_,l=l*m+f*_,u=u*m+d*_,c=c*m+p*_,m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}}),Object.defineProperties(fn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(fn.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t.order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),h=s(n/2),f=s(i/2),d=s(r/2);return"XYZ"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d):"YXZ"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d):"ZXY"===a?(this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d):"ZYX"===a?(this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d):"YZX"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c-h*f*d):"XZY"===a&&(this._x=h*u*c-l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c+h*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],f=i+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-l)*e,this._y=(a-u)*e,this._z=(o-r)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(c-l)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(a+u)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(a-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(o-r)/e,this._x=(a+u)/e,this._y=(l+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(cn.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-e;return this._w=l*a+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-e)*c)/u,f=Math.sin(e*c)/u;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=i*h+this._y*f,this._z=r*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var dn=new mn,pn=new fn;function mn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(mn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(pn.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(pn.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*i-o*n,u=s*n+o*e-r*i,c=s*i+r*n-a*e,h=-r*e-a*n-o*i;return this.x=l*s+h*-r+u*-o-c*-a,this.y=u*s+h*-a+c*-r-l*-o,this.z=c*s+h*-o+l*-a-u*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return dn.copy(this).projectOnVector(t),this.sub(dn)},reflect:function(t){return this.sub(dn.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(cn.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var gn,vn=new mn;function yn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(yn.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,l){var u=this.elements;return u[0]=t,u[1]=i,u[2]=o,u[3]=e,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)vn.x=t.getX(e),vn.y=t.getY(e),vn.z=t.getZ(e),vn.applyMatrix3(this),t.setXYZ(e,vn.x,vn.y,vn.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],b=i[7],x=i[2],_=i[5],w=i[8];return r[0]=a*p+o*v+s*x,r[3]=a*m+o*y+s*_,r[6]=a*g+o*b+s*w,r[1]=l*p+u*v+c*x,r[4]=l*m+u*y+c*_,r[7]=l*g+u*b+c*w,r[2]=h*p+f*v+d*x,r[5]=h*m+f*y+d*_,r[8]=h*g+f*b+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*a*u-e*o*l-n*r*u+n*o*s+i*r*l-i*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],f=n[8],d=f*l-u*h,p=u*c-f*s,m=h*s-l*c,g=r*d+a*p+o*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=d*y,i[1]=(o*h-f*a)*y,i[2]=(u*a-o*l)*y,i[3]=p*y,i[4]=(f*r-o*c)*y,i[5]=(o*s-u*r)*y,i[6]=m*y,i[7]=(a*c-h*r)*y,i[8]=(l*r-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*a+l*o)+a+t,-i*l,i*s,-i*(-l*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],u=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*l,i[6]=e*o+n*u,i[1]=-n*r+e*s,i[4]=-n*a+e*l,i[7]=-n*o+e*u,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var bn={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===gn&&(gn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),gn.width=t.width,gn.height=t.height;var n=gn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=gn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},xn=0;function _n(t,e,n,i,r,a,o,s,l,u){Object.defineProperty(this,"id",{value:xn++}),this.uuid=cn.generateUUID(),this.name="",this.image=void 0!==t?t:_n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:_n.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:bt,this.wrapT=void 0!==i?i:bt,this.magFilter=void 0!==r?r:Tt,this.minFilter=void 0!==a?a:Pt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Wt,this.type=void 0!==s?s:Ot,this.offset=new hn(0,0),this.repeat=new hn(1,1),this.center=new hn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Ie,this.version=0,this.onUpdate=null}function wn(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function Sn(t,e,n){this.width=t,this.height=e,this.scissor=new wn(0,0,t,e),this.scissorTest=!1,this.viewport=new wn(0,0,t,e),n=n||{},this.texture=new _n(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Tt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function En(t,e,n){Sn.call(this,t,e,n),this.samples=4}_n.DEFAULT_IMAGE=void 0,_n.DEFAULT_MAPPING=ct,_n.prototype=Object.assign(Object.create(i.prototype),{constructor:_n,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=cn.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)r.push(bn.getDataURL(i[a]))}else r=bn.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==ct)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case yt:t.x=t.x-Math.floor(t.x);break;case bt:t.x=t.x<0?0:1;break;case xt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case yt:t.y=t.y-Math.floor(t.y);break;case bt:t.y=t.y<0?0:1;break;case xt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(_n.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(wn.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(wn.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,a=t.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+f)<.1&&Math.abs(h+d)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(c+1)/2,v=(p+1)/2,y=(s+u)/4,b=(l+f)/4,x=(h+d)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=b/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=x/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=b/(r=Math.sqrt(v)),i=x/r),this.set(n,i,r,e),this}var _=Math.sqrt((d-h)*(d-h)+(l-f)*(l-f)+(u-s)*(u-s));return Math.abs(_)<.001&&(_=1),this.x=(d-h)/_,this.y=(l-f)/_,this.z=(u-s)/_,this.w=Math.acos((o+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Sn.prototype=Object.assign(Object.create(i.prototype),{constructor:Sn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),En.prototype=Object.assign(Object.create(Sn.prototype),{constructor:En,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Sn.prototype.copy.call(this,t),this.samples=t.samples,this}});var Mn=new mn,Tn=new Ln,Cn=new mn(0,0,0),kn=new mn(1,1,1),Pn=new mn,An=new mn,On=new mn;function Ln(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ln.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,l,u,c,h,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ln).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/Mn.setFromMatrixColumn(t,0).length(),r=1/Mn.setFromMatrixColumn(t,1).length(),a=1/Mn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var h=a*u,f=a*c,d=o*u,p=o*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=f+d*l,e[5]=h-p*l,e[9]=-o*s,e[2]=p-h*l,e[6]=d+f*l,e[10]=a*s}else if("YXZ"===t.order){var m=s*u,g=s*c,v=l*u,y=l*c;e[0]=m+y*o,e[4]=v*o-g,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-o,e[2]=g*o-v,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){m=s*u,g=s*c,v=l*u,y=l*c;e[0]=m-y*o,e[4]=-a*c,e[8]=v+g*o,e[1]=g+v*o,e[5]=a*u,e[9]=y-m*o,e[2]=-a*l,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){h=a*u,f=a*c,d=o*u,p=o*c;e[0]=s*u,e[4]=d*l-f,e[8]=h*l+p,e[1]=s*c,e[5]=p*l+h,e[9]=f*l-d,e[2]=-l,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var b=a*s,x=a*l,_=o*s,w=o*l;e[0]=s*u,e[4]=w-b*c,e[8]=_*c+x,e[1]=c,e[5]=a*u,e[9]=-o*u,e[2]=-l*u,e[6]=x*c+_,e[10]=b-w*c}else if("XZY"===t.order){b=a*s,x=a*l,_=o*s,w=o*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=b*c+w,e[5]=a*u,e[9]=x*c-_,e[2]=_*c-x,e[6]=o*u,e[10]=w*c+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Cn,t,kn)},lookAt:function(t,e,n){var i=this.elements;return On.subVectors(t,e),0===On.lengthSq()&&(On.z=1),On.normalize(),Pn.crossVectors(n,On),0===Pn.lengthSq()&&(1===Math.abs(n.z)?On.x+=1e-4:On.z+=1e-4,On.normalize(),Pn.crossVectors(n,On)),Pn.normalize(),An.crossVectors(On,Pn),i[0]=Pn.x,i[4]=An.x,i[8]=On.x,i[1]=Pn.y,i[5]=An.y,i[9]=On.y,i[2]=Pn.z,i[6]=An.z,i[10]=On.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=i[0],w=i[4],S=i[8],E=i[12],M=i[1],T=i[5],C=i[9],k=i[13],P=i[2],A=i[6],O=i[10],L=i[14],I=i[3],N=i[7],R=i[11],D=i[15];return r[0]=a*_+o*M+s*P+l*I,r[4]=a*w+o*T+s*A+l*N,r[8]=a*S+o*C+s*O+l*R,r[12]=a*E+o*k+s*L+l*D,r[1]=u*_+c*M+h*P+f*I,r[5]=u*w+c*T+h*A+f*N,r[9]=u*S+c*C+h*O+f*R,r[13]=u*E+c*k+h*L+f*D,r[2]=d*_+p*M+m*P+g*I,r[6]=d*w+p*T+m*A+g*N,r[10]=d*S+p*C+m*O+g*R,r[14]=d*E+p*k+m*L+g*D,r[3]=v*_+y*M+b*P+x*I,r[7]=v*w+y*T+b*A+x*N,r[11]=v*S+y*C+b*O+x*R,r[15]=v*E+y*k+b*L+x*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)Mn.x=t.getX(e),Mn.y=t.getY(e),Mn.z=t.getZ(e),Mn.applyMatrix4(this),t.setXYZ(e,Mn.x,Mn.y,Mn.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+r*s*c-i*l*c-r*o*h+n*l*h+i*o*f-n*s*f)+t[7]*(+e*s*f-e*l*h+r*a*h-i*a*f+i*l*u-r*s*u)+t[11]*(+e*l*c-e*o*f-r*a*c+n*a*f+r*o*u-n*l*u)+t[15]*(-i*o*u-e*s*c+e*o*h+i*a*c-n*a*h+n*s*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],d=i[9],p=i[10],m=i[11],g=i[12],v=i[13],y=i[14],b=i[15],x=d*y*h-v*p*h+v*c*m-u*y*m-d*c*b+u*p*b,_=g*p*h-f*y*h-g*c*m+l*y*m+f*c*b-l*p*b,w=f*v*h-g*d*h+g*u*m-l*v*m-f*u*b+l*d*b,S=g*d*c-f*v*c-g*u*p+l*v*p+f*u*y-l*d*y,E=r*x+a*_+o*w+s*S;if(0===E){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var T=1/E;return n[0]=x*T,n[1]=(v*p*s-d*y*s-v*o*m+a*y*m+d*o*b-a*p*b)*T,n[2]=(u*y*s-v*c*s+v*o*h-a*y*h-u*o*b+a*c*b)*T,n[3]=(d*c*s-u*p*s-d*o*h+a*p*h+u*o*m-a*c*m)*T,n[4]=_*T,n[5]=(f*y*s-g*p*s+g*o*m-r*y*m-f*o*b+r*p*b)*T,n[6]=(g*c*s-l*y*s-g*o*h+r*y*h+l*o*b-r*c*b)*T,n[7]=(l*p*s-f*c*s+f*o*h-r*p*h-l*o*m+r*c*m)*T,n[8]=w*T,n[9]=(g*d*s-f*v*s-g*a*m+r*v*m+f*a*b-r*d*b)*T,n[10]=(l*v*s-g*u*s+g*a*h-r*v*h-l*a*b+r*u*b)*T,n[11]=(f*u*s-l*d*s-f*a*h+r*d*h+l*a*m-r*u*m)*T,n[12]=S*T,n[13]=(f*v*o-g*d*o+g*a*p-r*v*p-f*a*y+r*d*y)*T,n[14]=(g*u*o-l*v*o-g*a*c+r*v*c+l*a*y-r*u*y)*T,n[15]=(l*d*o-f*u*o+f*a*c-r*d*c-l*a*p+r*u*p)*T,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,u=a+a,c=o+o,h=r*l,f=r*u,d=r*c,p=a*u,m=a*c,g=o*c,v=s*l,y=s*u,b=s*c,x=n.x,_=n.y,w=n.z;return i[0]=(1-(p+g))*x,i[1]=(f+b)*x,i[2]=(d-y)*x,i[3]=0,i[4]=(f-b)*_,i[5]=(1-(h+g))*_,i[6]=(m+v)*_,i[7]=0,i[8]=(d+y)*w,i[9]=(m-v)*w,i[10]=(1-(h+p))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=Mn.set(i[0],i[1],i[2]).length(),a=Mn.set(i[4],i[5],i[6]).length(),o=Mn.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Tn.copy(this);var s=1/r,l=1/a,u=1/o;return Tn.elements[0]*=s,Tn.elements[1]*=s,Tn.elements[2]*=s,Tn.elements[4]*=l,Tn.elements[5]*=l,Tn.elements[6]*=l,Tn.elements[8]*=u,Tn.elements[9]*=u,Tn.elements[10]*=u,e.setFromRotationMatrix(Tn),n.x=r,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(e-t),l=2*r/(n-i),u=(e+t)/(e-t),c=(n+i)/(n-i),h=-(a+r)/(a-r),f=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),l=1/(n-i),u=1/(a-r),c=(e+t)*s,h=(n+i)*l,f=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var In=new Ln,Nn=new fn;function Rn(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||Rn.DefaultOrder}function Dn(){this.mask=1}Rn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Rn.DefaultOrder="XYZ",Object.defineProperties(Rn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Rn.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=cn.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],l=r[1],u=r[5],c=r[9],h=r[2],f=r[6],d=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return In.makeRotationFromQuaternion(t),this.setFromRotationMatrix(In,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return Nn.setFromEuler(this),this.setFromQuaternion(Nn,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new mn(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(Dn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var zn=0,Bn=new mn,Fn=new fn,jn=new Ln,Vn=new mn,Un=new mn,Hn=new mn,Gn=new fn,Wn=new mn(1,0,0),qn=new mn(0,1,0),Qn=new mn(0,0,1),Yn={type:"added"},Xn={type:"removed"};function $n(){Object.defineProperty(this,"id",{value:zn++}),this.uuid=cn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$n.DefaultUp.clone();var t=new mn,e=new Rn,n=new fn,i=new mn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ln},normalMatrix:{value:new yn}}),this.matrix=new Ln,this.matrixWorld=new Ln,this.matrixAutoUpdate=$n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Zn(){$n.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}$n.DefaultUp=new mn(0,1,0),$n.DefaultMatrixAutoUpdate=!0,$n.prototype=Object.assign(Object.create(i.prototype),{constructor:$n,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.multiply(Fn),this},rotateOnWorldAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.premultiply(Fn),this},rotateX:function(t){return this.rotateOnAxis(Wn,t)},rotateY:function(t){return this.rotateOnAxis(qn,t)},rotateZ:function(t){return this.rotateOnAxis(Qn,t)},translateOnAxis:function(t,e){return Bn.copy(t).applyQuaternion(this.quaternion),this.position.add(Bn.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wn,t)},translateY:function(t){return this.translateOnAxis(qn,t)},translateZ:function(t){return this.translateOnAxis(Qn,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(jn.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Vn.copy(t):Vn.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Un.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jn.lookAt(Un,Vn,this.up):jn.lookAt(Vn,Un,this.up),this.quaternion.setFromRotationMatrix(jn),i&&(jn.extractRotation(i.matrixWorld),Fn.setFromRotationMatrix(jn),this.quaternion.premultiply(Fn.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Xn)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),jn.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),jn.multiply(t.parent.matrixWorld)),t.applyMatrix(jn),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new mn),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new fn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Un,t,Hn),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new mn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Un,Gn,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ae&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];r(t.shapes,u)}else r(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(r(t.materials,this.material[s]));i.material=c}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(e){var h=m(t.geometries),f=m(t.materials),d=m(t.textures),p=m(t.images);o=m(t.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=i,n;function m(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),Zn.prototype=Object.assign(Object.create($n.prototype),{constructor:Zn,isScene:!0,copy:function(t,e){return $n.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=$n.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Jn=[new mn,new mn,new mn,new mn,new mn,new mn,new mn,new mn],Kn=new mn,ti=new mn,ei=new mn,ni=new mn,ii=new mn,ri=new mn,ai=new mn,oi=new mn,si=new mn,li=new mn,ui=new mn;function ci(t,e){this.min=void 0!==t?t:new mn(1/0,1/0,1/0),this.max=void 0!==e?e:new mn(-1/0,-1/0,-1/0)}function hi(t,e,n,i,r){var a,o;for(a=0,o=t.length-3;a<=o;a+=3){ui.fromArray(t,a);var s=r.x*Math.abs(ui.x)+r.y*Math.abs(ui.y)+r.z*Math.abs(ui.z),l=e.dot(ui),u=n.dot(ui),c=i.dot(ui);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(ci.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var u=t[s],c=t[s+1],h=t[s+2];u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var u=t.getX(s),c=t.getY(s),h=t.getZ(s);u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Kn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new mn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new mn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){var e,n;t.updateWorldMatrix(!1,!1);var i=t.geometry;if(void 0!==i)if(i.isGeometry){var r=i.vertices;for(e=0,n=r.length;e<n;e++)Kn.copy(r[e]),Kn.applyMatrix4(t.matrixWorld),this.expandByPoint(Kn)}else if(i.isBufferGeometry){var a=i.attributes.position;if(void 0!==a)for(e=0,n=a.count;e<n;e++)Kn.fromBufferAttribute(a,e).applyMatrix4(t.matrixWorld),this.expandByPoint(Kn)}var o=t.children;for(e=0,n=o.length;e<n;e++)this.expandByObject(o[e]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new mn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Kn),Kn.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(oi),si.subVectors(this.max,oi),ti.subVectors(t.a,oi),ei.subVectors(t.b,oi),ni.subVectors(t.c,oi),ii.subVectors(ei,ti),ri.subVectors(ni,ei),ai.subVectors(ti,ni);var e=[0,-ii.z,ii.y,0,-ri.z,ri.y,0,-ai.z,ai.y,ii.z,0,-ii.x,ri.z,0,-ri.x,ai.z,0,-ai.x,-ii.y,ii.x,0,-ri.y,ri.x,0,-ai.y,ai.x,0];return!!hi(e,ti,ei,ni,si)&&(!!hi(e=[1,0,0,0,1,0,0,0,1],ti,ei,ni,si)&&(li.crossVectors(ii,ri),hi(e=[li.x,li.y,li.z],ti,ei,ni,si)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new mn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Kn.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Kn).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(Jn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Jn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Jn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Jn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Jn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Jn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Jn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Jn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Jn),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var fi=new ci;function di(t,e){this.center=void 0!==t?t:new mn,this.radius=void 0!==e?e:0}Object.assign(di.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):fi.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new mn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new ci),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var pi=new mn,mi=new mn,gi=new mn,vi=new mn,yi=new mn,bi=new mn,xi=new mn;function _i(t,e){this.origin=void 0!==t?t:new mn,this.direction=void 0!==e?e:new mn}Object.assign(_i.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new mn),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,pi)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new mn),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=pi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(pi.copy(this.direction).multiplyScalar(e).add(this.origin),pi.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){mi.copy(t).add(e).multiplyScalar(.5),gi.copy(e).sub(t).normalize(),vi.copy(this.origin).sub(mi);var r,a,o,s,l=.5*t.distanceTo(e),u=-this.direction.dot(gi),c=vi.dot(this.direction),h=-vi.dot(gi),f=vi.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(a=u*c-h,s=l*d,(r=u*h-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(r*=p)*(r+u*(a*=p)+2*c)+a*(u*r+a+2*h)+f}else a=l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+f;else a=-l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+f;else a<=-s?o=-(r=Math.max(0,-(-u*l+c)))*r+(a=r>0?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+f:a<=s?(r=0,o=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+f):o=-(r=Math.max(0,-(u*l+c)))*r+(a=r>0?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+f;else a=u>0?-l:l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(gi).multiplyScalar(a).add(mi),o},intersectSphere:function(t,e){pi.subVectors(t.center,this.origin);var n=pi.dot(this.direction),i=pi.dot(pi)-n*n,r=t.radius*t.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),u>=0?(r=(t.min.y-h.y)*u,a=(t.max.y-h.y)*u):(r=(t.max.y-h.y)*u,a=(t.min.y-h.y)*u),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,pi)},intersectTriangle:function(t,e,n,i,r){yi.subVectors(e,t),bi.subVectors(n,t),xi.crossVectors(yi,bi);var a,o=this.direction.dot(xi);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}vi.subVectors(this.origin,t);var s=a*this.direction.dot(bi.crossVectors(vi,bi));if(s<0)return null;var l=a*this.direction.dot(yi.cross(vi));if(l<0)return null;if(s+l>o)return null;var u=-a*vi.dot(xi);return u<0?null:this.at(u/o,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var wi=new mn,Si=new mn,Ei=new mn,Mi=new mn,Ti=new mn,Ci=new mn,ki=new mn,Pi=new mn,Ai=new mn,Oi=new mn;function Li(t,e,n){this.a=void 0!==t?t:new mn,this.b=void 0!==e?e:new mn,this.c=void 0!==n?n:new mn}Object.assign(Li,{getNormal:function(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new mn),i.subVectors(n,e),wi.subVectors(t,e),i.cross(wi);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){wi.subVectors(i,e),Si.subVectors(n,e),Ei.subVectors(t,e);var a=wi.dot(wi),o=wi.dot(Si),s=wi.dot(Ei),l=Si.dot(Si),u=Si.dot(Ei),c=a*l-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new mn),0===c)return r.set(-2,-1,-1);var h=1/c,f=(l*s-o*u)*h,d=(a*u-o*s)*h;return r.set(1-f-d,d,f)},containsPoint:function(t,e,n,i){return Li.getBarycoord(t,e,n,i,Mi),Mi.x>=0&&Mi.y>=0&&Mi.x+Mi.y<=1},getUV:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,Mi),s.set(0,0),s.addScaledVector(r,Mi.x),s.addScaledVector(a,Mi.y),s.addScaledVector(o,Mi.z),s},isFrontFacing:function(t,e,n,i){return wi.subVectors(n,e),Si.subVectors(t,e),wi.cross(Si).dot(i)<0}}),Object.assign(Li.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return wi.subVectors(this.c,this.b),Si.subVectors(this.a,this.b),.5*wi.cross(Si).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new mn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Li.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new mn),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Li.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return Li.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return Li.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Li.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new mn);var n,i,r=this.a,a=this.b,o=this.c;Ti.subVectors(a,r),Ci.subVectors(o,r),Pi.subVectors(t,r);var s=Ti.dot(Pi),l=Ci.dot(Pi);if(s<=0&&l<=0)return e.copy(r);Ai.subVectors(t,a);var u=Ti.dot(Ai),c=Ci.dot(Ai);if(u>=0&&c<=u)return e.copy(a);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),e.copy(r).addScaledVector(Ti,n);Oi.subVectors(t,o);var f=Ti.dot(Oi),d=Ci.dot(Oi);if(d>=0&&f<=d)return e.copy(o);var p=f*l-s*d;if(p<=0&&l>=0&&d<=0)return i=l/(l-d),e.copy(r).addScaledVector(Ci,i);var m=u*d-f*c;if(m<=0&&c-u>=0&&f-d>=0)return ki.subVectors(o,a),i=(c-u)/(c-u+(f-d)),e.copy(a).addScaledVector(ki,i);var g=1/(m+p+h);return n=p*g,i=h*g,e.copy(r).addScaledVector(Ti,n).addScaledVector(Ci,i)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Ii={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ni={h:0,s:0,l:0},Ri={h:0,s:0,l:0};function Di(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function zi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Bi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Fi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function ji(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new mn,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Di,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Object.assign(Di.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=cn.euclideanModulo(t,1),e=cn.clamp(e,0,1),n=cn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=zi(r,i,t+1/3),this.g=zi(r,i,t),this.b=zi(r,i,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(u=Ii[t])?this.setHex(u):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Bi(t.r),this.g=Bi(t.g),this.b=Bi(t.b),this},copyLinearToSRGB:function(t){return this.r=Fi(t.r),this.g=Fi(t.g),this.b=Fi(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),l=(s+o)/2;if(s===o)e=0,n=0;else{var u=o-s;switch(n=l<=.5?u/(o+s):u/(2-o-s),o){case i:e=(r-a)/u+(r<a?6:0);break;case r:e=(a-i)/u+2;break;case a:e=(i-r)/u+4}e/=6}return t.h=e,t.s=n,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Ni),Ni.h+=t,Ni.s+=e,Ni.l+=n,this.setHSL(Ni.h,Ni.s,Ni.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Ni),t.getHSL(Ri);var n=cn.lerp(Ni.h,Ri.h,e),i=cn.lerp(Ni.s,Ri.s,e),r=cn.lerp(Ni.l,Ri.l,e);return this.setHSL(n,i,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(ji.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Vi=0;function Ui(){Object.defineProperty(this,"id",{value:Vi++}),this.uuid=cn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=T,this.side=v,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=w,this.opacity=1,this.transparent=!1,this.blendSrc=j,this.blendDst=V,this.blendEquation=O,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=sn,this.stencilRef=0,this.stencilMask=255,this.stencilFail=qe,this.stencilZFail=qe,this.stencilZPass=qe,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function Hi(t){Ui.call(this),this.type="MeshBasicMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Gi(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wi(t,e,n){Gi.call(this,new Int8Array(t),e,n)}function qi(t,e,n){Gi.call(this,new Uint8Array(t),e,n)}function Qi(t,e,n){Gi.call(this,new Uint8ClampedArray(t),e,n)}function Yi(t,e,n){Gi.call(this,new Int16Array(t),e,n)}function Xi(t,e,n){Gi.call(this,new Uint16Array(t),e,n)}function $i(t,e,n){Gi.call(this,new Int32Array(t),e,n)}function Zi(t,e,n){Gi.call(this,new Uint32Array(t),e,n)}function Ji(t,e,n){Gi.call(this,new Float32Array(t),e,n)}function Ki(t,e,n){Gi.call(this,new Float64Array(t),e,n)}function tr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function er(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Ui.prototype=Object.assign(Object.create(i.prototype),{constructor:Ui,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===x;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==T&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==v&&(n.side=this.side),this.vertexColors!==w&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),a=i(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWrite=t.stencilWrite,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilMask=t.stencilMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Hi.prototype=Object.create(Ui.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isMeshBasicMaterial=!0,Hi.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(Gi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Gi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Di),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new hn),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new mn),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new wn),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Wi.prototype=Object.create(Gi.prototype),Wi.prototype.constructor=Wi,qi.prototype=Object.create(Gi.prototype),qi.prototype.constructor=qi,Qi.prototype=Object.create(Gi.prototype),Qi.prototype.constructor=Qi,Yi.prototype=Object.create(Gi.prototype),Yi.prototype.constructor=Yi,Xi.prototype=Object.create(Gi.prototype),Xi.prototype.constructor=Xi,$i.prototype=Object.create(Gi.prototype),$i.prototype.constructor=$i,Zi.prototype=Object.create(Gi.prototype),Zi.prototype.constructor=Zi,Ji.prototype=Object.create(Gi.prototype),Ji.prototype.constructor=Ji,Ki.prototype=Object.create(Gi.prototype),Ki.prototype.constructor=Ki,Object.assign(tr.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,n.push(e)),e={start:3*a,materialIndex:i})}void 0!==e&&(e.count=3*a-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=t.morphTargets,l=s.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]={name:s[u].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,f=h.length;if(f>0){c=[];for(u=0;u<f;u++)c[u]={name:h[u].name,data:[]};this.morphTargets.normal=c}var d=t.skinIndices,p=t.skinWeights,m=d.length===i.length,g=p.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var v=n[u];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=v.normal;this.normals.push(b,b,b)}var x,_=v.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=v.color;this.colors.push(w,w,w)}if(!0===a)void 0!==(x=r[0][u])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new hn,new hn,new hn));if(!0===o)void 0!==(x=r[1][u])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new hn,new hn,new hn));for(var S=0;S<l;S++){var E=s[S].vertices;e[S].data.push(E[v.a],E[v.b],E[v.c])}for(S=0;S<f;S++){var M=h[S].vertexNormals[u];c[S].data.push(M.a,M.b,M.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),g&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var nr=1,ir=new Ln,rr=new $n,ar=new mn,or=new ci,sr=new ci,lr=new mn;function ur(){Object.defineProperty(this,"id",{value:nr+=2}),this.uuid=cn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ur.prototype=Object.assign(Object.create(i.prototype),{constructor:ur,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(er(t)>65535?Zi:Xi)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new Gi(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new yn).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new yn).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return ir.makeRotationX(t),this.applyMatrix(ir),this},rotateY:function(t){return ir.makeRotationY(t),this.applyMatrix(ir),this},rotateZ:function(t){return ir.makeRotationZ(t),this.applyMatrix(ir),this},translate:function(t,e,n){return ir.makeTranslation(t,e,n),this.applyMatrix(ir),this},scale:function(t,e,n){return ir.makeScale(t,e,n),this.applyMatrix(ir),this},lookAt:function(t){return rr.lookAt(t),rr.updateMatrix(),this.applyMatrix(rr.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ar).negate(),this.translate(ar.x,ar.y,ar.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Ji(3*e.vertices.length,3),i=new Ji(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Ji(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Ji(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new tr).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Gi(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Gi(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new Gi(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Gi(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Gi(a,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var s=[],l=t.morphTargets[o],u=0,c=l.length;u<c;u++){var h=l[u],f=new Ji(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var d=new Ji(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new Ji(4*t.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ci);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];or.setFromBufferAttribute(r),this.boundingBox.expandByPoint(or.min),this.boundingBox.expandByPoint(or.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new di);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(or.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];sr.setFromBufferAttribute(a),or.expandByPoint(sr.min),or.expandByPoint(sr.max)}or.getCenter(n);var o=0;for(i=0,r=t.count;i<r;i++)lr.fromBufferAttribute(t,i),o=Math.max(o,n.distanceToSquared(lr));if(e)for(i=0,r=e.length;i<r;i++)for(var s=0,l=(a=e[i]).count;s<l;s++)lr.fromBufferAttribute(a,s),o=Math.max(o,n.distanceToSquared(lr));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Gi(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;var o,s,l,u=e.normal.array,c=new mn,h=new mn,f=new mn,d=new mn,p=new mn;if(t){var m=t.array;for(r=0,a=t.count;r<a;r+=3)o=3*m[r+0],s=3*m[r+1],l=3*m[r+2],c.fromArray(n,o),h.fromArray(n,s),f.fromArray(n,l),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),u[o]+=d.x,u[o+1]+=d.y,u[o+2]+=d.z,u[s]+=d.x,u[s+1]+=d.y,u[s+2]+=d.z,u[l]+=d.x,u[l+1]+=d.y,u[l+2]+=d.z}else for(r=0,a=n.length;r<a;r+=9)c.fromArray(n,r),h.fromArray(n,r+3),f.fromArray(n,r+6),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),u[r]=d.x,u[r+1]=d.y,u[r+2]=d.z,u[r+3]=d.x,u[r+4]=d.y,u[r+5]=d.z,u[r+6]=d.x,u[r+7]=d.y,u[r+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e,l=Math.min(o.length,r.length-s),u=0,c=s;u<l;u++,c++)r[c]=o[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)lr.x=t.getX(e),lr.y=t.getY(e),lr.z=t.getZ(e),lr.normalize(),t.setXYZ(e,lr.x,lr.y,lr.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=new n.constructor(e.length*i),a=0,o=0,s=0,l=e.length;s<l;s++){a=e[s]*i;for(var u=0;u<i;u++)r[o++]=n[a++]}return new Gi(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new ur,n=this.index.array,i=this.attributes;for(var r in i){var a=t(i[r],n);e.addAttribute(r,a)}var o=this.morphAttributes;for(r in o){for(var s=[],l=o[r],u=0,c=l.length;u<c;u++){a=t(l[u],n);s.push(a)}e.morphAttributes[r]=s}for(var h=this.groups,f=(u=0,h.length);u<f;u++){var d=h[u];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var a=(f=r[n]).toJSON();""!==f.name&&(a.name=f.name),t.data.attributes[n]=a}var o={},s=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,h=l.length;c<h;c++){var f;a=(f=l[c]).toJSON();""!==f.name&&(a.name=f.name),u.push(a)}u.length>0&&(o[n]=u,s=!0)}s&&(t.data.morphAttributes=o);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(t.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),t},clone:function(){return(new ur).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var l=[],u=s[e];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[e]=l}var c=t.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var cr=new Ln,hr=new _i,fr=new di,dr=new mn,pr=new mn,mr=new mn,gr=new mn,vr=new mn,yr=new mn,br=new mn,xr=new mn,_r=new mn,wr=new hn,Sr=new hn,Er=new hn,Mr=new mn,Tr=new mn;function Cr(t,e){$n.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ur,this.material=void 0!==e?e:new Hi({color:16777215*Math.random()}),this.drawMode=Ae,this.updateMorphTargets()}function kr(t,e,n,i,r,a,o,s){if(null===(e.side===y?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,e.side!==b,s)))return null;Tr.copy(s),Tr.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(Tr);return l<n.near||l>n.far?null:{distance:l,point:Tr.clone(),object:t}}function Pr(t,e,n,i,r,a,o,s,l,u,c){dr.fromBufferAttribute(r,l),pr.fromBufferAttribute(r,u),mr.fromBufferAttribute(r,c);var h=t.morphTargetInfluences;if(e.morphTargets&&a&&h){br.set(0,0,0),xr.set(0,0,0),_r.set(0,0,0);for(var f=0,d=a.length;f<d;f++){var p=h[f],m=a[f];0!==p&&(gr.fromBufferAttribute(m,l),vr.fromBufferAttribute(m,u),yr.fromBufferAttribute(m,c),br.addScaledVector(gr.sub(dr),p),xr.addScaledVector(vr.sub(pr),p),_r.addScaledVector(yr.sub(mr),p))}dr.add(br),pr.add(xr),mr.add(_r)}var g=kr(t,e,n,i,dr,pr,mr,Mr);if(g){o&&(wr.fromBufferAttribute(o,l),Sr.fromBufferAttribute(o,u),Er.fromBufferAttribute(o,c),g.uv=Li.getUV(Mr,dr,pr,mr,wr,Sr,Er,new hn)),s&&(wr.fromBufferAttribute(s,l),Sr.fromBufferAttribute(s,u),Er.fromBufferAttribute(s,c),g.uv2=Li.getUV(Mr,dr,pr,mr,wr,Sr,Er,new hn));var v=new ji(l,u,c);Li.getNormal(dr,pr,mr,v.normal),g.face=v}return g}Cr.prototype=Object.assign(Object.create($n.prototype),{constructor:Cr,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return $n.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),fr.copy(i.boundingSphere),fr.applyMatrix4(a),!1!==t.ray.intersectsSphere(fr)&&(cr.getInverse(a),hr.copy(t.ray).applyMatrix4(cr),null===i.boundingBox||!1!==hr.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,s,l,u,c,h,f,d,p,m=i.index,g=i.attributes.position,v=i.morphAttributes.position,y=i.attributes.uv,b=i.attributes.uv2,x=i.groups,_=i.drawRange;if(null!==m)if(Array.isArray(r))for(u=0,h=x.length;u<h;u++)for(p=r[(d=x[u]).materialIndex],c=Math.max(d.start,_.start),f=Math.min(d.start+d.count,_.start+_.count);c<f;c+=3)o=m.getX(c),s=m.getX(c+1),l=m.getX(c+2),(n=Pr(this,p,t,hr,g,v,y,b,o,s,l))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=d.materialIndex,e.push(n));else for(u=Math.max(0,_.start),h=Math.min(m.count,_.start+_.count);u<h;u+=3)o=m.getX(u),s=m.getX(u+1),l=m.getX(u+2),(n=Pr(this,r,t,hr,g,v,y,b,o,s,l))&&(n.faceIndex=Math.floor(u/3),e.push(n));else if(void 0!==g)if(Array.isArray(r))for(u=0,h=x.length;u<h;u++)for(p=r[(d=x[u]).materialIndex],c=Math.max(d.start,_.start),f=Math.min(d.start+d.count,_.start+_.count);c<f;c+=3)(n=Pr(this,p,t,hr,g,v,y,b,o=c,s=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=d.materialIndex,e.push(n));else for(u=Math.max(0,_.start),h=Math.min(g.count,_.start+_.count);u<h;u+=3)(n=Pr(this,r,t,hr,g,v,y,b,o=u,s=u+1,l=u+2))&&(n.faceIndex=Math.floor(u/3),e.push(n))}else if(i.isGeometry){var w,S,E,M,T=Array.isArray(r),C=i.vertices,k=i.faces,P=i.faceVertexUvs[0];P.length>0&&(M=P);for(var A=0,O=k.length;A<O;A++){var L=k[A],I=T?r[L.materialIndex]:r;if(void 0!==I&&(w=C[L.a],S=C[L.b],E=C[L.c],n=kr(this,I,t,hr,w,S,E,Mr))){if(M&&M[A]){var N=M[A];wr.copy(N[0]),Sr.copy(N[1]),Er.copy(N[2]),n.uv=Li.getUV(Mr,w,S,E,wr,Sr,Er,new hn)}n.face=L,n.faceIndex=A,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ar=0,Or=new Ln,Lr=new $n,Ir=new mn;function Nr(){Object.defineProperty(this,"id",{value:Ar+=2}),this.uuid=cn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Rr(t,e,n,i,r,a){Nr.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new Dr(t,e,n,i,r,a)),this.mergeVertices()}function Dr(t,e,n,i,r,a){ur.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var o=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var s=[],l=[],u=[],c=[],h=0,f=0;function d(t,e,n,i,r,a,d,p,m,g,v){var y,b,x=a/m,_=d/g,w=a/2,S=d/2,E=p/2,M=m+1,T=g+1,C=0,k=0,P=new mn;for(b=0;b<T;b++){var A=b*_-S;for(y=0;y<M;y++){var O=y*x-w;P[t]=O*i,P[e]=A*r,P[n]=E,l.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[n]=p>0?1:-1,u.push(P.x,P.y,P.z),c.push(y/m),c.push(1-b/g),C+=1}}for(b=0;b<g;b++)for(y=0;y<m;y++){var L=h+y+M*b,I=h+y+M*(b+1),N=h+(y+1)+M*(b+1),R=h+(y+1)+M*b;s.push(L,I,R),s.push(I,N,R),k+=6}o.addGroup(f,k,v),f+=k,h+=C}d("z","y","x",-1,-1,n,e,t,a,r,0),d("z","y","x",1,-1,n,e,-t,a,r,1),d("x","z","y",1,1,t,n,e,i,a,2),d("x","z","y",1,-1,t,n,-e,i,a,3),d("x","y","z",1,-1,t,e,n,i,r,4),d("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new Ji(l,3)),this.addAttribute("normal",new Ji(u,3)),this.addAttribute("uv",new Ji(c,2))}function zr(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function Br(t){for(var e={},n=0;n<t.length;n++){var i=zr(t[n]);for(var r in i)e[r]=i[r]}return e}Nr.prototype=Object.assign(Object.create(i.prototype),{constructor:Nr,isGeometry:!0,applyMatrix:function(t){for(var e=(new yn).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(t)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Or.makeRotationX(t),this.applyMatrix(Or),this},rotateY:function(t){return Or.makeRotationY(t),this.applyMatrix(Or),this},rotateZ:function(t){return Or.makeRotationZ(t),this.applyMatrix(Or),this},translate:function(t,e,n){return Or.makeTranslation(t,e,n),this.applyMatrix(Or),this},scale:function(t,e,n){return Or.makeScale(t,e,n),this.applyMatrix(Or),this},lookAt:function(t){return Lr.lookAt(t),Lr.updateMatrix(),this.applyMatrix(Lr.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,i=t.attributes,r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<r.length;u+=3)e.vertices.push((new mn).fromArray(r,u)),void 0!==o&&e.colors.push((new Di).fromArray(o,u));function c(t,n,i,r){var u=void 0===o?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],c=new ji(t,n,i,void 0===a?[]:[(new mn).fromArray(a,3*t),(new mn).fromArray(a,3*n),(new mn).fromArray(a,3*i)],u,r);e.faces.push(c),void 0!==s&&e.faceVertexUvs[0].push([(new hn).fromArray(s,2*t),(new hn).fromArray(s,2*n),(new hn).fromArray(s,2*i)]),void 0!==l&&e.faceVertexUvs[1].push([(new hn).fromArray(l,2*t),(new hn).fromArray(l,2*n),(new hn).fromArray(l,2*i)])}var h=t.groups;if(h.length>0)for(u=0;u<h.length;u++)for(var f=h[u],d=f.start,p=d,m=d+f.count;p<m;p+=3)void 0!==n?c(n[p],n[p+1],n[p+2],f.materialIndex):c(p,p+1,p+2,f.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(u=0;u<r.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ir).negate(),this.translate(Ir.x,Ir.y,Ir.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Ln;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new mn,e=new mn,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new mn;if(t){var s,l,u,c=new mn,h=new mn;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(i=0,r=this.faces.length;i<r;i++){var f=(a=this.faces[i]).vertexNormals;3===f.length?(f[0].copy(o[a.a]),f[1].copy(o[a.b]),f[2].copy(o[a.c])):(f[0]=o[a.a].clone(),f[1]=o[a.b].clone(),f[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new Nr;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new mn,u={a:new mn,b:new mn,c:new mn},o.push(l),s.push(u)}var l,u,c=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ci),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new di),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,l=t.faces,u=this.colors,c=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new yn).getNormalMatrix(e));for(var h=0,f=o.length;h<f;h++){var d=o[h].clone();void 0!==e&&d.applyMatrix4(e),a.push(d)}for(h=0,f=c.length;h<f;h++)u.push(c[h].clone());for(h=0,f=l.length;h<f;h++){var p,m,g,v=l[h],y=v.vertexNormals,b=v.vertexColors;(p=new ji(v.a+r,v.b+r,v.c+r)).normal.copy(v.normal),void 0!==i&&p.normal.applyMatrix3(i).normalize();for(var x=0,_=y.length;x<_;x++)m=y[x].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),p.vertexNormals.push(m);p.color.copy(v.color);for(x=0,_=b.length;x<_;x++)g=b[x],p.vertexColors.push(g.clone());p.materialIndex=v.materialIndex+n,s.push(p)}for(h=0,f=t.faceVertexUvs.length;h<f;h++){var w=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(x=0,_=w.length;x<_;x++){for(var S=w[x],E=[],M=0,T=S.length;M<T;M++)E.push(S[M].clone());this.faceVertexUvs[h].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,a,o,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],void 0===l[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(l[e]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[e]];var f=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new mn(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]);for(n=0;n<e;n++){var s=t[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},h=[],f={};for(r=0;r<this.faces.length;r++){var d=this.faces[r],p=void 0!==this.faceVertexUvs[0][r],m=d.normal.length()>0,g=d.vertexNormals.length>0,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=S(b,0,0),b=S(b,1,!0),b=S(b,2,!1),b=S(b,3,p),b=S(b,4,m),b=S(b,5,g),b=S(b,6,v),b=S(b,7,y),o.push(b),o.push(d.a,d.b,d.c),o.push(d.materialIndex),p){var x=this.faceVertexUvs[0][r];o.push(T(x[0]),T(x[1]),T(x[2]))}if(m&&o.push(E(d.normal)),g){var _=d.vertexNormals;o.push(E(_[0]),E(_[1]),E(_[2]))}if(v&&o.push(M(d.color)),y){var w=d.vertexColors;o.push(M(w[0]),M(w[1]),M(w[2]))}}function S(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=s.length/3,s.push(t.x,t.y,t.z),l[e])}function M(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=u.length,u.push(t.getHex()),c[e])}function T(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/2,h.push(t.x,t.y),f[e])}return t.data={},t.data.vertices=i,t.data.normals=s,u.length>0&&(t.data.colors=u),h.length>0&&(t.data.uvs=[h]),t.data.faces=o,t},clone:function(){return(new Nr).copy(this)},copy:function(t){var e,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var l=t.colors;for(e=0,n=l.length;e<n;e++)this.colors.push(l[e].clone());var u=t.faces;for(e=0,n=u.length;e<n;e++)this.faces.push(u[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=c.length;i<r;i++){var h=c[i],f=[];for(a=0,o=h.length;a<o;a++){var d=h[a];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],i=0,r=p[e].vertices.length;i<r;i++)m.vertices.push(p[e].vertices[i].clone());if(void 0!==p[e].normals)for(m.normals=[],i=0,r=p[e].normals.length;i<r;i++)m.normals.push(p[e].normals[i].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,n=g.length;e<n;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],i=0,r=g[e].vertexNormals.length;i<r;i++){var y=g[e].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),v.vertexNormals.push(b)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],i=0,r=g[e].faceNormals.length;i<r;i++)v.faceNormals.push(g[e].faceNormals[i].clone());this.morphNormals.push(v)}var x=t.skinWeights;for(e=0,n=x.length;e<n;e++)this.skinWeights.push(x[e].clone());var _=t.skinIndices;for(e=0,n=_.length;e<n;e++)this.skinIndices.push(_[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var S=t.boundingBox;null!==S&&(this.boundingBox=S.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Rr.prototype=Object.create(Nr.prototype),Rr.prototype.constructor=Rr,Dr.prototype=Object.create(ur.prototype),Dr.prototype.constructor=Dr;var Fr={clone:zr,merge:Br},jr="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Vr="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Ur(t){Ui.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=jr,this.fragmentShader=Vr,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Hr(){$n.call(this),this.type="Camera",this.matrixWorldInverse=new Ln,this.projectionMatrix=new Ln,this.projectionMatrixInverse=new Ln}function Gr(t,e,n,i){Hr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Ur.prototype=Object.create(Ui.prototype),Ur.prototype.constructor=Ur,Ur.prototype.isShaderMaterial=!0,Ur.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=zr(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Ur.prototype.toJSON=function(t){var e=Ui.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return Object.keys(r).length>0&&(e.extensions=r),e},Hr.prototype=Object.assign(Object.create($n.prototype),{constructor:Hr,isCamera:!0,copy:function(t,e){return $n.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){$n.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Gr.prototype=Object.assign(Object.create(Hr.prototype),{constructor:Gr,isPerspectiveCamera:!0,copy:function(t,e){return Hr.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*cn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*cn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*cn.RAD2DEG*Math.atan(Math.tan(.5*cn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*cn.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=$n.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var Wr=90,qr=1;function Qr(t,e,n,i){$n.call(this),this.type="CubeCamera";var r=new Gr(Wr,qr,t,e);r.up.set(0,-1,0),r.lookAt(new mn(1,0,0)),this.add(r);var a=new Gr(Wr,qr,t,e);a.up.set(0,-1,0),a.lookAt(new mn(-1,0,0)),this.add(a);var o=new Gr(Wr,qr,t,e);o.up.set(0,0,1),o.lookAt(new mn(0,1,0)),this.add(o);var s=new Gr(Wr,qr,t,e);s.up.set(0,0,-1),s.lookAt(new mn(0,-1,0)),this.add(s);var l=new Gr(Wr,qr,t,e);l.up.set(0,-1,0),l.lookAt(new mn(0,0,1)),this.add(l);var u=new Gr(Wr,qr,t,e);u.up.set(0,-1,0),u.lookAt(new mn(0,0,-1)),this.add(u),i=i||{format:Gt,magFilter:Tt,minFilter:Tt},this.renderTarget=new Yr(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),i=this.renderTarget,c=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,a),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,s),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=c,t.setRenderTarget(i,5),t.render(e,u),t.setRenderTarget(n)},this.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)t.setRenderTarget(a,o),t.clear(e,n,i);t.setRenderTarget(r)}}function Yr(t,e,n){Sn.call(this,t,e,n)}function Xr(t,e,n,i,r,a,o,s,l,u,c,h){_n.call(this,null,a,o,s,l,u,i,r,c,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:_t,this.minFilter=void 0!==u?u:_t,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}Qr.prototype=Object.create($n.prototype),Qr.prototype.constructor=Qr,Yr.prototype=Object.create(Sn.prototype),Yr.prototype.constructor=Yr,Yr.prototype.isWebGLRenderTargetCube=!0,Yr.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new Zn,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new Ur({type:"CubemapFromEquirect",uniforms:zr(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:y,blending:M});r.uniforms.tEquirect.value=e;var a=new Cr(new Dr(5,5,5),r);n.add(a);var o=new Qr(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(t,n),a.geometry.dispose(),a.material.dispose(),this},Xr.prototype=Object.create(_n.prototype),Xr.prototype.constructor=Xr,Xr.prototype.isDataTexture=!0;var $r=new mn,Zr=new mn,Jr=new yn;function Kr(t,e){this.normal=void 0!==t?t:new mn(1,0,0),this.constant=void 0!==e?e:0}Object.assign(Kr.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=$r.subVectors(n,e).cross(Zr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new mn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new mn);var n=t.delta($r),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:e.copy(n).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new mn),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||Jr.getNormalMatrix(t),i=this.coplanarPoint($r).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var ta=new di,ea=new mn;function na(t,e,n,i,r,a){this.planes=[void 0!==t?t:new Kr,void 0!==e?e:new Kr,void 0!==n?n:new Kr,void 0!==i?i:new Kr,void 0!==r?r:new Kr,void 0!==a?a:new Kr]}Object.assign(na.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-i,c-s,p-h,y-m).normalize(),e[1].setComponents(o+i,c+s,p+h,y+m).normalize(),e[2].setComponents(o+r,c+l,p+f,y+g).normalize(),e[3].setComponents(o-r,c-l,p-f,y-g).normalize(),e[4].setComponents(o-a,c-u,p-d,y-v).normalize(),e[5].setComponents(o+a,c+u,p+d,y+v).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ta.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ta)},intersectsSprite:function(t){return ta.center.set(0,0,0),ta.radius=.7071067811865476,ta.applyMatrix4(t.matrixWorld),this.intersectsSphere(ta)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(ea.x=i.normal.x>0?t.max.x:t.min.x,ea.y=i.normal.y>0?t.max.y:t.min.y,ea.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(ea)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var ia={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvec3 NfromST = cross( S, T );\n\t\t\tif( dot( NfromST, N ) > 0.0 ) {\n\t\t\t\tS *= -1.0;\n\t\t\t\tT *= -1.0;\n\t\t\t}\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ra={common:{diffuse:{value:new Di(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new yn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new hn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Di(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Di(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new yn}},sprite:{diffuse:{value:new Di(15658734)},opacity:{value:1},center:{value:new hn(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new yn}}},aa={basic:{uniforms:Br([ra.common,ra.specularmap,ra.envmap,ra.aomap,ra.lightmap,ra.fog]),vertexShader:ia.meshbasic_vert,fragmentShader:ia.meshbasic_frag},lambert:{uniforms:Br([ra.common,ra.specularmap,ra.envmap,ra.aomap,ra.lightmap,ra.emissivemap,ra.fog,ra.lights,{emissive:{value:new Di(0)}}]),vertexShader:ia.meshlambert_vert,fragmentShader:ia.meshlambert_frag},phong:{uniforms:Br([ra.common,ra.specularmap,ra.envmap,ra.aomap,ra.lightmap,ra.emissivemap,ra.bumpmap,ra.normalmap,ra.displacementmap,ra.gradientmap,ra.fog,ra.lights,{emissive:{value:new Di(0)},specular:{value:new Di(1118481)},shininess:{value:30}}]),vertexShader:ia.meshphong_vert,fragmentShader:ia.meshphong_frag},standard:{uniforms:Br([ra.common,ra.envmap,ra.aomap,ra.lightmap,ra.emissivemap,ra.bumpmap,ra.normalmap,ra.displacementmap,ra.roughnessmap,ra.metalnessmap,ra.fog,ra.lights,{emissive:{value:new Di(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ia.meshphysical_vert,fragmentShader:ia.meshphysical_frag},matcap:{uniforms:Br([ra.common,ra.bumpmap,ra.normalmap,ra.displacementmap,ra.fog,{matcap:{value:null}}]),vertexShader:ia.meshmatcap_vert,fragmentShader:ia.meshmatcap_frag},points:{uniforms:Br([ra.points,ra.fog]),vertexShader:ia.points_vert,fragmentShader:ia.points_frag},dashed:{uniforms:Br([ra.common,ra.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ia.linedashed_vert,fragmentShader:ia.linedashed_frag},depth:{uniforms:Br([ra.common,ra.displacementmap]),vertexShader:ia.depth_vert,fragmentShader:ia.depth_frag},normal:{uniforms:Br([ra.common,ra.bumpmap,ra.normalmap,ra.displacementmap,{opacity:{value:1}}]),vertexShader:ia.normal_vert,fragmentShader:ia.normal_frag},sprite:{uniforms:Br([ra.sprite,ra.fog]),vertexShader:ia.sprite_vert,fragmentShader:ia.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null}},vertexShader:ia.background_vert,fragmentShader:ia.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ia.cube_vert,fragmentShader:ia.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ia.equirect_vert,fragmentShader:ia.equirect_frag},distanceRGBA:{uniforms:Br([ra.common,ra.displacementmap,{referencePosition:{value:new mn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ia.distanceRGBA_vert,fragmentShader:ia.distanceRGBA_frag},shadow:{uniforms:Br([ra.lights,ra.fog,{color:{value:new Di(0)},opacity:{value:1}}]),vertexShader:ia.shadow_vert,fragmentShader:ia.shadow_frag}};function oa(){var t=null,e=!1,n=null;function i(r,a){!1!==e&&(n(r,a),t.requestAnimationFrame(i))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(i),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function sa(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);void 0===r?e.set(n,function(e,n){var i=e.array,r=e.dynamic?35048:35044,a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(n,i)):r.version<n.version&&(!function(e,n,i){var r=n.array,a=n.updateRange;t.bindBuffer(i,e),!1===n.dynamic?t.bufferData(i,r,35044):-1===a.count?t.bufferSubData(i,0,r):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function la(t,e,n,i){Nr.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new ua(t,e,n,i)),this.mergeVertices()}function ua(t,e,n,i){ur.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,a,o=(t=t||1)/2,s=(e=e||1)/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,h=u+1,f=t/l,d=e/u,p=[],m=[],g=[],v=[];for(a=0;a<h;a++){var y=a*d-s;for(r=0;r<c;r++){var b=r*f-o;m.push(b,-y,0),g.push(0,0,1),v.push(r/l),v.push(1-a/u)}}for(a=0;a<u;a++)for(r=0;r<l;r++){var x=r+c*a,_=r+c*(a+1),w=r+1+c*(a+1),S=r+1+c*a;p.push(x,_,S),p.push(_,w,S)}this.setIndex(p),this.addAttribute("position",new Ji(m,3)),this.addAttribute("normal",new Ji(g,3)),this.addAttribute("uv",new Ji(v,2))}function ca(t,e,n,i){var r,a,o=new Di(0),s=0,l=null,u=0;function c(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),c(o,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){c(o,s=t)},render:function(e,i,h,f){var d=i.background,p=t.vr,m=p.getSession&&p.getSession();if(m&&"additive"===m.environmentBlendMode&&(d=null),null===d?(c(o,s),l=null,u=0):d&&d.isColor&&(c(d,1),f=!0,l=null,u=0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===a&&((a=new Cr(new Dr(1,1,1),new Ur({type:"BackgroundCubeMaterial",uniforms:zr(aa.cube.uniforms),vertexShader:aa.cube.vertexShader,fragmentShader:aa.cube.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var g=d.isWebGLRenderTargetCube?d.texture:d;a.material.uniforms.tCube.value=g,a.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,l===d&&u===g.version||(a.material.needsUpdate=!0,l=d,u=g.version),e.unshift(a,a.geometry,a.material,0,0,null)}else d&&d.isTexture&&(void 0===r&&((r=new Cr(new ua(2,2),new Ur({type:"BackgroundMaterial",uniforms:zr(aa.background.uniforms),vertexShader:aa.background.vertexShader,fragmentShader:aa.background.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),r.material.uniforms.uvTransform.value.copy(d.matrix),l===d&&u===d.version||(r.material.needsUpdate=!0,l=d,u=d.version),e.unshift(r,r.geometry,r.material,0,0,null))}}}function ha(t,e,n,i){var r;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(a,o,s){var l,u;if(i.isWebGL2)l=t,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](r,o,s,a.maxInstancedCount),n.update(s,r,a.maxInstancedCount)}}function fa(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),c=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),d=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=c>0,y=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?t.getParameter(36183):0}}function da(){var t=this,e=null,n=0,i=!1,r=!1,a=new Kr,o=new yn,s={value:null,needsUpdate:!1};function l(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function u(e,n,i,r){var l=null!==e?e.length:0,u=null;if(0!==l){if(u=s.value,!0!==r||null===u){var c=i+4*l,h=n.matrixWorldInverse;o.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var f=0,d=i;f!==l;++f,d+=4)a.copy(e[f]).applyMatrix4(h,o),a.normal.toArray(u,d),u[d+3]=a.constant}s.value=u,s.needsUpdate=!0}return t.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,a){var o=0!==t.length||r||0!==n||i;return i=r,e=u(t,a,0),n=t.length,o},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,l()},this.setState=function(t,a,o,c,h,f){if(!i||null===t||0===t.length||r&&!o)r?u(null):l();else{var d=r?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=u(t,c,p,f);for(var g=0;g!==p;++g)m[g]=e[g];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function pa(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function ma(t,e,n){var i=new WeakMap,r=new WeakMap;function a(t){var o=t.target,s=i.get(o);for(var l in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[l]);o.removeEventListener("dispose",a),i.delete(o);var u=r.get(s);u&&(e.remove(u),r.delete(s)),n.memory.geometries--}function o(t){var n=[],i=t.index,a=t.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],f=s[l+2];n.push(c,h,h,f,f,c)}}else{s=a.array;o=a.version;for(l=0,u=s.length/3-1;l<u;l+=3){c=l+0,h=l+1,f=l+2;n.push(c,h,h,f,f,c)}}var d=new(er(n)>65535?Zi:Xi)(n,1);d.version=o,e.update(d,34963);var p=r.get(t);p&&e.remove(p),r.set(t,d)}return{get:function(t,e){var r=i.get(e);return r||(e.addEventListener("dispose",a),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new ur).setFromObject(t)),r=e._bufferGeometry),i.set(e,r),n.memory.geometries++,r)},update:function(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);var a=t.morphAttributes;for(var r in a)for(var o=a[r],s=0,l=o.length;s<l;s++)e.update(o[s],34962)},getWireframeAttribute:function(t){var e=r.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return r.get(t)}}}function ga(t,e,n,i){var r,a,o;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,a,e*o),n.update(i,r)},this.renderInstances=function(s,l,u){var c,h;if(i.isWebGL2)c=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](r,u,a,l*o,s.maxInstancedCount),n.update(u,r,s.maxInstancedCount)}}function va(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(i=i||1,e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 5:case 6:e.triangles+=i*(t-2);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ya(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ba(t){var e={},n=new Float32Array(8);return{update:function(i,r,a,o){var s=i.morphTargetInfluences,l=s.length,u=e[r.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];e[r.id]=u}var h=a.morphTargets&&r.morphAttributes.position,f=a.morphNormals&&r.morphAttributes.normal;for(c=0;c<l;c++){0!==(d=u[c])[1]&&(h&&r.removeAttribute("morphTarget"+c),f&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++){(d=u[c])[0]=c,d[1]=s[c]}for(u.sort(ya),c=0;c<8;c++){var d;if(d=u[c]){var p=d[0],m=d[1];if(m){h&&r.addAttribute("morphTarget"+c,h[p]),f&&r.addAttribute("morphNormal"+c,f[p]),n[c]=m;continue}}n[c]=0}o.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function xa(t,e){var n={};return{update:function(i){var r=e.render.frame,a=i.geometry,o=t.get(i,a);return n[o.id]!==r&&(a.isGeometry&&o.updateFromObject(i),t.update(o),n[o.id]=r),o},dispose:function(){n={}}}}function _a(t,e,n,i,r,a,o,s,l,u){t=void 0!==t?t:[],e=void 0!==e?e:ht,o=void 0!==o?o:Gt,_n.call(this,t,e,n,i,r,a,o,s,l,u),this.flipY=!1}function wa(t,e,n,i){_n.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=_t,this.minFilter=_t,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}function Sa(t,e,n,i){_n.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=_t,this.minFilter=_t,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}aa.physical={uniforms:Br([aa.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Di(0)},clearcoatNormalScale:{value:new hn(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:ia.meshphysical_vert,fragmentShader:ia.meshphysical_frag},la.prototype=Object.create(Nr.prototype),la.prototype.constructor=la,ua.prototype=Object.create(ur.prototype),ua.prototype.constructor=ua,_a.prototype=Object.create(_n.prototype),_a.prototype.constructor=_a,_a.prototype.isCubeTexture=!0,Object.defineProperty(_a.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),wa.prototype=Object.create(_n.prototype),wa.prototype.constructor=wa,wa.prototype.isDataTexture2DArray=!0,Sa.prototype=Object.create(_n.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isDataTexture3D=!0;var Ea=new _n,Ma=new wa,Ta=new Sa,Ca=new _a,ka=[],Pa=[],Aa=new Float32Array(16),Oa=new Float32Array(9),La=new Float32Array(4);function Ia(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,a=ka[r];if(void 0===a&&(a=new Float32Array(r),ka[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Na(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ra(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function Da(t,e){var n=Pa[e];void 0===n&&(n=new Int32Array(e),Pa[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function za(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Ba(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Na(n,e))return;t.uniform2fv(this.addr,e),Ra(n,e)}}function Fa(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Na(n,e))return;t.uniform3fv(this.addr,e),Ra(n,e)}}function ja(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Na(n,e))return;t.uniform4fv(this.addr,e),Ra(n,e)}}function Va(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Na(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ra(n,e)}else{if(Na(n,i))return;La.set(i),t.uniformMatrix2fv(this.addr,!1,La),Ra(n,i)}}function Ua(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Na(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ra(n,e)}else{if(Na(n,i))return;Oa.set(i),t.uniformMatrix3fv(this.addr,!1,Oa),Ra(n,i)}}function Ha(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Na(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ra(n,e)}else{if(Na(n,i))return;Aa.set(i),t.uniformMatrix4fv(this.addr,!1,Aa),Ra(n,i)}}function Ga(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Ea,r)}function Wa(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Ma,r)}function qa(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Ta,r)}function Qa(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Ca,r)}function Ya(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Xa(t,e){var n=this.cache;Na(n,e)||(t.uniform2iv(this.addr,e),Ra(n,e))}function $a(t,e){var n=this.cache;Na(n,e)||(t.uniform3iv(this.addr,e),Ra(n,e))}function Za(t,e){var n=this.cache;Na(n,e)||(t.uniform4iv(this.addr,e),Ra(n,e))}function Ja(t,e){t.uniform1fv(this.addr,e)}function Ka(t,e){t.uniform1iv(this.addr,e)}function to(t,e){t.uniform2iv(this.addr,e)}function eo(t,e){t.uniform3iv(this.addr,e)}function no(t,e){t.uniform4iv(this.addr,e)}function io(t,e){var n=Ia(e,this.size,2);t.uniform2fv(this.addr,n)}function ro(t,e){var n=Ia(e,this.size,3);t.uniform3fv(this.addr,n)}function ao(t,e){var n=Ia(e,this.size,4);t.uniform4fv(this.addr,n)}function oo(t,e){var n=Ia(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function so(t,e){var n=Ia(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function lo(t,e){var n=Ia(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function uo(t,e,n){var i=e.length,r=Da(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||Ea,r[a])}function co(t,e,n){var i=e.length,r=Da(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||Ca,r[a])}function ho(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return za;case 35664:return Ba;case 35665:return Fa;case 35666:return ja;case 35674:return Va;case 35675:return Ua;case 35676:return Ha;case 35678:case 36198:return Ga;case 35679:return qa;case 35680:return Qa;case 36289:return Wa;case 5124:case 35670:return Ya;case 35667:case 35671:return Xa;case 35668:case 35672:return $a;case 35669:case 35673:return Za}}(e.type)}function fo(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ja;case 35664:return io;case 35665:return ro;case 35666:return ao;case 35674:return oo;case 35675:return so;case 35676:return lo;case 35678:return uo;case 35680:return co;case 5124:case 35670:return Ka;case 35667:case 35671:return to;case 35668:case 35672:return eo;case 35669:case 35673:return no}}(e.type)}function po(t){this.id=t,this.seq=[],this.map={}}fo.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Ra(e,t)},po.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var mo=/([\w\d_]+)(\])?(\[|\.)?/g;function go(t,e){t.seq.push(e),t.map[e.id]=e}function vo(t,e,n){var i=t.name,r=i.length;for(mo.lastIndex=0;;){var a=mo.exec(i),o=mo.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){go(n,void 0===u?new ho(s,t,e):new fo(s,t,e));break}var c=n.map[s];void 0===c&&go(n,c=new po(s)),n=c}}function yo(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);vo(r,t.getUniformLocation(e,r.name),this)}}function bo(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}yo.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},yo.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},yo.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},yo.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var xo=0;function _o(t){switch(t){case Ie:return["Linear","( value )"];case Ne:return["sRGB","( value )"];case De:return["RGBE","( value )"];case Be:return["RGBM","( value, 7.0 )"];case Fe:return["RGBM","( value, 16.0 )"];case je:return["RGBD","( value, 256.0 )"];case Re:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case ze:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function wo(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function So(t,e){var n=_o(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Eo(t,e){var n;switch(e){case at:n="Linear";break;case ot:n="Reinhard";break;case st:n="Uncharted2";break;case lt:n="OptimizedCineon";break;case ut:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Mo(t){return""!==t}function To(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Co(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ko(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){var n=ia[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ko(n)}))}function Po(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}))}function Ao(t,e,n,i,r,a,o){var s=t.getContext(),l=i.defines,u=r.vertexShader,c=r.fragmentShader,h="SHADOWMAP_TYPE_BASIC";a.shadowMapType===p?h="SHADOWMAP_TYPE_PCF":a.shadowMapType===m?h="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===g&&(h="SHADOWMAP_TYPE_VSM");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",v="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(i.envMap.mapping){case ht:case ft:f="ENVMAP_TYPE_CUBE";break;case gt:case vt:f="ENVMAP_TYPE_CUBE_UV";break;case dt:case pt:f="ENVMAP_TYPE_EQUIREC";break;case mt:f="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ft:case pt:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case et:v="ENVMAP_BLENDING_MULTIPLY";break;case nt:v="ENVMAP_BLENDING_MIX";break;case it:v="ENVMAP_BLENDING_ADD"}}var y,b,x,_,w,S=t.gammaFactor>0?t.gammaFactor:1,E=o.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mo).join("\n")}(i.extensions,a,e),M=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(l),T=s.createProgram();if(i.isRawShaderMaterial?((y=[M].filter(Mo).join("\n")).length>0&&(y+="\n"),(b=[E,M].filter(Mo).join("\n")).length>0&&(b+="\n")):(y=["precision "+a.precision+" float;","precision "+a.precision+" int;","highp"===a.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,M,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+S,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Mo).join("\n"),b=[E,"precision "+a.precision+" float;","precision "+a.precision+" int;","highp"===a.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,M,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+S,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.envMap?"#define "+d:"",a.envMap?"#define "+v:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||a.envMap)&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==rt?"#define TONE_MAPPING":"",a.toneMapping!==rt?ia.tonemapping_pars_fragment:"",a.toneMapping!==rt?Eo("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?ia.encodings_pars_fragment:"",a.mapEncoding?So("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?So("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?So("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?So("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(x="linearToOutputTexel",_=a.outputEncoding,w=_o(_),"vec4 "+x+"( vec4 value ) { return LinearTo"+w[0]+w[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Mo).join("\n")),u=Co(u=To(u=ko(u),a),a),c=Co(c=To(c=ko(c),a),a),u=Po(u),c=Po(c),o.isWebGL2&&!i.isRawShaderMaterial){var C=!1,k=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==u.match(k)&&null!==c.match(k)&&(C=!0,u=u.replace(k,""),c=c.replace(k,"")),y=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#version 300 es\n","#define varying in",C?"":"out highp vec4 pc_fragColor;",C?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b}var P,A,O=b+c,L=bo(s,35633,y+u),I=bo(s,35632,O);if(s.attachShader(T,L),s.attachShader(T,I),void 0!==i.index0AttributeName?s.bindAttribLocation(T,0,i.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T),t.debug.checkShaderErrors){var N=s.getProgramInfoLog(T).trim(),R=s.getShaderInfoLog(L).trim(),D=s.getShaderInfoLog(I).trim(),z=!0,B=!0;if(!1===s.getProgramParameter(T,35714)){z=!1;var F=wo(s,L,"vertex"),j=wo(s,I,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(T,35715),"gl.getProgramInfoLog",N,F,j)}else""!==N?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",N):""!==R&&""!==D||(B=!1);B&&(this.diagnostics={runnable:z,material:i,programLog:N,vertexShader:{log:R,prefix:y},fragmentShader:{log:D,prefix:b}})}return s.deleteShader(L),s.deleteShader(I),this.getUniforms=function(){return void 0===P&&(P=new yo(s,T)),P},this.getAttributes=function(){return void 0===A&&(A=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var a=t.getActiveAttrib(e,r).name;n[a]=t.getAttribLocation(e,a)}return n}(s,T)),A},this.destroy=function(){s.deleteProgram(T),this.program=void 0},this.name=r.name,this.id=xo++,this.code=n,this.usedTimes=1,this.program=T,this.vertexShader=L,this.fragmentShader=I,this}function Oo(t,e,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function o(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Ie,n===Ie&&e&&(n=Re),n}this.getParameters=function(e,i,a,s,l,u,c){var h=r[e.type],f=c.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),a=Math.min(r,e.length);return a<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+a+"."),0):a}(c):0,d=n.precision;null!==e.precision&&(d=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var p=t.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:o(p?p.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:o(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:o(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:o(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===gt||e.envMap.mapping===vt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:o(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ge,tangentSpaceNormalMap:e.normalMapType===He,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap),fog:!!s,useFog:e.fog,fogExp2:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:l,numClipIntersection:u,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&a.length>0,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:rt,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===b,flipSided:e.side===y,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(r,a,o,s){for(var l,u=0,c=i.length;u<c;u++){var h=i[u];if(h.code===s){++(l=h).usedTimes;break}}return void 0===l&&(l=new Ao(t,e,s,r,a,o,n),i.push(l)),l},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function Lo(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Io(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function No(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ro(){var t=[],e=0,n=[],i=[],r={id:-1};function a(n,i,a,o,s,l){var u=t[e];return void 0===u?(u={id:n.id,object:n,geometry:i,material:a,program:a.program||r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:l},t[e]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=a,u.program=a.program||r,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=s,u.group=l),e++,u}return{opaque:n,transparent:i,init:function(){e=0,n.length=0,i.length=0},push:function(t,e,r,o,s,l){var u=a(t,e,r,o,s,l);(!0===r.transparent?i:n).push(u)},unshift:function(t,e,r,o,s,l){var u=a(t,e,r,o,s,l);(!0===r.transparent?i:n).unshift(u)},sort:function(){n.length>1&&n.sort(Io),i.length>1&&i.sort(No)}}}function Do(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r,a=t.get(n);return void 0===a?(r=new Ro,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):void 0===(r=a.get(i))&&(r=new Ro,a.set(i,r)),r},dispose:function(){t=new WeakMap}}}function zo(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new mn,color:new Di,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn};break;case"SpotLight":n={position:new mn,direction:new mn,color:new Di,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn};break;case"PointLight":n={position:new mn,color:new Di,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new mn,skyColor:new Di,groundColor:new Di};break;case"RectAreaLight":n={color:new Di,position:new mn,halfWidth:new mn,halfHeight:new mn}}return t[e.id]=n,n}}}var Bo=0;function Fo(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function jo(){for(var t=new zo,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)e.probe.push(new mn);var i=new mn,r=new Ln,a=new Ln;return{setup:function(n,o,s){for(var l=0,u=0,c=0,h=0;h<9;h++)e.probe[h].set(0,0,0);var f=0,d=0,p=0,m=0,g=0,v=0,y=0,b=0,x=s.matrixWorldInverse;n.sort(Fo),h=0;for(var _=n.length;h<_;h++){var w=n[h],S=w.color,E=w.intensity,M=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=S.r*E,u+=S.g*E,c+=S.b*E;else if(w.isLightProbe)for(var C=0;C<9;C++)e.probe[C].addScaledVector(w.sh.coefficients[C],E);else if(w.isDirectionalLight){if((P=t.get(w)).color.copy(w.color).multiplyScalar(w.intensity),P.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(x),P.shadow=w.castShadow,w.castShadow){var k=w.shadow;P.shadowBias=k.bias,P.shadowRadius=k.radius,P.shadowMapSize=k.mapSize,e.directionalShadowMap[f]=T,e.directionalShadowMatrix[f]=w.shadow.matrix,v++}e.directional[f]=P,f++}else if(w.isSpotLight){if((P=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(x),P.color.copy(S).multiplyScalar(E),P.distance=M,P.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(x),P.coneCos=Math.cos(w.angle),P.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),P.decay=w.decay,P.shadow=w.castShadow,w.castShadow){k=w.shadow;P.shadowBias=k.bias,P.shadowRadius=k.radius,P.shadowMapSize=k.mapSize,e.spotShadowMap[p]=T,e.spotShadowMatrix[p]=w.shadow.matrix,b++}e.spot[p]=P,p++}else if(w.isRectAreaLight){(P=t.get(w)).color.copy(S).multiplyScalar(E),P.position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(x),a.identity(),r.copy(w.matrixWorld),r.premultiply(x),a.extractRotation(r),P.halfWidth.set(.5*w.width,0,0),P.halfHeight.set(0,.5*w.height,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),e.rectArea[m]=P,m++}else if(w.isPointLight){if((P=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(x),P.color.copy(w.color).multiplyScalar(w.intensity),P.distance=w.distance,P.decay=w.decay,P.shadow=w.castShadow,w.castShadow){k=w.shadow;P.shadowBias=k.bias,P.shadowRadius=k.radius,P.shadowMapSize=k.mapSize,P.shadowCameraNear=k.camera.near,P.shadowCameraFar=k.camera.far,e.pointShadowMap[d]=T,e.pointShadowMatrix[d]=w.shadow.matrix,y++}e.point[d]=P,d++}else if(w.isHemisphereLight){var P;(P=t.get(w)).direction.setFromMatrixPosition(w.matrixWorld),P.direction.transformDirection(x),P.direction.normalize(),P.skyColor.copy(w.color).multiplyScalar(E),P.groundColor.copy(w.groundColor).multiplyScalar(E),e.hemi[g]=P,g++}}e.ambient[0]=l,e.ambient[1]=u,e.ambient[2]=c;var A=e.hash;A.directionalLength===f&&A.pointLength===d&&A.spotLength===p&&A.rectAreaLength===m&&A.hemiLength===g&&A.numDirectionalShadows===v&&A.numPointShadows===y&&A.numSpotShadows===b||(e.directional.length=f,e.spot.length=p,e.rectArea.length=m,e.point.length=d,e.hemi.length=g,e.directionalShadowMap.length=v,e.pointShadowMap.length=y,e.spotShadowMap.length=b,e.directionalShadowMatrix.length=v,e.pointShadowMatrix.length=y,e.spotShadowMatrix.length=b,A.directionalLength=f,A.pointLength=d,A.spotLength=p,A.rectAreaLength=m,A.hemiLength=g,A.numDirectionalShadows=v,A.numPointShadows=y,A.numSpotShadows=b,e.version=Bo++)},state:e}}function Vo(){var t=new jo,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Uo(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r;return!1===t.has(n)?(r=new Vo,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):!1===t.get(n).has(i)?(r=new Vo,t.get(n).set(i,r)):r=t.get(n).get(i),r},dispose:function(){t=new WeakMap}}}function Ho(t){Ui.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ve,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Go(t){Ui.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new mn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}Ho.prototype=Object.create(Ui.prototype),Ho.prototype.constructor=Ho,Ho.prototype.isMeshDepthMaterial=!0,Ho.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Go.prototype=Object.create(Ui.prototype),Go.prototype.constructor=Go,Go.prototype.isMeshDistanceMaterial=!0,Go.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var Wo="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}",qo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Qo(t,e,n){var i=new na,r=new hn,a=new hn,o=new wn,s=1,l=2,u=1+(s|l),c=new Array(u),h=new Array(u),f={},d={0:y,1:v,2:b},m=new Ur({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new hn},radius:{value:4}},vertexShader:qo,fragmentShader:Wo}),x=m.clone();x.defines.HORIZONAL_PASS=1;var _=new ur;_.addAttribute("position",new Gi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var w=new Cr(_,m),S=0;S!==u;++S){var E=0!=(S&s),T=0!=(S&l),C=new Ho({depthPacking:Ue,morphTargets:E,skinning:T});c[S]=C;var k=new Go({morphTargets:E,skinning:T});h[S]=k}var P=this;function A(n,i){var r=e.update(w);m.uniforms.shadow_pass.value=n.map.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,m,w,null),x.uniforms.shadow_pass.value=n.mapPass.texture,x.uniforms.resolution.value=n.mapSize,x.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,x,w,null)}function O(e,n,i,r,a,o){var u=e.geometry,p=null,m=c,v=e.customDepthMaterial;if(i.isPointLight&&(m=h,v=e.customDistanceMaterial),v)p=v;else{var y=!1;n.morphTargets&&(u&&u.isBufferGeometry?y=u.morphAttributes&&u.morphAttributes.position&&u.morphAttributes.position.length>0:u&&u.isGeometry&&(y=u.morphTargets&&u.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var b=e.isSkinnedMesh&&n.skinning,x=0;y&&(x|=s),b&&(x|=l),p=m[x]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var _=p.uuid,w=n.uuid,S=f[_];void 0===S&&(S={},f[_]=S);var E=S[w];void 0===E&&(E=p.clone(),S[w]=E),p=E}return p.visible=n.visible,p.wireframe=n.wireframe,p.side=o===g?null!=n.shadowSide?n.shadowSide:n.side:null!=n.shadowSide?n.shadowSide:d[n.side],p.clipShadows=n.clipShadows,p.clippingPlanes=n.clippingPlanes,p.clipIntersection=n.clipIntersection,p.wireframeLinewidth=n.wireframeLinewidth,p.linewidth=n.linewidth,i.isPointLight&&p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(i.matrixWorld),p.nearDistance=r,p.farDistance=a),p}function L(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===g)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=e.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=u[d.materialIndex];if(p&&p.visible){var m=O(n,p,o,a.near,a.far,s);t.renderBufferDirect(a,null,l,m,n,d)}}else if(u.visible){m=O(n,u,o,a.near,a.far,s);t.renderBufferDirect(a,null,l,m,n,null)}}for(var v=n.children,y=0,b=v.length;y<b;y++)L(v[y],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(e,s,l){if(!1!==P.enabled&&(!1!==P.autoUpdate||!1!==P.needsUpdate)&&0!==e.length){var u=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(M),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=e.length;d<p;d++){var m=e[d],v=m.shadow;if(void 0!==v){r.copy(v.mapSize);var y=v.getFrameExtents();if(r.multiply(y),a.copy(v.mapSize),(r.x>n||r.y>n)&&(console.warn("THREE.WebGLShadowMap:",m,"has shadow exceeding max texture size, reducing"),r.x>n&&(a.x=Math.floor(n/y.x),r.x=a.x*y.x,v.mapSize.x=a.x),r.y>n&&(a.y=Math.floor(n/y.y),r.y=a.y*y.y,v.mapSize.y=a.y)),null===v.map&&!v.isPointLightShadow&&this.type===g){var b={minFilter:Tt,magFilter:Tt,format:Wt};v.map=new Sn(r.x,r.y,b),v.map.texture.name=m.name+".shadowMap",v.mapPass=new Sn(r.x,r.y,b),v.camera.updateProjectionMatrix()}if(null===v.map){b={minFilter:_t,magFilter:_t,format:Wt};v.map=new Sn(r.x,r.y,b),v.map.texture.name=m.name+".shadowMap",v.camera.updateProjectionMatrix()}t.setRenderTarget(v.map),t.clear();for(var x=v.getViewportCount(),_=0;_<x;_++){var w=v.getViewport(_);o.set(a.x*w.x,a.y*w.y,a.x*w.z,a.y*w.w),f.viewport(o),v.updateMatrices(m,l,_),i=v.getFrustum(),L(s,l,v.camera,m,this.type)}v.isPointLightShadow||this.type!==g||A(v,l)}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}P.needsUpdate=!1,t.setRenderTarget(u,c,h)}}}function Yo(t,e,n,i){var r=new function(){var e=!1,n=new wn,i=null,r=new wn(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?at(2929):ot(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Q:t.depthFunc(512);break;case Y:t.depthFunc(519);break;case X:t.depthFunc(513);break;case $:t.depthFunc(515);break;case Z:t.depthFunc(514);break;case J:t.depthFunc(518);break;case K:t.depthFunc(516);break;case tt:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){var e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){e||(t?at(2960):ot(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&s===n&&l===i||(t.stencilOp(e,n,i),o=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null}}},c=t.getParameter(34921),h=new Uint8Array(c),f=new Uint8Array(c),d=new Uint8Array(c),p={},m=null,g=null,v=null,x=null,_=null,w=null,S=null,E=null,L=null,I=null,N=!1,R=null,D=null,z=null,B=null,F=null,j=t.getParameter(35661),V=!1,U=0,H=t.getParameter(7938);-1!==H.indexOf("WebGL")?(U=parseFloat(/^WebGL\ ([0-9])/.exec(H)[1]),V=U>=1):-1!==H.indexOf("OpenGL ES")&&(U=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(H)[1]),V=U>=2);var G=null,W={},q=new wn,et=new wn;function nt(e,n,i){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var it={};function rt(n,r){(h[n]=1,0===f[n]&&(t.enableVertexAttribArray(n),f[n]=1),d[n]!==r)&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),d[n]=r)}function at(e){!0!==p[e]&&(t.enable(e),p[e]=!0)}function ot(e){!1!==p[e]&&(t.disable(e),p[e]=!1)}function st(e,i,r,a,o,s,l,u){if(e!==M){if(v||(at(3042),v=!0),e===A)o=o||i,s=s||r,l=l||a,i===_&&o===E||(t.blendEquationSeparate(n.convert(i),n.convert(o)),_=i,E=o),r===w&&a===S&&s===L&&l===I||(t.blendFuncSeparate(n.convert(r),n.convert(a),n.convert(s),n.convert(l)),w=r,S=a,L=s,I=l),x=e,N=null;else if(e!==x||u!==N){if(_===O&&E===O||(t.blendEquation(32774),_=O,E=O),u)switch(e){case T:t.blendFuncSeparate(1,771,1,771);break;case C:t.blendFunc(1,1);break;case k:t.blendFuncSeparate(0,0,769,771);break;case P:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case T:t.blendFuncSeparate(770,771,1,771);break;case C:t.blendFunc(770,1);break;case k:t.blendFunc(0,769);break;case P:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}w=null,S=null,L=null,I=null,x=e,N=u}}else v&&(ot(3042),v=!1)}function lt(e){R!==e&&(e?t.frontFace(2304):t.frontFace(2305),R=e)}function ut(e){e!==s?(at(2884),e!==D&&(e===l?t.cullFace(1029):e===u?t.cullFace(1028):t.cullFace(1032))):ot(2884),D=e}function ct(e,n,i){e?(at(32823),B===n&&F===i||(t.polygonOffset(n,i),B=n,F=i)):ot(32823)}function ht(e){void 0===e&&(e=33984+j-1),G!==e&&(t.activeTexture(e),G=e)}return it[3553]=nt(3553,3553,1),it[34067]=nt(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),at(2929),a.setFunc($),lt(!1),ut(l),at(2884),st(M),{buffers:{color:r,depth:a,stencil:o},initAttributes:function(){for(var t=0,e=h.length;t<e;t++)h[t]=0},enableAttribute:function(t){rt(t,0)},enableAttributeAndDivisor:rt,disableUnusedAttributes:function(){for(var e=0,n=f.length;e!==n;++e)f[e]!==h[e]&&(t.disableVertexAttribArray(e),f[e]=0)},enable:at,disable:ot,getCompressedTextureFormats:function(){if(null===m&&(m=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),i=0;i<n.length;i++)m.push(n[i]);return m},useProgram:function(e){return g!==e&&(t.useProgram(e),g=e,!0)},setBlending:st,setMaterial:function(t,e){t.side===b?ot(2884):at(2884);var n=t.side===y;e&&(n=!n),lt(n),t.blending===T&&!1===t.transparent?st(M):st(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);var i=t.stencilWrite;o.setTest(i),i&&(o.setFunc(t.stencilFunc,t.stencilRef,t.stencilMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),ct(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:lt,setCullFace:ut,setLineWidth:function(e){e!==z&&(V&&t.lineWidth(e),z=e)},setPolygonOffset:ct,setScissorTest:function(t){t?at(3089):ot(3089)},activeTexture:ht,bindTexture:function(e,n){null===G&&ht();var i=W[G];void 0===i&&(i={type:void 0,texture:void 0},W[G]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||it[e]),i.type=e,i.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),q.copy(e))},viewport:function(e){!1===et.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),et.copy(e))},reset:function(){for(var e=0;e<f.length;e++)1===f[e]&&(t.disableVertexAttribArray(e),f[e]=0);p={},m=null,G=null,W={},g=null,x=null,R=null,D=null,r.reset(),a.reset(),o.reset()}}}function Xo(t,e,n,i,r,a,o){var s,l=new WeakMap,u="undefined"!=typeof OffscreenCanvas;function c(t,e){return u?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function h(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?cn.floorPowerOfTwo:Math.floor,o=a(r*t.width),l=a(r*t.height);void 0===s&&(s=c(o,l));var u=n?c(o,l):s;return u.width=o,u.height=l,u.getContext("2d").drawImage(t,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+l+")."),u}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function f(t){return cn.isPowerOfTwo(t.width)&&cn.isPowerOfTwo(t.height)}function d(t,e){return t.generateMipmaps&&e&&t.minFilter!==_t&&t.minFilter!==Tt}function p(e,n,r,a){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function m(t,n){if(!r.isWebGL2)return t;var i=t;return 6403===t&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===t&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===t&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function g(t){return t===_t||t===wt||t===Et?9728:9729}function v(e){var n=e.target;n.removeEventListener("dispose",v),function(e){var n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&l.delete(n),o.memory.textures--}function y(e){var n=e.target;n.removeEventListener("dispose",y),function(e){var n=i.get(e),r=i.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}(n),o.memory.textures--}var b=0;function x(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=o.render.frame;l.get(t)!==e&&(l.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void M(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function _(e,o){if(6===e.image.length){var s=i.get(e);if(e.version>0&&s.__version!==e.version){E(s,e),n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY);for(var l=e&&e.isCompressedTexture,u=e.image[0]&&e.image[0].isDataTexture,c=[],g=0;g<6;g++)c[g]=l||u?u?e.image[g].image:e.image[g]:h(e.image[g],!1,!0,r.maxCubemapSize);var v,y=c[0],b=f(y)||r.isWebGL2,x=a.convert(e.format),_=a.convert(e.type),w=m(x,_);if(S(34067,e,b),l){for(g=0;g<6;g++){v=c[g].mipmaps;for(var M=0;M<v.length;M++){var T=v[M];e.format!==Wt&&e.format!==Gt?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(34069+g,M,w,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,M,w,T.width,T.height,0,x,_,T.data)}}s.__maxMipLevel=v.length-1}else{v=e.mipmaps;for(g=0;g<6;g++)if(u){n.texImage2D(34069+g,0,w,c[g].width,c[g].height,0,x,_,c[g].data);for(M=0;M<v.length;M++){var C=(T=v[M]).image[g].image;n.texImage2D(34069+g,M+1,w,C.width,C.height,0,x,_,C.data)}}else{n.texImage2D(34069+g,0,w,x,_,c[g]);for(M=0;M<v.length;M++){T=v[M];n.texImage2D(34069+g,M+1,w,x,_,T.image[g])}}s.__maxMipLevel=v.length}d(e,b)&&p(34067,e,y.width,y.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture)}}function w(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function S(n,o,s){var l;if(s?(t.texParameteri(n,10242,a.convert(o.wrapS)),t.texParameteri(n,10243,a.convert(o.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,a.convert(o.wrapR)),t.texParameteri(n,10240,a.convert(o.magFilter)),t.texParameteri(n,10241,a.convert(o.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===bt&&o.wrapT===bt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,g(o.magFilter)),t.texParameteri(n,10241,g(o.minFilter)),o.minFilter!==_t&&o.minFilter!==Tt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=e.get("EXT_texture_filter_anisotropic")){if(o.type===zt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Bt&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function E(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",v),e.__webglTexture=t.createTexture(),o.memory.textures++)}function M(e,i,o){var s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),E(e,i),n.activeTexture(33984+o),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var l=function(t){return!r.isWebGL2&&(t.wrapS!==bt||t.wrapT!==bt||t.minFilter!==_t&&t.minFilter!==Tt)}(i)&&!1===f(i.image),u=h(i.image,l,!1,r.maxTextureSize),c=f(u)||r.isWebGL2,g=a.convert(i.format),v=a.convert(i.type),y=m(g,v);S(s,i,c);var b,x=i.mipmaps;if(i.isDepthTexture){if(y=6402,i.type===zt){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else r.isWebGL2&&(y=33189);i.format===Xt&&6402===y&&i.type!==Nt&&i.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Nt,v=a.convert(i.type)),i.format===$t&&(y=34041,i.type!==Ut&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ut,v=a.convert(i.type))),n.texImage2D(3553,0,y,u.width,u.height,0,g,v,null)}else if(i.isDataTexture)if(x.length>0&&c){for(var _=0,w=x.length;_<w;_++)b=x[_],n.texImage2D(3553,_,y,b.width,b.height,0,g,v,b.data);i.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,y,u.width,u.height,0,g,v,u.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(_=0,w=x.length;_<w;_++)b=x[_],i.format!==Wt&&i.format!==Gt?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,_,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,_,y,b.width,b.height,0,g,v,b.data);e.__maxMipLevel=x.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,y,u.width,u.height,u.depth,0,g,v,u.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,y,u.width,u.height,u.depth,0,g,v,u.data),e.__maxMipLevel=0;else if(x.length>0&&c){for(_=0,w=x.length;_<w;_++)b=x[_],n.texImage2D(3553,_,y,g,v,b);i.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,y,g,v,u),e.__maxMipLevel=0;d(i,c)&&p(3553,i,u.width,u.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function T(e,r,o,s){var l=a.convert(r.texture.format),u=a.convert(r.texture.type),c=m(l,u);n.texImage2D(s,0,c,r.width,r.height,0,l,u,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function C(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(i){var r=P(n);t.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=P(n);t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var o=m(a.convert(n.texture.format),a.convert(n.texture.type));if(i){r=P(n);t.renderbufferStorageMultisample(36161,r,o,n.width,n.height)}else t.renderbufferStorage(36161,o,n.width,n.height)}t.bindRenderbuffer(36161,null)}function k(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),x(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Xt)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==$t)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),C(n.__webglDepthbuffer[a],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),C(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function P(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}var A=!1,O=!1;this.allocateTextureUnit=function(){var t=b;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),b+=1,t},this.resetTextureUnits=function(){b=0},this.setTexture2D=x,this.setTexture2DArray=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?M(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?M(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=_,this.setTextureCubeDynamic=w,this.setupRenderTarget=function(e){var s=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",y),l.__webglTexture=t.createTexture(),o.memory.textures++;var u=!0===e.isWebGLRenderTargetCube,c=!0===e.isWebGLMultisampleRenderTarget,h=f(e)||r.isWebGL2;if(u){s.__webglFramebuffer=[];for(var g=0;g<6;g++)s.__webglFramebuffer[g]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),c)if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var v=m(a.convert(e.texture.format),a.convert(e.texture.type)),b=P(e);t.renderbufferStorageMultisample(36161,b,v,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),C(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,l.__webglTexture),S(34067,e.texture,h);for(g=0;g<6;g++)T(s.__webglFramebuffer[g],e,36064,34069+g);d(e.texture,h)&&p(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),S(3553,e.texture,h),T(s.__webglFramebuffer,e,36064,3553),d(e.texture,h)&&p(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&k(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(d(e,f(t)||r.isWebGL2)){var a=t.isWebGLRenderTargetCube?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(a,o),p(a,e,t.width,t.height),n.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var a=e.width,o=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===A&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),A=!0),t=t.texture),x(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?_(t,e):w(t,e)}}function $o(t,e,n){return{convert:function(t){var i;if(t===yt)return 10497;if(t===bt)return 33071;if(t===xt)return 33648;if(t===_t)return 9728;if(t===wt)return 9984;if(t===Et)return 9986;if(t===Tt)return 9729;if(t===Ct)return 9985;if(t===Pt)return 9987;if(t===Ot)return 5121;if(t===Ft)return 32819;if(t===jt)return 32820;if(t===Vt)return 33635;if(t===Lt)return 5120;if(t===It)return 5122;if(t===Nt)return 5123;if(t===Rt)return 5124;if(t===Dt)return 5125;if(t===zt)return 5126;if(t===Bt){if(n.isWebGL2)return 5131;if(null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(t===Ht)return 6406;if(t===Gt)return 6407;if(t===Wt)return 6408;if(t===qt)return 6409;if(t===Qt)return 6410;if(t===Xt)return 6402;if(t===$t)return 34041;if(t===Zt)return 6403;if(t===O)return 32774;if(t===L)return 32778;if(t===I)return 32779;if(t===D)return 0;if(t===z)return 1;if(t===B)return 768;if(t===F)return 769;if(t===j)return 770;if(t===V)return 771;if(t===U)return 772;if(t===H)return 773;if(t===G)return 774;if(t===W)return 775;if(t===q)return 776;if((t===Jt||t===Kt||t===te||t===ee)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(t===Jt)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Kt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===te)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ee)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===ne||t===ie||t===re||t===ae)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===ne)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ie)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===re)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ae)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===oe&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((t===se||t===le||t===ue||t===ce||t===he||t===fe||t===de||t===pe||t===me||t===ge||t===ve||t===ye||t===be||t===xe)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return t;if(t===N||t===R){if(n.isWebGL2){if(t===N)return 32775;if(t===R)return 32776}if(null!==(i=e.get("EXT_blend_minmax"))){if(t===N)return i.MIN_EXT;if(t===R)return i.MAX_EXT}}if(t===Ut){if(n.isWebGL2)return 34042;if(null!==(i=e.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Zo(){$n.call(this),this.type="Group"}function Jo(t){Gr.call(this),this.cameras=t||[]}Zo.prototype=Object.assign(Object.create($n.prototype),{constructor:Zo,isGroup:!0}),Jo.prototype=Object.assign(Object.create(Gr.prototype),{constructor:Jo,isArrayCamera:!0});var Ko,ts=new mn,es=new mn;function ns(t,e,n){ts.setFromMatrixPosition(e.matrixWorld),es.setFromMatrixPosition(n.matrixWorld);var i=ts.distanceTo(es),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=i/(-c+h),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var g=o+p,v=s+p,y=f-m,b=d+(i-m),x=l*s/v*g,_=u*s/v*g;t.projectionMatrix.makePerspective(y,b,x,_,g,v)}function is(t){var e,n,i=this,r=null,a=null,o=null,s=[],l=new Ln,u=new Ln,c=1,h="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(a=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",_,!1));var f=new Ln,d=new fn,p=new mn,m=new Gr;m.viewport=new wn,m.layers.enable(1);var g=new Gr;g.viewport=new wn,g.layers.enable(2);var v=new Jo([m,g]);function y(){return null!==r&&!0===r.isPresenting}v.layers.enable(1),v.layers.enable(2);var b,x=new hn;function _(){if(y()){var a=r.getEyeParameters("left");e=2*a.renderWidth*c,n=a.renderHeight*c,b=t.getPixelRatio(),t.getSize(x),t.setDrawingBufferSize(e,n,1),m.viewport.set(0,0,e/2,n),g.viewport.set(e/2,0,e/2,n),M.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&t.setDrawingBufferSize(x.width,x.height,b),M.stop(),i.dispatchEvent({type:"sessionend"})}var w=[];function S(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=e.length;n<r;n++){var a=e[n];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("HTC Vive Focus")||a.id.startsWith("Spatial Controller"))){if(i===t)return a;i++}}}function E(t,i){null!==i&&4===i.length&&t.set(i[0]*e,i[1]*n,i[2]*e,i[3]*n)}this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Zo).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),M.setContext(t)},this.setFramebufferScaleFactor=function(t){c=t},this.setReferenceSpaceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){var e="local-floor"===h?1.6:0;if(!1===y())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(a),"local-floor"===h){var n=r.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,e,0)}var i=a.pose,c=null!==o?o:t;c.matrix.copy(l),c.matrix.decompose(c.position,c.quaternion,c.scale),null!==i.orientation&&(d.fromArray(i.orientation),c.quaternion.multiply(d)),null!==i.position&&(d.setFromRotationMatrix(l),p.fromArray(i.position),p.applyQuaternion(d),c.position.add(p)),c.updateMatrixWorld(),m.near=t.near,g.near=t.near,m.far=t.far,g.far=t.far,m.matrixWorldInverse.fromArray(a.leftViewMatrix),g.matrixWorldInverse.fromArray(a.rightViewMatrix),u.getInverse(l),"local-floor"===h&&(m.matrixWorldInverse.multiply(u),g.matrixWorldInverse.multiply(u));var b=c.parent;null!==b&&(f.getInverse(b.matrixWorld),m.matrixWorldInverse.multiply(f),g.matrixWorldInverse.multiply(f)),m.matrixWorld.getInverse(m.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),m.projectionMatrix.fromArray(a.leftProjectionMatrix),g.projectionMatrix.fromArray(a.rightProjectionMatrix),ns(v,m,g);var x=r.getLayers();if(x.length){var _=x[0];E(m.viewport,_.leftBounds),E(g.viewport,_.rightBounds)}return function(){for(var t=0;t<s.length;t++){var e=s[t],n=S(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(l),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===w[t]&&(w[t]=!1),w[t]!==n.buttons[r].pressed&&(w[t]=n.buttons[r].pressed,!0===w[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),v},this.getStandingMatrix=function(){return l},this.isPresenting=y;var M=new oa;this.setAnimationLoop=function(t){M.setAnimationLoop(t),y()&&M.start()},this.submitFrame=function(){y()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",_)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function rs(t,e){var n=this,i=null,r=null,a="local-floor",o=null,s=[],l=[];function u(){return null!==i&&null!==r}var c=new Gr;c.layers.enable(1),c.viewport=new wn;var h=new Gr;h.layers.enable(2),h.viewport=new wn;var f=new Jo([c,h]);function d(t){for(var e=0;e<s.length;e++)l[e]===t.inputSource&&s[e].dispatchEvent({type:t.type})}function p(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),y.stop(),n.dispatchEvent({type:"sessionend"})}function m(t){r=t,y.setContext(i),y.start(),n.dispatchEvent({type:"sessionstart"})}function g(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Zo).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){a=t},this.getSession=function(){return i},this.setSession=function(t){null!==(i=t)&&(i.addEventListener("select",d),i.addEventListener("selectstart",d),i.addEventListener("selectend",d),i.addEventListener("end",p),i.updateRenderState({baseLayer:new XRWebGLLayer(i,e)}),i.requestReferenceSpace(a).then(m),l=i.inputSources,i.addEventListener("inputsourceschange",(function(){l=i.inputSources,console.log(l);for(var t=0;t<s.length;t++){s[t].userData.inputSource=l[t]}})))},this.getCamera=function(t){if(u()){var e=t.parent,n=f.cameras;g(f,e);for(var i=0;i<n.length;i++)g(n[i],e);t.matrixWorld.copy(f.matrixWorld);for(var r=t.children,a=(i=0,r.length);i<a;i++)r[i].updateMatrixWorld(!0);return ns(f,c,h),f}return t},this.isPresenting=u;var v=null;var y=new oa;y.setAnimationLoop((function(e,n){if(null!==(o=n.getViewerPose(r))){var a=o.views,u=i.renderState.baseLayer;t.setFramebuffer(u.framebuffer);for(var c=0;c<a.length;c++){var h=a[c],d=u.getViewport(h),p=h.transform.inverse.matrix,m=f.cameras[c];m.matrix.fromArray(p).getInverse(m.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===c&&f.matrix.copy(m.matrix)}}for(c=0;c<s.length;c++){var g=s[c],y=l[c];if(y){var b=n.getPose(y.targetRaySpace,r);if(null!==b){g.matrix.fromArray(b.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}v&&v(e)})),this.setAnimationLoop=function(t){v=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Ln},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function as(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,f=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=at,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,m,g,v,b,x,_,w,S,E,M,T,C,k,P,A,O,L=this,I=!1,N=null,R=0,D=0,z=null,B=null,F=-1,j={geometry:null,program:null,wireframe:!1},V=null,U=null,H=new wn,G=new wn,W=null,q=e.width,Q=e.height,Y=1,X=new wn(0,0,q,Q),$=new wn(0,0,q,Q),Z=!1,J=new na,K=new da,tt=!1,et=!1,nt=new Ln,it=new mn;function rt(){return null===z?Y:1}try{var ot={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ct,!1),e.addEventListener("webglcontextrestored",ht,!1),null===(d=n||e.getContext("webgl",ot)||e.getContext("experimental-webgl",ot)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function st(){p=new pa(d),(m=new fa(d,p,t)).isWebGL2||(p.get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays")),p.get("OES_texture_float_linear"),O=new $o(d,p,m),(g=new Yo(d,p,O,m)).scissor(G.copy($).multiplyScalar(Y).floor()),g.viewport(H.copy(X).multiplyScalar(Y).floor()),v=new va(d),b=new Lo,x=new Xo(d,p,g,b,m,O,v),_=new sa(d),w=new ma(d,_,v),S=new xa(w,v),k=new ba(d),E=new Oo(L,p,m),M=new Do,T=new Uo,C=new ca(L,g,S,s),P=new ha(d,p,v,m),A=new ga(d,p,v,m),v.programs=E.programs,L.capabilities=m,L.extensions=p,L.properties=b,L.renderLists=M,L.state=g,L.info=v}st();var lt="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new rs(L,d):new is(L);this.vr=lt;var ut=new Qo(L,S,m.maxTextureSize);function ct(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1,st()}function ft(t){var e=t.target;e.removeEventListener("dispose",ft),function(t){dt(t),b.remove(t)}(e)}function dt(t){var e=b.get(t).program;t.program=void 0,void 0!==e&&E.releaseProgram(e)}this.shadowMap=ut,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=p.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=p.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(t){void 0!==t&&(Y=t,this.setSize(q,Q,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new hn),t.set(q,Q)},this.setSize=function(t,n,i){lt.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=t,Q=n,e.width=Math.floor(t*Y),e.height=Math.floor(n*Y),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new hn),t.set(q*Y,Q*Y).floor()},this.setDrawingBufferSize=function(t,n,i){q=t,Q=n,Y=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new wn),t.copy(H)},this.getViewport=function(t){return t.copy(X)},this.setViewport=function(t,e,n,i){t.isVector4?X.set(t.x,t.y,t.z,t.w):X.set(t,e,n,i),g.viewport(H.copy(X).multiplyScalar(Y).floor())},this.getScissor=function(t){return t.copy($)},this.setScissor=function(t,e,n,i){t.isVector4?$.set(t.x,t.y,t.z,t.w):$.set(t,e,n,i),g.scissor(G.copy($).multiplyScalar(Y).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(t){g.setScissorTest(Z=t)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),d.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ct,!1),e.removeEventListener("webglcontextrestored",ht,!1),M.dispose(),T.dispose(),b.dispose(),S.dispose(),lt.dispose(),mt.stop()},this.renderBufferImmediate=function(t,e){g.initAttributes();var n=b.get(t);t.hasPositions&&!n.position&&(n.position=d.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=d.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=d.createBuffer()),t.hasColors&&!n.color&&(n.color=d.createBuffer());var i=e.getAttributes();t.hasPositions&&(d.bindBuffer(34962,n.position),d.bufferData(34962,t.positionArray,35048),g.enableAttribute(i.position),d.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(d.bindBuffer(34962,n.normal),d.bufferData(34962,t.normalArray,35048),g.enableAttribute(i.normal),d.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(d.bindBuffer(34962,n.uv),d.bufferData(34962,t.uvArray,35048),g.enableAttribute(i.uv),d.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(d.bindBuffer(34962,n.color),d.bufferData(34962,t.colorArray,35048),g.enableAttribute(i.color),d.vertexAttribPointer(i.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),d.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,a){var o=r.isMesh&&r.matrixWorld.determinant()<0;g.setMaterial(i,o);var s=xt(t,e,i,r),l=!1;j.geometry===n.id&&j.program===s.id&&j.wireframe===(!0===i.wireframe)||(j.geometry=n.id,j.program=s.id,j.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(k.update(r,n,i,s),l=!0);var u,c=n.index,h=n.attributes.position,f=1;!0===i.wireframe&&(c=w.getWireframeAttribute(n),f=2);var v=P;null!==c&&(u=_.get(c),(v=A).setIndex(u)),l&&(!function(t,e,n){if(n&&n.isInstancedBufferGeometry&&!m.isWebGL2&&null===p.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g.initAttributes();var i=n.attributes,r=e.getAttributes(),a=t.defaultAttributeValues;for(var o in r){var s=r[o];if(s>=0){var l=i[o];if(void 0!==l){var u=l.normalized,c=l.itemSize,h=_.get(l);if(void 0===h)continue;var f=h.buffer,v=h.type,y=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var b=l.data,x=b.stride,w=l.offset;b&&b.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):g.enableAttribute(s),d.bindBuffer(34962,f),d.vertexAttribPointer(s,c,v,u,x*y,w*y)}else l.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):g.enableAttribute(s),d.bindBuffer(34962,f),d.vertexAttribPointer(s,c,v,u,0,0)}else if(void 0!==a){var S=a[o];if(void 0!==S)switch(S.length){case 2:d.vertexAttrib2fv(s,S);break;case 3:d.vertexAttrib3fv(s,S);break;case 4:d.vertexAttrib4fv(s,S);break;default:d.vertexAttrib1fv(s,S)}}}}g.disableUnusedAttributes()}(i,s,n),null!==c&&d.bindBuffer(34963,u.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var b=n.drawRange.start*f,x=n.drawRange.count*f,S=null!==a?a.start*f:0,E=null!==a?a.count*f:1/0,M=Math.max(b,S),T=Math.min(y,b+x,S+E)-1,C=Math.max(0,T-M+1);if(0!==C){if(r.isMesh)if(!0===i.wireframe)g.setLineWidth(i.wireframeLinewidth*rt()),v.setMode(1);else switch(r.drawMode){case Ae:v.setMode(4);break;case Oe:v.setMode(5);break;case Le:v.setMode(6)}else if(r.isLine){var O=i.linewidth;void 0===O&&(O=1),g.setLineWidth(O*rt()),r.isLineSegments?v.setMode(1):r.isLineLoop?v.setMode(2):v.setMode(3)}else r.isPoints?v.setMode(0):r.isSprite&&v.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,M,C):v.render(M,C)}},this.compile=function(t,e){(f=T.get(t,e)).init(),t.traverse((function(t){t.isLight&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)bt(e.material[n],t.fog,e);else bt(e.material,t.fog,e)}))};var pt=null;var mt=new oa;function gt(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||J.intersectsSprite(t)){i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);var r=S.update(t);(a=t.material).visible&&h.push(t,r,a,n,it.z,null)}}else if(t.isImmediateRenderObject)i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt),h.push(t,null,t.material,n,it.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||J.intersectsObject(t))){i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);r=S.update(t);var a=t.material;if(Array.isArray(a))for(var o=r.groups,s=0,l=o.length;s<l;s++){var u=o[s],c=a[u.materialIndex];c&&c.visible&&h.push(t,r,c,n,it.z,u)}else a.visible&&h.push(t,r,a,n,it.z,null)}var d=t.children;for(s=0,l=d.length;s<l;s++)gt(d[s],e,n,i)}}function vt(t,e,n,i){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,u=void 0===i?o.material:i,c=o.group;if(n.isArrayCamera){U=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var m=h[d];s.layers.test(m.layers)&&(g.viewport(H.copy(m.viewport)),f.setupLights(m),yt(s,e,m,l,u,c))}}else U=null,yt(s,e,n,l,u,c)}}function yt(t,e,n,i,r,a){if(t.onBeforeRender(L,e,n,i,r,a),f=T.get(e,U||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){g.setMaterial(r);var o=xt(n,e.fog,r,t);j.geometry=null,j.program=null,j.wireframe=!1,function(t,e){t.render((function(t){L.renderBufferImmediate(t,e)}))}(t,o)}else L.renderBufferDirect(n,e.fog,i,r,t,a);t.onAfterRender(L,e,n,i,r,a),f=T.get(e,U||n)}function bt(t,e,n){var i=b.get(t),r=f.state.lights,a=f.state.shadowsArray,o=r.state.version,s=E.getParameters(t,r.state,a,e,K.numPlanes,K.numIntersection,n),l=E.getProgramCode(t,s),u=i.program,c=!0;if(void 0===u)t.addEventListener("dispose",ft);else if(u.code!==l)dt(t);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var h=aa[s.shaderID];i.shader={name:t.type,uniforms:zr(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,L),l=E.getProgramCode(t,s),u=E.acquireProgram(t,i.shader,s,l),i.program=u,t.program=u}var d=u.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<L.maxMorphTargets;p++)d["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(p=0;p<L.maxMorphNormals;p++)d["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var m=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=K.numPlanes,i.numIntersection=K.numIntersection,m.clippingPlanes=K.uniform),i.fog=e,i.lightsStateVersion=o,t.lights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.spotLights.value=r.state.spot,m.rectAreaLights.value=r.state.rectArea,m.pointLights.value=r.state.point,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=i.program.getUniforms(),v=yo.seqWithValue(g.seq,m);i.uniformsList=v}function xt(t,e,n,i){x.resetTextureUnits();var r=b.get(n),a=f.state.lights;if(tt&&(et||t!==V)){var o=t===V&&n.id===F;K.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,o)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsStateVersion!==a.state.version?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===K.numPlanes&&r.numIntersection===K.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(bt(n,e,i),n.needsUpdate=!1);var s,l,u=!1,c=!1,h=!1,p=r.program,v=p.getUniforms(),_=r.shader.uniforms;if(g.useProgram(p.program)&&(u=!0,c=!0,h=!0),n.id!==F&&(F=n.id,c=!0),u||V!==t){if(v.setValue(d,"projectionMatrix",t.projectionMatrix),m.logarithmicDepthBuffer&&v.setValue(d,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),V!==t&&(V=t,c=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var w=v.map.cameraPosition;void 0!==w&&w.setValue(d,it.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&v.setValue(d,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){v.setOptional(d,i,"bindMatrix"),v.setOptional(d,i,"bindMatrixInverse");var S=i.skeleton;if(S){var E=S.bones;if(m.floatVertexTextures){if(void 0===S.boneTexture){var M=Math.sqrt(4*E.length);M=cn.ceilPowerOfTwo(M),M=Math.max(M,4);var T=new Float32Array(M*M*4);T.set(S.boneMatrices);var C=new Xr(T,M,M,Wt,zt);C.needsUpdate=!0,S.boneMatrices=T,S.boneTexture=C,S.boneTextureSize=M}v.setValue(d,"boneTexture",S.boneTexture,x),v.setValue(d,"boneTextureSize",S.boneTextureSize)}else v.setOptional(d,S,"boneMatrices")}}return c&&(v.setValue(d,"toneMappingExposure",L.toneMappingExposure),v.setValue(d,"toneMappingWhitePoint",L.toneMappingWhitePoint),n.lights&&(l=h,(s=_).ambientLightColor.needsUpdate=l,s.lightProbe.needsUpdate=l,s.directionalLights.needsUpdate=l,s.pointLights.needsUpdate=l,s.spotLights.needsUpdate=l,s.rectAreaLights.needsUpdate=l,s.hemisphereLights.needsUpdate=l),e&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(_,e),n.isMeshBasicMaterial?_t(_,n):n.isMeshLambertMaterial?(_t(_,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(_,n)):n.isMeshPhongMaterial?(_t(_,n),n.isMeshToonMaterial?function(t,e){wt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(_,n):wt(_,n)):n.isMeshStandardMaterial?(_t(_,n),n.isMeshPhysicalMaterial?function(t,e){St(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===y&&t.clearcoatNormalScale.value.negate());t.transparency.value=e.transparency}(_,n):St(_,n)):n.isMeshMatcapMaterial?(_t(_,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshDepthMaterial?(_t(_,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshDistanceMaterial?(_t(_,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(_,n)):n.isMeshNormalMaterial?(_t(_,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(_,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(_,n)):n.isPointsMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*Y,t.scale.value=.5*Q,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,n):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,n):n.isShadowMaterial&&(_.color.value.copy(n.color),_.opacity.value=n.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=ra.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=ra.LTC_2),yo.upload(d,r.uniformsList,_,x)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(yo.upload(d,r.uniformsList,_,x),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(d,"center",i.center),v.setValue(d,"modelViewMatrix",i.modelViewMatrix),v.setValue(d,"normalMatrix",i.normalMatrix),v.setValue(d,"modelMatrix",i.matrixWorld),p}function _t(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=b.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function wt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function St(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}mt.setAnimationLoop((function(t){lt.isPresenting()||pt&&pt(t)})),"undefined"!=typeof window&&mt.setContext(window),this.setAnimationLoop=function(t){pt=t,lt.setAnimationLoop(t),mt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),e&&e.isCamera){if(!I){j.geometry=null,j.program=null,j.wireframe=!1,F=-1,V=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),lt.enabled&&(e=lt.getCamera(e)),(f=T.get(t,e)).init(),t.onBeforeRender(L,t,e,n||z),nt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),J.setFromMatrix(nt),et=this.localClippingEnabled,tt=K.init(this.clippingPlanes,et,e),(h=M.get(t,e)).init(),gt(t,e,0,L.sortObjects),!0===L.sortObjects&&h.sort(),tt&&K.beginShadows();var r=f.state.shadowsArray;ut.render(r,t,e),f.setupLights(e),tt&&K.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),C.render(h,t,e,i);var a=h.opaque,o=h.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;a.length&&vt(a,t,e,s),o.length&&vt(o,t,e,s)}else a.length&&vt(a,t,e),o.length&&vt(o,t,e);t.onAfterRender(L,t,e),null!==z&&(x.updateRenderTargetMipmap(z),x.updateMultisampleRenderTarget(z)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),lt.enabled&&lt.submitFrame(),h=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){N!==t&&d.bindFramebuffer(36160,t),N=t},this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return z},this.setRenderTarget=function(t,e,n){z=t,R=e,D=n,t&&void 0===b.get(t).__webglFramebuffer&&x.setupRenderTarget(t);var i=N,r=!1;if(t){var a=b.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=a[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?b.get(t).__webglMultisampledFramebuffer:a,H.copy(t.viewport),G.copy(t.scissor),W=t.scissorTest}else H.copy(X).multiplyScalar(Y).floor(),G.copy($).multiplyScalar(Y).floor(),W=Z;if(B!==i&&(d.bindFramebuffer(36160,i),B=i),g.viewport(H),g.scissor(G),g.setScissorTest(W),r){var o=b.get(t.texture);d.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=b.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){var l=!1;s!==B&&(d.bindFramebuffer(36160,s),l=!0);try{var u=t.texture,c=u.format,h=u.type;if(c!==Wt&&O.convert(c)!==d.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Ot||O.convert(h)===d.getParameter(35738)||h===zt&&(m.isWebGL2||p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float"))||h===Bt&&(m.isWebGL2?p.get("EXT_color_buffer_float"):p.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===d.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&d.readPixels(e,n,i,r,O.convert(c),O.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&d.bindFramebuffer(36160,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,a=O.convert(e.format);x.setTexture2D(e,0),d.copyTexImage2D(3553,n||0,a,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,a=e.image.height,o=O.convert(n.format),s=O.convert(n.type);x.setTexture2D(n,0),e.isDataTexture?d.texSubImage2D(3553,i||0,t.x,t.y,r,a,o,s,e.image.data):d.texSubImage2D(3553,i||0,t.x,t.y,o,s,e.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function os(t,e){this.name="",this.color=new Di(t),this.density=void 0!==e?e:25e-5}function ss(t,e,n){this.name="",this.color=new Di(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function ls(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function us(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function cs(t){Ui.call(this),this.type="SpriteMaterial",this.color=new Di(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}Object.assign(is.prototype,i.prototype),Object.assign(rs.prototype,i.prototype),Object.assign(os.prototype,{isFogExp2:!0,clone:function(){return new os(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(ss.prototype,{isFog:!0,clone:function(){return new ss(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(ls.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ls.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(us.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(us.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),cs.prototype=Object.create(Ui.prototype),cs.prototype.constructor=cs,cs.prototype.isSpriteMaterial=!0,cs.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var hs=new mn,fs=new mn,ds=new mn,ps=new hn,ms=new hn,gs=new Ln,vs=new mn,ys=new mn,bs=new mn,xs=new hn,_s=new hn,ws=new hn;function Ss(t){if($n.call(this),this.type="Sprite",void 0===Ko){Ko=new ur;var e=new ls(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ko.setIndex([0,1,2,0,2,3]),Ko.addAttribute("position",new us(e,3,0,!1)),Ko.addAttribute("uv",new us(e,2,3,!1))}this.geometry=Ko,this.material=void 0!==t?t:new cs,this.center=new hn(.5,.5)}function Es(t,e,n,i,r,a){ps.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(ms.x=a*ps.x-r*ps.y,ms.y=r*ps.x+a*ps.y):ms.copy(ps),t.copy(e),t.x+=ms.x,t.y+=ms.y,t.applyMatrix4(gs)}Ss.prototype=Object.assign(Object.create($n.prototype),{constructor:Ss,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),fs.setFromMatrixScale(this.matrixWorld),gs.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ds.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&fs.multiplyScalar(-ds.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;Es(vs.set(-.5,-.5,0),ds,a,fs,n,i),Es(ys.set(.5,-.5,0),ds,a,fs,n,i),Es(bs.set(.5,.5,0),ds,a,fs,n,i),xs.set(0,0),_s.set(1,0),ws.set(1,1);var o=t.ray.intersectTriangle(vs,ys,bs,!1,hs);if(null!==o||(Es(ys.set(-.5,.5,0),ds,a,fs,n,i),_s.set(0,1),null!==(o=t.ray.intersectTriangle(vs,bs,ys,!1,hs)))){var s=t.ray.origin.distanceTo(hs);s<t.near||s>t.far||e.push({distance:s,point:hs.clone(),uv:Li.getUV(hs,vs,ys,bs,xs,_s,ws,new hn),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return $n.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var Ms=new mn,Ts=new mn;function Cs(){$n.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function ks(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Cr.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ln,this.bindMatrixInverse=new Ln}Cs.prototype=Object.assign(Object.create($n.prototype),{constructor:Cs,isLOD:!0,copy:function(t){$n.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(t,e){Ms.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Ms);this.getObjectForDistance(n).raycast(t,e)},update:function(t){var e=this.levels;if(e.length>1){Ms.setFromMatrixPosition(t.matrixWorld),Ts.setFromMatrixPosition(this.matrixWorld);var n=Ms.distanceTo(Ts);e[0].object.visible=!0;for(var i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){var e=$n.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),ks.prototype=Object.assign(Object.create(Cr.prototype),{constructor:ks,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new wn,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Cr.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ps=new Ln,As=new Ln;function Os(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ln)}}function Ls(){$n.call(this),this.type="Bone"}function Is(t){Ui.call(this),this.type="LineBasicMaterial",this.color=new Di(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}Object.assign(Os.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Ln;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:As;Ps.multiplyMatrices(o,e[r]),Ps.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new Os(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),Ls.prototype=Object.assign(Object.create($n.prototype),{constructor:Ls,isBone:!0}),Is.prototype=Object.create(Ui.prototype),Is.prototype.constructor=Is,Is.prototype.isLineBasicMaterial=!0,Is.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Ns=new mn,Rs=new mn,Ds=new Ln,zs=new _i,Bs=new di;function Fs(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),$n.call(this),this.type="Line",this.geometry=void 0!==t?t:new ur,this.material=void 0!==e?e:new Is({color:16777215*Math.random()})}Fs.prototype=Object.assign(Object.create($n.prototype),{constructor:Fs,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)Ns.fromBufferAttribute(e,i-1),Rs.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Ns.distanceTo(Rs);t.addAttribute("lineDistance",new Ji(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;(n=t.lineDistances)[0]=0;for(i=1,r=a.length;i<r;i++)n[i]=n[i-1],n[i]+=a[i-1].distanceTo(a[i])}return this},raycast:function(t,e){var n=t.linePrecision,i=this.geometry,r=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),Bs.copy(i.boundingSphere),Bs.applyMatrix4(r),Bs.radius+=n,!1!==t.ray.intersectsSphere(Bs)){Ds.getInverse(r),zs.copy(t.ray).applyMatrix4(Ds);var a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new mn,l=new mn,u=new mn,c=new mn,h=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var f=i.index,d=i.attributes.position.array;if(null!==f)for(var p=f.array,m=0,g=p.length-1;m<g;m+=h){var v=p[m],y=p[m+1];if(s.fromArray(d,3*v),l.fromArray(d,3*y),!(zs.distanceSqToSegment(s,l,c,u)>o))c.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(c))<t.near||_>t.far||e.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,g=d.length/3-1;m<g;m+=h){if(s.fromArray(d,3*m),l.fromArray(d,3*m+3),!(zs.distanceSqToSegment(s,l,c,u)>o))c.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(c))<t.near||_>t.far||e.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(i.isGeometry){var b=i.vertices,x=b.length;for(m=0;m<x-1;m+=h){var _;if(!(zs.distanceSqToSegment(b[m],b[m+1],c,u)>o))c.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(c))<t.near||_>t.far||e.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var js=new mn,Vs=new mn;function Us(t,e){Fs.call(this,t,e),this.type="LineSegments"}function Hs(t,e){Fs.call(this,t,e),this.type="LineLoop"}function Gs(t){Ui.call(this),this.type="PointsMaterial",this.color=new Di(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}Us.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Us,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)js.fromBufferAttribute(e,i),Vs.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+js.distanceTo(Vs);t.addAttribute("lineDistance",new Ji(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;for(n=t.lineDistances,i=0,r=a.length;i<r;i+=2)js.copy(a[i]),Vs.copy(a[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+js.distanceTo(Vs)}return this}}),Hs.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Hs,isLineLoop:!0}),Gs.prototype=Object.create(Ui.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isPointsMaterial=!0,Gs.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Ws=new Ln,qs=new _i,Qs=new di,Ys=new mn;function Xs(t,e){$n.call(this),this.type="Points",this.geometry=void 0!==t?t:new ur,this.material=void 0!==e?e:new Gs({color:16777215*Math.random()}),this.updateMorphTargets()}function $s(t,e,n,i,r,a,o){var s=qs.distanceSqToPoint(t);if(s<n){var l=new mn;qs.closestPointToPoint(t,l),l.applyMatrix4(i);var u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}function Zs(t,e,n,i,r,a,o,s,l){_n.call(this,t,e,n,i,r,a,o,s,l),this.format=void 0!==o?o:Gt,this.minFilter=void 0!==a?a:Tt,this.magFilter=void 0!==r?r:Tt,this.generateMipmaps=!1}function Js(t,e,n,i,r,a,o,s,l,u,c,h){_n.call(this,null,a,o,s,l,u,i,r,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ks(t,e,n,i,r,a,o,s,l){_n.call(this,t,e,n,i,r,a,o,s,l),this.needsUpdate=!0}function tl(t,e,n,i,r,a,o,s,l,u){if((u=void 0!==u?u:Xt)!==Xt&&u!==$t)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Xt&&(n=Nt),void 0===n&&u===$t&&(n=Ut),_n.call(this,null,i,r,a,o,s,u,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:_t,this.minFilter=void 0!==s?s:_t,this.flipY=!1,this.generateMipmaps=!1}function el(t){ur.call(this),this.type="WireframeGeometry";var e,n,i,r,a,o,s,l,u,c,h=[],f=[0,0],d={},p=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var g=m[e];for(n=0;n<3;n++)s=g[p[n]],l=g[p[(n+1)%3]],f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===d[u=f[0]+","+f[1]]&&(d[u]={index1:f[0],index2:f[1]})}for(u in d)o=d[u],c=t.vertices[o.index1],h.push(c.x,c.y,c.z),c=t.vertices[o.index2],h.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var v,y,b,x,_,w,S;if(c=new mn,null!==t.index){for(v=t.attributes.position,y=t.index,0===(b=t.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),r=0,a=b.length;r<a;++r)for(e=_=(x=b[r]).start,i=_+x.count;e<i;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),l=y.getX(e+(n+1)%3),f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===d[u=f[0]+","+f[1]]&&(d[u]={index1:f[0],index2:f[1]});for(u in d)o=d[u],c.fromBufferAttribute(v,o.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(v,o.index2),h.push(c.x,c.y,c.z)}else for(e=0,i=(v=t.attributes.position).count/3;e<i;e++)for(n=0;n<3;n++)w=3*e+n,c.fromBufferAttribute(v,w),h.push(c.x,c.y,c.z),S=3*e+(n+1)%3,c.fromBufferAttribute(v,S),h.push(c.x,c.y,c.z)}this.addAttribute("position",new Ji(h,3))}function nl(t,e,n){Nr.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new il(t,e,n)),this.mergeVertices()}function il(t,e,n){ur.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,a=[],o=[],s=[],l=[],u=new mn,c=new mn,h=new mn,f=new mn,d=new mn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=e+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=e;r++){var g=r/e;t(g,m,c),o.push(c.x,c.y,c.z),g-1e-5>=0?(t(g-1e-5,m,h),f.subVectors(c,h)):(t(g+1e-5,m,h),f.subVectors(h,c)),m-1e-5>=0?(t(g,m-1e-5,h),d.subVectors(c,h)):(t(g,m+1e-5,h),d.subVectors(h,c)),u.crossVectors(f,d).normalize(),s.push(u.x,u.y,u.z),l.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var v=i*p+r,y=i*p+r+1,b=(i+1)*p+r+1,x=(i+1)*p+r;a.push(v,y,x),a.push(y,b,x)}this.setIndex(a),this.addAttribute("position",new Ji(o,3)),this.addAttribute("normal",new Ji(s,3)),this.addAttribute("uv",new Ji(l,2))}function rl(t,e,n,i){Nr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new al(t,e,n,i)),this.mergeVertices()}function al(t,e,n,i){ur.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var r=[],a=[];function o(t,e,n,i){var r,a,o=Math.pow(2,i),l=[];for(r=0;r<=o;r++){l[r]=[];var u=t.clone().lerp(n,r/o),c=e.clone().lerp(n,r/o),h=o-r;for(a=0;a<=h;a++)l[r][a]=0===a&&r===o?u:u.clone().lerp(c,a/h)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var f=Math.floor(a/2);a%2==0?(s(l[r][f+1]),s(l[r+1][f]),s(l[r][f])):(s(l[r][f+1]),s(l[r+1][f+1]),s(l[r+1][f]))}}function s(t){r.push(t.x,t.y,t.z)}function l(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function u(t,e,n,i){i<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=i/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new mn,i=new mn,r=new mn,a=0;a<e.length;a+=3)l(e[a+0],n),l(e[a+1],i),l(e[a+2],r),o(n,i,r,t)}(i=i||0),function(t){for(var e=new mn,n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){for(var t=new mn,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var n=c(t)/2/Math.PI+.5,i=(o=t,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-i)}var o;(function(){for(var t=new mn,e=new mn,n=new mn,i=new mn,o=new hn,s=new hn,l=new hn,h=0,f=0;h<r.length;h+=9,f+=6){t.set(r[h+0],r[h+1],r[h+2]),e.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),o.set(a[f+0],a[f+1]),s.set(a[f+2],a[f+3]),l.set(a[f+4],a[f+5]),i.copy(t).add(e).add(n).divideScalar(3);var d=c(i);u(o,f+0,t,d),u(s,f+2,e,d),u(l,f+4,n,d)}})(),function(){for(var t=0;t<a.length;t+=6){var e=a[t+0],n=a[t+2],i=a[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),i<.2&&(a[t+4]+=1))}}()}(),this.addAttribute("position",new Ji(r,3)),this.addAttribute("normal",new Ji(r.slice(),3)),this.addAttribute("uv",new Ji(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function ol(t,e){Nr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new sl(t,e)),this.mergeVertices()}function sl(t,e){al.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ll(t,e){Nr.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ul(t,e)),this.mergeVertices()}function ul(t,e){al.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function cl(t,e){Nr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new hl(t,e)),this.mergeVertices()}function hl(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];al.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function fl(t,e){Nr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new dl(t,e)),this.mergeVertices()}function dl(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];al.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function pl(t,e,n,i,r,a){Nr.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new ml(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function ml(t,e,n,i,r){ur.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},e=e||64,n=n||1,i=i||8,r=r||!1;var a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,l=new mn,u=new mn,c=new hn,h=new mn,f=[],d=[],p=[],m=[];function g(r){h=t.getPointAt(r/e,h);var o=a.normals[r],c=a.binormals[r];for(s=0;s<=i;s++){var p=s/i*Math.PI*2,m=Math.sin(p),g=-Math.cos(p);u.x=g*o.x+m*c.x,u.y=g*o.y+m*c.y,u.z=g*o.z+m*c.z,u.normalize(),d.push(u.x,u.y,u.z),l.x=h.x+n*u.x,l.y=h.y+n*u.y,l.z=h.z+n*u.z,f.push(l.x,l.y,l.z)}}!function(){for(o=0;o<e;o++)g(o);g(!1===r?e:0),function(){for(o=0;o<=e;o++)for(s=0;s<=i;s++)c.x=o/e,c.y=s/i,p.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(o=1;o<=i;o++){var t=(i+1)*(s-1)+(o-1),n=(i+1)*s+(o-1),r=(i+1)*s+o,a=(i+1)*(s-1)+o;m.push(t,n,a),m.push(n,r,a)}}()}(),this.setIndex(m),this.addAttribute("position",new Ji(f,3)),this.addAttribute("normal",new Ji(d,3)),this.addAttribute("uv",new Ji(p,2))}function gl(t,e,n,i,r,a,o){Nr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new vl(t,e,n,i,r,a)),this.mergeVertices()}function vl(t,e,n,i,r,a){ur.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var o,s,l=[],u=[],c=[],h=[],f=new mn,d=new mn,p=new mn,m=new mn,g=new mn,v=new mn,y=new mn;for(o=0;o<=n;++o){var b=o/n*r*Math.PI*2;for(C(b,r,a,t,p),C(b+.01,r,a,t,m),v.subVectors(m,p),y.addVectors(m,p),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=i;++s){var x=s/i*Math.PI*2,_=-e*Math.cos(x),w=e*Math.sin(x);f.x=p.x+(_*y.x+w*g.x),f.y=p.y+(_*y.y+w*g.y),f.z=p.z+(_*y.z+w*g.z),u.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(o/n),h.push(s/i)}}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var S=(i+1)*(s-1)+(o-1),E=(i+1)*s+(o-1),M=(i+1)*s+o,T=(i+1)*(s-1)+o;l.push(S,E,T),l.push(E,M,T)}function C(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new Ji(u,3)),this.addAttribute("normal",new Ji(c,3)),this.addAttribute("uv",new Ji(h,2))}function yl(t,e,n,i,r){Nr.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new bl(t,e,n,i,r)),this.mergeVertices()}function bl(t,e,n,i,r){ur.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],l=[],u=[],c=[],h=new mn,f=new mn,d=new mn;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var p=o/i*r,m=a/n*Math.PI*2;f.x=(t+e*Math.cos(m))*Math.cos(p),f.y=(t+e*Math.cos(m))*Math.sin(p),f.z=e*Math.sin(m),l.push(f.x,f.y,f.z),h.x=t*Math.cos(p),h.y=t*Math.sin(p),d.subVectors(f,h).normalize(),u.push(d.x,d.y,d.z),c.push(o/i),c.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var g=(i+1)*a+o-1,v=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,b=(i+1)*a+o;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.addAttribute("position",new Ji(l,3)),this.addAttribute("normal",new Ji(u,3)),this.addAttribute("uv",new Ji(c,2))}Xs.prototype=Object.assign(Object.create($n.prototype),{constructor:Xs,isPoints:!0,raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Qs.copy(n.boundingSphere),Qs.applyMatrix4(i),Qs.radius+=r,!1!==t.ray.intersectsSphere(Qs)){Ws.getInverse(i),qs.copy(t.ray).applyMatrix4(Ws);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position.array;if(null!==s)for(var u=s.array,c=0,h=u.length;c<h;c++){var f=u[c];Ys.fromArray(l,3*f),$s(Ys,f,o,i,t,e,this)}else{c=0;for(var d=l.length/3;c<d;c++)Ys.fromArray(l,3*c),$s(Ys,c,o,i,t,e,this)}}else{var p=n.vertices;for(c=0,d=p.length;c<d;c++)$s(p[c],c,o,i,t,e,this)}}},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Zs.prototype=Object.assign(Object.create(_n.prototype),{constructor:Zs,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Js.prototype=Object.create(_n.prototype),Js.prototype.constructor=Js,Js.prototype.isCompressedTexture=!0,Ks.prototype=Object.create(_n.prototype),Ks.prototype.constructor=Ks,Ks.prototype.isCanvasTexture=!0,tl.prototype=Object.create(_n.prototype),tl.prototype.constructor=tl,tl.prototype.isDepthTexture=!0,el.prototype=Object.create(ur.prototype),el.prototype.constructor=el,nl.prototype=Object.create(Nr.prototype),nl.prototype.constructor=nl,il.prototype=Object.create(ur.prototype),il.prototype.constructor=il,rl.prototype=Object.create(Nr.prototype),rl.prototype.constructor=rl,al.prototype=Object.create(ur.prototype),al.prototype.constructor=al,ol.prototype=Object.create(Nr.prototype),ol.prototype.constructor=ol,sl.prototype=Object.create(al.prototype),sl.prototype.constructor=sl,ll.prototype=Object.create(Nr.prototype),ll.prototype.constructor=ll,ul.prototype=Object.create(al.prototype),ul.prototype.constructor=ul,cl.prototype=Object.create(Nr.prototype),cl.prototype.constructor=cl,hl.prototype=Object.create(al.prototype),hl.prototype.constructor=hl,fl.prototype=Object.create(Nr.prototype),fl.prototype.constructor=fl,dl.prototype=Object.create(al.prototype),dl.prototype.constructor=dl,pl.prototype=Object.create(Nr.prototype),pl.prototype.constructor=pl,ml.prototype=Object.create(ur.prototype),ml.prototype.constructor=ml,ml.prototype.toJSON=function(){var t=ur.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},gl.prototype=Object.create(Nr.prototype),gl.prototype.constructor=gl,vl.prototype=Object.create(ur.prototype),vl.prototype.constructor=vl,yl.prototype=Object.create(Nr.prototype),yl.prototype.constructor=yl,bl.prototype=Object.create(ur.prototype),bl.prototype.constructor=bl;var xl=function(t,e,n){n=n||2;var i,r,a,o,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=_l(t,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(t,e,n,i){var r,a,o,s,l,u=[];for(r=0,a=e.length;r<a;r++)o=e[r]*i,s=r<a-1?e[r+1]*i:t.length,(l=_l(t,o,s,i,!1))===l.next&&(l.steiner=!0),u.push(Ol(l));for(u.sort(kl),r=0;r<u.length;r++)Pl(u[r],n),n=wl(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=a=t[0],r=o=t[1];for(var p=n;p<h;p+=n)(s=t[p])<i&&(i=s),(l=t[p+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-i,o-r))?1/u:0}return Sl(f,d,n,i,r,u),d};function _l(t,e,n,i,r){var a,o;if(r===function(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}(t,e,n,i)>0)for(a=e;a<n;a+=i)o=Fl(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=Fl(a,t[a],t[a+1],o);return o&&Rl(o,o.next)&&(jl(o),o=o.next),o}function wl(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Rl(i,i.next)&&0!==Nl(i.prev,i,i.next))i=i.next;else{if(jl(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Sl(t,e,n,i,r,a,o){if(t){!o&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Al(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,o,s,l,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1)}(r)}(t,i,r,a);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,a?Ml(t,i,r,a):El(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),jl(t),t=l.next,u=l.next;else if((t=l)===u){o?1===o?Sl(t=Tl(t,e,n),e,n,i,r,a,2):2===o&&Cl(t,e,n,i,r,a):Sl(wl(t),e,n,i,r,a,1);break}}}function El(t){var e=t.prev,n=t,i=t.next;if(Nl(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Ll(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Nl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ml(t,e,n,i){var r=t.prev,a=t,o=t.next;if(Nl(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=Al(s,l,e,n,i),f=Al(u,c,e,n,i),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&Ll(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nl(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&Ll(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Nl(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Ll(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nl(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Ll(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Nl(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Tl(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!Rl(r,a)&&Dl(r,i,i.next,a)&&zl(r,a)&&zl(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),jl(i),jl(i.next),i=t=a),i=i.next}while(i!==t);return i}function Cl(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Il(o,s)){var l=Bl(o,s);return o=wl(o,o.next),l=wl(l,l.next),Sl(o,e,n,i,r,a),void Sl(l,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}function kl(t,e){return t.x-e.x}function Pl(t,e){if(e=function(t,e){var n,i=e,r=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;i=n.next;for(;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&Ll(a<h?r:o,a,c,h,a<h?o:r,a,i.x,i.y)&&((l=Math.abs(a-i.y)/(r-i.x))<f||l===f&&i.x>n.x)&&zl(i,t)&&(n=i,f=l),i=i.next;return n}(t,e)){var n=Bl(e,t);wl(n,n.next)}}function Al(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ol(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ll(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Il(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Dl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&zl(t,e)&&zl(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function Nl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Rl(t,e){return t.x===e.x&&t.y===e.y}function Dl(t,e,n,i){return!!(Rl(t,n)&&Rl(e,i)||Rl(t,i)&&Rl(n,e))||Nl(t,e,n)>0!=Nl(t,e,i)>0&&Nl(n,i,t)>0!=Nl(n,i,e)>0}function zl(t,e){return Nl(t.prev,t,t.next)<0?Nl(t,e,t.next)>=0&&Nl(t,t.prev,e)>=0:Nl(t,e,t.prev)<0||Nl(t,t.next,e)<0}function Bl(t,e){var n=new Vl(t.i,t.x,t.y),i=new Vl(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Fl(t,e,n,i){var r=new Vl(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function jl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Vl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Ul={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return Ul.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];Hl(t),Gl(n,t);var a=t.length;e.forEach(Hl);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,Gl(n,e[o]);var s=xl(n,i);for(o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function Hl(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Gl(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Wl(t,e){Nr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new ql(t,e)),this.mergeVertices()}function ql(t,e){ur.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,i=[],r=[],a=0,o=t.length;a<o;a++){s(t[a])}function s(t){var a=[],o=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:100,u=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3,p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Ql;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);var g,v,y,b,x,_,w,S,E=!1;p&&(g=p.getSpacedPoints(s),E=!0,u=!1,v=p.computeFrenetFrames(s,!1),y=new mn,b=new mn,x=new mn),u||(d=0,c=0,h=0,f=0);var M=t.extractPoints(o),T=M.shape,C=M.holes;if(!Ul.isClockWise(T))for(T=T.reverse(),w=0,S=C.length;w<S;w++)_=C[w],Ul.isClockWise(_)&&(C[w]=_.reverse());var k=Ul.triangulateShape(T,C),P=T;for(w=0,S=C.length;w<S;w++)_=C[w],T=T.concat(_);function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var O,L,I,N,R,D,z=T.length,B=k.length;function F(t,e,n){var i,r,a,o=t.x-e.x,s=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=e.x-s/f,m=e.y+o/f,g=((n.x-u/d-p)*u-(n.y+l/d-m)*l)/(o*u-s*l),v=(i=p+o*g-t.x)*i+(r=m+s*g-t.y)*r;if(v<=2)return new hn(i,r);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(i=-s,r=o,a=Math.sqrt(c)):(i=o,r=s,a=Math.sqrt(c/2))}return new hn(i/a,r/a)}for(var j=[],V=0,U=P.length,H=U-1,G=V+1;V<U;V++,H++,G++)H===U&&(H=0),G===U&&(G=0),j[V]=F(P[V],P[H],P[G]);var W,q,Q=[],Y=j.concat();for(w=0,S=C.length;w<S;w++){for(_=C[w],W=[],V=0,H=(U=_.length)-1,G=V+1;V<U;V++,H++,G++)H===U&&(H=0),G===U&&(G=0),W[V]=F(_[V],_[H],_[G]);Q.push(W),Y=Y.concat(W)}for(O=0;O<d;O++){for(I=O/d,N=c*Math.cos(I*Math.PI/2),L=h*Math.sin(I*Math.PI/2)+f,V=0,U=P.length;V<U;V++)$((R=A(P[V],j[V],L)).x,R.y,-N);for(w=0,S=C.length;w<S;w++)for(_=C[w],W=Q[w],V=0,U=_.length;V<U;V++)$((R=A(_[V],W[V],L)).x,R.y,-N)}for(L=h+f,V=0;V<z;V++)R=u?A(T[V],Y[V],L):T[V],E?(b.copy(v.normals[0]).multiplyScalar(R.x),y.copy(v.binormals[0]).multiplyScalar(R.y),x.copy(g[0]).add(b).add(y),$(x.x,x.y,x.z)):$(R.x,R.y,0);for(q=1;q<=s;q++)for(V=0;V<z;V++)R=u?A(T[V],Y[V],L):T[V],E?(b.copy(v.normals[q]).multiplyScalar(R.x),y.copy(v.binormals[q]).multiplyScalar(R.y),x.copy(g[q]).add(b).add(y),$(x.x,x.y,x.z)):$(R.x,R.y,l/s*q);for(O=d-1;O>=0;O--){for(I=O/d,N=c*Math.cos(I*Math.PI/2),L=h*Math.sin(I*Math.PI/2)+f,V=0,U=P.length;V<U;V++)$((R=A(P[V],j[V],L)).x,R.y,l+N);for(w=0,S=C.length;w<S;w++)for(_=C[w],W=Q[w],V=0,U=_.length;V<U;V++)R=A(_[V],W[V],L),E?$(R.x,R.y+g[s-1].y,g[s-1].x+N):$(R.x,R.y,l+N)}function X(t,e){var n,i;for(V=t.length;--V>=0;){n=V,(i=V-1)<0&&(i=t.length-1);var r=0,a=s+2*d;for(r=0;r<a;r++){var o=z*r,l=z*(r+1);J(e+n+o,e+i+o,e+i+l,e+n+l)}}}function $(t,e,n){a.push(t),a.push(e),a.push(n)}function Z(t,e,r){K(t),K(e),K(r);var a=i.length/3,o=m.generateTopUV(n,i,a-3,a-2,a-1);tt(o[0]),tt(o[1]),tt(o[2])}function J(t,e,r,a){K(t),K(e),K(a),K(e),K(r),K(a);var o=i.length/3,s=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);tt(s[0]),tt(s[1]),tt(s[3]),tt(s[1]),tt(s[2]),tt(s[3])}function K(t){i.push(a[3*t+0]),i.push(a[3*t+1]),i.push(a[3*t+2])}function tt(t){r.push(t.x),r.push(t.y)}!function(){var t=i.length/3;if(u){var e=0,r=z*e;for(V=0;V<B;V++)Z((D=k[V])[2]+r,D[1]+r,D[0]+r);for(r=z*(e=s+2*d),V=0;V<B;V++)Z((D=k[V])[0]+r,D[1]+r,D[2]+r)}else{for(V=0;V<B;V++)Z((D=k[V])[2],D[1],D[0]);for(V=0;V<B;V++)Z((D=k[V])[0]+z*s,D[1]+z*s,D[2]+z*s)}n.addGroup(t,i.length/3-t,0)}(),function(){var t=i.length/3,e=0;for(X(P,e),e+=P.length,w=0,S=C.length;w<S;w++)X(_=C[w],e),e+=_.length;n.addGroup(t,i.length/3-t,1)}()}this.addAttribute("position",new Ji(i,3)),this.addAttribute("uv",new Ji(r,2)),this.computeVertexNormals()}Wl.prototype=Object.create(Nr.prototype),Wl.prototype.constructor=Wl,Wl.prototype.toJSON=function(){var t=Nr.prototype.toJSON.call(this);return Yl(this.parameters.shapes,this.parameters.options,t)},ql.prototype=Object.create(ur.prototype),ql.prototype.constructor=ql,ql.prototype.toJSON=function(){var t=ur.prototype.toJSON.call(this);return Yl(this.parameters.shapes,this.parameters.options,t)};var Ql={generateTopUV:function(t,e,n,i,r){var a=e[3*n],o=e[3*n+1],s=e[3*i],l=e[3*i+1],u=e[3*r],c=e[3*r+1];return[new hn(a,o),new hn(s,l),new hn(u,c)]},generateSideWallUV:function(t,e,n,i,r,a){var o=e[3*n],s=e[3*n+1],l=e[3*n+2],u=e[3*i],c=e[3*i+1],h=e[3*i+2],f=e[3*r],d=e[3*r+1],p=e[3*r+2],m=e[3*a],g=e[3*a+1],v=e[3*a+2];return Math.abs(s-c)<.01?[new hn(o,1-l),new hn(u,1-h),new hn(f,1-p),new hn(m,1-v)]:[new hn(s,1-l),new hn(c,1-h),new hn(d,1-p),new hn(g,1-v)]}};function Yl(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Xl(t,e){Nr.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new $l(t,e)),this.mergeVertices()}function $l(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Nr;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),ql.call(this,i,e),this.type="TextBufferGeometry"}function Zl(t,e,n,i,r,a,o){Nr.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Jl(t,e,n,i,r,a,o)),this.mergeVertices()}function Jl(t,e,n,i,r,a,o){ur.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,l,u=Math.min(a+o,Math.PI),c=0,h=[],f=new mn,d=new mn,p=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var y=[],b=l/n,x=0;for(0==l&&0==a?x=.5/e:l==n&&u==Math.PI&&(x=-.5/e),s=0;s<=e;s++){var _=s/e;f.x=-t*Math.cos(i+_*r)*Math.sin(a+b*o),f.y=t*Math.cos(a+b*o),f.z=t*Math.sin(i+_*r)*Math.sin(a+b*o),m.push(f.x,f.y,f.z),d.copy(f).normalize(),g.push(d.x,d.y,d.z),v.push(_+x,1-b),y.push(c++)}h.push(y)}for(l=0;l<n;l++)for(s=0;s<e;s++){var w=h[l][s+1],S=h[l][s],E=h[l+1][s],M=h[l+1][s+1];(0!==l||a>0)&&p.push(w,S,M),(l!==n-1||u<Math.PI)&&p.push(S,E,M)}this.setIndex(p),this.addAttribute("position",new Ji(m,3)),this.addAttribute("normal",new Ji(g,3)),this.addAttribute("uv",new Ji(v,2))}function Kl(t,e,n,i,r,a){Nr.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new tu(t,e,n,i,r,a)),this.mergeVertices()}function tu(t,e,n,i,r,a){ur.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},t=t||.5,e=e||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,l,u=[],c=[],h=[],f=[],d=t,p=(e-t)/(i=void 0!==i?Math.max(1,i):1),m=new mn,g=new hn;for(s=0;s<=i;s++){for(l=0;l<=n;l++)o=r+l/n*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),c.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/e+1)/2,g.y=(m.y/e+1)/2,f.push(g.x,g.y);d+=p}for(s=0;s<i;s++){var v=s*(n+1);for(l=0;l<n;l++){var y=o=l+v,b=o+n+1,x=o+n+2,_=o+1;u.push(y,b,_),u.push(b,x,_)}}this.setIndex(u),this.addAttribute("position",new Ji(c,3)),this.addAttribute("normal",new Ji(h,3)),this.addAttribute("uv",new Ji(f,2))}function eu(t,e,n,i){Nr.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new nu(t,e,n,i)),this.mergeVertices()}function nu(t,e,n,i){ur.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=cn.clamp(i,0,2*Math.PI);var r,a,o,s=[],l=[],u=[],c=1/e,h=new mn,f=new hn;for(a=0;a<=e;a++){var d=n+a*c*i,p=Math.sin(d),m=Math.cos(d);for(o=0;o<=t.length-1;o++)h.x=t[o].x*p,h.y=t[o].y,h.z=t[o].x*m,l.push(h.x,h.y,h.z),f.x=a/e,f.y=o/(t.length-1),u.push(f.x,f.y)}for(a=0;a<e;a++)for(o=0;o<t.length-1;o++){var g=r=o+a*t.length,v=r+t.length,y=r+t.length+1,b=r+1;s.push(g,v,b),s.push(v,y,b)}if(this.setIndex(s),this.addAttribute("position",new Ji(l,3)),this.addAttribute("uv",new Ji(u,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,_=new mn,w=new mn,S=new mn;for(r=e*t.length*3,a=0,o=0;a<t.length;a++,o+=3)_.x=x[o+0],_.y=x[o+1],_.z=x[o+2],w.x=x[r+o+0],w.y=x[r+o+1],w.z=x[r+o+2],S.addVectors(_,w).normalize(),x[o+0]=x[r+o+0]=S.x,x[o+1]=x[r+o+1]=S.y,x[o+2]=x[r+o+2]=S.z}}function iu(t,e){Nr.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new ru(t,e)),this.mergeVertices()}function ru(t,e){ur.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(t))u(t);else for(var l=0;l<t.length;l++)u(t[l]),this.addGroup(o,s,l),o+=s,s=0;function u(t){var o,l,u,c=i.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;for(!1===Ul.isClockWise(f)&&(f=f.reverse()),o=0,l=d.length;o<l;o++)u=d[o],!0===Ul.isClockWise(u)&&(d[o]=u.reverse());var p=Ul.triangulateShape(f,d);for(o=0,l=d.length;o<l;o++)u=d[o],f=f.concat(u);for(o=0,l=f.length;o<l;o++){var m=f[o];i.push(m.x,m.y,0),r.push(0,0,1),a.push(m.x,m.y)}for(o=0,l=p.length;o<l;o++){var g=p[o],v=g[0]+c,y=g[1]+c,b=g[2]+c;n.push(v,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new Ji(i,3)),this.addAttribute("normal",new Ji(r,3)),this.addAttribute("uv",new Ji(a,2))}function au(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function ou(t,e){ur.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,a,o=[],s=Math.cos(cn.DEG2RAD*e),l=[0,0],u={},c=["a","b","c"];t.isBufferGeometry?(a=new Nr).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,f=a.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],g=0;g<3;g++)n=m[c[g]],i=m[c[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===u[r=l[0]+","+l[1]]?u[r]={index1:l[0],index2:l[1],face1:d,face2:void 0}:u[r].face2=d;for(r in u){var v=u[r];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var y=h[v.index1];o.push(y.x,y.y,y.z),y=h[v.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new Ji(o,3))}function su(t,e,n,i,r,a,o,s){Nr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new lu(t,e,n,i,r,a,o,s)),this.mergeVertices()}function lu(t,e,n,i,r,a,o,s){ur.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],h=[],f=[],d=0,p=[],m=n/2,g=0;function v(n){var r,a,p,v=new hn,y=new mn,b=0,x=!0===n?t:e,_=!0===n?1:-1;for(a=d,r=1;r<=i;r++)c.push(0,m*_,0),h.push(0,_,0),f.push(.5,.5),d++;for(p=d,r=0;r<=i;r++){var w=r/i*s+o,S=Math.cos(w),E=Math.sin(w);y.x=x*E,y.y=m*_,y.z=x*S,c.push(y.x,y.y,y.z),h.push(0,_,0),v.x=.5*S+.5,v.y=.5*E*_+.5,f.push(v.x,v.y),d++}for(r=0;r<i;r++){var M=a+r,T=p+r;!0===n?u.push(T,T+1,M):u.push(T+1,T,M),b+=3}l.addGroup(g,b,!0===n?1:2),g+=b}!function(){var a,v,y=new mn,b=new mn,x=0,_=(e-t)/n;for(v=0;v<=r;v++){var w=[],S=v/r,E=S*(e-t)+t;for(a=0;a<=i;a++){var M=a/i,T=M*s+o,C=Math.sin(T),k=Math.cos(T);b.x=E*C,b.y=-S*n+m,b.z=E*k,c.push(b.x,b.y,b.z),y.set(C,_,k).normalize(),h.push(y.x,y.y,y.z),f.push(M,1-S),w.push(d++)}p.push(w)}for(a=0;a<i;a++)for(v=0;v<r;v++){var P=p[v][a],A=p[v+1][a],O=p[v+1][a+1],L=p[v][a+1];u.push(P,A,L),u.push(A,O,L),x+=6}l.addGroup(g,x,0),g+=x}(),!1===a&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(u),this.addAttribute("position",new Ji(c,3)),this.addAttribute("normal",new Ji(h,3)),this.addAttribute("uv",new Ji(f,2))}function uu(t,e,n,i,r,a,o){su.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function cu(t,e,n,i,r,a,o){lu.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function hu(t,e,n,i){Nr.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new fu(t,e,n,i)),this.mergeVertices()}function fu(t,e,n,i){ur.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],s=[],l=[],u=[],c=new mn,h=new hn;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,r=3;a<=e;a++,r+=3){var f=n+a/e*i;c.x=t*Math.cos(f),c.y=t*Math.sin(f),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[r]/t+1)/2,h.y=(s[r+1]/t+1)/2,u.push(h.x,h.y)}for(r=1;r<=e;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new Ji(s,3)),this.addAttribute("normal",new Ji(l,3)),this.addAttribute("uv",new Ji(u,2))}Xl.prototype=Object.create(Nr.prototype),Xl.prototype.constructor=Xl,$l.prototype=Object.create(ql.prototype),$l.prototype.constructor=$l,Zl.prototype=Object.create(Nr.prototype),Zl.prototype.constructor=Zl,Jl.prototype=Object.create(ur.prototype),Jl.prototype.constructor=Jl,Kl.prototype=Object.create(Nr.prototype),Kl.prototype.constructor=Kl,tu.prototype=Object.create(ur.prototype),tu.prototype.constructor=tu,eu.prototype=Object.create(Nr.prototype),eu.prototype.constructor=eu,nu.prototype=Object.create(ur.prototype),nu.prototype.constructor=nu,iu.prototype=Object.create(Nr.prototype),iu.prototype.constructor=iu,iu.prototype.toJSON=function(){var t=Nr.prototype.toJSON.call(this);return au(this.parameters.shapes,t)},ru.prototype=Object.create(ur.prototype),ru.prototype.constructor=ru,ru.prototype.toJSON=function(){var t=ur.prototype.toJSON.call(this);return au(this.parameters.shapes,t)},ou.prototype=Object.create(ur.prototype),ou.prototype.constructor=ou,su.prototype=Object.create(Nr.prototype),su.prototype.constructor=su,lu.prototype=Object.create(ur.prototype),lu.prototype.constructor=lu,uu.prototype=Object.create(su.prototype),uu.prototype.constructor=uu,cu.prototype=Object.create(lu.prototype),cu.prototype.constructor=cu,hu.prototype=Object.create(Nr.prototype),hu.prototype.constructor=hu,fu.prototype=Object.create(ur.prototype),fu.prototype.constructor=fu;var du=Object.freeze({WireframeGeometry:el,ParametricGeometry:nl,ParametricBufferGeometry:il,TetrahedronGeometry:ol,TetrahedronBufferGeometry:sl,OctahedronGeometry:ll,OctahedronBufferGeometry:ul,IcosahedronGeometry:cl,IcosahedronBufferGeometry:hl,DodecahedronGeometry:fl,DodecahedronBufferGeometry:dl,PolyhedronGeometry:rl,PolyhedronBufferGeometry:al,TubeGeometry:pl,TubeBufferGeometry:ml,TorusKnotGeometry:gl,TorusKnotBufferGeometry:vl,TorusGeometry:yl,TorusBufferGeometry:bl,TextGeometry:Xl,TextBufferGeometry:$l,SphereGeometry:Zl,SphereBufferGeometry:Jl,RingGeometry:Kl,RingBufferGeometry:tu,PlaneGeometry:la,PlaneBufferGeometry:ua,LatheGeometry:eu,LatheBufferGeometry:nu,ShapeGeometry:iu,ShapeBufferGeometry:ru,ExtrudeGeometry:Wl,ExtrudeBufferGeometry:ql,EdgesGeometry:ou,ConeGeometry:uu,ConeBufferGeometry:cu,CylinderGeometry:su,CylinderBufferGeometry:lu,CircleGeometry:hu,CircleBufferGeometry:fu,BoxGeometry:Rr,BoxBufferGeometry:Dr});function pu(t){Ui.call(this),this.type="ShadowMaterial",this.color=new Di(0),this.transparent=!0,this.setValues(t)}function mu(t){Ur.call(this,t),this.type="RawShaderMaterial"}function gu(t){Ui.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Di(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vu(t){gu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new hn(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function yu(t){Ui.call(this),this.type="MeshPhongMaterial",this.color=new Di(16777215),this.specular=new Di(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function bu(t){yu.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function xu(t){Ui.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _u(t){Ui.call(this),this.type="MeshLambertMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function wu(t){Ui.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Di(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Su(t){Is.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}pu.prototype=Object.create(Ui.prototype),pu.prototype.constructor=pu,pu.prototype.isShadowMaterial=!0,pu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this},mu.prototype=Object.create(Ur.prototype),mu.prototype.constructor=mu,mu.prototype.isRawShaderMaterial=!0,gu.prototype=Object.create(Ui.prototype),gu.prototype.constructor=gu,gu.prototype.isMeshStandardMaterial=!0,gu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vu.prototype=Object.create(gu.prototype),vu.prototype.constructor=vu,vu.prototype.isMeshPhysicalMaterial=!0,vu.prototype.copy=function(t){return gu.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new Di).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},yu.prototype=Object.create(Ui.prototype),yu.prototype.constructor=yu,yu.prototype.isMeshPhongMaterial=!0,yu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bu.prototype=Object.create(yu.prototype),bu.prototype.constructor=bu,bu.prototype.isMeshToonMaterial=!0,bu.prototype.copy=function(t){return yu.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},xu.prototype=Object.create(Ui.prototype),xu.prototype.constructor=xu,xu.prototype.isMeshNormalMaterial=!0,xu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_u.prototype=Object.create(Ui.prototype),_u.prototype.constructor=_u,_u.prototype.isMeshLambertMaterial=!0,_u.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},wu.prototype=Object.create(Ui.prototype),wu.prototype.constructor=wu,wu.prototype.isMeshMatcapMaterial=!0,wu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Su.prototype=Object.create(Is.prototype),Su.prototype.constructor=Su,Su.prototype.isLineDashedMaterial=!0,Su.prototype.copy=function(t){return Is.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Eu=Object.freeze({ShadowMaterial:pu,SpriteMaterial:cs,RawShaderMaterial:mu,ShaderMaterial:Ur,PointsMaterial:Gs,MeshPhysicalMaterial:vu,MeshStandardMaterial:gu,MeshPhongMaterial:yu,MeshToonMaterial:bu,MeshNormalMaterial:xu,MeshLambertMaterial:_u,MeshDepthMaterial:Ho,MeshDistanceMaterial:Go,MeshBasicMaterial:Hi,MeshMatcapMaterial:wu,LineDashedMaterial:Su,LineBasicMaterial:Is,Material:Ui}),Mu={arraySlice:function(t,e,n){return Mu.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),a=t[r++]}while(void 0!==a)}}};function Tu(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Cu(t,e,n,i){Tu.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ku(t,e,n,i){Tu.call(this,t,e,n,i)}function Pu(t,e,n,i){Tu.call(this,t,e,n,i)}function Au(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Mu.convertArray(e,this.TimeBufferType),this.values=Mu.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Ou(t,e,n){Au.call(this,t,e,n)}function Lu(t,e,n,i){Au.call(this,t,e,n,i)}function Iu(t,e,n,i){Au.call(this,t,e,n,i)}function Nu(t,e,n,i){Tu.call(this,t,e,n,i)}function Ru(t,e,n,i){Au.call(this,t,e,n,i)}function Du(t,e,n,i){Au.call(this,t,e,n,i)}function zu(t,e,n,i){Au.call(this,t,e,n,i)}function Bu(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=cn.generateUUID(),this.duration<0&&this.resetDuration()}function Fu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Iu;case"vector":case"vector2":case"vector3":case"vector4":return zu;case"color":return Lu;case"quaternion":return Ru;case"bool":case"boolean":return Ou;case"string":return Du}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];Mu.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Tu.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}a=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,t>=(r=e[--n-1]))break e}a=n,n=0}for(;n<a;){var l=n+a>>>1;t<e[l]?a=l:n=l+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Tu.prototype,{beforeStart_:Tu.prototype.copySampleValue_,afterEnd_:Tu.prototype.copySampleValue_}),Cu.prototype=Object.assign(Object.create(Tu.prototype),{constructor:Cu,DefaultSettings_:{endingStart:Ce,endingEnd:Ce},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case ke:r=t,o=2*e-n;break;case Pe:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ke:a=t,s=2*n-e;break;case Pe:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}var l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(i-e),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,x=0;x!==o;++x)r[x]=g*a[u+x]+v*a[l+x]+y*a[s+x]+b*a[c+x];return r}}),ku.prototype=Object.assign(Object.create(Tu.prototype),{constructor:ku,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=(n-e)/(i-e),c=1-u,h=0;h!==o;++h)r[h]=a[l+h]*c+a[s+h]*u;return r}}),Pu.prototype=Object.assign(Object.create(Tu.prototype),{constructor:Pu,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Au,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Mu.convertArray(t.times,Array),values:Mu.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Au.prototype,{constructor:Au,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Me,InterpolantFactoryMethodDiscrete:function(t){return new Pu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new ku(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Cu(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Ee:e=this.InterpolantFactoryMethodDiscrete;break;case Me:e=this.InterpolantFactoryMethodLinear;break;case Te:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ee;case this.InterpolantFactoryMethodLinear:return Me;case this.InterpolantFactoryMethodSmooth:return Te}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Mu.arraySlice(n,r,a),this.values=Mu.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==i&&Mu.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=this.getInterpolation()===Te,r=1,a=t.length-1,o=1;o<a;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(i)s=!0;else for(var u=o*n,c=u-n,h=u+n,f=0;f!==n;++f){var d=e[u+f];if(d!==e[c+f]||d!==e[h+f]){s=!0;break}}if(s){if(o!==r){t[r]=t[o];var p=o*n,m=r*n;for(f=0;f!==n;++f)e[m+f]=e[p+f]}++r}}if(a>0){t[r]=t[a];for(p=a*n,m=r*n,f=0;f!==n;++f)e[m+f]=e[p+f];++r}return r!==t.length&&(this.times=Mu.arraySlice(t,0,r),this.values=Mu.arraySlice(e,0,r*n)),this},clone:function(){var t=Mu.arraySlice(this.times,0),e=Mu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),Ou.prototype=Object.assign(Object.create(Au.prototype),{constructor:Ou,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Lu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Lu,ValueTypeName:"color"}),Iu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Iu,ValueTypeName:"number"}),Nu.prototype=Object.assign(Object.create(Tu.prototype),{constructor:Nu,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=(n-e)/(i-e),u=s+o;s!==u;s+=4)fn.slerpFlat(r,0,a,s-o,a,s,l);return r}}),Ru.prototype=Object.assign(Object.create(Au.prototype),{constructor:Ru,ValueTypeName:"quaternion",DefaultInterpolation:Me,InterpolantFactoryMethodLinear:function(t){return new Nu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Du.prototype=Object.assign(Object.create(Au.prototype),{constructor:Du,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),zu.prototype=Object.assign(Object.create(Au.prototype),{constructor:zu,ValueTypeName:"vector"}),Object.assign(Bu,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(Fu(n[r]).scale(i));return new Bu(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,a=n.length;r!==a;++r)e.push(Au.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=Mu.getKeyframeOrder(s);s=Mu.sortedArray(s,1,u),l=Mu.sortedArray(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new Iu(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/n))}return new Bu(t,-1,a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(r);if(l&&l.length>1){var u=i[h=l[1]];u||(i[h]=u=[]),u.push(s)}}var c=[];for(var h in i)c.push(Bu.CreateFromMorphTargetSequence(h,i[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];Mu.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var f=0;f<u[h].morphTargets.length;f++)c[u[h].morphTargets[f]]=-1;for(var d in c){var p=[],m=[];for(f=0;f!==u[h].morphTargets.length;++f){var g=u[h];p.push(g.time),m.push(g.morphTarget===d?1:0)}i.push(new Iu(".morphTargetInfluence["+d+"]",p,m))}a=c.length*(o||1)}else{var v=".bones["+e[l].name+"]";n(zu,v+".position",u,"pos",i),n(Ru,v+".quaternion",u,"rot",i),n(zu,v+".scale",u,"scl",i)}}return 0===i.length?null:new Bu(r,a,i)}}),Object.assign(Bu.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Bu(this.name,this.duration,t)}});var ju={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Vu(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var Uu=new Vu;function Hu(t){this.manager=void 0!==t?t:Uu,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Hu.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),Hu.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],a=e[n+1];if(r.test(t))return a}return null}};var Gu={};function Wu(t){Hu.call(this,t)}function qu(t){Hu.call(this,t)}function Qu(t){Hu.call(this,t),this._parser=null}function Yu(t){Hu.call(this,t),this._parser=null}function Xu(t){Hu.call(this,t)}function $u(t){Hu.call(this,t)}function Zu(t){Hu.call(this,t)}function Ju(){this.type="Curve",this.arcLengthDivisions=200}function Ku(t,e,n,i,r,a,o,s){Ju.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function tc(t,e,n,i,r,a){Ku.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"}function ec(){var t=0,e=0,n=0,i=0;function r(r,a,o,s){t=r,e=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(t,e,n,i,a){r(e,n,a*(n-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,a,o,s){var l=(e-t)/a-(n-t)/(a+o)+(n-e)/o,u=(n-e)/o-(i-e)/(o+s)+(i-n)/s;r(e,n,l*=o,u*=o)},calc:function(r){var a=r*r;return t+e*r+n*a+i*(a*r)}}}Wu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Wu,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=ju.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(void 0===Gu[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],l=!!o[2],u=o[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(u.length),d=0;d<u.length;d++)f[d]=u.charCodeAt(d);c="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var p=new DOMParser;c=p.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){e&&e(c),r.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{Gu[t]=[],Gu[t].push({onLoad:e,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",t,!0),m.addEventListener("load",(function(e){var n=this.response;ju.add(t,n);var i=Gu[t];if(delete Gu[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=i.length;a<o;a++){(s=i[a]).onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(a=0,o=i.length;a<o;a++){var s;(s=i[a]).onError&&s.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}}),!1),m.addEventListener("progress",(function(e){for(var n=Gu[t],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(e)}}),!1),m.addEventListener("error",(function(e){var n=Gu[t];delete Gu[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),m.addEventListener("abort",(function(e){var n=Gu[t];delete Gu[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(t),m}Gu[t].push({onLoad:e,onProgress:n,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),qu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:qu,load:function(t,e,n,i){var r=this,a=new Wu(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=Bu.parse(t[n]);e.push(i)}return e}}),Qu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Qu,load:function(t,e,n,i){var r=this,a=[],o=new Js;o.image=a;var s=new Wu(this.manager);function l(l){s.load(t[l],(function(t){var n=r._parser(t,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Tt),o.format=n.format,o.needsUpdate=!0,e&&e(o))}),n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,c=0,h=t.length;c<h;++c)l(c);else s.load(t,(function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Tt),o.format=n.format,o.needsUpdate=!0,e&&e(o)}),n,i);return o}}),Yu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Yu,load:function(t,e,n,i){var r=this,a=new Xr,o=new Wu(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){var n=r._parser(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:bt,a.wrapT=void 0!==n.wrapT?n.wrapT:bt,a.magFilter=void 0!==n.magFilter?n.magFilter:Tt,a.minFilter=void 0!==n.minFilter?n.minFilter:Pt,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=Tt),a.needsUpdate=!0,e&&e(a,n))}),n,i),a}}),Xu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Xu,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=ju.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),ju.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}),$u.prototype=Object.assign(Object.create(Hu.prototype),{constructor:$u,load:function(t,e,n,i){var r=new _a,a=new Xu(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(t[n],(function(t){r.images[n]=t,6===++o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(var l=0;l<t.length;++l)s(l);return r}}),Zu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Zu,load:function(t,e,n,i){var r=new _n,a=new Xu(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(n){r.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?Gt:Wt,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}),Object.assign(Ju.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=t;n++)a+=(e=this.getPoint(n/t)).distanceTo(r),i.push(a),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,a=i.length;n=e||t*i[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(a-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,a=new mn,o=[],s=[],l=[],u=new mn,c=new Ln;for(n=0;n<=t;n++)i=n/t,o[n]=this.getTangentAt(i),o[n].normalize();s[0]=new mn,l[0]=new mn;var h=Number.MAX_VALUE,f=Math.abs(o[0].x),d=Math.abs(o[0].y),p=Math.abs(o[0].z);for(f<=h&&(h=f,a.set(1,0,0)),d<=h&&(h=d,a.set(0,1,0)),p<=h&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),l[0].crossVectors(o[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(cn.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,r))),l[n].crossVectors(o[n],s[n]);if(!0===e)for(r=Math.acos(cn.clamp(s[0].dot(s[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(s[0],s[t]))>0&&(r=-r),n=1;n<=t;n++)s[n].applyMatrix4(c.makeRotationAxis(o[n],r*n)),l[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Ku.prototype=Object.create(Ju.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isEllipseCurve=!0,Ku.prototype.getPoint=function(t,e){for(var n=e||new hn,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=l-this.aY;s=h*u-f*c+this.aX,l=h*c+f*u+this.aY}return n.set(s,l)},Ku.prototype.copy=function(t){return Ju.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ku.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ku.prototype.fromJSON=function(t){return Ju.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},tc.prototype=Object.create(Ku.prototype),tc.prototype.constructor=tc,tc.prototype.isArcCurve=!0;var nc=new mn,ic=new ec,rc=new ec,ac=new ec;function oc(t,e,n,i){Ju.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function sc(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t;return(2*n-2*i+a+o)*(t*s)+(-3*n+3*i-2*a-o)*s+a*t+n}function lc(t,e,n,i){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function uc(t,e,n,i,r){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}function cc(t,e,n,i){Ju.call(this),this.type="CubicBezierCurve",this.v0=t||new hn,this.v1=e||new hn,this.v2=n||new hn,this.v3=i||new hn}function hc(t,e,n,i){Ju.call(this),this.type="CubicBezierCurve3",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn,this.v3=i||new mn}function fc(t,e){Ju.call(this),this.type="LineCurve",this.v1=t||new hn,this.v2=e||new hn}function dc(t,e){Ju.call(this),this.type="LineCurve3",this.v1=t||new mn,this.v2=e||new mn}function pc(t,e,n){Ju.call(this),this.type="QuadraticBezierCurve",this.v0=t||new hn,this.v1=e||new hn,this.v2=n||new hn}function mc(t,e,n){Ju.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn}function gc(t){Ju.call(this),this.type="SplineCurve",this.points=t||[]}oc.prototype=Object.create(Ju.prototype),oc.prototype.constructor=oc,oc.prototype.isCatmullRomCurve3=!0,oc.prototype.getPoint=function(t,e){var n,i,r,a,o=e||new mn,s=this.points,l=s.length,u=(l-(this.closed?0:1))*t,c=Math.floor(u),h=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===h&&c===l-1&&(c=l-2,h=1),this.closed||c>0?n=s[(c-1)%l]:(nc.subVectors(s[0],s[1]).add(s[0]),n=nc),i=s[c%l],r=s[(c+1)%l],this.closed||c+2<l?a=s[(c+2)%l]:(nc.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=nc),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(i),f),p=Math.pow(i.distanceToSquared(r),f),m=Math.pow(r.distanceToSquared(a),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),ic.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,d,p,m),rc.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,d,p,m),ac.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,d,p,m)}else"catmullrom"===this.curveType&&(ic.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),rc.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),ac.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(ic.calc(h),rc.calc(h),ac.calc(h)),o},oc.prototype.copy=function(t){Ju.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},oc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},oc.prototype.fromJSON=function(t){Ju.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new mn).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},cc.prototype=Object.create(Ju.prototype),cc.prototype.constructor=cc,cc.prototype.isCubicBezierCurve=!0,cc.prototype.getPoint=function(t,e){var n=e||new hn,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(uc(t,i.x,r.x,a.x,o.x),uc(t,i.y,r.y,a.y,o.y)),n},cc.prototype.copy=function(t){return Ju.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},cc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},cc.prototype.fromJSON=function(t){return Ju.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},hc.prototype=Object.create(Ju.prototype),hc.prototype.constructor=hc,hc.prototype.isCubicBezierCurve3=!0,hc.prototype.getPoint=function(t,e){var n=e||new mn,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(uc(t,i.x,r.x,a.x,o.x),uc(t,i.y,r.y,a.y,o.y),uc(t,i.z,r.z,a.z,o.z)),n},hc.prototype.copy=function(t){return Ju.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},hc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},hc.prototype.fromJSON=function(t){return Ju.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},fc.prototype=Object.create(Ju.prototype),fc.prototype.constructor=fc,fc.prototype.isLineCurve=!0,fc.prototype.getPoint=function(t,e){var n=e||new hn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},fc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},fc.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},fc.prototype.copy=function(t){return Ju.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},fc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},fc.prototype.fromJSON=function(t){return Ju.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},dc.prototype=Object.create(Ju.prototype),dc.prototype.constructor=dc,dc.prototype.isLineCurve3=!0,dc.prototype.getPoint=function(t,e){var n=e||new mn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},dc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},dc.prototype.copy=function(t){return Ju.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},dc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},dc.prototype.fromJSON=function(t){return Ju.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},pc.prototype=Object.create(Ju.prototype),pc.prototype.constructor=pc,pc.prototype.isQuadraticBezierCurve=!0,pc.prototype.getPoint=function(t,e){var n=e||new hn,i=this.v0,r=this.v1,a=this.v2;return n.set(lc(t,i.x,r.x,a.x),lc(t,i.y,r.y,a.y)),n},pc.prototype.copy=function(t){return Ju.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},pc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},pc.prototype.fromJSON=function(t){return Ju.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},mc.prototype=Object.create(Ju.prototype),mc.prototype.constructor=mc,mc.prototype.isQuadraticBezierCurve3=!0,mc.prototype.getPoint=function(t,e){var n=e||new mn,i=this.v0,r=this.v1,a=this.v2;return n.set(lc(t,i.x,r.x,a.x),lc(t,i.y,r.y,a.y),lc(t,i.z,r.z,a.z)),n},mc.prototype.copy=function(t){return Ju.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},mc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},mc.prototype.fromJSON=function(t){return Ju.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},gc.prototype=Object.create(Ju.prototype),gc.prototype.constructor=gc,gc.prototype.isSplineCurve=!0,gc.prototype.getPoint=function(t,e){var n=e||new hn,i=this.points,r=(i.length-1)*t,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(sc(o,s.x,l.x,u.x,c.x),sc(o,s.y,l.y,u.y,c.y)),n},gc.prototype.copy=function(t){Ju.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},gc.prototype.toJSON=function(){var t=Ju.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},gc.prototype.fromJSON=function(t){Ju.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new hn).fromArray(i))}return this};var vc=Object.freeze({ArcCurve:tc,CatmullRomCurve3:oc,CubicBezierCurve:cc,CubicBezierCurve3:hc,EllipseCurve:Ku,LineCurve:fc,LineCurve3:dc,QuadraticBezierCurve:pc,QuadraticBezierCurve3:mc,SplineCurve:gc});function yc(){Ju.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function bc(t){yc.call(this),this.type="Path",this.currentPoint=new hn,t&&this.setFromPoints(t)}function xc(t){bc.call(this,t),this.uuid=cn.generateUUID(),this.type="Shape",this.holes=[]}function _c(t,e){$n.call(this),this.type="Light",this.color=new Di(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function wc(t,e,n){_c.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy($n.DefaultUp),this.updateMatrix(),this.groundColor=new Di(e)}function Sc(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new hn(512,512),this.map=null,this.mapPass=null,this.matrix=new Ln,this._frustum=new na,this._frameExtents=new hn(1,1),this._viewportCount=1,this._viewports=[new wn(0,0,1,1)]}function Ec(){Sc.call(this,new Gr(50,1,.5,500))}function Mc(t,e,n,i,r,a){_c.call(this,t,e),this.type="SpotLight",this.position.copy($n.DefaultUp),this.updateMatrix(),this.target=new $n,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Ec}function Tc(){Sc.call(this,new Gr(90,1,.5,500)),this._frameExtents=new hn(4,2),this._viewportCount=6,this._viewports=[new wn(2,1,1,1),new wn(0,1,1,1),new wn(3,1,1,1),new wn(1,1,1,1),new wn(3,0,1,1),new wn(1,0,1,1)],this._cubeDirections=[new mn(1,0,0),new mn(-1,0,0),new mn(0,0,1),new mn(0,0,-1),new mn(0,1,0),new mn(0,-1,0)],this._cubeUps=[new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,0,1),new mn(0,0,-1)]}function Cc(t,e,n,i){_c.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Tc}function kc(t,e,n,i,r,a){Hr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Pc(){Sc.call(this,new kc(-5,5,5,-5,.5,500))}function Ac(t,e){_c.call(this,t,e),this.type="DirectionalLight",this.position.copy($n.DefaultUp),this.updateMatrix(),this.target=new $n,this.shadow=new Pc}function Oc(t,e){_c.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Lc(t,e,n,i){_c.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Ic(t){Hu.call(this,t),this.textures={}}yc.prototype=Object.assign(Object.create(Ju.prototype),{constructor:yc,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new fc(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Ju.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ju.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Ju.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new vc[i.type]).fromJSON(i))}return this}}),bc.prototype=Object.assign(Object.create(yc.prototype),{constructor:bc,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new fc(this.currentPoint.clone(),new hn(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new pc(this.currentPoint.clone(),new hn(t,e),new hn(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,r,a){var o=new cc(this.currentPoint.clone(),new hn(t,e),new hn(n,i),new hn(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(t){var e=new gc([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,n,i,r,a)},absarc:function(t,e,n,i,r,a){this.absellipse(t,e,n,n,i,r,a)},ellipse:function(t,e,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(t+l,e+u,n,i,r,a,o,s)},absellipse:function(t,e,n,i,r,a,o,s){var l=new Ku(t,e,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(t){return yc.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=yc.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return yc.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),xc.prototype=Object.assign(Object.create(bc.prototype),{constructor:xc,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){bc.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=bc.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){bc.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new bc).fromJSON(i))}return this}}),_c.prototype=Object.assign(Object.create($n.prototype),{constructor:_c,isLight:!0,copy:function(t){return $n.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=$n.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),wc.prototype=Object.assign(Object.create(_c.prototype),{constructor:wc,isHemisphereLight:!0,copy:function(t){return _c.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Sc.prototype,{_projScreenMatrix:new Ln,_lightPositionWorld:new mn,_lookTarget:new mn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ec.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Ec,isSpotLightShadow:!0,updateMatrices:function(t,e,n){var i=this.camera,r=2*cn.RAD2DEG*t.angle,a=this.mapSize.width/this.mapSize.height,o=t.distance||i.far;r===i.fov&&a===i.aspect&&o===i.far||(i.fov=r,i.aspect=a,i.far=o,i.updateProjectionMatrix()),Sc.prototype.updateMatrices.call(this,t,e,n)}}),Mc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Mc,isSpotLight:!0,copy:function(t){return _c.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Tc.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Tc,isPointLightShadow:!0,updateMatrices:function(t,e,n){var i=this.camera,r=this.matrix,a=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;a.setFromMatrixPosition(t.matrixWorld),i.position.copy(a),o.copy(i.position),o.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(o),i.updateMatrixWorld(),r.makeTranslation(-a.x,-a.y,-a.z),s.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromMatrix(s)}}),Cc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Cc,isPointLight:!0,copy:function(t){return _c.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),kc.prototype=Object.assign(Object.create(Hr.prototype),{constructor:kc,isOrthographicCamera:!0,copy:function(t,e){return Hr.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(o-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=$n.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Pc.prototype=Object.assign(Object.create(Sc.prototype),{constructor:Pc,isDirectionalLightShadow:!0,updateMatrices:function(t,e,n){Sc.prototype.updateMatrices.call(this,t,e,n)}}),Ac.prototype=Object.assign(Object.create(_c.prototype),{constructor:Ac,isDirectionalLight:!0,copy:function(t){return _c.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Oc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Oc,isAmbientLight:!0}),Lc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Lc,isRectAreaLight:!0,copy:function(t){return _c.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=_c.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Ic.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Ic,load:function(t,e,n,i){var r=this,a=new Wu(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new Eu[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var r in t.uniforms){var a=t.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=(new Di).setHex(a.value);break;case"v2":i.uniforms[r].value=(new hn).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new mn).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new wn).fromArray(a.value);break;case"m3":i.uniforms[r].value=(new yn).fromArray(a.value);case"m4":i.uniforms[r].value=(new Ln).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new hn).fromArray(s)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new hn).fromArray(t.clearcoatNormalScale)),i},setTextures:function(t){return this.textures=t,this}});var Nc={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Rc(){ur.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Dc(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Gi.call(this,t,e,n),this.meshPerAttribute=i||1}function zc(t){Hu.call(this,t)}Rc.prototype=Object.assign(Object.create(ur.prototype),{constructor:Rc,isInstancedBufferGeometry:!0,copy:function(t){return ur.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=ur.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Dc.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Dc,isInstancedBufferAttribute:!0,copy:function(t){return Gi.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Gi.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),zc.prototype=Object.assign(Object.create(Hu.prototype),{constructor:zc,load:function(t,e,n,i){var r=this,a=new Wu(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new Rc:new ur,n=t.data.index;if(void 0!==n){var i=new Bc[n.type](n.array);e.setIndex(new Gi(i,1))}var r=t.data.attributes;for(var a in r){var o=r[a],s=(i=new Bc[o.type](o.array),new(o.isInstancedBufferAttribute?Dc:Gi)(i,o.itemSize,o.normalized));void 0!==o.name&&(s.name=o.name),e.addAttribute(a,s)}var l=t.data.morphAttributes;if(l)for(var a in l){for(var u=l[a],c=[],h=0,f=u.length;h<f;h++){o=u[h],s=new Gi(i=new Bc[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),c.push(s)}e.morphAttributes[a]=c}var d=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==d){h=0;for(var p=d.length;h!==p;++h){var m=d[h];e.addGroup(m.start,m.count,m.materialIndex)}}var g=t.data.boundingSphere;if(void 0!==g){var v=new mn;void 0!==g.center&&v.fromArray(g.center),e.boundingSphere=new di(v,g.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Bc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Fc(t){Hu.call(this,t)}Fc.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Fc,load:function(t,e,n,i){var r=this,a=""===this.path?Nc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new Wu(r.manager);o.setPath(this.path),o.load(t,(function(n){var a=null;try{a=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,i)},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),a=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new xc).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new zc,r=0,a=t.length;r<a;r++){var o,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new du[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new du[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new du[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new du[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new du[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new du[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new du[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new du[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new du[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new du[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new du[s.type]((new vc[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new du[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new du[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var h=e[s.shapes[u]];l.push(h)}o=new du[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=s.shapes.length;u<c;u++){h=e[s.shapes[u]];l.push(h)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new vc[f.type]).fromJSON(f)),o=new du[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new Ic;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),l.push(n[c.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=Bu.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var a=new Xu(new Vu(e));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var l=t[o],u=l.url;if(Array.isArray(u)){i[l.uuid]=[];for(var c=0,h=u.length;c<h;c++){var f=u[c],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;i[l.uuid].push(r(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;i[l.uuid]=r(d)}}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var o,s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(e[s.image])?new _a(e[s.image]):new _n(e[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,Vc)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Uc),o.wrapT=n(s.wrap[1],Uc)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Hc)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Hc)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),i[s.uuid]=o}return i},parseObject:function(t,e,n){var i;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function a(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new Zn,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new Di(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new ss(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new os(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Gr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new kc(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new Oc(t.color,t.intensity);break;case"DirectionalLight":i=new Ac(t.color,t.intensity);break;case"PointLight":i=new Cc(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new Lc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new Mc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new wc(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(t.geometry),s=a(t.material);i=o.bones&&o.bones.length>0?new ks(o,s):new Cr(o,s),void 0!==t.drawMode&&i.setDrawMode(t.drawMode);break;case"LOD":i=new Cs;break;case"Line":i=new Fs(r(t.geometry),a(t.material),t.mode);break;case"LineLoop":i=new Hs(r(t.geometry),a(t.material));break;case"LineSegments":i=new Us(r(t.geometry),a(t.material));break;case"PointCloud":case"Points":i=new Xs(r(t.geometry),a(t.material));break;case"Sprite":i=new Ss(a(t.material));break;case"Group":i=new Zo;break;default:i=new $n}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,u=0;u<l.length;u++)i.add(this.parseObject(l[u],e,n));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var f=c[h],d=i.getObjectByProperty("uuid",f.object);void 0!==d&&i.addLevel(d,f.distance)}return i}});var jc,Vc={UVMapping:ct,CubeReflectionMapping:ht,CubeRefractionMapping:ft,EquirectangularReflectionMapping:dt,EquirectangularRefractionMapping:pt,SphericalReflectionMapping:mt,CubeUVReflectionMapping:gt,CubeUVRefractionMapping:vt},Uc={RepeatWrapping:yt,ClampToEdgeWrapping:bt,MirroredRepeatWrapping:xt},Hc={NearestFilter:_t,NearestMipmapNearestFilter:wt,NearestMipmapLinearFilter:Et,LinearFilter:Tt,LinearMipmapNearestFilter:Ct,LinearMipmapLinearFilter:Pt};function Gc(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Hu.call(this,t),this.options=void 0}function Wc(){this.type="ShapePath",this.color=new Di,this.subPaths=[],this.currentPath=null}function qc(t){this.type="Font",this.data=t}function Qc(t,e,n,i,r){var a=r.glyphs[t]||r.glyphs["?"];if(a){var o,s,l,u,c,h,f,d,p=new Wc;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":o=m[g++]*e+n,s=m[g++]*e+i,p.moveTo(o,s);break;case"l":o=m[g++]*e+n,s=m[g++]*e+i,p.lineTo(o,s);break;case"q":l=m[g++]*e+n,u=m[g++]*e+i,c=m[g++]*e+n,h=m[g++]*e+i,p.quadraticCurveTo(c,h,l,u);break;case"b":l=m[g++]*e+n,u=m[g++]*e+i,c=m[g++]*e+n,h=m[g++]*e+i,f=m[g++]*e+n,d=m[g++]*e+i,p.bezierCurveTo(c,h,f,d,l,u)}}return{offsetX:a.ha*e,path:p}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".")}function Yc(t){Hu.call(this,t)}Gc.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Gc,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=ju.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)})).then((function(n){ju.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}),Object.assign(Wc.prototype,{moveTo:function(t,e){this.currentPath=new bc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,a){this.currentPath.bezierCurveTo(t,e,n,i,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new xc;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=e[a],l=-l,s=e[r],u=-u),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=u*(t.x-o.x)-l*(t.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i}var r=Ul.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);var o,s,l,u=[];if(1===a.length)return s=a[0],(l=new xc).curves=s.curves,u.push(l),u;var c=!r(a[0].getPoints());c=t?!c:c;var h,f,d=[],p=[],m=[],g=0;p[g]=void 0,m[g]=[];for(var v=0,y=a.length;v<y;v++)o=r(h=(s=a[v]).getPoints()),(o=t?!o:o)?(!c&&p[g]&&g++,p[g]={s:new xc,p:h},p[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!p[0])return n(a);if(p.length>1){for(var b=!1,x=[],_=0,w=p.length;_<w;_++)d[_]=[];for(_=0,w=p.length;_<w;_++)for(var S=m[_],E=0;E<S.length;E++){for(var M=S[E],T=!0,C=0;C<p.length;C++)i(M.p,p[C].p)&&(_!==C&&x.push({froms:_,tos:C,hole:E}),T?(T=!1,d[C].push(M)):b=!0);T&&d[_].push(M)}x.length>0&&(b||(m=d))}v=0;for(var k=p.length;v<k;v++){l=p[v].s,u.push(l);for(var P=0,A=(f=m[v]).length;P<A;P++)l.holes.push(f[P].h)}return u}}),Object.assign(qc.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,l=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)s=0,l-=a;else{var h=Qc(c,r,s,l,n);s+=h.offsetX,o.push(h.path)}}return o}(t,e,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Yc.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Yc,load:function(t,e,n,i){var r=this,a=new Wu(this.manager);a.setPath(this.path),a.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)}),n,i)},parse:function(t){return new qc(t)}});var Xc={getContext:function(){return void 0===jc&&(jc=new(window.AudioContext||window.webkitAudioContext)),jc},setContext:function(t){jc=t}};function $c(t){Hu.call(this,t)}function Zc(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new mn)}function Jc(t,e){_c.call(this,void 0,e),this.sh=void 0!==t?t:new Zc}function Kc(t,e,n){Jc.call(this,void 0,n);var i=(new Di).set(t),r=(new Di).set(e),a=new mn(i.r,i.g,i.b),o=new mn(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}function th(t,e){Jc.call(this,void 0,e);var n=(new Di).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}$c.prototype=Object.assign(Object.create(Hu.prototype),{constructor:$c,load:function(t,e,n,i){var r=new Wu(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,(function(t){var n=t.slice(0);Xc.getContext().decodeAudioData(n,(function(t){e(t)}))}),n,i)}}),Object.assign(Zc.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScale(a[1],.488603*i),e.addScale(a[2],.488603*r),e.addScale(a[3],.488603*n),e.addScale(a[4],n*i*1.092548),e.addScale(a[5],i*r*1.092548),e.addScale(a[6],.315392*(3*r*r-1)),e.addScale(a[7],n*r*1.092548),e.addScale(a[8],.546274*(n*n-i*i)),e},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScale(a[1],1.023328*i),e.addScale(a[2],1.023328*r),e.addScale(a[3],1.023328*n),e.addScale(a[4],.858086*n*i),e.addScale(a[5],.858086*i*r),e.addScale(a[6],.743125*r*r-.247708),e.addScale(a[7],.858086*n*r),e.addScale(a[8],.429043*(n*n-i*i)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}),Object.assign(Zc,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),Jc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Jc,isLightProbe:!0,copy:function(t){return _c.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return _c.prototype.toJSON.call(this,t)}}),Kc.prototype=Object.assign(Object.create(Jc.prototype),{constructor:Kc,isHemisphereLightProbe:!0,copy:function(t){return Jc.prototype.copy.call(this,t),this},toJSON:function(t){return Jc.prototype.toJSON.call(this,t)}}),th.prototype=Object.assign(Object.create(Jc.prototype),{constructor:th,isAmbientLightProbe:!0,copy:function(t){return Jc.prototype.copy.call(this,t),this},toJSON:function(t){return Jc.prototype.toJSON.call(this,t)}});var eh=new Ln,nh=new Ln;function ih(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function rh(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(ih.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,i,r=t.projectionMatrix.clone(),a=e.eyeSep/2,o=a*e.near/e.focus,s=e.near*Math.tan(cn.DEG2RAD*e.fov*.5)/e.zoom;nh.elements[12]=-a,eh.elements[12]=a,n=-s*e.aspect+o,i=s*e.aspect+o,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),n=-s*e.aspect-o,i=s*e.aspect-o,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(nh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(eh)}}),Object.assign(rh.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var ah=new mn,oh=new fn,sh=new mn,lh=new mn;function uh(){$n.call(this),this.type="AudioListener",this.context=Xc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rh}function ch(t){$n.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}uh.prototype=Object.assign(Object.create($n.prototype),{constructor:uh,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){$n.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ah,oh,sh),lh.set(0,0,-1).applyQuaternion(oh),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(ah.x,i),e.positionY.linearRampToValueAtTime(ah.y,i),e.positionZ.linearRampToValueAtTime(ah.z,i),e.forwardX.linearRampToValueAtTime(lh.x,i),e.forwardY.linearRampToValueAtTime(lh.y,i),e.forwardZ.linearRampToValueAtTime(lh.z,i),e.upX.linearRampToValueAtTime(n.x,i),e.upY.linearRampToValueAtTime(n.y,i),e.upZ.linearRampToValueAtTime(n.z,i)}else e.setPosition(ah.x,ah.y,ah.z),e.setOrientation(lh.x,lh.y,lh.z,n.x,n.y,n.z)}}),ch.prototype=Object.assign(Object.create($n.prototype),{constructor:ch,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var hh=new mn,fh=new fn,dh=new mn,ph=new mn;function mh(t){ch.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function gh(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function vh(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}mh.prototype=Object.assign(Object.create(ch.prototype),{constructor:mh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if($n.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(hh,fh,dh),ph.set(0,0,1).applyQuaternion(fh);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(hh.x,n),e.positionY.linearRampToValueAtTime(hh.y,n),e.positionZ.linearRampToValueAtTime(hh.z,n),e.orientationX.linearRampToValueAtTime(ph.x,n),e.orientationY.linearRampToValueAtTime(ph.y,n),e.orientationZ.linearRampToValueAtTime(ph.z,n)}else e.setPosition(hh.x,hh.y,hh.z),e.setOrientation(ph.x,ph.y,ph.z)}}}),Object.assign(gh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(vh.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*e;this._mixBufferRegion(n,i,o,1-r,e)}for(var s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){a.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){fn.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}}});var yh=new RegExp("[\\[\\]\\.:\\/]","g"),bh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",xh=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),_h=/(WCOD+)?/.source.replace("WCOD",bh),wh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Sh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Eh=new RegExp("^"+xh+_h+wh+Sh+"$"),Mh=["material","materials","bones"];function Th(t,e,n){var i=n||Ch.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Ch(t,e,n){this.path=e,this.parsedPath=n||Ch.parseTrackName(e),this.node=Ch.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function kh(){this.uuid=cn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Ph(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,a=new Array(r),o={endingStart:Ce,endingEnd:Ce},s=0;s!==r;++s){var l=i[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=we,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ah(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Oh(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Lh(t,e,n){ls.call(this,t,e),this.meshPerAttribute=n||1}function Ih(t,e,n,i){this.ray=new _i(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Nh(t,e){return t.distance-e.distance}function Rh(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,a=0,o=r.length;a<o;a++)Rh(r[a],e,n,!0)}function Dh(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function zh(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}Object.assign(Th.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Ch,{Composite:Th,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Ch.Composite(t,e,n):new Ch(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(yh,"")},parseTrackName:function(t){var e=Eh.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Mh.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var a=i(r.children);if(a)return a}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(Ch.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Ch.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var s=t[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Ch.prototype,{_getValue_unbound:Ch.prototype.getValue,_setValue_unbound:Ch.prototype.setValue}),Object.assign(kh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],f=h.uuid,d=i[f];if(void 0===d){d=e++,i[f]=d,t.push(h);for(var p=0,m=s;p!==m;++p)o[p].push(new Ch(h,r[p],a[p]))}else if(d<n){l=t[d];var g=--n,v=t[g];i[v.uuid]=d,t[d]=v,i[f]=g,t[g]=h;for(p=0,m=s;p!==m;++p){var y=o[p],b=y[g],x=y[d];y[d]=b,void 0===x&&(x=new Ch(h,r[p],a[p])),y[g]=x}}else t[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=n[l];if(void 0!==u&&u>=e){var c=e++,h=t[c];n[h.uuid]=u,t[u]=h,n[l]=c,t[c]=s;for(var f=0,d=r;f!==d;++f){var p=i[f],m=p[c],g=p[u];p[u]=m,p[c]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var h=--n,f=t[h],d=t[y=--e];i[f.uuid]=c,t[c]=f,i[d.uuid]=h,t[h]=d,t.pop();for(var p=0,m=a;p!==m;++p){var g=(b=r[p])[h],v=b[y];b[c]=g,b[h]=v,b.pop()}}else{var y;i[(d=t[y=--e]).uuid]=c,t[c]=d,t.pop();for(p=0,m=a;p!==m;++p){var b;(b=r[p])[c]=b[y],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[t]=i,a.push(t),o.push(e),r.push(c);for(var h=u,f=s.length;h!==f;++h){var d=s[h];c[h]=new Ch(d,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Ph.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,a=r/i,o=i/r;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,i=this.loop,r=this._loopCount,a=i===Se;if(0===t)return-1===r?e:a&&1==(1&r)?n-e:e;if(i===_e){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var o=Math.floor(e/n);e-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=e;if(a&&1==(1&r))return n-e}return e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=ke,i.endingEnd=ke):(i.endingStart=t?this.zeroSlopeAtStart?ke:Ce:Pe,i.endingEnd=e?this.zeroSlopeAtEnd?ke:Ce:Pe)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}),Ah.prototype=Object.assign(Object.create(i.prototype),{constructor:Ah,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var h=i[c],f=h.name,d=u[f];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;++(d=new vh(Ch.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],a=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new ku(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Bu.findByName(n,t):t,a=null!==r?r.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var u=new Ph(this,r,e);return this._bindAction(u,s),this._addInactiveAction(u,a,i),u},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Bu.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(i,t,r,a)}var s=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,e[u]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Oh.prototype.clone=function(){return new Oh(void 0===this.value.clone?this.value:this.value.clone())},Lh.prototype=Object.assign(Object.create(ls.prototype),{constructor:Lh,isInstancedInterleavedBuffer:!0,copy:function(t){return ls.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Ih.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return Rh(t,this,i,e),i.sort(Nh),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=t.length;r<a;r++)Rh(t[r],this,i,e);return i.sort(Nh),i}}),Object.assign(Dh.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(cn.clamp(e/this.radius,-1,1))),this}}),Object.assign(zh.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var Bh=new hn;function Fh(t,e){this.min=void 0!==t?t:new hn(1/0,1/0),this.max=void 0!==e?e:new hn(-1/0,-1/0)}Object.assign(Fh.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Bh.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new hn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new hn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new hn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new hn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Bh.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var jh=new mn,Vh=new mn;function Uh(t,e){this.start=void 0!==t?t:new mn,this.end=void 0!==e?e:new mn}function Hh(t){$n.call(this),this.material=t,this.render=function(){}}Object.assign(Uh.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new mn),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new mn),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new mn),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){jh.subVectors(t,this.start),Vh.subVectors(this.end,this.start);var n=Vh.dot(Vh),i=Vh.dot(jh)/n;return e&&(i=cn.clamp(i,0,1)),i},closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new mn),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Hh.prototype=Object.create($n.prototype),Hh.prototype.constructor=Hh,Hh.prototype.isImmediateRenderObject=!0;var Gh=new mn,Wh=new mn,qh=new yn,Qh=["a","b","c"];function Yh(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new ur,u=new Ji(2*o*3,3);l.addAttribute("position",u),Us.call(this,l,new Is({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}Yh.prototype=Object.create(Us.prototype),Yh.prototype.constructor=Yh,Yh.prototype.update=function(){this.object.updateMatrixWorld(!0),qh.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++)for(var l=r[o],u=0,c=l.vertexNormals.length;u<c;u++){var h=i[l[Qh[u]]],f=l.vertexNormals[u];Gh.copy(h).applyMatrix4(t),Wh.copy(f).applyMatrix3(qh).normalize().multiplyScalar(this.size).add(Gh),e.setXYZ(a,Gh.x,Gh.y,Gh.z),a+=1,e.setXYZ(a,Wh.x,Wh.y,Wh.z),a+=1}else if(n&&n.isBufferGeometry){var d=n.attributes.position,p=n.attributes.normal;for(a=0,u=0,c=d.count;u<c;u++)Gh.set(d.getX(u),d.getY(u),d.getZ(u)).applyMatrix4(t),Wh.set(p.getX(u),p.getY(u),p.getZ(u)),Wh.applyMatrix3(qh).normalize().multiplyScalar(this.size).add(Gh),e.setXYZ(a,Gh.x,Gh.y,Gh.z),a+=1,e.setXYZ(a,Wh.x,Wh.y,Wh.z),a+=1}e.needsUpdate=!0};var Xh=new mn;function $h(t,e){$n.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new ur,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Ji(i,3));var l=new Is({fog:!1});this.cone=new Us(n,l),this.add(this.cone),this.update()}$h.prototype=Object.create($n.prototype),$h.prototype.constructor=$h,$h.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},$h.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Xh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Xh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Zh=new mn,Jh=new Ln,Kh=new Ln;function tf(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new ur,i=[],r=[],a=new Di(0,0,1),o=new Di(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new Ji(i,3)),n.addAttribute("color",new Ji(r,3));var u=new Is({vertexColors:E,depthTest:!1,depthWrite:!1,transparent:!0});Us.call(this,n,u),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function ef(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new Jl(e,4,2),r=new Hi({wireframe:!0,fog:!1});Cr.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function nf(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=new ur;n.addAttribute("position",new Ji([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new Is({fog:!1});Fs.call(this,n,i);var r=new ur;r.addAttribute("position",new Ji([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Cr(r,new Hi({side:y,fog:!1}))),this.update()}tf.prototype=Object.create(Us.prototype),tf.prototype.constructor=tf,tf.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,i=n.getAttribute("position");Kh.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(Jh.multiplyMatrices(Kh,o.matrixWorld),Zh.setFromMatrixPosition(Jh),i.setXYZ(a,Zh.x,Zh.y,Zh.z),Jh.multiplyMatrices(Kh,o.parent.matrixWorld),Zh.setFromMatrixPosition(Jh),i.setXYZ(a+1,Zh.x,Zh.y,Zh.z),a+=2)}n.getAttribute("position").needsUpdate=!0,$n.prototype.updateMatrixWorld.call(this,t)},ef.prototype=Object.create(Cr.prototype),ef.prototype.constructor=ef,ef.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ef.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},nf.prototype=Object.create(Fs.prototype),nf.prototype.constructor=nf,nf.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},nf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var rf=new mn,af=new Di,of=new Di;function sf(t,e,n){$n.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new ul(e);i.rotateY(.5*Math.PI),this.material=new Hi({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=E);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.addAttribute("color",new Gi(a,3)),this.add(new Cr(i,this.material)),this.update()}function lf(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:""},i=new Ur({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new Jl(1,32,16);Cr.call(this,r,i),this.onBeforeRender()}function uf(t,e,n,i){t=t||10,e=e||10,n=new Di(void 0!==n?n:4473924),i=new Di(void 0!==i?i:8947848);for(var r=e/2,a=t/e,o=t/2,s=[],l=[],u=0,c=0,h=-o;u<=e;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var f=u===r?n:i;f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3}var d=new ur;d.addAttribute("position",new Ji(s,3)),d.addAttribute("color",new Ji(l,3));var p=new Is({vertexColors:E});Us.call(this,d,p)}function cf(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new Di(void 0!==r?r:4473924),a=new Di(void 0!==a?a:8947848);var o,s,l,u,c,h,f,d=[],p=[];for(u=0;u<=e;u++)l=u/e*(2*Math.PI),o=Math.sin(l)*t,s=Math.cos(l)*t,d.push(0,0,0),d.push(o,0,s),f=1&u?r:a,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(u=0;u<=n;u++)for(f=1&u?r:a,h=t-t/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),p.push(f.r,f.g,f.b),l=(c+1)/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),p.push(f.r,f.g,f.b);var m=new ur;m.addAttribute("position",new Ji(d,3)),m.addAttribute("color",new Ji(p,3));var g=new Is({vertexColors:E});Us.call(this,m,g)}function hf(t,e,n,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new ur,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));r.addAttribute("position",new Gi(o,3));var s=new Is({color:65280}),l=new Is({color:16776960});Fs.call(this,r,[l,s]),this.update()}sf.prototype=Object.create($n.prototype),sf.prototype.constructor=sf,sf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},sf.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");af.copy(this.light.color),of.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?af:of;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(rf.setFromMatrixPosition(this.light.matrixWorld).negate())},lf.prototype=Object.create(Cr.prototype),lf.prototype.constructor=lf,lf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},lf.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},uf.prototype=Object.assign(Object.create(Us.prototype),{constructor:uf,copy:function(t){return Us.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),cf.prototype=Object.create(Us.prototype),cf.prototype.constructor=cf,hf.prototype=Object.create(Fs.prototype),hf.prototype.constructor=hf,hf.prototype.update=function(){var t,e,n=this.audio,i=this.range,r=this.divisionsInnerAngle,a=this.divisionsOuterAngle,o=cn.degToRad(n.panner.coneInnerAngle),s=cn.degToRad(n.panner.coneOuterAngle),l=o/2,u=s/2,c=0,h=0,f=this.geometry,d=f.attributes.position;function p(n,r,a,o){var s=(r-n)/a;for(d.setXYZ(c,0,0,0),h++,t=n;t<r;t+=s)e=c+h,d.setXYZ(e,Math.sin(t)*i,0,Math.cos(t)*i),d.setXYZ(e+1,Math.sin(Math.min(t+s,r))*i,0,Math.cos(Math.min(t+s,r))*i),d.setXYZ(e+2,0,0,0),h+=3;f.addGroup(c,h,o),c+=h,h=0}f.clearGroups(),p(-u,-l,a,0),p(-l,l,r,1),p(l,u,a,0),d.needsUpdate=!0,o===s&&(this.material[0].visible=!1)},hf.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var ff=new mn,df=new mn,pf=new yn;function mf(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new ur,u=new Ji(2*o*3,3);l.addAttribute("position",u),Us.call(this,l,new Is({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}mf.prototype=Object.create(Us.prototype),mf.prototype.constructor=mf,mf.prototype.update=function(){this.object.updateMatrixWorld(!0),pf.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++){var l=r[o],u=l.normal;ff.copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(t),df.copy(u).applyMatrix3(pf).normalize().multiplyScalar(this.size).add(ff),e.setXYZ(a,ff.x,ff.y,ff.z),a+=1,e.setXYZ(a,df.x,df.y,df.z),a+=1}e.needsUpdate=!0};var gf=new mn,vf=new mn,yf=new mn;function bf(t,e,n){$n.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new ur;i.addAttribute("position",new Ji([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new Is({fog:!1});this.lightPlane=new Fs(i,r),this.add(this.lightPlane),(i=new ur).addAttribute("position",new Ji([0,0,0,0,0,1],3)),this.targetLine=new Fs(i,r),this.add(this.targetLine),this.update()}bf.prototype=Object.create($n.prototype),bf.prototype.constructor=bf,bf.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},bf.prototype.update=function(){gf.setFromMatrixPosition(this.light.matrixWorld),vf.setFromMatrixPosition(this.light.target.matrixWorld),yf.subVectors(vf,gf),this.lightPlane.lookAt(vf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vf),this.targetLine.scale.z=yf.length()};var xf=new mn,_f=new Hr;function wf(t){var e=new ur,n=new Is({color:16777215,vertexColors:S}),i=[],r=[],a={},o=new Di(16755200),s=new Di(16711680),l=new Di(43775),u=new Di(16777215),c=new Di(3355443);function h(t,e,n){f(t,n),f(e,n)}function f(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.addAttribute("position",new Ji(i,3)),e.addAttribute("color",new Ji(r,3)),Us.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Sf(t,e,n,i,r,a,o){xf.set(r,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],xf.x,xf.y,xf.z)}wf.prototype=Object.create(Us.prototype),wf.prototype.constructor=wf,wf.prototype.update=function(){var t=this.geometry,e=this.pointMap;_f.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sf("c",e,t,_f,0,0,-1),Sf("t",e,t,_f,0,0,1),Sf("n1",e,t,_f,-1,-1,-1),Sf("n2",e,t,_f,1,-1,-1),Sf("n3",e,t,_f,-1,1,-1),Sf("n4",e,t,_f,1,1,-1),Sf("f1",e,t,_f,-1,-1,1),Sf("f2",e,t,_f,1,-1,1),Sf("f3",e,t,_f,-1,1,1),Sf("f4",e,t,_f,1,1,1),Sf("u1",e,t,_f,.7,1.1,-1),Sf("u2",e,t,_f,-.7,1.1,-1),Sf("u3",e,t,_f,0,2,-1),Sf("cf1",e,t,_f,-1,0,1),Sf("cf2",e,t,_f,1,0,1),Sf("cf3",e,t,_f,0,-1,1),Sf("cf4",e,t,_f,0,1,1),Sf("cn1",e,t,_f,-1,0,-1),Sf("cn2",e,t,_f,1,0,-1),Sf("cn3",e,t,_f,0,-1,-1),Sf("cn4",e,t,_f,0,1,-1),t.getAttribute("position").needsUpdate=!0};var Ef=new ci;function Mf(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ur;r.setIndex(new Gi(n,1)),r.addAttribute("position",new Gi(i,3)),Us.call(this,r,new Is({color:e})),this.matrixAutoUpdate=!1,this.update()}function Tf(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new ur;i.setIndex(new Gi(n,1)),i.addAttribute("position",new Ji([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Us.call(this,i,new Is({color:e})),this.geometry.computeBoundingSphere()}function Cf(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=new ur;r.addAttribute("position",new Ji([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Fs.call(this,r,new Is({color:i}));var a=new ur;a.addAttribute("position",new Ji([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Cr(a,new Hi({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}Mf.prototype=Object.create(Us.prototype),Mf.prototype.constructor=Mf,Mf.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Ef.setFromObject(this.object),!Ef.isEmpty()){var e=Ef.min,n=Ef.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Mf.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Mf.prototype.copy=function(t){return Us.prototype.copy.call(this,t),this.object=t.object,this},Mf.prototype.clone=function(){return(new this.constructor).copy(this)},Tf.prototype=Object.create(Us.prototype),Tf.prototype.constructor=Tf,Tf.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),$n.prototype.updateMatrixWorld.call(this,t))},Cf.prototype=Object.create(Fs.prototype),Cf.prototype.constructor=Cf,Cf.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?y:v,this.lookAt(this.plane.normal),$n.prototype.updateMatrixWorld.call(this,t)};var kf,Pf,Af=new mn;function Of(t,e,n,i,r,a){$n.call(this),void 0===t&&(t=new mn(0,0,1)),void 0===e&&(e=new mn(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===kf&&((kf=new ur).addAttribute("position",new Ji([0,0,0,0,1,0],3)),(Pf=new lu(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Fs(kf,new Is({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Cr(Pf,new Hi({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}function Lf(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new ur;n.addAttribute("position",new Ji(e,3)),n.addAttribute("color",new Ji([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Is({vertexColors:E});Us.call(this,n,i)}function If(t,e,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ji(t,e,n,r,a,o)}Of.prototype=Object.create($n.prototype),Of.prototype.constructor=Of,Of.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Af.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Af,e)}},Of.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Of.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Of.prototype.copy=function(t){return $n.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Of.prototype.clone=function(){return(new this.constructor).copy(this)},Lf.prototype=Object.create(Us.prototype),Lf.prototype.constructor=Lf;var Nf=0,Rf=1;function Df(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function zf(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Bf(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Xs(t,e)}function Ff(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Ss(t)}function jf(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Xs(t,e)}function Vf(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Gs(t)}function Uf(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Gs(t)}function Hf(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Gs(t)}function Gf(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new mn(t,e,n)}function Wf(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Gi(t,e).setDynamic(!0)}function qf(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Wi(t,e)}function Qf(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new qi(t,e)}function Yf(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Qi(t,e)}function Xf(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Yi(t,e)}function $f(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Xi(t,e)}function Zf(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new $i(t,e)}function Jf(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Zi(t,e)}function Kf(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ji(t,e)}function td(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ki(t,e)}function ed(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),oc.call(this,t),this.type="catmullrom",this.closed=!0}function nd(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),oc.call(this,t),this.type="catmullrom"}function id(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),oc.call(this,t),this.type="catmullrom"}function rd(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Lf(t)}function ad(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Mf(t,e)}function od(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Us(new ou(t.geometry),new Is({color:void 0!==e?e:16777215}))}function sd(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Us(new el(t.geometry),new Is({color:void 0!==e?e:16777215}))}function ld(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Wu(t)}function ud(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Yu(t)}Ju.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ju.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(yc.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Nr,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new mn(r.x,r.y,r.z||0))}return e}}),Object.assign(bc.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),ed.prototype=Object.create(oc.prototype),nd.prototype=Object.create(oc.prototype),id.prototype=Object.create(oc.prototype),Object.assign(id.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),uf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},tf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Hu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Nc.extractUrlBase(t)}}),Object.assign(Fc.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Fh.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ci.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Uh.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(cn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),cn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),cn.ceilPowerOfTwo(t)}}),Object.assign(yn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ln.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new mn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)}}),Kr.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},fn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(_i.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Li.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Li,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Li.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Li.getNormal(t,e,n,i)}}),Object.assign(xc.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Wl(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new iu(this,t)}}),Object.assign(hn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(mn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(wn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Nr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign($n.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties($n.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Cs.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Os.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ks.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ju.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Gr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(_c.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Gi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(ur.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(ur.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(ql.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Oh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ui.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Di}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===x}}}),Object.defineProperties(yu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ur.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(as.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(as.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Qo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yr.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Sn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(is.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),ch.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new $c).load(t,(function(t){e.setBuffer(t)})),this},gh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Qr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var cd={merge:function(t,e,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function hd(){console.error("THREE.CanvasRenderer has been removed")}function fd(){console.error("THREE.JSONLoader has been removed.")}bn.crossOrigin=void 0,bn.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Zu;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},bn.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new $u;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},bn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},bn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var dd={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function pd(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateCamera=function(t,e){setTimeout((function(){a.default.dispatch({type:"UPDATE_CAMERA",id:t,cameraProp:e})}),1)},e.resetCamera=function(t){a.default.dispatch({type:"RESET_CAMERA",id:t})},e.switchCamera=function(t){a.default.dispatch({type:"SWITCH_CAMERA",id:t})},e.searchTime=function(t,e){a.default.dispatch({type:"SEARCH_TIME",id:t,dst:e})},e.updateChecked=function(t){a.default.dispatch({type:"UPDATE_CHECKED",id:t})},e.switchGridDisplay=function(t,e){a.default.dispatch({type:"SWITCH_GRID",id:t,state:e})},e.switchLabelDisplay=function(t,e){a.default.dispatch({type:"SWITCH_LABEL",id:t,state:e})},e.switchAxisDisplay=function(t,e){a.default.dispatch({type:"SWITCH_AXIS",id:t,state:e})},e.switchPlotDisplay=function(t,e){a.default.dispatch({type:"SWITCH_PLOT",id:t,state:e})},e.changeBackground=function(t,e){a.default.dispatch({type:"CHANGE_BACKGROUND",id:t,color:e})},e.clipTube=function(t,e){a.default.dispatch({type:"CLIP_TUBE",id:t,state:e})},e.switchShade=function(t,e){a.default.dispatch({type:"SWITCH_SHADE",id:t,state:e})},e.changeFar=function(t,e){a.default.dispatch({type:"CHANGE_FAR",id:t,value:e})},e.updateFocus=function(t,e,n){a.default.dispatch({type:"UPDATE_FOCUS",id:t,zpos:e,flag:n})},e.updateMinMaxV=function(t,e,n){a.default.dispatch({type:"UPDATE_MINMAXV",id:t,min:e,max:n})},e.updateMinMaxH=function(t,e,n){a.default.dispatch({type:"UPDATE_MINMAXH",id:t,min:e,max:n})},e.changePlotColor=function(t,e){a.default.dispatch({type:"CHANGE_PLOTCOLOR",id:t,color:e})},e.setTexture=function(t,e){a.default.dispatch({type:"SET_TEXTURE",id:t,texture:e})},e.updateTexture=function(t,e){a.default.dispatch({type:"UPDATE_TEXTURE",id:t,texture:e})},e.activateViewport=function(t){a.default.dispatch({type:"ACTIVATE_VIEWPORT",id:t})},e.timeFitting=function(t){a.default.dispatch({type:"TIME_FITTING",dst:t})},e.lockControl=function(t,e){a.default.dispatch({type:"LOCK_CONTROL",ids:t,state:e})},e.synchronizeTubes=function(t,e,n,i){a.default.dispatch({type:"SYNCHRONIZE_TUBES",id:t,zpos:e,pos:n,deg:i})},e.zoomOutTimeTubes=function(t){a.default.dispatch({type:"ZOOM_OUT_TIMETUBE",id:t})},e.resetZoomTimeTubes=function(t){a.default.dispatch({type:"RESET_ZOOM_TIMETUBES",id:t})},e.zoomInTimeTubes=function(t){a.default.dispatch({type:"ZOOM_IN_TIMETUBES",id:t})},e.updateOpacity=function(t,e){a.default.dispatch({type:"UPDATE_OPACITY",id:t,opt:e})},e.uploadTubeAttributes=function(t,e,n,i){a.default.dispatch({type:"UPLOAD_TUBE_ATTRIBUTES",id:t,position:e,color:n,indices:i})},e.takeSnapshot=function(t,e,n){a.default.dispatch({type:"TAKE_SNAPSHOT",id:t,pos:e,far:n})},e.recoverTube=function(t,e,n){a.default.dispatch({type:"RECOVER_TUBE",id:t,cameraProp:e,tubePos:n})},e.showTimeTubesOfTimeSlice=function(t,e){a.default.dispatch({type:"SHOW_TIMETUBES_OF_TIME_SLICE",id:t,period:e})},e.updateAveragePeriod=function(t){a.default.dispatch({type:"UPDATE_AVERAGE_PERIOD",value:t})},e.showRotationCenter=function(t,e,n){a.default.dispatch({type:"SHOW_ROTATION_CENTER",id:t,period:e,center:n})},e.switchComment=function(t,e){a.default.dispatch({type:"SWITCH_COMMENT",id:t,state:e})};var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){var i=n(76),r=n(135),a=n(193),o=n(6);t.exports=function(t,e){return(o(t)?i:a)(t,r(e,3))}},function(t,e,n){var i=n(25),r=n(126),a=n(127),o="[object Null]",s="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:o:l&&l in Object(t)?r(t):a(t)}},function(t,e,n){var i=n(148),r=n(151);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tickFormatting=function(t){var e=t;Math.log10(Math.abs(t))<-2&&0!==t&&(e=t.toExponential(0));return e},e.formatValue=function(t){t=Number(t);var e=void 0;e=Math.log10(Math.abs(t))<-2&&0!==t?t.toExponential(1):t.toFixed(2);return e}},function(t,e,n){var i=n(53),r=n(49);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toggleSourcePanel=function(){var t=$("#QBESourceMain").css("display");"block"===t?($("#QBESourceMain").css("display","none"),$("#QBESource").css("width","0%"),$("#QBESource").css("padding","0px"),$("#extractionResults").css("width","70%"),$("#collapseSourcePanel").text("Open")):"none"===t&&($("#QBESourceMain").css("display","block"),$("#QBESource").css("width","30%"),$("#QBESource").css("padding","15px"),$("#extractionResults").css("width","40%"),$("#collapseSourcePanel").text("Close"))},e.toggleExtractionDetailPanel=function(){var t=$("#resultDetailArea").css("display");"block"===t?($("#resultDetailArea").css("display","none"),$("#resultDetail").css("height","1.5rem"),$("#resultDetail").css("margin-bottom","0"),$("#collapseResultDetailPanel").text("Open")):"none"===t&&($("#resultDetailArea").css("display","block"),$("#resultDetail").css("height","auto"),$("#resultDetail").css("margin-bottom","1.5rem"),$("#collapseResultDetailPanel").text("Close"))},e.getIgnoredVariables=function(){for(var t=$("input[name=QBEIgnored]:checked"),e=[],n=0;n<t.length;n++)e.push(t[n].value);return e},e.transformCamelToSentence=function(t){var e=t.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1)},e.transformSentenceToCamel=function(t){var e="",n=t.split(" ");e=n[0];for(var i=1;i<n.length;i++)e+=n[i].charAt(0).toUpperCase()+n[i].slice(1);return e=e.charAt(0).toLowerCase()+e.slice(1)},e.displayLoading=function(t){$("#loading").length<=0&&$("#"+t).append('<img id="loading" src="img/icons/loading.gif" width="30" height="30"/>');return"displayLoading"},e.removeLoading=function(){$("#loading").remove()}},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,a=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,n,i){var r,a,o,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"==typeof o?o=a[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=u(t))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,t))}function f(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function d(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):m(r,r.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)a(l,this,e);else{var u=l.length,c=m(l,u);for(n=0;n<u;++n)a(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,a,o;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,n){var i=n(12).Symbol;t.exports=i},function(t,e,n){var i=n(72),r=n(133),a=n(22);t.exports=function(t){return a(t)?i(t):r(t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var i=n(91),r=n(59);t.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var u=e[s],c=a?a(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),o?r(n,u,c):i(n,u,c)}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.uploadData=function(t){!function(t){s.default.getDataNum();for(var e=Number($("#initialLineVal").text()),n=[],a=[],l=[],u=function(s){n.push(t[s].name);var u=new FileReader;u.readAsText(t[s]),u.onload=function(){var c=u.result;console.log("csv file");var h=r.csvParse(c,(function(e){return Object.keys(e).forEach((function(t){isNaN(e[t])||(e[t]=Number(e[t]))}),e),e.source=t[s].name,e})).splice(e-2);if(a.push(h),s===t.length-1){for(var g=0;g<a.length;g++)l=l.concat(a[g]);l.sort((function(t,e){return t.JD<e.JD?-1:1}));var v=d(l),y=i(v,2),b=y[0],x=y[1],_=p(f,b),w=m(b);o.default.dispatch({type:"UPLOAD_DATA",data:{name:n.join("+"),data:l,spatial:b,meta:_,position:w.position,radius:w.radius,color:w.color,splines:w.spline,lookup:x,merge:!1}})}}},c=0;c<t.length;c++)u(c)}(t)},e.updateDetails=function(t,e){o.default.dispatch({type:"UPDATE_DETAIL",id:t,zpos:e})},e.mergeData=function(t){var e=Promise.resolve(),n=[],r=[];e.then((function(){for(var e=0;e<t.length;e++){var a=s.default.getData(t[e]);n=n.concat(a.data.data),r.push(a.name)}var o=r.join(",");n.sort((function(t,e){var n=t.JD,i=e.JD;return Math.log10(t.JD)>4&&(n-=245e4),Math.log10(e.JD)>4&&(i-=245e4),n<i?-1:1}));var l=d(n),u=i(l,2),c=u[0],h=u[1],g=p(f,c),v=m(c);return{fileName:o,data:n,spatial:c,lookup:h,meta:g,splines:v}})).then((function(t){o.default.dispatch({type:"UPLOAD_DATA",data:{name:t.fileName,data:t.data,spatial:t.spatial,meta:t.meta,position:t.splines.position,radius:t.splines.radius,color:t.splines.color,splines:t.splines.spline,lookup:t.lookup,merge:!0}})}))},e.updatePrivateComment=function(){o.default.dispatch({type:"UPDATE_PRIVATE_COMMENT"})};var r=c(n(9)),a=c(n(15)),o=u(n(14)),s=u(n(3)),l=u(n(11));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var h={HU:{x:"Q/I",y:"U/I",z:"JD",r_x:"E_Q/I",r_y:"E_U/I",H:"V-J",V:"Flx(V)"},AUPolar:{x:"< q >",y:"< u >",z:"JD",r_x:"rms(q)",r_y:"rms(u)"},AUPhoto:{z:"JD",V:"V"}},f=["x","y","z","r_x","r_y","H","V"];function d(t){for(var e=[],n={},i=0;i<t.length;i++){e[i]={};var r=t[i]["Q/I"]||t[i]["< q >"],a=t[i]["Flx(V)"]||t[i].V;if(r&&a)for(var o in h.HU)e[i][o]=t[i][h.HU[o]],(!n[o]||n[o].indexOf(h.HU[o])<0)&&(n[o]||(n[o]=[]),n[o].push(h.HU[o]));else if(r)for(var s in h.AUPolar)"z"==s?(e[i][s]=t[i][h.AUPolar[s]]-245e4,(!n[s]||n[s].indexOf(h.AUPolar[s])<0)&&(n[s]||(n[s]=[]),n[s].push(h.AUPolar[s]))):(e[i][s]=t[i][h.AUPolar[s]]||0,(!n[s]||n[s].indexOf(h.AUPolar[s])<0)&&(n[s]||(n[s]=[]),n[s].push(h.AUPolar[s])));else if(a)for(var l in h.AUPhoto)"z"==l?(e[i][l]=t[i][h.AUPhoto[l]]-245e4,(!n[l]||n[l].indexOf(h.AUPhoto[l])<0)&&(n[l]||(n[l]=[]),n[l].push(h.AUPhoto[l]))):"V"===l?(e[i][l]=Math.pow(10,-1*(t[i][h.AUPhoto[l]]+11.758)/2.5),(!n[l]||n[l].indexOf(h.AUPhoto[l])<0)&&(n[l]||(n[l]=[]),n[l].push(h.AUPhoto[l]))):(e[i][l]=t[i][h.AUPhoto[l]]||0,(!n[l]||n[l].indexOf(h.AUPhoto[l])<0)&&(n[l]||(n[l]=[]),n[l].push(h.AUPhoto[l])));e[i].source=t[i].source}return[e,n]}function p(t,e){for(var n={min:{},max:{},mean:{},std:{}},a=function(a){var o=t[a],s=r.extent(e,(function(t){return t[o]})),l=i(s,2);n.min[o]=l[0],n.max[o]=l[1],n.mean[o]=r.mean(e,(function(t){return t[o]})),n.std[o]=r.deviation(e,(function(t){return t[o]}))},o=0;o<t.length;o++)a(o);var s=Math.max(Math.abs(n.mean.x-3*n.std.x),Math.abs(n.mean.x+3*n.std.x)),u=Math.max(Math.abs(n.mean.y-3*n.std.y),Math.abs(n.mean.y+3*n.std.y)),c=Math.max(s,u),h=Math.round(c*Math.pow(10,2-Math.ceil(Math.log10(c))));return n.range=l.default.getGridSize()/(5*Math.ceil(h/5)*Math.pow(10,-(2-Math.ceil(Math.log10(c))))),n}function m(t){var e=[],n=t[0].z,i=[],r=[],o=[];t.forEach((function(t){"x"in t&&(i.push(new a.Vector3(t.x,t.y,t.z)),r.push(new a.Vector3(t.r_x,t.r_y,t.z))),"V"in t&&o.push(new a.Vector3(t.H,t.V,t.z)),e.push(new a.Vector3(0,0,t.z-n))}));var s={};return s.position=new a.CatmullRomCurve3(i,!1,"catmullrom"),s.radius=new a.CatmullRomCurve3(r,!1,"catmullrom"),s.color=new a.CatmullRomCurve3(o,!1,"catmullrom"),s.line=new a.CatmullRomCurve3(e,!1,"catmullrom"),{position:i,radius:r,color:o,spline:s}}},function(t,e,n){(function(t){var i=n(12),r=n(131),a=e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?i.Buffer:void 0,l=(s?s.isBuffer:void 0)||r;t.exports=l}).call(this,n(31)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var i=n(34),r=n(143),a=n(144),o=n(145),s=n(146),l=n(147);function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=s,u.prototype.set=l,t.exports=u},function(t,e,n){var i=n(138),r=n(139),a=n(140),o=n(141),s=n(142);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(27);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},function(t,e,n){var i=n(20)(Object,"create");t.exports=i},function(t,e,n){var i=n(160);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var i=n(175),r=n(55),a=n(176),o=n(177),s=n(178),l=n(19),u=n(77),c=u(i),h=u(r),f=u(a),d=u(o),p=u(s),m=l;(i&&"[object DataView]"!=m(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=m(new r)||a&&"[object Promise]"!=m(a.resolve())||o&&"[object Set]"!=m(new o)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,n){var i=n(19),r=n(16),a="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||r(t)&&i(t)==a}},function(t,e,n){var i=n(39),r=1/0;t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}},function(t,e,n){var i=n(72),r=n(200),a=n(22);t.exports=function(t){return a(t)?i(t,!0):r(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addCommentData=function(t){(i=JSON.parse(localStorage.getItem("privateComment"))).push(t),localStorage.setItem("privateComment",JSON.stringify(i))},e.getUniqueId=function(){return(new Date).getTime().toString(16)+Math.floor(1e3*Math.random()).toString(16)},e.getDataFromLocalStorage=function(t){return JSON.parse(localStorage.getItem(t))},e.deletePrivateComment=function(t){for(var e=!1,n=0;n<i.length;n++)if(i[n].id===t){i.splice(n,1),e=!0;break}return localStorage.setItem("privateComment",JSON.stringify(i)),e},e.getPrivateCommentFromId=function(t){for(var e=0;e<i.length;e++)if(i[e].id===t)return i[e];return-1},e.exportPrivateComment=function(t){for(var e=[],n=function(n){e.push(i.filter((function(e){if(e.id===t[n])return!0}))[0])},a=0;a<t.length;a++)n(a);var o="";for(a=0;a<e.length;a++){for(var s in e[a])o+="timeStamp"===s?e[a][s].replace(", ","_"):e[a][s]+",";o=o.substring(0,o.length-1),o+="\n"}var l="privateComment_"+r()+".csv",u=new Blob([o],{type:"text/csv"}),c=(window.URL||window.webkitURL).createObjectURL(u),h=document.createElement("a");h.download=decodeURI(l),h.href=c,h.click()},e.createDateLabel=r;var i=JSON.parse(localStorage.getItem("privateComment"));function r(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),r=t.getHours(),a=t.getMinutes(),o=t.getSeconds();return e+(n=n<10?"0"+n.toString():n.toString())+(i=i<10?"0"+i.toString():i.toString())+(r=r<10?"0"+r.toString():r.toString())+(a=a<10?"0"+a.toString():a.toString())+(o=o<10?"0"+o.toString():o.toString())}},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}}(),t.exports=n(109)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(24),o=n(14),s=(i=o)&&i.__esModule?i:{default:i};var l=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.menu="Visualization",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"handleActions",value:function(t){switch(t.type){case"SELECT_MENU":this.selectMenu(t.menu)}}},{key:"getMenu",value:function(){return this.menu}},{key:"selectMenu",value:function(t){this.menu=t,this.emit("selectMenu",t)}}]),e}(a.EventEmitter));s.default.register(l.handleActions.bind(l)),e.default=l},function(t,e,n){var i=n(70),r=n(74);t.exports=function(t,e){return t&&i(t,r(e))}},function(t,e,n){var i=n(130),r=n(16),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e){var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?n:e)&&("number"==r||"symbol"!=r&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var i=n(132),r=n(50),a=n(51),o=a&&a.isTypedArray,s=o?r(o):i;t.exports=s},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var i=n(68),r=e&&!e.nodeType&&e,a=r&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===r&&i.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s}).call(this,n(31)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(19),r=n(10),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(t){if(!r(t))return!1;var e=i(t);return e==o||e==s||e==a||e==l}},function(t,e,n){var i=n(73)(Object.getPrototypeOf,Object);t.exports=i},function(t,e,n){var i=n(20)(n(12),"Map");t.exports=i},function(t,e,n){var i=n(152),r=n(159),a=n(161),o=n(162),s=n(163);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(174),r=n(84),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),i(o(t),(function(e){return a.call(t,e)})))}:r;t.exports=s},function(t,e,n){var i=n(6),r=n(39),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var i=n(92);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var i=n(80);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Checkboard=void 0;var i=o(n(0)),r=o(n(1)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(221));function o(t){return t&&t.__esModule?t:{default:t}}var s=e.Checkboard=function(t){var e=t.white,n=t.grey,o=t.size,s=t.renderers,l=t.borderRadius,u=t.boxShadow,c=(0,r.default)({default:{grid:{borderRadius:l,boxShadow:u,absolute:"0px 0px 0px 0px",background:"url("+a.get(e,n,o,s.canvas)+") center left"}}});return i.default.createElement("div",{style:c.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createScatterplots=function(){},e.resetScatterplotsZoom=function(t){a.default.dispatch({type:"RESET_SCATTERPLOTS",id:t})},e.moveCurrentLineonTimeSelector=function(t,e){a.default.dispatch({type:"MOVE_CURRENT_LINE_ON_TIMESELECTOR",id:t,zpos:e})},e.updateTimeRange=function(t,e){a.default.dispatch({type:"UPDATE_TIME_RANGE",id:t,range:e})};!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(9));var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(24),o=n(14),s=(i=o)&&i.__esModule?i:{default:i};var l=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.timeRange=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPLOAD_DATA":this.uploadData(t.data);break;case"RESET_SCATTERPLOTS":this.emit("resetScatterplots",t.id);break;case"MOVE_CURRENT_LINE_ON_TIMESELECTOR":this.emit("moveCurrentLineonTimeSelector",t.id,t.zpos);break;case"UPDATE_TIME_RANGE":this.updateTimeRange(t.id,t.range)}}},{key:"getTimeRange",value:function(t){return this.timeRange[t]}},{key:"uploadData",value:function(t){this.timeRange.push([t.meta.min.z,t.meta.max.z]),this.emit("upload")}},{key:"updateTimeRange",value:function(t,e){this.timeRange[t]=e,this.emit("updateTimeRange",t,e)}}]),e}(a.EventEmitter));s.default.register(l.handleActions.bind(l)),e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.makeQueryfromQBE=function(t,e,n,i){var r=[Math.floor(e[0]),Math.ceil(e[1])],a=f.default.getData(t).data.meta.min.z,o=f.default.getData(t).data.lookup,s={},l=[];for(var u in o)n.indexOf(u)<0&&l.push(u);if("rectangular"===i){for(var c=0;c<l.length;c++)s[l[c]]=[];for(var h=r[0];h<=r[1];h++){var d=f.default.getValues(t,h-a);for(var p in s)"z"!==p?s[p].push(d[p]):"z"===p&&s[p].push(h)}s.minJD=r[0],s.arrayLength=r[1]-r[0]+1}else if("polar"===i)if(l.indexOf("x")<0||l.indexOf("y")<0)alert("To use the polar coordinate for computing similarities, you cannot ignore the Stokes parameters (Q/I and U/I).");else{for(var m=0;m<l.length;m++)"x"===l[m]?s.r=[]:"y"===l[m]?s.theta=[]:s[l[m]]=[];for(var g=r[0];g<=r[1];g++){var v=f.default.getValues(t,g-a),y=Math.sqrt(Math.pow(v.x,2)+Math.pow(v.y,2)),b=L(Math.atan2(v.x,v.y));for(var x in s)"r"===x?s[x].push(y):"theta"===x?s[x].push(b):"z"!==x?s[x].push(v[x]):"z"===x&&s[x].push(g)}s.minJD=r[0],s.arrayLength=r[1]-r[0]+1}return s},e.makeQueryPolarQBS=function(t){var e=Object.keys(t),n={};if(e.indexOf("x")<0||e.indexOf("y")<0)alert("To use the polar coordinate for computing similarities, you cannot ignore the Stokes parameters (Q/I and U/I).");else if(t.x.indexOf(null)>=0||t.y.indexOf(null)>=0)alert("To use the polar coordinate for computing similarities, you have to assign Q/I and U/I to x axis, y axis, or width.");else{for(var i=[],r=[],a=0;a<t.arrayLength;a++){var o=Math.sqrt(Math.pow(t.x[a],2)+Math.pow(t.y[a],2)),s=L(Math.atan2(t.x[a],t.y[a]));i.push(o),r.push(s)}for(var l in n.r=i,n.theta=r,t)"x"!==l&&"y"!==l&&(n[l]=t[l])}return n},e.runMatching=function(t,e,n,i,r,a,o,s){var l=[],u=void 0;switch(r){case"Euclidean":u=E}i&&(t=v(t));for(var c=function(r){var c=f.default.getDataArray(e[r],1);if(t.r){for(var h={},d=[],p=[],m=0;m<c.arrayLength;m++)d.push(Math.sqrt(Math.pow(c.x[m],2)+Math.pow(c.y[m],2))),p.push(L(Math.atan2(c.x[m],c.y[m])));for(var g in h.r=d,h.theta=p,c)"x"!==g&&"y"!==g&&(h[g]=c[g]);c=h}var E=c.z[0];switch(n){case"DTWI":if(a>0)for(var M=0;M<c.arrayLength-s[0];){for(var T=[],C=s[0];C<=s[1]&&!(M+C>c.arrayLength-1);C++){var k=0,P={};for(var A in t)if(Array.isArray(c[A])&&"z"!==A){var O=c[A].slice(M,M+C);i&&(O="theta"!==A?v(O):y(O));var I=_(t[A],O,a,u),N=S(I);P[A]=N,k+=I[t[A].length-1][O.length-1]}T.push({dist:k,path:P})}for(var R=0,D=1/0,z=0;z<T.length;z++)T[z].dist<D&&(D=T[z].dist,R=z);l.push({id:r,start:M+E,period:s[0]+R,distance:D,path:T.path}),M+=o}else for(var B=0;B<c.arrayLength-s[0];){var F={},j=B+s[1]<c.arrayLength-1?s[1]:c.arrayLength-B;for(var V in t)if(Array.isArray(c[V])&&"z"!==V){var U=c[V].slice(B,B+j);i&&(U="theta"!==V?v(U):y(U));var H=b(t[V],U,u);F[V]=H}for(var G=j-s[0]+1,W=[],q=1;q<=G;q++){var Q=0;for(var Y in F)Q+=F[Y][t.arrayLength-1][F[Y][0].length-1-G+q];W.push(Q)}for(var X=0,$=1/0,Z=0;Z<W.length;Z++)W[Z]<$&&($=W[Z],X=Z);var J={};for(var K in F){for(var tt=[],et=0;et<F[K].length;et++)tt.push(F[K].slice(0,F[K][et].length-1-G+(X+1)+1));J[K]=S(tt)}l.push({id:r,start:B+E,period:s[0]+X,distance:$,path:J}),B+=o}break;case"DTWD":var nt=[];for(var it in t)Array.isArray(t[it])&&"z"!==it&&nt.push(it);a>0?function(){for(var e=0;e<c.arrayLength-s[0];){for(var n=[],h=function(r){if(e+r>c.arrayLength-1)return"break";var o={};nt.forEach((function(t){o[t]=c[t].slice(e,e+r)})),o.arrayLength=r,i&&(o=v(o)),n.push(w(t,o,a,nt,u))},f=s[0];f<=s[1];f++){if("break"===h(f))break}for(var d=0,p=1/0,m=0;m<n.length;m++)n[m][n[m].length-1][n[m][0].length-1]<p&&(p=n[m][n[m].length-1][n[m][0].length-1],d=m);var g=S(n[d]);l.push({id:r,start:e+E,period:s[0]+d,distancec:p,path:g}),e+=o}}():function(){for(var e=0,n=function(){var n={},a=e+s[1]<c.arrayLength-1?s[1]:c.arrayLength-e;nt.forEach((function(t){n[t]=c[t].slice(e,e+a)})),n.arrayLength=a,i&&(n=v(n));for(var h=x(t,n,nt,u),f=a-s[0]+1,d=[],p=1;p<=f;p++)d.push(h[t.arrayLength-1][n.arrayLength-1-f+p]);for(var m=0,g=1/0,y=1;y<d.length;y++)d[y]<g&&(g=d[y],m=y);for(var b=[],_=0;_<h.length;_++)b.push(h[_].slice(0,n.arrayLength-1-f+(m+1)+1));var w=S(b);l.push({id:r,start:e+E,period:s[0]+m,distance:g,path:w}),e+=o};e<c.arrayLength-s[0];)n()}()}},h=0;h<e.length;h++)c(h);return l},e.removeOverlappingQBE=function(t,e,n){for(var i=[],r=e[1]-e[0],a=0;a<n.length;a++)if(t===n[a].id){var o=0;e[0]<=n[a].start&&n[a].start<=e[1]?o=e[1]-n[a].start:e[0]<=n[a].start+n[a].period&&n[a].start+n[a].period<=e[1]?o=n[a].start+n[a].period-e[0]:n[a].start<=e[0]&&e[1]<=n[a].start+n[a].period?o=r:e[0]<=n[a].start&&n[a].start+n[a].period<=e[1]&&(o=n[a].period),o/r<.3&&i.push(n[a])}else i.push(n[a]);return i},e.runMatchingSketch=function(t,e,n,i,r,a,o,s){var l=[],u=void 0;switch(r){case"Euclidean":u=E}i&&(t=v(t));for(var c=function(r){var c=e[r],h=f.default.getDataArray(c,1);if(t.r){for(var d={},p=[],m=[],g=0;g<h.arrayLength;g++)p.push(Math.sqrt(Math.pow(h.x[g],2)+Math.pow(h.y[g],2))),m.push(L(Math.atan2(h.x[g],h.y[g])));for(var y in d.r=p,d.theta=m,h)"x"!==y&&"y"!==y&&(d[y]=h[y]);h=d}var b=h.z[0];switch(n){case"DTWD":var _=[],E=[];for(var M in t)Array.isArray(t[M])&&t[M].indexOf(null)<0&&"z"!==M?_.push(M):Array.isArray(t[M])&&t[M].indexOf(null)>=0&&E.push(M);a>0?function(){for(var e=0;e<h.arrayLength-s[0];){for(var n=[],r=function(r){if(e+r>h.arrayLength-1)return"break";var o={};_.forEach((function(t){o[t]=h[t].slice(e,e+r)})),o.arrayLength=r,i&&(o=v(o)),n.push(w(t,o,a,_,u))},f=s[0];f<=s[1];f++){if("break"===r(f))break}var d=0,p=1/0;for(f=0;f<n.length;f++)n[f][n[f].length-1][n[f][0].length-1]<p&&(p=n[f][n[f].length-1][n[f][0].length-1],d=f);var m=S(n[d]),g=!0;for(var y in E){for(var x=0;x<t[E[y]].length;x++){if(t[E[y]][x])for(var M=0;M<m.length&&!(m[M][1]<x);M++)if(m[M][1]===x){var T=h[E[y]][e+m[M][0]];if(T<t[E[y]][x][0]||t[E[y]][x][1]<T){g=!1;break}}if(!g)break}if(!g)break}g&&l.push({id:c,start:e+b,period:s[0]+d,distance:p,path:m}),e+=o}}():function(){for(var e=0,n=function(){var n={},r=e+s[1]<h.arrayLength-1?s[1]:h.arrayLength-e;_.forEach((function(t){n[t]=h[t].slice(e,e+r)})),n.arrayLength=r,i&&(n=v(n));for(var a=x(t,n,_,u),f=r-s[0]+1,d=[],p=1;p<=f;p++)d.push(a[t.arrayLength-1][n.arrayLength-1-f+p]);for(var m=0,g=1/0,y=0;y<d.length;y++)d[y]<g&&(g=d[y],m=y);for(var w=[],M=0;M<a.length;M++)w.push(a[M].slice(0,n.arrayLength-1-f+(m+1)+1));var T=S(w),C=!0;for(var k in E){for(var P=0;P<t[E[k]].length;P++){if(t[E[k]][P])for(var A=0;A<T.length&&!(T[A][1]<P);A++)if(T[A][1]===P){var O=h[E[k]][e+T[A][0]];if(O<t[E[k]][P][0]||t[E[k]][P][1]<O){C=!1;break}}if(!C)break}if(!C)break}C&&l.push({id:c,start:e+b,period:s[0]+m,distance:g,path:T}),e+=o};e<h.arrayLength-s[0];)n()}()}},h=0;h<e.length;h++)c(h);return l},e.DTWSimple=b,e.DTWSimpleMD=x,e.DTW=_,e.DTWMD=w,e.sortResults=M,e.setDefaltOrderOfResults=function(){var t=d.default.getMode(),e=document.getElementById("resultOrderList").options;if("AE"===t){for(var n=0;n<e.length;n++)if("timeStamp"===e[n].value){document.getElementById("resultOrderList").selectedIndex=n;break}}else if("QBE"===t||"QBS"===t)for(var i=0;i<e.length;i++)if("distance"===e[i].value){document.getElementById("resultOrderList").selectedIndex=i;break}},e.showExtractionResults=function(){"none"!==$("#QBESourceMain").css("display")&&c.toggleSourcePanel();var t=document.getElementById("resultOrderList"),e=t.selectedIndex,n=t.options[e].value,i=$("#topKResults").val(),s=$("#distanceThreshold").val(),h=d.default.getExtractionResults();if($("#topKResults").prop("disabled"))h.sort(M(n));else{var m=d.default.getMode();"QBE"===m||"QBS"===m?h.sort(M("distance")):"AE"===m&&d.default.getAEOptionStatus("anomaly")&&h.sort(M("anomalyDegree")),""!==i&&(h=h.slice(0,i)),h.sort(M(n))}""!==s&&(h=h.filter((function(t){return t.distance<s})));u.updateShownResults(h);for(var g=d.default.getTarget(),v={},y={},b={},x={},_=0;_<g.length;_++){v[String(g[_])]=p.default.getCameraProp(g[_]),y[String(g[_])]=p.default.getFocused(g[_]),b[String(g[_])]=f.default.getData(g[_]).data.meta.min.z,x[String(g[_])]=document.getElementById("TimeTubes_viewport_"+g[_]);var w=v[String(g[_])].aspect;l.updateCamera(g[_],{xpos:0,ypos:0,zpos:50,fov:45,far:2e3,depth:0,aspect:w,zoom:1,type:"Perspective"})}var S=document.getElementById("resultsArea");for(;S.firstChild;)a.default.unmountComponentAtNode(S.firstChild),S.removeChild(S.firstChild);for(var E=0;E<h.length;E++){var T=document.createElement("div");T.id="resultSummaryHolder_"+E,S.appendChild(T);var C=h[E];l.takeSnapshot(C.id,C.start-b[String(C.id)],C.period);var k=x[String(C.id)].height,P=x[String(C.id)].width,A=new Image;A.src=x[String(C.id)].toDataURL(),A.height=k,A.width=P,a.default.render(r.default.createElement(o.default,{key:E,id:C.id,thumbnail:A,result:C,period:[C.start,C.start+C.period],distance:C.distance,path:C.path,rank:E}),T)}for(var O=0;O<g.length;O++)l.recoverTube(g[O],v[String(g[O])],y[String(g[O])]);h.length>0?$("#matchingStatus").text(h.length+" results are found"):$("#matchingStatus").text("No results are found")},e.updateSortResultsPulldown=function(){var t=[];t.push("Time stamp"),t.push("Data");var e=[];"AE"===d.default.getMode()?(d.default.getAEOptionStatus("flare")&&(t.push("Significance"),t.push("Intensity")),d.default.getAEOptionStatus("rotation")&&(t.push("Angle"),t.push("Diameter"),t.push("Period")),d.default.getAEOptionStatus("anomaly")&&t.push("Anomaly degree")):t.push("Distance");for(var n=0;n<t.length;n++){var i=c.transformSentenceToCamel(t[n]);e.push(r.default.createElement("option",{value:i,key:i},t[n]))}return e},e.extractAnomalies=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n],r=f.default.getData(i),a=r.data.spatial,o=0;o<a.length-1;o++){var s=a[o].z,l=a[o+1].z,u=f.default.getValues(i,s-a[0].z),c=f.default.getValues(i,l-a[0].z),h=100*Math.sqrt(Math.pow((c.x-u.x)/(r.data.meta.max.x-r.data.meta.min.x),2)+Math.pow((c.y-u.y)/(r.data.meta.max.y-r.data.meta.min.y),2))/(l-s);0===h&&(h=1);var d=Math.abs(c.V-u.V)/(r.data.meta.max.V-r.data.meta.min.V)*100/(l-s);0===d&&(d=1);var p=Math.abs(c.H-u.H)/(r.data.meta.max.H-r.data.meta.min.H)*100/(l-s);0===p&&(p=1),e.push({id:i,start:s,anomalyDegree:h*d*p})}return e},e.extractFlares=function(t,e,n,i){for(var r=[],a=0;a<t.length;a++){for(var o=t[a],l=f.default.getData(o),u=[],c=void 0,h=0;h<l.data.color.length;h++){switch(e){case"AveMaximum":c=T(o,h,n);break;case"AveAve":c=C(o,h,n);break;case"AveDist":c=k(o,h,n)}u.push({index:h,significance:c,V:l.data.color[h].y})}for(var d=u.filter((function(t){return t.significance>0})),p=s.mean(d,(function(t){return t.significance})),m=s.deviation(d,(function(t){return t.significance})),g=0;g<d.length;g++)d[g].significance-p>i*m&&r.push({id:o,start:l.data.color[d[g].index].z,significance:d[g].significance,V:d[g].V})}return r},e.extractFlaresGESD=function(t,e){for(var n=0;n<t.length;n++)for(var i=f.default.getData(n),r=i.data.meta.mean.V+i.data.meta.std.V,a=0;a<i.color.length;a++)i.color[a].V>r&&0},e.extractFlaresManual=function(t,e){for(var n=[],i=0;i<t.length;i++)for(var r=t[i],a=f.default.getData(r),o=0;o<a.data.color.length;o++)a.data.color[o].y>=e&&n.push({id:r,start:a.data.color[o].z,V:a.data.color[o].y});return n},e.extractRotations=function(t,e,n,i,r,a){for(var o=[],s=0;s<t.length;s++){for(var l=t[s],u=f.default.getData(l).data.position,c=[],d=0;d<u.length;d++){for(var p=[],m=e[0];m<=e[1]&&!(u[d].z+m>u[u.length-1].z);m++){for(var g=!1,v=1;d+v<u.length&&u[d+v].z-u[d].z<m;v++)if(u[d+v].z-u[d+v-1].z>5){g=!0;break}var y={x:0,y:0},b=[];if(0===r){for(var x=0;x<m;x++){var _=f.default.getValues(l,u[d].z+x-u[0].z);b.push(_),y.x+=_.x,y.y+=_.y}y.x/=m,y.y/=m}else{for(var w=8/m,S=-4,E=0,M=0;M<m;M++){var T=f.default.getValues(l,u[d].z+M-u[0].z);b.push(T);var C=h.getGaussValue(S,r);y.x+=C*T.x,y.y+=C*T.y,E+=C,S+=w}y.x/=E,y.y/=E}for(var k={x:0,y:0},L={x:b[0].x,y:b[0].y},I={x:b[0].x,y:b[0].y},N=[],R=[],D=0;D<m;D++){var z={x:b[D].x,y:b[D].y},B=P(z,y),F=A(z,y);N.push({z:b[D].z,angle:B}),R.push({z:b[D].z,degree:F}),k.x+=Math.pow(b[D].x-y.x,2),k.y+=Math.pow(b[D].y-y.y,2),b[D].x<L.x&&(L.x=b[D].x),I.x<b[D].x&&(I.x=b[D].x),b[D].y<L.y&&(L.y=b[D].y),I.y<b[D].y&&(I.y=b[D].y)}var j={x:Math.sqrt(k.x/m),y:Math.sqrt(k.y/m)};if(!g&&(I.x-L.x>n||I.y-L.y>n)){var V=f.default.getData(l).data.meta.std.x,U=f.default.getData(l).data.meta.std.y;switch(a){case"no":break;case"and":if(!(V<j.x&&U<j.y))continue;break;case"or":if(!(V<j.x||U<j.y))continue;break;case"x":if(!(V<j.x))continue;break;case"y":if(!(U<j.y))continue}for(var H=0,G=N[0],W=N[0].angle,q=0;q<m;q++){var Q=void 0,Y=.1*G.angle+.9*W;Math.abs(N[q].angle-G.angle)>180?(Q=Y-W<0?G.angle>N[q].angle?-1*(G.angle-N[q].angle):-1*(G.angle+360-N[q].angle):G.angle>N[q].angle?N[q].angle+360-G.angle:N[q].angle-G.angle,W=1===O(N[q].angle)&&4===O(N[q-1].angle)||4===O(N[q].angle)&&1===O(N[q-1].angle)?N[q].angle:Y):(Q=N[q].angle-G.angle,W=Y),H+=Q,G=N[q]}Math.abs(H)>i&&p.push({id:l,start:u[d].z,angle:Math.abs(H),period:m,center:y,diameter:{x:I.x-L.x,y:I.y-L.y},direction:H<0?"clockwise":"counterclockwise"})}}if(p.length>0){for(var X=Math.abs(p[0].angle),$=0,Z=1;Z<p.length;Z++)X<Math.abs(p[Z].angle)&&(X=Math.abs(p[Z].angle),$=Z);c.push(p[$])}}if(c.length>0){for(var J=0,K=1;K<c.length;K++)c[K].start-c[K-1].start<e[0]?c[J].angle<c[K].angle&&(J=K):(o.push(c[J]),J=K);o.push(c[J])}}return o},e.convertRadToDeg=L;var r=g(n(0)),a=g(n(43)),o=g(n(302)),s=m(n(9)),l=m(n(17)),u=m(n(8)),c=m(n(23)),h=m(n(105)),f=g(n(3)),d=g(n(5)),p=g(n(11));function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function g(t){return t&&t.__esModule?t:{default:t}}function v(t){var e=void 0;if(Array.isArray(t)){e=[];for(var n=Math.min.apply(null,t),r=Math.max.apply(null,t),a=0;a<t.length;a++)e.push((t[a]-n)/(r-n))}else if("object"===(void 0===t?"undefined":i(t)))for(var o in e={},t)Array.isArray(t[o])&&t[o].indexOf(null)<0?"theta"!==o?function(){var n=Math.min.apply(null,t[o]),i=Math.max.apply(null,t[o]),r=t[o].map((function(t){return(t-n)/(i-n)}));e[o]=r}():e[o]=y(t[o]):e[o]=t[o];return e}function y(t){for(var e=[],n=[],i=(t[0],O(t[0])),r=0,a=0;a<t.length;a++){var o=O(t[a]);1===i&&4===o?r-=360:4==i&&1===o&&(r+=360),n.push(t[a]+r),t[a]+r,i=o}for(var s=Math.min.apply(null,n),l=Math.max.apply(null,n),u=0;u<n.length;u++)e.push((n[u]-s)/(l-s));return e}function b(t,e,n){for(var i=[],r=0;r<t.length;r++){i[r]=[];for(var a=0;a<e.length;a++)i[r][a]=1/0}for(var o=0;o<t.length;o++)for(var s=0;s<e.length;s++)i[o][s]=o>0?s>0?n(t[o],e[s])+Math.min(i[o-1][s],i[o][s-1],i[o-1][s-1]):n(t[o],e[s])+i[o-1][s]:s>0?n(t[o],e[s])+i[o][s-1]:0;return i}function x(t,e,n,i){for(var r=[],a=0;a<t.arrayLength;a++){r[a]=[];for(var o=0;o<e.arrayLength;o++)r[a][o]=1/0}for(var s=function(a){var o=[];n.forEach((function(e){o.push(t[e][a])}));for(var s=function(t){var s=[];n.forEach((function(n){s.push(e[n][t])})),r[a][t]=a>0?t>0?i(o,s)+Math.min(r[a-1][t],r[a][t-1],r[a-1][t-1]):i(o,s)+r[a-1][t]:t>0?i(o,s)+r[a][t-1]:0},l=0;l<e.arrayLength;l++)s(l)},l=0;l<t.arrayLength;l++)s(l);return r}function _(t,e,n,i){var r=[];n=Math.max(n,Math.abs(t.length-e.length));for(var a=0;a<t.length;a++){r[a]=[];for(var o=0;o<e.length;o++)r[a][o]=1/0}r[0][0]=0;for(var s=1;s<t.length;s++)for(var l=Math.max(1,s-n),u=Math.min(e.length,s+n),c=l;c<u;c++)r[s][c]=0;for(var h=1;h<t.length;h++)for(var f=Math.max(1,h-n),d=Math.min(e.length,h+n),p=f;p<d;p++)r[h][p]=i(t[h],e[p])+Math.min(r[h-1][p],r[h][p-1],r[h-1][p-1]);return r}function w(t,e,n,i,r){var a=[];n=Math.max(n,Math.abs(t.arrayLength-e.arrayLength));for(var o=0;o<t.arrayLength;o++){a[o]=[];for(var s=0;s<e.arrayLength;s++)a[o][s]=1/0}a[0][0]=0;for(var l=1;l<t.arrayLength;l++)for(var u=Math.max(1,l-n),c=Math.min(e.arrayLength,l+n),h=u;h<c;h++)a[l][h]=0;for(var f=function(o){var s=Math.max(1,o-n),l=Math.min(e.arrayLength,o+n),u=[];i.forEach((function(e){u.push(t[e][o])}));for(var c=function(t){var n=[];i.forEach((function(i){n.push(e[i][t])})),a[o][t]=r(u,n)+Math.min(a[o-1][t],a[o][t-1],a[o-1][t-1])},h=s;h<l;h++)c(h)},d=1;d<t.arrayLength;d++)f(d);return a}function S(t){var e=[],n=t.length-1,i=t[0].length-1;for(e.push([i,n]);n>0&&i>0;)0===n?i--:0===i?n--:t[n-1][i]===Math.min(t[n-1][i-1],t[n-1][i],t[n][i-1])?n--:t[n][i-1]===Math.min(t[n-1][i-1],t[n-1][i],t[n][i-1])?i--:(n--,i--),e.push([i,n]);return e.push([0,0]),e}function E(t,e){if(Array.isArray(t)){for(var n=0,i=0;i<t.length;i++)n+=Math.pow(t[i]-e[i],2);return Math.sqrt(n)}return Math.abs(t-e)}function M(t){var e=void 0;switch(t){case"distance":e=function(t,e){return t.distance-e.distance};break;case"timeStamp":e=function(t,e){var n=t.start-e.start;return 0===n&&(n=t.id-e.id),n};break;case"data":e=function(t,e){var n=t.id-e.id;return 0===n&&(n=t.distance-e.distance),n};break;case"significance":e=function(t,e){return t.significance-e.significance};break;case"intensity":e=function(t,e){return t.intensity-e.intensity};break;case"angle":e=function(t,e){return t.angle-e.angle};break;case"diameter":e=function(t,e){return t.diameter-e.diameter};break;case"period":e=function(t,e){return t.period-e.period};break;case"anomalyDegree":e=function(t,e){return e.anomalyDegree-t.anomalyDegree}}return e}function T(t,e,n){for(var i=f.default.getData(t).data.color,r=i[e].y,a=i.slice(e-n>=0?e-n:0,e).map((function(t){return t.y})),o=0;o<a.length;o++)a[o]=r-a[o];for(var l=i.slice(e+1,e+n<i.length?e+n+1:i.length-1).map((function(t){return t.y})),u=0;u<l.length;u++)l[u]=r-l[u];var c=s.max(a),h=s.max(l);return c?h?(c+h)/2:c:h}function C(t,e,n){for(var i=f.default.getData(t).data.color,r=i[e].y,a=i.slice(e-n>=0?e-n:0,e).map((function(t){return t.y})),o=0;o<a.length;o++)a[o]=r-a[o];for(var l=i.slice(e+1,e+n<i.length?e+n+1:i.length-1).map((function(t){return t.y})),u=0;u<l.length;u++)l[u]=r-l[u];var c=s.mean(a),h=s.mean(l);return c?h?(c+h)/2:c:h}function k(t,e,n){var i=f.default.getData(t).data.color,r=i[e].y,a=i.slice(e-n>=0?e-n:0,e).map((function(t){return t.y})),o=i.slice(e+1,e+n<i.length?e+n+1:i.length-1).map((function(t){return t.y})),l=r-s.mean(a),u=r-s.mean(o);return l?u?(l+u)/2:l:u}function P(t,e){var n=Math.atan2(t.y-e.y,t.x-e.x);return n>=0?180*n/Math.PI:180*(2*Math.PI+n)/Math.PI}function A(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function O(t){return t>=0&&t<90?1:t>=90&&t<180?2:t>=180&&t<270?3:4}function L(t){return t>=0?180*t/Math.PI:180*(2*Math.PI+t)/Math.PI}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,l=o(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))r.call(n,c)&&(l[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(l[s[h]]=n[s[h]])}}return l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectMenu=function(t){a.default.dispatch({type:"SELECT_MENU",menu:t})};var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=b(n(0)),a=y(n(15)),o=b(n(121)),s=y(n(17)),l=y(n(62)),u=y(n(29)),c=y(n(8)),h=y(n(42)),f=b(n(11)),d=b(n(3)),p=b(n(5)),m=b(n(287)),g=b(n(103)),v=b(n(288));function y(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function b(t){return t&&t.__esModule?t:{default:t}}var x=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.id=t.id,n.data=t.data,n.canvas,n.cameraProp=f.default.getCameraProp(t.id),n.tubeNum=16,n.segment=16,n.division=5,n.currentHighlightedPlot=0,n.drag=!1,n.visualQuery=!1,n.dragSelection=!0,n.selector=!0,n.averagePeriod=0,n.animationPara={flag:!1,dep:0,dst:0,speed:40,now:0},n.raycaster=new a.Raycaster,n.vertex=document.getElementById("vertexShader_tube").textContent,n.fragment=document.getElementById("fragmentShader_tube").textContent,n.lock=!1,n.opacityCurve=f.default.getOpacityCurve("Default"),n.rotationPeriod=null,n.data.merge){n.plotColor=[],n.idNameLookup={};for(var i=n.data.name.split(","),r=0;r<i.length;r++){var o=d.default.getIdFromName(i[r]);n.idNameLookup[i[r]]=r;var s=i[r].split("+");if(s.length>1)for(var l=0;l<s.length;l++)n.idNameLookup[s[l]]=r;n.plotColor.push(f.default.getPlotColor(o))}f.default.setPlotColorbyIdx(n.id,n.plotColor)}else f.default.setPlotColorbyIdx(n.id,(f.default.getInitColorIdx()+n.id)%f.default.getPresetNum()),n.plotColor=f.default.getPlotColor(n.id);return n.state={width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){var t=this;return this.updateSize(this.props.width,this.props.height),r.default.createElement("div",{style:{position:"relative",float:"left"}},r.default.createElement("div",{className:"TimeTubes",style:{width:this.props.width+"px",height:this.props.height+"px"},ref:function(e){t.mount=e}}),r.default.createElement(o.default,null))}},{key:"componentWillMount",value:function(){var t=this;d.default.on("updatePrivateComment",(function(){t.updateComment()})),f.default.on("upload",(function(){t.cameraProp=f.default.getCameraProp(t.id),t.updateCamera()})),f.default.on("updateCamera",(function(e){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.updateCamera())})),f.default.on("reset",(function(){t.cameraProp=f.default.getCameraProp(t.id),0===t.cameraProp.xpos&&0===t.cameraProp.ypos&&50===t.cameraProp.zpos&&t.resetCamera()})),f.default.on("switch",(function(){t.cameraProp=f.default.getCameraProp(t.id),t.switchCamera()})),f.default.on("searchTime",(function(e,n){e===t.id&&t.searchTime(n)})),f.default.on("switchGrid",(function(e,n){e===t.id&&(t.grid.visible=n)})),f.default.on("switchLabel",(function(e,n){e===t.id&&(t.labelGroup.visible=n)})),f.default.on("switchAxis",(function(e,n){e===t.id&&(t.axis.visible=n)})),f.default.on("switchPlot",(function(e,n){e===t.id&&(t.plot.visible=n)})),f.default.on("changeBackground",(function(e,n){e===t.id&&(t.scene.background=new a.Color(Number(n)))})),f.default.on("clipTube",(function(e,n){e===t.id&&(t.renderer.localClippingEnabled=n)})),f.default.on("switchShade",(function(e,n){e===t.id&&(t.tube.material.uniforms.shade.value=n)})),f.default.on("changeFar",(function(e,n){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.clippingPlane2.constant=n,t.renderer.clippingPlanes=[t.clippingPlane2],t.renderer.render(t.scene,t.camera))})),f.default.on("updateMinMaxH",(function(e){e===t.id&&t.setMinMaxH(f.default.getMinMaxH(t.id))})),f.default.on("updateMinMaxV",(function(e){e===t.id&&t.setMinMaxV(f.default.getMinMaxV(t.id))})),f.default.on("changePlotColor",(function(e){if(e===t.id)t.plotColor=f.default.getPlotColor(t.id),t.drawPlot();else if(t.data.merge){var n=d.default.getFileName(e);t.data.name.indexOf(n)>=0&&(t.plotColor[t.idNameLookup[n]]=f.default.getPlotColor(e),t.drawPlot())}})),f.default.on("timeFitting",(function(e){if(f.default.getChecked(t.id)){var n=f.default.getFocused(t.id)+t.data.spatial[0].z,i=e;n<t.data.spatial[0].z?i=t.data.spatial[0].z:t.data.spatial[t.data.spatial.length-1].z<n&&(i=t.data.spatial[t.data.spatial.length-1].z),t.lock&&f.default.setLock(t.id,i-t.data.spatial[0].z),t.searchTime(i)}})),f.default.on("lockControl",(function(e,n){!n||e.indexOf(t.id)<0?t.lock=!1:(t.lock=!0,t.resetCamera())})),f.default.on("synchronizeTubes",(function(e,n,i,r){if(t.lock&e!==t.id)if(0!==n){var o=t.data.meta.min.z,s=t.data.meta.max.z,l=n+f.default.getLock(t.id)-f.default.getLock(e)+o;o<=l&&l<=s||(l<o?l=o:s<l&&(l=s)),t.searchTime(l)}else i.equals(new a.Vector3(0,0,0))||(t.controls.object.position.set(i.x,i.y,i.z),t.controls.object.rotation.set(r.x,r.y,r.z))})),f.default.on("updateZoomTimeTubes",(function(e){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.updateCamera())})),f.default.on("takeSnapshot",(function(e,n,i){e===t.id&&(t.deselectAll(),t.tubeGroup.position.z=n,void 0!==i&&(t.clippingPlane2.constant=i,t.renderer.clippingPlanes=[t.clippingPlane2]),t.renderer.render(t.scene,t.camera))})),f.default.on("recoverTube",(function(e,n,i){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.tubeGroup.position.z=i,t.updateCamera(),t.renderer.clippingPlanes=[])})),f.default.on("showTimeTubesOfTimeSlice",(function(e,n){e===t.id&&(t.resetCamera(),t.tubeGroup.position.z=f.default.getFocused(e),t.clippingPlane2.constant=n[1]-n[0],t.renderer.clippingPlanes=[t.clippingPlane2],t.showPeriod(n))})),f.default.on("updateAveragePeriod",(function(){if(t.averagePeriod=f.default.getAveragePeriod(),t.averagePeriod>0){var e=d.default.getAverage(t.id,t.tubeGroup.position.z,t.averagePeriod);t.disk.visible=!0,t.disk.position.x=e.x*t.data.meta.range,t.disk.position.y=e.y*t.data.meta.range}else t.disk.visible=!1})),f.default.on("updateTexture",(function(e,n){e===t.id&&(t.tube.material.uniforms.texture.value=n)})),f.default.on("showRotationCenter",(function(e,n,i){e===t.id?(t.resetCamera(),t.tubeGroup.position.z=f.default.getFocused(e),t.diskRotation.visible=!0,t.diskRotation.position.x=i.x*t.data.meta.range,t.diskRotation.position.y=i.y*t.data.meta.range,t.rotationPeriod=n,t.clippingPlane2.constant=n[1]-n[0],t.renderer.clippingPlanes=[t.clippingPlane2],t.showPeriod(n)):t.rotationPeriod=null})),f.default.on("switchComment",(function(e,n){e===t.id&&(n?t.comment.visible=!0:(t.comment.visible=!1,t.commentContents.visible=!1))})),p.default.on("switchQueryMode",(function(e){var n=p.default.getSource();"QBE"===e&&"default"!==n?(t.visualQuery=Number(n)===t.id,t.setQBEView(),t.updateControls(),t.resetSelection()):t.deselectAll()})),p.default.on("updateSource",(function(){var e=p.default.getMode(),n=p.default.getSource();"QBE"===e&&"default"!==n&&(t.visualQuery=Number(n)===t.id,t.setQBEView(),t.updateControls(),t.resetSelection())})),p.default.on("switchDragSelection",(function(){t.dragSelection=p.default.getDragSelection(),t.updateControls()})),p.default.on("resetSelection",(function(){t.tube&&t.deselectAll()})),p.default.on("switchSelector",(function(){t.selector=p.default.getSelector()})),p.default.on("selectTimeInterval",(function(e,n){"QBE"===p.default.getMode()&&Number(e)===t.id&&t.paintSelectedPeriod()})),p.default.on("updateSelectedPeriod",(function(){var e=p.default.getSource();"QBE"===p.default.getMode()&&Number(e)===t.id&&t.paintSelectedPeriod()})),p.default.on("convertResultIntoQuery",(function(e,n,i){"QBE"===p.default.getMode()&&e===t.id&&(t.visualQuery=Number(e)===t.id,t.setQBEView(),t.updateControls(),t.resetSelection(),t.paintSelectedPeriod())}))}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"componentDidMount",value:function(){var t=this.mount.clientWidth,e=this.mount.clientHeight;this.scene=new a.Scene,this.setCameras(t,e),this.renderer=new a.WebGLRenderer({preserveDrawingBuffer:!0}),this.renderer.setClearColor("#000000"),this.renderer.setSize(t,e),this.renderer.localClippingEnabled=!0,this.renderer.domElement.id="TimeTubes_viewport_"+this.id,this.renderer.domElement.className="TimeTubes_viewport",this.canvas=this.renderer.domElement,this.initQBEView(),this.mount.appendChild(this.renderer.domElement),this.renderScene(),this.start(),this.clippingPlane=new a.Plane(new a.Vector3(0,0,-1),0),this.clippingPlane2=new a.Plane(new a.Vector3(0,0,1),0);var n=new a.DirectionalLight(16777215,.7);n.position.set(-20,40,60),this.scene.add(n);var i=new a.AmbientLight(2697513);this.scene.add(i),this.addControls();var r=document.querySelector("#TimeTubes_viewport_"+this.id),o=this.onMouseWheel(),l=this.onMouseDown(),u=this.onMouseMove(),c=this.onMouseUp(),h=this.onMouseClick();r.addEventListener("wheel",o.bind(this),!1),r.addEventListener("mousedown",l.bind(this),!1),r.addEventListener("mousemove",u.bind(this),!1),r.addEventListener("mouseup",c.bind(this),!1),r.addEventListener("click",h.bind(this),!1),this.tubeGroup=new a.Group,this.scene.add(this.tubeGroup),(new a.TextureLoader).load("img/1_256.png",function(t){s.setTexture(this.id,t),this.drawTube(t)}.bind(this)),this.drawGrid(2*f.default.getGridSize(),10),this.drawLabel(f.default.getGridSize()/this.data.meta.range),this.drawAxis(),this.drawPlot(),this.drawDisk(),this.drawDiskForRotationCenter(),this.drawComment(),this.drawPeriodMarker()}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate.bind(this)))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.renderScene(),this.frameId=window.requestAnimationFrame(this.animate.bind(this))}},{key:"renderScene",value:function(){this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera),this.renderer&&this.renderer.render(this.scene,this.camera)}},{key:"addControls",value:function(){this.controls=new g.default(this.camera,this.renderer.domElement),this.controls.position0.set(0,0,50),this.controls.screenSpacePanning=!1,this.controls.enableZoom=!1}},{key:"updateControls",value:function(){this.visualQuery&&this.dragSelection?this.QBEControls&&(this.QBEControls.enabled=!1):this.QBEControls&&(this.QBEControls.enabled=!0)}},{key:"onMouseWheel",value:function(){return function(t){t.preventDefault();var e=!1,n=this.tubeGroup.position.z,i=this.tubeGroup.position.z+t.deltaY/100;i<0?i=0:i>this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z&&(i=this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z);var r=void 0;for(r=0;r<this.data.spatial.length;r++){var o=this.data.spatial[r].z-this.data.spatial[0].z;if(Math.min(n,i)<o&&o<Math.max(n,i)){i=o,"x"in this.data.spatial[r]&&(e=!0);break}}if(i===this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z&&"x"in this.data.spatial[this.data.spatial.length-1]&&(e=!0),0===i&&"x"in this.data.spatial[0]&&(e=!0),e)if(this.data.merge){for(var c=0,h=0;h<this.data.spatial.length;h++)if("x"in this.data.spatial[h]){if(i===this.data.spatial[h].z-this.data.spatial[0].z){var f=new a.Color(Number("0x"+this.plotColor[this.idNameLookup[this.data.spatial[h].source]].slice(1)));this.changePlotColor(this.currentHighlightedPlot*this.segment,f),this.changePlotColor(c*this.segment,new a.Color("red")),this.currentHighlightedPlot=c}c++}}else for(var p=0;p<this.data.position.length;p++)if(i===this.data.spatial[p].z-this.data.spatial[0].z){var m=new a.Color(Number("0x"+this.plotColor.slice(1)));this.changePlotColor(this.currentHighlightedPlot*this.segment,m),this.changePlotColor(p*this.segment,new a.Color("red")),this.currentHighlightedPlot=p}if(this.periodStartMarker.visible&&(this.periodGroup.position.z=this.periodGroup.position.z+(i-this.tubeGroup.position.z)),this.tubeGroup.position.z=i,this.diskRotation.visible&&(i<this.rotationPeriod[0]-this.data.spatial[0].z||this.rotationPeriod[1]-this.data.spatial[0].z<i)&&(this.diskRotation.visible=!1,this.rotationPeriod=null),this.renderer.clippingPlanes.length>0&&(this.clippingPlane2.constant=this.cameraProp.far),s.updateFocus(this.id,i,e),this.lock&&s.synchronizeTubes(this.id,i,new a.Vector3(0,0,0),new a.Vector3(0,0,0)),l.moveCurrentLineonTimeSelector(this.id,i+this.data.spatial[0].z),u.updateDetails(this.id,i),this.averagePeriod>0){var g=d.default.getAverage(this.id,this.tubeGroup.position.z,this.averagePeriod);this.disk.position.x=g.x*this.data.meta.range,this.disk.position.y=g.y*this.data.meta.range}}.bind(this)}},{key:"onMouseDown",value:function(){return function(t){this.drag=!1}}},{key:"onMouseMove",value:function(){return function(t){if(this.drag=!0,this.drag){if(this.lock){var e=new a.Vector3(this.controls.object.rotation._x,this.controls.object.rotation._y,this.controls.object.rotation._z),n=this.controls.object.position;s.synchronizeTubes(this.id,0,n,e)}if(this.visualQuery&&this.dragSelection){var i=this.getIntersectedIndex(t);if(void 0!==i&&this.tube){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;var r=Math.floor(Math.min(i.a,i.b,i.c)/this.segment),o=void 0;o=this.selector?1:0;for(var l=0;l<this.segment;l++)this.tube.geometry.attributes.selected.array[r*this.segment+l]=o,this.tube.geometry.attributes.selected.array[(r+1)*this.segment+l]=o;for(var u=this.tube.geometry.attributes.selected.array.length/this.tubeNum,h=this.tube.geometry.attributes.selected.array.indexOf(1)%u,f=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%u,d=h;d<=f;d++)this.tube.geometry.attributes.selected.array[u*(this.tubeNum-1)+d]=1;var p=this.data.meta.min.z,m=Math.floor(h/this.segment)*(1/this.division)+p,g=(Math.floor(f/this.segment)+1)*(1/this.division)+p;c.updateSelectedPeriod([m,g]),this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}}}}}},{key:"onMouseUp",value:function(){return function(t){if(this.comment.visible&&!this.drag){var e=void 0,n=new a.Vector2;n.x=t.offsetX/this.renderer.domElement.clientWidth*2-1,n.y=-t.offsetY/this.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(n,this.camera);var i=this.raycaster.intersectObject(this.comment);if(i.length>0&&(e=i[0].face),void 0!==e)if(this.commentContents.visible)this.commentContents.visible=!1;else{this.commentContents.visible=!0;var r=Math.floor(e.a/6),o=this.commentList[r],s=h.getPrivateCommentFromId(o),l=s.timeStamp+"\n"+s.userName+"\n";s.comment.length>30?l+=s.comment.substr(0,50):l+=s.comment,this.commentContents.material.map.text=l,this.commentContents.position.set(-f.default.getGridSize()-10,0,0)}}else if(this.drag){var u=this.cameraProp;u.xpos=this.camera.position.x,u.ypos=this.camera.position.y,u.zpos=this.camera.position.z,this.cameraProp=u}this.drag=!1}}},{key:"onMouseClick",value:function(){return function(t){if(this.visualQuery&&!this.dragSelection){var e=this.getIntersectedIndex(t),n=void 0,i=void 0;if(void 0!==e&&this.tube){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;var r=Math.floor(Math.min(e.a,e.b,e.c)/this.segment),a=(Math.floor(r/this.segment),this.division,this.data.meta.min.z,void 0);a=this.selector?1:0;for(var o=0;o<this.segment;o++)this.tube.geometry.attributes.selected.array[r*this.segment+o]=a,this.tube.geometry.attributes.selected.array[(r+1)*this.segment+o]=a;var l=this.tube.geometry.attributes.selected.array.length/this.tubeNum;n=this.tube.geometry.attributes.selected.array.indexOf(1)%l,i=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%l;for(var u=n;u<=i;u++)this.tube.geometry.attributes.selected.array[l*(this.tubeNum-1)+u]=1;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}if(n>=i)c.updateSelectedPeriod([-1,-1]);else{var h=this.data.meta.min.z,f=Math.floor(n/this.segment)*(1/this.division)+h,d=(Math.floor(i/this.segment)+1)*(1/this.division)+h;c.updateSelectedPeriod([f,d])}}else{for(var p=document.getElementsByClassName("TimeTubes_viewport"),m=0;m<p.length;m++)p[m].style.border="none";var g=document.getElementById("TimeTubes_viewport_"+this.id);g.style.border="solid 3px red",g.style.boxSizing="border-box",s.activateViewport(this.id)}}}},{key:"getIntersectedIndex",value:function(t){var e=void 0,n=new a.Vector2;n.x=t.offsetX/this.QBERenderer.domElement.clientWidth*2-1,n.y=-t.offsetY/this.QBERenderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(n,this.QBECamera);var i=this.raycaster.intersectObject(this.tube);return i.length>0&&(e=i[0].face),e}},{key:"deselectAll",value:function(){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var t=0;t<this.tube.geometry.attributes.selected.array.length;t++)this.tube.geometry.attributes.selected.array[t]=0;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:"resetSelection",value:function(){this.visualQuery||this.deselectAll()}},{key:"selectTimeInterval",value:function(t){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var e=this.tube.geometry.attributes.selected.array.length/this.tubeNum,n=this.tubeGroup.position.z,i=(Math.round(n)*this.division+1)*this.segment+e*(this.tubeNum-1),r=0;r<Math.floor(t)*this.division*this.segment;r++)this.tube.geometry.attributes.selected.array[i+r]=1;for(var a=this.tube.geometry.attributes.selected.array.indexOf(1)%e,o=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%e,s=a;s<=o;s++)this.tube.geometry.attributes.selected.array[e*(this.tubeNum-1)+s]=1;var l=this.data.meta.min.z,u=Math.floor(a/this.segment)*(1/this.division)+l,h=(Math.floor(o/this.segment)+1)*(1/this.division)+l;c.updateSelectedPeriod([u,h]),this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:"paintSelectedPeriod",value:function(){this.deselectAll();var t=p.default.getSelectedPeriod(),e=this.data.meta.min.z,n=this.tube.geometry.attributes.selected.array.length/this.tubeNum,i=Math.ceil(t[0]-e)*this.division*this.segment,r=Math.ceil(t[1]-e)*this.division*this.segment;this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var a=i;a<r;a++)this.tube.geometry.attributes.selected.array[n*(this.tubeNum-1)+a]=1;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:"changePlotColor",value:function(t,e){for(var n=0;n<this.segment;n++)this.plot.geometry.attributes.color.needsUpdate=!0,this.plot.geometry.attributes.color.setXYZ(t+n,e.r,e.g,e.b)}},{key:"setCameras",value:function(t,e){var n=Math.ceil(this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z),i=2*Math.tan(22.5*Math.PI/180),r=t/e;this.cameraSet={},this.cameraSet.perspective=new a.PerspectiveCamera(45,r,.1,n);var o=50*i,l=50*i*r;this.cameraSet.orthographic=new a.OrthographicCamera(-l/2,l/2,o/2,-o/2,.1,n),s.updateCamera(this.id,{xpos:0,ypos:0,zpos:50,fov:45,far:n,depth:i,aspect:r,zoom:1,type:"Perspective"}),this.camera=this.cameraSet.perspective,this.camera.position.z=50,this.camera.lookAt(this.scene.position),$("#farSlider_"+this.id).slider({min:0,max:n,value:n})}},{key:"resetCamera",value:function(){this.camera.position.set(this.cameraProp.xpos,this.cameraProp.ypos,this.cameraProp.zpos),this.camera.zoom=this.cameraProp.zoom,this.controls.reset()}},{key:"updateCamera",value:function(){this.camera.position.set(this.cameraProp.xpos,this.cameraProp.ypos,this.cameraProp.zpos),this.camera.fov=this.cameraProp.fov,this.camera.depth=this.cameraProp.depth,this.camera.aspect=this.cameraProp.aspect,this.camera.zoom=this.cameraProp.zoom,this.camera.updateProjectionMatrix()}},{key:"updateSize",value:function(t,e){this.renderer&&(this.renderer.setSize(t,e),s.updateCamera(this.id,{aspect:t/e}))}},{key:"switchCamera",value:function(){var t=this.camera.position;"Perspective"===this.cameraProp.type?(this.camera=this.cameraSet.perspective,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)):"Orthographic"===this.cameraProp.type&&(this.camera=this.cameraSet.orthographic,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)),this.addControls()}},{key:"searchTime",value:function(t){var e=t-this.data.spatial[0].z;isNaN(e)?alert("Please input numbers."):(this.animationPara.flag=!0,this.animationPara.dep=this.tubeGroup.position.z,this.animationPara.dst=e,this.moveTube())}},{key:"moveTube",value:function(){if(this.animationPara.flag){if(this.animationPara.now<this.animationPara.speed){requestAnimationFrame(this.moveTube.bind(this)),this.renderer.render(this.scene,this.camera),this.animationPara.now+=1;var t=(1-Math.cos(Math.PI*this.animationPara.now/this.animationPara.speed))/2;if(this.tubeGroup.position.z=this.animationPara.dep+(this.animationPara.dst-this.animationPara.dep)*t,this.disk.visible){var e=d.default.getAverage(this.id,this.tubeGroup.position.z,this.averagePeriod);this.disk.position.x=e.x*this.data.meta.range,this.disk.position.y=e.y*this.data.meta.range}}this.animationPara.now===this.animationPara.speed&&(u.updateDetails(this.id,this.animationPara.dst),s.updateFocus(this.id,this.animationPara.dst,!1),this.animationPara.flag=!1,this.animationPara.now=0,this.animationPara.dep=0,this.animationPara.dst=0)}else this.animationPara.flag=!1,this.animationPara.dst=0}},{key:"setMinMaxH",value:function(t){this.tube.material.uniforms.minmaxH.value=new a.Vector2(t[0],t[1])}},{key:"setMinMaxV",value:function(t){this.tube.material.uniforms.minmaxV.value=new a.Vector2(t[0],t[1])}},{key:"changePlotsColor",value:function(){if(this.data.merge){for(var t=[],e=[],n=0;n<this.plotColor.length;n++)e.push(new a.Color(this.plotColor[n]));Array(this.data.position.length*this.segment*2),Math.PI,this.segment,this.data.meta.range;for(var i=0;i<this.data.spatial.length;i++)if("x"in this.data.spatial[i])for(var r=this.data.spatial[i].source,o=e[this.idNameLookup[r]],s=0;s<this.segment;s++)t.push(o.r),t.push(o.g),t.push(o.b);this.plot.geometry.addAttribute("color",new a.Float32BufferAttribute(t,3))}else this.plot.material.color=new a.Color(Number("0x"+this.plotColor.slice(1)))}},{key:"updateOpacity",value:function(t){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0;var e=this.opacityCurve.getSpacedPoints(this.tubeNum),n=[];if("Flat"===t)for(var i=1;i<=this.tubeNum;i++)n.push(1);else for(var r=1;r<=this.tubeNum;r++)n.push(1-(1-e[r-1].y)/(1-e[r].y));for(var a=this.tube.geometry.attributes.colorData.array.length/(3*this.segment*this.tubeNum),o=0;o<this.tubeNum;o++)for(var s=0;s<a*this.segment;s++)this.tube.geometry.attributes.colorData.array[a*this.segment*3*o+3*s+2]=n[o];this.renderer.render(this.scene,this.camera)}},{key:"showPeriod",value:function(t){var e=f.default.getGridSize();this.periodGroup.visible=!0,this.periodTube.geometry.attributes.position.needsUpdate=!0;for(var n=this.periodTube.geometry.attributes.position.array.length/2+2,i=t[1]-t[0],r=0;r<this.periodTube.geometry.attributes.position.array.length/3/2;r++)this.periodTube.geometry.attributes.position.array[n+3*r]=-i;this.periodEndMarker.position.set(e+1,e+1,-i),this.periodGroup.position.z=-(t[0]-this.data.spatial[0].z)+this.tubeGroup.position.z,this.periodStartMarker.material.map.text=String(t[0].toFixed(0)),this.periodEndMarker.material.map.text=String(t[1].toFixed(0)),this.renderer.render(this.scene,this.camera)}},{key:"drawTube",value:function(t){this.texture=t;for(var e=this.data.spatial[0].z,n=this.data.spatial[this.data.spatial.length-1].z,i=this.data.meta.range,r=(n-e)/(this.division*Math.ceil(n-e)),o=Math.ceil((this.data.splines.position.getPoint(1).z-this.data.splines.position.getPoint(0).z)/r),l=Math.ceil((this.data.splines.color.getPoint(1).z-this.data.splines.color.getPoint(0).z)/r),u=this.data.splines.position.getSpacedPoints(o),c=this.data.splines.radius.getSpacedPoints(o),h=this.data.splines.color.getSpacedPoints(l),f=Math.ceil((this.data.splines.color.getPoint(0).z-this.data.splines.position.getPoint(0).z)/r),d=2*Math.PI/(this.segment-1),p=[],g=[],v=0;v<this.tubeNum;v++)p[v]=[],g[v]=[];for(var y,b=[],x=0,_=0,w=this.opacityCurve.getSpacedPoints(this.tubeNum),S=[],E=1;E<=this.tubeNum;E++)S.push(1-(1-w[E-1].y)/(1-w[E].y));for(var M=0;M<=o;M++){x=0,_=0,f<M&&M-f<l&&(x=h[M-f].x,_=h[M-f].y);for(var T=0;T<this.segment;T++){for(var C=0;C<this.tubeNum;C++){var k=1/this.tubeNum*(C+1),P=d*T;p[C].push(-1*(u[M].x*i+k*c[M].x*i*Math.cos(P))),p[C].push(u[M].y*i+k*c[M].y*i*Math.sin(P)),p[C].push(u[M].z-e),g[C].push(x),g[C].push(_),g[C].push(S[C])}T!==this.segment-1&&(b.push(T+M*this.segment),b.push(T+this.segment+M*this.segment),b.push(T+1+M*this.segment),b.push(T+this.segment+M*this.segment),b.push(T+1+this.segment+M*this.segment),b.push(T+1+M*this.segment))}}b=b.slice(0,-1*this.segment*3*2),y=new Float32Array(p[0].length/3);for(var A=new Float32Array(p[0].length),O=[],L=0;L<this.tubeNum;L++){var I=new a.BufferGeometry;I.addAttribute("position",new a.BufferAttribute(new Float32Array(p[L]),3)),I.addAttribute("normal",new a.BufferAttribute(A,3)),I.addAttribute("colorData",new a.BufferAttribute(new Float32Array(g[L]),3)),I.addAttribute("selected",new a.BufferAttribute(new Float32Array(y),1)),I.setIndex(new a.BufferAttribute(new Uint32Array(b),1)),I.computeVertexNormals(),O.push(I)}var N=m.default.mergeBufferGeometries(O),R=new a.ShaderMaterial({vertexShader:this.vertex,fragmentShader:this.fragment,uniforms:{lightPosition:{value:new a.Vector3(-20,40,60)},shade:{value:!0},texture:{value:this.texture},minmaxH:{value:new a.Vector2(this.data.meta.min.H,this.data.meta.max.H)},minmaxV:{value:new a.Vector2(this.data.meta.min.V,this.data.meta.max.V)},flagH:{value:!0},flagV:{value:!0}},side:a.DoubleSide,transparent:!0,clipping:!0,clippingPlanes:[this.clippingPlane]});this.tube=new a.Mesh(N,R),this.tubeGroup.add(this.tube),this.tube.rotateY(Math.PI),s.updateMinMaxH(this.id,this.data.meta.min.H,this.data.meta.max.H),s.updateMinMaxV(this.id,this.data.meta.min.V,this.data.meta.max.V);var D=p[this.tubeNum-1],z=g[this.tubeNum-1],B=b;s.uploadTubeAttributes(this.id,D,z,B)}},{key:"drawGrid",value:function(t,e){this.grid=new a.GridHelper(t,e,"white","limegreen"),this.grid.rotateX(Math.PI/2),this.scene.add(this.grid)}},{key:"drawLabel",value:function(t){var e=f.default.getGridSize();this.labelGroup=new a.Group,this.scene.add(this.labelGroup);for(var n=[[1,1],[-1,1],[-1,-1],[1,-1]],i=0;i<n.length;i++){var r=new v.default({material:{color:16777215},redrawInterval:250,textSize:.8,texture:{fontFamily:"Arial, Helvetica, sans-serif",text:"("+n[i][0]*t+", "+n[i][1]*t+")"}});this.labelGroup.add(r),r.position.set(n[i][0]*e,n[i][1]*e,0)}var o=new v.default({material:{color:25600},redrawInterval:250,textSize:1,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"Q/I"}}),s=new v.default({material:{color:25600},redrawInterval:250,textSize:1,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"U/I"}});this.labelGroup.add(o),this.labelGroup.add(s),o.position.set(e+1,0,0),s.position.set(0,e+1,0)}},{key:"drawAxis",value:function(){for(var t=new a.BufferGeometry,e=new a.LineBasicMaterial({color:"white",opacity:.5,clippingPlanes:[this.clippingPlane]}),n=[],i=[],r=0,o=0,s=0;s<this.data.spatial.length;s++)o=this.data.spatial[s].z-this.data.spatial[0].z,n.push(-10),n.push(0),n.push(o),n.push(10),n.push(0),n.push(o),n.push(0),n.push(10),n.push(o),n.push(0),n.push(-10),n.push(o),i.push(r+0),i.push(r+1),i.push(r+2),i.push(r+3),r+=4;t.setIndex(i),t.addAttribute("position",new a.Float32BufferAttribute(n,3)),this.axis=new a.LineSegments(t,e),this.tubeGroup.add(this.axis),this.axis.rotateY(Math.PI)}},{key:"drawPlot",value:function(){if(this.data.merge){for(var t=[],e=[],n=[],i=0;i<this.plotColor.length;i++)n.push(new a.Color(this.plotColor[i]));for(var r=Array(this.data.position.length*this.segment*2),o=0,s=2*Math.PI/this.segment,l=this.data.meta.range,u=0;u<this.data.spatial.length;u++)if("x"in this.data.spatial[u]){var c=this.data.spatial[u].z-this.data.spatial[0].z,h=-this.data.spatial[u].x*l,f=this.data.spatial[u].y*l,d=this.data.spatial[u].r_x*l,p=this.data.spatial[u].r_y*l,m=2*this.segment*o,g=this.data.spatial[u].source,v=n[this.idNameLookup[g]];r[m]=o*this.segment,r[m+2*this.segment-1]=o*this.segment;for(var y=0;y<this.segment;y++)t.push(h+d*Math.cos(s*y)),t.push(f+p*Math.sin(s*y)),t.push(c),e.push(v.r),e.push(v.g),e.push(v.b),0!==y&&(r[m+2*(y-1)+1]=o*this.segment+y,r[m+2*(y-1)+2]=o*this.segment+y);o++}var b=new a.BufferGeometry;b.setIndex(r),b.addAttribute("position",new a.Float32BufferAttribute(t,3)),b.addAttribute("color",new a.Float32BufferAttribute(e,3));var x=new a.LineBasicMaterial({vertexColors:a.VertexColors,clippingPlanes:[this.clippingPlane]});this.plot=new a.LineSegments(b,x)}else{for(var _=[],w=[],S=new a.Color(this.plotColor),E=Array(this.data.position.length*this.segment*2),M=2*Math.PI/this.segment,T=this.data.meta.range,C=0;C<this.data.position.length;C++){var k=this.data.position[C].z-this.data.position[0].z,P=-this.data.position[C].x*T,A=this.data.position[C].y*T,O=this.data.radius[C].x*T,L=this.data.radius[C].y*T,I=2*this.segment*C;E[I]=C*this.segment,E[I+2*this.segment-1]=C*this.segment;for(var N=0;N<this.segment;N++)_.push(P+O*Math.cos(M*N)),_.push(A+L*Math.sin(M*N)),_.push(k),w.push(S.r),w.push(S.g),w.push(S.b),0!==N&&(E[I+2*(N-1)+1]=C*this.segment+N,E[I+2*(N-1)+2]=C*this.segment+N)}var R=new a.BufferGeometry;R.setIndex(E),R.addAttribute("position",new a.Float32BufferAttribute(_,3)),R.addAttribute("color",new a.Float32BufferAttribute(w,3));var D=new a.LineBasicMaterial({vertexColors:a.VertexColors,clippingPlanes:[this.clippingPlane]});this.plot=new a.LineSegments(R,D)}this.tubeGroup.add(this.plot),this.plot.rotateY(Math.PI)}},{key:"drawDisk",value:function(){var t=new a.CircleGeometry(.5,16),e=new a.MeshBasicMaterial({color:16711680,opacity:.8});this.disk=new a.Mesh(t,e),this.scene.add(this.disk),this.disk.visible=!1}},{key:"drawDiskForRotationCenter",value:function(){var t=new a.CircleGeometry(.5,16),e=new a.MeshBasicMaterial({color:16776960,opacity:.8});this.diskRotation=new a.Mesh(t,e),this.scene.add(this.diskRotation),this.diskRotation.visible=!1}},{key:"drawComment",value:function(){this.commentList=[];for(var t=d.default.getFileName(this.id),e=h.getDataFromLocalStorage("privateComment"),n=f.default.getGridSize(),i=[],r=0;r<e.length;r++)e[r].fileName===t&&(this.commentList.push(e[r].id),i.push(n+2+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z));var o=new a.BufferGeometry;o.addAttribute("position",new a.Float32BufferAttribute(i,3));var s=new a.MeshBasicMaterial({color:8433977,side:a.DoubleSide,clippingPlanes:[this.clippingPlane]});this.comment=new a.Mesh(o,s),this.tubeGroup.add(this.comment),this.comment.rotateY(Math.PI),this.commentContents=new v.default({material:{color:16777215},redrawInterval:250,textSize:1.3,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"",align:"left"}}),this.scene.add(this.commentContents),this.commentContents.position.set(-n,n,0)}},{key:"drawPeriodMarker",value:function(){var t=f.default.getGridSize();this.periodStartMarker=new v.default({material:{color:65280,clippingPlanes:[this.clippingPlane]},redrawInterval:250,textSize:1.3,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"start",align:"left"}}),this.periodStartMarker.position.set(t+1,t+1,0),this.periodEndMarker=new v.default({material:{color:16711680,clippingPlanes:[this.clippingPlane]},redrawInterval:250,textSize:1.3,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"end",align:"left"}}),this.periodEndMarker.position.set(t+1,t+1,0);var e=new a.LineCurve3(new a.Vector3(0,0,0),new a.Vector3(0,0,-1)),n=new a.TubeBufferGeometry(e,1,.5,16,!1),i=new a.MeshBasicMaterial({color:255,clippingPlanes:[this.clippingPlane]});this.periodTube=new a.Mesh(n,i),this.periodGroup=new a.Group,this.periodGroup.add(this.periodStartMarker),this.periodGroup.add(this.periodEndMarker),this.periodGroup.add(this.periodTube),this.periodGroup.visible=!1,this.scene.add(this.periodGroup)}},{key:"updateComment",value:function(){this.commentList=[];for(var t=d.default.getFileName(this.id),e=h.getDataFromLocalStorage("privateComment"),n=f.default.getGridSize(),i=[],r=0;r<e.length;r++)e[r].fileName===t&&(this.commentList.push(e[r].id),i.push(n+2+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z));this.comment.geometry.attributes.position.needsUpdate=!0,this.comment.geometry.attributes.position=new a.Float32BufferAttribute(i,3),this.commentContents.visible=!1,this.renderer.render(this.scene,this.camera)}},{key:"initQBEView",value:function(){this.QBECamera=new a.PerspectiveCamera(45,1,.1,2e3),this.QBECamera.position.z=50,this.QBERenderer=new a.WebGLRenderer,this.QBERenderer.setSize(500,500),this.QBERenderer.setClearColor("#000000"),this.QBERenderer.localClippingEnabled=!0,this.QBERenderer.domElement.id="QBE_viewport_"+this.id,this.QBERenderer.domElement.className="TimeTubes_viewport"}},{key:"setQBEView",value:function(){var t=document.getElementById("QBE_viewport_"+this.id);if(this.visualQuery){this.QBECamera.lookAt(this.scene.position),this.QBECamera.far=this.camera.far;var e=30;Number($("#QBESource").css("padding-left"))?e=2*Number($("#QBESource").css("padding-left").replace("px","")):Number($("#QBESource").css("padding"))&&(e=2*Number($("#QBESource").css("padding").replace("px","")));var n=$("#QBESource").outerWidth(!0)-(e>=0?e:0);if(this.QBERenderer.setSize(n,n),null!=t)t.style.display="block";else{var i=document.getElementById("QBESourceTT"),r=this.onMouseWheel(),a=this.onMouseDown(),o=this.onMouseMove(),s=this.onMouseUp(),l=this.onMouseClick();i.appendChild(this.QBERenderer.domElement),i.addEventListener("wheel",r.bind(this),!1),i.addEventListener("mousedown",a.bind(this),!1),i.addEventListener("mousemove",o.bind(this),!1),i.addEventListener("mouseup",s.bind(this),!1),i.addEventListener("click",l.bind(this),!1),this.QBEControls=new g.default(this.QBECamera,this.QBERenderer.domElement),this.QBEControls.position0.set(0,0,50),this.QBEControls.screenSpacePanning=!1,this.QBEControls.enableZoom=!1}}else null!=t&&(t.style.display="none")}}]),e}(r.default.Component);e.default=x},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(69))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(71),r=n(26);t.exports=function(t,e){return t&&i(t,e,r)}},function(t,e,n){var i=n(128)();t.exports=i},function(t,e,n){var i=n(129),r=n(46),a=n(6),o=n(30),s=n(47),l=n(48),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&r(t),h=!n&&!c&&o(t),f=!n&&!c&&!h&&l(t),d=n||c||h||f,p=d?i(t.length,String):[],m=p.length;for(var g in t)!e&&!u.call(t,g)||d&&("length"==g||h&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(32);t.exports=function(t){return"function"==typeof t?t:i}},function(t,e,n){var i=n(19),r=n(54),a=n(16),o="[object Object]",s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,h=u.call(Object);t.exports=function(t){if(!a(t)||i(t)!=o)return!1;var e=r(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==h}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var i=n(164),r=n(16);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,a,o,t,s))}},function(t,e,n){var i=n(165),r=n(168),a=n(169),o=1,s=2;t.exports=function(t,e,n,l,u,c){var h=n&o,f=t.length,d=e.length;if(f!=d&&!(h&&d>f))return!1;var p=c.get(t);if(p&&c.get(e))return p==e;var m=-1,g=!0,v=n&s?new i:void 0;for(c.set(t,e),c.set(e,t);++m<f;){var y=t[m],b=e[m];if(l)var x=h?l(b,y,m,e,t,c):l(y,b,m,t,e,c);if(void 0!==x){if(x)continue;g=!1;break}if(v){if(!r(e,(function(t,e){if(!a(v,e)&&(y===t||u(y,t,n,l,c)))return v.push(e)}))){g=!1;break}}else if(y!==b&&!u(y,b,n,l,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},function(t,e,n){var i=n(12).Uint8Array;t.exports=i},function(t,e,n){var i=n(82),r=n(57),a=n(26);t.exports=function(t){return i(t,a,r)}},function(t,e,n){var i=n(83),r=n(6);t.exports=function(t,e,n){var a=e(t);return r(t)?a:i(a,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var i=n(10);t.exports=function(t){return t==t&&!i(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var i=n(88),r=n(40);t.exports=function(t,e){for(var n=0,a=(e=i(e,t)).length;null!=t&&n<a;)t=t[r(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var i=n(6),r=n(58),a=n(182),o=n(185);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:a(o(t))}},function(t,e,n){var i=n(70),r=n(194)(i);t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},function(t,e,n){var i=n(59),r=n(27),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&r(o,n)&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e,n){var i=n(20),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},function(t,e,n){(function(t){var i=n(12),r=e&&!e.nodeType&&e,a=r&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===r?i.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=s?s(n):new t.constructor(n);return t.copy(i),i}}).call(this,n(31)(t))},function(t,e){t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},function(t,e,n){var i=n(83),r=n(54),a=n(57),o=n(84),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,a(t)),t=r(t);return e}:o;t.exports=s},function(t,e,n){var i=n(60);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var i=n(210),r=n(54),a=n(52);t.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:i(r(t))}},function(t,e,n){var i=n(59),r=n(27);t.exports=function(t,e,n){(void 0===n||r(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var i=n(10),r=n(243),a=n(244),o="Expected a function",s=Math.max,l=Math.min;t.exports=function(t,e,n){var u,c,h,f,d,p,m=0,g=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError(o);function b(e){var n=u,i=c;return u=c=void 0,m=e,f=t.apply(i,n)}function x(t){var n=t-p;return void 0===p||n>=e||n<0||v&&t-m>=h}function _(){var t=r();if(x(t))return w(t);d=setTimeout(_,function(t){var n=e-(t-p);return v?l(n,h-(t-m)):n}(t))}function w(t){return d=void 0,y&&u?b(t):(u=c=void 0,f)}function S(){var t=r(),n=x(t);if(u=arguments,c=this,p=t,n){if(void 0===d)return function(t){return m=t,d=setTimeout(_,e),g?b(t):f}(p);if(v)return clearTimeout(d),d=setTimeout(_,e),b(p)}return void 0===d&&(d=setTimeout(_,e)),f}return e=a(e)||0,i(n)&&(g=!!n.leading,h=(v="maxWait"in n)?s(a(n.maxWait)||0,e):h,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==d&&clearTimeout(d),m=0,u=p=c=d=void 0},S.flush=function(){return void 0===d?f:w(r())},S}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorWrap=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),o=u(a),s=u(n(100)),l=u(n(13));function u(t){return t&&t.__esModule?t:{default:t}}var c=e.ColorWrap=function(t){var e=function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.handleChange=function(t,n){if(l.default.simpleCheckForValidColor(t)){var i=l.default.toState(t,t.h||e.state.oldHue);e.setState(i),e.props.onChangeComplete&&e.debounce(e.props.onChangeComplete,i,n),e.props.onChange&&e.props.onChange(i,n)}},e.handleSwatchHover=function(t,n){if(l.default.simpleCheckForValidColor(t)){var i=l.default.toState(t,t.h||e.state.oldHue);e.props.onSwatchHover&&e.props.onSwatchHover(i,n)}},e.state=i({},l.default.toState(t.color,0)),e.debounce=(0,s.default)((function(t,e,n){t(e,n)}),100),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),r(n,[{key:"componentWillReceiveProps",value:function(t){this.setState(i({},l.default.toState(t.color,this.state.oldHue)))}},{key:"render",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),o.default.createElement(t,i({},this.props,this.state,{onChange:this.handleChange},e))}}]),n}(a.PureComponent||a.Component);return e.propTypes=i({},t.propTypes),e.defaultProps=i({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e};e.default=c},function(t,e,n){"use strict";n.r(e),n.d(e,"red",(function(){return i})),n.d(e,"pink",(function(){return r})),n.d(e,"purple",(function(){return a})),n.d(e,"deepPurple",(function(){return o})),n.d(e,"indigo",(function(){return s})),n.d(e,"blue",(function(){return l})),n.d(e,"lightBlue",(function(){return u})),n.d(e,"cyan",(function(){return c})),n.d(e,"teal",(function(){return h})),n.d(e,"green",(function(){return f})),n.d(e,"lightGreen",(function(){return d})),n.d(e,"lime",(function(){return p})),n.d(e,"yellow",(function(){return m})),n.d(e,"amber",(function(){return g})),n.d(e,"orange",(function(){return v})),n.d(e,"deepOrange",(function(){return y})),n.d(e,"brown",(function(){return b})),n.d(e,"grey",(function(){return x})),n.d(e,"blueGrey",(function(){return _})),n.d(e,"darkText",(function(){return w})),n.d(e,"lightText",(function(){return S})),n.d(e,"darkIcons",(function(){return E})),n.d(e,"lightIcons",(function(){return M})),n.d(e,"white",(function(){return T})),n.d(e,"black",(function(){return C}));var i={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},a={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},o={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},u={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},c={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},h={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},f={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},d={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},p={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},m={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},g={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},y={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},b={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},x={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},_={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},w={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},S={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},E={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},M={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},T="#ffffff",C="#000000";e.default={red:i,pink:r,purple:a,deepPurple:o,indigo:s,blue:l,lightBlue:u,cyan:c,teal:h,green:f,lightGreen:d,lime:p,yellow:m,amber:g,orange:v,deepOrange:y,brown:b,grey:x,blueGrey:_,darkText:w,lightText:S,darkIcons:E,lightIcons:M,white:T,black:C}},function(t,e,n){var i=n(15);i.OrbitControls=function(t,e){var n,r,a,o,s;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new i.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN},this.touches={ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(u),l.update(),d=f.NONE},this.update=(n=new i.Vector3,r=(new i.Quaternion).setFromUnitVectors(t.up,new i.Vector3(0,1,0)),a=r.clone().inverse(),o=new i.Vector3,s=new i.Quaternion,function(){var t=l.object.position;return n.copy(t).sub(l.target),n.applyQuaternion(r),m.setFromVector3(n),l.autoRotate&&d===f.NONE&&A(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(m.theta+=g.theta*l.dampingFactor,m.phi+=g.phi*l.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi),m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),!0===l.enableDamping?l.target.addScaledVector(y,l.dampingFactor):l.target.add(y),n.setFromSpherical(m),n.applyQuaternion(a),t.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(g.theta*=1-l.dampingFactor,g.phi*=1-l.dampingFactor,y.multiplyScalar(1-l.dampingFactor)):(g.set(0,0,0),y.set(0,0,0)),v=1,!!(b||o.distanceToSquared(l.object.position)>p||8*(1-s.dot(l.object.quaternion))>p)&&(l.dispatchEvent(u),o.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",tt,!1),l.domElement.removeEventListener("mousedown",q,!1),l.domElement.removeEventListener("wheel",X,!1),l.domElement.removeEventListener("touchstart",Z,!1),l.domElement.removeEventListener("touchend",K,!1),l.domElement.removeEventListener("touchmove",J,!1),document.removeEventListener("mousemove",Q,!1),document.removeEventListener("mouseup",Y,!1),l.domElement.removeEventListener("keydown",$,!1)};var l=this,u={type:"change"},c={type:"start"},h={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=f.NONE,p=1e-6,m=new i.Spherical,g=new i.Spherical,v=1,y=new i.Vector3,b=!1,x=new i.Vector2,_=new i.Vector2,w=new i.Vector2,S=new i.Vector2,E=new i.Vector2,M=new i.Vector2,T=new i.Vector2,C=new i.Vector2,k=new i.Vector2;function P(){return Math.pow(.95,l.zoomSpeed)}function A(t){g.theta-=t}function O(t){g.phi-=t}var L,I=(L=new i.Vector3,function(t,e){L.setFromMatrixColumn(e,0),L.multiplyScalar(-t),y.add(L)}),N=function(){var t=new i.Vector3;return function(e,n){!0===l.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(l.object.up,t)),t.multiplyScalar(e),y.add(t)}}(),R=function(){var t=new i.Vector3;return function(e,n){var i=l.domElement;if(l.object.isPerspectiveCamera){var r=l.object.position;t.copy(r).sub(l.target);var a=t.length();a*=Math.tan(l.object.fov/2*Math.PI/180),I(2*e*a/i.clientHeight,l.object.matrix),N(2*n*a/i.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(I(e*(l.object.right-l.object.left)/l.object.zoom/i.clientWidth,l.object.matrix),N(n*(l.object.top-l.object.bottom)/l.object.zoom/i.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function D(t){l.object.isPerspectiveCamera?v/=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function z(t){l.object.isPerspectiveCamera?v*=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function B(t){x.set(t.clientX,t.clientY)}function F(t){S.set(t.clientX,t.clientY)}function j(t){if(1==t.touches.length)x.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);x.set(e,n)}}function V(t){if(1==t.touches.length)S.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);S.set(e,n)}}function U(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);T.set(0,i)}function H(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}w.subVectors(_,x).multiplyScalar(l.rotateSpeed);var i=l.domElement;A(2*Math.PI*w.x/i.clientHeight),O(2*Math.PI*w.y/i.clientHeight),x.copy(_)}function G(t){if(1==t.touches.length)E.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);E.set(e,n)}M.subVectors(E,S).multiplyScalar(l.panSpeed),R(M.x,M.y),S.copy(E)}function W(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);C.set(0,i),k.set(0,Math.pow(C.y/T.y,l.zoomSpeed)),D(k.y),T.copy(C)}function q(t){if(!1!==l.enabled){switch(t.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),t.button){case 0:switch(l.mouseButtons.LEFT){case i.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enablePan)return;F(t),d=f.PAN}else{if(!1===l.enableRotate)return;B(t),d=f.ROTATE}break;case i.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enableRotate)return;B(t),d=f.ROTATE}else{if(!1===l.enablePan)return;F(t),d=f.PAN}break;default:d=f.NONE}break;case 1:switch(l.mouseButtons.MIDDLE){case i.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(t){T.set(t.clientX,t.clientY)}(t),d=f.DOLLY;break;default:d=f.NONE}break;case 2:switch(l.mouseButtons.RIGHT){case i.MOUSE.ROTATE:if(!1===l.enableRotate)return;B(t),d=f.ROTATE;break;case i.MOUSE.PAN:if(!1===l.enablePan)return;F(t),d=f.PAN;break;default:d=f.NONE}}d!==f.NONE&&(document.addEventListener("mousemove",Q,!1),document.addEventListener("mouseup",Y,!1),l.dispatchEvent(c))}}function Q(t){if(!1!==l.enabled)switch(t.preventDefault(),d){case f.ROTATE:if(!1===l.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),w.subVectors(_,x).multiplyScalar(l.rotateSpeed);var e=l.domElement;A(2*Math.PI*w.x/e.clientHeight),O(2*Math.PI*w.y/e.clientHeight),x.copy(_),l.update()}(t);break;case f.DOLLY:if(!1===l.enableZoom)return;!function(t){C.set(t.clientX,t.clientY),k.subVectors(C,T),k.y>0?D(P()):k.y<0&&z(P()),T.copy(C),l.update()}(t);break;case f.PAN:if(!1===l.enablePan)return;!function(t){E.set(t.clientX,t.clientY),M.subVectors(E,S).multiplyScalar(l.panSpeed),R(M.x,M.y),S.copy(E),l.update()}(t)}}function Y(t){!1!==l.enabled&&(document.removeEventListener("mousemove",Q,!1),document.removeEventListener("mouseup",Y,!1),l.dispatchEvent(h),d=f.NONE)}function X(t){!1===l.enabled||!1===l.enableZoom||d!==f.NONE&&d!==f.ROTATE||(t.preventDefault(),t.stopPropagation(),l.dispatchEvent(c),function(t){t.deltaY<0?z(P()):t.deltaY>0&&D(P()),l.update()}(t),l.dispatchEvent(h))}function $(t){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(t){var e=!1;switch(t.keyCode){case l.keys.UP:R(0,l.keyPanSpeed),e=!0;break;case l.keys.BOTTOM:R(0,-l.keyPanSpeed),e=!0;break;case l.keys.LEFT:R(l.keyPanSpeed,0),e=!0;break;case l.keys.RIGHT:R(-l.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),l.update())}(t)}function Z(t){if(!1!==l.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(l.touches.ONE){case i.TOUCH.ROTATE:if(!1===l.enableRotate)return;j(t),d=f.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===l.enablePan)return;V(t),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(l.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&U(t),l.enablePan&&V(t)}(t),d=f.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&U(t),l.enableRotate&&j(t)}(t),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&l.dispatchEvent(c)}}function J(t){if(!1!==l.enabled)switch(t.preventDefault(),t.stopPropagation(),d){case f.TOUCH_ROTATE:if(!1===l.enableRotate)return;H(t),l.update();break;case f.TOUCH_PAN:if(!1===l.enablePan)return;G(t),l.update();break;case f.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&W(t),l.enablePan&&G(t)}(t),l.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&W(t),l.enableRotate&&H(t)}(t),l.update();break;default:d=f.NONE}}function K(t){!1!==l.enabled&&(l.dispatchEvent(h),d=f.NONE)}function tt(t){!1!==l.enabled&&t.preventDefault()}l.domElement.addEventListener("contextmenu",tt,!1),l.domElement.addEventListener("mousedown",q,!1),l.domElement.addEventListener("wheel",X,!1),l.domElement.addEventListener("touchstart",Z,!1),l.domElement.addEventListener("touchend",K,!1),l.domElement.addEventListener("touchmove",J,!1),l.domElement.addEventListener("keydown",$,!1),-1===l.domElement.tabIndex&&(l.domElement.tabIndex=0),this.update()},i.OrbitControls.prototype=Object.create(i.EventDispatcher.prototype),i.OrbitControls.prototype.constructor=i.OrbitControls,i.MapControls=function(t,e){i.OrbitControls.call(this,t,e),this.mouseButtons.LEFT=i.MOUSE.PAN,this.mouseButtons.RIGHT=i.MOUSE.ROTATE,this.touches.ONE=i.TOUCH.PAN,this.touches.TWO=i.TOUCH.DOLLY_ROTATE},i.MapControls.prototype=Object.create(i.EventDispatcher.prototype),i.MapControls.prototype.constructor=i.MapControls,t.exports=e.default=i.OrbitControls},function(t,e,n){var i,r,a;(function(o,s){var l=(o=o||n(299)).window,u=o.document,c=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],n=e.slice,i=Object.create,r=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=e.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},l=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},u=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},c=function(t,e,n){if(t){var i=r(t,"length");(i&&"number"==typeof i.value?o:l).call(t,e,n=n||t)}return n};function h(e,n,i,o,s){var l={};function u(t,u){"string"==typeof(u=u||(u=r(n,t))&&(u.get?u:u.value))&&"#"===u[0]&&(u=e[u.substring(1)]||u);var c,h="function"==typeof u,d=u,p=s||h&&!u.base?u&&u.get?t in e:e[t]:null;s&&p||(h&&p&&(u.base=p),h&&!1!==o&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),d&&!h&&d.get&&"function"==typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(r(e,t)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=i?i:!c),a(e,t,d))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&u(c);for(var c in l){var h=l[c],d=e["set"+h],p=e["get"+h]||d&&e["is"+h];!p||!0!==o&&0!==p.length||u(c,{get:p,set:d})}}return e}function f(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&u(this,n)}return this}return h(f,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&h(this.prototype,t,t.enumerable,n,i),h(this,e,null,n,i)}for(var r=1,a=arguments.length;r<a;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,r=this,o=0,s=arguments.length;o<s&&(!t||!e);o++)n=arguments[o],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){r.apply(this,arguments)}).prototype=e||i(this.prototype),a(e,"constructor",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=r,t}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=i(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:u,each:c,create:i,define:a,describe:r,clone:function(t){return u(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===f||"Object"===e.name)},pick:function(t,e){return t!==s?t:e},slice:function(t,e,i){return n.call(t,e,i)}}})};t.exports=c,c.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?p.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!c.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===c){var r=this.peek(t,e);return t.__index++,r}var a=this.prototype,o=a._readIndex,l=e||o&&t.__index||0,u=t.length,h=t[l];if(i=i||u-l,h instanceof this||n&&n.readNull&&null==h&&i<=1)return o&&(t.__index=l+1),h&&n&&n.clone?h.clone():h;if(h=c.create(a),o&&(h.__read=!0),h=h.initialize.apply(h,l>0||l+i<u?c.slice(t,l,l+i):t)||h,o){t.__index=l+h.__read;var f=h.__filtered;f&&(t.__filtered=f,h.__filtered=s),h.__read=s}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,a=[],o=e||0,s=i?o+i:t.length,l=o;l<s;l++)a.push(Array.isArray(r=t[l])?this.read(r,0,n):this.read(t,l,n,1));return a},readNamed:function(t,e,n,i,r){var a=this.getNamed(t,e),o=a!==s;if(o){var l=t.__filtered;l||((l=t.__filtered=c.create(t[0])).__unfiltered=t[0]),l[e]=s}var u=o?[a]:t;return this.read(u,n,i,r)},getNamed:function(t,e){var n=t[0];if(t._hasObject===s&&(t._hasObject=1===t.length&&c.isPlainObject(n)),t._hasObject)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){var r;function a(i){if(!(n&&i in n||r&&i in r)){var a=e[i];a!==s&&(t[i]=a)}}if(i){for(var o,l={},u=0,c=i.length;u<c;u++)(o=i[u])in e&&(a(o),l[o]=!0);r=l}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,a=!i;if(a&&(e.formatter=new p(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),a=t._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!a&&n||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var s=0,l=t.length;s<l;s++)r[s]=c.serialize(t[s],e,n,i)}else if(c.isPlainObject(t)){r={};var u=Object.keys(t);for(s=0,l=u.length;s<l;s++){var h=u[s];r[h]=c.serialize(t[h],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var a=t,o=!n,s=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var l=t[0],u="dictionary"===l;if(1==t.length&&/^#/.test(l))return n.dictionary[l];a=[];for(var h=(l=c.exports[l])?1:0,f=t.length;h<f;h++)a.push(c.deserialize(t[h],e,n,u,s));if(l){var d=a;a=e?e(l,d,o||r):new l(d)}}else if(c.isPlainObject(t))for(var p in a={},i&&(n.dictionary=a),t)a[p]=c.deserialize(t[p],e,n);return s?a[1]:a},exportJSON:function(t,e){var n=c.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return c.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,n,i){var r=i&&e&&e.constructor===t,a=r?e:c.create(t.prototype);if(1===n.length&&a instanceof T&&(r||!(a instanceof k))){var o=n[0];c.isPlainObject(o)&&(o.insert=!1,r&&(n=n.concat([{insert:!0}])))}return(r?a.set:t).apply(a,n),r&&(e=null),a}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,e,n,i){var r=e&&e.length,a=n===s;(n=a?t.length:n)>t.length&&(n=t.length);for(var o=0;o<r;o++)e[o]._index=n+o;if(a)return c.push(t,e),[];var l=[n,i];e&&c.push(l,e);for(var u=t.splice.apply(t,l),h=(o=0,u.length);o<h;o++)u[o]._index=s;for(o=n+r,h=t.length;o<h;o++)t[o]._index=o;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(t,e){if("string"!=typeof t)c.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,r=i&&i[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(n=a.indexOf(e))&&1===a.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&a.splice(n,1)),this}c.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=c.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,i)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var a=e[r],o=a&&a[i];o&&o.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};c.each(n,(function(t,n){var r="string"==typeof t,a=r?t:n,o=c.capitalize(a),s=a.substring(2).toLowerCase();i[s]=r?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(s,e),t&&this.on(s,t),this[a]=t}})),e._eventTypes=i}return t.base.apply(this,arguments)}}},f=c.extend({_class:"PaperScope",initialize:function t(){ht=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=st.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:lt.nativeModes},st.release(n)}if(!this.agent){var i=o.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],a="darwin"===r?"mac":r,s=e.agent=e.browser={platform:a};a&&(s[a]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,n,i,r){if(!s.chrome){var a="opera"===e?i:/^(node|trident)$/.test(e)?r:n;s.version=a,s.versionNumber=parseFloat(a),e={trident:"msie",jsdom:"node"}[e]||e,s.name=e,s[e]=!0}})),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.12.3",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=ht.PaperScript.execute(t,this,e);return Z.updateFocus(),n},install:function(t){var e=this;for(var n in c.each(["project","view","tool"],(function(n){c.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ht=this,this.project=new M(t),this},createCanvas:function(t,e){return st.getCanvas(t,e)},activate:function(){ht=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),d=c.extend(h,{initialize:function(t){this._scope=ht,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),p=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});p.instance=new p;var m=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function o(t,e,n){return t<e?e:t>n?n:t}function s(t,e,i){function r(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var a=e*e-t*i,o=e*e+t*i;if(3*n(a)<o){var s=r(t),l=r(e),u=r(i),c=e*e,h=t*i;a=c-h+(l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1]-(s[0]*u[0]-h+s[0]*u[1]+s[1]*u[0]+s[1]*u[1]))}return a}function l(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?r(2,-Math.round(a(t))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:o,integrate:function(n,i,r,a){for(var o=t[a-2],s=e[a-2],l=.5*(r-i),u=l+i,c=0,h=a+1>>1,f=1&a?s[c++]*n(u):0;c<h;){var d=l*o[c];f+=s[c++]*(n(u+d)+n(u-d))}return l*f},findRoot:function(t,e,i,r,a,s,l){for(var u=0;u<s;u++){var c=t(i),h=c/e(i),f=i-h;if(n(h)<l){i=f;break}c>0?(a=i,i=f<=r?.5*(r+a):f):(r=i,i=f>=a?.5*(r+a):f)}return o(i,r,a)},solveQuadratic:function(t,e,r,a,u,c){var h,f=1/0;if(n(t)<1e-12){if(n(e)<1e-12)return n(r)<1e-12?-1:0;h=-r/e}else{var d=s(t,e*=-.5,r);if(d&&n(d)<112e-18){var p=l(n(t),n(e),n(r));p&&(d=s(t*=p,e*=p,r*=p))}if(d>=-112e-18){var m=d<0?0:i(d),g=e+(e<0?-m:m);0===g?f=-(h=r/t):(h=g/t,f=r/g)}}var v=0,y=null==u,b=u-1e-12,x=c+1e-12;return isFinite(h)&&(y||h>b&&h<x)&&(a[v++]=y?h:o(h,u,c)),f!==h&&isFinite(f)&&(y||f>b&&f<x)&&(a[v++]=y?f:o(f,u,c)),v},solveCubic:function(t,e,a,s,u,c,h){var f,d,p,g,v,y=l(n(t),n(e),n(a),n(s));function b(n){var i=t*(f=n);g=(i+(d=i+e))*f+(p=d*f+a),v=p*f+s}if(y&&(t*=y,e*=y,a*=y,s*=y),n(t)<1e-12)t=e,d=a,p=s,f=1/0;else if(n(s)<1e-12)d=e,p=a,f=0;else{b(-e/t/3);var x=v/t,_=r(n(x),1/3),w=x<0?-1:1,S=-g/t,E=S>0?1.324717957244746*Math.max(_,i(S)):_,M=f-w*E;if(M!==f){do{b(M),M=0===g?f:f-v/g/(1+112e-18)}while(w*M>w*f);n(t)*f*f>n(s/f)&&(d=((p=-s/f)-a)/f)}}var T=m.solveQuadratic(t,d,p,u,c,h),C=null==c;return isFinite(f)&&(0===T||T>0&&f!==u[0]&&f!==u[1])&&(C||f>c-1e-12&&f<h+1e-12)&&(u[T++]=C?f:o(f,c,h)),T}}},g={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},v=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new v(this.x,this.y)},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();m.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=v.read(arguments),e=this.getLength()*t.getLength();if(m.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=v.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=v.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n,r=c.read(arguments);return r?i:Math.sqrt(i)},normalize:function(t){t===s&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new v(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new v(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=v.read(arguments);return new v(this.x+t.x,this.y+t.y)},subtract:function(){var t=v.read(arguments);return new v(this.x-t.x,this.y-t.y)},multiply:function(){var t=v.read(arguments);return new v(this.x*t.x,this.y*t.y)},divide:function(){var t=v.read(arguments);return new v(this.x/t.x,this.y/t.y)},modulo:function(){var t=v.read(arguments);return new v(this.x%t.x,this.y%t.y)},negate:function(){return new v(-this.x,-this.y)},isInside:function(){return _.read(arguments).contains(this)},isClose:function(){var t=v.read(arguments),e=c.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=v.read(arguments);return v.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=v.read(arguments);return v.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=m.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=v.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=v.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=v.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new v(t.x*e,t.y*e)},statics:{min:function(){var t=v.read(arguments),e=v.read(arguments);return new v(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=v.read(arguments),e=v.read(arguments);return new v(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new v(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},c.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new v(e(this.x),e(this.y))}}),{})),y=v.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),b=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var t=p.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=b.read(arguments);return new b(this.width+t.width,this.height+t.height)},subtract:function(){var t=b.read(arguments);return new b(this.width-t.width,this.height-t.height)},multiply:function(){var t=b.read(arguments);return new b(this.width*t.width,this.height*t.height)},divide:function(){var t=b.read(arguments);return new b(this.width/t.width,this.height/t.height)},modulo:function(){var t=b.read(arguments);return new b(this.width%t.width,this.height%t.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var t=m.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new b(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new b(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new b(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new b(e(this.width),e(this.height))}}),{})),x=b.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),_=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r,a=typeof t;if("number"===a?(this._set(t,e,n,i),r=4):"undefined"===a||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==s||t.width!==s?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===s&&t.to===s&&(this._set(0,0,0,0),c.filter(this,t),r=1)),r===s){var o,l,u=v.readNamed(arguments,"from"),h=c.peek(arguments),f=u.x,d=u.y;if(h&&h.x!==s||c.hasNamed(arguments,"to")){var p=v.readNamed(arguments,"to");o=p.x-f,l=p.y-d,o<0&&(f=p.x,o=-o),l<0&&(d=p.y,l=-l)}else{var m=b.read(arguments);o=m.width,l=m.height}this._set(f,d,o,l),r=arguments.__index;var g=arguments.__filtered;g&&(this.__filtered=g)}return this.__read&&(this.__read=r),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new _(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?_.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=p.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?v:y)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=v.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?b:x)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=b.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?v:y)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=v.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==s||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(_.read(arguments)):this._containsPoint(v.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=_.read(arguments),e=c.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=_.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new _(e,n,i-e,r-n)},unite:function(){var t=_.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new _(e,n,i-e,r-n)},include:function(){var t=v.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new _(e,n,i-e,r-n)},expand:function(){var t=b.read(arguments),e=t.width,n=t.height;return new _(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===s?t:e)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],a=t[i?1:0],o="get"+r,s="get"+a,l="set"+r,u="set"+a,c="set"+n;this["get"+n]=function(t){return new(t?v:y)(this[o](),this[s](),this,c)},this[c]=function(){var t=v.read(arguments);this[l](t.x),this[u](t.y)}}),{beans:!0})),w=_.extend({initialize:function(t,e,n,i,r,a){this._set(t,e,n,i,!0),this._owner=r,this._setter=a},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=_.prototype;return c.each(["x","y","width","height"],(function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),S=c.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments.length,r=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):r=!1:i?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,a,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=p.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=v.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=v.read(arguments),e=v.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=v.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),a=Math.sin(t),o=n-n*r+i*a,s=i-n*a-i*r,l=this._a,u=this._b,c=this._c,h=this._d;return this._a=r*l+a*c,this._b=r*u+a*h,this._c=-a*l+r*c,this._d=-a*u+r*h,this._tx+=o*l+s*c,this._ty+=o*u+s*h,this._changed(),this},shear:function(){var t=v.read(arguments),e=v.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=v.read(arguments),e=v.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new v(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,o=t._a,s=t._c,l=t._b,u=t._d,c=t._tx,h=t._ty;this._a=o*n+l*r,this._c=s*n+u*r,this._b=o*i+l*a,this._d=s*i+u*a,this._tx+=c*n+h*r,this._ty+=c*i+h*a,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,o=this._tx,s=this._ty,l=t._a,u=t._c,c=t._b,h=t._d,f=t._tx,d=t._ty;this._a=l*n+u*i,this._c=l*r+u*a,this._b=c*n+h*i,this._d=c*r+h*a,this._tx=l*o+u*s+f,this._ty=c*o+h*s+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,o=t*i-e*n,s=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(a)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*a-i*r)/o,this._ty=(e*r-t*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(v.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new v),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var a=t[i],o=t[i+1];e[i]=a*this._a+o*this._c+this._tx,e[i+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,a=[e,n,i,n,i,r,e,r];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),a=r.slice(),o=2;o<8;o++){var s=i[o],l=1&o;s<r[l]?r[l]=s:s>a[l]&&(a[l]=s)}return e||(e=new _),e._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(v.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,a=this._c,o=this._d,s=this._tx,l=this._ty,u=i*o-r*a,c=null;if(u&&!isNaN(u)&&isFinite(s)&&isFinite(l)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new v),c=e._set((h*o-f*a)/u,(f*i-h*r)/u,n)}return c},decompose:function(){var t,e,n,i=this._a,r=this._b,a=this._c,o=this._d,s=i*o-r*a,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var h=l(i*i+r*r);t=Math.acos(i/h)*(r>0?1:-1),e=[h,s/h],n=[u(i*a+r*o,h*h),0]}else if(0!==a||0!==o){var f=l(a*a+o*o);t=Math.asin(a/f)*(o>0?1:-1),e=[s/f,f],n=[0,u(i*a+r*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new v(e),skewing:new v(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new v(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],(function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),E=c.extend({_class:"Line",initialize:function(t,e,n,i,r){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,a=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new v(this._px,this._py)},getVector:function(){return new v(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return E.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return E.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return E.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return v.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return v.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,a,o,s,l,u){l||(n-=t,i-=e,o-=r,s-=a);var c=n*s-i*o;if(!m.isZero(c)){var h=t-r,f=e-a,d=(o*f-s*h)/c,p=(n*f-i*h)/c;if(u||-1e-12<d&&d<1+1e-12&&-1e-12<p&&p<1+1e-12)return u||(d=d<=0?0:d>=1?1:d),new v(t+d*n,e+d*i)}},getSide:function(t,e,n,i,r,a,o,s){o||(n-=t,i-=e);var l=r-t,u=l*i-(a-e)*n;return!s&&m.isZero(u)&&(u=(l*n+l*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,n,i,r,a,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?a-e:e-a:((r-t)*i-(a-e)*n)/Math.sqrt(n*n+i*i)},getDistance:function(t,e,n,i,r,a,o){return Math.abs(E.getSignedDistance(t,e,n,i,r,a,o))}}}),M=d.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=Z.create(this,t||st.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,a=e._id,o=r[a];o?o.flags|=t:i.push(r[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new k({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:O,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(s,t)},insertLayer:function(t,e){if(e instanceof k){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(s,new k(T.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return T._getItems(this,t)},getItem:function(t){return T._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var a in e){var o=e[a];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new c({offset:new v(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new S],updateMatrix:!0}),a=0,o=i.length;a<o;a++)i[a].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var s=this._selectionItems,l=this._scope.settings.handleSize,u=this._updateVersion;for(var h in s)s[h]._drawSelection(t,e,l,s,u);t.restore()}}}),T=c.extend(h,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&c.isPlainObject(t),i=n&&!0===t.internal,r=this._matrix=new S,a=n&&t.project||ht.project,o=ht.settings;return this._id=i?null:g.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new Y(a._currentStyle,this,a),i||n&&0==t.insert||!o.insertItems&&(!n||!0!==t.insert)?this._setProject(a):(n&&t.parent||a)._insertItem(s,this,!0),n&&t!==T.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},i=this;function r(r){for(var a in r){var o=i[a];c.equals(o,"leading"===a?1.2*r.fontSize:r[a])||(n[a]=c.serialize(o,t,"data"!==a,e))}}return r(this._serializeFields),this instanceof C||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=s),16&t&&(this._globalMatrix=s),n&&72&t&&T._clearBoundsCache(n),2&t&&T._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,i=e._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||s,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=c.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?v:y,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(v.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new y(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=v.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof S,i=c.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i).rect;return arguments.length?r:new w(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=_.read(arguments),e=this.getBounds(),n=this._matrix,i=new S,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new S).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(T._updateBoundsCache(this,e.cacheItem),T._getBounds(n,t,e)):new _},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,a=i?null:this._matrix._orNullIfIdentity(),o=r&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,i),s=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,r),o&&s&&o in s)return{rect:(f=s[o]).rect.clone(),nonscaling:f.nonscaling};var l=this._getBounds(t||a,e),u=l.rect||l,c=this._style,h=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(o){s||(this._bounds=s={});var f=s[o]={rect:u.clone(),nonscaling:h,internal:i}}return{rect:u,nonscaling:h}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=s;for(var n=0,i=e.list,r=i.length;n<r;n++){var a=i[n];a!==t&&(a._bounds=a._position=s,a._boundsCache&&T._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,a=i,o=r,s=!1;n=n||{};for(var l=0,u=t.length;l<u;l++){var c=t[l];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),f=h.rect;i=Math.min(f.x,i),a=Math.min(f.y,a),r=Math.max(f.x+f.width,r),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(i)?new _(i,a,r-i,o-a):new _,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new y(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=v.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new S,a=this.getPosition(!0);r.translate(a),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(a.negate()),this.transform(r),i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,a=i.length;r<a;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0)));return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof k)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(T.NO_INSERT),n=this._children,i=c.pick(t?t.insert:s,t===s||!0===t),r=c.pick(t?t.deep:s,!0);n&&e.copyAttributes(this),n&&!r||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var a=this._name,o=this._parent;if(a&&o){n=o._children;for(var l=a,u=1;n[a];)a=l+" "+u++;a!==l&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var a=n[i];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,s=t._name;this._data=o?c.clone(o):null,s&&this.setName(s)},rasterize:function(t,e){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=n.getTopLeft().floor(),a=n.getBottomRight().ceil(),o=new b(a.subtract(r)),l=new A(T.NO_INSERT);if(!o.isZero()){var u=st.getCanvas(o.multiply(i)),h=u.getContext("2d"),f=(new S).scale(i).translate(r.negate());h.save(),f.applyToContext(h),this.draw(h,new c({matrices:[f]})),h.restore(),l.setCanvas(u)}return l.transform((new S).translate(r.add(o.divide(2))).scale(1/i)),(e===s||e)&&l.insertAbove(this),l},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(v.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return _.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new F.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof T&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(v.read(arguments),I.getOptions(arguments))}function e(){var t=v.read(arguments),e=I.getOptions(arguments),n=[];return this._hitTest(t,c.set({all:n},e)),n}function n(t,e,n,i){var r=this._children;if(r)for(var a=r.length-1;a>=0;a--){var o=r[a],s=o!==i&&o._hitTest(t,e,n);if(s&&!e.all)return s}return null}return M.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new b(F._getStrokePadding(a,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var s,l,u=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,f=this;function d(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function p(e,n){var i=n?s["get"+n]():f.getPosition();if(t.subtract(i).divide(o).length<=1)return new I(e,f,{name:n?c.hyphenate(n):e,point:i})}var m=e.position,g=e.center,v=e.bounds;if(u&&this._parent&&(m||g||v)){if((g||v)&&(s=this.getInternalBounds()),!(l=m&&p("position")||g&&p("center","Center"))&&v)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!l;x++)l=p("bounds",y[x]);l=d(l)}return l||(l=this._hitTestChildren(t,e,r)||u&&d(this._hitTestSelf(t,e,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),l&&l.point&&(l.point=i.transform(l.point)),l},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new I("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var r=/^(empty|editable)$/.test(t)?this["is"+c.capitalize(t)]():"type"===t?c.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(c.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],a=n[i];if(c.isPlainObject(r)&&c.isPlainObject(a)){if(!t(r,a))return!1}else if(!c.equals(r,a))return!1}return!0}(e,r)}return c.equals(r,e)},getItems:function(t){return T._getItems(this,t,this._matrix)},getItem:function(t){return T._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,a){if(!r){var o="object"==typeof n&&n,s=o&&o.overlapping,l=o&&o.inside,u=(y=s||l)&&_.read([y]);r={items:[],recursive:o&&!1!==o.recursive,inside:!!l,overlapping:!!s,rect:u,path:s&&new F.Rectangle({rectangle:u,insert:!1})},o&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=e._children,f=r.items;i=(u=r.rect)&&(i||new S);for(var d=0,p=h&&h.length;d<p;d++){var m=h[d],g=i&&i.appended(m._matrix),v=!0;if(u){var y=m.getBounds(g);if(!u.intersects(y))continue;u.contains(y)||r.overlapping&&(y.contains(u)||r.path.intersects(m,g))||(v=!1)}if(v&&m.matches(n)&&(f.push(m),a))break;if(!1!==r.recursive&&t(m,n,g,r,a),a&&f.length>0)break}return f}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(s,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var i={},r=(e=c.slice(e)).length-1;r>=0;r--){var a=(u=e[r])&&u._id;!u||i[a]?e.splice(r,1):(u._remove(!1,!0),i[a]=!0)}c.splice(n,e,t,0);for(var o=this._project,s=o._changes,l=(r=0,e.length);r<l;r++){var u,h=(u=e[r])._name;u._parent=this,u._setProject(o,!0),h&&u.setName(h),s&&u._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(s,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;-1!==a&&(e[i]==this&&delete e[i],r.splice(a,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var n=c.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=(e?c:v).read(arguments),i=v.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getPosition(!0)))}}),{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){var r=this._matrix,a=t&&!t.isIdentity(),o=(e||this._applyMatrix)&&(!r.isIdentity()||a||e&&n&&this._children);if(!a&&!o)return this;if(a){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var s=this._style,l=s.getFillColor(!0),u=s.getStrokeColor(!0);l&&l.transform(t),u&&u.transform(t)}if(o&&(o=this._transformContent(r,n,i))){var c=this._pivot;c&&r._transformPoint(c,c,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var h=this._bounds,f=this._position;(a||o)&&this._changed(25);var d=a&&h&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var p in h){var m=h[p];if(m.nonscaling)delete h[p];else if(o||!m.internal){var g=m.rect;t._transformBounds(g,g)}}this._bounds=h;var v=h[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else a&&f&&this._pivot&&(this._position=t._transformPoint(f,f));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(v.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(v.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(v.read(arguments))},localToParent:function(){return this._matrix._transformPoint(v.read(arguments))},fitBounds:function(t,e){t=_.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,a=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new _(new v,new b(n.width*a,n.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var a=i.getStrokeJoin(),o=i.getStrokeCap(),s=i.getMiterLimit();if(a&&(t.lineJoin=a),o&&(t.lineCap=o),s&&(t.miterLimit=s),ht.support.nativeDash){var l=i.getDashArray(),u=i.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=u):(t.mozDash=l,t.mozDashOffset=u))}}if(i.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend((new S).scale(c,c)),f=h.transform(new v(i.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,a=this._matrix,o=i[i.length-1].appended(a);if(o.isInvertible()){r=r?r.appended(o):o,i.push(o),e.updateMatrix&&(this._globalMatrix=o);var s,l,u,c=this._blendMode,h=this._opacity,f="normal"===c,d=lt.nativeModes[c],p=f&&1===h||e.dontStart||e.clip||(d||f&&h<1)&&this._canComposite(),m=e.pixelRatio||1;if(!p){var g=this.getStrokeBounds(r);if(!g.width||!g.height)return void i.pop();u=e.offset,l=e.offset=g.getTopLeft().floor(),s=t,t=st.getContext(g.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var v=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!p&&e.clipItem,b=!v||y;if(p?(t.globalAlpha=h,d&&(t.globalCompositeOperation=c)):b&&t.translate(-l.x,-l.y),b&&(p?a:r).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),v){t.setTransform(m,0,0,m,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,r,v),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),p||(lt.process(c,t,s,h,l.subtract(u).multiply(m)),st.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof j)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,l=4&a;if(this._drawSelected||(o=!1),(o||s||l)&&this._isUpdated(r)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,h,i),l){var d=this.getPosition(!0),p=this._parent,m=p?p.localToGlobal(d):d,g=m.x,v=m.y;t.beginPath(),t.arc(g,v,f,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],b=f,x=n+1,_=0;_<4;_++){var w=y[_],S=w[0],E=w[1];t.moveTo(g+S*b,v+E*b),t.lineTo(g+S*x,v+E*x),t.stroke()}}if(s){var M=h._transformCorners(this.getInternalBounds());t.beginPath();for(_=0;_<8;_++)t[_?"lineTo":"moveTo"](M[_],M[++_]);t.closePath(),t.stroke();for(_=0;_<8;_++)t.fillRect(M[_]-f,M[++_]-f,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],(function(t){this["removeOn"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,r=n&&n.start,a=null!=n&&("number"==typeof n?n:n.duration),o=new at(this,t,e,a,i,r);return a&&this.on("frame",(function t(e){o._handleFrame(1e3*e.time),o.running||this.off("frame",t)})),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),C=T.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=s)},_getClipItem:function(){var t=this._clipItem;if(t===s){t=null;for(var e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),c.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,a=0,o=r.length;a<o;a++){var s=r[a];s!==i&&s.draw(t,e)}}}),k=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),P=T.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new x(t.width,t.height,this,"setSize")},setSize:function(){var t=b.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(b.min(this._radius,t.divide(2))):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new x(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=b.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){n=b.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(F[c.capitalize(this._type)])({center:new v,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),ht.settings.applyMatrix&&e.setApplyMatrix(!0),(t===s||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,a=r.hasFill(),o=r.hasStroke(),s=e.dontFinish||e.clip,l=!i;if(a||o||s){var u=this._type,c=this._radius,h="circle"===u;if(e.dontStart||t.beginPath(),l&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,p=this._size,m=p.width,g=p.height;if(l&&"rectangle"===u&&0===f&&0===d)t.rect(-m/2,-g/2,m,g);else{var v=m/2,y=g/2,b=.44771525016920644,x=f*b,_=d*b,w=[-v,-y+d,-v,-y+_,-v+x,-y,-v+f,-y,v-f,-y,v-x,-y,v,-y+_,v,-y+d,v,y-d,v,y-_,v-x,y,v-f,y,-v+f,y,-v+x,y,-v,y-_,-v,y-d];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}s||!a&&!o||(this._setStyles(t,e,n),a&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new _(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(F._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),a=1;a<=4;a++){var o=new v(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(r),l=s.subtract(o.multiply(i));if(new _(n?s.add(o.multiply(n)):s,l).contains(e))return{point:l,quadrant:a}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,a,o){var s=!1,l=this._style,u=r.stroke&&l.hasStroke(),c=r.fill&&l.hasFill();if(u||c){var h=this._type,f=this._radius,d=u?l.getStrokeWidth()/2:0,p=r._tolerancePadding.add(F._getStrokePadding(d,!l.getStrokeScaling()&&o));if("rectangle"===h){var m=p.multiply(2),g=t(this,i,m);if(g)s=e(i.subtract(g.point),f,p,g.quadrant);else{var v=new _(this._size).setCenter(0,0),y=v.expand(m),b=v.expand(m.negate());s=y._containsPoint(i)&&!b._containsPoint(i)}}else s=e(i,f,p)}return s?new I(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var a=new P(c.getNamed(r),e);return a._type=t,a._size=n,a._radius=i,a}return{Circle:function(){var e=v.readNamed(arguments,"center"),n=c.readNamed(arguments,"radius");return t("circle",e,new b(2*n),n,arguments)},Rectangle:function(){var e=_.readNamed(arguments,"rectangle"),n=b.min(b.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=P._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(c.hasNamed(t,"radius"))e=v.readNamed(t,"center"),n=b.readNamed(t,"radius");else{var i=_.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),A=T.extend({},{_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==s&&v.read(arguments))){var n,i=typeof t,r="string"===i?u.getElementById(t):"object"===i?t:null;if(r&&r!==T.NO_INSERT)if(r.getContent||null!=r.naturalHeight)n=r;else if(r){var a=b.read(arguments);a.isZero()||(n=st.getCanvas(a))}n?this.setImage(n):this.setSource(t)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=st.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new x(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=b.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(st.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&st.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new v(0,0).transform(t),n=new v(1,0).transform(t).subtract(e),i=new v(0,1).transform(t).subtract(e);return new b(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(ht=n._scope,e.emit(i,new K(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&$.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&st.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new b(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=st.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){st.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new o.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=t,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=_.read(arguments),e=st.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=_.read(arguments),e=new A(T.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=v.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof B?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new _(t):"x"in t&&(e=new _(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),r=Math.min(e.height,32),a=A._sampleContext;a?a.clearRect(0,0,33,33):a=A._sampleContext=st.getContext(new b(32)),a.save();var o=(new S).scale(i/e.width,r/e.height).translate(-e.x,-e.y);o.applyToContext(a),n&&n.draw(a,new c({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var s=this.getElement(),l=this._size;s&&a.drawImage(s,-l.width/2,-l.height/2),a.restore();for(var u=a.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,h=[0,0,0],f=0,d=0,p=u.length;d<p;d+=4){var m=u[d+3];f+=m,m/=255,h[0]+=u[d]*m,h[1]+=u[d+1]*m,h[2]+=u[d+2]*m}for(d=0;d<3;d++)h[d]/=f;return f?W.read(h):null},getPixel:function(){var t=v.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new W("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=v.read(arguments),e=W.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),a=r.createImageData(1,1),o=a.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(a,t.x,t.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=b.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=_.read(arguments);return t.isEmpty()&&(t=new _(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=v.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new _(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new I("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();i&&i.width>0&&i.height>0&&(t.globalAlpha=this._opacity,this._setStyles(t,e,n),X.setPrefixed(t,"imageSmoothingEnabled",this._smoothing),t.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),O=T.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==s&&v.read(arguments,1))||this.setDefinition(t instanceof L?t:new L(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=this._definition._item._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),L=c.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=g.get(),this.project=ht.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&T._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new v),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new O(this,t)},clone:function(){return new L(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),I=c.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&c.read(t);return c.set({type:null,tolerance:ht.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),N=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,r,a){var o,l,u,c,h=arguments.length;h>0&&(null==t||"object"==typeof t?1===h&&t&&"point"in t?(o=t.point,l=t.handleIn,u=t.handleOut,c=t.selection):(o=t,l=e,u=n,c=i):(o=[t,e],l=n!==s?[n,i]:null,u=r!==s?[r,a]:null)),new R(o,this,"_point"),new R(l,this,"_handleIn"),new R(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),c.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(v.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(v.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(v.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new z(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},r=i.type,a=i.factor,o=this.getPrevious(),l=this.getNext(),u=(o||this)._point,c=this._point,h=(l||this)._point,f=u.getDistance(c),d=c.getDistance(h);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&l){var p=u.subtract(h),m=a===s?.4:a,g=m*f/(f+d);e||this.setHandleIn(p.multiply(g)),n||this.setHandleOut(p.multiply(g-m))}}else{var y=a===s?.5:a,b=Math.pow(f,y),x=b*b,_=Math.pow(d,y),w=_*_;if(!e&&o){var S=2*w+3*_*b+x,E=3*_*(_+b);this.setHandleIn(0!==E?new v((w*u._x+S*c._x-x*h._x)/E-c._x,(w*u._y+S*c._y-x*h._y)/E-c._y):new v)}if(!n&&l){S=2*x+3*b*_+w,E=3*b*(b+_);this.setHandleOut(0!==E?new v((x*h._x+S*c._x-w*u._x)/E-c._x,(x*h._y+S*c._y-w*u._y)/E-c._y):new v)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new N(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new N(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,a=t._point,o=e._point,s=t._handleIn,l=e._handleIn,u=e._handleOut,c=t._handleOut;this._point._set(i*a._x+r*o._x,i*a._y+r*o._y,!0),this._handleIn._set(i*s._x+r*l._x,i*s._y+r*l._y,!0),this._handleOut._set(i*c._x+r*u._x,i*c._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,s=i._y,l=2;return e[0]=o,e[1]=s,r&&(e[l++]=r._x+o,e[l++]=r._y+s),a&&(e[l++]=a._x+o,e[l++]=a._y+s),t&&(t._transformCoordinates(e,e,l/2),o=e[0],s=e[1],n?(i._x=o,i._y=s,l=2,r&&(r._x=e[l++]-o,r._y=e[l++]-s),a&&(a._x=e[l++]-o,a._y=e[l++]-s)):(r||(e[l++]=o,e[l++]=s),a||(e[l++]=o,e[l++]=s))),e}}),R=v.extend({initialize:function(t,e,n){var i,r,a;if(t)if((i=t[0])!==s)r=t[1];else{var o=t;(i=o.x)===s&&(i=(o=v.read(arguments)).x),r=o.y,a=o.selected}else i=r=0;this._x=i,this._y=r,this._owner=e,e[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=m.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),D=c.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,a,o,s){var l,u,c,h,f,d,p=arguments.length;3===p?(this._path=t,l=e,u=n):p?1===p?"segment1"in t?(l=new N(t.segment1),u=new N(t.segment2)):"point1"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(l=new N(t),u=new N(e)):4===p?(c=t,f=e,d=n,h=i):8===p&&(c=[t,e],h=[o,s],f=[n-t,i-e],d=[r-o,a-s]):(l=new N,u=new N),this._segment1=l||new N(c,null,f),this._segment2=u||new N(h,d,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=s},clone:function(){return new D(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return D.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(v.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(v.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(v.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(v.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return D.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new v(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=D.getLength(this.getValues(),0,1)),this._length},getArea:function(){return D.getArea(this.getValues())},getLine:function(){return new E(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new D(D.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return D.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=1-1e-8){var i=D.subdivide(this.getValues(),t),r=i[0],a=i[1],o=e||this.hasHandles(),s=this._segment1,l=this._segment2,u=this._path;o&&(s._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=r[6],h=r[7],f=new N(new v(c,h),o&&new v(r[4]-c,r[5]-h),o&&new v(a[2]-c,a[3]-h));u?(u.insert(s._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new D(f,l))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===s?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===s?.5:e?t:this.getTimeAt(t))},reversed:function(){return new D(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,a=t._handleOut,o=e._handleIn,s=e._point,l=r.x,u=r.y,c=s.x,h=s.y,f=i?[l,u,l,u,c,h,c,h]:[l,u,l+a._x,u+a._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],l=t[5],u=t[6],c=t[7];e===s&&(e=.5);var h=1-e,f=h*n+e*r,d=h*i+e*a,p=h*r+e*o,m=h*a+e*l,g=h*o+e*u,v=h*l+e*c,y=h*f+e*p,b=h*d+e*m,x=h*p+e*g,_=h*m+e*v,w=h*y+e*x,S=h*b+e*_;return[[n,i,f,d,y,b,w,S],[w,S,x,_,g,v,u,c]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],a=t[i+2],o=t[i+4],s=t[i+6];if(r>=a==a>=o&&a>=o==o>=s||D.isStraight(t))n.push(t);else{var l=3*(a-o)-r+s,u=2*(r+o)-4*a,c=a-r,h=[],f=m.solveQuadratic(l,u,c,h,1e-8,1-1e-8);if(f){h.sort();var d=h[0],p=D.subdivide(t,d);n.push(p[0]),f>1&&(d=(h[1]-d)/(1-d),p=D.subdivide(p[1],d),n.push(p[0])),n.push(p[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,a){var o=t[e],s=t[e+2],l=t[e+4],u=t[e+6],c=0;if(!(o<n&&u<n&&s<n&&l<n||o>n&&u>n&&s>n&&l>n)){var h=3*(s-o),f=3*(l-s)-h,d=u-o-h-f;c=m.solveCubic(d,f,h,o-n,i,r,a)}return c},getTimeOf:function(t,e){var n=new v(t[0],t[1]),i=new v(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],a=[],o=0;o<2;o++)for(var s=D.solveCubic(t,o,r[o],a,0,1),l=0;l<s;l++){var u=a[l];if(e.isClose(D.getPoint(t,u),1e-7))return u}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(D.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,a=t[7]-i,o=r*r+a*a;if(0===o)return 0;var s=((e.x-n)*r+(e.y-i)*a)/o;return s<1e-12?0:s>.999999999999?1:D.getTimeOf(t,new v(n+s*r,i+s*a))}var l=1/0,u=0;function c(n){if(n>=0&&n<=1){var i=e.getDistance(D.getPoint(t,n),!0);if(i<l)return l=i,u=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var f=.005;f>1e-8;)c(u-f)||c(u+f)||(f/=2);return u},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=D.subdivide(t,e)[1]),n<1&&(t=D.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=3*r-2*n-l,h=3*a-2*i-u,f=3*o-2*l-n,d=3*s-2*u-i;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];return 3*((l-n)*(i+a)-(s-e)*(r+o)+r*(e-a)-i*(n-o)+l*(a+e/3)-s*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)D._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new _(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,a,o,s,l){function u(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>s[r]&&(s[r]=i)}a/=2;var c=o[r]-a,h=s[r]+a;if(t<c||e<c||n<c||i<c||t>h||e>h||n>h||i>h)if(e<t!=e<i&&n<t!=n<i)u(t,a),u(i,a);else{var f=3*(e-n)-t+i,d=2*(t+n)-4*e,p=e-t,g=m.solveQuadratic(f,d,p,l);u(i,0);for(var v=0;v<g;v++){var y=l[v],b=1-y;1e-8<=y&&y<=1-1e-8&&u(b*b*b*t+3*b*b*y*e+3*b*y*y*n+y*y*y*i,a)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=F[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),c.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var a=new E(t,i);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(i.add(n))<1e-7){var o=r.dot(r),s=r.dot(e)/o,l=r.dot(n)/o;return s>=0&&s<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},(function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],a=e[6],o=e[7];return t(new v(i,r),new v(e[2]-i,e[3]-r),new v(e[4]-a,e[5]-o),new v(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new z(this,t):null},getTimeAt:function(t,e){return D.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=v.read(arguments);return t.isZero()?[]:D.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(v.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return D.getTimeOf(this.getValues(),v.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=v.read(arguments),e=this.getValues(),n=D.getNearestTime(e,t),i=D.getPoint(e,n);return new z(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(t,(function(t){this[t+"At"]=function(e,n){var i=this.getValues();return D[t](i,n?e:D.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return D[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=9*(i-a)+3*(s-e),c=6*(e+a)-12*i,h=3*(i-e),f=9*(r-o)+3*(l-n),d=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(u*t+c)*t+h,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],a=t[1],o=t[2],s=t[3],l=t[4],u=t[5],c=t[6],h=t[7],f=m.isZero;f(o-r)&&f(s-a)&&(o=r,s=a),f(l-c)&&f(u-h)&&(l=c,u=h);var d,p,g=3*(o-r),y=3*(l-o)-g,b=c-r-g-y,x=3*(s-a),_=3*(u-s)-x,w=h-a-x-_;if(0===n)d=0===e?r:1===e?c:((b*e+y)*e+g)*e+r,p=0===e?a:1===e?h:((w*e+_)*e+x)*e+a;else{if(e<1e-8?(d=g,p=x):e>1-1e-8?(d=3*(c-l),p=3*(h-u)):(d=(3*b*e+2*y)*e+g,p=(3*w*e+2*_)*e+x),i){0===d&&0===p&&(e<1e-8||e>1-1e-8)&&(d=l-o,p=u-s);var S=Math.sqrt(d*d+p*p);S&&(d/=S,p/=S)}if(3===n){l=6*b*e+2*y,u=6*w*e+2*_;var E=Math.pow(d*d+p*p,1.5);d=0!==E?(d*u-p*l)/E:0,p=0}}return 2===n?new v(p,-d):new v(d,p)}return{statics:{classify:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=i*(n-u)+r*(l-e)+e*u-n*l,h=3*(a*(r-n)+o*(e-i)+i*n-r*e),f=h-c,d=f-c+(e*(u-o)+n*(a-l)+l*o-u*a),p=Math.sqrt(d*d+f*f+h*h),g=0!==p?1/p:0,v=m.isZero;function y(t,e,n){var i=e!==s,r=i&&e>0&&e<1,a=i&&n>0&&n<1;return!i||(r||a)&&("loop"!==t||r&&a)||(t="arch",r=a=!1),{type:t,roots:r||a?r&&a?e<n?[e,n]:[n,e]:[r?e:n]:null}}if(f*=g,h*=g,v(d*=g))return v(f)?y(v(h)?"line":"quadratic"):y("serpentine",h/(3*f));var b=3*f*f-4*d*h;if(v(b))return y("cusp",f/(2*d));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),_=2*d;return y(b>0?"serpentine":"loop",(f+x)/_,(f-x)/_)},getLength:function(n,i,r,a){if(i===s&&(i=0),r===s&&(r=1),D.isStraight(n)){var o=n;r<1&&(o=D.subdivide(o,r)[0],i/=r),i>0&&(o=D.subdivide(o,i)[1]);var l=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(l*l+u*u)}return m.integrate(a||t(n),i,r,e(i,r))},getTimeAt:function(n,i,r){if(r===s&&(r=i<0?1:0),0===i)return r;var a=Math.abs,o=i>0,l=o?r:0,u=o?1:r,c=t(n),h=D.getLength(n,l,u,c),f=a(i)-h;if(a(f)<1e-12)return o?u:l;if(f>1e-12)return null;var d=i/h,p=0;return m.findRoot((function(t){return p+=m.integrate(c,r,t,e(r,t)),r=t,p-i}),c,r+d,l,u,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=3*i-e-3*a+t[6],l=3*e-6*i+3*a,u=-3*e+3*i,c=3*r-n-3*o+t[7],h=3*n-6*r+3*o,f=-3*n+3*r,d=[];return m.solveCubic(9*(s*s+c*c),9*(s*l+h*c),2*(l*l+h*h)+3*(u*s+f*c),u*l+h*f,d,1e-8,1-1e-8),d.sort()}}}},new function(){function t(t,e,n,i,r,a,o){var s=!o&&n.getPrevious()===r,l=!o&&n!==r&&n.getNext()===r;if(null!==i&&i>=(s?1e-8:0)&&i<=(l?1-1e-8:1)&&null!==a&&a>=(l?1e-8:0)&&a<=(s?1-1e-8:1)){var u=new z(n,i,null,o),c=new z(r,a,null,o);u._intersection=c,c._intersection=u,e&&!e(u)||z.insert(t,u,!0)}}function e(i,r,a,o,s,l,u,c,h,f,d,p,m){if(++h>=4096||++c>=40)return h;var g,v,y=r[0],b=r[1],x=r[6],_=r[7],w=E.getSignedDistance,S=w(y,b,x,_,r[2],r[3]),M=w(y,b,x,_,r[4],r[5]),T=S*M>0?.75:4/9,C=T*Math.min(0,S,M),k=T*Math.max(0,S,M),P=w(y,b,x,_,i[0],i[1]),A=w(y,b,x,_,i[2],i[3]),O=w(y,b,x,_,i[4],i[5]),L=w(y,b,x,_,i[6],i[7]),I=function(t,e,n,i){var r,a=[0,t],o=[1/3,e],s=[2/3,n],l=[1,i],u=e-(2*t+i)/3,c=n-(t+2*i)/3;if(u*c<0)r=[[a,o,l],[a,s,l]];else{var h=u/c;r=[h>=2?[a,o,l]:h<=.5?[a,s,l]:[a,o,s,l],[a,l]]}return(u||c)<0?r.reverse():r}(P,A,O,L),N=I[0],R=I[1];if(0===S&&0===M&&0===P&&0===A&&0===O&&0===L||null==(g=n(N,R,C,k))||null==(v=n(N.reverse(),R.reverse(),C,k)))return h;var z=f+(d-f)*g,B=f+(d-f)*v;if(Math.max(m-p,B-z)<1e-9){var F=(z+B)/2,j=(p+m)/2;t(s,l,u?o:a,u?j:F,u?a:o,u?F:j)}else if(i=D.getPart(i,g,v),v-g>.8)if(B-z>m-p){F=(z+B)/2;h=e(r,(V=D.subdivide(i,.5))[0],o,a,s,l,!u,c,h,p,m,z,F),h=e(r,V[1],o,a,s,l,!u,c,h,p,m,F,B)}else{var V;j=(p+m)/2;h=e((V=D.subdivide(r,.5))[0],i,o,a,s,l,!u,c,h,p,j,z,B),h=e(V[1],i,o,a,s,l,!u,c,h,j,m,z,B)}else h=m-p>=1e-9?e(r,i,o,a,s,l,!u,c,h,p,m,z,B):e(i,r,a,o,s,l,u,c,h,z,B,p,m);return h}function n(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var i=t[0][0],r=t[0][1],a=1,o=t.length;a<o;a++){var s=t[a][0],l=t[a][1];if(e?l>=n:l<=n)return l===n?s:i+(n-r)*(s-i)/(l-r);i=s,r=l}return null}function r(t,e,n,i,r){var a=m.isZero;if(a(i)&&a(r)){var o=D.getTimeOf(t,new v(e,n));return null===o?[]:[o]}for(var s=Math.atan2(-r,i),l=Math.sin(s),u=Math.cos(s),c=[],h=[],f=0;f<8;f+=2){var d=t[f]-e,p=t[f+1]-n;c.push(d*u-p*l,d*l+p*u)}return D.solveCubic(c,1,0,h,0,1),h}function a(e,n,i,a,o,s,l){for(var u=n[0],c=n[1],h=r(e,u,c,n[6]-u,n[7]-c),f=0,d=h.length;f<d;f++){var p=h[f],m=D.getPoint(e,p),g=D.getTimeOf(n,m);null!==g&&t(o,s,l?a:i,l?g:p,l?i:a,l?p:g)}}function o(e,n,i,r,a,o){var s=E.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(a,o,i,D.getTimeOf(e,s),r,D.getTimeOf(n,s))}function s(n,i,r,s,l,c){var h=Math.min,f=Math.max;if(f(n[0],n[2],n[4],n[6])+1e-12>h(i[0],i[2],i[4],i[6])&&h(n[0],n[2],n[4],n[6])-1e-12<f(i[0],i[2],i[4],i[6])&&f(n[1],n[3],n[5],n[7])+1e-12>h(i[1],i[3],i[5],i[7])&&h(n[1],n[3],n[5],n[7])-1e-12<f(i[1],i[3],i[5],i[7])){var d=u(n,i);if(d)for(var p=0;p<2;p++){var m=d[p];t(l,c,r,m[0],s,m[1],!0)}else{var g=D.isStraight(n),y=D.isStraight(i),b=g&&y,x=g&&!y,_=l.length;if((b?o:g||y?a:e)(x?i:n,x?n:i,x?s:r,x?r:s,l,c,x,0,0,0,1,0,1),!b||l.length===_)for(p=0;p<4;p++){var w=p>>1,S=1&p,E=6*w,M=6*S,T=new v(n[E],n[E+1]),C=new v(i[M],i[M+1]);T.isClose(C,1e-12)&&t(l,c,r,w,s,S)}}}return l}function l(e,n,i,r){var a=D.classify(e);if("loop"===a.type){var o=a.roots;t(i,r,n,o[0],n,o[1])}return i}function u(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=E.getDistance,a=D.isStraight(t),o=D.isStraight(e),s=a&&o,l=n(t)<n(e),u=l?e:t,c=l?t:e,h=u[0],f=u[1],d=u[6]-h,p=u[7]-f;if(r(h,f,d,p,c[0],c[1],!0)<1e-7&&r(h,f,d,p,c[6],c[7],!0)<1e-7)!s&&r(h,f,d,p,u[2],u[3],!0)<1e-7&&r(h,f,d,p,u[4],u[5],!0)<1e-7&&r(h,f,d,p,c[2],c[3],!0)<1e-7&&r(h,f,d,p,c[4],c[5],!0)<1e-7&&(a=o=s=!0);else if(s)return null;if(a^o)return null;for(var m=[t,e],g=[],y=0;y<4&&g.length<2;y++){var b=1&y,x=1^b,_=y>>1,w=D.getTimeOf(m[b],new v(m[x][_?6:0],m[x][_?7:1]));if(null!=w){var S=b?[_,w]:[w,_];(!g.length||i(S[0]-g[0][0])>1e-8&&i(S[1]-g[0][1])>1e-8)&&g.push(S)}if(y>2&&!g.length)break}if(2!==g.length)g=null;else if(!s){var M=D.getPart(t,g[0][0],g[1][0]),T=D.getPart(e,g[0][1],g[1][1]);(i(T[2]-M[2])>1e-7||i(T[3]-M[3])>1e-7||i(T[4]-M[4])>1e-7||i(T[5]-M[5])>1e-7)&&(g=null)}return g}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?s(e,n,this,t,[]):l(e,this,[])},statics:{getOverlaps:u,getIntersections:function(t,e,n,i,r,a){var o=!e;o&&(e=t);for(var u,h,f=t.length,d=e.length,p=[],m=[],g=0;g<d;g++)p[g]=e[g].getValues(r);for(g=0;g<f;g++){var v=t[g],y=o?p[g]:v.getValues(i),b=v.getPath();b!==h&&(h=b,u=[],m.push(u)),o&&l(y,v,u,n);for(var x=o?g+1:0;x<d;x++){if(a&&u.length)return u;s(y,p[x],v,e[x],u,n)}}u=[],g=0;for(var _=m.length;g<_;g++)c.push(u,m[g]);return u},getCurveLineIntersections:r,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=e.normalize(),h=c.x,f=c.y,d=3*l-9*o+9*r-3*n,p=3*u-9*s+9*a-3*i,g=6*o-12*r+6*n,v=6*s-12*a+6*i,y=3*r-3*n,b=3*a-3*i,x=2*d*f-2*p*h,_=[];if(Math.abs(x)<m.CURVETIME_EPSILON){if(0!=(x=d*v-p*g)){var w=-(d*b-p*y)/x;w>=0&&w<=1&&_.push(w)}}else{var S=(g*g-4*d*y)*f*f+(-2*g*v+4*p*y+4*d*b)*h*f+(v*v-4*p*b)*h*h,E=g*f-v*h;if(S>=0&&0!=x){var M=Math.sqrt(S),T=-(E+M)/x,C=(-E+M)/x;T>=0&&T<=1&&_.push(T),C>=0&&C<=1&&_.push(C)}}return _}}}}),z=c.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof z){var i=this.getCurve(),r=t.getCurve(),a=i._path;if(a===r._path){var o=Math.abs,s=o(this.getOffset()-t.getOffset()),l=!e&&this._intersection,u=!e&&t._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=p.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=e>=1e-8&&e<=1-1e-8,r=n>=1e-8&&n<=1-1e-8;if(i&&r)return!this.isTouching();var a=this.getCurve(),o=e<1e-8?a.getPrevious():a,s=t.getCurve(),l=n<1e-8?s.getPrevious():s;if(e>1-1e-8&&(a=a.getNext()),n>1-1e-8&&(s=s.getNext()),!(o&&a&&l&&s))return!1;var u=[];function c(t,e){var n=t.getValues(),i=D.classify(n).roots||D.getPeaks(n),r=i.length,a=e&&r>1?i[r-1]:r>0?i[0]:.5;u.push(D.getLength(n,e?a:0,e?1:a)/2)}function h(t,e,n){return e<n?t>e&&t<n:t>e||t<n}i||(c(o,!0),c(a,!1)),r||(c(l,!0),c(s,!1));var f=this.getPoint(),d=Math.min.apply(Math,u),p=i?a.getTangentAtTime(e):a.getPointAt(d).subtract(f),m=i?p.negate():o.getPointAt(-d).subtract(f),g=r?s.getTangentAtTime(n):s.getPointAt(d).subtract(f),v=r?g.negate():l.getPointAt(-d).subtract(f),y=m.getAngle(),b=p.getAngle(),x=v.getAngle(),_=g.getAngle();return!!(i?h(y,x,_)^h(b,x,_)&&h(y,_,x)^h(b,_,x):h(x,y,b)^h(_,y,b)&&h(x,b,y)^h(_,b,y))},hasOverlap:function(){return!!this._overlap}},c.each(D._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,a=i-1;function o(n,r){for(var a=n+r;a>=-1&&a<=i;a+=r){var o=t[(a%i+i)%i];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;r<=a;){var s,l=r+a>>>1,u=t[l];if(n&&(s=e.equals(u)?u:o(l,-1)||o(l,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),h=u.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?a=l-1:r=l+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),B=T.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(c.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?j:F)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new v,s=new v;function l(t,n){var i=+e[t];return a&&(i+=o[n]),i}function u(t){return new v(l(t,"x"),l(t+1,"y"))}this.clear();for(var c=0,h=r&&r.length;c<h;c++){var f=r[c],d=f[0],p=d.toLowerCase(),m=(e=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(a=d===p,"z"!==n||/[mz]/.test(p)||this.moveTo(o),p){case"m":case"l":for(var g="m"===p,y=0;y<m;y+=2)this[g?"moveTo":"lineTo"](o=u(y)),g&&(s=o,g=!1);i=o;break;case"h":case"v":var x="h"===p?"x":"y";o=o.clone();for(y=0;y<m;y++)o[x]=l(y,x),this.lineTo(o);i=o;break;case"c":for(y=0;y<m;y+=6)this.cubicCurveTo(u(y),i=u(y+2),o=u(y+4));break;case"s":for(y=0;y<m;y+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(i):o,i=u(y),o=u(y+2)),n=p;break;case"q":for(y=0;y<m;y+=4)this.quadraticCurveTo(i=u(y),o=u(y+2));break;case"t":for(y=0;y<m;y+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?o.multiply(2).subtract(i):o,o=u(y)),n=p;break;case"a":for(y=0;y<m;y+=7)this.arcTo(o=u(y+5),new b(+e[y],+e[y+1]),+e[y+2],+e[y+4],+e[y+3]);break;case"z":this.closePath(1e-12),o=s}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,a=this._matrix._orNullIfIdentity(),o=r?a:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(a).intersects(t.getBounds(o),1e-12)?D.getIntersections(this.getCurves(),!r&&t.getCurves(),e,a,o,i):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.hasOverlap()||t.isCrossing()}))},getNearestLocation:function(){for(var t=v.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,a=e.length;r<a;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",a=t[r],o=e[r],s=this[r];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=s.length,u=o.length;if(l<u)for(var c=i?N:F,h=l;h<u;h++)this.add(new c);else l>u&&this[i?"removeSegments":"removeChildren"](u,l);for(h=0;h<u;h++)s[h].interpolate(a[h],o[h],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,a=i.length,o=[],s=0;e=!0;for(var l=r-1;l>=0&&e;l--){var u=n[l];e=!1;for(var c=a-1;c>=0&&!e;c--)u.compare(i[c])&&(o[c]||(o[c]=!0,s++),e=!0)}e=e&&s===a}return e}}),F=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==s||t.x===s&&t.point===s?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=s,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=s,32&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=s)},getStyle:function(){var t=this._parent;return(t instanceof j?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(N.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new D(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new D(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,i,r,a,o,s,l,u,c=this._segments,h=c.length,f=new p(e),d=new Array(6),m=!0,g=[];function v(e,c){if(e._transformCoordinates(t,d),n=d[0],i=d[1],m)g.push("M"+f.pair(n,i)),m=!1;else if(o=d[2],s=d[3],o===n&&s===i&&l===r&&u===a){if(!c){var h=n-r,p=i-a;g.push(0===h?"v"+f.number(p):0===p?"h"+f.number(h):"l"+f.pair(h,p))}}else g.push("c"+f.pair(l-r,u-a)+" "+f.pair(o-r,s-a)+" "+f.pair(n-r,i-a));r=n,a=i,l=d[4],u=d[5]}if(!h)return"";for(var y=0;y<h;y++)v(c[y]);return this._closed&&h>0&&(v(c[0],!0),g.push("z")),g.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,a=null==e,o=(e=a?n.length:e,0);o<r;o++){var s=t[o];s._path&&(s=t[o]=s.clone()),s._path=this,s._index=e+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)c.push(n,t);else{n.splice.apply(n,[e,0].concat(t));o=e+r;for(var l=n.length;o<l;o++)n[o]._index=o}if(i){var u=this._countCurves(),h=e>0&&e+r-1===u?e-1:e,f=h,d=Math.min(h+r,u);t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),f+=t._curves.length);for(o=f;o<d;o++)i.splice(o,0,new D(this,null,null));this._adjustCurves(h,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,a=t;a<e;a++)(n=r[a])._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(N.readList(arguments)):this._add([N.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(N.readList(arguments,1),t):this._add([N.read(arguments,1)],t)[0]},addSegment:function(){return this._add([N.read(arguments)])[0]},insertSegment:function(t){return this._add([N.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(N.readList(t))},insertSegments:function(t,e){return this._add(N.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=c.pick(e,this._segments.length);var i=this._segments,r=this._curves,a=i.length,o=i.splice(t,e-t),s=o.length;if(!s)return o;for(var l=0;l<s;l++){var u=o[l];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}l=t;for(var h=i.length;l<h;l++)i[l]._index=l;if(r){var f=t>0&&e===a+(this._closed?1:0)?t-1:t;for(l=(r=r.splice(f,s)).length-1;l>=0;l--)r[l]._path=null;n&&(o._curves=r.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var a=i+1===r;t+=D.getArea(D.getValues(e[i],e[a?0:i+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new F(T.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(t,e){var n,i=e===s?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=i?this.splitAt(i):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&t.reverse(),a=t.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var a=e[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new V(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new N(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new N(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new U(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,n=t||{},i=n.type||"asymmetric",r=this._segments,a=r.length,o=this._closed;function l(t,n){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==e)throw new Error(t._class+" "+i+" of "+r+" is not part of "+e);n&&t instanceof D&&i++}else i="number"==typeof t?t:n;return Math.min(i<0&&o?i%a:i<0?i+a:i,a-1)}var u=o&&n.from===s&&n.to===s,c=l(n.from,0),h=l(n.to,a-1);if(c>h)if(o)c-=a;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(i)){var d="asymmetric"===i,p=Math.min,m=h-c+1,g=m-1,v=u?p(m,4):1,y=v,b=v,x=[];if(o||(y=p(1,c),b=p(1,a-h-1)),(g+=y+b)<=1)return;for(var _=0,w=c-y;_<=g;_++,w++)x[_]=r[(w<0?w+a:w)%a]._point;var S=x[0]._x+2*x[1]._x,E=x[0]._y+2*x[1]._y,M=2,T=g-1,C=[S],k=[E],P=[M],A=[],O=[];for(_=1;_<g;_++){var L=_<T,I=L?4:d?2:7,N=L?4:d?3:8,R=L?2:d?0:1,z=(L?1:d?1:2)/M;M=P[_]=I-z,S=C[_]=N*x[_]._x+R*x[_+1]._x-z*S,E=k[_]=N*x[_]._y+R*x[_+1]._y-z*E}A[T]=C[T]/P[T],O[T]=k[T]/P[T];for(_=g-2;_>=0;_--)A[_]=(C[_]-A[_+1])/P[_],O[_]=(k[_]-O[_+1])/P[_];A[g]=(3*x[g]._x-A[T])/2,O[g]=(3*x[g]._y-O[T])/2;_=y;var B=g-b;for(w=c;_<=B;_++,w++){var F=r[w<0?w+a:w],j=F._point,V=A[_]-j._x,U=O[_]-j._y;(u||_<B)&&F.setHandleOut(V,U),(u||_>y)&&F.setHandleIn(-V,-U)}}else for(_=c;_<=h;_++)r[_<0?_+a:_].smooth(n,!u&&_===c,!u&&_===h)},toShape:function(t){if(!this._closed)return null;var e,n,i,r,a,o,l,u=this._segments;function c(t,e){var n=u[t],i=n.getNext(),r=u[e],a=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point))}function h(t){var e=u[t],n=e.getNext(),i=e._handleOut,r=n._handleIn;if(i.isOrthogonal(r)){var a=e._point,o=n._point,s=new E(a,i,!0).intersect(new E(o,r,!0),!0);return s&&m.isZero(i.getLength()/s.subtract(a).getLength()-.5522847498307936)&&m.isZero(r.getLength()/s.subtract(o).getLength()-.5522847498307936)}return!1}function f(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this.hasHandles()&&4===u.length&&c(0,2)&&c(1,3)&&(a=u[1],o=a.getPrevious(),l=a.getNext(),o._handleOut.isZero()&&a._handleIn.isZero()&&a._handleOut.isZero()&&l._handleIn.isZero()&&a._point.subtract(o._point).isOrthogonal(l._point.subtract(a._point)))?(e=P.Rectangle,n=new b(f(0,3),f(0,1)),r=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&h(0)&&h(2)&&h(4)&&h(6)&&c(1,5)&&c(3,7)?(e=P.Rectangle,i=(n=new b(f(1,6),f(0,3))).subtract(new b(f(0,7),f(1,2))).divide(2),r=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&h(0)&&h(1)&&h(2)&&h(3)&&(m.isZero(f(0,2)-f(1,3))?(e=P.Circle,i=f(0,2)/2):(e=P.Ellipse,i=new b(f(2,0)/2,f(3,1)/2)),r=u[1]._point),e){var d=this.getPosition(!0),p=new e({center:d,size:n,radius:i,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(r.subtract(d).getAngle()+90),(t===s||t)&&p.insertAbove(this),p}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof j)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var o,s,l=n[0].getValues(),u=[],c=0,h=0,f=0;f<a;f++){var d=i[f].getValues();if(u.push(d),g=D.getOverlaps(l,d)){o=!f&&g[0][0]>0?a-1:f,s=g[0][1];break}}var p,m=Math.abs;for(d=u[o];l&&d;){var g;if(g=D.getOverlaps(l,d))if(m(g[0][0]-h)<1e-8){1===(h=g[1][0])&&(l=++c<r?n[c].getValues():null,h=0);var v=g[0][1];if(m(v-s)<1e-8){if(p||(p=[o,v]),1===(s=g[1][1])&&(++o>=a&&(o=0),d=u[o]||i[o].getValues(),s=0),!l)return p[0]===o&&p[1]===s;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,a,o,s,l,u,c=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,m=e._tolerancePadding,g=m,v=e.stroke&&h.hasStroke(),y=e.fill&&h.hasFill(),b=e.curves,x=v?h.getStrokeWidth()/2:y&&e.tolerance>0||b?0:null;function _(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),_(n,g))return new I(i,c,{segment:t,point:n})}}function S(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function E(t){s.add(t)}function M(e){var n,l=p||e._index>0&&e._index<d-1;return"round"===(l?r:a)?_(e._point,g):(s=new F({internal:!0,closed:!0}),l?e.isSmooth()||F._addBevelJoin(e,r,x,o,null,i,E,!0):"square"===a&&F._addSquareCap(e,a,x,null,i,E,!0),s.isEmpty()?void 0:s.contains(t)||(n=s.getNearestLocation(t))&&_(n.getPoint(),m))}if(null!==x&&(x>0?(r=h.getStrokeJoin(),a=h.getStrokeCap(),o=h.getMiterLimit(),g=g.add(F._getStrokePadding(x,i))):r=a="round"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var T=0;T<d;T++)if(u=S(f[T]))return u}else if(u=S(f[0],!0)||S(f[d-1],!0))return u;if(null!==x){if(l=this.getNearestLocation(t)){var C=l.getTime();0===C||1===C&&d>1?M(l.getSegment())||(l=null):_(l.getPoint(),g)||(l=null)}if(!l&&"miter"===r&&d>1)for(T=0;T<d;T++){var k=f[T];if(t.getDistance(k._point)<=o*x&&M(k)){l=k.getLocation();break}}}return!l&&y&&this._contains(t)||l&&!v&&!b?new I("fill",this):l?new I(v?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},c.each(D._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=v.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var a=n,o=e[i];if((n+=o.getLength())>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new z(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=v.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,a=i.length;r<a;r++){for(var o=i[r],s=o.getTimesWithTangent(t),l=0,u=s.length;l<u;l++){var c=n+o.getOffsetAtTime(s[l]);e.indexOf(c)<0&&e.push(c)}n+=o.length}return e}}),new function(){function t(t,e,n){var i,r,a,o,s,l,u,c,h=e._segments,f=h.length,d=new Array(6),p=!0;function m(e){if(n)e._transformCoordinates(n,d),i=d[0],r=d[1];else{var h=e._point;i=h._x,r=h._y}if(p)t.moveTo(i,r),p=!1;else{if(n)s=d[2],l=d[3];else{var f=e._handleIn;s=i+f._x,l=r+f._y}s===i&&l===r&&u===a&&c===o?t.lineTo(i,r):t.bezierCurveTo(u,c,s,l,i,r)}if(a=i,o=r,n)u=d[4],c=d[5];else{f=e._handleOut;u=a+f._x,c=o+f._y}}for(var g=0;g<f;g++)m(h[g]);e._closed&&f>0&&m(h[0])}return{_draw:function(e,n,i,r){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),l=s.hasFill(),u=s.hasStroke(),c=s.getDashArray(),h=!ht.support.nativeDash&&u&&c&&c.length;function f(t){return c[(t%h+h)%h]}if(a||e.beginPath(),(l||u&&!h||o)&&(t(e,this,r),this._closed&&e.closePath()),!o&&(l||u)&&(this._setStyles(e,n,i),l&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(h){a||e.beginPath();var d,p=new V(this,.25,32,!1,r),m=p.length,g=-s.getDashOffset(),v=0;for(g%=m;g>0;)g-=f(v--)+f(v--);for(;g<m;)d=g+f(v++),(g>0||d>0)&&p.drawPart(e,Math.max(g,0),Math.max(d,0)),g=d+f(v++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){if(!(i<=0))for(var r,a,o=i/2,s=i-2,l=o-1,u=new Array(6),c=0,h=e.length;c<h;c++){var f=e[c],d=f._selection;if(f._transformCoordinates(n,u),r=u[0],a=u[1],2&d&&m(2),4&d&&m(4),t.fillRect(r-o,a-o,i,i),s>0&&!(1&d)){var p=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-l,a-l,s,s),t.fillStyle=p}}function m(e){var n=u[e],i=u[e+1];r==n&&a==i||(t.beginPath(),t.moveTo(r,a),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ht.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new N(v.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new N(v.read(arguments))])},cubicCurveTo:function(){var e=v.read(arguments),n=v.read(arguments),i=v.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new N(i,n.subtract(i))])},quadraticCurveTo:function(){var e=v.read(arguments),n=v.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=v.read(arguments),n=v.read(arguments),i=c.pick(c.read(arguments),.5),r=1-i,a=t(this)._point,o=e.subtract(a.multiply(r*r)).subtract(n.multiply(i*i)).divide(2*i*r);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,i,r,a=Math.abs,o=Math.sqrt,s=t(this),l=s._point,u=v.read(arguments),h=c.peek(arguments);if("boolean"==typeof(y=c.pick(h,!0)))var f=(_=l.add(u).divide(2)).add(_.subtract(l).rotate(y?-90:90));else if(c.remain(arguments)<=2)f=u,u=v.read(arguments);else if(!l.equals(u)){var d=b.read(arguments),p=m.isZero;if(p(d.width)||p(d.height))return this.lineTo(u);var g=c.read(arguments),y=!!c.read(arguments),x=!!c.read(arguments),_=l.add(u).divide(2),w=(Q=l.subtract(_).rotate(-g)).x,M=Q.y,T=a(d.width),C=a(d.height),k=T*T,P=C*C,A=w*w,O=M*M,L=o(A/k+O/P);if(L>1&&(k=(T*=L)*T,P=(C*=L)*C),a(L=(k*P-k*O-P*A)/(k*O+P*A))<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");e=new v(T*M/C,-C*w/T).multiply((x===y?-1:1)*o(L)).rotate(g).add(_),n=(i=(r=(new S).translate(e).rotate(g).scale(T,C))._inverseTransform(l)).getDirectedAngle(r._inverseTransform(u)),!y&&n>0?n-=360:y&&n<0&&(n+=360)}if(f){var I=new E(l.add(f).divide(2),f.subtract(l).rotate(90),!0),R=new E(f.add(u).divide(2),u.subtract(f).rotate(90),!0),D=new E(l,u),z=D.getSide(f);if(!(e=I.intersect(R,!0))){if(!z)return this.lineTo(u);throw new Error("Cannot create an arc with the given arguments")}n=(i=l.subtract(e)).getDirectedAngle(u.subtract(e));var B=D.getSide(e,!0);0===B?n=z*a(n):z===B&&(n+=n<0?360:-360)}if(n){for(var F=1e-7,j=a(n),V=j>=360?4:Math.ceil((j-F)/90),U=n/V,H=U*Math.PI/360,G=4/3*Math.sin(H)/(1+Math.cos(H)),W=[],q=0;q<=V;q++){var Q=u,Y=null;if(q<V&&(Y=i.rotate(90).multiply(G),r?(Q=r._transformPoint(i),Y=r._transformPoint(i.add(Y)).subtract(Q)):Q=e.add(i)),q){var X=i.rotate(-90).multiply(G);r&&(X=r._transformPoint(i.add(X)).subtract(Q)),W.push(new N(Q,X,Y))}else s.setHandleOut(Y);i=i.rotate(U)}this._add(W)}},lineBy:function(){var e=v.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=v.read(arguments),n=v.read(arguments),i=c.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},cubicCurveBy:function(){var e=v.read(arguments),n=v.read(arguments),i=v.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=v.read(arguments),n=v.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(v.read(arguments)),i=c.pick(c.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,e.add(v.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return F[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,a){var o=t[0];if(!o)return new _;var s=new Array(6),l=o._transformCoordinates(i,new Array(6)),u=l.slice(0,2),c=u.slice(),h=new Array(2);function f(t){t._transformCoordinates(i,s);for(var e=0;e<2;e++)D._addBounds(l[e],l[e+4],s[e+2],s[e],e,a?a[e]:0,u,c,h);var n=l;l=s,s=n}for(var d=1,p=t.length;d<p;d++)f(t[d]);return e&&f(o),new _(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,n,i,r){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),l=o&&n._getStrokeMatrix(i,r),u=o&&F._getStrokePadding(s,l),c=F.getBounds(t,e,n,i,r,u);if(!o)return c;var h=s/2,f=a.getStrokeJoin(),d=a.getStrokeCap(),p=a.getMiterLimit(),m=new _(new b(u));function g(t){c=c.include(t)}function v(t){c=c.unite(m.setCenter(t._point.transform(i)))}function y(t,e){"round"===e||t.isSmooth()?v(t):F._addBevelJoin(t,e,h,p,i,l,g)}function x(t,e){"round"===e?v(t):F._addSquareCap(t,e,h,i,l,g)}for(var w=t.length-(e?0:1),S=1;S<w;S++)y(t[S],f);return e?y(t[0],f):w>0&&(x(t[0],d),x(t[t.length-1],d)),c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new v(t,0).transform(e),i=new v(0,t).transform(e),r=n.getAngleInRadians(),a=n.getLength(),o=i.getLength(),s=Math.sin(r),l=Math.cos(r),u=Math.tan(r),c=Math.atan2(o*u,a),h=Math.atan2(o,u*a);return[Math.abs(a*Math.cos(c)*l+o*Math.sin(c)*s),Math.abs(o*Math.sin(h)*l+a*Math.cos(h)*s)]},_addBevelJoin:function(t,e,n,i,r,a,o,s){var l=t.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(r),h=u.getNormalAtTime(1).multiply(n).transform(a),f=l.getNormalAtTime(0).multiply(n).transform(a),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),s&&o(c),o(c.add(h)),"miter"===e){var p=new E(c.add(h),new v(-h.y,h.x),!0).intersect(new E(c.add(f),new v(-f.y,f.x),!0),!0);p&&c.getDistance(p)<=i*n&&o(p)}o(c.add(f))},_addSquareCap:function(t,e,n,i,r,a,o){var s=t._point.transform(i),l=t.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===e&&(o&&(a(s.subtract(u)),a(s.add(u))),s=s.add(u.rotate(-90))),a(s.add(u)),a(s.subtract(u))},getHandleBounds:function(t,e,n,i,r){var a,o,s=n.getStyle();if(r.stroke&&s.hasStroke()){var l=n._getStrokeMatrix(i,r),u=s.getStrokeWidth()/2,c=u;"miter"===s.getStrokeJoin()&&(c=u*s.getMiterLimit()),"square"===s.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),a=F._getStrokePadding(u,l),o=F._getStrokePadding(c,l)}for(var h=new Array(6),f=1/0,d=-f,p=f,m=d,g=0,v=t.length;g<v;g++){t[g]._transformCoordinates(i,h);for(var y=0;y<6;y+=2){var b=y?a:o,x=b?b[0]:0,w=b?b[1]:0,S=h[y],E=h[y+1],M=S-x,T=S+x,C=E-w,k=E+w;M<f&&(f=M),T>d&&(d=T),C<p&&(p=C),k>m&&(m=k)}}return new _(f,p,d-f,m-p)}}});F.inject({statics:new function(){var t=.5522847498307936,e=[new N([-1,0],[0,t],[0,-t]),new N([0,-1],[-t,0],[t,0]),new N([1,0],[0,-t],[0,t]),new N([0,1],[t,0],[-t,0])];function n(t,e,n){var i=c.getNamed(n),r=new F(i&&0==i.insert&&T.NO_INSERT);return r._add(t),r._closed=e,r.set(i,{insert:!0})}function i(t,i,r){for(var a=new Array(4),o=0;o<4;o++){var s=e[o];a[o]=new N(s._point.multiply(i).add(t),s._handleIn.multiply(i),s._handleOut.multiply(i))}return n(a,!0,r)}return{Line:function(){return n([new N(v.readNamed(arguments,"from")),new N(v.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=v.readNamed(arguments,"center"),e=c.readNamed(arguments,"radius");return i(t,new b(e),arguments)},Rectangle:function(){var e,i=_.readNamed(arguments,"rectangle"),r=b.readNamed(arguments,"radius",0,{readNull:!0}),a=i.getBottomLeft(!0),o=i.getTopLeft(!0),s=i.getTopRight(!0),l=i.getBottomRight(!0);if(!r||r.isZero())e=[new N(a),new N(o),new N(s),new N(l)];else{var u=(r=b.min(r,i.getSize(!0).divide(2))).width,c=r.height,h=u*t,f=c*t;e=[new N(a.add(u,0),null,[-h,0]),new N(a.subtract(0,c),[0,f]),new N(o.add(0,c),null,[0,-f]),new N(o.add(u,0),[-h,0],null),new N(s.subtract(u,0),null,[h,0]),new N(s.add(0,c),[0,-f],null),new N(l.subtract(0,c),null,[0,f]),new N(l.subtract(u,0),[h,0])]}return n(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=P._readEllipse(arguments);return i(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=v.readNamed(arguments,"from"),e=v.readNamed(arguments,"through"),n=v.readNamed(arguments,"to"),i=c.getNamed(arguments),r=new F(i&&0==i.insert&&T.NO_INSERT);return r.moveTo(t),r.arcTo(e,n),r.set(i)},RegularPolygon:function(){for(var t=v.readNamed(arguments,"center"),e=c.readNamed(arguments,"sides"),i=c.readNamed(arguments,"radius"),r=360/e,a=e%3==0,o=new v(0,a?-i:i),s=a?-1:.5,l=new Array(e),u=0;u<e;u++)l[u]=new N(t.add(o.rotate((u+s)*r)));return n(l,!0,arguments)},Star:function(){for(var t=v.readNamed(arguments,"center"),e=2*c.readNamed(arguments,"points"),i=c.readNamed(arguments,"radius1"),r=c.readNamed(arguments,"radius2"),a=360/e,o=new v(0,-1),s=new Array(e),l=0;l<e;l++)s[l]=new N(t.add(o.rotate(a*l).multiply(l%2?r:i)));return n(s,!0,arguments)}}}});var j=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var a=n.length-1;a>=0;a--){var o=i[a];i!==n||o instanceof F||(i=c.slice(i)),Array.isArray(o)?i[a]=new F({segments:o,insert:!1}):o instanceof j&&(i.splice.apply(i,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(e)).isEmpty()&&r.remove()}return n.length?t.base.call(this):((r=new F(T.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)c.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var o=n[r],s=o._matrix;i.push(o.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===F||"path"===n.type?n:c.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=r.length;a<o;a++)r[a].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var o=i[r],s=o._matrix;n[o._id]||o._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new F(T.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=v.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},c.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][t](e)||n;return n}}),{}));B.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function r(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function a(t,e,n,i,r){var a=new j(T.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),r&&0==r.insert||a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.copyAttributes(n,!0),a}function o(t,e,n,o){if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(n))return l(t,e,n);var s=r(t,!0),u=e&&t!==e&&r(e,!0),h=i[n];h[n]=!0,u&&(h.subtract||h.exclude)^u.isClockwise()^s.isClockwise()&&u.reverse();var p,m=d(z.expand(s.getCrossings(u))),y=s._children||[s],b=u&&(u._children||[u]),x=[],_=[];function w(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];c.push(x,i._segments),c.push(_,i.getCurves()),i._overlapsOnly=!0}}if(m.length){w(y),b&&w(b);for(var S=0,E=m.length;S<E;S++)g(m[S]._segment,s,u,_,h);for(S=0,E=x.length;S<E;S++){var M=x[S],T=M._intersection;M._winding||g(M,s,u,_,h),T&&T._overlap||(M._path._overlapsOnly=!1)}p=v(x,h)}else p=f(b?y.concat(b):y.slice(),(function(t){return!!h[t]}));return a(p,!0,t,e,o)}function l(t,e,n){var i=r(t),o=r(e),s=i.getCrossings(o),l="subtract"===n,u="divide"===n,c={},h=[];function f(t){if(!c[t._id]&&(u||o.contains(t.getPointAt(t.getLength()/2))^l))return h.unshift(t),c[t._id]=!0}for(var d=s.length-1;d>=0;d--){var p=s[d].split();p&&(f(p)&&p.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return f(i),a(h,!1,t,e)}function u(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function h(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function f(t,e,i){var r=t&&t.length;if(r){var a=c.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),o=t.slice().sort((function(t,e){return n(e.getArea())-n(t.getArea())})),s=o[0];null==i&&(i=s.isClockwise());for(var l=0;l<r;l++){for(var u=o[l],h=a[u._id],f=u.getInteriorPoint(),d=0,p=l-1;p>=0;p--){var m=o[p];if(m.contains(f)){var g=a[m._id];d=g.winding,h.winding+=d,h.container=g.exclude?g.container:m;break}}if(e(h.winding)===e(d))h.exclude=!0,t[h.index]=null;else{var v=h.container;u.setClockwise(v?!v.isClockwise():i)}}}return t}function d(t,e,n){var i,r,a,o=e&&[],s=!1,l=n||[],c=n&&{};function f(t){return t._path._id+"."+t._segment1._index}for(var d=(n&&n.length)-1;d>=0;d--){(p=n[d])._path&&(c[f(p)]=!0)}for(d=t.length-1;d>=0;d--){var p,m,g=t[d],v=g._time,y=v,b=e&&!e(g);if((p=g._curve)&&(p!==r?(s=!p.hasHandles()||c&&c[f(p)],i=[],a=null,r=p):a>=1e-8&&(v/=a)),b)i&&i.push(g);else{if(e&&o.unshift(g),a=y,v<1e-8)m=p._segment1;else if(v>1-1e-8)m=p._segment2;else{var x=p.divideAtTime(v,!0);s&&l.push(p,x),m=x._segment1;for(var _=i.length-1;_>=0;_--){var w=i[_];w._time=(w._time-v)/(1-v)}}g._setSegment(m);var S=m._intersection,E=g._intersection;if(S){u(S,E);for(var M=S;M;)u(M._intersection,S),M=M._next}else m._intersection=E}}return n||h(l),o||t}function p(i,r,a,o,s){var l,u,c=a?1:0,h=1^c,f=[i.x,i.y],d=f[c],m=f[h],g=1e-6,v=d-1e-9,y=d+1e-9,b=0,x=0,_=0,w=0,S=!1,E=!1,M=1,T=[];function C(n){var u=n[h+0],f=n[h+6];if(!(m<t(u,f)||m>e(u,f))){var b=n[c+0],x=n[c+2],E=n[c+4],C=n[c+6];if(u!==f){var k=m===u?0:m===f?1:v>e(b,x,E,C)||y<t(b,x,E,C)?1:D.solveCubic(n,h,m,T,0,1)>0?T[0]:1,P=0===k?b:1===k?C:D.getPoint(n,k)[a?"y":"x"],A=u>f?1:-1,O=l[h]>l[h+6]?1:-1,L=l[c+6];return m!==u?(P<v?_+=A:P>y?w+=A:S=!0,P>d-g&&P<d+g&&(M/=2)):(A!==O?b<v?_+=A:b>y&&(w+=A):b!=L&&(L<y&&P>y?(w+=A,S=!0):L>v&&P<v&&(_+=A,S=!0)),M=0),l=n,!s&&P>v&&P<y&&0===D.getTangent(n,k)[a?"x":"y"]&&p(i,r,!a,o,!0)}(b<y&&C>v||C<y&&b>v)&&(S=!0)}}function k(n){var i=n[h+0],r=n[h+2],o=n[h+4],s=n[h+6];if(m<=e(i,r,o,s)&&m>=t(i,r,o,s))for(var l,u=n[c+0],f=n[c+2],d=n[c+4],p=n[c+6],g=v>e(u,f,d,p)||y<t(u,f,d,p)?[n]:D.getMonoCurves(n,a),b=0,x=g.length;b<x;b++)if(l=C(g[b]))return l}for(var P=0,A=r.length;P<A;P++){var O,L=r[P],I=L._path,N=L.getValues();if(!(P&&r[P-1]._path===I||(l=null,I._closed||(u=D.getValues(I.getLastCurve().getSegment2(),L.getSegment1(),null,!o))[h]!==u[h+6]&&(l=u),l))){l=N;for(var R=I.getLastCurve();R&&R!==L;){var z=R.getValues();if(z[h]!==z[h+6]){l=z;break}R=R.getPrevious()}}if(O=k(N))return O;if(P+1===A||r[P+1]._path!==I){if(u&&(O=k(u)))return O;!S||_||w||(_=w=I.isClockwise(o)^a?1:-1),b+=_,x+=w,_=w=0,S&&(E=!0,S=!1),u=null}}return b=n(b),x=n(x),{winding:e(b,x),windingL:b,windingR:x,quality:M,onPath:E}}function g(t,e,i,r,a){var o=[],s=t,l=0;do{var u=(b=t.getCurve()).getLength();o.push({segment:t,curve:b,length:u}),l+=u,t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var c=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<c.length&&h.quality<.5;f++){u=l*c[f];for(var d=0,g=o.length;d<g;d++){var v=o[d],y=v.length;if(u<=y){var b,x=(b=v.curve)._path,_=x._parent,w=_ instanceof j?_:x,S=m.clamp(b.getTimeAt(u),1e-8,1-1e-8),E=b.getPointAtTime(S),M=n(b.getTangentAtTime(S).y)<Math.SQRT1_2,T=null;if(a.subtract&&i){var C=w===e?i._getWinding(E,M,!0):e._getWinding(E,M,!0);if(w===e&&C.winding||w===i&&!C.winding){if(C.quality<1)continue;T={winding:0,quality:1}}}(T=T||p(E,r,M,!0)).quality>h.quality&&(h=T);break}u-=y}}for(d=o.length-1;d>=0;d--)o[d].segment._winding=h}function v(t,e){var n,i=[];function r(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(t){if(t)for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0;return!1}function o(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function s(t,e){var i=t._intersection,o=i,s=[];function l(i,o){for(;i&&i!==o;){var l=i._segment,u=l&&l._path;if(u){var c=l.getNext()||u.getFirstSegment(),h=c._intersection;l!==t&&(a(l)||a(c)||c&&r(l)&&(r(c)||h&&r(h._segment)))&&s.push(l),e&&n.push(l)}i=i._next}}if(e&&(n=[t]),i){for(l(i);i&&i._prev;)i=i._prev;l(i,o)}return s}t.sort((function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),o=t._path,s=e._path;return r^a?r?1:-1:!n^!i?n?1:-1:o!==s?o._id-s._id:t._index-e._index}));for(var l=0,u=t.length;l<u;l++){var c,h,f,d=t[l],p=r(d),m=null,g=!1,v=!0,y=[];if(p&&d._path._overlapsOnly){var b=d._path,x=d._intersection._segment._path;b.compare(x)&&(b.getArea()&&i.push(b.clone(!1)),o(b),o(x),p=!1)}for(;p;){var _=!m,w=s(d,_),S=w.shift(),E=!(g=!_&&(a(d)||a(S)))&&S;if(_&&(m=new F(T.NO_INSERT),c=null),g){(d.isFirst()||d.isLast())&&(v=d._path._closed),d._visited=!0;break}if(E&&c&&(y.push(c),c=null),c||(E&&w.push(d),c={start:m._segments.length,crossings:w,visited:h=[],handleIn:f}),E&&(d=S),!r(d)){m.removeSegments(c.start);for(var M=0,C=h.length;M<C;M++)h[M]._visited=!1;h.length=0;do{(d=c&&c.crossings.shift())&&d._path||(d=null,(c=y.pop())&&(h=c.visited,f=c.handleIn))}while(c&&!r(d));if(!d)break}var k=d.getNext();m.add(new N(d._point,f,k&&d._handleOut)),d._visited=!0,h.push(d),d=k||d._path.getFirstSegment(),f=k&&k._handleIn}g&&(v&&(m.getFirstSegment().setHandleIn(f),m.setClosed(v)),0!==m.getArea()&&i.push(m))}return i}return{_getWinding:function(t,e,n){return p(t,this.getCurves(),e,n)},unite:function(t,e){return o(this,t,"unite",e)},intersect:function(t,e){return o(this,t,"intersect",e)},subtract:function(t,e){return o(this,t,"subtract",e)},exclude:function(t,e){return o(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?l(this,t,"divide"):a([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var i=!1,r=!1,a=this.getIntersections(null,(function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)})),o=i&&r&&[];if(a=z.expand(a),i)for(var s=d(a,(function(t){return t.hasOverlap()}),o),l=s.length-1;l>=0;l--){var u=s[l],f=u._path,p=u._segment,m=p.getPrevious(),g=p.getNext();n(m,f)&&n(g,f)&&(p.remove(),m._handleOut._set(0,0),g._handleIn._set(0,0),m===p||m.getCurve().hasLength()||(g._handleIn.set(m._handleIn),m.remove()))}r&&(d(a,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,a=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},o),o&&h(o),e=v(c.each(e,(function(t){c.push(this,t._segments)}),[])));var y,b=e.length;return b>1&&t?(e!==t&&this.setChildren(e),y=this):1!==b||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),y=this),y||((y=new j(T.NO_INSERT)).addChildren(e),(y=y.reduce()).copyAttributes(this),this.replaceWith(y)),y},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(f(this.removeChildren(),(function(e){return!!(t?e:1&e)}),e)):e!==s&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,a=[],o=[],s=0,l=i.length;s<l;s++){var u=i[s].getValues(),c=u[1],h=u[3],f=u[5],d=u[7];if(r>=t(c,h,f,d)&&r<=e(c,h,f,d))for(var p=D.getMonoCurves(u),m=0,g=p.length;m<g;m++){var v=p[m],y=v[1],b=v[7];if(y!==b&&(r>=y&&r<=b||r>=b&&r<=y)){var x=r===y?v[0]:r===b?v[6]:1===D.solveCubic(v,1,r,o,0,1)?D.getPoint(v,o[0]).x:(v[0]+v[6])/2;a.push(x)}}}a.length>1&&(a.sort((function(t,e){return t-e})),n.x=(a[0]+a[1])/2)}return n}}});var V=c.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){var a,o=[],s=[],l=0,u=1/(n||32),c=t._segments,h=c[0];function f(t,n){var a=D.getValues(t,n,r);o.push(a),function t(n,r,a,o){if(!(o-a>u)||i&&D.isStraight(n)||D.isFlatEnough(n,e||.25)){var c=n[6]-n[0],h=n[7]-n[1],f=Math.sqrt(c*c+h*h);f>0&&(l+=f,s.push({offset:l,curve:n,index:r,time:o}))}else{var d=D.subdivide(n,.5),p=(a+o)/2;t(d[0],r,a,p),t(d[1],r,p,o)}}(a,t._index,0,1)}for(var d=1,p=c.length;d<p;d++)f(h,a=c[d]),h=a;t._closed&&f(a||h,c[0]),this.curves=o,this.parts=s,this.length=l,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var a=n[e];if(a.offset>=t){this.index=e;var o=n[e-1],s=o&&o.index===a.index?o.time:0,l=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-l)/(a.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),a=i.index,o=r.index;a<=o;a++){var s=D.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},c.each(D._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this._get(e);return D[t](this.curves[n.index],n.time)}}),{})),U=c.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,a=0,o=i.length;a<o;a++){var s=i[a].point;e&&e.equals(s)||n.push(e=s.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new N(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,a){var o=this.points;if(i-n!=1){for(var s,l=this.chordLengthParameterize(n,i),u=Math.max(e,e*e),c=!0,h=0;h<=4;h++){var f=this.generateBezier(n,i,l,r,a),d=this.findMaxError(n,i,f,l);if(d.error<e&&c)return void this.addCurve(t,f);if(s=d.index,d.error>=u)break;c=this.reparameterize(n,i,l,f),u=d.error}var p=o[s-1].subtract(o[s+1]);this.fitCubic(t,e,n,s,r,p),this.fitCubic(t,e,s,i,p.negate(),a)}else{var m=o[n],g=o[i],v=m.getDistance(g)/3;this.addCurve(t,[m,m.add(r.normalize(v)),g.add(a.normalize(v)),g])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new N(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var a=Math.abs,o=this.points,s=o[t],l=o[e],u=[[0,0],[0,0]],c=[0,0],h=0,f=e-t+1;h<f;h++){var d=n[h],p=1-d,m=3*d*p,g=p*p*p,v=m*p,y=m*d,b=d*d*d,x=i.normalize(v),_=r.normalize(y),w=o[t+h].subtract(s.multiply(g+v)).subtract(l.multiply(y+b));u[0][0]+=x.dot(x),u[0][1]+=x.dot(_),u[1][0]=u[0][1],u[1][1]+=_.dot(_),c[0]+=x.dot(w),c[1]+=_.dot(w)}var S,E,M=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(a(M)>1e-12){var T=u[0][0]*c[1]-u[1][0]*c[0];S=(c[0]*u[1][1]-c[1]*u[0][1])/M,E=T/M}else{var C=u[0][0]+u[0][1],k=u[1][0]+u[1][1];S=E=a(C)>1e-12?c[0]/C:a(k)>1e-12?c[1]/k:0}var P,A,O=l.getDistance(s),L=1e-12*O;if(S<L||E<L)S=E=O/3;else{var I=l.subtract(s);P=i.normalize(S),A=r.normalize(E),P.dot(I)-A.dot(I)>O*O&&(S=E=O/3,P=A=null)}return[s,s.add(P||i.normalize(S)),l.add(A||r.normalize(E)),l]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var o=this.evaluate(3,t,n),s=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=o.subtract(e),c=s.dot(s)+u.dot(l);return m.isZero(c)?n:n-u.dot(s)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var a=0;a<=t-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var s=this.evaluate(3,n,i[o-t]).subtract(this.points[o]),l=s.x*s.x+s.y*s.y;l>=a&&(a=l,r=o)}return{error:a,index:r}}}),H=T.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===s&&t.y===s;this._initialize(e&&t,!e&&v.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),G=H.extend({_class:"PointText",initialize:function(){H.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new y(t.x,t.y,this,"setPoint")},setPoint:function(){var t=v.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,a=r.hasFill(),o=r.hasStroke(),s=r.getLeading(),l=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,c=i.length;u<c;u++){t.shadowColor=l;var h=i[u];a&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(h,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==a&&(l-=s/("center"===a?2:1));var u=new _(l,r?-.75*o:0,s,r*o);return t?t._transformBounds(u,u):u}}),W=c.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]};function r(e){var n,r=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(r){var o=r[4]?4:3;n=new Array(o);for(var s=0;s<o;s++){var u=r[s+1];n[s]=parseInt(1==u.length?u+u:u,16)/255}}else if(r=e.match(/^(rgb|hsl)a?\((.*)\)$/)){a=r[1],n=r[2].trim().split(/[,\s]+/g);for(var c="hsl"===a,h=(s=0,Math.min(n.length,4));s<h;s++){var f=n[s];u=parseFloat(f);if(c)if(0===s){var d=f.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else s<3&&(u/=100);else s<3&&(u/=255);n[s]=u}}else{var p=i[e];if(!p)if(l){t||((t=st.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var m=t.getImageData(0,0,1,1).data;p=i[e]=[m[0]/255,m[1]/255,m[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),o=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[o[(i=a[i])[0]],o[i[1]],o[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,o=0===a,s=(i+r)/2;return[o?0:60*(i==t?(e-n)/a+(e<n?6:0):i==e?(n-t)/a+2:(t-e)/a+4),o?0:s<.5?a/(i+r):a/(2-i-r),s]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,o=[],s=0;s<3;s++){var l=i[s];l<0&&(l+=1),l>1&&(l-=1),o[s]=6*l<1?a+6*(r-a)*l:2*l<1?r:3*l<2?a+(r-a)*(2/3-l)*6:a}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(e,(function(t,i){n[i]=[],c.each(t,(function(t,r){var a=c.capitalize(t),o=/^(hue|saturation)$/.test(t),s=n[i][r]="gradient"===i?"gradient"===t?function(t){var e=this._components[0];return e!==(t=q.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return v.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+a]=function(){return this._type===i||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+a]=function(t){this._type===i||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=s.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function t(i){var a,o,s,l,u=arguments,h=this.__read,f=0;Array.isArray(i)&&(i=(u=i)[0]);var d=null!=i&&typeof i;if("string"===d&&i in e&&(a=i,i=u[1],Array.isArray(i)?(o=i,s=u[2]):(h&&(f=1),u=c.slice(u,1),d=typeof i)),!o){if(l="number"===d?u:"object"===d&&null!=i.length?i:null){a||(a=l.length>=3?"rgb":"gray");var p=e[a].length;s=l[p],h&&(f+=l===arguments?p+(null!=s?1:0):1),l.length>p&&(l=c.slice(l,0,p))}else if("string"===d){var m=r(i);a=m[0],4===(o=m[1]).length&&(s=o[3],o.length--)}else if("object"===d)if(i.constructor===t){if(a=i._type,o=i._components.slice(),s=i._alpha,"gradient"===a)for(var g=1,v=o.length;g<v;g++){var y=o[g];y&&(o[g]=y.clone())}}else if(i.constructor===q)a="gradient",l=u;else{var b=e[a="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],x=n[a];this._components=o=[];for(g=0,v=b.length;g<v;g++){null==(_=i[b[g]])&&!g&&"gradient"===a&&"stops"in i&&(_={stops:i.stops,radial:i.radial}),null!=(_=x[g].call(this,_))&&(o[g]=_)}s=i.alpha}h&&a&&(f=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(g=0,v=(x=n[this._type]).length;g<v;g++){var _;null!=(_=x[g].call(this,l&&l[g]))&&(o[g]=_)}}return this._components=o,this._properties=e[this._type],this._alpha=s,h&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new W(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?W.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=p.instance,r=0,a=t.length;r<a;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],a=r._stops,o=i[1],s=i[2],l=i[3],u=e&&e.inverted();if(u&&(o=u._transformPoint(o),s=u._transformPoint(s),l&&(l=u._transformPoint(l))),r._radial){var c=s.getDistance(o);if(l){var h=l.subtract(o);h.getLength()>c&&(l=o.add(h.normalize(c-.1)))}var f=l||o;n=t.createRadialGradient(f.x,f.y,0,o.x,o.y,c)}else n=t.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var m=a[d],g=m._offset;n.addColorStop(null==g?d/(p-1):g,m._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new W(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return c.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=W.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),a=0,o=i.length;a<o;a++)r[a]=t(i[a],r[a]);return new W(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),q=c.extend({_class:"Gradient",initialize:function(t,e){this._id=g.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=s))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new q(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=s;for(n=0,i=(e=this._stops=Q.readList(t,0,{clone:!0})).length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),Q=c.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===s&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new Q(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return c.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){W._setOwner(this._color,null),this._color=W._setOwner(W.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Y=c.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new v,selectedColor:null},e=c.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},e,{fillColor:new W}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},a={_class:"Style",beans:!0,initialize:function(i,r,a){this._values={},this._owner=r,this._project=r&&r._project||a||ht.project,this._defaults=!r||r instanceof C?e:r instanceof H?n:t,i&&this.set(i)}};return c.each(e,(function(t,e){var n=/Color$/.test(e),o="shadowOffset"===e,l=c.capitalize(e),u=i[e],h="set"+l,f="get"+l;a[h]=function(t){var i=this._owner,r=i&&i._children,a=r&&r.length>0&&!(i instanceof j);if(a)for(var o=0,s=r.length;o<s;o++)r[o]._style[h](t);if(("selectedColor"===e||!a)&&e in this._defaults){var l=this._values[e];l!==t&&(n&&(l&&(W._setOwner(l,null),l._canvasStyle=null),t&&t.constructor===W&&(t=W._setOwner(t,i,a&&h))),this._values[e]=t,i&&i._changed(u||129))}},a[f]=function(t){var i=this._owner,r=i&&i._children,a=r&&r.length>0&&!(i instanceof j);if(a&&!t)for(var l=0,u=r.length;l<u;l++){var d=r[l]._style[f]();if(l){if(!c.equals(p,d))return s}else p=d}else if(e in this._defaults){var p;if((p=this._values[e])===s)(p=this._defaults[e])&&p.clone&&(p=p.clone());else{var m=n?W:o?v:null;!m||p&&p.constructor===m||(this._values[e]=p=m.read([p],0,{readNull:!0,clone:!0}))}}return p&&n&&(p=W._setOwner(p,i,a&&h)),p},r[f]=function(t){return this._style[f](t)},r[h]=function(t){this._style[h](t)}})),c.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var n="get"+e,i="set"+e;a[n]=r[n]="#get"+t,a[i]=r[i]="#set"+t})),T.inject(r),a},{set:function(t){var e=t instanceof Y,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,n){var i=t._values,r=e._values,a=e._defaults;for(var o in i){var l=i[o],u=r[o];if(!(n&&o in r||c.equals(l,u===s?a[o]:u)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),X=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var s=r[o],l=s?s+a:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,a=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||r.clientLeft||0),s=n.top-(a.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;o+=l.pageXOffset||a.scrollLeft||r.scrollLeft,s+=l.pageYOffset||a.scrollTop||r.scrollTop}return new _(o,s,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new _(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return X.getBounds(t,e).getPoint()},getSize:function(t){return X.getBounds(t,!0).getSize()},isInvisible:function(t){return X.getSize(t).equals(new b(0,0))},isInView:function(t){return!X.isInvisible(t)&&X.getViewportBounds(t).intersects(X.getBounds(t,!0))},isInserted:function(t){return u.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},$={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++){var s=r[a],l=t===u&&("touchstart"===s||"touchmove"===s)&&{passive:!1};t.addEventListener(s,i,l)}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++)t.removeEventListener(r[a],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new v(e.pageX||e.clientX+u.documentElement.scrollLeft,e.pageY||e.clientY+u.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return $.getPoint(t).subtract(X.getOffset(e||$.getTarget(t)))}};$.requestAnimationFrame=new function(){var t,e=X.getPrefixed(l,"requestAnimationFrame"),n=!1,i=[];function r(){var t=i;i=[];for(var a=0,o=t.length;a<o;a++)t[a]();(n=e&&i.length)&&e(r)}return function(a){i.push(a),e?n||(e(r),n=!0):t||(t=setInterval(r,1e3/60))}};var Z=c.extend(h,{_class:"View",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function r(){var t=X.getSize(n);return t.isNaN()||t.isZero()?new b(i("width"),i("height")):t}var a;if(l&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),$.add(n,this._viewEvents);if(X.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var o=this;$.add(l,this._windowEvents={resize:function(){o.setViewSize(r())}})}if(a=r(),f.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var s=this._stats.domElement,c=s.style,h=X.getOffset(n);c.position="absolute",c.left=h.x+"px",c.top=h.y+"px",u.body.appendChild(s)}}else a=new b(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=l&&l.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new S)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ht.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Z._focused===this&&(Z._focused=null),Z._views.splice(Z._views.indexOf(this),1),delete Z._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),$.remove(this._element,this._viewEvents),$.remove(l,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(T._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;$.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;X.getPrefixed(u,"hidden")&&"true"!==f.getAttribute(e,"keepalive")||!X.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ht=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new c(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new x(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=b.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new _(new v,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return X.isInView(this._element)},isInserted:function(){return X.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=u.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(X.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=(e?c:v).read(arguments),i=v.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=v.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new S).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new y(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=v.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(v.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(v.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(v.read(arguments))},getEventPoint:function(t){return this.viewToProject($.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return u&&"string"==typeof e&&(e=u.getElementById(e)),new(l?J:Z)(t,e)}}},new function(){if(l){var t,e,n,i,r,a=!1,o=!1,s=l.navigator;s.pointerEnabled||s.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",r="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",r="touchend touchcancel","ontouchstart"in l&&s.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",r+=" mouseup"));var c={},h={mouseout:function(t){var e=Z._focused,n=$.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=$.getOffset(t,e._element),r=i.x,a=Math.abs,o=a(r),s=o-(1<<25);i.x=a(s)<o?s*(r<0?-1:1):r,C(e,t,e.viewToProject(i))}},scroll:T};c[n]=function(t){var e=Z._focused=M(t);a||(a=!0,e._handleMouseEvent("mousedown",t))},h[i]=function(n){var i=Z._focused;if(!o){var r=M(n);r?i!==r&&(i&&C(i,n),t||(t=i),i=Z._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=Z._focused=t,t=null,T())}i&&C(i,n)},h[n]=function(){o=!0},h[r]=function(t){var e=Z._focused;e&&a&&e._handleMouseEvent("mouseup",t),o=a=!1},$.add(u,h),$.add(l,{load:T});var f,d,p,m,g,v,y,b,x=!1,_=!1,w={doubleclick:"click",mousedrag:"mousemove"},S=!1,E={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],o="mousemove"===t,s=this._scope.tool,l=this;function u(t){return i.virtual[t]||l.responds(t)||s&&s.responds(t)}o&&a&&u("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),h=r&&c&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,E=!1,M={};if(M[t.substr(5)]=!0,r&&w!==m&&(m&&k(m,null,"mouseleave",e,n),w&&k(w,null,"mouseenter",e,n),m=w),S^c&&(k(this,null,c?"mouseenter":"mouseleave",e,n),c?this:null,E=!0),!c&&!M.drag||n.equals(d)||(P(this,w,o?t:"mousemove",e,n,d),E=!0),S=c,M.down&&c||M.up&&f){if(P(this,w,t,e,n,f),M.down){if(b=w===v&&Date.now()-y<300,p=v=w,!_&&w){for(var T=w;T&&!T.responds("mousedrag");)T=T._parent;T&&(g=w)}f=n}else M.up&&(_||w!==p||(y=Date.now(),P(this,w,b?"doubleclick":"click",e,n,f),b=!1),p=g=null);S=!1,E=!0}d=n,E&&s&&(x=s._handleMouseEvent(t,e,n,M)||x),!1!==e.cancelable&&(x&&!M.move||M.down&&u("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,a=this._scope,o=a.tool;function s(o){o.responds(t)&&(ht=a,o.emit(t,r=r||new tt(t,e,n,i)))}this.isVisible()&&(s(this),o&&o.responds(t)&&s(o))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var a in E)i[a]=(i[a]||0)+(E[a][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:T,_resetState:function(){a=o=x=S=!1,t=e=f=d=p=m=g=v=y=b=null}}}}function M(t){var e=$.getTarget(t);return e.getAttribute&&Z._viewsById[e.getAttribute("id")]}function T(){var t=Z._focused;if(!t||!t.isVisible())for(var n=0,i=Z._views.length;n<i;n++)if((t=Z._views[n]).isVisible()){Z._focused=e=t;break}}function C(t,e,n){t._handleMouseEvent("mousemove",e,n)}function k(t,e,n,i,r,a,o){var s,l=!1;function u(t,n){if(t.responds(n)){if(s||(s=new nt(n,i,r,e||t,a?r.subtract(a):null)),t.emit(n,s)&&(x=!0,s.prevented&&(_=!0),s.stopped))return l=!0}else{var o=w[n];if(o)return u(t,o)}}for(;t&&t!==o&&!u(t,n);)t=t._parent;return l}function P(t,e,n,i,r,a){return t._project.removeOn(n),_=x=!1,g&&k(g,null,n,i,r,a)||e&&e!==g&&!e.isDescendant(g)&&k(e,null,"mousedrag"===n?"mousemove":n,i,r,a,g)||k(t,g||e||t,n,i,r,a)}}),J=Z.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof l.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));e=st.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,"hidpi"))){var r=l.devicePixelRatio||1,a=X.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/a}Z.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,a=this._context;if(!f.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,i=ht.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,a=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=a}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var a=0,o=e.length;a<o;a++)r=Math.max(r,n.measureText(e[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),K=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return et.modifiers}}),tt=K.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),et=new function(){var t,e,n={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},r={},a={},o=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ht&&ht.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===s?String.fromCharCode(t.keyCode):e,n[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function f(e,n,i,s){var l,u=Z._focused;if(r[n]=e,e?a[n]=i:delete a[n],n.length>1&&(l=c.camelize(n))in o){o[l]=e;var h=ht&&ht.agent;if("meta"===l&&h&&h.mac)if(e)t={};else{for(var d in t)d in a&&f(!1,d,t[d],s);t=null}}else e&&t&&(t[n]=i);u&&u._handleKeyEvent(e?"keydown":"keyup",s,n,i)}return $.add(u,{keydown:function(t){var n=h(t),r=ht&&ht.agent;n.length>1||r&&r.chrome&&(t.altKey||r.mac&&t.metaKey||!r.mac&&t.ctrlKey)?f(!0,n,i[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=h(t),i=t.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==e&&(n=r.toLowerCase()),f(!0,n,r,t),e=null}},keyup:function(t){var e=h(t);e in a&&f(!1,e,a[e],t)}}),$.add(l,{blur:function(t){for(var e in a)f(!1,e,a[e],t)}}),{modifiers:o,isDown:function(t){return!!r[t]}}},nt=K.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),it=K.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),rt=d.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){ht=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,a=this.responds(t),o=this.minDistance,s=this.maxDistance,l=!1,u=this;function c(t,e){var a=n,o=r?u._point:u._downPoint||a;if(r){if(u._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=t||null!=e)){var s=a.subtract(o),l=s.getLength();if(l<(t||0))return!1;e&&(a=o.add(s.normalize(Math.min(l,e))))}u._moveCount++}return u._point=a,u._lastPoint=o||a,i.down&&(u._moveCount=-1,u._downPoint=a,u._downCount++),!0}function h(){a&&(l=u.emit(t,new it(u,t,e))||l)}if(i.down)c(),h();else if(i.up)c(null,s),h();else if(a)for(;c(o,s);)h();return l}}),at=c.extend(h,{_class:"Tween",statics:{easings:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},initialize:function t(e,n,i,r,a,o){this.object=e;var s=typeof a,l="function"===s;this.type=l?s:"string"===s?a:"linear",this.easing=l?a:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var u=n||i;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(i),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},r=0,a=n&&n.length;r<a;r++){var o=n[r],s=i(this._from[o]),l=i(this._to[o]),u=s&&l&&s.__add&&l.__add?l.__subtract(s).__multiply(e).__add(s):(l-s)*e+s;this._setProperty(this._parsedKeys[o],u)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new c({progress:t,factor:e}))}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var a,o=e[i],s=this._parsedKeys[o],l=this._getProperty(s);if(t){var u=this._resolveValue(l,t[o]);this._setProperty(s,u),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,l)}else a=l&&l.clone?l.clone():l;n[o]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return ht.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],a=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=a.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),ot={request:function(t){var e=new o.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)}},st={canvases:[],getCanvas:function(t,e){if(!l)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=u.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},lt=new function(){var t,e,n,i,r,a,o,s,l,u,h,f=Math.min,d=Math.max,p=Math.abs;function m(t,e,n){return.2989*t+.587*e+.114*n}function g(t,e,n,i){var r=i-m(t,e,n),a=(i=m(l=t+r,u=e+r,h=n+r),f(l,u,h)),o=d(l,u,h);if(a<0){var s=i-a;l=i+(l-i)*i/s,u=i+(u-i)*i/s,h=i+(h-i)*i/s}if(o>255){var c=255-i,p=o-i;l=i+(l-i)*c/p,u=i+(u-i)*c/p,h=i+(h-i)*c/p}}function v(t,e,n){return d(t,e,n)-f(t,e,n)}function y(t,e,n,i){var r,a=[t,e,n],o=d(t,e,n),s=f(t,e,n);r=0===f(s=s===t?0:s===e?1:2,o=o===t?0:o===e?1:2)?1===d(s,o)?2:1:0,a[o]>a[s]?(a[r]=(a[r]-a[s])*i/(a[o]-a[s]),a[o]=i):a[r]=a[o]=0,a[s]=0,l=a[0],u=a[1],h=a[2]}var b={multiply:function(){l=r*t/255,u=a*e/255,h=o*n/255},screen:function(){l=r+t-r*t/255,u=a+e-a*e/255,h=o+n-o*n/255},overlay:function(){l=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,u=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var i=t*r/255;l=i+r*(255-(255-r)*(255-t)/255-i)/255,u=(i=e*a/255)+a*(255-(255-a)*(255-e)/255-i)/255,h=(i=n*o/255)+o*(255-(255-o)*(255-n)/255-i)/255},"hard-light":function(){l=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,u=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){l=0===r?0:255===t?255:f(255,255*r/(255-t)),u=0===a?0:255===e?255:f(255,255*a/(255-e)),h=0===o?0:255===n?255:f(255,255*o/(255-n))},"color-burn":function(){l=255===r?255:0===t?0:d(0,255-255*(255-r)/t),u=255===a?255:0===e?0:d(0,255-255*(255-a)/e),h=255===o?255:0===n?0:d(0,255-255*(255-o)/n)},darken:function(){l=r<t?r:t,u=a<e?a:e,h=o<n?o:n},lighten:function(){l=r>t?r:t,u=a>e?a:e,h=o>n?o:n},difference:function(){(l=r-t)<0&&(l=-l),(u=a-e)<0&&(u=-u),(h=o-n)<0&&(h=-h)},exclusion:function(){l=r+t*(255-r-r)/255,u=a+e*(255-a-a)/255,h=o+n*(255-o-o)/255},hue:function(){y(t,e,n,v(r,a,o)),g(l,u,h,m(r,a,o))},saturation:function(){y(r,a,o,v(t,e,n)),g(l,u,h,m(r,a,o))},luminosity:function(){g(r,a,o,m(t,e,n))},color:function(){g(t,e,n,m(r,a,o))},add:function(){l=f(r+t,255),u=f(a+e,255),h=f(o+n,255)},subtract:function(){l=d(r-t,0),u=d(a-e,0),h=d(o-n,0)},average:function(){l=(r+t)/2,u=(a+e)/2,h=(o+n)/2},negation:function(){l=255-p(255-t-r),u=255-p(255-e-a),h=255-p(255-n-o)}},x=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),_=st.getContext(1,1);_&&(c.each(b,(function(t,e){var n="darken"===e,i=!1;_.save();try{_.fillStyle=n?"#300":"#a00",_.fillRect(0,0,1,1),_.globalCompositeOperation=e,_.globalCompositeOperation===e&&(_.fillStyle=n?"#a00":"#300",_.fillRect(0,0,1,1),i=_.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}_.restore(),x[e]=i})),st.release(_)),this.process=function(c,f,d,p,m){var g=f.canvas,v="normal"===c;if(v||x[c])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,v||(d.globalCompositeOperation=c),d.drawImage(g,m.x,m.y),d.restore();else{var y=b[c];if(!y)return;for(var _=d.getImageData(m.x,m.y,g.width,g.height),w=_.data,S=f.getImageData(0,0,g.width,g.height).data,E=0,M=w.length;E<M;E+=4){t=S[E],r=w[E],e=S[E+1],a=w[E+1],n=S[E+2],o=w[E+2],i=S[E+3],s=w[E+3],y();var T=i*p/255,C=1-T;w[E]=T*l+C*r,w[E+1]=T*u+C*a,w[E+2]=T*h+C*o,w[E+3]=i*p+C*s}d.putImageData(_,m.x,m.y)}}},ut=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function r(t,e,n){for(var r in e){var a=e[r],o=i[r];"number"==typeof a&&n&&(a=n.number(a)),o?t.setAttributeNS(o,r,a):t.setAttribute(r,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,i){return r(u.createElementNS(t,e),n,i)},get:function(t,e){var n=i[e],r=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===r?null:r},set:r}},ct=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof B||t instanceof P||t instanceof H)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var n=c.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&c.each(i,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});new function(){var t;function e(e,n,i){var r,a=new c,o=e.getTranslation();n&&(e.isInvertible()?(r=(e=e._shiftless())._inverseTransform(o),o=null):r=new v,a[i?"cx":"x"]=r.x,a[i?"cy":"y"]=r.y);if(!e.isIdentity()){var s=e.decompose();if(s){var l=[],u=s.rotation,h=s.scaling,f=s.skewing;o&&!o.isZero()&&l.push("translate("+t.point(o)+")"),u&&l.push("rotate("+t.number(u)+")"),m.isZero(h.x-1)&&m.isZero(h.y-1)||l.push("scale("+t.point(h)+")"),f.x&&l.push("skewX("+t.number(f.x)+")"),f.y&&l.push("skewY("+t.number(f.y)+")"),a.transform=l.join(" ")}else a.transform="matrix("+e.getValues().join(",")+")"}return a}function n(n,i){for(var r=e(n._matrix),a=n._children,o=ut.create("g",r,t),s=0,l=a.length;s<l;s++){var c=a[s],h=f(c,i);if(h)if(c.isClipMask()){var d=ut.create("clipPath");d.appendChild(h),u(c,d,"clip"),ut.set(o,{"clip-path":"url(#"+d.id+")"})}else o.appendChild(h)}return o}function i(n){var i=n._type,r=n._radius,a=e(n._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var o=n._size,s=o.width,l=o.height;a.x-=s/2,a.y-=l/2,a.width=s,a.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?a.r=r:(a.rx=r.width,a.ry=r.height)),ut.create(i,a,t)}var r,a={Group:n,Layer:n,Raster:function(n,i){var r=e(n._matrix,!0),a=n.getSize(),o=n.getImage();return r.x-=a.width/2,r.y-=a.height/2,r.width=a.width,r.height=a.height,r.href=0==i.embedImages&&o&&o.src||n.toDataURL(),ut.create("image",r,t)},Path:function(n,r){var a=r.matchShapes;if(a){var o=n.toShape(!1);if(o)return i(o)}var s,l=n._segments,u=l.length,c=e(n._matrix);if(a&&u>=2&&!n.hasHandles())if(u>2){s=n._closed?"polygon":"polyline";for(var h=[],f=0;f<u;f++)h.push(t.point(l[f]._point));c.points=h.join(" ")}else{s="line";var d=l[0]._point,p=l[1]._point;c.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else s="path",c.d=n.getPathData(null,r.precision);return ut.create(s,c,t)},Shape:i,CompoundPath:function(n,i){var r=e(n._matrix),a=n.getPathData(null,i.precision);return a&&(r.d=a),ut.create("path",r,t)},SymbolItem:function(n,i){var r=e(n._matrix,!0),a=n._definition,o=l(a,"symbol"),s=a._item,c=s.getStrokeBounds();return o||((o=ut.create("symbol",{viewBox:t.rectangle(c)})).appendChild(f(s,i)),u(a,o,"symbol")),r.href="#"+o.id,r.x+=c.x,r.y+=c.y,r.width=c.width,r.height=c.height,r.overflow="visible",ut.create("use",r,t)},PointText:function(n){var i=ut.create("text",e(n._matrix,!0),t);return i.textContent=n._content,i}};function s(e,n,i){var r={},a=!i&&e.getParent(),o=[];return null!=e._name&&(r.id=e._name),c.each(ct,(function(n){var i=n.get,s=n.type,h=e[i]();if(n.exportFilter?n.exportFilter(e,h):!a||!c.equals(a[i](),h)){if("color"===s&&null!=h){var f=h.getAlpha();f<1&&(r[n.attribute+"-opacity"]=f)}"style"===s?o.push(n.attribute+": "+h):r[n.attribute]=null==h?"none":"color"===s?h.gradient?function(e){var n=l(e,"color");if(!n){var i,r=e.getGradient(),a=r._radial,o=e.getOrigin(),s=e.getDestination();if(a){i={cx:o.x,cy:o.y,r:o.getDistance(s)};var c=e.getHighlight();c&&(i.fx=c.x,i.fy=c.y)}else i={x1:o.x,y1:o.y,x2:s.x,y2:s.y};i.gradientUnits="userSpaceOnUse",n=ut.create((a?"radial":"linear")+"Gradient",i,t);for(var h=r._stops,f=0,d=h.length;f<d;f++){var p=h[f],m=p._color,g=m.getAlpha(),v=p._offset;i={offset:null==v?f/(d-1):v},m&&(i["stop-color"]=m.toCSS(!0)),g<1&&(i["stop-opacity"]=g),n.appendChild(ut.create("stop",i,t))}u(e,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===s?h.join(","):"lookup"===s?n.toSVG[h]:h}})),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,e._visible||(r.visibility="hidden"),ut.set(n,r,t)}function l(t,e){return r||(r={ids:{},svgs:{}}),t&&r.svgs[e+"-"+(t._id||t.__id||(t.__id=g.get("svg")))]}function u(t,e,n){r||l();var i=r.ids[n]=(r.ids[n]||0)+1;e.id=n+"-"+i,r.svgs[n+"-"+(t._id||t.__id)]=e}function h(t,e){var n=t,i=null;if(r){for(var a in n="svg"===t.nodeName.toLowerCase()&&t,r.svgs)i||(n||(n=ut.create("svg")).appendChild(t),i=n.insertBefore(ut.create("defs"),n.firstChild)),i.appendChild(r.svgs[a]);r=null}return e.asString?(new o.XMLSerializer).serializeToString(n):n}function f(t,e,n){var i=a[t._class],r=i&&i(t,e);if(r){var o=e.onExport;o&&(r=o(t,r,e)||r);var l=JSON.stringify(t._data);l&&"{}"!==l&&"null"!==l&&r.setAttribute("data-paper-data",l)}return r&&s(t,r,n)}function d(e){return e||(e={}),t=new p(e.precision),e}T.inject({exportSVG:function(t){return h(f(this,t=d(t),!0),t)}}),M.inject({exportSVG:function(n){n=d(n);var i=this._children,r=this.getView(),a=c.pick(n.bounds,"view"),o=n.matrix||"view"===a&&r._matrix,s=o&&S.read([o]),l="view"===a?new _([0,0],r.getViewSize()):"content"===a?T._getBounds(i,s,{stroke:!0}).rect:_.read([a],0,{readNull:!0}),u={version:"1.1",xmlns:ut.svg,"xmlns:xlink":ut.xlink};l&&(u.width=l.width,u.height=l.height,(l.x||0===l.x||l.y||0===l.y)&&(u.viewBox=t.rectangle(l)));var p=ut.create("svg",u,t),m=p;s&&!s.isIdentity()&&(m=p.appendChild(ut.create("g",e(s),t)));for(var g=0,v=i.length;g<v;g++)m.appendChild(f(i[g],n,!0));return h(p,n)}})},new function(){var t,e={};function n(e,n,i,r,a,o){var s=ut.get(e,n)||o,l=null==s?r?null:i?"":0:i?s:parseFloat(s);return/%\s*$/.test(s)?l/100*(a?1:t[/x|^width/.test(n)?"width":"height"]):l}function i(t,e,i,r,a,o,s){return e=n(t,e||"x",!1,r,a,o),i=n(t,i||"y",!1,r,a,s),!r||null!=e&&null!=i?new v(e,i):null}function r(t,e,i,r,a){return e=n(t,e||"width",!1,r,a),i=n(t,i||"height",!1,r,a),!r||null!=e&&null!=i?new b(e,i):null}function a(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?E(t)||t:"lookup"===e?n[t]:t}function h(t,e,n,i){var r=t.childNodes,a="clippath"===e,o="defs"===e,s=new C,l=s._project,u=l._currentStyle,c=[];if(a||o||(s=w(s,t,i),l._currentStyle=s._style.clone()),i)for(var h=t.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)k(h[f],n,!1);for(f=0,d=r.length;f<d;f++){var p,m=r[f];1!==m.nodeType||/^defs$/i.test(m.nodeName)||!(p=k(m,n,!1))||p instanceof L||c.push(p)}return s.addChildren(c),a&&(s=w(s.reduce(),t,i)),l._currentStyle=u,(a||o)&&(s.remove(),s=null),s}function f(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new v(parseFloat(n[r]),parseFloat(n[r+1])));var o=new F(i);return"polygon"===e&&o.closePath(),o}function d(t,r){var a,o=(n(t,"href",!0)||"").substring(1),s="radialgradient"===r;if(o)(a=e[o].getGradient())._radial^s&&((a=a.clone())._radial=s);else{for(var l=t.childNodes,u=[],c=0,h=l.length;c<h;c++){var f=l[c];1===f.nodeType&&u.push(w(new Q,f))}a=new q(u,s)}var d,p,m,g="userSpaceOnUse"!==n(t,"gradientUnits",!0);return s?(p=(d=i(t,"cx","cy",!1,g,"50%","50%")).add(n(t,"r",!1,!1,g,"50%"),0),m=i(t,"fx","fy",!0,g)):(d=i(t,"x1","y1",!1,g,"0%","0%"),p=i(t,"x2","y2",!1,g,"100%","0%")),w(new W(a,d,p,m),t)._scaleToBounds=g,null}var p={"#document":function(t,e,n,i){for(var r=t.childNodes,a=0,o=r.length;a<o;a++){var s=r[a];if(1===s.nodeType)return k(s,n,i)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(t){return B.create(t.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(t){var e=new A(n(t,"href",!0));return e.on("load",(function(){var e=r(t);this.setSize(e);var n=i(t).add(e.divide(2));this._matrix.append((new S).translate(n))})),e},symbol:function(t,e,n,i){return new L(h(t,e,n,i),!0)},defs:h,use:function(t){var r=(n(t,"href",!0)||"").substring(1),a=e[r],o=i(t);return a?a instanceof L?a.place(o):a.clone().translate(o):null},circle:function(t){return new P.Circle(i(t,"cx","cy"),n(t,"r"))},ellipse:function(t){return new P.Ellipse({center:i(t,"cx","cy"),radius:r(t,"rx","ry")})},rect:function(t){return new P.Rectangle(new _(i(t),r(t)),r(t,"rx","ry"))},line:function(t){return new F.Line(i(t,"x1","y1"),i(t,"x2","y2"))},text:function(t){var e=new G(i(t).add(i(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:h};function m(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new S,o=0,s=r.length;o<s;o++){var l=r[o];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":a.append(new S(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":a.translate(h[0],h[1]||0);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}t.transform(a)}}function g(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var y=c.set(c.each(ct,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](a(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform((new S).translate(r.getPoint()).scale(r.getSize()))}}}}),{}),{id:function(t,n){e[n]=t,t.setName&&t.setName(n)},"clip-path":function(t,e){var n=E(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof C))return new C(n,t);t.insertChild(0,n)}},gradientTransform:m,transform:m,"fill-opacity":g,"stroke-opacity":g,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,o){var s,l=new _(a(e,"array")),u=r(i,null,null,!0);if(t instanceof C){var c=u?u.divide(l.getSize()):1,h=(new S).scale(c).translate(l.getPoint().negate());s=t}else t instanceof L&&(u&&l.setSize(u),s=t._item);if(s){if("visible"!==x(i,"overflow",o)){var f=new P.Rectangle(l);f.setClipMask(!0),s.addChild(f)}h&&s.transform(h)}}});function x(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r&&t.style){var a=c.camelize(e);(r=t.style[a])||n.node[a]===n.parent[a]||(r=n.node[a])}return r?"none"===r?null:r:s}function w(t,e,n){var i=e.parentNode,r={node:X.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&X.getStyles(i)||{}};return c.each(y,(function(n,i){var a=x(e,i,r);t=a!==s&&n(t,a,i,e,r)||t})),t}function E(t){var n=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=n&&n[1],r=i&&e[l?i.replace(l.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function k(n,i,a){var o,s,l,h=n.nodeName.toLowerCase(),f="#document"!==h,d=u.body;a&&f&&(t=ht.getView().getSize(),t=r(n,null,null,!0)||t,o=ut.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=n.parentNode,l=n.nextSibling,o.appendChild(n),d.appendChild(o));var m=ht.settings,g=m.applyMatrix,v=m.insertItems;m.applyMatrix=!1,m.insertItems=!1;var y=p[h],b=y&&y(n,h,i,a)||null;if(m.insertItems=v,m.applyMatrix=g,b){!f||b instanceof C||(b=w(b,n,a));var x=i.onImport,_=f&&n.getAttribute("data-paper-data");x&&(b=x(n,b,i)||b),i.expandShapes&&b instanceof P&&(b.remove(),b=b.toPath()),_&&(b._data=JSON.parse(_))}return o&&(d.removeChild(o),s&&(l?s.insertBefore(n,l):s.appendChild(n))),a&&(e={},b&&c.pick(i.applyMatrix,g)&&b.matrix.apply(!0,!0)),b}function O(t,e,n){if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var i=ht,r=null;function a(a){try{var u="object"==typeof a?a:(new o.DOMParser).parseFromString(a,"image/svg+xml");if(!u.nodeName)throw u=null,new Error("Unsupported SVG source: "+t);ht=i,r=k(u,e,!0),e&&!1===e.insert||n._insertItem(s,r);var c=e.onLoad;c&&c(r,a)}catch(t){l(t)}}function l(t,n){var i=e.onError;if(!i)throw new Error(t);i(t,n)}if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){a(c.result)},c.onerror=function(){l(c.error)},c.readAsText(t)}a(t)}else{var h=u.getElementById(t);h?a(h):ot.request({url:t,async:!0,onLoad:a,onError:l})}return r}T.inject({importSVG:function(t,e){return O(t,e,this)}}),M.inject({importSVG:function(t,e){return this.activate(),O(t,e,this)}})},c.exports.PaperScript=function(){var t,e,h,d=this,p=d.acorn;if(!p)try{p=n(300)}catch(t){}p||(p=t=e={},h=function(t){"use strict";var e,n,i,r;t.version="0.5.0",t.parse=function(t,r){return n=String(t),i=n.length,o(r),qt(),function(t){v=y=s,e.locations&&(b=new Wt),x=w=null,_=[],Jt();var n=t||ce(),i=!0;for(t||(n.body=[]);f!==A;){var r=we();n.body.push(r),i&&de(r)&&se(!0),i=!1}return fe(n,"Program")}(e.program)};var a=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function o(t){for(var n in e=t||{},a)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=a[n]);r=e.sourceFile||null}var s,l,u,c,h,f,d,p,m,g,v,y,b,x,_,w,S=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Ut.lastIndex=i;var r=Ut.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};function E(t,e){var i=S(n,t);e+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=i,r.raisedAt=s,r}t.tokenize=function(t,r){n=String(t),i=n.length,o(r),qt();var a={};function v(t){return y=u,Jt(t),a.start=l,a.end=u,a.startLoc=c,a.endLoc=h,a.type=f,a.value=d,a}return v.jumpTo=function(t,i){var r;if(s=t,e.locations)for(m=1,g=Ut.lastIndex=0;(r=Ut.exec(n))&&r.index<t;)++m,g=r.index+r[0].length;p=i,$t()},v};var M=[],T={type:"num"},C={type:"regexp"},k={type:"string"},P={type:"name"},A={type:"eof"},O={keyword:"break"},L={keyword:"case",beforeExpr:!0},I={keyword:"catch"},N={keyword:"continue"},R={keyword:"debugger"},D={keyword:"default"},z={keyword:"do",isLoop:!0},B={keyword:"else",beforeExpr:!0},F={keyword:"finally"},j={keyword:"for",isLoop:!0},V={keyword:"function"},U={keyword:"if"},H={keyword:"return",beforeExpr:!0},G={keyword:"switch"},W={keyword:"throw",beforeExpr:!0},q={keyword:"try"},Q={keyword:"var"},Y={keyword:"while",isLoop:!0},X={keyword:"with"},$={keyword:"new",beforeExpr:!0},Z={keyword:"this"},J={keyword:"null",atomValue:null},K={keyword:"true",atomValue:!0},tt={keyword:"false",atomValue:!1},et={keyword:"in",binop:7,beforeExpr:!0},nt={break:O,case:L,catch:I,continue:N,debugger:R,default:D,do:z,else:B,finally:F,for:j,function:V,if:U,return:H,switch:G,throw:W,try:q,var:Q,while:Y,with:X,null:J,true:K,false:tt,new:$,in:et,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Z,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},it={type:"[",beforeExpr:!0},rt={type:"]"},at={type:"{",beforeExpr:!0},ot={type:"}"},st={type:"(",beforeExpr:!0},lt={type:")"},ut={type:",",beforeExpr:!0},ct={type:";",beforeExpr:!0},ht={type:":",beforeExpr:!0},ft={type:"."},dt={type:"?",beforeExpr:!0},pt={binop:10,beforeExpr:!0},mt={isAssign:!0,beforeExpr:!0},gt={isAssign:!0,beforeExpr:!0},vt={postfix:!0,prefix:!0,isUpdate:!0},yt={prefix:!0,beforeExpr:!0},bt={binop:1,beforeExpr:!0},xt={binop:2,beforeExpr:!0},_t={binop:3,beforeExpr:!0},wt={binop:4,beforeExpr:!0},St={binop:5,beforeExpr:!0},Et={binop:6,beforeExpr:!0},Mt={binop:7,beforeExpr:!0},Tt={binop:8,beforeExpr:!0},Ct={binop:9,prefix:!0,beforeExpr:!0},kt={binop:10,beforeExpr:!0};for(var Pt in t.tokTypes={bracketL:it,bracketR:rt,braceL:at,braceR:ot,parenL:st,parenR:lt,comma:ut,semi:ct,colon:ht,dot:ft,question:dt,slash:pt,eq:mt,name:P,eof:A,num:T,regexp:C,string:k},nt)t.tokTypes["_"+Pt]=nt[Pt];function At(t){t=t.split(" ");var e="",n=[];t:for(var i=0;i<t.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==t[i].length){n[r].push(t[i]);continue t}n.push([t[i]])}function a(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var n=0;n<t.length;++n)e+="case "+JSON.stringify(t[n])+":";e+="return true}return false;"}if(n.length>3){for(n.sort((function(t,e){return e.length-t.length})),e+="switch(str.length){",i=0;i<n.length;++i){var o=n[i];e+="case "+o[0].length+":",a(o)}e+="}"}else a(t);return new Function("str",e)}var Ot,Lt=At("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),It=At("class enum extends super const export import"),Nt=At("implements interface let package private protected public static yield"),Rt=At("eval arguments"),Dt=At("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),zt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Bt="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Ft=new RegExp("["+Bt+"]"),jt=new RegExp("["+Bt+"------------------------------------------------------------------------------------------------------------------------------------------]"),Vt=/[\n\r\u2028\u2029]/,Ut=/\r\n|[\n\r\u2028\u2029]/g,Ht=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Ft.test(String.fromCharCode(t)))},Gt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&jt.test(String.fromCharCode(t))))};function Wt(){this.line=m,this.column=s-g}function qt(){m=1,s=g=0,p=!0,$t()}function Qt(t,n){u=s,e.locations&&(h=new Wt),f=t,$t(),d=n,p=t.beforeExpr}function Yt(){var t,i=e.onComment&&e.locations&&new Wt,r=s,a=n.indexOf("*/",s+=2);if(-1===a&&E(s-2,"Unterminated comment"),s=a+2,e.locations)for(Ut.lastIndex=r;(t=Ut.exec(n))&&t.index<s;)++m,g=t.index+t[0].length;e.onComment&&e.onComment(!0,n.slice(r+2,a),r,s,i,e.locations&&new Wt)}function Xt(){for(var t=s,r=e.onComment&&e.locations&&new Wt,a=n.charCodeAt(s+=2);s<i&&10!==a&&13!==a&&8232!==a&&8233!==a;)++s,a=n.charCodeAt(s);e.onComment&&e.onComment(!1,n.slice(t+2,s),t,s,r,e.locations&&new Wt)}function $t(){for(;s<i;){var t=n.charCodeAt(s);if(32===t)++s;else if(13===t)++s,10===(r=n.charCodeAt(s))&&++s,e.locations&&(++m,g=s);else if(10===t||8232===t||8233===t)++s,e.locations&&(++m,g=s);else if(t>8&&t<14)++s;else if(47===t){var r;if(42===(r=n.charCodeAt(s+1)))Yt();else{if(47!==r)break;Xt()}}else if(160===t)++s;else{if(!(t>=5760&&zt.test(String.fromCharCode(t))))break;++s}}}function Zt(t){switch(t){case 46:return function(){var t=n.charCodeAt(s+1);return t>=48&&t<=57?ne(!0):(++s,Qt(ft))}();case 40:return++s,Qt(st);case 41:return++s,Qt(lt);case 59:return++s,Qt(ct);case 44:return++s,Qt(ut);case 91:return++s,Qt(it);case 93:return++s,Qt(rt);case 123:return++s,Qt(at);case 125:return++s,Qt(ot);case 58:return++s,Qt(ht);case 63:return++s,Qt(dt);case 48:var r=n.charCodeAt(s+1);if(120===r||88===r)return function(){s+=2;var t=ee(16);return null==t&&E(l+2,"Expected hexadecimal number"),Ht(n.charCodeAt(s))&&E(s,"Identifier directly after number"),Qt(T,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ne(!1);case 34:case 39:return function(t){s++;for(var r="";;){s>=i&&E(l,"Unterminated string constant");var a=n.charCodeAt(s);if(a===t)return++s,Qt(k,r);if(92===a){a=n.charCodeAt(++s);var o=/^[0-7]+/.exec(n.slice(s,s+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++s,o)w&&E(s-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(o,8)),s+=o.length-1;else switch(a){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(ie(2));break;case 117:r+=String.fromCharCode(ie(4));break;case 85:r+=String.fromCharCode(ie(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(s)&&++s;case 10:e.locations&&(g=s,++m);break;default:r+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||E(l,"Unterminated string constant"),r+=String.fromCharCode(a),++s}}(t);case 47:return function(){var t=n.charCodeAt(s+1);return p?(++s,te()):61===t?Kt(gt,2):Kt(pt,1)}();case 37:case 42:return 61===n.charCodeAt(s+1)?Kt(gt,2):Kt(kt,1);case 124:case 38:return function(t){var e=n.charCodeAt(s+1);return e===t?Kt(124===t?bt:xt,2):61===e?Kt(gt,2):Kt(124===t?_t:St,1)}(t);case 94:return 61===n.charCodeAt(s+1)?Kt(gt,2):Kt(wt,1);case 43:case 45:return function(t){var e=n.charCodeAt(s+1);return e===t?45==e&&62==n.charCodeAt(s+2)&&Vt.test(n.slice(y,s))?(s+=3,Xt(),$t(),Jt()):Kt(vt,2):61===e?Kt(gt,2):Kt(Ct,1)}(t);case 60:case 62:return function(t){var e=n.charCodeAt(s+1),i=1;return e===t?(i=62===t&&62===n.charCodeAt(s+2)?3:2,61===n.charCodeAt(s+i)?Kt(gt,i+1):Kt(Tt,i)):33==e&&60==t&&45==n.charCodeAt(s+2)&&45==n.charCodeAt(s+3)?(s+=4,Xt(),$t(),Jt()):(61===e&&(i=61===n.charCodeAt(s+2)?3:2),Kt(Mt,i))}(t);case 61:case 33:return function(t){return 61===n.charCodeAt(s+1)?Kt(Et,61===n.charCodeAt(s+2)?3:2):Kt(61===t?mt:yt,1)}(t);case 126:return Kt(yt,1)}return!1}function Jt(t){if(t?s=l+1:l=s,e.locations&&(c=new Wt),t)return te();if(s>=i)return Qt(A);var r=n.charCodeAt(s);if(Ht(r)||92===r)return ae();var a=Zt(r);if(!1===a){var o=String.fromCharCode(r);if("\\"===o||Ft.test(o))return ae();E(s,"Unexpected character '"+o+"'")}return a}function Kt(t,e){var i=n.slice(s,s+e);s+=e,Qt(t,i)}function te(){for(var t,e,r=s;;){s>=i&&E(r,"Unterminated regular expression");var a=n.charAt(s);if(Vt.test(a)&&E(r,"Unterminated regular expression"),t)t=!1;else{if("["===a)e=!0;else if("]"===a&&e)e=!1;else if("/"===a&&!e)break;t="\\"===a}++s}var o=n.slice(r,s);++s;var l=re();l&&!/^[gmsiy]*$/.test(l)&&E(r,"Invalid regexp flag");try{var u=new RegExp(o,l)}catch(t){t instanceof SyntaxError&&E(r,t.message),E(t)}return Qt(C,u)}function ee(t,e){for(var i=s,r=0,a=0,o=null==e?1/0:e;a<o;++a){var l,u=n.charCodeAt(s);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;++s,r=r*t+l}return s===i||null!=e&&s-i!==e?null:r}function ne(t){var e=s,i=!1,r=48===n.charCodeAt(s);t||null!==ee(10)||E(e,"Invalid number"),46===n.charCodeAt(s)&&(++s,ee(10),i=!0);var a=n.charCodeAt(s);69!==a&&101!==a||(43!==(a=n.charCodeAt(++s))&&45!==a||++s,null===ee(10)&&E(e,"Invalid number"),i=!0),Ht(n.charCodeAt(s))&&E(s,"Identifier directly after number");var o,l=n.slice(e,s);return i?o=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||w?E(e,"Invalid number"):o=parseInt(l,8):o=parseInt(l,10),Qt(T,o)}function ie(t){var e=ee(16,t);return null===e&&E(l,"Bad character escape sequence"),e}function re(){Ot=!1;for(var t,e=!0,i=s;;){var r=n.charCodeAt(s);if(Gt(r))Ot&&(t+=n.charAt(s)),++s;else{if(92!==r)break;Ot||(t=n.slice(i,s)),Ot=!0,117!=n.charCodeAt(++s)&&E(s,"Expecting Unicode escape sequence \\uXXXX"),++s;var a=ie(4),o=String.fromCharCode(a);o||E(s-1,"Invalid Unicode escape"),(e?Ht(a):Gt(a))||E(s-4,"Invalid Unicode escape"),t+=o}e=!1}return Ot?t:n.slice(i,s)}function ae(){var t=re(),e=P;return!Ot&&Dt(t)&&(e=nt[t]),Qt(e,t)}function oe(){v=l,y=u,b=h,Jt()}function se(t){if(w=t,s=l,e.locations)for(;s<g;)g=n.lastIndexOf("\n",g-2)+1,--m;$t(),Jt()}function le(){this.type=null,this.start=l,this.end=null}function ue(){this.start=c,this.end=null,null!==r&&(this.source=r)}function ce(){var t=new le;return e.locations&&(t.loc=new ue),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[l,0]),t}function he(t){var n=new le;return n.start=t.start,e.locations&&(n.loc=new ue,n.loc.start=t.loc.start),e.ranges&&(n.range=[t.range[0],0]),n}function fe(t,n){return t.type=n,t.end=y,e.locations&&(t.loc.end=b),e.ranges&&(t.range[1]=y),t}function de(t){return e.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function pe(t){if(f===t)return oe(),!0}function me(){return!e.strictSemicolons&&(f===A||f===ot||Vt.test(n.slice(y,l)))}function ge(){pe(ct)||me()||ye()}function ve(t){f===t?oe():ye()}function ye(){E(l,"Unexpected token")}function be(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&E(t.start,"Assigning to rvalue"),w&&"Identifier"===t.type&&Rt(t.name)&&E(t.start,"Assigning to "+t.name+" in strict mode")}var xe={kind:"loop"},_e={kind:"switch"};function we(){(f===pt||f===gt&&"/="==d)&&Jt(!0);var t=f,i=ce();switch(t){case O:case N:oe();var r=t===O;pe(ct)||me()?i.label=null:f!==P?ye():(i.label=De(),ge());for(var a=0;a<_.length;++a){var o=_[a];if(null==i.label||o.name===i.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(i.label&&r)break}}return a===_.length&&E(i.start,"Unsyntactic "+t.keyword),fe(i,r?"BreakStatement":"ContinueStatement");case R:return oe(),ge(),fe(i,"DebuggerStatement");case z:return oe(),_.push(xe),i.body=we(),_.pop(),ve(Y),i.test=Se(),ge(),fe(i,"DoWhileStatement");case j:if(oe(),_.push(xe),ve(st),f===ct)return Me(i,null);if(f===Q){var s=ce();return oe(),Ce(s,!0),fe(s,"VariableDeclaration"),1===s.declarations.length&&pe(et)?Te(i,s):Me(i,s)}return s=ke(!1,!0),pe(et)?(be(s),Te(i,s)):Me(i,s);case V:return oe(),Ne(i,!0);case U:return oe(),i.test=Se(),i.consequent=we(),i.alternate=pe(B)?we():null,fe(i,"IfStatement");case H:return x||e.allowReturnOutsideFunction||E(l,"'return' outside of function"),oe(),pe(ct)||me()?i.argument=null:(i.argument=ke(),ge()),fe(i,"ReturnStatement");case G:oe(),i.discriminant=Se(),i.cases=[],ve(at),_.push(_e);for(var u,c;f!=ot;)if(f===L||f===D){var h=f===L;u&&fe(u,"SwitchCase"),i.cases.push(u=ce()),u.consequent=[],oe(),h?u.test=ke():(c&&E(v,"Multiple default clauses"),c=!0,u.test=null),ve(ht)}else u||ye(),u.consequent.push(we());return u&&fe(u,"SwitchCase"),oe(),_.pop(),fe(i,"SwitchStatement");case W:return oe(),Vt.test(n.slice(y,l))&&E(y,"Illegal newline after throw"),i.argument=ke(),ge(),fe(i,"ThrowStatement");case q:if(oe(),i.block=Ee(),i.handler=null,f===I){var p=ce();oe(),ve(st),p.param=De(),w&&Rt(p.param.name)&&E(p.param.start,"Binding "+p.param.name+" in strict mode"),ve(lt),p.guard=null,p.body=Ee(),i.handler=fe(p,"CatchClause")}return i.guardedHandlers=M,i.finalizer=pe(F)?Ee():null,i.handler||i.finalizer||E(i.start,"Missing catch or finally clause"),fe(i,"TryStatement");case Q:return oe(),Ce(i),ge(),fe(i,"VariableDeclaration");case Y:return oe(),i.test=Se(),_.push(xe),i.body=we(),_.pop(),fe(i,"WhileStatement");case X:return w&&E(l,"'with' in strict mode"),oe(),i.object=Se(),i.body=we(),fe(i,"WithStatement");case at:return Ee();case ct:return oe(),fe(i,"EmptyStatement");default:var m=d,g=ke();if(t===P&&"Identifier"===g.type&&pe(ht)){for(a=0;a<_.length;++a)_[a].name===m&&E(g.start,"Label '"+m+"' is already declared");var b=f.isLoop?"loop":f===G?"switch":null;return _.push({name:m,kind:b}),i.body=we(),_.pop(),i.label=g,fe(i,"LabeledStatement")}return i.expression=g,ge(),fe(i,"ExpressionStatement")}}function Se(){ve(st);var t=ke();return ve(lt),t}function Ee(t){var e,n=ce(),i=!0,r=!1;for(n.body=[],ve(at);!pe(ot);){var a=we();n.body.push(a),i&&t&&de(a)&&(e=r,se(r=!0)),i=!1}return r&&!e&&se(!1),fe(n,"BlockStatement")}function Me(t,e){return t.init=e,ve(ct),t.test=f===ct?null:ke(),ve(ct),t.update=f===lt?null:ke(),ve(lt),t.body=we(),_.pop(),fe(t,"ForStatement")}function Te(t,e){return t.left=e,t.right=ke(),ve(lt),t.body=we(),_.pop(),fe(t,"ForInStatement")}function Ce(t,e){for(t.declarations=[],t.kind="var";;){var n=ce();if(n.id=De(),w&&Rt(n.id.name)&&E(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=pe(mt)?ke(!0,e):null,t.declarations.push(fe(n,"VariableDeclarator")),!pe(ut))break}return t}function ke(t,e){var n=Pe(e);if(!t&&f===ut){var i=he(n);for(i.expressions=[n];pe(ut);)i.expressions.push(Pe(e));return fe(i,"SequenceExpression")}return n}function Pe(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=f.binop;if(null!=r&&(!i||f!==et)&&r>n){var a=he(e);a.left=e,a.operator=d;var o=f;oe(),a.right=t(Ae(),r,i);var s=fe(a,o===bt||o===xt?"LogicalExpression":"BinaryExpression");return t(s,n,i)}return e}(Ae(),-1,t)}(t);if(pe(dt)){var n=he(e);return n.test=e,n.consequent=ke(!0),ve(ht),n.alternate=ke(!0,t),fe(n,"ConditionalExpression")}return e}(t);if(f.isAssign){var n=he(e);return n.operator=d,n.left=e,oe(),n.right=Pe(t),be(e),fe(n,"AssignmentExpression")}return e}function Ae(){if(f.prefix){var t=ce(),e=f.isUpdate;return t.operator=d,t.prefix=!0,p=!0,oe(),t.argument=Ae(),e?be(t.argument):w&&"delete"===t.operator&&"Identifier"===t.argument.type&&E(t.start,"Deleting local variable in strict mode"),fe(t,e?"UpdateExpression":"UnaryExpression")}for(var n=Oe(Le());f.postfix&&!me();)(t=he(n)).operator=d,t.prefix=!1,t.argument=n,be(n),oe(),n=fe(t,"UpdateExpression");return n}function Oe(t,e){var n;return pe(ft)?((n=he(t)).object=t,n.property=De(!0),n.computed=!1,Oe(fe(n,"MemberExpression"),e)):pe(it)?((n=he(t)).object=t,n.property=ke(),n.computed=!0,ve(rt),Oe(fe(n,"MemberExpression"),e)):!e&&pe(st)?((n=he(t)).callee=t,n.arguments=Re(lt,!1),Oe(fe(n,"CallExpression"),e)):t}function Le(){switch(f){case Z:var t=ce();return oe(),fe(t,"ThisExpression");case P:return De();case T:case k:case C:return(t=ce()).value=d,t.raw=n.slice(l,u),oe(),fe(t,"Literal");case J:case K:case tt:return(t=ce()).value=f.atomValue,t.raw=f.keyword,oe(),fe(t,"Literal");case st:var i=c,r=l;oe();var a=ke();return a.start=r,a.end=u,e.locations&&(a.loc.start=i,a.loc.end=h),e.ranges&&(a.range=[r,u]),ve(lt),a;case it:return t=ce(),oe(),t.elements=Re(rt,!0,!0),fe(t,"ArrayExpression");case at:return function(){var t=ce(),n=!0,i=!1;for(t.properties=[],oe();!pe(ot);){if(n)n=!1;else if(ve(ut),e.allowTrailingCommas&&pe(ot))break;var r,a={key:Ie()},o=!1;if(pe(ht)?(a.value=ke(!0),r=a.kind="init"):e.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(o=i=!0,r=a.kind=a.key.name,a.key=Ie(),f!==st&&ye(),a.value=Ne(ce(),!1)):ye(),"Identifier"===a.key.type&&(w||i))for(var s=0;s<t.properties.length;++s){var l=t.properties[s];if(l.key.name===a.key.name){var u=r==l.kind||o&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!w&&"init"===r&&"init"===l.kind&&(u=!1),u&&E(a.key.start,"Redefinition of property")}}t.properties.push(a)}return fe(t,"ObjectExpression")}();case V:return t=ce(),oe(),Ne(t,!1);case $:return function(){var t=ce();return oe(),t.callee=Oe(Le(),!0),pe(st)?t.arguments=Re(lt,!1):t.arguments=M,fe(t,"NewExpression")}();default:ye()}}function Ie(){return f===T||f===k?Le():De(!0)}function Ne(t,e){f===P?t.id=De():e?ye():t.id=null,t.params=[];var n=!0;for(ve(st);!pe(lt);)n?n=!1:ve(ut),t.params.push(De());var i=x,r=_;if(x=!0,_=[],t.body=Ee(!0),x=i,_=r,w||t.body.body.length&&de(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=a<0?t.id:t.params[a];if((Nt(o.name)||Rt(o.name))&&E(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var s=0;s<a;++s)o.name===t.params[s].name&&E(o.start,"Argument name clash in strict mode")}return fe(t,e?"FunctionDeclaration":"FunctionExpression")}function Re(t,n,i){for(var r=[],a=!0;!pe(t);){if(a)a=!1;else if(ve(ut),n&&e.allowTrailingCommas&&pe(t))break;i&&f===ut?r.push(null):r.push(ke(!0))}return r}function De(t){var i=ce();return t&&"everywhere"==e.forbidReserved&&(t=!1),f===P?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?Lt:It)(d)||w&&Nt(d))&&-1==n.slice(l,u).indexOf("\\")&&E(l,"The keyword '"+d+"' is reserved"),i.name=d):t&&f.keyword?i.name=f.keyword:ye(),p=!1,oe(),fe(i,"Identifier")}},"object"==typeof t&&"object"==typeof e?h(t):(i=[t],(a="function"==typeof(r=h)?r.apply(t,i):r)===s||(e.exports=a)),p.version||(p=null));function m(t,e){return(d.acorn||p).parse(t,e)}var g={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},y={"-":"__negate","+":"__self"},x=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(t){this["__"+t]="#"+t}),{__self:function(){return this}});function _(t,e,n){var i=g[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function w(t,e){var n=y[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function S(t,e){if(!t)return"";var n=[];function i(t){for(var e=0,i=n.length;e<i;e++){var r=n[e];if(r[0]>=t)break;t+=r[1]}return t}function r(e){return t.substring(i(e.range[0]),i(e.range[1]))}function a(e,r){for(var a=i(e.range[0]),o=i(e.range[1]),s=0,l=n.length-1;l>=0;l--)if(a>n[l][0]){s=l+1;break}n.splice(s,0,[a,r.length-o+a]),t=t.substring(0,a)+r+t.substring(o)}var s,c=(e=e||{}).url||"",h=ht.agent,f=h.versionNumber,d=!1,p=e.sourceMaps,v=e.source||t,b=/\r\n|\n|\r/gm,x=e.offset||0;if(p&&(h.chrome&&f>=30||h.webkit&&f>=537.76||h.firefox&&f>=23||h.node)){if(h.node)x-=2;else if(l&&c&&!l.location.href.indexOf(c)){var _=u.getElementsByTagName("html")[0].innerHTML;x=_.substr(0,_.indexOf(t)+1).match(b).length+1}var w=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((d=x>0&&!(h.chrome&&f>=36||h.safari&&f>=600||h.firefox&&f>=40||h.node))?0:x)+"A"];w.length=(t.match(b)||[]).length+1+(d?x:0),s={version:3,file:c,names:[],mappings:w.join(";AACA"),sourceRoot:"",sources:[c],sourcesContent:[v]}}return function e(n,o){if(n){for(var s in n)if("range"!==s&&"loc"!==s){var l=n[s];if(Array.isArray(l))for(var u=0,c=l.length;u<c;u++)e(l[u],n);else l&&"object"==typeof l&&e(l,n)}switch(n.type){case"UnaryExpression":if(n.operator in y&&"Literal"!==n.argument.type){var h=r(n.argument);a(n,'$__("'+n.operator+'", '+h+")")}break;case"BinaryExpression":if(n.operator in g&&"Literal"!==n.left.type){var f=r(n.left),d=r(n.right),p=function(e,n){return t.substring(i(e.range[1]),i(n.range[0]))}(n.left,n.right),m=n.operator;a(n,"__$__("+f+","+p.replace(new RegExp("\\"+m),'"'+m+'"')+", "+d+")")}break;case"UpdateExpression":case"AssignmentExpression":var v=o&&o.type;if(!("ForStatement"===v||"BinaryExpression"===v&&/^[=!<>]/.test(o.operator)||"MemberExpression"===v&&o.computed))if("UpdateExpression"===n.type){var b=(h=r(n.argument))+" = "+(x="__$__("+h+', "'+n.operator[0]+'", 1)');n.prefix?b="("+b+")":"AssignmentExpression"!==v&&"VariableDeclarator"!==v&&"BinaryExpression"!==v||(r(o.left||o.id)===h&&(b=x),b=h+"; "+b),a(n,b)}else if(/^.=$/.test(n.operator)&&"Literal"!==n.left.type){f=r(n.left),d=r(n.right);var x=f+" = __$__("+f+', "'+n.operator[0]+'", '+d+")";a(n,/^\(.*\)$/.test(r(n))?"("+x+")":x)}break;case"ExportDefaultDeclaration":a({range:[n.start,n.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var _=n.declaration,w=n.specifiers;if(_){var S=_.declarations;S&&(S.forEach((function(t){a(t,"module.exports."+r(t))})),a({range:[n.start,_.start+_.kind.length]},""))}else if(w){var E=w.map((function(t){var e=r(t);return"module.exports."+e+" = "+e+"; "})).join("");E&&a(n,E)}}}}(m(t,{ranges:!0,preserveParens:!0,sourceType:"module"})),s&&(d&&(t=new Array(x+1).join("\n")+t),/^(inline|both)$/.test(p)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+o.btoa(unescape(encodeURIComponent(JSON.stringify(s))))),t+="\n//# sourceURL="+(c||"paperscript")),{url:c,source:v,code:t,map:s}}function E(t,e,n){ht=e;var i,r=e.getView(),a=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new rt:null,o=a?a._events:[],s=["onFrame","onResize"].concat(o),l=[],h=[],f="object"==typeof t?t:S(t,n);function d(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(l.push(i),h.push(e[i]))}t=f.code,d({__$__:_,$__:w,paper:e,tool:a},!0),d(e),t="var module = { exports: {} }; "+t,(y=c.each(s,(function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(l.push(e),this.push("module.exports."+e+" = "+e+";"))}),[]).join("\n"))&&(t+="\n"+y),t+="\nreturn module.exports;";var p=ht.agent;if(u&&(p.chrome||p.firefox&&p.versionNumber<40)){var m=u.createElement("script"),g=u.head||u.getElementsByTagName("head")[0];p.firefox&&(t="\n"+t),m.appendChild(u.createTextNode("document.__paperscript__ = function("+l+") {"+t+"\n}")),g.appendChild(m),i=u.__paperscript__,delete u.__paperscript__,g.removeChild(m)}else i=Function(l,t);var y,b=(y=i&&i.apply(e,h))||{};return c.each(o,(function(t){var e=b[t];e&&(a[t]=e)})),r&&(b.onResize&&r.setOnResize(b.onResize),r.emit("resize",{size:r.size,delta:new v}),b.onFrame&&r.setOnFrame(b.onFrame),r.requestUpdate()),y}function M(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==f.getAttribute(t,"ignore")){var e=f.getAttribute(t,"canvas"),n=u.getElementById(e),i=t.src||t.getAttribute("data-src"),r=f.hasAttribute(t,"async");if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var a=f.get(n.getAttribute("data-paper-scope"))||(new f).setup(n);return n.setAttribute("data-paper-scope",a._id),i?ot.request({url:i,async:r,mimeType:"text/plain",onLoad:function(t){E(t,a,i)}}):E(t.innerHTML,a,t.baseURI),t.setAttribute("data-paper-ignore","true"),a}}function T(){c.each(u&&u.getElementsByTagName("script"),M)}return v.inject(x),b.inject(x),W.inject(x),l&&("complete"===u.readyState?setTimeout(T):$.add(l,{load:T})),{compile:S,execute:E,load:function(t){return t?M(t):T()},parse:m,calculateBinary:_,calculateUnary:w}}.call(this);var ht=new(f.inject(c.exports,{Base:c,Numerical:m,Key:et,DomEvent:$,DomElement:X,document:u,window:l,Symbol:L,PlacedSymbol:O}));return ht.agent.node&&n(301)(ht),(a="function"==typeof(r=ht)?r.call(e,n,e,t):r)===s||(t.exports=a),ht}).call(this,"object"==typeof self?self:null)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGaussData=function(t){var e=[];if(t>0)for(var n=-4;n<=4;n++){var i=Math.exp(-n*n/(2*t*t))/Math.sqrt(2*Math.PI*t*t);e.push({x:n,y:i})}else e.push({x:-1,y:1}),e.push({x:1,y:1});return e},e.getGaussValue=function(t,e){return Math.exp(-t*t/(2*e*e))/Math.sqrt(2*Math.PI*e*e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=h(n(0)),a=(c(n(9)),c(n(23))),o=c(n(8)),s=h(n(3)),l=h(n(5)),u=h(n(305));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={data:s.default.getAllData(),source:-1},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;s.default.on("upload",(function(){t.setState({data:s.default.getAllData()})})),l.default.on("updateSource",(function(){l.default.getSource();t.setState({source:l.default.getSource()})})),l.default.on("convertResultIntoQuery",(function(e,n,i){"QBE"===l.default.getMode()&&t.setState({source:e})}))}},{key:"render",value:function(){var t=this,e=500;if(null!==document.getElementById("QBESource")){var n=$("#QBESource").outerWidth(!0)-2*Number($("#QBESource").css("padding-left").replace("px",""));n>0&&(e=n)}var i=this.state.data.map((function(n){return r.default.createElement("div",{key:n.id,id:"QBE_SP_"+n.id,style:{display:n.id===Number(t.state.source)?"block":"none"}},r.default.createElement(u.default,{key:n.id,id:n.id,divID:"QBE_SP_"+n.id,xItem:"z",yItem:"V",width:e,height:Math.ceil(.8*e)}))}));return r.default.createElement("div",{id:"QBESource",className:"controllersElem featureColumn",style:{float:"left",width:"30%",position:"relative"}},r.default.createElement("div",{id:"QBESourceMain",style:{display:"block"}},r.default.createElement("div",{id:"QBESourceTT",className:"featureElem"},r.default.createElement("div",{id:"selectorForQBETT"},r.default.createElement("h5",null,"Selection options for TimeTubes"),r.default.createElement("form",{className:"form-check form-check-inline selector featureRow",id:"QBESelectorTT"},r.default.createElement("img",{id:"QBESelectTT",className:"selectorIcon selected",name:"QBESelectorTT",value:"Select",src:"img/icons/pen.png",alt:"pen",width:"30",height:"30",title:"select a part of the tube",onClick:this.selectSelect.bind(this),readOnly:!0}),r.default.createElement("img",{id:"QBEDeselectTT",className:"selectorIcon",name:"QBESelectorTT",value:"Deselect",src:"img/icons/eraser.png",alt:"eraser",width:"30",height:"30",title:"deselect a part of the tube",onClick:this.selectDeselect.bind(this),readOnly:!0})))),r.default.createElement("div",{id:"QBESourceSP",className:"featureElem"},r.default.createElement("div",{id:"selectorForQBESP"},r.default.createElement("h5",null,"Selection options for scatterplots"),r.default.createElement("form",{className:"form-check form-check-inline selector featureRow",id:"QBESelectorSP"},r.default.createElement("img",{id:"QBESelectRegionSP",className:"selectorIcon selected",name:"QBESelectorSP",value:"SelectRegion",src:"img/icons/selectRegion.png",alt:"select region",width:"30",height:"30",title:"select a part of the scatterplot",onClick:this.selectSelectRegion.bind(this),readOnly:!0}),r.default.createElement("img",{id:"QBEMoveSP",className:"selectorIcon",name:"QBESelectorSP",value:"Move",src:"img/icons/move.png",alt:"move",width:"30",height:"30",title:"move the scatteplot",onClick:this.selectMove.bind(this),readOnly:!0}),r.default.createElement("img",{id:"QBEResetSP",className:"selectorIcon",name:"QBESelectorSP",value:"Reset",src:"img/icons/reset.png",alt:"reset",width:"30",height:"30",title:"reset changes on the scatterplot",onClick:this.selectReset.bind(this),readOnly:!0}))),i)),r.default.createElement("button",{id:"collapseSourcePanel",className:"btn btn-primary btn-sm",style:{width:"4rem",height:"1.5rem",position:"absolute",top:"0px",right:"-4rem"},onClick:a.toggleSourcePanel},"Close"))}},{key:"selectSelect",value:function(){$("img[name=QBESelectorTT]").each((function(){$(this).removeClass("selected")})),$("#QBESelectTT").addClass("selected"),o.switchSelector(!0)}},{key:"selectDeselect",value:function(){$("img[name=QBESelectorTT]").each((function(){$(this).removeClass("selected")})),$("#QBEDeselectTT").addClass("selected"),o.switchSelector(!1)}},{key:"selectSelectRegion",value:function(){$("img[name=QBESelectorSP]").each((function(){$(this).removeClass("selected")})),$("#QBESelectRegionSP").addClass("selected"),o.switchQBESelectorSP("selectRegion")}},{key:"selectMove",value:function(){$("img[name=QBESelectorSP]").each((function(){$(this).removeClass("selected")})),$("#QBEMoveSP").addClass("selected"),o.switchQBESelectorSP("move")}},{key:"selectReset",value:function(){o.switchQBESelectorSP("reset")}}]),e}(r.default.Component);e.default=f},function(t,e,n){"use strict";var i=o(n(0)),r=o(n(43)),a=o(n(112));function o(t){return t&&t.__esModule?t:{default:t}}var s=document.getElementById("app");r.default.render(i.default.createElement(a.default,null),s),void 0===localStorage.privateComment&&localStorage.setItem("privateComment",JSON.stringify([]))},function(t,e,n){"use strict";
/** @license React v16.9.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(65),r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116;r&&Symbol.for("react.fundamental"),r&&Symbol.for("react.responder");var v="function"==typeof Symbol&&Symbol.iterator;function y(t){for(var e=t.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return t.message="Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",t}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function _(t,e,n){this.props=t,this.context=e,this.refs=x,this.updater=n||b}function w(){}function S(t,e,n){this.props=t,this.context=e,this.refs=x,this.updater=n||b}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw y(Error(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=_.prototype;var E=S.prototype=new w;E.constructor=S,i(E,_.prototype),E.isPureReactComponent=!0;var M={current:null},T={suspense:null},C={current:null},k=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var i=void 0,r={},o=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)k.call(e,i)&&!P.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:a,type:t,key:o,ref:s,props:r,_owner:C.current}}function O(t){return"object"==typeof t&&null!==t&&t.$$typeof===a}var L=/\/+/g,I=[];function N(t,e,n,i){if(I.length){var r=I.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=i,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>I.length&&I.push(t)}function D(t,e,n){return null==t?0:function t(e,n,i,r){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case o:l=!0}}if(l)return i(r,e,""===n?"."+z(e,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=n+z(s=e[u],u);l+=t(s,c,i,r)}else if(null===e||"object"!=typeof e?c=null:c="function"==typeof(c=v&&e[v]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=t(s=s.value,c=n+z(s,u++),i,r);else if("object"===s)throw i=""+e,y(Error(31),"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,"");return l}(t,"",e,n)}function z(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function B(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?j(t,i,n,(function(t){return t})):null!=t&&(O(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(L,"$&/")+"/")+n)),i.push(t))}function j(t,e,n,i,r){var a="";null!=n&&(a=(""+n).replace(L,"$&/")+"/"),D(t,F,e=N(e,a,i,r)),R(e)}function V(){var t=M.current;if(null===t)throw y(Error(321));return t}var U={Children:{map:function(t,e,n){if(null==t)return t;var i=[];return j(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;D(t,B,e=N(null,null,e,n)),R(e)},count:function(t){return D(t,(function(){return null}),null)},toArray:function(t){var e=[];return j(t,e,null,(function(t){return t})),e},only:function(t){if(!O(t))throw y(Error(143));return t}},createRef:function(){return{current:null}},Component:_,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:m,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return V().useCallback(t,e)},useContext:function(t,e){return V().useContext(t,e)},useEffect:function(t,e){return V().useEffect(t,e)},useImperativeHandle:function(t,e,n){return V().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return V().useLayoutEffect(t,e)},useMemo:function(t,e){return V().useMemo(t,e)},useReducer:function(t,e,n){return V().useReducer(t,e,n)},useRef:function(t){return V().useRef(t)},useState:function(t){return V().useState(t)},Fragment:s,Profiler:u,StrictMode:l,Suspense:d,unstable_SuspenseList:p,createElement:A,cloneElement:function(t,e,n){if(null==t)throw y(Error(267),t);var r=void 0,o=i({},t.props),s=t.key,l=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(l=e.ref,u=C.current),void 0!==e.key&&(s=""+e.key);var c=void 0;for(r in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)k.call(e,r)&&!P.hasOwnProperty(r)&&(o[r]=void 0===e[r]&&void 0!==c?c[r]:e[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){c=Array(r);for(var h=0;h<r;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:a,type:t.type,key:s,ref:l,props:o,_owner:u}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:O,version:"16.9.0",unstable_withSuspenseConfig:function(t,e){var n=T.suspense;T.suspense=void 0===e?null:e;try{t()}finally{T.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:M,ReactCurrentBatchConfig:T,ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:i}},H={default:U},G=H&&U||H;t.exports=G.default||G},function(t,e,n){"use strict";
/** @license React v16.9.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(0),r=n(65),a=n(110);function o(t){for(var e=t.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return t.message="Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",t}if(!i)throw o(Error(227));var s=null,l={};function u(){if(s)for(var t in l){var e=l[t],n=s.indexOf(t);if(!(-1<n))throw o(Error(96),t);if(!h[n]){if(!e.extractEvents)throw o(Error(97),t);for(var i in h[n]=e,n=e.eventTypes){var r=void 0,a=n[i],u=e,d=i;if(f.hasOwnProperty(d))throw o(Error(99),d);f[d]=a;var p=a.phasedRegistrationNames;if(p){for(r in p)p.hasOwnProperty(r)&&c(p[r],u,d);r=!0}else a.registrationName?(c(a.registrationName,u,d),r=!0):r=!1;if(!r)throw o(Error(98),i,t)}}}}function c(t,e,n){if(d[t])throw o(Error(100),t);d[t]=e,p[t]=e.eventTypes[n].dependencies}var h=[],f={},d={},p={};function m(t,e,n,i,r,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var g=!1,v=null,y=!1,b=null,x={onError:function(t){g=!0,v=t}};function _(t,e,n,i,r,a,o,s,l){g=!1,v=null,m.apply(x,arguments)}var w=null,S=null,E=null;function M(t,e,n){var i=t.type||"unknown-event";t.currentTarget=E(n),function(t,e,n,i,r,a,s,l,u){if(_.apply(this,arguments),g){if(!g)throw o(Error(198));var c=v;g=!1,v=null,y||(y=!0,b=c)}}(i,e,void 0,t),t.currentTarget=null}function T(t,e){if(null==e)throw o(Error(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function C(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var k=null;function P(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var i=0;i<e.length&&!t.isPropagationStopped();i++)M(t,e[i],n[i]);else e&&M(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function A(t){if(null!==t&&(k=T(k,t)),t=k,k=null,t){if(C(t,P),k)throw o(Error(95));if(y)throw t=b,y=!1,b=null,t}}var O={injectEventPluginOrder:function(t){if(s)throw o(Error(101));s=Array.prototype.slice.call(t),u()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];if(!l.hasOwnProperty(e)||l[e]!==i){if(l[e])throw o(Error(102),e);l[e]=i,n=!0}}n&&u()}};function L(t,e){var n=t.stateNode;if(!n)return null;var i=w(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw o(Error(231),e,typeof n);return n}var I=Math.random().toString(36).slice(2),N="__reactInternalInstance$"+I,R="__reactEventHandlers$"+I;function D(t){if(t[N])return t[N];for(;!t[N];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[N]).tag||6===t.tag?t:null}function z(t){return!(t=t[N])||5!==t.tag&&6!==t.tag?null:t}function B(t){if(5===t.tag||6===t.tag)return t.stateNode;throw o(Error(33))}function F(t){return t[R]||null}function j(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function V(t,e,n){(e=L(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function U(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=j(e);for(e=n.length;0<e--;)V(n[e],"captured",t);for(e=0;e<n.length;e++)V(n[e],"bubbled",t)}}function H(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=L(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function G(t){t&&t.dispatchConfig.registrationName&&H(t._targetInst,null,t)}function W(t){C(t,U)}var q=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement);function Q(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Y={animationend:Q("Animation","AnimationEnd"),animationiteration:Q("Animation","AnimationIteration"),animationstart:Q("Animation","AnimationStart"),transitionend:Q("Transition","TransitionEnd")},X={},$={};function Z(t){if(X[t])return X[t];if(!Y[t])return t;var e,n=Y[t];for(e in n)if(n.hasOwnProperty(e)&&e in $)return X[t]=n[e];return t}q&&($=document.createElement("div").style,"AnimationEvent"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),"TransitionEvent"in window||delete Y.transitionend.transition);var J=Z("animationend"),K=Z("animationiteration"),tt=Z("animationstart"),et=Z("transitionend"),nt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),it=null,rt=null,at=null;function ot(){if(at)return at;var t,e,n=rt,i=n.length,r="value"in it?it.value:it.textContent,a=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[a-e];e++);return at=r.slice(t,1<e?1-e:void 0)}function st(){return!0}function lt(){return!1}function ut(t,e,n,i){for(var r in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?st:lt,this.isPropagationStopped=lt,this}function ct(t,e,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,n,i),r}return new this(t,e,n,i)}function ht(t){if(!(t instanceof this))throw o(Error(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ft(t){t.eventPool=[],t.getPooled=ct,t.release=ht}r(ut.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=st)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=st)},persist:function(){this.isPersistent=st},isPersistent:lt,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=lt,this._dispatchInstances=this._dispatchListeners=null}}),ut.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ut.extend=function(t){function e(){}function n(){return i.apply(this,arguments)}var i=this;e.prototype=i.prototype;var a=new e;return r(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=r({},i.Interface,t),n.extend=i.extend,ft(n),n},ft(ut);var dt=ut.extend({data:null}),pt=ut.extend({data:null}),mt=[9,13,27,32],gt=q&&"CompositionEvent"in window,vt=null;q&&"documentMode"in document&&(vt=document.documentMode);var yt=q&&"TextEvent"in window&&!vt,bt=q&&(!gt||vt&&8<vt&&11>=vt),xt=String.fromCharCode(32),_t={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},wt=!1;function St(t,e){switch(t){case"keyup":return-1!==mt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Et(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Mt=!1;var Tt={eventTypes:_t,extractEvents:function(t,e,n,i){var r=void 0,a=void 0;if(gt)t:{switch(t){case"compositionstart":r=_t.compositionStart;break t;case"compositionend":r=_t.compositionEnd;break t;case"compositionupdate":r=_t.compositionUpdate;break t}r=void 0}else Mt?St(t,n)&&(r=_t.compositionEnd):"keydown"===t&&229===n.keyCode&&(r=_t.compositionStart);return r?(bt&&"ko"!==n.locale&&(Mt||r!==_t.compositionStart?r===_t.compositionEnd&&Mt&&(a=ot()):(rt="value"in(it=i)?it.value:it.textContent,Mt=!0)),r=dt.getPooled(r,e,n,i),a?r.data=a:null!==(a=Et(n))&&(r.data=a),W(r),a=r):a=null,(t=yt?function(t,e){switch(t){case"compositionend":return Et(e);case"keypress":return 32!==e.which?null:(wt=!0,xt);case"textInput":return(t=e.data)===xt&&wt?null:t;default:return null}}(t,n):function(t,e){if(Mt)return"compositionend"===t||!gt&&St(t,e)?(t=ot(),at=rt=it=null,Mt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=pt.getPooled(_t.beforeInput,e,n,i)).data=t,W(e)):e=null,null===a?e:null===e?a:[a,e]}},Ct=null,kt=null,Pt=null;function At(t){if(t=S(t)){if("function"!=typeof Ct)throw o(Error(280));var e=w(t.stateNode);Ct(t.stateNode,t.type,e)}}function Ot(t){kt?Pt?Pt.push(t):Pt=[t]:kt=t}function Lt(){if(kt){var t=kt,e=Pt;if(Pt=kt=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function It(t,e){return t(e)}function Nt(t,e,n,i){return t(e,n,i)}function Rt(){}var Dt=It,zt=!1;function Bt(){null===kt&&null===Pt||(Rt(),Lt())}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ft[t.type]:"textarea"===e}function Vt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Ut(t){if(!q)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function Ht(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Gt(t){t._valueTracker||(t._valueTracker=function(t){var e=Ht(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ht(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}var qt=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;qt.hasOwnProperty("ReactCurrentDispatcher")||(qt.ReactCurrentDispatcher={current:null}),qt.hasOwnProperty("ReactCurrentBatchConfig")||(qt.ReactCurrentBatchConfig={suspense:null});var Qt=/^(.*)[\\\/]/,Yt="function"==typeof Symbol&&Symbol.for,Xt=Yt?Symbol.for("react.element"):60103,$t=Yt?Symbol.for("react.portal"):60106,Zt=Yt?Symbol.for("react.fragment"):60107,Jt=Yt?Symbol.for("react.strict_mode"):60108,Kt=Yt?Symbol.for("react.profiler"):60114,te=Yt?Symbol.for("react.provider"):60109,ee=Yt?Symbol.for("react.context"):60110,ne=Yt?Symbol.for("react.concurrent_mode"):60111,ie=Yt?Symbol.for("react.forward_ref"):60112,re=Yt?Symbol.for("react.suspense"):60113,ae=Yt?Symbol.for("react.suspense_list"):60120,oe=Yt?Symbol.for("react.memo"):60115,se=Yt?Symbol.for("react.lazy"):60116;Yt&&Symbol.for("react.fundamental"),Yt&&Symbol.for("react.responder");var le="function"==typeof Symbol&&Symbol.iterator;function ue(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=le&&t[le]||t["@@iterator"])?t:null}function ce(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case Zt:return"Fragment";case $t:return"Portal";case Kt:return"Profiler";case Jt:return"StrictMode";case re:return"Suspense";case ae:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case ee:return"Context.Consumer";case te:return"Context.Provider";case ie:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case oe:return ce(t.type);case se:if(t=1===t._status?t._result:null)return ce(t)}return null}function he(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var i=t._debugOwner,r=t._debugSource,a=ce(t.type);n=null,i&&(n=ce(i.type)),i=a,a="",r?a=" (at "+r.fileName.replace(Qt,"")+":"+r.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+a}e+=n,t=t.return}while(t);return e}var fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de=Object.prototype.hasOwnProperty,pe={},me={};function ge(t,e,n,i,r,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){ve[t]=new ge(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];ve[e]=new ge(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){ve[t]=new ge(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){ve[t]=new ge(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){ve[t]=new ge(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){ve[t]=new ge(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){ve[t]=new ge(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){ve[t]=new ge(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){ve[t]=new ge(t,5,!1,t.toLowerCase(),null,!1)}));var ye=/[\-:]([a-z])/g;function be(t){return t[1].toUpperCase()}function xe(t,e,n,i){var r=ve.hasOwnProperty(e)?ve[e]:null;(null!==r?0===r.type:!i&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,i){if(null==e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!de.call(me,t)||!de.call(pe,t)&&(fe.test(t)?me[t]=!0:(pe[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}function _e(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function we(t,e){var n=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Se(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=_e(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ee(t,e){null!=(e=e.checked)&&xe(t,"checked",e,!1)}function Me(t,e){Ee(t,e);var n=_e(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ce(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ce(t,e.type,_e(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Te(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Ce(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(ye,be);ve[e]=new ge(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(ye,be);ve[e]=new ge(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(ye,be);ve[e]=new ge(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){ve[t]=new ge(t,1,!1,t.toLowerCase(),null,!1)})),ve.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){ve[t]=new ge(t,1,!1,t.toLowerCase(),null,!0)}));var ke={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Pe(t,e,n){return(t=ut.getPooled(ke.change,t,e,n)).type="change",Ot(n),W(t),t}var Ae=null,Oe=null;function Le(t){A(t)}function Ie(t){if(Wt(B(t)))return t}function Ne(t,e){if("change"===t)return e}var Re=!1;function De(){Ae&&(Ae.detachEvent("onpropertychange",ze),Oe=Ae=null)}function ze(t){if("value"===t.propertyName&&Ie(Oe))if(t=Pe(Oe,t,Vt(t)),zt)A(t);else{zt=!0;try{It(Le,t)}finally{zt=!1,Bt()}}}function Be(t,e,n){"focus"===t?(De(),Oe=n,(Ae=e).attachEvent("onpropertychange",ze)):"blur"===t&&De()}function Fe(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ie(Oe)}function je(t,e){if("click"===t)return Ie(e)}function Ve(t,e){if("input"===t||"change"===t)return Ie(e)}q&&(Re=Ut("input")&&(!document.documentMode||9<document.documentMode));var Ue={eventTypes:ke,_isInputEventSupported:Re,extractEvents:function(t,e,n,i){var r=e?B(e):window,a=void 0,o=void 0,s=r.nodeName&&r.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===r.type?a=Ne:jt(r)?Re?a=Ve:(a=Fe,o=Be):(s=r.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(a=je),a&&(a=a(t,e)))return Pe(a,n,i);o&&o(t,r,e),"blur"===t&&(t=r._wrapperState)&&t.controlled&&"number"===r.type&&Ce(r,"number",r.value)}},He=ut.extend({view:null,detail:null}),Ge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function We(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ge[t])&&!!e[t]}function qe(){return We}var Qe=0,Ye=0,Xe=!1,$e=!1,Ze=He.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:qe,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Qe;return Qe=t.screenX,Xe?"mousemove"===t.type?t.screenX-e:0:(Xe=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ye;return Ye=t.screenY,$e?"mousemove"===t.type?t.screenY-e:0:($e=!0,0)}}),Je=Ze.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ke={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},tn={eventTypes:Ke,extractEvents:function(t,e,n,i){var r="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(r&&(n.relatedTarget||n.fromElement)||!a&&!r)return null;if(r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window,a?(a=e,e=(e=n.relatedTarget||n.toElement)?D(e):null):a=null,a===e)return null;var o=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===t||"mouseover"===t?(o=Ze,s=Ke.mouseLeave,l=Ke.mouseEnter,u="mouse"):"pointerout"!==t&&"pointerover"!==t||(o=Je,s=Ke.pointerLeave,l=Ke.pointerEnter,u="pointer");var c=null==a?r:B(a);if(r=null==e?r:B(e),(t=o.getPooled(s,a,n,i)).type=u+"leave",t.target=c,t.relatedTarget=r,(n=o.getPooled(l,e,n,i)).type=u+"enter",n.target=r,n.relatedTarget=c,i=e,a&&i)t:{for(r=i,u=0,o=e=a;o;o=j(o))u++;for(o=0,l=r;l;l=j(l))o++;for(;0<u-o;)e=j(e),u--;for(;0<o-u;)r=j(r),o--;for(;u--;){if(e===r||e===r.alternate)break t;e=j(e),r=j(r)}e=null}else e=null;for(r=e,e=[];a&&a!==r&&(null===(u=a.alternate)||u!==r);)e.push(a),a=j(a);for(a=[];i&&i!==r&&(null===(u=i.alternate)||u!==r);)a.push(i),i=j(i);for(i=0;i<e.length;i++)H(e[i],"bubbled",t);for(i=a.length;0<i--;)H(a[i],"captured",n);return[t,n]}};function en(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e}var nn=Object.prototype.hasOwnProperty;function rn(t,e){if(en(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!nn.call(e,n[i])||!en(t[n[i]],e[n[i]]))return!1;return!0}function an(t,e){return{responder:t,props:e}}function on(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function sn(t){if(2!==on(t))throw o(Error(188))}function ln(t){if(!(t=function(t){var e=t.alternate;if(!e){if(3===(e=on(t)))throw o(Error(188));return 1===e?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return sn(r),t;if(a===i)return sn(r),e;a=a.sibling}throw o(Error(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw o(Error(189))}}if(n.alternate!==i)throw o(Error(190))}if(3!==n.tag)throw o(Error(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}new Map,new Map,new Set,new Map;var un=ut.extend({animationName:null,elapsedTime:null,pseudoElement:null}),cn=ut.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hn=He.extend({relatedTarget:null});function fn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}for(var dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn=He.extend({key:function(t){if(t.key){var e=dn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=fn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?pn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:qe,charCode:function(t){return"keypress"===t.type?fn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?fn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),gn=Ze.extend({dataTransfer:null}),vn=He.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:qe}),yn=ut.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),bn=Ze.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),xn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[J,"animationEnd",2],[K,"animationIteration",2],[tt,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[et,"transitionEnd",2],["waiting","waiting",2]],_n={},wn={},Sn=0;Sn<xn.length;Sn++){var En=xn[Sn],Mn=En[0],Tn=En[1],Cn=En[2],kn="on"+(Tn[0].toUpperCase()+Tn.slice(1)),Pn={phasedRegistrationNames:{bubbled:kn,captured:kn+"Capture"},dependencies:[Mn],eventPriority:Cn};_n[Tn]=Pn,wn[Mn]=Pn}var An={eventTypes:_n,getEventPriority:function(t){return void 0!==(t=wn[t])?t.eventPriority:2},extractEvents:function(t,e,n,i){var r=wn[t];if(!r)return null;switch(t){case"keypress":if(0===fn(n))return null;case"keydown":case"keyup":t=mn;break;case"blur":case"focus":t=hn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ze;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=vn;break;case J:case K:case tt:t=un;break;case et:t=yn;break;case"scroll":t=He;break;case"wheel":t=bn;break;case"copy":case"cut":case"paste":t=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Je;break;default:t=ut}return W(e=t.getPooled(r,e,n,i)),e}},On=An.getEventPriority,Ln=[];function In(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var i;for(i=n;i.return;)i=i.return;if(!(i=3!==i.tag?null:i.stateNode.containerInfo))break;t.ancestors.push(n),n=D(i)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var r=Vt(t.nativeEvent);i=t.topLevelType;for(var a=t.nativeEvent,o=null,s=0;s<h.length;s++){var l=h[s];l&&(l=l.extractEvents(i,e,a,r))&&(o=T(o,l))}A(o)}}var Nn=!0;function Rn(t,e){Dn(e,t,!1)}function Dn(t,e,n){switch(On(e)){case 0:var i=zn.bind(null,e,1);break;case 1:i=Bn.bind(null,e,1);break;default:i=Fn.bind(null,e,1)}n?t.addEventListener(e,i,!0):t.addEventListener(e,i,!1)}function zn(t,e,n){zt||Rt();var i=Fn,r=zt;zt=!0;try{Nt(i,t,e,n)}finally{(zt=r)||Bt()}}function Bn(t,e,n){Fn(t,e,n)}function Fn(t,e,n){if(Nn){if(null===(e=D(e=Vt(n)))||"number"!=typeof e.tag||2===on(e)||(e=null),Ln.length){var i=Ln.pop();i.topLevelType=t,i.nativeEvent=n,i.targetInst=e,t=i}else t={topLevelType:t,nativeEvent:n,targetInst:e,ancestors:[]};try{if(n=t,zt)In(n);else{zt=!0;try{Dt(In,n,void 0)}finally{zt=!1,Bt()}}}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Ln.length&&Ln.push(t)}}}var jn=new("function"==typeof WeakMap?WeakMap:Map);function Vn(t){var e=jn.get(t);return void 0===e&&(e=new Set,jn.set(t,e)),e}function Un(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gn(t,e){var n,i=Hn(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Hn(i)}}function Wn(){for(var t=window,e=Un();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Un((t=e.contentWindow).document)}return e}function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Qn=q&&"documentMode"in document&&11>=document.documentMode,Yn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Xn=null,$n=null,Zn=null,Jn=!1;function Kn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Jn||null==Xn||Xn!==Un(n)?null:("selectionStart"in(n=Xn)&&qn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Zn&&rn(Zn,n)?null:(Zn=n,(t=ut.getPooled(Yn.select,$n,t,e)).type="select",t.target=Xn,W(t),t))}var ti={eventTypes:Yn,extractEvents:function(t,e,n,i){var r,a=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!a)){t:{a=Vn(a),r=p.onSelect;for(var o=0;o<r.length;o++)if(!a.has(r[o])){a=!1;break t}a=!0}r=!a}if(r)return null;switch(a=e?B(e):window,t){case"focus":(jt(a)||"true"===a.contentEditable)&&(Xn=a,$n=e,Zn=null);break;case"blur":Zn=$n=Xn=null;break;case"mousedown":Jn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Jn=!1,Kn(n,i);case"selectionchange":if(Qn)break;case"keydown":case"keyup":return Kn(n,i)}return null}};function ei(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function ni(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+_e(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function ii(t,e){if(null!=e.dangerouslySetInnerHTML)throw o(Error(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ri(t,e){var n=e.value;if(null==n){if(n=e.defaultValue,null!=(e=e.children)){if(null!=n)throw o(Error(92));if(Array.isArray(e)){if(!(1>=e.length))throw o(Error(93));e=e[0]}n=e}null==n&&(n="")}t._wrapperState={initialValue:_e(n)}}function ai(t,e){var n=_e(e.value),i=_e(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function oi(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}O.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=F,S=z,E=B,O.injectEventPluginsByName({SimpleEventPlugin:An,EnterLeaveEventPlugin:tn,ChangeEventPlugin:Ue,SelectEventPlugin:ti,BeforeInputEventPlugin:Tt});var si={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function li(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ui(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?li(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ci=void 0,hi=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==si.svg||"innerHTML"in t)t.innerHTML=e;else{for((ci=ci||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=ci.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function fi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var di={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pi=["Webkit","ms","Moz","O"];function mi(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||di.hasOwnProperty(t)&&di[t]?(""+e).trim():e+"px"}function gi(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=mi(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(di).forEach((function(t){pi.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),di[e]=di[t]}))}));var vi=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yi(t,e){if(e){if(vi[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw o(Error(137),t,"");if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw o(Error(60));if(!("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML))throw o(Error(61))}if(null!=e.style&&"object"!=typeof e.style)throw o(Error(62),"")}}function bi(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xi(t,e){var n=Vn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=p[e];for(var i=0;i<e.length;i++){var r=e[i];if(!n.has(r)){switch(r){case"scroll":Dn(t,"scroll",!0);break;case"focus":case"blur":Dn(t,"focus",!0),Dn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Ut(r)&&Dn(t,r,!0);break;case"invalid":case"submit":case"reset":break;default:-1===nt.indexOf(r)&&Rn(r,t)}n.add(r)}}}function _i(){}var wi=null,Si=null;function Ei(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Mi(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Ti="function"==typeof setTimeout?setTimeout:void 0,Ci="function"==typeof clearTimeout?clearTimeout:void 0;function ki(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}new Set;var Pi=[],Ai=-1;function Oi(t){0>Ai||(t.current=Pi[Ai],Pi[Ai]=null,Ai--)}function Li(t,e){Ai++,Pi[Ai]=t.current,t.current=e}var Ii={},Ni={current:Ii},Ri={current:!1},Di=Ii;function zi(t,e){var n=t.type.contextTypes;if(!n)return Ii;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Bi(t){return null!=(t=t.childContextTypes)}function Fi(t){Oi(Ri),Oi(Ni)}function ji(t){Oi(Ri),Oi(Ni)}function Vi(t,e,n){if(Ni.current!==Ii)throw o(Error(168));Li(Ni,e),Li(Ri,n)}function Ui(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in t))throw o(Error(108),ce(e)||"Unknown",a);return r({},n,i)}function Hi(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ni.current,Li(Ni,e),Li(Ri,Ri.current),!0}function Gi(t,e,n){var i=t.stateNode;if(!i)throw o(Error(169));n?(e=Ui(t,e,Di),i.__reactInternalMemoizedMergedChildContext=e,Oi(Ri),Oi(Ni),Li(Ni,e)):Oi(Ri),Li(Ri,n)}var Wi=a.unstable_runWithPriority,qi=a.unstable_scheduleCallback,Qi=a.unstable_cancelCallback,Yi=a.unstable_shouldYield,Xi=a.unstable_requestPaint,$i=a.unstable_now,Zi=a.unstable_getCurrentPriorityLevel,Ji=a.unstable_ImmediatePriority,Ki=a.unstable_UserBlockingPriority,tr=a.unstable_NormalPriority,er=a.unstable_LowPriority,nr=a.unstable_IdlePriority,ir={},rr=void 0!==Xi?Xi:function(){},ar=null,or=null,sr=!1,lr=$i(),ur=1e4>lr?$i:function(){return $i()-lr};function cr(){switch(Zi()){case Ji:return 99;case Ki:return 98;case tr:return 97;case er:return 96;case nr:return 95;default:throw o(Error(332))}}function hr(t){switch(t){case 99:return Ji;case 98:return Ki;case 97:return tr;case 96:return er;case 95:return nr;default:throw o(Error(332))}}function fr(t,e){return t=hr(t),Wi(t,e)}function dr(t,e,n){return t=hr(t),qi(t,e,n)}function pr(t){return null===ar?(ar=[t],or=qi(Ji,gr)):ar.push(t),ir}function mr(){null!==or&&Qi(or),gr()}function gr(){if(!sr&&null!==ar){sr=!0;var t=0;try{var e=ar;fr(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),ar=null}catch(e){throw null!==ar&&(ar=ar.slice(t+1)),qi(Ji,mr),e}finally{sr=!1}}}function vr(t,e){return 1073741823===e?99:1===e?95:0>=(t=10*(1073741821-e)-10*(1073741821-t))?99:250>=t?98:5250>=t?97:95}function yr(t,e){if(t&&t.defaultProps)for(var n in e=r({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var br={current:null},xr=null,_r=null,wr=null;function Sr(){wr=_r=xr=null}function Er(t,e){var n=t.type._context;Li(br,n._currentValue),n._currentValue=e}function Mr(t){var e=br.current;Oi(br),t.type._context._currentValue=e}function Tr(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function Cr(t,e){xr=t,wr=_r=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(co=!0),t.firstContext=null)}function kr(t,e){if(wr!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(wr=t,e=1073741823),e={context:t,observedBits:e,next:null},null===_r){if(null===xr)throw o(Error(308));_r=e,xr.dependencies={expirationTime:0,firstContext:e,responders:null}}else _r=_r.next=e;return t._currentValue}var Pr=!1;function Ar(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Or(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Lr(t,e){return{expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Ir(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Nr(t,e){var n=t.alternate;if(null===n){var i=t.updateQueue,r=null;null===i&&(i=t.updateQueue=Ar(t.memoizedState))}else i=t.updateQueue,r=n.updateQueue,null===i?null===r?(i=t.updateQueue=Ar(t.memoizedState),r=n.updateQueue=Ar(n.memoizedState)):i=t.updateQueue=Or(r):null===r&&(r=n.updateQueue=Or(i));null===r||i===r?Ir(i,e):null===i.lastUpdate||null===r.lastUpdate?(Ir(i,e),Ir(r,e)):(Ir(i,e),r.lastUpdate=e)}function Rr(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Ar(t.memoizedState):Dr(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function Dr(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Or(e)),e}function zr(t,e,n,i,a,o){switch(n.tag){case 1:return"function"==typeof(t=n.payload)?t.call(o,i,a):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null==(a="function"==typeof(t=n.payload)?t.call(o,i,a):t))break;return r({},i,a);case 2:Pr=!0}return i}function Br(t,e,n,i,r){Pr=!1;for(var a=(e=Dr(t,e)).baseState,o=null,s=0,l=e.firstUpdate,u=a;null!==l;){var c=l.expirationTime;c<r?(null===o&&(o=l,a=u),s<c&&(s=c)):(Us(c,l.suspenseConfig),u=zr(t,0,l,u,n,i),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=l:(e.lastEffect.nextEffect=l,e.lastEffect=l))),l=l.next}for(c=null,l=e.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<r?(null===c&&(c=l,null===o&&(a=u)),s<h&&(s=h)):(u=zr(t,0,l,u,n,i),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=l:(e.lastCapturedEffect.nextEffect=l,e.lastCapturedEffect=l))),l=l.next}null===o&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===o&&null===c&&(a=u),e.baseState=a,e.firstUpdate=o,e.firstCapturedUpdate=c,t.expirationTime=s,t.memoizedState=u}function Fr(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),jr(e.firstEffect,n),e.firstEffect=e.lastEffect=null,jr(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function jr(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var i=e;if("function"!=typeof n)throw o(Error(191),n);n.call(i)}t=t.nextEffect}}var Vr=qt.ReactCurrentBatchConfig,Ur=(new i.Component).refs;function Hr(t,e,n,i){n=null==(n=n(i,e=t.memoizedState))?e:r({},e,n),t.memoizedState=n,null!==(i=t.updateQueue)&&0===t.expirationTime&&(i.baseState=n)}var Gr={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===on(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var i=Ps(),r=Vr.suspense;(r=Lr(i=As(i,t,r),r)).payload=e,null!=n&&(r.callback=n),Nr(t,r),Ls(t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var i=Ps(),r=Vr.suspense;(r=Lr(i=As(i,t,r),r)).tag=1,r.payload=e,null!=n&&(r.callback=n),Nr(t,r),Ls(t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ps(),i=Vr.suspense;(i=Lr(n=As(n,t,i),i)).tag=2,null!=e&&(i.callback=e),Nr(t,i),Ls(t,n)}};function Wr(t,e,n,i,r,a,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!rn(n,i)||!rn(r,a))}function qr(t,e,n){var i=!1,r=Ii,a=e.contextType;return"object"==typeof a&&null!==a?a=kr(a):(r=Bi(e)?Di:Ni.current,a=(i=null!=(i=e.contextTypes))?zi(t,r):Ii),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Gr,t.stateNode=e,e._reactInternalFiber=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function Qr(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Gr.enqueueReplaceState(e,e.state,null)}function Yr(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Ur;var a=e.contextType;"object"==typeof a&&null!==a?r.context=kr(a):(a=Bi(e)?Di:Ni.current,r.context=zi(t,a)),null!==(a=t.updateQueue)&&(Br(t,a,n,r,i),r.state=t.memoizedState),"function"==typeof(a=e.getDerivedStateFromProps)&&(Hr(t,e,a,n),r.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(e=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Gr.enqueueReplaceState(r,r.state,null),null!==(a=t.updateQueue)&&(Br(t,a,n,r,i),r.state=t.memoizedState)),"function"==typeof r.componentDidMount&&(t.effectTag|=4)}var Xr=Array.isArray;function $r(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){n=n._owner;var i=void 0;if(n){if(1!==n.tag)throw o(Error(309));i=n.stateNode}if(!i)throw o(Error(147),t);var r=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs;e===Ur&&(e=i.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!=typeof t)throw o(Error(284));if(!n._owner)throw o(Error(290),t)}return t}function Zr(t,e){if("textarea"!==t.type)throw o(Error(31),"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function Jr(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e,n){return(t=al(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.effectTag=2,n):i:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=ll(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function u(t,e,n,i){return null!==e&&e.elementType===n.type?((i=r(e,n.props)).ref=$r(t,e,n),i.return=t,i):((i=ol(n.type,n.key,n.props,null,t.mode,i)).ref=$r(t,e,n),i.return=t,i)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=ul(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,a){return null===e||7!==e.tag?((e=sl(n,t.mode,i,a)).return=t,e):((e=r(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=ll(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Xt:return(n=ol(e.type,e.key,e.props,null,t.mode,n)).ref=$r(t,null,e),n.return=t,n;case $t:return(e=ul(e,t.mode,n)).return=t,e}if(Xr(e)||ue(e))return(e=sl(e,t.mode,n,null)).return=t,e;Zr(t,e)}return null}function d(t,e,n,i){var r=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:l(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Xt:return n.key===r?n.type===Zt?h(t,e,n.props.children,i,r):u(t,e,n,i):null;case $t:return n.key===r?c(t,e,n,i):null}if(Xr(n)||ue(n))return null!==r?null:h(t,e,n,i,null);Zr(t,n)}return null}function p(t,e,n,i,r){if("string"==typeof i||"number"==typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case Xt:return t=t.get(null===i.key?n:i.key)||null,i.type===Zt?h(e,t,i.props.children,r,i.key):u(e,t,i,r);case $t:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(Xr(i)||ue(i))return h(e,t=t.get(n)||null,i,r,null);Zr(e,i)}return null}function m(r,o,s,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(r,h,s[m],l);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(r,h),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===s.length)return n(r,h),u;if(null===h){for(;m<s.length;m++)null!==(h=f(r,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=i(r,h);m<s.length;m++)null!==(g=p(h,r,m,s[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(r,t)})),u}function g(r,s,l,u){var c=ue(l);if("function"!=typeof c)throw o(Error(150));if(null==(l=c.call(l)))throw o(Error(151));for(var h=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=d(r,m,y.value,u);if(null===b){null===m&&(m=v);break}t&&m&&null===b.alternate&&e(r,m),s=a(b,s,g),null===h?c=b:h.sibling=b,h=b,m=v}if(y.done)return n(r,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(r,y.value,u))&&(s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return c}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=p(m,r,g,y.value,u))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(r,t)})),c}return function(t,i,a,l){var u="object"==typeof a&&null!==a&&a.type===Zt&&null===a.key;u&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case Xt:t:{for(c=a.key,u=i;null!==u;){if(u.key===c){if(7===u.tag?a.type===Zt:u.elementType===a.type){n(t,u.sibling),(i=r(u,a.type===Zt?a.props.children:a.props)).ref=$r(t,u,a),i.return=t,t=i;break t}n(t,u);break}e(t,u),u=u.sibling}a.type===Zt?((i=sl(a.props.children,t.mode,l,a.key)).return=t,t=i):((l=ol(a.type,a.key,a.props,null,t.mode,l)).ref=$r(t,i,a),l.return=t,t=l)}return s(t);case $t:t:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(t,i.sibling),(i=r(i,a.children||[])).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=ul(a,t.mode,l)).return=t,t=i}return s(t)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==i&&6===i.tag?(n(t,i.sibling),(i=r(i,a)).return=t,t=i):(n(t,i),(i=ll(a,t.mode,l)).return=t,t=i),s(t);if(Xr(a))return m(t,i,a,l);if(ue(a))return g(t,i,a,l);if(c&&Zr(t,a),void 0===a&&!u)switch(t.tag){case 1:case 0:throw t=t.type,o(Error(152),t.displayName||t.name||"Component")}return n(t,i)}}var Kr=Jr(!0),ta=Jr(!1),ea={},na={current:ea},ia={current:ea},ra={current:ea};function aa(t){if(t===ea)throw o(Error(174));return t}function oa(t,e){Li(ra,e),Li(ia,t),Li(na,ea);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ui(null,"");break;default:e=ui(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}Oi(na),Li(na,e)}function sa(t){Oi(na),Oi(ia),Oi(ra)}function la(t){aa(ra.current);var e=aa(na.current),n=ui(e,t.type);e!==n&&(Li(ia,t),Li(na,n))}function ua(t){ia.current===t&&(Oi(na),Oi(ia))}var ca=1,ha=1,fa=2,da={current:0};function pa(t){for(var e=t;null!==e;){if(13===e.tag){if(null!==e.memoizedState)return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ma=0,ga=2,va=4,ya=8,ba=16,xa=32,_a=64,wa=128,Sa=qt.ReactCurrentDispatcher,Ea=0,Ma=null,Ta=null,Ca=null,ka=null,Pa=null,Aa=null,Oa=0,La=null,Ia=0,Na=!1,Ra=null,Da=0;function za(){throw o(Error(321))}function Ba(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Fa(t,e,n,i,r,a){if(Ea=a,Ma=e,Ca=null!==t?t.memoizedState:null,Sa.current=null===Ca?Ja:Ka,e=n(i,r),Na){do{Na=!1,Da+=1,Ca=null!==t?t.memoizedState:null,Aa=ka,La=Pa=Ta=null,Sa.current=Ka,e=n(i,r)}while(Na);Ra=null,Da=0}if(Sa.current=Za,(t=Ma).memoizedState=ka,t.expirationTime=Oa,t.updateQueue=La,t.effectTag|=Ia,t=null!==Ta&&null!==Ta.next,Ea=0,Aa=Pa=ka=Ca=Ta=Ma=null,Oa=0,La=null,Ia=0,t)throw o(Error(300));return e}function ja(){Sa.current=Za,Ea=0,Aa=Pa=ka=Ca=Ta=Ma=null,Oa=0,La=null,Ia=0,Na=!1,Ra=null,Da=0}function Va(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Pa?ka=Pa=t:Pa=Pa.next=t,Pa}function Ua(){if(null!==Aa)Aa=(Pa=Aa).next,Ca=null!==(Ta=Ca)?Ta.next:null;else{if(null===Ca)throw o(Error(310));var t={memoizedState:(Ta=Ca).memoizedState,baseState:Ta.baseState,queue:Ta.queue,baseUpdate:Ta.baseUpdate,next:null};Pa=null===Pa?ka=t:Pa.next=t,Ca=Ta.next}return Pa}function Ha(t,e){return"function"==typeof e?e(t):e}function Ga(t){var e=Ua(),n=e.queue;if(null===n)throw o(Error(311));if(n.lastRenderedReducer=t,0<Da){var i=n.dispatch;if(null!==Ra){var r=Ra.get(n);if(void 0!==r){Ra.delete(n);var a=e.memoizedState;do{a=t(a,r.action),r=r.next}while(null!==r);return en(a,e.memoizedState)||(co=!0),e.memoizedState=a,e.baseUpdate===n.last&&(e.baseState=a),n.lastRenderedState=a,[a,i]}}return[e.memoizedState,i]}i=n.last;var s=e.baseUpdate;if(a=e.baseState,null!==s?(null!==i&&(i.next=null),i=s.next):i=null!==i?i.next:null,null!==i){var l=r=null,u=i,c=!1;do{var h=u.expirationTime;h<Ea?(c||(c=!0,l=s,r=a),h>Oa&&(Oa=h)):(Us(h,u.suspenseConfig),a=u.eagerReducer===t?u.eagerState:t(a,u.action)),s=u,u=u.next}while(null!==u&&u!==i);c||(l=s,r=a),en(a,e.memoizedState)||(co=!0),e.memoizedState=a,e.baseUpdate=l,e.baseState=r,n.lastRenderedState=a}return[e.memoizedState,n.dispatch]}function Wa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===La?(La={lastEffect:null}).lastEffect=t.next=t:null===(e=La.lastEffect)?La.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,La.lastEffect=t),t}function qa(t,e,n,i){var r=Va();Ia|=t,r.memoizedState=Wa(e,n,void 0,void 0===i?null:i)}function Qa(t,e,n,i){var r=Ua();i=void 0===i?null:i;var a=void 0;if(null!==Ta){var o=Ta.memoizedState;if(a=o.destroy,null!==i&&Ba(i,o.deps))return void Wa(ma,n,a,i)}Ia|=t,r.memoizedState=Wa(e,n,a,i)}function Ya(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Xa(){}function $a(t,e,n){if(!(25>Da))throw o(Error(301));var i=t.alternate;if(t===Ma||null!==i&&i===Ma)if(Na=!0,t={expirationTime:Ea,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===Ra&&(Ra=new Map),void 0===(n=Ra.get(e)))Ra.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{var r=Ps(),a=Vr.suspense;a={expirationTime:r=As(r,t,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var s=e.last;if(null===s)a.next=a;else{var l=s.next;null!==l&&(a.next=l),s.next=a}if(e.last=a,0===t.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=e.lastRenderedReducer))try{var u=e.lastRenderedState,c=i(u,n);if(a.eagerReducer=i,a.eagerState=c,en(c,u))return}catch(t){}Ls(t,r)}}var Za={readContext:kr,useCallback:za,useContext:za,useEffect:za,useImperativeHandle:za,useLayoutEffect:za,useMemo:za,useReducer:za,useRef:za,useState:za,useDebugValue:za,useResponder:za},Ja={readContext:kr,useCallback:function(t,e){return Va().memoizedState=[t,void 0===e?null:e],t},useContext:kr,useEffect:function(t,e){return qa(516,wa|_a,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,qa(4,va|xa,Ya.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qa(4,va|xa,t,e)},useMemo:function(t,e){var n=Va();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Va();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=$a.bind(null,Ma,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Va().memoizedState=t},useState:function(t){var e=Va();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:t}).dispatch=$a.bind(null,Ma,t),[e.memoizedState,t]},useDebugValue:Xa,useResponder:an},Ka={readContext:kr,useCallback:function(t,e){var n=Ua();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Ba(e,i[1])?i[0]:(n.memoizedState=[t,e],t)},useContext:kr,useEffect:function(t,e){return Qa(516,wa|_a,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Qa(4,va|xa,Ya.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qa(4,va|xa,t,e)},useMemo:function(t,e){var n=Ua();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Ba(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:Ga,useRef:function(){return Ua().memoizedState},useState:function(t){return Ga(Ha)},useDebugValue:Xa,useResponder:an},to=null,eo=null,no=!1;function io(t,e){var n=il(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function ro(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function ao(t){if(no){var e=eo;if(e){var n=e;if(!ro(t,e)){if(!(e=ki(n.nextSibling))||!ro(t,e))return t.effectTag|=2,no=!1,void(to=t);io(to,n)}to=t,eo=ki(e.firstChild)}else t.effectTag|=2,no=!1,to=t}}function oo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;to=t}function so(t){if(t!==to)return!1;if(!no)return oo(t),no=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Mi(e,t.memoizedProps))for(e=eo;e;)io(t,e),e=ki(e.nextSibling);return oo(t),eo=to?ki(t.stateNode.nextSibling):null,!0}function lo(){eo=to=null,no=!1}var uo=qt.ReactCurrentOwner,co=!1;function ho(t,e,n,i){e.child=null===t?ta(e,null,n,i):Kr(e,t.child,n,i)}function fo(t,e,n,i,r){n=n.render;var a=e.ref;return Cr(e,r),i=Fa(t,e,n,i,a,r),null===t||co?(e.effectTag|=1,ho(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Mo(t,e,r))}function po(t,e,n,i,r,a){if(null===t){var o=n.type;return"function"!=typeof o||rl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=ol(n.type,null,i,null,e.mode,a)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,mo(t,e,o,i,r,a))}return o=t.child,r<a&&(r=o.memoizedProps,(n=null!==(n=n.compare)?n:rn)(r,i)&&t.ref===e.ref)?Mo(t,e,a):(e.effectTag|=1,(t=al(o,i)).ref=e.ref,t.return=e,e.child=t)}function mo(t,e,n,i,r,a){return null!==t&&rn(t.memoizedProps,i)&&t.ref===e.ref&&(co=!1,r<a)?Mo(t,e,a):vo(t,e,n,i,a)}function go(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function vo(t,e,n,i,r){var a=Bi(n)?Di:Ni.current;return a=zi(e,a),Cr(e,r),n=Fa(t,e,n,i,a,r),null===t||co?(e.effectTag|=1,ho(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Mo(t,e,r))}function yo(t,e,n,i,r){if(Bi(n)){var a=!0;Hi(e)}else a=!1;if(Cr(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),qr(e,n,i),Yr(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"==typeof u&&null!==u?u=kr(u):u=zi(e,u=Bi(n)?Di:Ni.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||l!==u)&&Qr(e,o,i,u),Pr=!1;var f=e.memoizedState;l=o.state=f;var d=e.updateQueue;null!==d&&(Br(e,d,i,o,r),l=e.memoizedState),s!==i||f!==l||Ri.current||Pr?("function"==typeof c&&(Hr(e,n,c,i),l=e.memoizedState),(s=Pr||Wr(e,n,s,i,f,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.effectTag|=4)):("function"==typeof o.componentDidMount&&(e.effectTag|=4),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=s):("function"==typeof o.componentDidMount&&(e.effectTag|=4),i=!1)}else o=e.stateNode,s=e.memoizedProps,o.props=e.type===e.elementType?s:yr(e.type,s),l=o.context,"object"==typeof(u=n.contextType)&&null!==u?u=kr(u):u=zi(e,u=Bi(n)?Di:Ni.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||l!==u)&&Qr(e,o,i,u),Pr=!1,l=e.memoizedState,f=o.state=l,null!==(d=e.updateQueue)&&(Br(e,d,i,o,r),f=e.memoizedState),s!==i||l!==f||Ri.current||Pr?("function"==typeof c&&(Hr(e,n,c,i),f=e.memoizedState),(c=Pr||Wr(e,n,s,i,l,f,u))?(h||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,u)),"function"==typeof o.componentDidUpdate&&(e.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=i,e.memoizedState=f),o.props=i,o.state=f,o.context=u,i=c):("function"!=typeof o.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),i=!1);return bo(t,e,n,i,a,r)}function bo(t,e,n,i,r,a){go(t,e);var o=0!=(64&e.effectTag);if(!i&&!o)return r&&Gi(e,n,!1),Mo(t,e,a);i=e.stateNode,uo.current=e;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return e.effectTag|=1,null!==t&&o?(e.child=Kr(e,t.child,null,a),e.child=Kr(e,null,s,a)):ho(t,e,s,a),e.memoizedState=i.state,r&&Gi(e,n,!0),e.child}function xo(t){var e=t.stateNode;e.pendingContext?Vi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Vi(0,e.context,!1),oa(t,e.containerInfo)}var _o={};function wo(t,e,n){var i,r=e.mode,a=e.pendingProps,o=da.current,s=null,l=!1;if((i=0!=(64&e.effectTag))||(i=0!=(o&fa)&&(null===t||null!==t.memoizedState)),i?(s=_o,l=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=ha),Li(da,o&=ca),null===t)if(l){if(a=a.fallback,(t=sl(null,r,0,null)).return=e,0==(2&e.mode))for(l=null!==e.memoizedState?e.child.child:e.child,t.child=l;null!==l;)l.return=t,l=l.sibling;(n=sl(a,r,n,null)).return=e,t.sibling=n,r=t}else r=n=ta(e,null,a.children,n);else{if(null!==t.memoizedState)if(r=(o=t.child).sibling,l){if(a=a.fallback,(n=al(o,o.pendingProps)).return=e,0==(2&e.mode)&&(l=null!==e.memoizedState?e.child.child:e.child)!==o.child)for(n.child=l;null!==l;)l.return=n,l=l.sibling;(a=al(r,a,r.expirationTime)).return=e,n.sibling=a,r=n,n.childExpirationTime=0,n=a}else r=n=Kr(e,o.child,a.children,n);else if(o=t.child,l){if(l=a.fallback,(a=sl(null,r,0,null)).return=e,a.child=o,null!==o&&(o.return=a),0==(2&e.mode))for(o=null!==e.memoizedState?e.child.child:e.child,a.child=o;null!==o;)o.return=a,o=o.sibling;(n=sl(l,r,n,null)).return=e,a.sibling=n,n.effectTag|=2,r=a,a.childExpirationTime=0}else n=r=Kr(e,o,a.children,n);e.stateNode=t.stateNode}return e.memoizedState=s,e.child=r,n}function So(t,e,n,i,r){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,last:i,tail:n,tailExpiration:0,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.last=i,a.tail=n,a.tailExpiration=0,a.tailMode=r)}function Eo(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(ho(t,e,i.children,n),0!=((i=da.current)&fa))i=i&ca|fa,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag){if(null!==t.memoizedState){t.expirationTime<n&&(t.expirationTime=n);var o=t.alternate;null!==o&&o.expirationTime<n&&(o.expirationTime=n),Tr(t.return,n)}}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=ca}if(Li(da,i),0==(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(i=n.alternate)&&null===pa(i)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),So(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(i=r.alternate)&&null===pa(i)){e.child=r;break}i=r.sibling,r.sibling=n,n=r,r=i}So(e,!0,n,null,a);break;case"together":So(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw o(Error(153));if(null!==e.child){for(n=al(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=al(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function To(t){t.effectTag|=4}var Co=void 0,ko=void 0,Po=void 0,Ao=void 0;function Oo(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Lo(t){switch(t.tag){case 1:Bi(t.type)&&Fi();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:if(sa(),ji(),0!=(64&(e=t.effectTag)))throw o(Error(285));return t.effectTag=-2049&e|64,t;case 5:return ua(t),null;case 13:return Oi(da),2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 19:return Oi(da),null;case 4:return sa(),null;case 10:return Mr(t),null;default:return null}}function Io(t,e){return{value:t,source:e,stack:he(e)}}Co=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(20===n.tag)t.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ko=function(){},Po=function(t,e,n,i,a){var o=t.memoizedProps;if(o!==i){var s=e.stateNode;switch(aa(na.current),t=null,n){case"input":o=we(s,o),i=we(s,i),t=[];break;case"option":o=ei(s,o),i=ei(s,i),t=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),t=[];break;case"textarea":o=ii(s,o),i=ii(s,i),t=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(s.onclick=_i)}yi(n,i),s=n=void 0;var l=null;for(n in o)if(!i.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(s in u)u.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(d.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in i){var c=i[n];if(u=null!=o?o[n]:void 0,i.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(l||(l={}),l[s]=c[s])}else l||(t||(t=[]),t.push(n,l)),l=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(t=t||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(t=t||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(d.hasOwnProperty(n)?(null!=c&&xi(a,n),t||u===c||(t=[])):(t=t||[]).push(n,c))}l&&(t=t||[]).push("style",l),a=t,(e.updateQueue=a)&&To(e)}},Ao=function(t,e,n,i){n!==i&&To(e)};var No="function"==typeof WeakSet?WeakSet:Set;function Ro(t,e){var n=e.source,i=e.stack;null===i&&null!==n&&(i=he(n)),null!==n&&ce(n.type),e=e.value,null!==t&&1===t.tag&&ce(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function Do(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){$s(t,e)}else e.current=null}function zo(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&t)!==ma){var r=i.destroy;i.destroy=void 0,void 0!==r&&r()}(i.tag&e)!==ma&&(r=i.create,i.destroy=r()),i=i.next}while(i!==n)}}function Bo(t,e){switch("function"==typeof el&&el(t),t.tag){case 0:case 11:case 14:case 15:var n=t.updateQueue;if(null!==n&&null!==(n=n.lastEffect)){var i=n.next;fr(97<e?97:e,(function(){var e=i;do{var n=e.destroy;if(void 0!==n){var r=t;try{n()}catch(t){$s(r,t)}}e=e.next}while(e!==i)}))}break;case 1:Do(t),"function"==typeof(e=t.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){$s(t,e)}}(t,e);break;case 5:Do(t);break;case 4:Uo(t,e)}}function Fo(t,e){for(var n=t;;)if(Bo(n,e),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function jo(t){return 5===t.tag||3===t.tag||4===t.tag}function Vo(t){t:{for(var e=t.return;null!==e;){if(jo(e)){var n=e;break t}e=e.return}throw o(Error(160))}switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:e=e.containerInfo,i=!0;break;default:throw o(Error(161))}16&n.effectTag&&(fi(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||jo(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var r=t;;){var a=5===r.tag||6===r.tag;if(a||20===r.tag){var s=a?r.stateNode:r.stateNode.instance;if(n)if(i){var l=s;s=n,8===(a=e).nodeType?a.parentNode.insertBefore(l,s):a.insertBefore(l,s)}else e.insertBefore(s,n);else i?(8===(l=e).nodeType?(a=l.parentNode).insertBefore(s,l):(a=l).appendChild(s),null!=(l=l._reactRootContainer)||null!==a.onclick||(a.onclick=_i)):e.appendChild(s)}else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Uo(t,e){for(var n=t,i=!1,r=void 0,a=void 0;;){if(!i){i=n.return;t:for(;;){if(null===i)throw o(Error(160));switch(r=i.stateNode,i.tag){case 5:a=!1;break t;case 3:case 4:r=r.containerInfo,a=!0;break t}i=i.return}i=!0}if(5===n.tag||6===n.tag)if(Fo(n,e),a){var s=r,l=n.stateNode;8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)}else r.removeChild(n.stateNode);else if(20===n.tag)l=n.stateNode.instance,Fo(n,e),a?8===(s=r).nodeType?s.parentNode.removeChild(l):s.removeChild(l):r.removeChild(l);else if(4===n.tag){if(null!==n.child){r=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(Bo(n,e),null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;4===(n=n.return).tag&&(i=!1)}n.sibling.return=n.return,n=n.sibling}}function Ho(t,e){switch(e.tag){case 0:case 11:case 14:case 15:zo(va,ya,e);break;case 1:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps,r=null!==t?t.memoizedProps:i;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,null!==a){for(n[R]=i,"input"===t&&"radio"===i.type&&null!=i.name&&Ee(n,i),bi(t,r),e=bi(t,i),r=0;r<a.length;r+=2){var s=a[r],l=a[r+1];"style"===s?gi(n,l):"dangerouslySetInnerHTML"===s?hi(n,l):"children"===s?fi(n,l):xe(n,s,l,e)}switch(t){case"input":Me(n,i);break;case"textarea":ai(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(t=i.value)?ni(n,!!i.multiple,t,!1):e!==!!i.multiple&&(null!=i.defaultValue?ni(n,!!i.multiple,i.defaultValue,!0):ni(n,!!i.multiple,i.multiple?[]:"",!1))}}}break;case 6:if(null===e.stateNode)throw o(Error(162));e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(n=e,null===e.memoizedState?i=!1:(i=!0,n=e.child,ms=ur()),null!==n)t:for(t=n;;){if(5===t.tag)a=t.stateNode,i?"function"==typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=t.stateNode,r=null!=(r=t.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,a.style.display=mi("display",r));else if(6===t.tag)t.stateNode.nodeValue=i?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState){(a=t.child.sibling).return=t,t=a;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break t;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}Go(e);break;case 19:Go(e);break;case 17:case 20:break;default:throw o(Error(163))}}function Go(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new No),e.forEach((function(e){var i=Js.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}var Wo="function"==typeof WeakMap?WeakMap:Map;function qo(t,e,n){(n=Lr(n,null)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ys||(ys=!0,bs=i),Ro(t,e)},n}function Qo(t,e,n){(n=Lr(n,null)).tag=3;var i=t.type.getDerivedStateFromError;if("function"==typeof i){var r=e.value;n.payload=function(){return Ro(t,e),i(r)}}var a=t.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===xs?xs=new Set([this]):xs.add(this),Ro(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Yo=Math.ceil,Xo=qt.ReactCurrentDispatcher,$o=qt.ReactCurrentOwner,Zo=0,Jo=8,Ko=16,ts=32,es=0,ns=1,is=2,rs=3,as=4,os=Zo,ss=null,ls=null,us=0,cs=es,hs=1073741823,fs=1073741823,ds=null,ps=!1,ms=0,gs=500,vs=null,ys=!1,bs=null,xs=null,_s=!1,ws=null,Ss=90,Es=0,Ms=null,Ts=0,Cs=null,ks=0;function Ps(){return(os&(Ko|ts))!==Zo?1073741821-(ur()/10|0):0!==ks?ks:ks=1073741821-(ur()/10|0)}function As(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var i=cr();if(0==(4&e))return 99===i?1073741823:1073741822;if((os&Ko)!==Zo)return us;if(null!==n)t=1073741821-25*(1+((1073741821-t+(0|n.timeoutMs||5e3)/10)/25|0));else switch(i){case 99:t=1073741823;break;case 98:t=1073741821-10*(1+((1073741821-t+15)/10|0));break;case 97:case 96:t=1073741821-25*(1+((1073741821-t+500)/25|0));break;case 95:t=1;break;default:throw o(Error(326))}return null!==ss&&t===us&&--t,t}var Os=0;function Ls(t,e){if(50<Ts)throw Ts=0,Cs=null,o(Error(185));if(null!==(t=Is(t,e))){t.pingTime=0;var n=cr();if(1073741823===e)if((os&Jo)!==Zo&&(os&(Ko|ts))===Zo)for(var i=Vs(t,1073741823,!0);null!==i;)i=i(!0);else Ns(t,99,1073741823),os===Zo&&mr();else Ns(t,n,e);(4&os)===Zo||98!==n&&99!==n||(null===Ms?Ms=new Map([[t,e]]):(void 0===(n=Ms.get(t))||n>e)&&Ms.set(t,e))}}function Is(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var i=t.return,r=null;if(null===i&&3===t.tag)r=t.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<e&&(i.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(e>r.firstPendingTime&&(r.firstPendingTime=e),0===(t=r.lastPendingTime)||e<t)&&(r.lastPendingTime=e),r}function Ns(t,e,n){if(t.callbackExpirationTime<n){var i=t.callbackNode;null!==i&&i!==ir&&Qi(i),t.callbackExpirationTime=n,1073741823===n?t.callbackNode=pr(Rs.bind(null,t,Vs.bind(null,t,n))):(i=null,1!==n&&(i={timeout:10*(1073741821-n)-ur()}),t.callbackNode=dr(e,Rs.bind(null,t,Vs.bind(null,t,n)),i))}}function Rs(t,e,n){var i=t.callbackNode,r=null;try{return null!==(r=e(n))?Rs.bind(null,t,r):null}finally{null===r&&i===t.callbackNode&&(t.callbackNode=null,t.callbackExpirationTime=0)}}function Ds(){(os&(1|Ko|ts))===Zo&&(function(){if(null!==Ms){var t=Ms;Ms=null,t.forEach((function(t,e){pr(Vs.bind(null,e,t))})),mr()}}(),Qs())}function zs(t,e){var n=os;os|=1;try{return t(e)}finally{(os=n)===Zo&&mr()}}function Bs(t,e,n,i){var r=os;os|=4;try{return fr(98,t.bind(null,e,n,i))}finally{(os=r)===Zo&&mr()}}function Fs(t,e){var n=os;os&=-2,os|=Jo;try{return t(e)}finally{(os=n)===Zo&&mr()}}function js(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Ci(n)),null!==ls)for(n=ls.return;null!==n;){var i=n;switch(i.tag){case 1:var r=i.type.childContextTypes;null!=r&&Fi();break;case 3:sa(),ji();break;case 5:ua(i);break;case 4:sa();break;case 13:case 19:Oi(da);break;case 10:Mr(i)}n=n.return}ss=t,ls=al(t.current,null),us=e,cs=es,fs=hs=1073741823,ds=null,ps=!1}function Vs(t,e,n){if((os&(Ko|ts))!==Zo)throw o(Error(327));if(t.firstPendingTime<e)return null;if(n&&t.finishedExpirationTime===e)return Ws.bind(null,t);if(Qs(),t!==ss||e!==us)js(t,e);else if(cs===rs)if(ps)js(t,e);else{var i=t.lastPendingTime;if(i<e)return Vs.bind(null,t,i)}if(null!==ls){i=os,os|=Ko;var r=Xo.current;if(null===r&&(r=Za),Xo.current=Za,n){if(1073741823!==e){var a=Ps();if(a<e)return os=i,Sr(),Xo.current=r,Vs.bind(null,t,a)}}else ks=0;for(;;)try{if(n)for(;null!==ls;)ls=Hs(ls);else for(;null!==ls&&!Yi();)ls=Hs(ls);break}catch(n){if(Sr(),ja(),null===(a=ls)||null===a.return)throw js(t,e),os=i,n;t:{var s=t,l=a.return,u=a,c=n,h=us;if(u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var f=c,d=0!=(da.current&ha);c=l;do{var p;if((p=13===c.tag)&&(null!==c.memoizedState?p=!1:p=void 0!==(p=c.memoizedProps).fallback&&(!0!==p.unstable_avoidThisFallback||!d)),p){if(null===(l=c.updateQueue)?((l=new Set).add(f),c.updateQueue=l):l.add(f),0==(2&c.mode)){c.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((h=Lr(1073741823,null)).tag=2,Nr(u,h))),u.expirationTime=1073741823;break t}u=s,s=h,null===(d=u.pingCache)?(d=u.pingCache=new Wo,l=new Set,d.set(f,l)):void 0===(l=d.get(f))&&(l=new Set,d.set(f,l)),l.has(s)||(l.add(s),u=Zs.bind(null,u,f,s),f.then(u,u)),c.effectTag|=2048,c.expirationTime=h;break t}c=c.return}while(null!==c);c=Error((ce(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+he(u))}cs!==as&&(cs=ns),c=Io(c,u),u=l;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=h,Rr(u,h=qo(u,c,h));break t;case 1:if(f=c,s=u.type,l=u.stateNode,0==(64&u.effectTag)&&("function"==typeof s.getDerivedStateFromError||null!==l&&"function"==typeof l.componentDidCatch&&(null===xs||!xs.has(l)))){u.effectTag|=2048,u.expirationTime=h,Rr(u,h=Qo(u,f,h));break t}}u=u.return}while(null!==u)}ls=Gs(a)}if(os=i,Sr(),Xo.current=r,null!==ls)return Vs.bind(null,t,e)}if(t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,function(t,e){var n=t.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=e)&&(dr(97,(function(){return n._onComplete(),null})),!0)}(t,e))return null;switch(ss=null,cs){case es:throw o(Error(328));case ns:return(i=t.lastPendingTime)<e?Vs.bind(null,t,i):n?Ws.bind(null,t):(js(t,e),pr(Vs.bind(null,t,e)),null);case is:return 1073741823===hs&&!n&&10<(n=ms+gs-ur())?ps?(js(t,e),Vs.bind(null,t,e)):(i=t.lastPendingTime)<e?Vs.bind(null,t,i):(t.timeoutHandle=Ti(Ws.bind(null,t),n),null):Ws.bind(null,t);case rs:if(!n){if(ps)return js(t,e),Vs.bind(null,t,e);if((n=t.lastPendingTime)<e)return Vs.bind(null,t,n);if(1073741823!==fs?n=10*(1073741821-fs)-ur():1073741823===hs?n=0:(n=10*(1073741821-hs)-5e3,0>(n=(i=ur())-n)&&(n=0),(e=10*(1073741821-e)-i)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yo(n/1960))-n)&&(n=e)),10<n)return t.timeoutHandle=Ti(Ws.bind(null,t),n),null}return Ws.bind(null,t);case as:return!n&&1073741823!==hs&&null!==ds&&(i=hs,0>=(e=0|(r=ds).busyMinDurationMs)?e=0:(n=0|r.busyDelayMs,e=(i=ur()-(10*(1073741821-i)-(0|r.timeoutMs||5e3)))<=n?0:n+e-i),10<e)?(t.timeoutHandle=Ti(Ws.bind(null,t),e),null):Ws.bind(null,t);default:throw o(Error(329))}}function Us(t,e){t<hs&&1<t&&(hs=t),null!==e&&t<fs&&1<t&&(fs=t,ds=e)}function Hs(t){var e=Ks(t.alternate,t,us);return t.memoizedProps=t.pendingProps,null===e&&(e=Gs(t)),$o.current=null,e}function Gs(t){ls=t;do{var e=ls.alternate;if(t=ls.return,0==(1024&ls.effectTag)){t:{var n=e,i=us,a=(e=ls).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Bi(e.type)&&Fi();break;case 3:sa(),ji(),(i=e.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==n&&null!==n.child||(so(e),e.effectTag&=-3),ko(e);break;case 5:ua(e),i=aa(ra.current);var s=e.type;if(null!==n&&null!=e.stateNode)Po(n,e,s,a,i),n.ref!==e.ref&&(e.effectTag|=128);else if(a){var l=aa(na.current);if(so(e)){a=void 0,s=(n=e).stateNode;var u=n.type,c=n.memoizedProps;switch(s[N]=n,s[R]=c,u){case"iframe":case"object":case"embed":Rn("load",s);break;case"video":case"audio":for(var h=0;h<nt.length;h++)Rn(nt[h],s);break;case"source":Rn("error",s);break;case"img":case"image":case"link":Rn("error",s),Rn("load",s);break;case"form":Rn("reset",s),Rn("submit",s);break;case"details":Rn("toggle",s);break;case"input":Se(s,c),Rn("invalid",s),xi(i,"onChange");break;case"select":s._wrapperState={wasMultiple:!!c.multiple},Rn("invalid",s),xi(i,"onChange");break;case"textarea":ri(s,c),Rn("invalid",s),xi(i,"onChange")}for(a in yi(u,c),h=null,c)c.hasOwnProperty(a)&&(l=c[a],"children"===a?"string"==typeof l?s.textContent!==l&&(h=["children",l]):"number"==typeof l&&s.textContent!==""+l&&(h=["children",""+l]):d.hasOwnProperty(a)&&null!=l&&xi(i,a));switch(u){case"input":Gt(s),Te(s,c,!0);break;case"textarea":Gt(s),oi(s);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(s.onclick=_i)}i=h,n.updateQueue=i,null!==i&&To(e)}else{c=s,n=a,u=e,h=9===i.nodeType?i:i.ownerDocument,l===si.html&&(l=li(c)),l===si.html?"script"===c?((c=h.createElement("div")).innerHTML="<script><\/script>",h=c.removeChild(c.firstChild)):"string"==typeof n.is?h=h.createElement(c,{is:n.is}):(h=h.createElement(c),"select"===c&&(c=h,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):h=h.createElementNS(l,c),(c=h)[N]=u,c[R]=n,Co(n=c,e,!1,!1),u=n;var f=i,p=bi(s,a);switch(s){case"iframe":case"object":case"embed":Rn("load",u),i=a;break;case"video":case"audio":for(i=0;i<nt.length;i++)Rn(nt[i],u);i=a;break;case"source":Rn("error",u),i=a;break;case"img":case"image":case"link":Rn("error",u),Rn("load",u),i=a;break;case"form":Rn("reset",u),Rn("submit",u),i=a;break;case"details":Rn("toggle",u),i=a;break;case"input":Se(u,a),i=we(u,a),Rn("invalid",u),xi(f,"onChange");break;case"option":i=ei(u,a);break;case"select":u._wrapperState={wasMultiple:!!a.multiple},i=r({},a,{value:void 0}),Rn("invalid",u),xi(f,"onChange");break;case"textarea":ri(u,a),i=ii(u,a),Rn("invalid",u),xi(f,"onChange");break;default:i=a}yi(s,i),c=void 0,h=s,l=u;var m=i;for(c in m)if(m.hasOwnProperty(c)){var g=m[c];"style"===c?gi(l,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&hi(l,g):"children"===c?"string"==typeof g?("textarea"!==h||""!==g)&&fi(l,g):"number"==typeof g&&fi(l,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(d.hasOwnProperty(c)?null!=g&&xi(f,c):null!=g&&xe(l,c,g,p))}switch(s){case"input":Gt(u),Te(u,a,!1);break;case"textarea":Gt(u),oi(u);break;case"option":null!=a.value&&u.setAttribute("value",""+_e(a.value));break;case"select":i=u,u=a,i.multiple=!!u.multiple,null!=(c=u.value)?ni(i,!!u.multiple,c,!1):null!=u.defaultValue&&ni(i,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof i.onClick&&(u.onclick=_i)}Ei(s,a)&&To(e),e.stateNode=n}null!==e.ref&&(e.effectTag|=128)}else if(null===e.stateNode)throw o(Error(166));break;case 6:if(n&&null!=e.stateNode)Ao(n,e,n.memoizedProps,a);else{if("string"!=typeof a&&null===e.stateNode)throw o(Error(166));n=aa(ra.current),aa(na.current),so(e)?(i=e.stateNode,n=e.memoizedProps,i[N]=e,i.nodeValue!==n&&To(e)):(i=e,(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[N]=e,i.stateNode=n)}break;case 11:break;case 13:if(Oi(da),a=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=i;break t}i=null!==a,a=!1,null===n?so(e):(a=null!==(s=n.memoizedState),i||null===s||null!==(s=n.child.sibling)&&(null!==(u=e.firstEffect)?(e.firstEffect=s,s.nextEffect=u):(e.firstEffect=e.lastEffect=s,s.nextEffect=null),s.effectTag=8)),i&&!a&&0!=(2&e.mode)&&(null===n&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(da.current&ha)?cs===es&&(cs=is):cs!==es&&cs!==is||(cs=rs)),(i||a)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:sa(),ko(e);break;case 10:Mr(e);break;case 9:case 14:break;case 17:Bi(e.type)&&Fi();break;case 18:break;case 19:if(Oi(da),null===(a=e.memoizedState))break;if(s=0!=(64&e.effectTag),null===(u=a.rendering)){if(s)Oo(a,!1);else if(cs!==es||null!==n&&0!=(64&n.effectTag))for(n=e.child;null!==n;){if(null!==(u=pa(n))){for(e.effectTag|=64,Oo(a,!1),null!==(n=u.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),e.firstEffect=e.lastEffect=null,n=e.child;null!==n;)s=i,(a=n).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childExpirationTime=0,a.expirationTime=s,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=u.childExpirationTime,a.expirationTime=u.expirationTime,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,s=u.dependencies,a.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;Li(da,da.current&ca|fa),e=e.child;break t}n=n.sibling}}else{if(!s)if(null!==(n=pa(u))){if(e.effectTag|=64,s=!0,Oo(a,!0),null===a.tail&&"hidden"===a.tailMode){null!==(i=n.updateQueue)&&(e.updateQueue=i,e.effectTag|=4),null!==(e=e.lastEffect=a.lastEffect)&&(e.nextEffect=null);break}}else ur()>a.tailExpiration&&1<i&&(e.effectTag|=64,s=!0,Oo(a,!1),e.expirationTime=e.childExpirationTime=i-1);a.isBackwards?(u.sibling=e.child,e.child=u):(null!==(i=a.last)?i.sibling=u:e.child=u,a.last=u)}if(null!==a.tail){0===a.tailExpiration&&(a.tailExpiration=ur()+500),i=a.tail,a.rendering=i,a.tail=i.sibling,a.lastEffect=e.lastEffect,i.sibling=null,n=da.current,Li(da,n=s?n&ca|fa:n&ca),e=i;break t}break;case 20:break;default:throw o(Error(156))}e=null}if(i=ls,1===us||1!==i.childExpirationTime){for(n=0,a=i.child;null!==a;)(s=a.expirationTime)>n&&(n=s),(u=a.childExpirationTime)>n&&(n=u),a=a.sibling;i.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(1024&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=ls.firstEffect),null!==ls.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=ls.firstEffect),t.lastEffect=ls.lastEffect),1<ls.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=ls:t.firstEffect=ls,t.lastEffect=ls))}else{if(null!==(e=Lo(ls)))return e.effectTag&=1023,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=1024)}if(null!==(e=ls.sibling))return e;ls=t}while(null!==ls);return cs===es&&(cs=as),null}function Ws(t){var e=cr();return fr(99,qs.bind(null,t,e)),null!==ws&&dr(97,(function(){return Qs(),null})),null}function qs(t,e){if(Qs(),(os&(Ko|ts))!==Zo)throw o(Error(327));var n=t.finishedWork,i=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw o(Error(177));t.callbackNode=null,t.callbackExpirationTime=0;var r=n.expirationTime,a=n.childExpirationTime;if(r=a>r?a:r,t.firstPendingTime=r,r<t.lastPendingTime&&(t.lastPendingTime=r),t===ss&&(ls=ss=null,us=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){a=os,os|=ts,$o.current=null,wi=Nn;var s=Wn();if(qn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{var u=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(t){l=null;break t}var f=0,d=-1,p=-1,m=0,g=0,v=s,y=null;e:for(;;){for(var b;v!==l||0!==c&&3!==v.nodeType||(d=f+c),v!==h||0!==u&&3!==v.nodeType||(p=f+u),3===v.nodeType&&(f+=v.nodeValue.length),null!==(b=v.firstChild);)y=v,v=b;for(;;){if(v===s)break e;if(y===l&&++m===c&&(d=f),y===h&&++g===u&&(p=f),null!==(b=v.nextSibling))break;y=(v=y).parentNode}v=b}l=-1===d||-1===p?null:{start:d,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;Si={focusedElem:s,selectionRange:l},Nn=!1,vs=r;do{try{for(;null!==vs;){if(0!=(256&vs.effectTag)){var x=vs.alternate;switch((s=vs).tag){case 0:case 11:case 15:zo(ga,ma,s);break;case 1:if(256&s.effectTag&&null!==x){var _=x.memoizedProps,w=x.memoizedState,S=s.stateNode,E=S.getSnapshotBeforeUpdate(s.elementType===s.type?_:yr(s.type,_),w);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:case 5:case 6:case 4:case 17:break;default:throw o(Error(163))}}vs=vs.nextEffect}}catch(t){if(null===vs)throw o(Error(330));$s(vs,t),vs=vs.nextEffect}}while(null!==vs);vs=r;do{try{for(x=e;null!==vs;){var M=vs.effectTag;if(16&M&&fi(vs.stateNode,""),128&M){var T=vs.alternate;if(null!==T){var C=T.ref;null!==C&&("function"==typeof C?C(null):C.current=null)}}switch(14&M){case 2:Vo(vs),vs.effectTag&=-3;break;case 6:Vo(vs),vs.effectTag&=-3,Ho(vs.alternate,vs);break;case 4:Ho(vs.alternate,vs);break;case 8:Uo(_=vs,x),_.return=null,_.child=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null;var k=_.alternate;null!==k&&(k.return=null,k.child=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null)}vs=vs.nextEffect}}catch(t){if(null===vs)throw o(Error(330));$s(vs,t),vs=vs.nextEffect}}while(null!==vs);if(C=Si,T=Wn(),M=C.focusedElem,x=C.selectionRange,T!==M&&M&&M.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(M.ownerDocument.documentElement,M)){null!==x&&qn(M)&&(T=x.start,void 0===(C=x.end)&&(C=T),"selectionStart"in M?(M.selectionStart=T,M.selectionEnd=Math.min(C,M.value.length)):(C=(T=M.ownerDocument||document)&&T.defaultView||window).getSelection&&(C=C.getSelection(),_=M.textContent.length,k=Math.min(x.start,_),x=void 0===x.end?k:Math.min(x.end,_),!C.extend&&k>x&&(_=x,x=k,k=_),_=Gn(M,k),w=Gn(M,x),_&&w&&(1!==C.rangeCount||C.anchorNode!==_.node||C.anchorOffset!==_.offset||C.focusNode!==w.node||C.focusOffset!==w.offset)&&((T=T.createRange()).setStart(_.node,_.offset),C.removeAllRanges(),k>x?(C.addRange(T),C.extend(w.node,w.offset)):(T.setEnd(w.node,w.offset),C.addRange(T))))),T=[];for(C=M;C=C.parentNode;)1===C.nodeType&&T.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"==typeof M.focus&&M.focus(),M=0;M<T.length;M++)(C=T[M]).element.scrollLeft=C.left,C.element.scrollTop=C.top}Si=null,Nn=!!wi,wi=null,t.current=n,vs=r;do{try{for(M=i;null!==vs;){var P=vs.effectTag;if(36&P){var A=vs.alternate;switch(C=M,(T=vs).tag){case 0:case 11:case 15:zo(ba,xa,T);break;case 1:var O=T.stateNode;if(4&T.effectTag)if(null===A)O.componentDidMount();else{var L=T.elementType===T.type?A.memoizedProps:yr(T.type,A.memoizedProps);O.componentDidUpdate(L,A.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var I=T.updateQueue;null!==I&&Fr(0,I,O);break;case 3:var N=T.updateQueue;if(null!==N){if(k=null,null!==T.child)switch(T.child.tag){case 5:k=T.child.stateNode;break;case 1:k=T.child.stateNode}Fr(0,N,k)}break;case 5:var R=T.stateNode;null===A&&4&T.effectTag&&(C=R,Ei(T.type,T.memoizedProps)&&C.focus());break;case 6:case 4:case 12:break;case 13:case 19:case 17:case 20:break;default:throw o(Error(163))}}if(128&P){var D=vs.ref;if(null!==D){var z=vs.stateNode;switch(vs.tag){case 5:var B=z;break;default:B=z}"function"==typeof D?D(B):D.current=B}}512&P&&(_s=!0),vs=vs.nextEffect}}catch(t){if(null===vs)throw o(Error(330));$s(vs,t),vs=vs.nextEffect}}while(null!==vs);vs=null,rr(),os=a}else t.current=n;if(_s)_s=!1,ws=t,Es=i,Ss=e;else for(vs=r;null!==vs;)e=vs.nextEffect,vs.nextEffect=null,vs=e;if(0!==(e=t.firstPendingTime)?Ns(t,P=vr(P=Ps(),e),e):xs=null,"function"==typeof tl&&tl(n.stateNode,i),1073741823===e?t===Cs?Ts++:(Ts=0,Cs=t):Ts=0,ys)throw ys=!1,t=bs,bs=null,t;return(os&Jo)!==Zo?null:(mr(),null)}function Qs(){if(null===ws)return!1;var t=ws,e=Es,n=Ss;return ws=null,Es=0,Ss=90,fr(97<n?97:n,Ys.bind(null,t,e))}function Ys(t){if((os&(Ko|ts))!==Zo)throw o(Error(331));var e=os;for(os|=ts,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:zo(wa,ma,n),zo(ma,_a,n)}}catch(e){if(null===t)throw o(Error(330));$s(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return os=e,mr(),!0}function Xs(t,e,n){Nr(t,e=qo(t,e=Io(n,e),1073741823)),null!==(t=Is(t,1073741823))&&Ns(t,99,1073741823)}function $s(t,e){if(3===t.tag)Xs(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Xs(n,t,e);break}if(1===n.tag){var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===xs||!xs.has(i))){Nr(n,t=Qo(n,t=Io(e,t),1073741823)),null!==(n=Is(n,1073741823))&&Ns(n,99,1073741823);break}}n=n.return}}function Zs(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),ss===t&&us===n?cs===rs||cs===is&&1073741823===hs&&ur()-ms<gs?js(t,us):ps=!0:t.lastPendingTime<n||(0!==(e=t.pingTime)&&e<n||(t.pingTime=n,t.finishedExpirationTime===n&&(t.finishedExpirationTime=0,t.finishedWork=null),Ns(t,e=vr(e=Ps(),n),n)))}function Js(t,e){var n=t.stateNode;null!==n&&n.delete(e),n=vr(n=Ps(),e=As(n,t,null)),null!==(t=Is(t,e))&&Ns(t,n,e)}var Ks=void 0;Ks=function(t,e,n){var i=e.expirationTime;if(null!==t){var r=e.pendingProps;if(t.memoizedProps!==r||Ri.current)co=!0;else if(i<n){switch(co=!1,e.tag){case 3:xo(e),lo();break;case 5:if(la(e),4&e.mode&&1!==n&&r.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:Bi(e.type)&&Hi(e);break;case 4:oa(e,e.stateNode.containerInfo);break;case 10:Er(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(i=e.child.childExpirationTime)&&i>=n?wo(t,e,n):(Li(da,da.current&ca),null!==(e=Mo(t,e,n))?e.sibling:null);Li(da,da.current&ca);break;case 19:if(i=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(i)return Eo(t,e,n);e.effectTag|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null),Li(da,da.current),!i)return null}return Mo(t,e,n)}}else co=!1;switch(e.expirationTime=0,e.tag){case 2:if(i=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,r=zi(e,Ni.current),Cr(e,n),r=Fa(null,e,i,t,r,n),e.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(e.tag=1,ja(),Bi(i)){var a=!0;Hi(e)}else a=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null;var s=i.getDerivedStateFromProps;"function"==typeof s&&Hr(e,i,s,t),r.updater=Gr,e.stateNode=r,r._reactInternalFiber=e,Yr(e,i,t,n),e=bo(null,e,i,!0,a,n)}else e.tag=0,ho(null,e,r,n),e=e.child;return e;case 16:switch(r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,r=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:switch(t._status=0,(e=(e=t._ctor)()).then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)})),t._status){case 1:return t._result;case 2:throw t._result}throw t._result=e,e}}(r),e.type=r,a=e.tag=function(t){if("function"==typeof t)return rl(t)?1:0;if(null!=t){if((t=t.$$typeof)===ie)return 11;if(t===oe)return 14}return 2}(r),t=yr(r,t),a){case 0:e=vo(null,e,r,t,n);break;case 1:e=yo(null,e,r,t,n);break;case 11:e=fo(null,e,r,t,n);break;case 14:e=po(null,e,r,yr(r.type,t),i,n);break;default:throw o(Error(306),r,"")}return e;case 0:return i=e.type,r=e.pendingProps,vo(t,e,i,r=e.elementType===i?r:yr(i,r),n);case 1:return i=e.type,r=e.pendingProps,yo(t,e,i,r=e.elementType===i?r:yr(i,r),n);case 3:if(xo(e),null===(i=e.updateQueue))throw o(Error(282));return r=null!==(r=e.memoizedState)?r.element:null,Br(e,i,e.pendingProps,null,n),(i=e.memoizedState.element)===r?(lo(),e=Mo(t,e,n)):(r=e.stateNode,(r=(null===t||null===t.child)&&r.hydrate)&&(eo=ki(e.stateNode.containerInfo.firstChild),to=e,r=no=!0),r?(e.effectTag|=2,e.child=ta(e,null,i,n)):(ho(t,e,i,n),lo()),e=e.child),e;case 5:return la(e),null===t&&ao(e),i=e.type,r=e.pendingProps,a=null!==t?t.memoizedProps:null,s=r.children,Mi(i,r)?s=null:null!==a&&Mi(i,a)&&(e.effectTag|=16),go(t,e),4&e.mode&&1!==n&&r.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(ho(t,e,s,n),e=e.child),e;case 6:return null===t&&ao(e),null;case 13:return wo(t,e,n);case 4:return oa(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Kr(e,null,i,n):ho(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,fo(t,e,i,r=e.elementType===i?r:yr(i,r),n);case 7:return ho(t,e,e.pendingProps,n),e.child;case 8:case 12:return ho(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,Er(e,a=r.value),null!==s){var l=s.value;if(0===(a=en(l,a)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(l,a):1073741823))){if(s.children===r.children&&!Ri.current){e=Mo(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===i&&0!=(c.observedBits&a)){1===l.tag&&((c=Lr(n,null)).tag=2,Nr(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),Tr(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===e.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===e){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}ho(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=(a=e.pendingProps).children,Cr(e,n),i=i(r=kr(r,a.unstable_observedBits)),e.effectTag|=1,ho(t,e,i,n),e.child;case 14:return a=yr(r=e.type,e.pendingProps),po(t,e,r,a=yr(r.type,a),i,n);case 15:return mo(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:yr(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Bi(i)?(t=!0,Hi(e)):t=!1,Cr(e,n),qr(e,i,r),Yr(e,i,r,n),bo(null,e,i,!0,t,n);case 19:return Eo(t,e,n)}throw o(Error(156))};var tl=null,el=null;function nl(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function il(t,e,n,i){return new nl(t,e,n,i)}function rl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function al(t,e){var n=t.alternate;return null===n?((n=il(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ol(t,e,n,i,r,a){var s=2;if(i=t,"function"==typeof t)rl(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case Zt:return sl(n.children,r,a,e);case ne:s=8,r|=7;break;case Jt:s=8,r|=1;break;case Kt:return(t=il(12,n,e,8|r)).elementType=Kt,t.type=Kt,t.expirationTime=a,t;case re:return(t=il(13,n,e,r)).type=re,t.elementType=re,t.expirationTime=a,t;case ae:return(t=il(19,n,e,r)).elementType=ae,t.expirationTime=a,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case te:s=10;break t;case ee:s=9;break t;case ie:s=11;break t;case oe:s=14;break t;case se:s=16,i=null;break t}throw o(Error(130),null==t?t:typeof t,"")}return(e=il(s,n,e,r)).elementType=t,e.type=i,e.expirationTime=a,e}function sl(t,e,n,i){return(t=il(7,t,i,e)).expirationTime=n,t}function ll(t,e,n){return(t=il(6,t,null,e)).expirationTime=n,t}function ul(t,e,n){return(e=il(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cl(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function hl(t,e,n){return t=new cl(t,e,n),e=il(3,null,null,2===e?7:1===e?3:0),t.current=e,e.stateNode=t}function fl(t,e,n,i,r,a){var s=e.current;t:if(n){e:{if(2!==on(n=n._reactInternalFiber)||1!==n.tag)throw o(Error(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Bi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw o(Error(171))}if(1===n.tag){var u=n.type;if(Bi(u)){n=Ui(n,u,l);break t}}n=l}else n=Ii;return null===e.context?e.context=n:e.pendingContext=n,e=a,(r=Lr(i,r)).payload={element:t},null!==(e=void 0===e?null:e)&&(r.callback=e),Nr(s,r),Ls(s,i),i}function dl(t,e,n,i){var r=e.current,a=Ps(),o=Vr.suspense;return fl(t,e,n,r=As(a,r,o),o,i)}function pl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function ml(t){var e=1073741821-25*(1+((1073741821-Ps()+500)/25|0));e<=Os&&--e,this._expirationTime=Os=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function gl(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function vl(t,e,n){this._internalRoot=hl(t,e,n)}function yl(t,e){this._internalRoot=hl(t,2,e)}function bl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function xl(t,e,n,i,r){var a=n._reactRootContainer,o=void 0;if(a){if(o=a._internalRoot,"function"==typeof r){var s=r;r=function(){var t=pl(o);s.call(t)}}dl(e,o,t,r)}else{if(a=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new vl(t,0,e)}(n,i),o=a._internalRoot,"function"==typeof r){var l=r;r=function(){var t=pl(o);l.call(t)}}Fs((function(){dl(e,o,t,r)}))}return pl(o)}function _l(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!bl(e))throw o(Error(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$t,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Ct=function(t,e,n){switch(e){case"input":if(Me(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=F(i);if(!r)throw o(Error(90));Wt(i),Me(i,r)}}}break;case"textarea":ai(t,n);break;case"select":null!=(e=n.value)&&ni(t,!!n.multiple,e,!1)}},ml.prototype.render=function(t){if(!this._defer)throw o(Error(250));this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,i=new gl;return fl(t,e,null,n,null,i._onCommit),i},ml.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},ml.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(!this._defer||null===e)throw o(Error(251));if(this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var i=null,r=e;r!==this;)i=r,r=r._next;if(null===i)throw o(Error(251));i._next=r._next,this._next=e,t.firstBatch=this}if(this._defer=!1,e=n,(os&(Ko|ts))!==Zo)throw o(Error(253));pr(Vs.bind(null,t,e)),mr(),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},ml.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},gl.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},gl.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];if("function"!=typeof n)throw o(Error(191),n);n()}}},yl.prototype.render=vl.prototype.render=function(t,e){var n=this._internalRoot,i=new gl;return null!==(e=void 0===e?null:e)&&i.then(e),dl(t,n,null,i._onCommit),i},yl.prototype.unmount=vl.prototype.unmount=function(t){var e=this._internalRoot,n=new gl;return null!==(t=void 0===t?null:t)&&n.then(t),dl(null,e,null,n._onCommit),n},yl.prototype.createBatch=function(){var t=new ml(this),e=t._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=t,t._next=null;else{for(n=null;null!==i&&i._expirationTime>=e;)n=i,i=i._next;t._next=i,null!==n&&(n._next=t)}return t},It=zs,Nt=Bs,Rt=Ds,Dt=function(t,e){var n=os;os|=2;try{return t(e)}finally{(os=n)===Zo&&mr()}};var wl,Sl,El={createPortal:_l,findDOMNode:function(t){if(null==t)t=null;else if(1!==t.nodeType){var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw o(Error(188));throw o(Error(268),Object.keys(t))}t=null===(t=ln(e))?null:t.stateNode}return t},hydrate:function(t,e,n){if(!bl(e))throw o(Error(200));return xl(null,t,e,!0,n)},render:function(t,e,n){if(!bl(e))throw o(Error(200));return xl(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){if(!bl(n))throw o(Error(200));if(null==t||void 0===t._reactInternalFiber)throw o(Error(38));return xl(t,e,n,!1,i)},unmountComponentAtNode:function(t){if(!bl(t))throw o(Error(40));return!!t._reactRootContainer&&(Fs((function(){xl(null,null,t,!1,(function(){t._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return _l.apply(void 0,arguments)},unstable_batchedUpdates:zs,unstable_interactiveUpdates:function(t,e,n,i){return Ds(),Bs(t,e,n,i)},unstable_discreteUpdates:Bs,unstable_flushDiscreteUpdates:Ds,flushSync:function(t,e){if((os&(Ko|ts))!==Zo)throw o(Error(187));var n=os;os|=1;try{return fr(99,t.bind(null,e))}finally{os=n,mr()}},unstable_createRoot:function(t,e){if(!bl(t))throw o(Error(299),"unstable_createRoot");return new yl(t,null!=e&&!0===e.hydrate)},unstable_createSyncRoot:function(t,e){if(!bl(t))throw o(Error(299),"unstable_createRoot");return new vl(t,1,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=os;os|=1;try{fr(99,t)}finally{(os=e)===Zo&&mr()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[z,B,F,O.injectEventPluginsByName,f,W,function(t){C(t,G)},Ot,Lt,Fn,A,Qs,{current:!1}]}};Sl=(wl={findFiberByHostInstance:D,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);tl=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},el=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(r({},wl,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ln(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Sl?Sl(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var Ml={default:El},Tl=Ml&&El||Ml;t.exports=Tl.default||Tl},function(t,e,n){"use strict";t.exports=n(111)},function(t,e,n){"use strict";
/** @license React v0.15.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(e,"__esModule",{value:!0});var i=void 0,r=void 0,a=void 0,o=void 0,s=void 0;if(e.unstable_now=void 0,e.unstable_forceFrameRate=void 0,"undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var t=e.unstable_now();l(!0,t),l=null}catch(t){throw setTimeout(c,0),t}};e.unstable_now=function(){return Date.now()},i=function(t){null!==l?setTimeout(i,0,t):(l=t,setTimeout(c,0))},r=function(t,e){u=setTimeout(t,e)},a=function(){clearTimeout(u)},o=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,f=window.Date,d=window.setTimeout,p=window.clearTimeout,m=window.requestAnimationFrame,g=window.cancelAnimationFrame;"undefined"!=typeof console&&("function"!=typeof m&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),e.unstable_now="object"==typeof h&&"function"==typeof h.now?function(){return h.now()}:function(){return f.now()};var v=!1,y=null,b=-1,x=-1,_=33.33,w=-1,S=-1,E=0,M=!1;o=function(){return e.unstable_now()>=E},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<t?(_=Math.floor(1e3/t),M=!0):(_=33.33,M=!1)};var T=function(){if(null!==y){var t=e.unstable_now(),n=0<E-t;try{y(n,t)||(y=null)}catch(t){throw k.postMessage(null),t}}},C=new MessageChannel,k=C.port2;C.port1.onmessage=T;var P=function(t){if(null===y)S=w=-1,v=!1;else{v=!0,m((function(t){p(b),P(t)}));var n=function(){E=e.unstable_now()+_/2,T(),b=d(n,3*_)};if(b=d(n,3*_),-1!==w&&.1<t-w){var i=t-w;!M&&-1!==S&&i<_&&S<_&&(8.33>(_=i<S?S:i)&&(_=8.33)),S=i}w=t,E=t+_,k.postMessage(null)}};i=function(t){y=t,v||(v=!0,m((function(t){P(t)})))},r=function(t,n){x=d((function(){t(e.unstable_now())}),n)},a=function(){p(x),x=-1}}var A=null,O=null,L=null,I=3,N=!1,R=!1,D=!1;function z(t,e){var n=t.next;if(n===t)A=null;else{t===A&&(A=n);var i=t.previous;i.next=n,n.previous=i}t.next=t.previous=null,n=t.callback,i=I;var r=L;I=t.priorityLevel,L=t;try{var a=t.expirationTime<=e;switch(I){case 1:var o=n(a);break;case 2:case 3:case 4:o=n(a);break;case 5:o=n(a)}}catch(t){throw t}finally{I=i,L=r}if("function"==typeof o)if(e=t.expirationTime,t.callback=o,null===A)A=t.next=t.previous=t;else{o=null,a=A;do{if(e<=a.expirationTime){o=a;break}a=a.next}while(a!==A);null===o?o=A:o===A&&(A=t),(e=o.previous).next=o.previous=t,t.next=o,t.previous=e}}function B(t){if(null!==O&&O.startTime<=t)do{var e=O,n=e.next;if(e===n)O=null;else{O=n;var i=e.previous;i.next=n,n.previous=i}e.next=e.previous=null,U(e,e.expirationTime)}while(null!==O&&O.startTime<=t)}function F(t){D=!1,B(t),R||(null!==A?(R=!0,i(j)):null!==O&&r(F,O.startTime-t))}function j(t,n){R=!1,D&&(D=!1,a()),B(n),N=!0;try{if(t){if(null!==A)do{z(A,n),B(n=e.unstable_now())}while(null!==A&&!o())}else for(;null!==A&&A.expirationTime<=n;)z(A,n),B(n=e.unstable_now());return null!==A||(null!==O&&r(F,O.startTime-n),!1)}finally{N=!1}}function V(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function U(t,e){if(null===A)A=t.next=t.previous=t;else{var n=null,i=A;do{if(e<i.expirationTime){n=i;break}i=i.next}while(i!==A);null===n?n=A:n===A&&(A=t),(e=n.previous).next=n.previous=t,t.next=n,t.previous=e}}var H=s;e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_scheduleCallback=function(t,n,o){var s=e.unstable_now();if("object"==typeof o&&null!==o){var l=o.delay;l="number"==typeof l&&0<l?s+l:s,o="number"==typeof o.timeout?o.timeout:V(t)}else o=V(t),l=s;if(t={callback:n,priorityLevel:t,startTime:l,expirationTime:o=l+o,next:null,previous:null},l>s){if(o=l,null===O)O=t.next=t.previous=t;else{n=null;var u=O;do{if(o<u.startTime){n=u;break}u=u.next}while(u!==O);null===n?n=O:n===O&&(O=t),(o=n.previous).next=n.previous=t,t.next=n,t.previous=o}null===A&&O===t&&(D?a():D=!0,r(F,l-s))}else U(t,o),R||N||(R=!0,i(j));return t},e.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(t===e)t===A?A=null:t===O&&(O=null);else{t===A?A=e:t===O&&(O=e);var n=t.previous;n.next=e,e.previous=n}t.next=t.previous=null}},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_shouldYield=function(){var t=e.unstable_now();return B(t),null!==L&&null!==A&&A.startTime<=t&&A.expirationTime<L.expirationTime||o()},e.unstable_requestPaint=H,e.unstable_continueExecution=function(){R||N||(R=!0,i(j))},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return A}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=c(n(113)),o=c(n(117)),s=c(n(293)),l=c(n(309)),u=c(n(44));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={menu:"visualization"},t.selectMainView(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;u.default.on("selectMenu",(function(e){t.setState({menu:e}),t.selectMainView()}))}},{key:"selectMainView",value:function(){switch(this.state.menu){case"visualization":$("body").css("overflow-y","hidden");break;case"feature":case"comment":$("body").css("overflow-y","scroll")}}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(a.default,null),r.default.createElement("div",{className:"maincontainer",id:"visualization",style:{display:"visualization"===this.state.menu?"block":"none"}},r.default.createElement(o.default,null)),r.default.createElement("div",{className:"maincontainer",id:"featureExtraction",style:{display:"feature"===this.state.menu?"block":"none"}},r.default.createElement(s.default,null)),r.default.createElement("div",{className:"maincontainer",id:"fuserComments",style:{display:"comment"===this.state.menu?"block":"none"}},r.default.createElement(l.default,null)))}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(66)),o=s(n(44));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.menu="Visualization",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;o.default.on("selectMenu",(function(e){t.menu=e}))}},{key:"componentDidMount",value:function(){$("ul[id*=mainMenuList] li").click((function(){a.selectMenu($(this).attr("value"))}))}},{key:"render",value:function(){return r.default.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",id:"appHeader"},r.default.createElement("a",{className:"navbar-brand",href:"#"},"TimeTubes"),r.default.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},r.default.createElement("span",{className:"navbar-toggler-icon"})),r.default.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor01"},r.default.createElement("ul",{className:"navbar-nav mr-auto",id:"mainMenuList"},r.default.createElement("li",{className:"nav-item mainMenu",value:"about"},r.default.createElement("label",{className:"nav-link menuLabel"},"About")),r.default.createElement("li",{className:"nav-item mainMenu",value:"visualization"},r.default.createElement("label",{className:"nav-link menuLabel"},"Visualization")),r.default.createElement("li",{className:"nav-item mainMenu",value:"feature"},r.default.createElement("label",{className:"nav-link menuLabel"},"Feature Extraction")),r.default.createElement("li",{className:"nav-item mainMenu",value:"comment"},r.default.createElement("label",{className:"nav-link menuLabel"},"Comment")),r.default.createElement("li",{className:"nav-item mainMenu",value:"contact"},r.default.createElement("label",{className:"nav-link menuLabel"},"Contact")))))}}]),e}(r.default.Component);e.default=l},function(t,e,n){t.exports.Dispatcher=n(115)},function(t,e,n){"use strict";e.__esModule=!0;var i=n(116),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(t){var e="ID_"+this._lastID++;return this._callbacks[e]=t,e},t.prototype.unregister=function(t){this._callbacks[t]||i(!1),delete this._callbacks[t]},t.prototype.waitFor=function(t){this._isDispatching||i(!1);for(var e=0;e<t.length;e++){var n=t[e];this._isPending[n]?this._isHandled[n]||i(!1):(this._callbacks[n]||i(!1),this._invokeCallback(n))}},t.prototype.dispatch=function(t){this._isDispatching&&i(!1),this._startDispatching(t);try{for(var e in this._callbacks)this._isPending[e]||this._invokeCallback(e)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},t.prototype._startDispatching=function(t){for(var e in this._callbacks)this._isPending[e]=!1,this._isHandled[e]=!1;this._pendingPayload=t,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();t.exports=r},function(t,e,n){"use strict";var i=function(t){};t.exports=function(t,e,n,r,a,o,s,l){if(i(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,s,l],h=0;(u=new Error(e.replace(/%s/g,(function(){return c[h++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(0)),a=l(n(118)),o=l(n(119)),s=l(n(3));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={data:s.default.getAllData(),width:$(window).width(),heightTT:$(window).height()/2,heightSP:$(window).height()/2},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;s.default.on("upload",(function(){t.setState({data:s.default.getAllData(),width:$(window).width()/s.default.getDataNum()})}))}},{key:"collapseSidebar",value:function(){$("#Controllers").toggle("slow")}},{key:"collapseFeature",value:function(){$("#Feature").toggle("slow")}},{key:"render",value:function(){var t=this.state.data,e=this.state.width,n=this.state.heightTT,i=this.state.heightSP,l=s.default.getDataNum();if(l>0){e=l<=3?window.innerWidth/l:Math.ceil(window.innerWidth/3);var u=$(window).height()-$("#appHeader").outerHeight()-$("#tubeControllers").outerHeight();n=Math.ceil(.6*u)+100,i=u-n}var c=t.map((function(t){return r.default.createElement(o.default,{key:t.id,id:t.id,data:t.data,width:e,heightTT:n,heightSP:i})}));return r.default.createElement("div",{className:"contents",id:"mainVisArea"},r.default.createElement(a.default,null),r.default.createElement("div",{id:"dataColumns",className:"container",style:{display:"inline-block",maxWidth:"100%",width:"100vw",padding:"unset",overflowX:"scroll",overflowY:"hidden"}},r.default.createElement("div",{style:{margin:"unset"}},c)))}}]),e}(r.default.Component);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=u(n(17)),o=u(n(29)),s=c(n(11)),l=c(n(3));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={data:l.default.getAllData(),fileType:"csv",grid:!0,label:!0,axis:!0,plot:!0,comment:!0,clip:!0,shade:!0,lock:!1,multiOptions:!1},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;l.default.on("upload",(function(){t.setState({data:l.default.getAllData()}),document.getElementsByClassName("TimeTubes").length>1&&t.setState({multiOptions:!0}),$("#fileInputPanel").css("visibility","hidden")}))}},{key:"componentDidMount",value:function(){this.setAverageSlider()}},{key:"setAverageSlider",value:function(){var t=$("#averageSliderVal");$("#averageSlider").slider({range:"min",value:0,min:0,max:200,slide:function(e,n){t.css("display","initial"),t.val(n.value+" days");var i=$("#averageSlider").slider("option","min"),r=$("#averageSlider").slider("option","max")-i,o=$("#averageSlider").width()*(n.value-i)/r-10;t.css("left",o+"px"),a.updateAveragePeriod(n.value)},stop:function(){t.css("display","none")}})}},{key:"changeFileType",value:function(){var t=$("input[name=fileType]:checked").val();this.setState({fileType:t})}},{key:"resetCamera",value:function(){this.getSelectedIDs().forEach((function(t){a.resetCamera(t)}))}},{key:"switchCamera",value:function(){this.getSelectedIDs().forEach((function(t){a.switchCamera(t)}))}},{key:"uploadFile",value:function(){var t=document.getElementById("uploadFileForm").files;o.uploadData(t)}},{key:"searchTime",value:function(){var t=document.getElementById("searchTimeForm").value;this.getSelectedIDs().forEach((function(e){a.searchTime(e,Number(t))}))}},{key:"switchGridDisplay",value:function(){var t=!this.state.grid;this.setState({grid:t}),this.getSelectedIDs().forEach((function(e){a.switchGridDisplay(e,t)}))}},{key:"switchLabelDisplay",value:function(){var t=!this.state.label;this.setState({label:t}),this.getSelectedIDs().forEach((function(e){a.switchLabelDisplay(e,t)}))}},{key:"switchAxisDisplay",value:function(){var t=!this.state.axis;this.setState({axis:t}),this.getSelectedIDs().forEach((function(e){a.switchAxisDisplay(e,t)}))}},{key:"switchPlotDisplay",value:function(){var t=!this.state.plot;this.setState({plot:t}),this.getSelectedIDs().forEach((function(e){a.switchPlotDisplay(e,t)}))}},{key:"switchCommentDisplay",value:function(){var t=!this.state.comment;this.setState({comment:t}),this.getSelectedIDs().forEach((function(e){a.switchComment(e,t)}))}},{key:"changeBackground",value:function(){var t=document.getElementById("backgroundList"),e=t.selectedIndex,n=t.options[e].value;this.getSelectedIDs().forEach((function(t){a.changeBackground(t,n)}))}},{key:"clipTube",value:function(){var t=!this.state.clip;this.setState({clip:t}),this.getSelectedIDs().forEach((function(e){a.clipTube(e,t)}))}},{key:"switchShade",value:function(){var t=!this.state.shade;this.setState({shade:t}),this.getSelectedIDs().forEach((function(e){a.switchShade(e,t)}))}},{key:"selectAllViews",value:function(){var t=$("#selectAllViews").text(),e=$("input[name=selectView]");"Select All"===t?(e.prop("checked",!0),$("#selectAllViews").text("Deselect All")):"Deselect All"===t&&(e.prop("checked",!1),$("#selectAllViews").text("Select All"))}},{key:"timeFitting",value:function(){if(this.state.multiOptions){var t=s.default.getActiveId(),e=s.default.getFocused(t),n=l.default.getData(t);a.timeFitting(e+n.data.spatial[0].z)}}},{key:"mergeTubes",value:function(){if(this.state.multiOptions){var t=this.getSelectedIDs();o.mergeData(t)}}},{key:"lockControl",value:function(){if(this.state.multiOptions){var t=!this.state.lock;this.setState({lock:t});var e=this.getSelectedIDs();a.lockControl(e,t)}}},{key:"clickClose",value:function(){var t=document.getElementById("closeFilePanel").innerText;$("#fileMainArea").slideToggle(),t.match("Close")?document.getElementById("closeFilePanel").innerText="Open the file input panel":document.getElementById("closeFilePanel").innerText="Close the file input panel"}},{key:"clickSub",value:function(){var t=Number($("#initialLineVal").text());t>0&&$("#initialLineVal").text(t-1)}},{key:"clickAdd",value:function(){var t=Number($("#initialLineVal").text());$("#initialLineVal").text(t+1)}},{key:"getSelectedIDs",value:function(){var t=s.default.getCheckedList(),e=[];return t.forEach((function(t,n){t&&e.push(n)})),e}},{key:"basicMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"basicMenu"},r.default.createElement("li",{className:"nav-item dropdown"},r.default.createElement("label",{className:"nav-link menuLabel",href:"#",id:"controllersFileDropdown",role:"button",onClick:this.showFileInputPanel.bind(this)},"File"),r.default.createElement("div",{className:"input-group input-group-sm dropdownonTubeMenu",style:{visibility:"hidden",position:"absolute",top:"2rem",width:"auto",zIndex:"100"},id:"fileInputPanel"},this.fileInputPanel())),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link dropdown-toggle menuLabel",href:"#",id:"controllersSettingDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{fontSize:"1rem"}},""),r.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"})))}},{key:"showFileInputPanel",value:function(){var t=$("#fileInputPanel").css("visibility"),e=$("#controllersFileDropdown").position();switch(t){case"visible":$("#fileInputPanel").css("visibility","hidden");break;case"hidden":$("#fileInputPanel").css("left",e.left),$("#fileInputPanel").css("visibility","visible")}}},{key:"fileInputPanel",value:function(){return r.default.createElement("div",{id:"inputFile",className:"controllersElem"},r.default.createElement("h6",null,"File type"),r.default.createElement("form",{id:"fileType",className:"form-check-inline",style:{minWidth:"200px"},onChange:this.changeFileType.bind(this)},r.default.createElement("div",{className:"custom-control custom-radio",style:{marginRight:"0.5rem"}},r.default.createElement("input",{type:"radio",name:"fileType",value:"csv",className:"custom-control-input",checked:"csv"===this.state.fileType,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"inlineCheckbox1"},"csv")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginRight:"0.5rem"}},r.default.createElement("input",{type:"radio",name:"fileType",value:"tsv",className:"custom-control-input",checked:"tsv"===this.state.fileType,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"inlineCheckbox1"},"tsv")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginRight:"0.5rem"}},r.default.createElement("input",{type:"radio",name:"fileType",value:"space",className:"custom-control-input",checked:"space"===this.state.fileType,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"inlineCheckbox1"},"space"))),r.default.createElement("h6",null,"Initial line of the data (excluding headers)"),r.default.createElement("div",{className:"form-row",id:"initialLineField",style:{display:"flex",justifyContent:"center"}},r.default.createElement("button",{type:"button",id:"sub",className:"sub btn btn-primary  btn-sm",style:{textAlign:"center"},onClick:this.clickSub.bind(this)},"-"),r.default.createElement("label",{id:"initialLineVal",style:{textAlign:"center",width:"30px"}},"2"),r.default.createElement("button",{type:"button",id:"add",className:"add btn btn-primary btn-sm",style:{textAlign:"center"},onClick:this.clickAdd.bind(this)},"+")),r.default.createElement("h6",null,"Select files"),r.default.createElement("div",{className:"custom-file"},r.default.createElement("input",{type:"file",className:"custom-file-input",id:"uploadFileForm",onChange:this.uploadFile.bind(this),multiple:!0}),r.default.createElement("label",{className:"custom-file-label",htmlFor:"customFile"})))}},{key:"displayMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"displayMenu"},r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",id:"resetCameraBtn",onClick:this.resetCamera.bind(this)},"Reset")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",id:"switchCameraBtn",onClick:this.switchCamera.bind(this)},"Switch camera")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxGrid",checked:this.state.grid,onChange:this.switchGridDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchGridDisplay.bind(this)},"Grid")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxLabel",checked:this.state.label,onChange:this.switchLabelDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchLabelDisplay.bind(this)},"Label")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxAxis",checked:this.state.axis,onChange:this.switchAxisDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchAxisDisplay.bind(this)},"Axis")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxPlot",checked:this.state.plot,onChange:this.switchPlotDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchPlotDisplay.bind(this)},"Plot")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxComment",checked:this.state.comment,onChange:this.switchCommentDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchCommentDisplay.bind(this)},"Comment")),r.default.createElement("div",{className:"form-check form-check-inline menuItem"},r.default.createElement("select",{className:"form-control custom-select",id:"backgroundList",onChange:this.changeBackground.bind(this),style:{fontSize:"0.8rem",height:"1.5rem",width:"5rem"}},r.default.createElement("option",{value:"0x000000"},"Black"),r.default.createElement("option",{value:"0x3f3f3f"},"Gray 75"),r.default.createElement("option",{value:"0x7f7f7f"},"Gray 50"),r.default.createElement("option",{value:"0xbfbfbf"},"Gray 25"),r.default.createElement("option",{value:"0xffffff"},"White"),r.default.createElement("option",{value:"0x191970"},"Navy"))))}},{key:"tubeMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"tubeMenu"},r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxClip",value:"option1",checked:this.state.clip,onChange:this.clipTube.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",htmlFor:"inlineCheckbox1",onClick:this.clipTube.bind(this)},"Clip")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxShade",value:"option1",checked:this.state.shade,onChange:this.switchShade.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",htmlFor:"inlineCheckbox1",onClick:this.switchShade.bind(this)},"Shade")),r.default.createElement("li",{className:"nav-item dropdown"},r.default.createElement("label",{className:"nav-link dropdown-toggle menuLabel",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Average"),r.default.createElement("div",{className:"dropdown-menu controllersElem","aria-labelledby":"navbarDropdown"},r.default.createElement("div",{id:"averageSlider",style:{float:"left",width:"8rem",marginBottom:".5rem",marginTop:".5rem"}},r.default.createElement("output",{id:"averageSliderVal",style:{position:"absolute",display:"none",top:"-30px",backgroundColor:"#fff",opacity:"0.8",borderRadius:"3px",color:"#777",padding:"2px"}})))),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",id:"selectAllViews",onClick:this.selectAllViews.bind(this)},"Select All")))}},{key:"multiTubesMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"multiTubesMenu"},r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxLock",value:"option1",checked:this.state.lock,onChange:this.lockControl.bind(this),disabled:!this.state.multiOptions}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",htmlFor:"inlineCheckbox1",onClick:this.lockControl.bind(this)},"Lock")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",onClick:this.timeFitting.bind(this)},"Time Fitting")),r.default.createElement("li",{className:"nav-item dropdown"},r.default.createElement("label",{className:"nav-link dropdown-toggle menuLabel",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Fusion"),r.default.createElement("div",{className:"dropdown-menu controllersElem","aria-labelledby":"navbarDropdown"},r.default.createElement("label",{className:"dropdown-item menuLabel",id:"mergeBtn",onClick:this.mergeTubes.bind(this)},"All"))))}},{key:"render",value:function(){return r.default.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",id:"tubeControllers"},r.default.createElement("div",{className:"collapse navbar-collapse",id:"TimeTubesMenu"},this.basicMenu(),this.displayMenu(),this.tubeMenu(),this.multiTubesMenu()))}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=s(n(120)),o=s(n(291));s(n(11));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.state={width:t.width,heightTT:t.heightTT,heightSP:t.heightSP},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){return r.default.createElement("div",{className:"dataColumn",id:"dataColumn_"+this.id,style:{padding:"unset",display:"table-cell"}},r.default.createElement(a.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.heightTT}),r.default.createElement(o.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.heightSP}))}}]),e}(r.default.Component);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=s(n(67)),o=s(n(290));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.state={width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){return r.default.createElement("div",{className:"TimeTubesHolder",id:"TimeTubesHolder_"+this.id},r.default.createElement(a.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.height-100}),r.default.createElement("div",{id:this.divID,className:"timeSelector"},r.default.createElement(o.default,{id:this.id,divID:"timeSelector_"+this.id,width:this.props.width})))}}]),e}(r.default.Component);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(0)),a=h(n(9)),o=h(n(15)),s=n(122),l=h(n(17)),u=f(n(11)),c=f(n(3));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.id=c.default.getTailID(),t.lookup=c.default.getData(t.id).data.lookup,t.state={fileName:c.default.getFileName(t.id),currentVal:c.default.getValues(-1,0),checked:!0},t.tubeNum=u.default.getTubeNum(),t.opacityDistSet=u.default.getOpacityDistSet(),t.opacityCurves=u.default.getOpacityCurves(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;c.default.on("upload",(function(e){-1===t.id&&(t.id=e,t.lookup=c.default.getData(e).data.lookup,t.setState({fileName:c.default.getFileName(e),currentVal:c.default.getValues(-1,0),checked:!1}))})),c.default.on("updateDetail",(function(e,n){t.id===e&&t.setState({currentVal:c.default.getValues(e,n)})})),u.default.on("updateChecked",(function(e){t.id===e&&t.setState({checked:!t.state.checked})}))}},{key:"componentDidMount",value:function(){this.setFarSlider(),this.setColormapValueSlider(),this.setColormapHueSlider(),this.setOpacityCurve(),this.setOpacityEllipse()}},{key:"setFarSlider",value:function(){var t=this.id,e=$("#farSliderVal_"+t);$("#farSlider_"+t).slider({range:"min",value:0,min:1,max:100,slide:function(n,i){e.css("display","initial"),e.val(i.value);var r=$("#farSlider_"+t).slider("option","min"),a=$("#farSlider_"+t).slider("option","max")-r,o=$("#farSlider_"+t).width()*(i.value-r)/a-10;e.css("left",o+"px"),l.changeFar(t,i.value)},stop:function(){e.css("display","none")}}),$("#farSliderVal_"+t).val($("#farSlider_"+t).slider("value"))}},{key:"setColormapValueSlider",value:function(){var t=this.id,e=$("#colorValue_"+t),n=$("#colorValueMin_"+t),i=$("#colorValueMax_"+t);e.slider({range:!0,min:0,max:100,values:[0,100],orientation:"vertical",slide:function(r,a){n.css("display","initial"),i.css("display","initial");var o=c.default.getData(t),s=o.data.meta.min.V,u=o.data.meta.max.V,h=a.values[0]/100*(u-s)+s,f=a.values[1]/100*(u-s)+s;h=Math.log10(Math.abs(h))<-2&&0!==h?h.toExponential(1):h.toFixed(2),f=Math.log10(Math.abs(f))<-2&&0!==f?f.toExponential(1):f.toFixed(2),n.val(h),i.val(f);var d=e.slider("option","min"),p=e.slider("option","max")-d,m=150*(a.values[0]-d)/p-10,g=140-150*(a.values[1]-d)/p;n.css("bottom",m+"px"),i.css("top",g+"px");var v=o.data.meta.max.V-o.data.meta.min.V;l.updateMinMaxV(t,a.values[0]/100*v+o.data.meta.min.V,a.values[1]/100*v+o.data.meta.min.V)},stop:function(){n.css("display","none"),i.css("display","none")}}),n.val(e.slider("values",0)),i.val(e.slider("values",1))}},{key:"setColormapHueSlider",value:function(){var t=this.id,e=$("#colorHue_"+t),n=$("#colorHueMin_"+t),i=$("#colorHueMax_"+t);e.slider({range:!0,min:0,max:100,values:[0,100],slide:function(e,r){n.css("display","initial"),i.css("display","initial");var a=c.default.getData(t),o=a.data.meta.min.H,s=a.data.meta.max.H,u=r.values[0]/100*(s-o)+o,h=r.values[1]/100*(s-o)+o;u=Math.log10(Math.abs(u))<-2&&0!==u?u.toExponential(1):u.toFixed(2),h=Math.log10(Math.abs(h))<-2&&0!==h?h.toExponential(1):h.toFixed(2),n.val(u),i.val(h);var f=150*r.values[0]/100-8,d=142-150*r.values[1]/100;n.css("left",f+"px"),i.css("right",d+"px");var p=a.data.meta.max.H-a.data.meta.min.H;l.updateMinMaxH(t,r.values[0]/100*p+a.data.meta.min.H,r.values[1]/100*p+a.data.meta.min.H)},stop:function(){n.css("display","none"),i.css("display","none")}}),n.val(e.slider("values",0)),i.val(e.slider("values",1))}},{key:"setOpacityCurve",value:function(){var t=10,e=15,n=15,i=150-n-10,r=150-t-e,o=a.select("#opacityCurve_"+this.id).append("svg").attr("width",150).attr("height",150).attr("id","opacityCurveArea_"+this.id);o.append("rect").attr("width",i).attr("height",r).style("fill","none").style("stroke","lightgray").attr("transform","translate("+n+","+t+")");for(var s=i/(this.tubeNum-1),l=1;l<this.tubeNum;l++)o.append("line").attr("x1",s*l).attr("y1",0).attr("x2",s*l).attr("y2",i).style("stroke","lightgray").attr("transform","translate("+n+","+t+")"),o.append("line").attr("x1",0).attr("y1",s*l).attr("x2",r).attr("y2",s*l).style("stroke","lightgray").attr("transform","translate("+n+","+t+")");this.xScaleOpacity=a.scaleLinear().domain([0,1]).range([n,150-n]),this.yScaleOpacity=a.scaleLinear().domain([0,1]).range([150-t,e]),o.append("g").attr("class","axisLabel opacityCurveXAxis").append("text").attr("x",75).attr("y",150-e/2+5).style("fill","black").style("text-anchor","middle").style("font-size","xx-small").text("Radial size of the tube"),o.append("g").append("text").attr("class","axisLabel opacityCurveYAxis").attr("transform","rotate(-90)").attr("x",-75).attr("y",n/2+2).style("fill","black").style("font-size","xx-small").style("text-anchor","middle").text("Opacity"),o.append("path").datum(this.opacityDistSet.Default).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","opacityCurvePath_"+this.id).attr("d",a.line().x(function(t){return this.xScaleOpacity(t[0])}.bind(this)).y(function(t){return this.yScaleOpacity(t[1])}.bind(this)).curve(a.curveBasis))}},{key:"setOpacityEllipse",value:function(){var t=10,e=10,n=150-e-10,i=150-t-10,r=a.select("#opacityEllipse_"+this.id).append("svg").attr("width",150).attr("height",150).attr("id","opacityEllipseArea_"+this.id);r.append("rect").attr("width",n).attr("height",i).style("fill","none").style("stroke","lightgray").attr("transform","translate("+e+","+t+")");for(var o=Math.ceil(e+n/2),s=Math.ceil(t+i/2),l=this.opacityCurves.Default.getSpacedPoints(this.tubeNum),u=1;u<=this.tubeNum;u++){var c=1-(1-l[u-1].y)/(1-l[u].y);r.append("ellipse").attr("cx",o).attr("cy",s).attr("rx",50*u/this.tubeNum).attr("ry",30*u/this.tubeNum).attr("id","opacityEllipseEllipse_"+this.id+"-"+u).style("fill","orange").style("opacity",c)}}},{key:"onChangeCheckbox",value:function(t){l.updateChecked(t)}},{key:"zoomOutTimeTubes",value:function(){l.zoomOutTimeTubes(this.id)}},{key:"resetZoomTimeTubes",value:function(){l.resetZoomTimeTubes(this.id)}},{key:"zoomInTimeTubes",value:function(){l.zoomInTimeTubes(this.id)}},{key:"showPopoverFar",value:function(){var t=$("#changeFar_"+this.id).css("visibility"),e=$("#farPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changeFar_"+this.id).css("visibility","hidden");break;case"hidden":$("#changeFar_"+this.id).css("left",e.left),$("#changeFar_"+this.id).css("visibility","visible"),$("#farSlider_"+this.id).slider("option","value",u.default.getCameraProp(this.id).far)}}},{key:"showPopoverPlotColor",value:function(){var t=$("#changePlotColor_"+this.id).css("visibility"),e=$("#plotColorPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changePlotColor_"+this.id).css("visibility","hidden");break;case"hidden":$("#changePlotColor_"+this.id).css("left",e.left),$("#changePlotColor_"+this.id).css("visibility","visible")}}},{key:"showPopoverOpacity",value:function(){var t=$("#changeOpacity_"+this.id).css("visibility"),e=$("#opacityPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changeOpacity_"+this.id).css("visibility","hidden");break;case"hidden":$("#changeOpacity_"+this.id).css("left",e.left),$("#changeOpacity_"+this.id).css("visibility","visible")}}},{key:"showPopoverColormap",value:function(){var t=$("#changeColormap_"+this.id).css("visibility"),e=$("#colormapPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changeColormap_"+this.id).css("visibility","hidden");break;case"hidden":$("#changeColormap_"+this.id).css("left",e.left),$("#changeColormap_"+this.id).css("visibility","visible")}}},{key:"showPopoverSearch",value:function(){var t=$("#searchTime_"+this.id).css("visibility"),e=$("#searchPopoverBtn_"+this.id).position();switch(t){case"visible":$("#searchTime_"+this.id).css("visibility","hidden");break;case"hidden":$("#searchTime_"+this.id).css("left",e.left),$("#searchTime_"+this.id).css("visibility","visible")}}},{key:"searchTime",value:function(){var t=this.id,e=$("#searchTimeInput_"+t).val();isNaN(e)||""==e||l.searchTime(t,Number(e))}},{key:"changePlotColor",value:function(t,e){l.changePlotColor(this.id,t.hex)}},{key:"changeColorMap",value:function(){var t=document.getElementById("uploadColormap").files,e=new FileReader;e.readAsDataURL(t[0]),e.onload=function(){var t=e.result;document.getElementById("colormap_"+this.id).src=t,(new o.TextureLoader).load(t,function(t){l.updateTexture(this.id,t)}.bind(this))}.bind(this)}},{key:"changeOpacityDistribution",value:function(){var t=document.getElementById("opacityList_"+this.id),e=t.selectedIndex,n=t.options[e].value;this.drawOpacityCurve(n),this.drawOpacityEllipse(n),l.updateOpacity(this.id,n)}},{key:"drawOpacityCurve",value:function(t){a.select("#opacityCurvePath_"+this.id).remove(),a.select("#opacityCurveArea_"+this.id).append("path").datum(this.opacityDistSet[t]).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","opacityCurvePath_"+this.id).attr("d",a.line().x(function(t){return this.xScaleOpacity(t[0])}.bind(this)).y(function(t){return this.yScaleOpacity(t[1])}.bind(this)).curve(a.curveBasis))}},{key:"drawOpacityEllipse",value:function(t){var e=1;if("Flat"===t)for(var n=1;n<=this.tubeNum;n++)a.select("#opacityEllipseEllipse_"+this.id+"-"+n).style("opacity",e);else for(var i=this.opacityCurves[t].getSpacedPoints(this.tubeNum),r=1;r<=this.tubeNum;r++)e=1-(1-i[r-1].y)/(1-i[r].y),a.select("#opacityEllipseEllipse_"+this.id+"-"+r).style("opacity",e)}},{key:"render",value:function(){var t=this.state.currentVal,e=[];for(var n in t){var i=void 0;i="z"===n||"H"===n?t[n].toFixed(3):"V"===n?t[n].toExponential(2):t[n].toFixed(4),e.push(r.default.createElement("tr",{key:n+"_"+this.id,className:"detailTableRow"},r.default.createElement("td",{className:"detailTableData detailTableVari"},this.lookup[n]),r.default.createElement("td",{className:"detailTableData"},i)))}return r.default.createElement("div",{id:"onViewportControllers_"+this.id},r.default.createElement("div",{id:"fileSelector_"+this.id,className:"controllersOnView",style:{position:"absolute",color:"white",top:"0px",left:"0px",zIndex:"10",fontSize:"0.8rem",marginLeft:"1.5rem"}},r.default.createElement("input",{type:"checkbox",id:"selectView_"+this.id,name:"selectView",key:this.id,value:this.id,checked:this.state.checked,onChange:this.onChangeCheckbox.bind(this,this.id)}),r.default.createElement("label",{id:"fileName_"+this.id,style:{paddingLeft:"0.5rem",paddingRight:"0.5rem"}},this.state.fileName)),r.default.createElement("div",{id:"zoomControllers_"+this.id,className:"controllersOnView",style:{position:"absolute",top:"0px",right:"0px",zIndex:"20",fontSize:"0.8rem"}},r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"zoomOutBtn_"+this.id,onClick:this.zoomOutTimeTubes.bind(this)},"-"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"resetZoomBtn_"+this.id,onClick:this.resetZoomTimeTubes.bind(this)},""),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"zoomInBtn_"+this.id,onClick:this.zoomInTimeTubes.bind(this)},"+")),r.default.createElement("div",{id:"eachTubeControllers_"+this.id,className:"controllersOnView",style:{position:"absolute",bottom:"0px",left:"0px",zIndex:"30",fontSize:"0.8rem"}},r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"colormapPopoverBtn_"+this.id,onClick:this.showPopoverColormap.bind(this)},"Colormap"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"farPopoverBtn_"+this.id,onClick:this.showPopoverFar.bind(this)},"Far"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"plotColorPopoverBtn_"+this.id,onClick:this.showPopoverPlotColor.bind(this)},"Plot Color"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"opacityPopoverBtn_"+this.id,onClick:this.showPopoverOpacity.bind(this)},"Opacity"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"searchPopoverBtn_"+this.id,onClick:this.showPopoverSearch.bind(this)},"Search")),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changeColormap_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"31"}},r.default.createElement("div",{id:"colorFilter_"+this.id},r.default.createElement("div",{id:"colorValue_"+this.id,style:{float:"left",height:"150px"}},r.default.createElement("output",{id:"colorValueMax_"+this.id,style:{marginLeft:"1.3rem"}}),r.default.createElement("output",{id:"colorValueMin_"+this.id,style:{marginLeft:"1.3rem"}})),r.default.createElement("div",{id:"colorMap_"+this.id,style:{float:"left",marginLeft:"10px"}},r.default.createElement("img",{src:"img/1_256.png",id:"colormap_"+this.id,style:{width:"150px",height:"150px"}})),r.default.createElement("div",{style:{clear:"both"}}),r.default.createElement("div",{id:"colorHue_"+this.id,style:{width:"150px",marginTop:"5px",marginLeft:"20px"}},r.default.createElement("output",{id:"colorHueMax_"+this.id,style:{bottom:"1.3rem"}}),r.default.createElement("output",{id:"colorHueMin_"+this.id,style:{bottom:"1.3rem"}})),r.default.createElement("div",{className:"custom-file",style:{width:"170px",marginTop:"0.5rem"}},r.default.createElement("input",{type:"file",className:"custom-file-input",id:"uploadColormap",onChange:this.changeColorMap.bind(this)}),r.default.createElement("label",{className:"custom-file-label",htmlFor:"uploadColormap"},"Change")))),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changeFar_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"32"}},r.default.createElement("div",{id:"farSliderArea_"+this.id},r.default.createElement("label",{id:"idLabel_"+this.id,style:{float:"left",width:"2rem"}},"far"),r.default.createElement("div",{id:"farSlider_"+this.id,style:{float:"left",width:"8rem",marginBottom:".5rem",marginTop:".5rem"}},r.default.createElement("output",{id:"farSliderVal_"+this.id,style:{position:"absolute",display:"none",top:"-30px",backgroundColor:"#fff",opacity:"0.8",borderRadius:"3px",color:"#777",padding:"2px"}})))),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changePlotColor_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"33"}},r.default.createElement(s.SketchPicker,{presetColors:u.default.getPresetColors(),color:u.default.getPlotColor(this.id),onChange:this.changePlotColor.bind(this)})),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changeOpacity_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"34",display:"block"}},r.default.createElement("select",{className:"form-control",id:"opacityList_"+this.id,onChange:this.changeOpacityDistribution.bind(this),style:{fontSize:"0.8rem",width:"150px"}},r.default.createElement("option",{value:"Default"},"Default"),r.default.createElement("option",{value:"Flat"},"Flat"),r.default.createElement("option",{value:"Linear"},"Linear"),r.default.createElement("option",{value:"Valley"},"Valley shaped")),r.default.createElement("div",{className:"currentOpacity",style:{display:"flex"}},r.default.createElement("div",{id:"opacityCurve_"+this.id}),r.default.createElement("div",{id:"opacityEllipse_"+this.id}))),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"searchTime_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"10rem",zIndex:"35"}},r.default.createElement("input",{type:"text",className:"form-control custom-input",id:"searchTimeInput_"+this.id,placeholder:"Input JD"}),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"searchTimeBtn_"+this.id,onClick:this.searchTime.bind(this)},"Search")),r.default.createElement("div",{id:"detailValueArea",className:"controllersOnView",style:{position:"absolute",color:"white",right:"0px",bottom:"0px",whiteSpace:"pre-line",zIndex:"11",fontSize:"0.8rem"}},r.default.createElement("table",{className:"detailTable"},r.default.createElement("tbody",{className:"detailTableBody"},e))))}}]),e}(r.default.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomPicker=e.TwitterPicker=e.SwatchesPicker=e.SliderPicker=e.SketchPicker=e.PhotoshopPicker=e.MaterialPicker=e.HuePicker=e.GithubPicker=e.CompactPicker=e.ChromePicker=e.default=e.CirclePicker=e.BlockPicker=e.AlphaPicker=void 0;var i=n(123);Object.defineProperty(e,"AlphaPicker",{enumerable:!0,get:function(){return y(i).default}});var r=n(252);Object.defineProperty(e,"BlockPicker",{enumerable:!0,get:function(){return y(r).default}});var a=n(254);Object.defineProperty(e,"CirclePicker",{enumerable:!0,get:function(){return y(a).default}});var o=n(256);Object.defineProperty(e,"ChromePicker",{enumerable:!0,get:function(){return y(o).default}});var s=n(261);Object.defineProperty(e,"CompactPicker",{enumerable:!0,get:function(){return y(s).default}});var l=n(264);Object.defineProperty(e,"GithubPicker",{enumerable:!0,get:function(){return y(l).default}});var u=n(266);Object.defineProperty(e,"HuePicker",{enumerable:!0,get:function(){return y(u).default}});var c=n(268);Object.defineProperty(e,"MaterialPicker",{enumerable:!0,get:function(){return y(c).default}});var h=n(269);Object.defineProperty(e,"PhotoshopPicker",{enumerable:!0,get:function(){return y(h).default}});var f=n(275);Object.defineProperty(e,"SketchPicker",{enumerable:!0,get:function(){return y(f).default}});var d=n(278);Object.defineProperty(e,"SliderPicker",{enumerable:!0,get:function(){return y(d).default}});var p=n(282);Object.defineProperty(e,"SwatchesPicker",{enumerable:!0,get:function(){return y(p).default}});var m=n(286);Object.defineProperty(e,"TwitterPicker",{enumerable:!0,get:function(){return y(m).default}});var g=n(101);Object.defineProperty(e,"CustomPicker",{enumerable:!0,get:function(){return y(g).default}});var v=y(o);function y(t){return t&&t.__esModule?t:{default:t}}e.default=v.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlphaPicker=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=l(n(0)),a=l(n(1)),o=n(2),s=l(n(251));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.AlphaPicker=function(t){var e=t.rgb,n=t.hsl,s=t.width,l=t.height,u=t.onChange,c=t.direction,h=t.style,f=t.renderers,d=t.pointer,p=t.className,m=void 0===p?"":p,g=(0,a.default)({default:{picker:{position:"relative",width:s,height:l},alpha:{radius:"2px",style:h}}});return r.default.createElement("div",{style:g.picker,className:"alpha-picker "+m},r.default.createElement(o.Alpha,i({},g.alpha,{rgb:e,hsl:n,pointer:d,renderers:f,onChange:u,direction:c})))};u.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},e.default=(0,o.ColorWrap)(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flattenNames=void 0;var i=s(n(125)),r=s(n(45)),a=s(n(75)),o=s(n(18));function s(t){return t&&t.__esModule?t:{default:t}}var l=e.flattenNames=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,o.default)(e,(function(e){Array.isArray(e)?t(e).map((function(t){return n.push(t)})):(0,a.default)(e)?(0,r.default)(e,(function(t,e){!0===t&&n.push(e),n.push(e+"-"+t)})):(0,i.default)(e)&&n.push(e)})),n};e.default=l},function(t,e,n){var i=n(19),r=n(6),a=n(16),o="[object String]";t.exports=function(t){return"string"==typeof t||!r(t)&&a(t)&&i(t)==o}},function(t,e,n){var i=n(25),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[s]=n:delete t[s]),r}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return function(e,n,i){for(var r=-1,a=Object(e),o=i(e),s=o.length;s--;){var l=o[t?s:++r];if(!1===n(a[l],l,a))break}return e}}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(19),r=n(16),a="[object Arguments]";t.exports=function(t){return r(t)&&i(t)==a}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(19),r=n(49),a=n(16),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&r(t.length)&&!!o[i(t)]}},function(t,e,n){var i=n(52),r=n(134),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var i=n(73)(Object.keys,Object);t.exports=i},function(t,e,n){var i=n(136),r=n(180),a=n(32),o=n(6),s=n(190);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?r(t[0],t[1]):i(t):s(t)}},function(t,e,n){var i=n(137),r=n(179),a=n(86);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},function(t,e,n){var i=n(33),r=n(78),a=1,o=2;t.exports=function(t,e,n,s){var l=n.length,u=l,c=!s;if(null==t)return!u;for(t=Object(t);l--;){var h=n[l];if(c&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++l<u;){var f=(h=n[l])[0],d=t[f],p=h[1];if(c&&h[2]){if(void 0===d&&!(f in t))return!1}else{var m=new i;if(s)var g=s(d,p,f,t,e,m);if(!(void 0===g?r(p,d,a|o,s,m):g))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var i=n(35),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():r.call(e,n,1),--this.size,!0)}},function(t,e,n){var i=n(35);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var i=n(35);t.exports=function(t){return i(this.__data__,t)>-1}},function(t,e,n){var i=n(35);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},function(t,e,n){var i=n(34);t.exports=function(){this.__data__=new i,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var i=n(34),r=n(55),a=n(56),o=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!r||s.length<o-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var i=n(53),r=n(149),a=n(10),o=n(77),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||r(t))&&(i(t)?f:s).test(o(t))}},function(t,e,n){var i,r=n(150),a=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!a&&a in t}},function(t,e,n){var i=n(12)["__core-js_shared__"];t.exports=i},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var i=n(153),r=n(34),a=n(55);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(a||r),string:new i}}},function(t,e,n){var i=n(154),r=n(155),a=n(156),o=n(157),s=n(158);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(36);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var i=n(36),r="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return n===r?void 0:n}return a.call(e,t)?e[t]:void 0}},function(t,e,n){var i=n(36),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},function(t,e,n){var i=n(36),r="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?r:e,this}},function(t,e,n){var i=n(37);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var i=n(37);t.exports=function(t){return i(this,t).get(t)}},function(t,e,n){var i=n(37);t.exports=function(t){return i(this,t).has(t)}},function(t,e,n){var i=n(37);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},function(t,e,n){var i=n(33),r=n(79),a=n(170),o=n(173),s=n(38),l=n(6),u=n(30),c=n(48),h=1,f="[object Arguments]",d="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,y){var b=l(t),x=l(e),_=b?d:s(t),w=x?d:s(e),S=(_=_==f?p:_)==p,E=(w=w==f?p:w)==p,M=_==w;if(M&&u(t)){if(!u(e))return!1;b=!0,S=!1}if(M&&!S)return y||(y=new i),b||c(t)?r(t,e,n,g,v,y):a(t,e,_,n,g,v,y);if(!(n&h)){var T=S&&m.call(t,"__wrapped__"),C=E&&m.call(e,"__wrapped__");if(T||C){var k=T?t.value():t,P=C?e.value():e;return y||(y=new i),v(k,P,n,g,y)}}return!!M&&(y||(y=new i),o(t,e,n,g,v,y))}},function(t,e,n){var i=n(56),r=n(166),a=n(167);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=a,t.exports=o},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var i=n(25),r=n(80),a=n(27),o=n(79),s=n(171),l=n(172),u=1,c=2,h="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Map]",m="[object Number]",g="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",x="[object ArrayBuffer]",_="[object DataView]",w=i?i.prototype:void 0,S=w?w.valueOf:void 0;t.exports=function(t,e,n,i,w,E,M){switch(n){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!E(new r(t),new r(e)));case h:case f:case m:return a(+t,+e);case d:return t.name==e.name&&t.message==e.message;case g:case y:return t==e+"";case p:var T=s;case v:var C=i&u;if(T||(T=l),t.size!=e.size&&!C)return!1;var k=M.get(t);if(k)return k==e;i|=c,M.set(t,e);var P=o(T(t),T(e),i,w,E,M);return M.delete(t),P;case b:if(S)return S.call(t)==S.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var i=n(81),r=1,a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,l){var u=n&r,c=i(t),h=c.length;if(h!=i(e).length&&!u)return!1;for(var f=h;f--;){var d=c[f];if(!(u?d in e:a.call(e,d)))return!1}var p=l.get(t);if(p&&l.get(e))return p==e;var m=!0;l.set(t,e),l.set(e,t);for(var g=u;++f<h;){var v=t[d=c[f]],y=e[d];if(o)var b=u?o(y,v,d,e,t,l):o(v,y,d,t,e,l);if(!(void 0===b?v===y||s(v,y,n,o,l):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var x=t.constructor,_=e.constructor;x!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _)&&(m=!1)}return l.delete(t),l.delete(e),m}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}},function(t,e,n){var i=n(20)(n(12),"DataView");t.exports=i},function(t,e,n){var i=n(20)(n(12),"Promise");t.exports=i},function(t,e,n){var i=n(20)(n(12),"Set");t.exports=i},function(t,e,n){var i=n(20)(n(12),"WeakMap");t.exports=i},function(t,e,n){var i=n(85),r=n(26);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,i(o)]}return e}},function(t,e,n){var i=n(78),r=n(181),a=n(187),o=n(58),s=n(85),l=n(86),u=n(40),c=1,h=2;t.exports=function(t,e){return o(t)&&s(e)?l(u(t),e):function(n){var o=r(n,t);return void 0===o&&o===e?a(n,t):i(e,o,c|h)}}},function(t,e,n){var i=n(87);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},function(t,e,n){var i=n(183),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)})),e}));t.exports=o},function(t,e,n){var i=n(184),r=500;t.exports=function(t){var e=i(t,(function(t){return n.size===r&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var i=n(56),r="Expected a function";function a(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(a.Cache||i),n}a.Cache=i,t.exports=a},function(t,e,n){var i=n(186);t.exports=function(t){return null==t?"":i(t)}},function(t,e,n){var i=n(25),r=n(76),a=n(6),o=n(39),s=1/0,l=i?i.prototype:void 0,u=l?l.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return r(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e,n){var i=n(188),r=n(189);t.exports=function(t,e){return null!=t&&r(t,e,i)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var i=n(88),r=n(46),a=n(6),o=n(47),s=n(49),l=n(40);t.exports=function(t,e,n){for(var u=-1,c=(e=i(e,t)).length,h=!1;++u<c;){var f=l(e[u]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++u!=c?h:!!(c=null==t?0:t.length)&&s(c)&&o(f,c)&&(a(t)||r(t))}},function(t,e,n){var i=n(191),r=n(192),a=n(58),o=n(40);t.exports=function(t){return a(t)?i(o(t)):r(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var i=n(87);t.exports=function(t){return function(e){return i(e,t)}}},function(t,e,n){var i=n(89),r=n(22);t.exports=function(t,e){var n=-1,a=r(t)?Array(t.length):[];return i(t,(function(t,i,r){a[++n]=e(t,i,r)})),a}},function(t,e,n){var i=n(22);t.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==r(s[o],o,s););return n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeClasses=void 0;var i=o(n(45)),r=o(n(196)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function o(t){return t&&t.__esModule?t:{default:t}}var s=e.mergeClasses=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.default&&(0,r.default)(t.default)||{};return e.map((function(e){var r=t[e];return r&&(0,i.default)(r,(function(t,e){n[e]||(n[e]={}),n[e]=a({},n[e],r[e])})),e})),n};e.default=s},function(t,e,n){var i=n(197),r=1,a=4;t.exports=function(t){return i(t,r|a)}},function(t,e,n){var i=n(33),r=n(90),a=n(91),o=n(198),s=n(199),l=n(93),u=n(94),c=n(202),h=n(203),f=n(81),d=n(204),p=n(38),m=n(205),g=n(206),v=n(97),y=n(6),b=n(30),x=n(211),_=n(10),w=n(213),S=n(26),E=1,M=2,T=4,C="[object Arguments]",k="[object Function]",P="[object GeneratorFunction]",A="[object Object]",O={};O[C]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[A]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[k]=O["[object WeakMap]"]=!1,t.exports=function t(e,n,L,I,N,R){var D,z=n&E,B=n&M,F=n&T;if(L&&(D=N?L(e,I,N,R):L(e)),void 0!==D)return D;if(!_(e))return e;var j=y(e);if(j){if(D=m(e),!z)return u(e,D)}else{var V=p(e),U=V==k||V==P;if(b(e))return l(e,z);if(V==A||V==C||U&&!N){if(D=B||U?{}:v(e),!z)return B?h(e,s(D,e)):c(e,o(D,e))}else{if(!O[V])return N?e:{};D=g(e,V,z)}}R||(R=new i);var H=R.get(e);if(H)return H;R.set(e,D),w(e)?e.forEach((function(i){D.add(t(i,n,L,i,e,R))})):x(e)&&e.forEach((function(i,r){D.set(r,t(i,n,L,r,e,R))}));var G=F?B?d:f:B?keysIn:S,W=j?void 0:G(e);return r(W||e,(function(i,r){W&&(i=e[r=i]),a(D,r,t(i,n,L,r,e,R))})),D}},function(t,e,n){var i=n(28),r=n(26);t.exports=function(t,e){return t&&i(e,r(e),t)}},function(t,e,n){var i=n(28),r=n(41);t.exports=function(t,e){return t&&i(e,r(e),t)}},function(t,e,n){var i=n(10),r=n(52),a=n(201),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return a(t);var e=r(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var i=n(28),r=n(57);t.exports=function(t,e){return i(t,r(t),e)}},function(t,e,n){var i=n(28),r=n(95);t.exports=function(t,e){return i(t,r(t),e)}},function(t,e,n){var i=n(82),r=n(95),a=n(41);t.exports=function(t){return i(t,a,r)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(i.index=t.index,i.input=t.input),i}},function(t,e,n){var i=n(60),r=n(207),a=n(208),o=n(209),s=n(96),l="[object Boolean]",u="[object Date]",c="[object Map]",h="[object Number]",f="[object RegExp]",d="[object Set]",p="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",_="[object Int16Array]",w="[object Int32Array]",S="[object Uint8Array]",E="[object Uint8ClampedArray]",M="[object Uint16Array]",T="[object Uint32Array]";t.exports=function(t,e,n){var C=t.constructor;switch(e){case g:return i(t);case l:case u:return new C(+t);case v:return r(t,n);case y:case b:case x:case _:case w:case S:case E:case M:case T:return s(t,n);case c:return new C;case h:case p:return new C(t);case f:return a(t);case d:return new C;case m:return o(t)}}},function(t,e,n){var i=n(60);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var i=n(25),r=i?i.prototype:void 0,a=r?r.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},function(t,e,n){var i=n(10),r=Object.create,a=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},function(t,e,n){var i=n(212),r=n(50),a=n(51),o=a&&a.isMap,s=o?r(o):i;t.exports=s},function(t,e,n){var i=n(38),r=n(16),a="[object Map]";t.exports=function(t){return r(t)&&i(t)==a}},function(t,e,n){var i=n(214),r=n(50),a=n(51),o=a&&a.isSet,s=o?r(o):i;t.exports=s},function(t,e,n){var i=n(38),r=n(16),a="[object Set]";t.exports=function(t){return r(t)&&i(t)==a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoprefix=void 0;var i,r=n(45),a=(i=r)&&i.__esModule?i:{default:i},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};var s={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var e=t&&t.split(" ");return{position:"absolute",top:e&&e[0],right:e&&e[1],bottom:e&&e[2],left:e&&e[3]}},extend:function(t,e){var n=e[t];return n||{extend:t}}},l=e.autoprefix=function(t){var e={};return(0,a.default)(t,(function(t,n){var i={};(0,a.default)(t,(function(t,e){var n=s[e];n?i=o({},i,n(t)):i[e]=t})),e[n]=i})),e};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hover=void 0;var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.hover=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function i(){var n,a,u;s(this,i);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return a=u=l(this,(n=i.__proto__||Object.getPrototypeOf(i)).call.apply(n,[this].concat(h))),u.state={hover:!1},u.handleMouseOver=function(){return u.setState({hover:!0})},u.handleMouseOut=function(){return u.setState({hover:!1})},u.render=function(){return o.default.createElement(e,{onMouseOver:u.handleMouseOver,onMouseOut:u.handleMouseOut},o.default.createElement(t,r({},u.props,u.state)))},l(u,a)}return u(i,n),i}(o.default.Component)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.active=void 0;var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function i(){var n,a,u;s(this,i);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return a=u=l(this,(n=i.__proto__||Object.getPrototypeOf(i)).call.apply(n,[this].concat(h))),u.state={active:!1},u.handleMouseDown=function(){return u.setState({active:!0})},u.handleMouseUp=function(){return u.setState({active:!1})},u.render=function(){return o.default.createElement(e,{onMouseDown:u.handleMouseDown,onMouseUp:u.handleMouseUp},o.default.createElement(t,r({},u.props,u.state)))},l(u,a)}return u(i,n),i}(o.default.Component)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var n={},i=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[t]=e};return 0===t&&i("first-child"),t===e-1&&i("last-child"),(0===t||t%2==0)&&i("even"),1===Math.abs(t%2)&&i("odd"),i("nth-child",t),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alpha=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),o=c(a),s=c(n(1)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(220)),u=c(n(61));function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var f=e.Alpha=function(t){function e(){var t,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=i=h(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i.handleChange=function(t){var e=l.calculateChange(t,i.props.hsl,i.props.direction,i.props.a,i.container);e&&"function"==typeof i.props.onChange&&i.props.onChange(e,t)},i.handleMouseDown=function(t){i.handleChange(t),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},h(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,e=this.props.rgb,n=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*e.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)"},pointer:{left:0,top:100*e.a+"%"}},overwrite:i({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return o.default.createElement("div",{style:n.alpha},o.default.createElement("div",{style:n.checkboard},o.default.createElement(u.default,{renderers:this.props.renderers})),o.default.createElement("div",{style:n.gradient}),o.default.createElement("div",{style:n.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("div",{style:n.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:n.slider}))))}}]),e}(a.PureComponent||a.Component);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calculateChange=function(t,e,n,i,r){var a=r.clientWidth,o=r.clientHeight,s="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,l="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,u=s-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=c<0?0:c>o?1:Math.round(100*c/o)/100,e.a!==h)return{h:e.h,s:e.s,l:e.l,a:h,source:"rgb"}}else{var f=void 0;if(i!==(f=u<0?0:u>a?1:Math.round(100*u/a)/100))return{h:e.h,s:e.s,l:e.l,a:f,source:"rgb"}}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={},r=e.render=function(t,e,n,i){if("undefined"==typeof document&&!i)return null;var r=i?new i:document.createElement("canvas");r.width=2*n,r.height=2*n;var a=r.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,r.width,r.height),a.fillStyle=e,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),r.toDataURL()):null};e.get=function(t,e,n,a){var o=t+"-"+e+"-"+n+(a?"-server":"");if(i[o])return i[o];var s=r(t,e,n,a);return i[o]=s,s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditableInput=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=s(r),o=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}var l=38,u=[l,40],c=function(t){return u.indexOf(t)>-1},h=function(t){return Number(String(t).replace(/%/g,""))},f=e.EditableInput=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(t){n.setUpdatedValue(t.target.value,t)},n.handleKeyDown=function(t){var e=h(t.target.value);if(!isNaN(e)&&c(t.keyCode)){var i=n.getArrowOffset(),r=t.keyCode===l?e+i:e-i;n.setUpdatedValue(r,t)}},n.handleDrag=function(t){if(n.props.dragLabel){var e=Math.round(n.props.value+t.movementX);e>=0&&e<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(e),t)}},n.handleMouseDown=function(t){n.props.dragLabel&&(t.preventDefault(),n.handleDrag(t),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillReceiveProps",value:function(t){var e=this.input;t.value!==this.state.value&&(e===document.activeElement?this.setState({blurValue:String(t.value).toUpperCase()}):this.setState({value:String(t.value).toUpperCase(),blurValue:!this.state.blurValue&&String(t.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.props.label,t)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(t,e){var n=null!==this.props.label?this.getValueObjectWithLabel(t):t;this.props.onChange&&this.props.onChange(n,e);var i,r=function(t){return String(t).indexOf("%")>-1}(e.target.value);this.setState({value:r?(i=t,i+"%"):t})}},{key:"render",value:function(){var t=this,e=(0,o.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return a.default.createElement("div",{style:e.wrap},a.default.createElement("input",{style:e.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?a.default.createElement("span",{style:e.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(r.PureComponent||r.Component);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hue=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=l(r),o=l(n(1)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(224));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=e.Hue=function(t){function e(){var t,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=i=u(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i.handleChange=function(t){var e=s.calculateChange(t,i.props.direction,i.props.hsl,i.container);e&&"function"==typeof i.props.onChange&&i.props.onChange(e,t)},i.handleMouseDown=function(t){i.handleChange(t),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},u(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.direction,n=void 0===e?"horizontal":e,i=(0,o.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return a.default.createElement("div",{style:i.hue},a.default.createElement("div",{className:"hue-"+n,style:i.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),a.default.createElement("div",{style:i.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:i.slider}))))}}]),e}(r.PureComponent||r.Component);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calculateChange=function(t,e,n,i){var r=i.clientWidth,a=i.clientHeight,o="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,l=o-(i.getBoundingClientRect().left+window.pageXOffset),u=s-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===e){var c=void 0;if(u<0)c=359;else if(u>a)c=0;else{c=360*(-100*u/a+100)/100}if(n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:"rgb"}}else{var h=void 0;if(l<0)h=0;else if(l>r)h=359;else{h=360*(100*l/r)/100}if(n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"rgb"}}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Raised=void 0;var i=s(n(0)),r=s(n(4)),a=s(n(1)),o=s(n(7));function s(t){return t&&t.__esModule?t:{default:t}}var l=e.Raised=function(t){var e=t.zDepth,n=t.radius,r=t.background,s=t.children,l=t.styles,u=void 0===l?{}:l,c=(0,a.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+e+"px "+4*e+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},u),{"zDepth-1":1===e});return i.default.createElement("div",{style:c.wrap},i.default.createElement("div",{style:c.bg}),i.default.createElement("div",{style:c.content},s))};l.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},l.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},e.default=l},function(t,e,n){"use strict";var i=n(227);function r(){}function a(){}a.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var i=n(33),r=n(98),a=n(71),o=n(229),s=n(10),l=n(41),u=n(99);t.exports=function t(e,n,c,h,f){e!==n&&a(n,(function(a,l){if(f||(f=new i),s(a))o(e,n,l,c,t,h,f);else{var d=h?h(u(e,l),a,l+"",e,n,f):void 0;void 0===d&&(d=a),r(e,l,d)}}),l)}},function(t,e,n){var i=n(98),r=n(93),a=n(96),o=n(94),s=n(97),l=n(46),u=n(6),c=n(230),h=n(30),f=n(53),d=n(10),p=n(75),m=n(48),g=n(99),v=n(231);t.exports=function(t,e,n,y,b,x,_){var w=g(t,n),S=g(e,n),E=_.get(S);if(E)i(t,n,E);else{var M=x?x(w,S,n+"",t,e,_):void 0,T=void 0===M;if(T){var C=u(S),k=!C&&h(S),P=!C&&!k&&m(S);M=S,C||k||P?u(w)?M=w:c(w)?M=o(w):k?(T=!1,M=r(S,!0)):P?(T=!1,M=a(S,!0)):M=[]:p(S)||l(S)?(M=w,l(w)?M=v(w):d(w)&&!f(w)||(M=s(S))):T=!1}T&&(_.set(S,M),b(M,S,y,x,_),_.delete(S)),i(t,n,M)}}},function(t,e,n){var i=n(22),r=n(16);t.exports=function(t){return r(t)&&i(t)}},function(t,e,n){var i=n(28),r=n(41);t.exports=function(t){return i(t,r(t))}},function(t,e,n){var i=n(233),r=n(240);t.exports=function(t){return i((function(e,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&r(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++i<a;){var l=n[i];l&&t(e,l,i,o)}return e}))}},function(t,e,n){var i=n(32),r=n(234),a=n(236);t.exports=function(t,e){return a(r(t,e,i),t+"")}},function(t,e,n){var i=n(235),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=r(a.length-e,0),l=Array(s);++o<s;)l[o]=a[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=a[o];return u[e]=n(l),i(t,this,u)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var i=n(237),r=n(239)(i);t.exports=r},function(t,e,n){var i=n(238),r=n(92),a=n(32),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:a;t.exports=o},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,i=16,r=Date.now;t.exports=function(t){var e=0,a=0;return function(){var o=r(),s=i-(o-a);if(a=o,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var i=n(27),r=n(22),a=n(47),o=n(10);t.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?r(n)&&a(e,n.length):"string"==s&&e in n)&&i(n[e],t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Saturation=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=u(r),o=u(n(1)),s=u(n(242)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(245));function u(t){return t&&t.__esModule?t:{default:t}}var c=e.Saturation=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleChange=function(t){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,l.calculateChange(t,n.props.hsl,n.container),t)},n.handleMouseDown=function(t){n.handleChange(t),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,s.default)((function(t,e,n){t(e,n)}),50),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.style||{},n=e.color,i=e.white,r=e.black,s=e.pointer,l=e.circle,u=(0,o.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:i,black:r,pointer:s,circle:l}},{custom:!!this.props.style});return a.default.createElement("div",{style:u.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),a.default.createElement("div",{style:u.white,className:"saturation-white"},a.default.createElement("div",{style:u.black,className:"saturation-black"}),a.default.createElement("div",{style:u.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:u.circle}))))}}]),e}(r.PureComponent||r.Component);e.default=c},function(t,e,n){var i=n(100),r=n(10),a="Expected a function";t.exports=function(t,e,n){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return r(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),i(t,e,{leading:o,maxWait:e,trailing:s})}},function(t,e,n){var i=n(12);t.exports=function(){return i.Date.now()}},function(t,e,n){var i=n(10),r=n(39),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=l.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?a:+t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calculateChange=function(t,e,n){var i=n.getBoundingClientRect(),r=i.width,a=i.height,o="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),u=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>r?l=r:u<0?u=0:u>a&&(u=a);var c=100*l/r,h=-100*u/a+100;return{h:e.h,s:c,v:h,a:e.a,source:"rgb"}}},function(t,e,n){t.exports=n(247)},function(t,e,n){var i=n(90),r=n(89),a=n(74),o=n(6);t.exports=function(t,e){return(o(t)?i:r)(t,a(e))}},function(t,e,n){var i;!function(r){var a=/^\s+/,o=/\s+$/,s=0,l=r.round,u=r.min,c=r.max,h=r.random;function f(t,e){if(e=e||{},(t=t||"")instanceof f)return t;if(!(this instanceof f))return new f(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,i=null,s=null,l=null,h=!1,f=!1;"string"==typeof t&&(t=function(t){t=t.replace(a,"").replace(o,"").toLowerCase();var e,n=!1;if(A[t])t=A[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=H.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=H.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=H.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=H.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=H.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=H.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=H.hex8.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),a:F(e[4]),format:n?"name":"hex8"};if(e=H.hex6.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),format:n?"name":"hex"};if(e=H.hex4.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),a:F(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=H.hex3.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==typeof t&&(G(t.r)&&G(t.g)&&G(t.b)?(d=t.r,p=t.g,m=t.b,e={r:255*I(d,255),g:255*I(p,255),b:255*I(m,255)},h=!0,f="%"===String(t.r).substr(-1)?"prgb":"rgb"):G(t.h)&&G(t.s)&&G(t.v)?(i=z(t.s),s=z(t.v),e=function(t,e,n){t=6*I(t,360),e=I(e,100),n=I(n,100);var i=r.floor(t),a=t-i,o=n*(1-e),s=n*(1-a*e),l=n*(1-(1-a)*e),u=i%6;return{r:255*[n,s,o,o,l,n][u],g:255*[l,n,n,s,o,o][u],b:255*[o,o,l,n,n,s][u]}}(t.h,i,s),h=!0,f="hsv"):G(t.h)&&G(t.s)&&G(t.l)&&(i=z(t.s),l=z(t.l),e=function(t,e,n){var i,r,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=I(t,360),e=I(e,100),n=I(n,100),0===e)i=r=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=o(l,s,t+1/3),r=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*a}}(t.h,i,l),h=!0,f="hsl"),t.hasOwnProperty("a")&&(n=t.a));var d,p,m;return n=L(n),{ok:h,format:t.format||f,r:u(255,c(e.r,0)),g:u(255,c(e.g,0)),b:u(255,c(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function d(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var i,r,a=c(t,e,n),o=u(t,e,n),s=(a+o)/2;if(a==o)i=r=0;else{var l=a-o;switch(r=s>.5?l/(2-a-o):l/(a+o),a){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:s}}function p(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var i,r,a=c(t,e,n),o=u(t,e,n),s=a,l=a-o;if(r=0===a?0:l/a,a==o)i=0;else{switch(a){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:s}}function m(t,e,n,i){var r=[D(l(t).toString(16)),D(l(e).toString(16)),D(l(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function g(t,e,n,i){return[D(B(i)),D(l(t).toString(16)),D(l(e).toString(16)),D(l(n).toString(16))].join("")}function v(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s-=e/100,n.s=N(n.s),f(n)}function y(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s+=e/100,n.s=N(n.s),f(n)}function b(t){return f(t).desaturate(100)}function x(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l+=e/100,n.l=N(n.l),f(n)}function _(t,e){e=0===e?0:e||10;var n=f(t).toRgb();return n.r=c(0,u(255,n.r-l(-e/100*255))),n.g=c(0,u(255,n.g-l(-e/100*255))),n.b=c(0,u(255,n.b-l(-e/100*255))),f(n)}function w(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l-=e/100,n.l=N(n.l),f(n)}function S(t,e){var n=f(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,f(n)}function E(t){var e=f(t).toHsl();return e.h=(e.h+180)%360,f(e)}function M(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+120)%360,s:e.s,l:e.l}),f({h:(n+240)%360,s:e.s,l:e.l})]}function T(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+90)%360,s:e.s,l:e.l}),f({h:(n+180)%360,s:e.s,l:e.l}),f({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+72)%360,s:e.s,l:e.l}),f({h:(n+216)%360,s:e.s,l:e.l})]}function k(t,e,n){e=e||6,n=n||30;var i=f(t).toHsl(),r=360/n,a=[f(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,a.push(f(i));return a}function P(t,e){e=e||6;for(var n=f(t).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/e;e--;)o.push(f({h:i,s:r,v:a})),a=(a+s)%1;return o}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return t=i.r/255,e=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:r.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=L(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var a=[D(l(t).toString(16)),D(l(e).toString(16)),D(l(n).toString(16)),D(B(i))];if(r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*I(this._r,255))+"%",g:l(100*I(this._g,255))+"%",b:l(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%)":"rgba("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+g(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=f(t);n="#"+g(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},f.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:z(t[i]));t=n}return f(t,e)},f.equals=function(t,e){return!(!t||!e)&&f(t).toRgbString()==f(e).toRgbString()},f.random=function(){return f.fromRatio({r:h(),g:h(),b:h()})},f.mix=function(t,e,n){n=0===n?0:n||50;var i=f(t).toRgb(),r=f(e).toRgb(),a=n/100;return f({r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a})},f.readability=function(t,e){var n=f(t),i=f(e);return(r.max(n.getLuminance(),i.getLuminance())+.05)/(r.min(n.getLuminance(),i.getLuminance())+.05)},f.isReadable=function(t,e,n){var i,r,a=f.readability(t,e);switch(r=!1,(i=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},f.mostReadable=function(t,e,n){var i,r,a,o,s=null,l=0;r=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<e.length;u++)(i=f.readability(t,e[u]))>l&&(l=i,s=f(e[u]));return f.isReadable(t,s,{level:a,size:o})||!r?s:(n.includeFallbackColors=!1,f.mostReadable(t,["#fff","#000"],n))};var A=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=f.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(A);function L(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=u(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function N(t){return u(1,c(0,t))}function R(t){return parseInt(t,16)}function D(t){return 1==t.length?"0"+t:""+t}function z(t){return t<=1&&(t=100*t+"%"),t}function B(t){return r.round(255*parseFloat(t)).toString(16)}function F(t){return R(t)/255}var j,V,U,H=(V="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",U="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+V),rgba:new RegExp("rgba"+U),hsl:new RegExp("hsl"+V),hsla:new RegExp("hsla"+U),hsv:new RegExp("hsv"+V),hsva:new RegExp("hsva"+U),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(t){return!!H.CSS_UNIT.exec(t)}t.exports?t.exports=f:void 0===(i=function(){return f}.call(e,n,e,t))||(t.exports=i)}(Math)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Swatch=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=l(n(0)),a=l(n(1)),o=n(250),s=l(n(61));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.Swatch=function(t){var e=t.color,n=t.style,o=t.onClick,l=void 0===o?function(){}:o,u=t.onHover,c=t.title,h=void 0===c?e:c,f=t.children,d=t.focus,p=t.focusStyle,m=void 0===p?{}:p,g="transparent"===e,v=(0,a.default)({default:{swatch:i({background:e,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,d?m:{})}}),y={};return u&&(y.onMouseOver=function(t){return u(e,t)}),r.default.createElement("div",i({style:v.swatch,onClick:function(t){return l(e,t)},title:h,tabIndex:0,onKeyDown:function(t){return 13===t.keyCode&&l(e,t)}},y),f,g&&r.default.createElement(s.default,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};e.default=(0,o.handleFocus)(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleFocus=void 0;var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),s=(i=o)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.handleFocus=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function i(){var t,e,n;l(this,i);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n=u(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},u(n,e)}return c(i,n),a(i,[{key:"render",value:function(){return s.default.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(t,r({},this.props,this.state)))}}]),i}(s.default.Component)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlphaPointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.AlphaPointer=function(t){var e=t.direction,n=(0,r.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return i.default.createElement("div",{style:n.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Block=void 0;var i=c(n(0)),r=c(n(4)),a=c(n(1)),o=c(n(7)),s=c(n(13)),l=n(2),u=c(n(253));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Block=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,c=t.colors,h=t.width,f=t.triangle,d=t.styles,p=void 0===d?{}:d,m=t.className,g=void 0===m?"":m,v="transparent"===r,y=function(t,n){s.default.isValidHex(t)&&e({hex:t,source:"hex"},n)},b=(0,a.default)((0,o.default)({default:{card:{width:h,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:s.default.getContrastingColor(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},p),{"hide-triangle":"hide"===f});return i.default.createElement("div",{style:b.card,className:"block-picker "+g},i.default.createElement("div",{style:b.triangle}),i.default.createElement("div",{style:b.head},v&&i.default.createElement(l.Checkboard,{borderRadius:"6px 6px 0 0"}),i.default.createElement("div",{style:b.label},r)),i.default.createElement("div",{style:b.body},i.default.createElement(u.default,{colors:c,onClick:y,onSwatchHover:n}),i.default.createElement(l.EditableInput,{style:{input:b.input},value:r,onChange:y})))};h.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["top","hide"]),styles:r.default.object},h.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},e.default=(0,l.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlockSwatches=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(18)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.BlockSwatches=function(t){var e=t.colors,n=t.onClick,s=t.onSwatchHover,l=(0,r.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return i.default.createElement("div",{style:l.swatches},(0,a.default)(e,(function(t){return i.default.createElement(o.Swatch,{key:t,color:t,style:l.swatch,onClick:n,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}})})),i.default.createElement("div",{style:l.clear}))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=h(n(0)),r=h(n(4)),a=h(n(1)),o=h(n(18)),s=h(n(7)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(102)),u=n(2),c=h(n(255));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Circle=function(t){var e=t.width,n=t.onChange,r=t.onSwatchHover,l=t.colors,u=t.hex,h=t.circleSize,f=t.styles,d=void 0===f?{}:f,p=t.circleSpacing,m=t.className,g=void 0===m?"":m,v=(0,a.default)((0,s.default)({default:{card:{width:e,display:"flex",flexWrap:"wrap",marginRight:-p,marginBottom:-p}}},d)),y=function(t,e){return n({hex:t,source:"hex"},e)};return i.default.createElement("div",{style:v.card,className:"circle-picker "+g},(0,o.default)(l,(function(t){return i.default.createElement(c.default,{key:t,color:t,onClick:y,onSwatchHover:r,active:u===t.toLowerCase(),circleSize:h,circleSpacing:p})})))};f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),circleSize:r.default.number,circleSpacing:r.default.number,styles:r.default.object},f.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[l.red[500],l.pink[500],l.purple[500],l.deepPurple[500],l.indigo[500],l.blue[500],l.lightBlue[500],l.cyan[500],l.teal[500],l.green[500],l.lightGreen[500],l.lime[500],l.yellow[500],l.amber[500],l.orange[500],l.deepOrange[500],l.brown[500],l.blueGrey[500]],styles:{}},e.default=(0,u.ColorWrap)(f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CircleSwatch=void 0;var i=s(n(0)),r=n(1),a=s(r),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.CircleSwatch=function(t){var e=t.color,n=t.onClick,r=t.onSwatchHover,s=t.hover,l=t.active,u=t.circleSize,c=t.circleSpacing,h=(0,a.default)({default:{swatch:{width:u,height:u,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+u/2+"px "+e,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+e}}},{hover:s,active:l});return i.default.createElement("div",{style:h.swatch},i.default.createElement(o.Swatch,{style:h.Swatch,color:e,onClick:n,onHover:r,focusStyle:{boxShadow:h.Swatch.boxShadow+", 0 0 5px "+e}}))};l.defaultProps={circleSize:28,circleSpacing:14},e.default=(0,r.handleHover)(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chrome=void 0;var i=h(n(0)),r=h(n(4)),a=h(n(1)),o=h(n(7)),s=n(2),l=h(n(257)),u=h(n(259)),c=h(n(260));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Chrome=function(t){var e=t.width,n=t.onChange,r=t.disableAlpha,h=t.rgb,f=t.hsl,d=t.hsv,p=t.hex,m=t.renderers,g=t.styles,v=void 0===g?{}:g,y=t.className,b=void 0===y?"":y,x=(0,a.default)((0,o.default)({default:{picker:{width:e,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+h.r+", "+h.g+", "+h.b+", "+h.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},v),{disableAlpha:r});return i.default.createElement("div",{style:x.picker,className:"chrome-picker "+b},i.default.createElement("div",{style:x.saturation},i.default.createElement(s.Saturation,{style:x.Saturation,hsl:f,hsv:d,pointer:c.default,onChange:n})),i.default.createElement("div",{style:x.body},i.default.createElement("div",{style:x.controls,className:"flexbox-fix"},i.default.createElement("div",{style:x.color},i.default.createElement("div",{style:x.swatch},i.default.createElement("div",{style:x.active}),i.default.createElement(s.Checkboard,{renderers:m}))),i.default.createElement("div",{style:x.toggles},i.default.createElement("div",{style:x.hue},i.default.createElement(s.Hue,{style:x.Hue,hsl:f,pointer:u.default,onChange:n})),i.default.createElement("div",{style:x.alpha},i.default.createElement(s.Alpha,{style:x.Alpha,rgb:h,hsl:f,pointer:u.default,renderers:m,onChange:n})))),i.default.createElement(l.default,{rgb:h,hsl:f,hex:p,onChange:n,disableAlpha:r})))};f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object},f.defaultProps={width:225,disableAlpha:!1,styles:{}},e.default=(0,s.ColorWrap)(f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChromeFields=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(0)),a=u(n(1)),o=u(n(13)),s=n(2),l=u(n(258));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=e.ChromeFields=function(t){function e(){var t,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=i=c(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i.state={view:""},i.toggleViews=function(){"hex"===i.state.view?i.setState({view:"rgb"}):"rgb"===i.state.view?i.setState({view:"hsl"}):"hsl"===i.state.view&&(1===i.props.hsl.a?i.setState({view:"hex"}):i.setState({view:"rgb"}))},i.handleChange=function(t,e){t.hex?o.default.isValidHex(t.hex)&&i.props.onChange({hex:t.hex,source:"hex"},e):t.r||t.g||t.b?i.props.onChange({r:t.r||i.props.rgb.r,g:t.g||i.props.rgb.g,b:t.b||i.props.rgb.b,source:"rgb"},e):t.a?(t.a<0?t.a=0:t.a>1&&(t.a=1),i.props.onChange({h:i.props.hsl.h,s:i.props.hsl.s,l:i.props.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},e)):(t.h||t.s||t.l)&&("string"==typeof t.s&&t.s.includes("%")&&(t.s=t.s.replace("%","")),"string"==typeof t.l&&t.l.includes("%")&&(t.l=t.l.replace("%","")),i.props.onChange({h:t.h||i.props.hsl.h,s:Number(t.s&&t.s||i.props.hsl.s),l:Number(t.l&&t.l||i.props.hsl.l),source:"hsl"},e))},i.showHighlight=function(t){t.currentTarget.style.background="#eee"},i.hideHighlight=function(t){t.currentTarget.style.background="transparent"},c(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(t){1!==t.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var t=this,e=(0,a.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=r.default.createElement("div",{style:e.fields,className:"flexbox-fix"},r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=r.default.createElement("div",{style:e.fields,className:"flexbox-fix"},r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),r.default.createElement("div",{style:e.alpha},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=r.default.createElement("div",{style:e.fields,className:"flexbox-fix"},r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),r.default.createElement("div",{style:e.alpha},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),r.default.createElement("div",{style:e.wrap,className:"flexbox-fix"},n,r.default.createElement("div",{style:e.toggle},r.default.createElement("div",{style:e.icon,onClick:this.toggleViews,ref:function(e){return t.icon=e}},r.default.createElement(l.default,{style:e.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,i=t.width,a=void 0===i?24:i,s=t.height,l=void 0===s?24:s,u=t.style,c=void 0===u?{}:u,h=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",r({viewBox:"0 0 24 24",style:r({fill:n,width:a,height:l},c)},h),o.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChromePointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.ChromePointer=function(){var t=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.default.createElement("div",{style:t.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChromePointerCircle=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.ChromePointerCircle=function(){var t=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return i.default.createElement("div",{style:t.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Compact=void 0;var i=f(n(0)),r=f(n(4)),a=f(n(1)),o=f(n(18)),s=f(n(7)),l=f(n(13)),u=n(2),c=f(n(262)),h=f(n(263));function f(t){return t&&t.__esModule?t:{default:t}}var d=e.Compact=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.colors,f=t.hex,d=t.rgb,p=t.styles,m=void 0===p?{}:p,g=t.className,v=void 0===g?"":g,y=(0,a.default)((0,s.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},m)),b=function(t,n){t.hex?l.default.isValidHex(t.hex)&&e({hex:t.hex,source:"hex"},n):e(t,n)};return i.default.createElement(u.Raised,{style:y.Compact,styles:m},i.default.createElement("div",{style:y.compact,className:"compact-picker "+v},i.default.createElement("div",null,(0,o.default)(r,(function(t){return i.default.createElement(c.default,{key:t,color:t,active:t.toLowerCase()===f,onClick:b,onSwatchHover:n})})),i.default.createElement("div",{style:y.clear})),i.default.createElement(h.default,{hex:f,rgb:d,onChange:b})))};d.propTypes={colors:r.default.arrayOf(r.default.string),styles:r.default.object},d.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},e.default=(0,u.ColorWrap)(d)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompactColor=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(13)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.CompactColor=function(t){var e=t.color,n=t.onClick,s=void 0===n?function(){}:n,l=t.onSwatchHover,u=t.active,c=(0,r.default)({default:{color:{background:e,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:a.default.getContrastingColor(e),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return i.default.createElement(o.Swatch,{style:c.color,color:e,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+e}},i.default.createElement("div",{style:c.dot}))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompactFields=void 0;var i=o(n(0)),r=o(n(1)),a=n(2);function o(t){return t&&t.__esModule?t:{default:t}}var s=e.CompactFields=function(t){var e=t.hex,n=t.rgb,o=t.onChange,s=(0,r.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:e},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(t,e){t.r||t.g||t.b?o({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},e):o({hex:t.hex,source:"hex"},e)};return i.default.createElement("div",{style:s.fields,className:"flexbox-fix"},i.default.createElement("div",{style:s.active}),i.default.createElement(a.EditableInput,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:e,onChange:l}),i.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:l}),i.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:l}),i.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:l}))};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Github=void 0;var i=c(n(0)),r=c(n(4)),a=c(n(1)),o=c(n(18)),s=c(n(7)),l=n(2),u=c(n(265));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Github=function(t){var e=t.width,n=t.colors,r=t.onChange,l=t.onSwatchHover,c=t.triangle,h=t.styles,f=void 0===h?{}:h,d=t.className,p=void 0===d?"":d,m=(0,a.default)((0,s.default)({default:{card:{width:e,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},f),{"hide-triangle":"hide"===c,"top-left-triangle":"top-left"===c,"top-right-triangle":"top-right"===c,"bottom-left-triangle":"bottom-left"===c,"bottom-right-triangle":"bottom-right"===c}),g=function(t,e){return r({hex:t,source:"hex"},e)};return i.default.createElement("div",{style:m.card,className:"github-picker "+p},i.default.createElement("div",{style:m.triangleShadow}),i.default.createElement("div",{style:m.triangle}),(0,o.default)(n,(function(t){return i.default.createElement(u.default,{color:t,key:t,onClick:g,onSwatchHover:l})})))};h.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:r.default.object},h.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},e.default=(0,l.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GithubSwatch=void 0;var i=s(n(0)),r=n(1),a=s(r),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.GithubSwatch=function(t){var e=t.hover,n=t.color,r=t.onClick,s=t.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},u=(0,a.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:e});return i.default.createElement("div",{style:u.swatch},i.default.createElement(o.Swatch,{color:n,onClick:r,onHover:s,focusStyle:l}))};e.default=(0,r.handleHover)(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HuePicker=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=c(n(0)),a=c(n(4)),o=c(n(1)),s=c(n(7)),l=n(2),u=c(n(267));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.HuePicker=function(t){var e=t.width,n=t.height,a=t.onChange,u=t.hsl,c=t.direction,h=t.pointer,f=t.styles,d=void 0===f?{}:f,p=t.className,m=void 0===p?"":p,g=(0,o.default)((0,s.default)({default:{picker:{position:"relative",width:e,height:n},hue:{radius:"2px"}}},d));return r.default.createElement("div",{style:g.picker,className:"hue-picker "+m},r.default.createElement(l.Hue,i({},g.hue,{hsl:u,pointer:h,onChange:function(t){return a({a:1,h:t.h,l:.5,s:1})},direction:c})))};h.propTypes={styles:a.default.object},h.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:u.default,styles:{}},e.default=(0,l.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderPointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderPointer=function(t){var e=t.direction,n=(0,r.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return i.default.createElement("div",{style:n.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Material=void 0;var i=l(n(0)),r=l(n(1)),a=l(n(7)),o=l(n(13)),s=n(2);function l(t){return t&&t.__esModule?t:{default:t}}var u=e.Material=function(t){var e=t.onChange,n=t.hex,l=t.rgb,u=t.styles,c=void 0===u?{}:u,h=t.className,f=void 0===h?"":h,d=(0,r.default)((0,a.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},c)),p=function(t,n){t.hex?o.default.isValidHex(t.hex)&&e({hex:t.hex,source:"hex"},n):(t.r||t.g||t.b)&&e({r:t.r||l.r,g:t.g||l.g,b:t.b||l.b,source:"rgb"},n)};return i.default.createElement(s.Raised,{styles:c},i.default.createElement("div",{style:d.material,className:"material-picker "+f},i.default.createElement(s.EditableInput,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:n,onChange:p}),i.default.createElement("div",{style:d.split,className:"flexbox-fix"},i.default.createElement("div",{style:d.third},i.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:l.r,onChange:p})),i.default.createElement("div",{style:d.third},i.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:l.g,onChange:p})),i.default.createElement("div",{style:d.third},i.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:l.b,onChange:p})))))};e.default=(0,s.ColorWrap)(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Photoshop=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=p(n(0)),a=p(n(4)),o=p(n(1)),s=p(n(7)),l=n(2),u=p(n(270)),c=p(n(271)),h=p(n(272)),f=p(n(273)),d=p(n(274));function p(t){return t&&t.__esModule?t:{default:t}}var m=e.Photoshop=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:t.hex},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){var t=this.props,e=t.styles,n=void 0===e?{}:e,i=t.className,a=void 0===i?"":i,p=(0,o.default)((0,s.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return r.default.createElement("div",{style:p.picker,className:"photoshop-picker "+a},r.default.createElement("div",{style:p.head},this.props.header),r.default.createElement("div",{style:p.body,className:"flexbox-fix"},r.default.createElement("div",{style:p.saturation},r.default.createElement(l.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:c.default,onChange:this.props.onChange})),r.default.createElement("div",{style:p.hue},r.default.createElement(l.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:h.default,onChange:this.props.onChange})),r.default.createElement("div",{style:p.controls},r.default.createElement("div",{style:p.top,className:"flexbox-fix"},r.default.createElement("div",{style:p.previews},r.default.createElement(d.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),r.default.createElement("div",{style:p.actions},r.default.createElement(f.default,{label:"OK",onClick:this.props.onAccept,active:!0}),r.default.createElement(f.default,{label:"Cancel",onClick:this.props.onCancel}),r.default.createElement(u.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(r.default.Component);m.propTypes={header:a.default.string,styles:a.default.object},m.defaultProps={header:"Color Picker",styles:{}},e.default=(0,l.ColorWrap)(m)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPicker=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(13)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.PhotoshopPicker=function(t){var e=t.onChange,n=t.rgb,s=t.hsv,l=t.hex,u=(0,r.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),c=function(t,i){t["#"]?a.default.isValidHex(t["#"])&&e({hex:t["#"],source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},i):(t.h||t.s||t.v)&&e({h:t.h||s.h,s:t.s||s.s,v:t.v||s.v,source:"hsv"},i)};return i.default.createElement("div",{style:u.fields},i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(s.h),onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(100*s.s),onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(100*s.v),onChange:c}),i.default.createElement("div",{style:u.divider}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:c}),i.default.createElement("div",{style:u.divider}),i.default.createElement(o.EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:l.replace("#",""),onChange:c}),i.default.createElement("div",{style:u.fieldSymbols},i.default.createElement("div",{style:u.symbol},""),i.default.createElement("div",{style:u.symbol},"%"),i.default.createElement("div",{style:u.symbol},"%")))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPointerCircle=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPointerCircle=function(t){var e=t.hsl,n=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":e.l>.5});return i.default.createElement("div",{style:n.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPointerCircle=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPointerCircle=function(){var t=(0,r.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return i.default.createElement("div",{style:t.pointer},i.default.createElement("div",{style:t.left},i.default.createElement("div",{style:t.leftInside})),i.default.createElement("div",{style:t.right},i.default.createElement("div",{style:t.rightInside})))};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopButton=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopButton=function(t){var e=t.onClick,n=t.label,a=t.children,o=t.active,s=(0,r.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return i.default.createElement("div",{style:s.button,onClick:e},n||a)};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPreviews=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPreviews=function(t){var e=t.rgb,n=t.currentColor,a=(0,r.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+e.r+","+e.g+", "+e.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return i.default.createElement("div",null,i.default.createElement("div",{style:a.label},"new"),i.default.createElement("div",{style:a.swatches},i.default.createElement("div",{style:a.new}),i.default.createElement("div",{style:a.current})),i.default.createElement("div",{style:a.label},"current"))};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sketch=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=h(n(0)),a=h(n(4)),o=h(n(1)),s=h(n(7)),l=n(2),u=h(n(276)),c=h(n(277));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Sketch=function(t){var e=t.width,n=t.rgb,a=t.hex,h=t.hsv,f=t.hsl,d=t.onChange,p=t.onSwatchHover,m=t.disableAlpha,g=t.presetColors,v=t.renderers,y=t.styles,b=void 0===y?{}:y,x=t.className,_=void 0===x?"":x,w=(0,o.default)((0,s.default)({default:i({picker:{width:e,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},b),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},b),{disableAlpha:m});return r.default.createElement("div",{style:w.picker,className:"sketch-picker "+_},r.default.createElement("div",{style:w.saturation},r.default.createElement(l.Saturation,{style:w.Saturation,hsl:f,hsv:h,onChange:d})),r.default.createElement("div",{style:w.controls,className:"flexbox-fix"},r.default.createElement("div",{style:w.sliders},r.default.createElement("div",{style:w.hue},r.default.createElement(l.Hue,{style:w.Hue,hsl:f,onChange:d})),r.default.createElement("div",{style:w.alpha},r.default.createElement(l.Alpha,{style:w.Alpha,rgb:n,hsl:f,renderers:v,onChange:d}))),r.default.createElement("div",{style:w.color},r.default.createElement(l.Checkboard,null),r.default.createElement("div",{style:w.activeColor}))),r.default.createElement(u.default,{rgb:n,hsl:f,hex:a,onChange:d,disableAlpha:m}),r.default.createElement(c.default,{colors:g,onClick:d,onSwatchHover:p}))};f.propTypes={disableAlpha:a.default.bool,width:a.default.oneOfType([a.default.string,a.default.number]),styles:a.default.object},f.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},e.default=(0,l.ColorWrap)(f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SketchFields=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(13)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.SketchFields=function(t){var e=t.onChange,n=t.rgb,s=t.hsl,l=t.hex,u=t.disableAlpha,c=(0,r.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),h=function(t,i){t.hex?a.default.isValidHex(t.hex)&&e({hex:t.hex,source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,a:n.a,source:"rgb"},i):t.a&&(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,e({h:s.h,s:s.s,l:s.l,a:t.a,source:"rgb"},i))};return i.default.createElement("div",{style:c.fields,className:"flexbox-fix"},i.default.createElement("div",{style:c.double},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"hex",value:l.replace("#",""),onChange:h})),i.default.createElement("div",{style:c.single},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"r",value:n.r,onChange:h,dragLabel:"true",dragMax:"255"})),i.default.createElement("div",{style:c.single},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"g",value:n.g,onChange:h,dragLabel:"true",dragMax:"255"})),i.default.createElement("div",{style:c.single},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"b",value:n.b,onChange:h,dragLabel:"true",dragMax:"255"})),i.default.createElement("div",{style:c.alpha},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"a",value:Math.round(100*n.a),onChange:h,dragLabel:"true",dragMax:"100"})))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SketchPresetColors=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=l(n(0)),a=l(n(4)),o=l(n(1)),s=n(2);function l(t){return t&&t.__esModule?t:{default:t}}var u=e.SketchPresetColors=function(t){var e=t.colors,n=t.onClick,a=void 0===n?function(){}:n,l=t.onSwatchHover,u=(0,o.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!e||!e.length}),c=function(t,e){a({hex:t,source:"hex"},e)};return r.default.createElement("div",{style:u.colors,className:"flexbox-fix"},e.map((function(t){var e="string"==typeof t?{color:t}:t,n=""+e.color+(e.title||"");return r.default.createElement("div",{key:n,style:u.swatchWrap},r.default.createElement(s.Swatch,i({},e,{style:u.swatch,onClick:c,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+e.color}})))})))};u.propTypes={colors:a.default.arrayOf(a.default.oneOfType([a.default.string,a.default.shape({color:a.default.string,title:a.default.string})])).isRequired},e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var i=c(n(0)),r=c(n(4)),a=c(n(1)),o=c(n(7)),s=n(2),l=c(n(279)),u=c(n(281));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Slider=function(t){var e=t.hsl,n=t.onChange,r=t.pointer,u=t.styles,c=void 0===u?{}:u,h=t.className,f=void 0===h?"":h,d=(0,a.default)((0,o.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},c));return i.default.createElement("div",{style:d.wrap||{},className:"slider-picker "+f},i.default.createElement("div",{style:d.hue},i.default.createElement(s.Hue,{style:d.Hue,hsl:e,pointer:r,onChange:n})),i.default.createElement("div",{style:d.swatches},i.default.createElement(l.default,{hsl:e,onClick:n})))};h.propTypes={styles:r.default.object},h.defaultProps={pointer:u.default,styles:{}},e.default=(0,s.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderSwatches=void 0;var i=o(n(0)),r=o(n(1)),a=o(n(280));function o(t){return t&&t.__esModule?t:{default:t}}var s=e.SliderSwatches=function(t){var e=t.onClick,n=t.hsl,o=(0,r.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return i.default.createElement("div",{style:o.swatches},i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<.1&&Math.abs(n.s-.5)<.1,onClick:e,first:!0})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<.1&&Math.abs(n.s-.5)<.1,onClick:e,last:!0})),i.default.createElement("div",{style:o.clear}))};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderSwatch=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderSwatch=function(t){var e=t.hsl,n=t.offset,a=t.onClick,o=void 0===a?function(){}:a,s=t.active,l=t.first,u=t.last,c=(0,r.default)({default:{swatch:{height:"12px",background:"hsl("+e.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:l,last:u});return i.default.createElement("div",{style:c.swatch,onClick:function(t){return o({h:e.h,s:.5,l:n,source:"hsl"},t)}})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderPointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderPointer=function(){var t=(0,r.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.default.createElement("div",{style:t.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Swatches=void 0;var i=f(n(0)),r=f(n(4)),a=f(n(1)),o=f(n(18)),s=f(n(7)),l=f(n(13)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(102)),c=n(2),h=f(n(283));function f(t){return t&&t.__esModule?t:{default:t}}var d=e.Swatches=function(t){var e=t.width,n=t.height,r=t.onChange,u=t.onSwatchHover,f=t.colors,d=t.hex,p=t.styles,m=void 0===p?{}:p,g=t.className,v=void 0===g?"":g,y=(0,a.default)((0,s.default)({default:{picker:{width:e,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},m)),b=function(t,e){l.default.isValidHex(t)&&r({hex:t,source:"hex"},e)};return i.default.createElement("div",{style:y.picker,className:"swatches-picker "+v},i.default.createElement(c.Raised,null,i.default.createElement("div",{style:y.overflow},i.default.createElement("div",{style:y.body},(0,o.default)(f,(function(t){return i.default.createElement(h.default,{key:t.toString(),group:t,active:d,onClick:b,onSwatchHover:u})})),i.default.createElement("div",{style:y.clear})))))};d.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.arrayOf(r.default.string)),styles:r.default.object},d.defaultProps={width:320,height:240,colors:[[u.red[900],u.red[700],u.red[500],u.red[300],u.red[100]],[u.pink[900],u.pink[700],u.pink[500],u.pink[300],u.pink[100]],[u.purple[900],u.purple[700],u.purple[500],u.purple[300],u.purple[100]],[u.deepPurple[900],u.deepPurple[700],u.deepPurple[500],u.deepPurple[300],u.deepPurple[100]],[u.indigo[900],u.indigo[700],u.indigo[500],u.indigo[300],u.indigo[100]],[u.blue[900],u.blue[700],u.blue[500],u.blue[300],u.blue[100]],[u.lightBlue[900],u.lightBlue[700],u.lightBlue[500],u.lightBlue[300],u.lightBlue[100]],[u.cyan[900],u.cyan[700],u.cyan[500],u.cyan[300],u.cyan[100]],[u.teal[900],u.teal[700],u.teal[500],u.teal[300],u.teal[100]],["#194D33",u.green[700],u.green[500],u.green[300],u.green[100]],[u.lightGreen[900],u.lightGreen[700],u.lightGreen[500],u.lightGreen[300],u.lightGreen[100]],[u.lime[900],u.lime[700],u.lime[500],u.lime[300],u.lime[100]],[u.yellow[900],u.yellow[700],u.yellow[500],u.yellow[300],u.yellow[100]],[u.amber[900],u.amber[700],u.amber[500],u.amber[300],u.amber[100]],[u.orange[900],u.orange[700],u.orange[500],u.orange[300],u.orange[100]],[u.deepOrange[900],u.deepOrange[700],u.deepOrange[500],u.deepOrange[300],u.deepOrange[100]],[u.brown[900],u.brown[700],u.brown[500],u.brown[300],u.brown[100]],[u.blueGrey[900],u.blueGrey[700],u.blueGrey[500],u.blueGrey[300],u.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},e.default=(0,c.ColorWrap)(d)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SwatchesGroup=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(18)),o=s(n(284));function s(t){return t&&t.__esModule?t:{default:t}}var l=e.SwatchesGroup=function(t){var e=t.onClick,n=t.onSwatchHover,s=t.group,l=t.active,u=(0,r.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return i.default.createElement("div",{style:u.group},(0,a.default)(s,(function(t,r){return i.default.createElement(o.default,{key:t,color:t,active:t.toLowerCase()===l,first:0===r,last:r===s.length-1,onClick:e,onSwatchHover:n})})))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SwatchesColor=void 0;var i=l(n(0)),r=l(n(1)),a=l(n(13)),o=n(2),s=l(n(285));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.SwatchesColor=function(t){var e=t.color,n=t.onClick,l=void 0===n?function(){}:n,u=t.onSwatchHover,c=t.first,h=t.last,f=t.active,d=(0,r.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:e,marginBottom:"1px"},check:{color:a.default.getContrastingColor(e),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:c,last:h,active:f,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return i.default.createElement(o.Swatch,{color:e,style:d.color,onClick:l,onHover:u,focusStyle:{boxShadow:"0 0 4px "+e}},i.default.createElement("div",{style:d.check},i.default.createElement(s.default,null)))};e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,i=t.width,a=void 0===i?24:i,s=t.height,l=void 0===s?24:s,u=t.style,c=void 0===u?{}:u,h=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",r({viewBox:"0 0 24 24",style:r({fill:n,width:a,height:l},c)},h),o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Twitter=void 0;var i=c(n(0)),r=c(n(4)),a=c(n(1)),o=c(n(18)),s=c(n(7)),l=c(n(13)),u=n(2);function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Twitter=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,c=t.colors,h=t.width,f=t.triangle,d=t.styles,p=void 0===d?{}:d,m=t.className,g=void 0===m?"":m,v=(0,a.default)((0,s.default)({default:{card:{width:h,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},p),{"hide-triangle":"hide"===f,"top-left-triangle":"top-left"===f,"top-right-triangle":"top-right"===f}),y=function(t,n){l.default.isValidHex(t)&&e({hex:t,source:"hex"},n)};return i.default.createElement("div",{style:v.card,className:"twitter-picker "+g},i.default.createElement("div",{style:v.triangleShadow}),i.default.createElement("div",{style:v.triangle}),i.default.createElement("div",{style:v.body},(0,o.default)(c,(function(t,e){return i.default.createElement(u.Swatch,{key:e,color:t,hex:t,style:v.swatch,onClick:y,onHover:n,focusStyle:{boxShadow:"0 0 4px "+t}})})),i.default.createElement("div",{style:v.hash},"#"),i.default.createElement(u.EditableInput,{label:null,style:{input:v.input},value:r.replace("#",""),onChange:y}),i.default.createElement("div",{style:v.clear})))};h.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),triangle:r.default.oneOf(["hide","top-left","top-right"]),colors:r.default.arrayOf(r.default.string),styles:r.default.object},h.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},e.default=(0,u.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15);i.BufferGeometryUtils={computeTangents:function(t){var e=t.index,n=t.attributes;if(null!==e&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=e.array,a=n.position.array,o=n.normal.array,s=n.uv.array,l=a.length/3;void 0===n.tangent&&t.addAttribute("tangent",new i.BufferAttribute(new Float32Array(4*l),4));for(var u=n.tangent.array,c=[],h=[],f=0;f<l;f++)c[f]=new i.Vector3,h[f]=new i.Vector3;var d=new i.Vector3,p=new i.Vector3,m=new i.Vector3,g=new i.Vector2,v=new i.Vector2,y=new i.Vector2,b=new i.Vector3,x=new i.Vector3,_=t.groups;0===_.length&&(_=[{start:0,count:r.length}]);f=0;for(var w=_.length;f<w;++f)for(var S=I=(L=_[f]).start,E=I+L.count;S<E;S+=3)N(r[S+0],r[S+1],r[S+2]);var M,T,C,k=new i.Vector3,P=new i.Vector3,A=new i.Vector3,O=new i.Vector3;for(f=0,w=_.length;f<w;++f){var L,I;for(S=I=(L=_[f]).start,E=I+L.count;S<E;S+=3)R(r[S+0]),R(r[S+1]),R(r[S+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function N(t,e,n){d.fromArray(a,3*t),p.fromArray(a,3*e),m.fromArray(a,3*n),g.fromArray(s,2*t),v.fromArray(s,2*e),y.fromArray(s,2*n);var i=p.x-d.x,r=m.x-d.x,o=p.y-d.y,l=m.y-d.y,u=p.z-d.z,f=m.z-d.z,_=v.x-g.x,w=y.x-g.x,S=v.y-g.y,E=y.y-g.y,M=1/(_*E-w*S);b.set((E*i-S*r)*M,(E*o-S*l)*M,(E*u-S*f)*M),x.set((_*r-w*i)*M,(_*l-w*o)*M,(_*f-w*u)*M),c[t].add(b),c[e].add(b),c[n].add(b),h[t].add(x),h[e].add(x),h[n].add(x)}function R(t){A.fromArray(o,3*t),O.copy(A),T=c[t],k.copy(T),k.sub(A.multiplyScalar(A.dot(T))).normalize(),P.crossVectors(O,T),C=P.dot(h[t]),M=C<0?-1:1,u[4*t]=k.x,u[4*t+1]=k.y,u[4*t+2]=k.z,u[4*t+3]=M}},mergeBufferGeometries:function(t,e){for(var n=null!==t[0].index,r=new Set(Object.keys(t[0].attributes)),a=new Set(Object.keys(t[0].morphAttributes)),o={},s={},l=new i.BufferGeometry,u=0,c=0;c<t.length;++c){var h=t[c];if(n!==(null!==h.index))return null;for(var f in h.attributes){if(!r.has(f))return null;void 0===o[f]&&(o[f]=[]),o[f].push(h.attributes[f])}for(var f in h.morphAttributes){if(!a.has(f))return null;void 0===s[f]&&(s[f]=[]),s[f].push(h.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(h.userData),e){var d;if(n)d=h.index.count;else{if(void 0===h.attributes.position)return null;d=h.attributes.position.count}l.addGroup(u,d,c),u+=d}}if(n){var p=0,m=[];for(c=0;c<t.length;++c){for(var g=t[c].index,v=0;v<g.count;++v)m.push(g.getX(v)+p);p+=t[c].attributes.position.count}l.setIndex(m)}for(var f in o){var y=this.mergeBufferAttributes(o[f]);if(!y)return null;l.addAttribute(f,y)}for(var f in s){var b=s[f][0].length;if(0===b)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[f]=[];for(c=0;c<b;++c){var x=[];for(v=0;v<s[f].length;++v)x.push(s[f][v][c]);var _=this.mergeBufferAttributes(x);if(!_)return null;l.morphAttributes[f].push(_)}}return l},mergeBufferAttributes:function(t){for(var e,n,r,a=0,o=0;o<t.length;++o){var s=t[o];if(s.isInterleavedBufferAttribute)return null;if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return null;if(void 0===r&&(r=s.normalized),r!==s.normalized)return null;a+=s.array.length}var l=new e(a),u=0;for(o=0;o<t.length;++o)l.set(t[o].array,u),u+=t[o].array.length;return new i.BufferAttribute(l,n,r)},interleaveAttributes:function(t){for(var e,n=0,r=0,a=0,o=t.length;a<o;++a){var s=t[a];if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;n+=s.array.length,r+=s.itemSize}var l=new i.InterleavedBuffer(new e(n),r),u=0,c=[],h=["getX","getY","getZ","getW"],f=["setX","setY","setZ","setW"],d=0;for(o=t.length;d<o;d++){var p=(s=t[d]).itemSize,m=s.count,g=new i.InterleavedBufferAttribute(l,p,u,s.normalized);c.push(g),u+=p;for(var v=0;v<m;v++)for(var y=0;y<p;y++)g[f[y]](v,s[h[y]](v))}return c},estimateBytesUsed:function(t){var e=0;for(var n in t.attributes){var i=t.getAttribute(n);e+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}var r=t.getIndex();return e+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0},mergeVertices:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;e=Math.max(e,Number.EPSILON);for(var n={},r=t.getIndex(),a=t.getAttribute("position"),o=r?r.count:a.count,s=0,l=Object.keys(t.attributes),u={},c={},h=[],f=["getX","getY","getZ","getW"],d=0,p=l.length;d<p;d++){u[x=l[d]]=[],(E=t.morphAttributes[x])&&(c[x]=new Array(E.length).fill().map((function(){return[]})))}var m=Math.log10(1/e),g=Math.pow(10,m);for(d=0;d<o;d++){var v=r?r.getX(d):d,y="",b=0;for(p=l.length;b<p;b++)for(var x=l[b],_=(S=t.getAttribute(x)).itemSize,w=0;w<_;w++)y+=~~(S[f[w]](v)*g)+",";if(y in n)h.push(n[y]);else{for(b=0,p=l.length;b<p;b++){x=l[b];var S=t.getAttribute(x),E=t.morphAttributes[x],M=(_=S.itemSize,u[x]),T=c[x];for(w=0;w<_;w++){var C=f[w];if(M.push(S[C](v)),E)for(var k=0,P=E.length;k<P;k++)T[k].push(E[k][C](v))}}n[y]=s,h.push(s),s++}}var A=t.clone();for(d=0,p=l.length;d<p;d++){x=l[d];var O=t.getAttribute(x),L=new O.array.constructor(u[x]);if(O.isInterleavedBufferAttribute?S=new i.BufferAttribute(L,O.itemSize,O.itemSize):(S=t.getAttribute(x).clone()).setArray(L),A.addAttribute(x,S),x in c)for(b=0;b<c[x].length;b++){var I=t.morphAttributes[x][b].clone();I.setArray(new I.array.constructor(c[x][b])),A.morphAttributes[x][b]=I}}var N=Uint8Array;h.length>=Math.pow(2,8)&&(N=Uint16Array),h.length>=Math.pow(2,16)&&(N=Uint32Array);var R=new N(h);h=null;return null===r?h=new i.BufferAttribute(R,1):(h=t.getIndex().clone()).setArray(R),A.setIndex(h),A}},e.default=i.BufferGeometryUtils},function(t,e,n){t.exports=function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var n=new t.Vector3,i=new t.Vector3,r=new t.Vector3;return function(a){function o(n){void 0===n&&(n={});var i=n.material;void 0===i&&(i={});var r=n.maxFontSize;void 0===r&&(r=1/0);var o=n.minFontSize;void 0===o&&(o=0);var s=n.redrawInterval;void 0===s&&(s=1);var l=n.textSize;void 0===l&&(l=1);var u=n.texture;void 0===u&&(u={}),a.call(this,new t.SpriteMaterial(Object.assign({},i,{map:new e(u)}))),this.lastRedraw=0,this.maxFontSize=r,this.minFontSize=o,this.redrawInterval=s,this.textSize=l}a&&(o.__proto__=a),o.prototype=Object.create(a&&a.prototype),o.prototype.constructor=o;var s={isTextSprite:{configurable:!0}};return s.isTextSprite.get=function(){return!0},o.prototype.onBeforeRender=function(t,e,n){this.redraw(t,n)},o.prototype.updateScale=function(){this.scale.set(this.material.map.image.width/this.material.map.image.height,1,1).multiplyScalar(this.textSize*this.material.map.height)},o.prototype.updateMatrix=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.updateScale(),a.prototype.updateMatrix.apply(this,t)},o.prototype.redraw=function(t,e){var n=this;this.lastRedraw+this.redrawInterval<Date.now()&&(this.redrawInterval?setTimeout((function(){n.redrawNow(t,e)}),1):this.redrawNow(t,e))},o.prototype.redrawNow=function(e,a){this.updateScale(),this.material.map.fontSize=t.Math.clamp(t.Math.ceilPowerOfTwo(function(e,a,o){if(a.domElement.width&&a.domElement.height&&e.material.map.height){e.getWorldPosition(i),o.getWorldPosition(n);var s=i.distanceTo(n),l=2*Math.tan(t.Math.degToRad(o.fov)/2)*s;if(l){e.getWorldScale(r);var u=r.y*a.domElement.height/l;if(u)return Math.round(u/e.material.map.height)}}return 0}(this,e,a)),this.minFontSize,this.maxFontSize),this.lastRedraw=Date.now()},o.prototype.dispose=function(){this.material.map.dispose(),this.material.dispose()},Object.defineProperties(o.prototype,s),o}(t.Sprite)}(n(15),n(289))},function(t,e,n){t.exports=function(t){"use strict";function e(t,e,n,i,r){return[t,e,n,i+"px",r].join(" ")}function n(t){return void 0===t}return function(i){function r(n){void 0===n&&(n={});var r=n.align;void 0===r&&(r="center");var a=n.anisotropy,o=n.createCanvas;void 0===o&&(o=function(){return document.createElement("canvas")});var s=n.fillStyle;void 0===s&&(s="#fff");var l=n.fontFamily;void 0===l&&(l="sans-serif");var u=n.fontSize;void 0===u&&(u=16);var c=n.fontStyle;void 0===c&&(c="normal");var h=n.fontVariant;void 0===h&&(h="normal");var f=n.fontWeight;void 0===f&&(f="normal");var d=n.format,p=n.lineGap;void 0===p&&(p=.15);var m=n.loadFontFace;void 0===m&&(m=function(t,n,i,r){var a=e(n,i,r,1,t);return document.fonts.load(a)});var g=n.magFilter;void 0===g&&(g=t.LinearFilter);var v=n.mapping,y=n.minFilter;void 0===y&&(y=t.LinearFilter);var b=n.padding;void 0===b&&(b=.25);var x=n.strokeStyle;void 0===x&&(x="#000");var _=n.strokeWidth;void 0===_&&(_=0);var w=n.text;void 0===w&&(w="");var S,E,M=n.type,T=n.wrapS,C=n.wrapT;i.call(this,o(),v,T,C,g,y,d,M,a),this._align=r,this._fillStyle=s,this._fontFamily=l,this._fontSize=u,this._fontStyle=c,this._fontVariant=h,this._fontWeight=f,this._lineGap=p,this._padding=b,this._strokeStyle=x,this._strokeWidth=_,this._text=w,this.createCanvas=o,this.loadFontFace=m,this.redraw=(S=this.redrawNow,function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];return E||(E=new Promise((function(t){setTimeout(t,0)})).then((function(){return S.apply(t,e)})).finally((function(){E=void 0}))),E}),this.redrawNow()}i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r;var a={text:{configurable:!0},lines:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontWeight:{configurable:!0},fontVariant:{configurable:!0},fontStyle:{configurable:!0},font:{configurable:!0},fillStyle:{configurable:!0},strokeWidth:{configurable:!0},strokeWidthInPixels:{configurable:!0},strokeStyle:{configurable:!0},align:{configurable:!0},lineGap:{configurable:!0},lineGapInPixels:{configurable:!0},padding:{configurable:!0},paddingInPixels:{configurable:!0},textWidthInPixels:{configurable:!0},textHeight:{configurable:!0},textHeightInPixels:{configurable:!0},widthInPixels:{configurable:!0},height:{configurable:!0},heightInPixels:{configurable:!0}};return a.text.get=function(){return this._text},a.text.set=function(t){this._text!==t&&(this._text=t,this._lines=void 0,this._textWidthInPixels=void 0,this.redraw())},a.lines.get=function(){return n(this._lines)&&(this._lines=this.computeLines()),this._lines},r.prototype.computeLines=function(){var t=this.text;return t?t.split("\n"):[]},a.fontFamily.get=function(){return this._fontFamily},a.fontFamily.set=function(t){this._fontFamily!==t&&(this._fontFamily=t,this._textWidthInPixels=void 0,this.redraw())},a.fontSize.get=function(){return this._fontSize},a.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this._textWidthInPixels=void 0,this.redraw())},a.fontWeight.get=function(){return this._fontWeight},a.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this._textWidthInPixels=void 0,this.redraw())},a.fontVariant.get=function(){return this._fontVariant},a.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this._textWidthInPixels=void 0,this.redraw())},a.fontStyle.get=function(){return this._fontStyle},a.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this._textWidthInPixels=void 0,this.redraw())},a.font.get=function(){return e(this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily)},a.fillStyle.get=function(){return this._fillStyle},a.fillStyle.set=function(t){this._fillStyle!==t&&(this._fillStyle=t,this.redraw())},a.strokeWidth.get=function(){return this._strokeWidth},a.strokeWidth.set=function(t){this._strokeWidth!==t&&(this._strokeWidth=t,this.redraw())},a.strokeWidthInPixels.get=function(){return this._strokeWidth*this.fontSize},a.strokeStyle.get=function(){return this._strokeStyle},a.strokeStyle.set=function(t){this._strokeStyle!==t&&(this._strokeStyle=t,this.redraw())},a.align.get=function(){return this._align},a.align.set=function(t){this._align!==t&&(this._align=t,this.redraw())},a.lineGap.get=function(){return this._lineGap},a.lineGap.set=function(t){this._lineGap!==t&&(this._lineGap=t,this.redraw())},a.lineGapInPixels.get=function(){return this.fontSize*this.lineGap},a.padding.get=function(){return this._padding},a.padding.set=function(t){this._padding!==t&&(this._padding=t,this.redraw())},a.paddingInPixels.get=function(){return this.padding*this.fontSize},a.textWidthInPixels.get=function(){return n(this._textWidthInPixels)&&(this._textWidthInPixels=this.computeTextWidthInPixels()),this._textWidthInPixels},r.prototype.computeTextWidthInPixels=function(){var t=this.createCanvas,e=this.font,n=this.lines;if(n.length){var i=t().getContext("2d");return i.font=e,n.map((function(t){return i.measureText(t).width})).reduce((function(t,e){return Math.max(t,e)}))}return 0},a.textHeight.get=function(){var t=this.lineGap,e=this.lines;return e.length?e.length+t*(e.length-1):0},a.textHeightInPixels.get=function(){return this.textHeight*this.fontSize},a.widthInPixels.get=function(){return this.textWidthInPixels+this.strokeWidthInPixels+2*this.paddingInPixels},a.height.get=function(){return this.textHeight+this.strokeWidth+2*this.padding},a.heightInPixels.get=function(){return this.height*this.fontSize},r.prototype.redrawNow=function(){var t=this;return Promise.resolve().then((function(){return t.loadFontFace(t.fontFamily,t.fontStyle,t.fontVariant,t.fontWeight)})).then((function(){var e=t.image,n=e.getContext("2d");if(n.clearRect(0,0,e.width,e.height),t.widthInPixels&&t.heightInPixels){var i;switch(e.width=t.widthInPixels,e.height=t.heightInPixels,n.font=t.font,n.textBaseline="middle",t.align){case"left":n.textAlign="left",i=t.paddingInPixels+t.strokeWidthInPixels/2;break;case"right":n.textAlign="right",i=t.paddingInPixels+t.strokeWidthInPixels/2+t.textWidthInPixels;break;case"center":n.textAlign="center",i=t.paddingInPixels+t.strokeWidthInPixels/2+t.textWidthInPixels/2}var r=t.paddingInPixels+t.strokeWidthInPixels/2+t.fontSize/2;n.fillStyle=t.fillStyle,n.miterLimit=1,n.lineWidth=t.strokeWidthInPixels,n.strokeStyle=t.strokeStyle,t.lines.forEach((function(e){t.strokeWidthInPixels&&n.strokeText(e,i,r),n.fillText(e,i,r),r+=t.fontSize+t.lineGapInPixels}))}else e.width=e.height=1;t.needsUpdate=!0}))},Object.defineProperties(r.prototype,a),r}(t.Texture)}(n(15))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(0)),a=h(n(9)),o=f(n(3)),s=h(n(17)),l=h(n(62)),u=f(n(11)),c=f(n(63));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.margin={top:10,bottom:30,right:10,left:10},n.id=t.id,n.divID=t.divID,n.data=o.default.getData(n.id),n.selectedRange=[n.data.data.meta.min.z,n.data.data.meta.max.z],n.state={width:t.width,height:100},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;u.default.on("updateFocus",(function(e,n,i){e===t.id&&t.moveCurrentLine(n+t.data.data.spatial[0].z)})),c.default.on("moveCurrentLineonTimeSelector",(function(e,n){e===t.id&&t.moveCurrentLine(n)})),c.default.on("updateTimeRange",(function(e,n){e===t.id&&(t.selectedRange=n)}))}},{key:"componentDidMount",value:function(){this.initializeElements(),this.drawTimeSelector()}},{key:"initializeElements",value:function(){this.xScale=a.scaleLinear().domain([this.data.data.meta.min.z,this.data.data.meta.max.z]),this.brush=a.brushX(),this.yScale=a.scaleLinear().domain([this.data.data.meta.min.V,this.data.data.meta.max.V]),this.svg=a.select("#"+this.divID).append("svg").attr("class","timeSelector").attr("id","timeSelectorSVG_"+this.id),this.clip=this.svg.append("defs").append("clipPath").attr("id","clipTimeSelector_"+this.id).append("rect"),this.timeCurve=a.area().curve(a.curveLinear),this.timeSelector=this.svg.append("g").attr("class","timeSelector").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.timeSelectorGraph=this.timeSelector.append("path").datum(this.data.data.color).attr("class","area").attr("clip-path","url(#clipTimeSelector_"+this.id+")"),this.timeSelectorXAxis=this.timeSelector.append("g").attr("class","axis axis--x"),this.timeSelectorBrusher=this.timeSelector.append("g").attr("class","brush"),this.currentLine=this.svg.append("line").attr("stroke-width",3).attr("stroke","orange").attr("id","timeSelectorCurrent_"+this.id)}},{key:"drawTimeSelector",value:function(){this.id,this.divID;var t=this.props.width,e=this.state.height,n=t-this.margin.left-this.margin.right,i=e-this.margin.top-this.margin.bottom;this.selectedRange;this.svg.attr("width",this.props.width).attr("height",this.state.height),this.xScale.range([0,n]);this.xScale;var r=a.axisBottom(this.xScale);this.brush.extent([[0,0],[n,i]]).on("start brush",function(){var t=(a.event.selection||this.xScale.range).map(this.xScale.invert,this.xScale);a.selectAll(".scatterplots"+this.id).size()>0&&t.toString()!==this.selectedRange.toString()&&l.updateTimeRange(this.id,t)}.bind(this)),this.yScale.range([i,0]),this.clip.attr("width",n).attr("height",i),this.timeCurve.x(function(t){return this.xScale(t.z)}.bind(this)).y0(i).y1(function(t){return this.yScale(t.y)}.bind(this)),this.timeSelectorGraph.attr("d",this.timeCurve),this.timeSelectorXAxis.attr("transform","translate(0,"+i+")").call(r),this.timeSelectorBrusher.call(this.brush).call(this.brush.move,[this.invertScale(this.selectedRange[0]),this.invertScale(this.selectedRange[1])]);var o=a.drag().on("start",(function(){a.select(this).classed("selectedLine",!0)})).on("drag",function(){var t=a.select("#timeSelectorCurrent_"+this.id),e=a.event.x;e<=this.margin.left?e=this.margin.left:this.margin.left+n<=e&&(e=this.margin.left+n);t.attr("x1",e).attr("x2",e);var i=this.xScale.invert(e-this.margin.left);s.searchTime(this.id,i)}.bind(this)).on("end",(function(){a.select(this).classed("selectedLine",!1)}));this.currentLine.attr("x1",this.margin.left).attr("y1",this.margin.top).attr("x2",this.margin.left).attr("y2",i+this.margin.top).call(o)}},{key:"invertScale",value:function(t){var e=this.xScale.range(),n=this.xScale.domain();return(t-n[0])*(e[1]-e[0])/(n[1]-n[0])+e[0]}},{key:"updateTimeSelector",value:function(){this.id,this.divID;var t=this.props.width,e=this.state.height,n=t-this.margin.left-this.margin.right,i=e-this.margin.top-this.margin.bottom;this.selectedRange;this.svg.attr("width",this.props.width).attr("height",this.state.height),this.xScale.range([0,n]);this.xScale;var r=a.axisBottom(this.xScale);this.brush.extent([[0,0],[n,i]]),this.yScale.range([i,0]),this.clip.attr("width",n).attr("height",i),this.timeCurve.x(function(t){return this.xScale(t.z)}.bind(this)).y0(i).y1(function(t){return this.yScale(t.y)}.bind(this)),this.timeSelectorGraph.attr("d",this.timeCurve),this.timeSelectorXAxis.attr("transform","translate(0,"+i+")").call(r),this.timeSelectorBrusher.call(this.brush.move,[this.invertScale(this.selectedRange[0]),this.invertScale(this.selectedRange[1])]),this.currentLine.attr("y2",i+this.margin.top)}},{key:"moveCurrentLine",value:function(t){var e=a.select("#timeSelectorCurrent_"+this.id),n=this.xScale(t)+this.margin.left;e.attr("x1",n).attr("x2",n)}},{key:"render",value:function(){return a.selectAll("svg#timeSelectorSVG_"+this.id).size()>0&&this.updateTimeSelector(),r.default.createElement("div",{id:this.divID,className:"timeSelector outerContainer"})}}]),e}(r.default.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(0)),a=l(n(292)),o=l(n(3)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(62));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.menuHeight=24,n.state={scatterplotsList:[],width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;o.default.on("showInitSP",(function(e){if(e===t.id){var n=t.state.scatterplotsList;n.push({x:"z",y:"V"}),t.setState({scatterplotsList:n})}}))}},{key:"addScatterplots",value:function(){var t=document.getElementById("scatterSelectXAxis_"+this.id),e=document.getElementById("scatterSelectYAxis_"+this.id),n=t.options[t.selectedIndex].value,i=e.options[e.selectedIndex].value;if("unselected"!==n&&"unselected"!==i){var r=this.state.scatterplotsList;r.push({x:n,y:i}),this.setState({scatterplotsList:r})}}},{key:"resetScatterplotsZoom",value:function(){s.resetScatterplotsZoom(this.id)}},{key:"render",value:function(){var t=this,e=this.state.scatterplotsList.map((function(e,n){return r.default.createElement("div",{key:t.id+"_"+n,id:"scatterplots"+t.id+"_"+n,style:{display:"inline-block"}},r.default.createElement(a.default,{key:t.id+"_"+n,id:t.id,divID:"scatterplots"+t.id+"_"+n,xItem:e.x,yItem:e.y,width:t.props.width,height:t.props.height-t.menuHeight}))})),n=[];for(var i in this.data.lookup){var o="";o=this.data.lookup[i].length>1?this.data.lookup[i].join(","):this.data.lookup[i],n.push(r.default.createElement("option",{key:i,value:i},o))}return r.default.createElement("div",{className:"scatterplotsHolder",id:"scatterplotsHolder_"+this.id},r.default.createElement("div",{className:"scatterplotsMenu row"},this.fileName,r.default.createElement("button",{type:"button",className:"btn btn-primary btn-sm",id:"scatterResetBtn_"+this.id,onClick:this.resetScatterplotsZoom.bind(this)},"Reset"),r.default.createElement("select",{className:"custom-select select_axis",id:"scatterSelectXAxis_"+this.id,defaultValue:"unselected",style:{width:"6rem",height:"1.5rem",float:"right"}},r.default.createElement("option",{value:"unselected"},"x axis"),n),r.default.createElement("select",{className:"custom-select select_axis",id:"scatterSelectYAxis_"+this.id,defaultValue:"unselected",style:{width:"6rem",height:"1.5rem",float:"right"}},r.default.createElement("option",{value:"unselected"},"y axis"),n),r.default.createElement("button",{type:"button",className:"btn btn-primary btn-sm",id:"showScatter_"+this.id,style:{float:"right"},onClick:this.addScatterplots.bind(this)},"+")),r.default.createElement("div",{id:"scatterplots_"+this.id,className:"scatterplotsViewports",style:{height:this.props.height-this.menuHeight+"px",width:this.props.width+"px"}},e,r.default.createElement("div",{style:{clear:"both"}})))}}]),e}(r.default.Component);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=p(n(0)),a=d(n(9)),o=n(21),s=d(n(17)),l=d(n(8)),u=p(n(3)),c=p(n(11)),h=p(n(63)),f=p(n(5));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}a.selection.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.margin={top:10,bottom:30,right:30,left:60},n.id=t.id,n.divID=t.divID,n.SPID=t.id+"_"+t.divID.split("_")[1],n.data=u.default.getData(n.id);var i=h.default.getTimeRange(n.id);return n.timeRange=void 0===i?[n.data.data.meta.min.z,n.data.data.meta.max.z]:i,n.slicedData=n.data.data.spatial,n.xMinMax=[0,0],n.yMinMax=[0,0],n.selectedPeriod=[-1,-1],n.state={xItem:t.xItem,yItem:t.yItem,xItemonPanel:t.xItem,yItemonPanel:t.yItem,width:t.width,height:Math.max(t.height,200)},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;c.default.on("updateFocus",(function(e,n,i){e===t.id&&(i?t.highlightCurrentPlot(n):t.updateCurrentPos(n))})),c.default.on("changePlotColor",(function(e){e===t.id&&t.changePlotColor(c.default.getPlotColor(e))})),h.default.on("resetScatterplots",(function(e){e===t.id&&t.reset()})),h.default.on("updateTimeRange",(function(e,n){e===t.id&&(t.timeRange=n,t.computeRange(t.state.xItem,t.state.yItem),t.updateScatterplots(t.state.xItem,t.state.yItem))})),f.default.on("updateSelectedPeriod",(function(){t.divID.indexOf("QBE")>=0&&"QBE"===f.default.getMode()&&Number(f.default.getSource())===t.id&&(t.selectedPeriod=f.default.getSelectedPeriod(),t.highlightSelectedTimePeriod())})),f.default.on("convertResultIntoQuery",(function(e,n,i){t.divID.indexOf("QBE")>=0&&"QBE"===f.default.getMode()&&Number(e)===t.id&&(t.selectedPeriod=f.default.getSelectedPeriod(),t.highlightSelectedTimePeriod())}))}},{key:"componentDidMount",value:function(){this.initalizeElements(),this.computeRange(this.state.xItem,this.state.yItem),this.drawScatterplots()}},{key:"initalizeElements",value:function(){this.zoom=a.zoom().scaleExtent([.5,20]),this.sp=a.select("#"+this.divID).append("svg").attr("id","scatterplotsSVG_"+this.SPID).attr("class","scatterplot scatterplots"+this.id+" "+this.divID),this.xScale=a.scaleLinear(),this.xScaleTmp=this.xScale,this.xAxis=this.sp.append("g").attr("class","x_axis "+this.divID),this.xAxisText=a.selectAll("g.x_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("text-anchor","middle"),this.yScale=a.scaleLinear(),this.yScaleTmp=this.yScale,this.yAxis=this.sp.append("g").attr("class","y_axis "+this.divID).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.yAxisText=a.selectAll("g.y_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle"),this.tooltip=a.select("#"+this.divID).append("div").attr("class","tooltip "+this.divID).attr("id","tooltip_"+this.SPID).style("opacity",.75).style("visibility","hidden"),this.line=a.line().x((function(t){return t[0]})).y((function(t){return t[1]})),this.lineH=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineH "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.lineV=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineV "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.clip=this.sp.append("defs").append("clipPath").attr("id","clipScatterplots_"+this.SPID).append("rect"),this.point_g=this.sp.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")").attr("clip-path","url(#clipScatterplots_"+this.SPID+")").classed("points_g",!0);var t=this.state.xItem,e=this.state.yItem;this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").select((function(n){return t in n&&e in n?this:null})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id),this.divID.indexOf("QBE")>=0&&(this.brush=a.brushX(),this.spBrusher=this.sp.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")").attr("class","brush"))}},{key:"drawScatterplots",value:function(){this.id;var t=this.SPID,e=this.divID,n=this.margin,i=(this.data,this.props.width),r=Math.max(this.props.height,200),s=i-this.margin.left-this.margin.right,h=r-this.margin.top-this.margin.bottom,d=this.state.xItem,p=this.state.yItem;this.tooltip;this.zoom.extent([[0,0],[s,h]]).on("zoom",function(){if(e.indexOf("QBE")>=0){var t=this.sp.select("g.brush").select("rect.selection"),n=Number(t.attr("x")),i=Number(t.attr("width"));this.xScale.invert(n),this.xScale.invert(n+i)}var r=a.event.transform.rescaleX(this.xScale),o=a.event.transform.rescaleY(this.yScale);this.xScaleTmp=r,this.yScaleTmp=o,this.xMinMax=r.domain(),this.yMinMax=o.domain(),this.xAxis.call(this.xLabel.scale(r)),this.yAxis.call(this.yLabel.scale(o)),this.points.attr("cx",(function(t){return r(t[d])})).attr("cy",(function(t){return o(t[p])}));var l=a.select("circle.current."+this.divID);if(l._groups[0][0]){var u=l.attr("cx"),c=l.attr("cy");c<=0||h<=c?this.lineH.attr("transform","translate("+this.margin.left+","+c+")").style("visibility","hidden"):this.lineH.transition().duration(0).attr("transform","translate("+this.margin.left+","+c+")").style("visibility","visible"),u<=0||s<=u?this.lineV.attr("transform","translate("+u+","+this.margin.top+")").style("visibility","hidden"):this.lineV.transition().duration(0).attr("transform","translate("+u+","+this.margin.top+")").style("visibility","visible")}}.bind(this)),this.sp.attr("width",i).attr("height",r).call(this.zoom).on("dblclick.zoom",null),e.indexOf("QBE")>=0&&(this.sp.on("mousedown.zoom",null),this.brush.extent([[0,0],[s,h]]).on("start brush",function(){var t=(a.event.selection||this.xScaleTmp.range).map(this.xScaleTmp.invert,this.xScaleTmp);this.selectedPeriod=t}.bind(this)).on("end",function(){"QBE"===f.default.getMode()&&Number(f.default.getSource())===this.id&&(l.selectPeriodfromSP(this.selectedPeriod),this.highlightSelectedTimePeriod())}.bind(this)),this.spBrusher.call(this.brush)),this.xScale.domain(this.xMinMax).nice().range([0,s]),this.xScaleTmp=this.xScale,this.xMinMax=this.xScale.domain(),this.xLabel=a.axisBottom(this.xScale).ticks(10).tickSize(-h).tickFormat(o.tickFormatting),this.xAxis.attr("transform","translate("+this.margin.left+","+(this.margin.top+h)+")").call(this.xLabel),this.xAxisText.attr("x",s/2).attr("y",this.margin.bottom/2+10).text(this.data.data.lookup[d]).on("click",function(){var e=a.select("#changeXAxisPanel_"+t);if("visible"===e.style("visibility"))e.transition().duration(50).style("visibility","hidden"),this.setState({xItemonPanel:this.state.xItem});else{var i=document.getElementById("changeXAxisPanel_"+t).clientHeight,r=document.getElementById("changeXAxisPanel_"+t).clientWidth;e.style("transform","translate("+(s/2+n.left-r/2)+"px,"+(h+n.top-i)+"px)").style("visibility","visible")}}.bind(this)).on("mouseover",(function(){a.select(this).style("fill","orange")})).on("mouseout",(function(){a.select(this).style("fill","black")})),this.yScale.domain(this.yMinMax).nice().range([h,0]),this.yScaleTmp=this.yScale,this.yMinMax=this.yScale.domain(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickSize(-s).tickFormat(o.tickFormatting),this.yAxis.call(this.yLabel),this.yAxisText.attr("x",-h/2).attr("y",-this.margin.left/2-10).text(this.data.data.lookup[p]).on("click",function(){var e=a.select("#changeYAxisPanel_"+t);if("visible"===e.style("visibility"))e.transition().duration(50).style("visibility","hidden"),this.setState({yItemonPanel:this.state.yItem});else{var i=document.getElementById("changeXAxisPanel_"+t).clientHeight;document.getElementById("changeXAxisPanel_"+t).clientWidth;e.style("transform","translate("+n.left+"px,"+(h/2+n.top-i/2)+"px)").style("visibility","visible")}}.bind(this)).on("mouseover",(function(){a.select(this).style("fill","orange")})).on("mouseout",(function(){a.select(this).style("fill","black")}));var m=[[0,this.margin.top],[s,this.margin.top]],g=[[this.margin.left,0],[this.margin.left,h]];if(this.lineH.attr("d",this.line(m)),this.lineV.attr("d",this.line(g)),this.clip.attr("width",s).attr("height",h),this.data.data.merge){for(var v={},y=this.data.name.split(","),b=[],x=0;x<y.length;x++){var _=u.default.getIdFromName(y[x]);v[y[x]]=x;var w=y[x].split("+");if(w.length>1)for(var S=0;S<w.length;S++)v[w[S]]=x;b.push(c.default.getPlotColor(_))}this.points.attr("cx",function(t){return this.xScale(t[d])}.bind(this)).attr("cy",function(t){return this.yScale(t[p])}.bind(this)).attr("fill",(function(t){return b[v[t.source]]})).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var E=c.default.getPlotColor(this.id);this.points.attr("cx",function(t){return this.xScale(t[d])}.bind(this)).attr("cy",function(t){return this.yScale(t[p])}.bind(this)).attr("fill",E).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}}},{key:"spMouseOver",value:function(){var t=this.tooltip,e=this.data,n=this.state.xItem,i=this.state.yItem;return function(r){a.select(this).attr("stroke-width",1).attr("stroke","black"),t.transition().duration(50).style("visibility","visible"),t.html("<i>"+e.data.lookup[n]+"</i>: "+r[n]+"<br/><i>"+e.data.lookup[i]+"</i>: "+r[i]).style("left",a.event.pageX+20+"px").style("top",a.event.pageY-30+"px")}}},{key:"spMouseOut",value:function(){var t=this.tooltip;return function(e){var n=a.select(this);n.style("fill")!==a.color("red").toString()&&(n.attr("stroke-width",.5).attr("stroke","dimgray"),n.attr("class").indexOf("current")<0?n.attr("stroke-width",.5).attr("stroke","dimgray"):n.attr("stroke","orange").attr("stroke-width",1)),t.transition().duration(150).style("visibility","hidden")}}},{key:"spDblClick",value:function(){var t=this.id;return function(e){s.searchTime(t,e.z)}}},{key:"highlightCurrentPlot",value:function(t){var e=this.margin,n=this.divID,i=t+this.data.data.spatial[0].z,r=a.selectAll("svg."+n),o=this.state.xItem,s=this.state.yItem;function l(t){var i=a.select(this),r=(i.attr("class").split(" ")[1],a.select("svg."+n)),o=r.selectAll(".currentLineH"),s=r.selectAll(".currentLineV");o.transition().duration(0).style("visibility","visible").attr("transform","translate("+e.left+","+i.attr("cy")+")"),s.transition().duration(0).style("visibility","visible").attr("transform","translate("+i.attr("cx")+","+e.top+")")}r.each((function(t){var e=a.select(this),n=e.selectAll("circle"),r=e.attr("class").split(" ");n.attr("stroke-width",.5).attr("stroke","dimgray").attr("class",r[1]+" "+r[2]);var u=n.filter((function(t){return t.z===i&&o in t&&s in t}));u._groups.length>0&&u.attr("stroke","orange").attr("stroke-width",1).attr("class",r[1]+" "+r[2]+" current").moveToFront().each(l)}))}},{key:"updateCurrentPos",value:function(t){var e=this.sp.attr("height");if("z"===this.state.xItem){var n=a.scaleLinear().domain([this.xMinMax[0],this.xMinMax[1]]).range([0,this.props.width-this.margin.left-this.margin.right]),i=t+this.data.data.spatial[0].z;this.lineH.style("visibility","hidden"),this.lineV.transition().duration(0).style("visibility","visible").attr("transform","translate("+n(i)+","+this.margin.top+")")}else if("z"===this.state.yItem){var r=a.scaleLinear().domain([this.yMinMax[0],this.yMinMax[1]]).range([0,e-this.margin.top-this.margin.bottom]),o=t+this.data.data.spatial[0].z;this.lineV.style("visibility","hidden"),this.lineH.transition().duration(0).style("visibility","visible").attr("transform","translate("+this.margin.left+","+r(o)+")")}}},{key:"changePlotColor",value:function(t){a.select("#"+this.divID).selectAll("circle").attr("fill",t)}},{key:"onSelectXItem",value:function(t){this.setState({xItemonPanel:t.target.value})}},{key:"onSelectYItem",value:function(t){this.setState({yItemonPanel:t.target.value})}},{key:"computeRange",value:function(t,e){this.slicedData=this.data.data.spatial.filter(function(t){return this.timeRange[0]<=t.z&&t.z<=this.timeRange[1]}.bind(this)),this.xMinMax=a.extent(this.slicedData,(function(e){return e[t]})),this.yMinMax=a.extent(this.slicedData,(function(t){return t[e]}))}},{key:"updateScatterplots",value:function(t,e){if(this.xScale.domain(this.xMinMax).nice(),this.yScale.domain(this.yMinMax).nice(),this.xMinMax=this.xScale.domain(),this.yMinMax=this.yScale.domain(),this.points.remove(),this.data.data.merge){for(var n={},i=this.data.name.split(","),r=[],a=0;a<i.length;a++){var o=u.default.getIdFromName(i[a]);n[i[a]]=a;var s=i[a].split("+");if(s.length>1)for(var l=0;l<s.length;l++)n[s[l]]=a;r.push(c.default.getPlotColor(o))}this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(e){return this.xScale(e[t])}.bind(this)).attr("cy",function(t){return this.yScale(t[e])}.bind(this)).select((function(n){return t in n&&e in n?this:null})).attr("fill",(function(t){return r[n[t.source]]})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var h=c.default.getPlotColor(this.id);this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(e){return this.xScale(e[t])}.bind(this)).attr("cy",function(t){return this.yScale(t[e])}.bind(this)).select((function(n){return t in n&&e in n?this:null})).attr("fill",h).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}this.xAxis.call(this.xLabel.scale(this.xScale)),this.yAxis.call(this.yLabel.scale(this.yScale))}},{key:"highlightSelectedTimePeriod",value:function(){var t=this.selectedPeriod;this.points.attr("stroke","dimgray").attr("stroke-width",.5),this.points.select((function(e){return t[0]<=e.z&&e.z<=t[1]?this:null})).attr("stroke","#d23430").attr("stroke-width",1)}},{key:"onClickXAxisDone",value:function(t){this.setState({xItem:this.state.xItemonPanel}),this.computeRange(this.state.xItemonPanel,this.state.yItem),this.updateScatterplots(this.state.xItemonPanel,this.state.yItem),this.xAxisText.text(this.data.data.lookup[this.state.xItemonPanel]),a.select("#changeXAxisPanel_"+this.SPID).transition().duration(50).style("visibility","hidden")}},{key:"onClickYAxisDone",value:function(t){this.setState({yItem:this.state.yItemonPanel}),this.computeRange(this.state.xItem,this.state.yItemonPanel),this.updateScatterplots(this.state.xItem,this.state.yItemonPanel),this.yAxisText.text(this.data.data.lookup[this.state.yItemonPanel]),a.select("#changeYAxisPanel_"+this.SPID).transition().duration(50).style("visibility","hidden")}},{key:"reset",value:function(){this.sp.transition().duration(500).call(this.zoom.transform,a.zoomIdentity)}},{key:"render",value:function(){a.selectAll("svg#scatterplotsSVG_"+this.SPID).size()>0&&this.drawScatterplots();var t=[],e=[],n=this.data.data.lookup;for(var i in n){var o="";(o=n[i].length>1?n[i].join(","):n[i]).indexOf("JD")<0?(t.push(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectXAxisForm_"+this.SPID,value:i,checked:this.state.xItemonPanel===i,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o))),e.push(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:i,checked:this.state.yItemonPanel===i,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o)))):(t.unshift(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectXAxisForm_"+this.SPID,value:i,checked:this.state.xItemonPanel===i,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o))),e.unshift(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:i,checked:this.state.yItemonPanel===i,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o))))}return r.default.createElement("div",{id:"scatterplotsSelectors_"+this.SPID},r.default.createElement("div",{className:"overlayPanel",id:"changeXAxisPanel_"+this.SPID,style:{visibility:"hidden",textAlign:"center"}},r.default.createElement("h6",null,"Change x axis"),r.default.createElement("div",{id:"changeXAxisItem_"+this.SPID,style:{float:"left",textAlign:"left"}},r.default.createElement("form",{id:"selectXAxisForm_"+this.SPID},t)),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeXAxisBtn_"+this.SPID,onClick:this.onClickXAxisDone.bind(this)},"Done")),r.default.createElement("div",{className:"overlayPanel",id:"changeYAxisPanel_"+this.SPID,style:{visibility:"hidden",textAlign:"center"}},r.default.createElement("h6",null,"Change y axis"),r.default.createElement("div",{id:"changeYAxisItem_"+this.SPID,style:{float:"left",textAlign:"left"}},r.default.createElement("form",{id:"selectYAxisForm_"+this.SPID},e)),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeYAxisBtn_"+this.SPID,onClick:this.onClickYAxisDone.bind(this)},"Done")))}}]),e}(r.default.Component);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(0)),a=u(n(294)),o=u(n(306)),s=u(n(106)),l=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(8)),u(n(5)));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={queryMode:l.default.getMode(),menu:"Visualization"},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;l.default.on("switchQueryMode",(function(e){setTimeout((function(){return t.setState({queryMode:e})})),"QBE"===e?$("#extractionResults").css({width:"40%"}):$("#extractionResults").css({width:"70%"})}))}},{key:"render",value:function(){var t=void 0;return"QBE"===this.state.queryMode&&(t=r.default.createElement(s.default,null)),r.default.createElement("div",{className:"contents",id:"mainFeatureArea",style:{display:"flex"}},r.default.createElement(a.default,null),t,r.default.createElement(o.default,null))}}]),e}(r.default.Component);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=c(n(295)),o=c(n(304)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(8)),l=(c(n(106)),c(n(3))),u=c(n(5));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={queryMode:u.default.getMode()},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;u.default.on("switchQueryMode",(function(e){t.setState({queryMode:e})}))}},{key:"selectTab",value:function(){s.switchQueryMode("AE")}},{key:"updateTargets",value:function(){for(var t=$("input[name=targetList]:checked"),e=[],n=0;n<t.length;n++)e.push(Number(t[n].value));s.updateTarget(e)}},{key:"render",value:function(){var t=l.default.getAllIdsFileNames().map((function(t){return r.default.createElement("label",{className:"form-check form-check-inline",htmlFor:"inlineCheckbox1",key:t.id},r.default.createElement("input",{className:"form-check-input",type:"checkbox",name:"targetList",id:"checkboxTarget"+t.id,value:t.id,key:t.id}),t.name)}));return r.default.createElement("div",{id:"extractionMenu",className:"featureColumn",style:{overflow:"auto"}},r.default.createElement("div",{id:"extractionMainMenu"},r.default.createElement("div",{id:"targetDatasetsList",className:"controllersElem"},r.default.createElement("h5",null,"Target"),r.default.createElement("form",{onChange:this.updateTargets.bind(this)},t)),r.default.createElement("ul",{className:"nav nav-tabs"},r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link active","data-toggle":"tab",href:"#automaticExtraction",onClick:this.selectTab},"Automatic Extraction")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#visualQuery"},"Visual Query"))),r.default.createElement("div",{id:"extractionMenuTabs",className:"tab-content"},r.default.createElement("div",{className:"tab-pane fade show active",id:"automaticExtraction"},r.default.createElement(o.default,null)),r.default.createElement("div",{className:"tab-pane fade",id:"visualQuery"},r.default.createElement(a.default,null)))))}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=p(n(0)),a=d(n(8)),o=p(n(3)),s=p(n(5)),l=p(n(296)),u=p(n(297)),c=p(n(298)),h=d(n(64)),f=d(n(23));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={visualQuery:!1,dragSelection:!0,queryMode:s.default.getMode(),selector:!0,source:-1,selectedInterval:[-1,-1],coordinate:"rectangular",DTWMode:"DTWD"},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillMount",value:function(){var t=this;s.default.on("updateSource",(function(){t.setState({source:s.default.getSource()})})),s.default.on("switchQueryMode",(function(e){t.setState({queryMode:e}),"QBS"===e&&t.setState({DTWMode:"DTWD"}),""===$("#stepSizeOfSlidingWindow").val()&&$("#stepSizeOfSlidingWindow").val(5),"QBE"===e&&"block"===$("#resultDetailArea").css("display")&&f.toggleExtractionDetailPanel()})),s.default.on("updateSelectedPeriod",(function(){var e=s.default.getSelectedPeriod();e[1]-e[0]>0&&(t.setState({selectedInterval:e}),t.updateSelectedInterval())})),s.default.on("convertResultIntoQuery",(function(e,n,i){t.setState({source:e,selectedInterval:n})}))}},{key:"componentDidMount",value:function(){$("#stepSizeOfSlidingWindow").val(5)}},{key:"switchSelector",value:function(){this.setState({selector:!this.state.selector}),a.switchSelector()}},{key:"switchDragSelection",value:function(){this.setState({dragSelection:!this.state.dragSelection}),a.switchDragSelection()}},{key:"switchQueryMode",value:function(t){var e=$("input[name=queryMode]:checked").val();a.switchQueryMode(e)}},{key:"switchDTWMode",value:function(){var t=$("input[name=DTWType]:checked").val();this.setState({DTWMode:t})}},{key:"switchCoordinate",value:function(){var t=$("input[name=coordinate]:checked").val();this.setState({coordinate:t})}},{key:"resetSelection",value:function(){a.resetSelection()}},{key:"selectTimeInterval",value:function(){var t=$("#selectTimeIntervalInput").val();isNaN(t)||""==t||a.selectTimeInterval(this.state.source,t)}},{key:"updateSource",value:function(){var t=document.getElementById("sourceList"),e=t.selectedIndex,n=t.options[e].value;a.updateSource(n)}},{key:"updateSelectedInterval",value:function(){$("#selectedInterval").text("JD: "+this.state.selectedInterval[0].toFixed(3)+" - "+this.state.selectedInterval[1].toFixed(3)),$("#targetLengthMin").val(Math.floor(this.state.selectedInterval[1])-Math.ceil(this.state.selectedInterval[0])),$("#targetLengthMax").val(Math.floor(this.state.selectedInterval[1])-Math.ceil(this.state.selectedInterval[0]))}},{key:"updateIgnoredVariables",value:function(){var t=f.getIgnoredVariables();a.setIgnoredVariables(t)}},{key:"extractionSource",value:function(){var t=o.default.getAllIdsFileNames().map((function(t){return r.default.createElement("option",{value:t.id,key:t.id},t.name)}));return t.unshift(r.default.createElement("option",{value:"default",key:"default"},"Select a source")),r.default.createElement("div",{className:"featureElem",style:{display:"QBE"===this.state.queryMode?"block":"none"}},r.default.createElement("h5",null,"Source"),r.default.createElement("select",{className:"custom-select custom-select-sm",id:"sourceList",style:{width:"40%"},onChange:this.updateSource.bind(this)},t))}},{key:"queryModes",value:function(){return r.default.createElement("div",{className:"featureElem"},r.default.createElement("h5",null,"Query mode"),r.default.createElement("form",{className:"form-check form-check-inline",id:"queryMode",onChange:this.switchQueryMode.bind(this)},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"QBE",name:"queryMode",className:"custom-control-input",value:"QBE",checked:"QBE"===this.state.queryMode,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"QBE"},"Query-by-example")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginLeft:"0.5rem"}},r.default.createElement("input",{type:"radio",id:"QBS",name:"queryMode",className:"custom-control-input",value:"QBS",checked:"QBS"===this.state.queryMode,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"QBS"},"Query-by-sketch"))))}},{key:"QBESelection",value:function(){return r.default.createElement("div",{className:"featureElem",id:"QBEArea",style:{display:"QBE"===this.state.queryMode?"block":"none"}},r.default.createElement(u.default,null))}},{key:"QBSSelection",value:function(){var t=[];return o.default.getAllData().forEach((function(e){t.push(e.data.lookup)})),r.default.createElement("div",{className:"featureElem",id:"QBSArea",style:{display:"QBS"===this.state.queryMode?"block":"none"}},r.default.createElement(c.default,{id:this.state.source,xItem:"z",yItem:"V"}))}},{key:"selectionDetail",value:function(){var t=void 0;"QBE"===this.state.queryMode&&(t=r.default.createElement(l.default,{sourceId:this.state.source}));var e=void 0;return"QBE"===this.state.queryMode&&(e=r.default.createElement("div",{className:"featureElem",style:{position:"relative"}},r.default.createElement("h5",null,"Selection Detail"),r.default.createElement("span",{id:"selectedInterval"}),r.default.createElement("div",{id:"selectedIntervalViewArea"},t))),e}},{key:"matchingControllers",value:function(){var t=[];if(this.state.source>=0){var e=o.default.getData(Number(this.state.source)).data.lookup;for(var n in e){var i="";i=e[n].length>1?e[n].join(","):e[n],"z"!==n&&t.push(r.default.createElement("div",{className:"form-check form-check-inline",key:n},r.default.createElement("input",{className:"form-check-input",type:"checkbox",name:"QBEIgnored",value:n,id:"QBEIgnored_"+n}),r.default.createElement("label",{className:"form-check-label",htmlFor:"QBEIgnored_"+n},i)))}}return r.default.createElement("div",{className:"featureElem",style:{position:"relative"}},r.default.createElement("h5",{onClick:this.collapseMatchingOptions},"Matching"),r.default.createElement("div",{id:"matchingOptionsMain"},r.default.createElement("div",{id:"ignoredVariablesArea",style:{display:"QBE"===this.state.queryMode?"block":"none"}},r.default.createElement("h6",null,"Ignored variables"),r.default.createElement("form",{id:"QBEIgnoredVariables",onChange:this.updateIgnoredVariables.bind(this)},t)),r.default.createElement("h6",null,"Computation"),r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("div",{className:"row matchingOption",style:{paddingLeft:"15px",paddingRight:"15px"}},r.default.createElement("div",{className:"custom-control custom-switch"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"QBENormalizeSwitch"}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"QBENormalizeSwitch"},"Normalize"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col"},r.default.createElement("form",{className:"form-check form-inline",id:"coordinate",onChange:this.switchCoordinate.bind(this),style:{paddingLeft:"0px"}},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"rectangularCoordinate",name:"coordinate",value:"rectangular",checked:"rectangular"===this.state.coordinate,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"rectangularCoordinate"},"Rectangular coordinate")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginLeft:"1.5rem"}},r.default.createElement("input",{type:"radio",id:"polarCoordinate",name:"coordinate",value:"polar",checked:"polar"===this.state.coordinate,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"polarCoordinate"},"Polar coordinate")))))),r.default.createElement("h6",null,"Settings of DTW"),r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Distance metric"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"distanceMetric",style:{width:"60%"}},r.default.createElement("option",{value:"Euclidean"},"Euclidean"),r.default.createElement("option",{value:"Manhattan"},"Manhattan")))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Warping window size"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"window size",id:"warpingWindowSize",style:{width:"40%",marginRight:"0.5rem"}}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Length of the target time series"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"min",id:"targetLengthMin",style:{width:"20%",marginRight:"0.5rem"},required:!0}),"~",r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"max",id:"targetLengthMax",style:{width:"20%",marginRight:"0.5rem",marginLeft:"0.5rem"},required:!0}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Step size of sliding window"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"step size",id:"stepSizeOfSlidingWindow",style:{width:"40%",marginRight:"0.5rem"},required:!0}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Type of DTW"),r.default.createElement("div",{className:"col"},r.default.createElement("form",{className:"form-check",id:"DTWType",onChange:this.switchDTWMode.bind(this),style:{paddingLeft:"0px"}},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"DTWI",name:"DTWType",value:"DTWI",checked:"DTWI"===this.state.DTWMode,disabled:"QBS"===this.state.queryMode,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"DTWI"},"DTW",r.default.createElement("sub",null,"I"))),r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"DTWD",name:"DTWType",value:"DTWD",checked:"DTWD"===this.state.DTWMode,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"DTWD"},"DTW",r.default.createElement("sub",null,"D"))))))),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"runMatchingBtn",style:{float:"right"},onClick:this.clickRunButton.bind(this)},"Run")))}},{key:"collapseMatchingOptions",value:function(){$("#matchingOptionsMain").slideToggle()}},{key:"clickRunButton",value:function(){$("#matchingStatus").text("searching..."),setTimeout(function(){this.runMatching()}.bind(this),0)}},{key:"runMatching",value:function(){var t=$("#QBENormalizeSwitch").prop("checked"),e=document.getElementById("distanceMetric"),n=e.selectedIndex,i=e.options[n].value,r=$("#warpingWindowSize").val();r=""===r?0:Number(r);var o=$("#targetLengthMin").val(),l=$("#targetLengthMax").val();o=""===o?0:Number(o),l=""===l?0:Number(l);var u=$("#stepSizeOfSlidingWindow").val();u=""===u?1:Number(u);var c=$("input[name=DTWType]:checked").val(),d=s.default.getTarget();switch(this.state.queryMode){case"QBE":var p=Number(this.state.source);if(d.length>0){var m=s.default.getSelectedPeriod(),g=f.getIgnoredVariables(),v={};if(v.QBE={normalize:t,coordinate:this.state.coordinate,distanceMetric:i,warpingWindowSize:r,timeSliceLength:[o,l],slidingWindow:u,DTWType:c},NaN!==p){var y=void 0,b=h.makeQueryfromQBE(p,m,g,"rectangular");if("rectangular"===this.state.coordinate)y=h.runMatching(b,d,c,t,i,r,u,[o,l]);else if("polar"===this.state.coordinate){var x=h.makeQueryfromQBE(p,m,g,this.state.coordinate);y=h.runMatching(x,d,c,t,i,r,u,[o,l])}y=h.removeOverlappingQBE(p,m,y),a.setExtractionResults(v,y,b,g),h.setDefaltOrderOfResults()}}break;case"QBS":if(d.length>0){var _=s.default.getQuery(),w=[];for(var S in _)if(Array.isArray(_[S])){if(_[S].indexOf(null)<0)continue;for(var E=!0,M=0;M<_[S].length;M++)if(null!==_[S][M]){E=!1;break}E&&w.push(S)}var T=document.getElementById("widthVariables"),C=T.selectedIndex,k=T.options[C].innerText,P={};P.QBS={width:!!$("#widthDetectionSwitch").prop("checked")&&k,sketchLength:$("#periodOfSketchQuery").val(),normalize:t,coordinate:this.state.coordinate,distanceMetric:i,warpingWindowSize:r,timeSliceLength:[o,l],slidingWindow:u,DTWType:c};var A=void 0;if("rectangular"===this.state.coordinate)A=h.runMatchingSketch(_,d,c,t,i,r,u,[o,l]);else if("polar"===this.state.coordinate){var O=h.makeQueryPolarQBS(_);A=h.runMatchingSketch(O,d,c,t,i,r,u,[o,l])}a.setExtractionResults(P,A,_,w),h.setDefaltOrderOfResults()}}h.showExtractionResults()}},{key:"render",value:function(){return r.default.createElement("div",{id:"featureArea",className:"controllersElem featureArea"},this.queryModes(),r.default.createElement("div",{id:"queryModes"},this.QBESelection(),this.QBSSelection()),this.selectionDetail(),this.matchingControllers())}}]),e}(r.default.Component);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(15)),o=c(n(3)),s=c(n(11)),l=c(n(5)),u=c(n(103));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.sourceId=t.sourceId,n.selectedPeriod=l.default.getSelectedPeriod(),n.data=o.default.getData(n.sourceId),n.texture=s.default.getTexture(),n.segment=s.default.getSegment(),n.division=s.default.getDivision(),n.ignoredVariables=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){var t=this;$("#selectedIntervalViewArea").width();return r.default.createElement("div",{className:"TimeTubes",id:"selectedTimeSliceView",ref:function(e){t.mount=e}},r.default.createElement("div",{className:"overlayHidingPanel"}))}},{key:"componentWillMount",value:function(){var t=this;s.default.on("switch",(function(){t.camera&&t.switchCamera()})),l.default.on("updateSource",(function(){t.sourceId=l.default.getSource(),t.data=o.default.getData(t.sourceId),t.setUpScene()})),l.default.on("resetSelection",(function(){t.tube&&t.deselectAll()})),l.default.on("updateSelectedPeriod",(function(){t.selectedPeriod=l.default.getSelectedPeriod(),t.updateTimePeriod()})),l.default.on("selectPeriodfromSP",(function(e){t.selectedPeriod=l.default.getSelectedPeriod(),t.selectedPeriod[1]-t.selectedPeriod[0]>0?t.updateTimePeriod():t.tube&&t.deselectAll()})),l.default.on("selectTimeInterval",(function(e,n){t.selectedPeriod=l.default.getSelectedPeriod(),console.log(t.selectedPeriod),t.updateTimePeriod()})),l.default.on("setIgnoredVariables",(function(e){t.ignoredVariables=e,t.redrawTube()})),l.default.on("convertResultIntoQuery",(function(e,n,i){if("QBE"===l.default.getMode()){t.sourceId=e,t.selectedPeriod=n,t.ignoredVariables=i,t.data=o.default.getData(t.sourceId),t.tube||t.setUpScene();for(var r=document.getElementById("sourceList"),a=0;a<r.options.length;a++)if(Number(r.options[a].value)===e){r.selectedIndex=a;break}if($("#selectedInterval").text("JD: "+n[0].toFixed(3)+" - "+n[1].toFixed(3)),$("#targetLengthMin").val(Math.floor(n[1])-Math.ceil(n[0])),$("#targetLengthMax").val(Math.floor(n[1])-Math.ceil(n[0])),i)$("input[name=QBEIgnored]").each((function(t,e){i.indexOf(e.value)<0?e.checked=!1:e.checked=!0}))}t.updateTimePeriod(),t.redrawTube()}))}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"componentDidMount",value:function(){this.initializeScene()}},{key:"initializeScene",value:function(){var t=$("#selectedIntervalViewArea").width(),e=t;this.scene=new a.Scene,this.setCameras(),this.renderer=new a.WebGLRenderer,this.renderer.setClearColor("#000000"),this.renderer.setSize(t,e),this.renderer.domElement.id="selectedTimeSliceView",this.mount.appendChild(this.renderer.domElement);var n=new a.DirectionalLight(16777215,.7);n.position.set(-20,40,60),this.scene.add(n);var i=new a.AmbientLight(2697513);this.scene.add(i);var r=new a.AxesHelper(1e3);this.scene.add(r),this.renderScene(),this.start(),this.addControls(),this.sourceId>=0&&this.setPlaceHolder()}},{key:"setUpScene",value:function(){this.updateCameras(),this.setPlaceHolder(),this.renderScene(),this.start(),this.addControls()}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate.bind(this)))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.renderScene(),this.frameId=window.requestAnimationFrame(this.animate.bind(this))}},{key:"renderScene",value:function(){this.renderer&&this.renderer.render(this.scene,this.camera)}},{key:"setCameras",value:function(){var t=void 0;t=this.sourceId>=0?s.default.getCameraProp(this.sourceId):s.default.getDefaultCameraProp(),this.cameraSet={},this.cameraSet.perspective=new a.PerspectiveCamera(t.fov,1,.1,t.far);var e=50*t.depth,n=50*t.depth*1;this.cameraSet.orthographic=new a.OrthographicCamera(-n/2,n/2,e/2,-e/2,.1,t.far),"Perspective"===t.type?this.camera=this.cameraSet.perspective:this.camera=this.cameraSet.orthographic,this.camera.position.z=50,this.camera.lookAt(-this.scene.position)}},{key:"updateCameras",value:function(){var t=s.default.getCameraProp(this.sourceId);this.cameraSet.perspective.fov=t.fov,this.cameraSet.perspective.far=t.far;var e=50*t.depth,n=50*t.depth*1;this.cameraSet.orthographic.left=-n/2,this.cameraSet.orthographic.right=n/2,this.cameraSet.orthographic.top=e/2,this.cameraSet.orthographic.bottom=-e/2,this.cameraSet.orthographic.far=t.far,"Perspective"===t.type?this.camera=this.cameraSet.perspective:this.camera=this.cameraSet.orthographic,this.camera.position.z=50,this.camera.lookAt(-this.scene.position)}},{key:"setPlaceHolder",value:function(){var t=s.default.getTexture(this.sourceId),e=new Float32Array(0),n=new Float32Array(0),i=new Float32Array(0),r=new Float32Array(0),o=new Uint32Array(0),l=new a.BufferGeometry;l.addAttribute("position",new a.BufferAttribute(new Float32Array(e),3)),l.addAttribute("normal",new a.BufferAttribute(i,3)),l.addAttribute("colorData",new a.BufferAttribute(new Float32Array(n),2)),l.addAttribute("selected",new a.BufferAttribute(new Float32Array(r),1)),l.setIndex(new a.BufferAttribute(new Uint32Array(o),1)),l.computeVertexNormals();var u=new a.ShaderMaterial({vertexShader:document.getElementById("vertexShader_tube").textContent,fragmentShader:document.getElementById("fragmentShader_tube").textContent,uniforms:{lightPosition:{value:new a.Vector3(-20,40,60)},tubeNum:{value:1},shade:{value:!1},texture:{value:t},minmaxH:{value:new a.Vector2(this.data.data.meta.min.H,this.data.data.meta.max.H)},minmaxV:{value:new a.Vector2(this.data.data.meta.min.V,this.data.data.meta.max.V)},flagH:{value:!0},flagV:{value:!0}},side:a.DoubleSide,transparent:!0});this.tube=new a.Mesh(l,u),this.tube.rotateY(Math.PI),this.scene.add(this.tube)}},{key:"switchCamera",value:function(){var t=this.camera.position,e=s.default.getCameraProp(this.sourceId);"Perspective"===e.type?(this.camera=this.cameraSet.perspective,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)):"Orthographic"===e.type&&(this.camera=this.cameraSet.orthographic,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)),this.addControls()}},{key:"addControls",value:function(){this.controls=new u.default(this.camera,this.renderer.domElement),this.controls.position0.set(0,0,50),this.controls.screenSpacePanning=!1,this.controls.enableZoom=!1}},{key:"drawSelectedTube",value:function(t,e,n){this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.normal.needsUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0,this.tube.geometry.index.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(t),3),this.tube.geometry.attributes.colorData=new a.BufferAttribute(new Float32Array(e),3),this.tube.geometry.attributes.selected=new a.BufferAttribute(new Float32Array(t.length/3),1),this.tube.geometry.attributes.normal=new a.BufferAttribute(new Float32Array(t.length),1),this.tube.geometry.index=new a.BufferAttribute(new Uint32Array(n),1),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}},{key:"deselectAll",value:function(){this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.normal.needsUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0,this.tube.geometry.index.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(0),3),this.tube.geometry.attributes.colorData=new a.BufferAttribute(new Float32Array(0),2),this.tube.geometry.attributes.selected=new a.BufferAttribute(new Float32Array(0),1),this.tube.geometry.attributes.normal=new a.BufferAttribute(new Float32Array(0),1),this.tube.geometry.index=new a.BufferAttribute(new Uint32Array(0),1),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}},{key:"extractTubeAttributes",value:function(){for(var t=l.default.getTubeAttributes(Number(this.sourceId)),e=Math.ceil(this.selectedPeriod[0]-this.data.data.meta.min.z)*this.division*this.segment,n=Math.ceil(this.selectedPeriod[1]-this.data.data.meta.min.z)*this.division*this.segment,i=t.position.slice(3*e,3*n),r=t.color.slice(3*e,3*n),a=i[2],o=0;o<i.length/3;o++)i[3*o+2]-=a,r[3*o+2]=1;return{pos:i,col:r,indices:t.indices.slice(0,((n-e)/this.segment-1)*(this.segment-1)*3*2)}}},{key:"updateTimePeriod",value:function(){var t=this.extractTubeAttributes();this.drawSelectedTube(t.pos,t.col,t.indices)}},{key:"redrawTube",value:function(){for(var t=this.ignoredVariables?this.ignoredVariables.indexOf("x"):-1,e=this.ignoredVariables?this.ignoredVariables.indexOf("y"):-1,n=this.ignoredVariables?this.ignoredVariables.indexOf("r_x"):-1,i=this.ignoredVariables?this.ignoredVariables.indexOf("r_y"):-1,r=this.ignoredVariables?this.ignoredVariables.indexOf("H"):-1,o=this.ignoredVariables?this.ignoredVariables.indexOf("V"):-1,s=this.data.data.meta.min.z,l=this.data.data.meta.max.z,u=this.data.data.meta.range,c=(l-s)/(this.division*Math.ceil(l-s)),h=Math.ceil((this.data.data.splines.position.getPoint(1).z-this.data.data.splines.position.getPoint(0).z)/c),f=Math.ceil((this.data.data.splines.color.getPoint(1).z-this.data.data.splines.color.getPoint(0).z)/c),d=this.data.data.splines.position.getSpacedPoints(h),p=this.data.data.splines.radius.getSpacedPoints(h),m=(this.data.data.splines.color.getSpacedPoints(f),2*Math.PI/(this.segment-1)),g=Math.ceil((this.selectedPeriod[0]-s)/c),v=this.tube.geometry.attributes.position.array.length/3/this.segment,y=(Math.ceil((this.selectedPeriod[1]-s)/c),[]),b=void 0,x=void 0,_=void 0,w=void 0,S=void 0,E=g;E<g+v;E++){x=t>=0?0:d[E].x,_=e>=0?0:d[E].y,w=n>=0?1/u:p[E].x,S=i>=0?1/u:p[E].y;for(var M=0;M<this.segment;M++)b=m*M,y.push(-1*(x*u+w*u*Math.cos(b))),y.push(_*u+S*u*Math.sin(b)),y.push(d[E].z-this.selectedPeriod[0])}this.tube.material.uniforms.flagH.value=!(r>=0),this.tube.material.uniforms.flagV.value=!(o>=0),this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(y),3),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(8)),o=s(n(3));n(4);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={dragSelection:!0,selector:!0},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"extractionSource",value:function(){var t=o.default.getAllIdsFileNames().map((function(t){return r.default.createElement("option",{value:t.id,key:t.id},t.name)}));return t.unshift(r.default.createElement("option",{value:"default",key:"default"},"Select a source")),r.default.createElement("div",{className:"featureElem"},r.default.createElement("h5",null,"Source"),r.default.createElement("select",{className:"custom-select custom-select-sm",id:"sourceList",style:{width:"40%"},onChange:this.updateSource.bind(this)},t))}},{key:"updateSource",value:function(){var t=document.getElementById("sourceList"),e=t.selectedIndex,n=t.options[e].value;a.updateSource(n)}},{key:"QBESelector",value:function(){return r.default.createElement("div",{className:"featureElem"},r.default.createElement("h5",null,"Selection"),r.default.createElement("div",{className:"form-check"},r.default.createElement("input",{className:"form-check-input",type:"checkbox",id:"checkboxDragTube",value:"option1",checked:this.state.dragSelection,onChange:this.switchDragSelection.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1"},"Selection by drag")),r.default.createElement("div",{id:"selectTimeInterval",className:"form-row featureRow"},r.default.createElement("div",{className:"input-group input-group-sm",style:{width:"10rem",marginRight:"1.5rem"}},r.default.createElement("span",{style:{marginRight:"0.3rem"}},"Select"),r.default.createElement("input",{type:"text",className:"form-control custom-input",id:"selectTimeIntervalInput"}),r.default.createElement("span",{style:{marginLeft:"0.3rem"}},"days")),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"selectTimeIntervalBtn",style:{right:"0"},onClick:this.selectTimeInterval.bind(this)},"Select")),r.default.createElement("button",{id:"resetSelectionBtn",className:"btn btn-primary btn-sm featureRow",onClick:this.resetSelection.bind(this)},"Deselect all"))}},{key:"switchSelector",value:function(){this.setState({selector:!this.state.selector}),a.switchSelector()}},{key:"selectSelect",value:function(){this.setState({selector:!0}),$("img[name=QBESelector]").each((function(){$(this).removeClass("selected")})),$("#QBESelect").addClass("selected")}},{key:"selectDeselect",value:function(){this.setState({selector:!1}),$("img[name=QBESelector]").each((function(){$(this).removeClass("selected")})),$("#QBEDeselect").addClass("selected")}},{key:"selectTimeInterval",value:function(){var t=$("#selectTimeIntervalInput").val();isNaN(t)||""==t||a.selectTimeInterval(t)}},{key:"switchDragSelection",value:function(){this.setState({dragSelection:!this.state.dragSelection}),a.switchDragSelection()}},{key:"resetSelection",value:function(){a.resetSelection()}},{key:"render",value:function(){return r.default.createElement("div",{id:"QBEQuerying"},this.extractionSource(),this.QBESelector())}}]),e}(r.default.Component);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=d(n(0)),a=d(n(104)),o=f(n(9)),s=n(21),l=f(n(8)),u=n(42),c=d(n(5)),h=d(n(3));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=n.updateLookup(),r=c.default.getTarget(),a={},o={},s=[],l=[];for(var u in i){s=[],l=[];for(var f=0;f<r.length;f++)s.push(h.default.getData(r[f]).data.meta.min[u]),l.push(h.default.getData(r[f]).data.meta.max[u]);a[u]=s,o[u]=l}return n.state={xItem:t.xItem,yItem:t.yItem,xItemonPanel:t.xItem,yItemonPanel:t.yItem,size:0,lookup:i,selector:"pen",targetList:r,minList:a,maxList:o,detectWidth:!0,assignVariables:!1},n.margin={bottom:20,left:20},n.curveSegment=10,n.sketching=!1,n.touch=!1,n.path=null,n.pathWidth=null,n.penSizeCircle=null,n.radiuses=null,n.segPoints=[],n.pathUpper=null,n.pathLower=null,n.highlightedPoint=null,n.highlightedPointIdx=-1,n.controlPoints=[],n.widthVar=null,n.timeStamps=[],n.selectedIdx=-1,n.selectedHandle=null,n.selectedPoint=null,n.xMinMax=[],n.yMinMax=[],c.default.on("updateTarget",(function(){var t=c.default.getTarget(),e=n.extractMinMaxList(t),i=n.updateLookup();n.setState({targetList:t,minList:e.minList,maxList:e.maxList,lookup:i});var r=n.computeMinMaxValue(e.minList,e.maxList);n.xMinMax=r.xMinMax,n.yMinMax=r.yMinMax,n.xAxisText.text(n.state.lookup[n.state.xItem]),n.yAxisText.text(n.state.lookup[n.state.yItem]),n.updateAxis(),n.updateWidthVariable()})),c.default.on("switchQueryMode",(function(t){if("QBS"===t){var e=c.default.getTarget(),i=n.extractMinMaxList(e);n.setState({targetList:e,minList:i.minList,maxList:i.maxList});var r=n.computeMinMaxValue(i.minList,i.maxList);n.xMinMax=r.xMinMax,n.yMinMax=r.yMinMax,n.xAxisText.text(n.state.lookup[n.state.xItem]),n.yAxisText.text(n.state.lookup[n.state.yItem]),n.updateAxis()}})),c.default.on("convertResultIntoQuery",(function(t,e,i){if("QBS"===c.default.getMode()){n.path&&n.path.remove(),n.pathWidth&&n.pathWidth.remove(),n.penSizeCircle&&n.penSizeCircle.remove();for(var r=0;r<n.controlPoints.length;r++)n.controlPoints[r].label&&(n.controlPoints[r].label.remove(),n.controlPoints[r].label=null,n.controlPoints[r].labelRect.remove(),n.controlPoints[r].labelRect=null);n.controlPoints=[],n.timeStamps=[],n.radiuses=[],n.pathUpper=null,n.pathLower=null,n.segPoints=[],n.transformDataIntoSketch(t,e,i)}})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"updateLookup",value:function(){var t=[];h.default.getAllData().forEach((function(e){t.push(e.data.lookup)}));var e={};return t.forEach((function(t){var n=function(n){e[n]?t[n].forEach((function(t){e[n].indexOf(t)<0&&e[n].push(t)})):e[n]=t[n]};for(var i in t)n(i)})),e}},{key:"extractMinMaxList",value:function(t){var e={},n={},i=[],r=[];for(var a in this.state.lookup){i=[],r=[];for(var o=0;o<t.length;o++)i.push(h.default.getData(t[o]).data.meta.min[a]),r.push(h.default.getData(t[o]).data.meta.max[a]);e[a]=i,n[a]=r}return{minList:e,maxList:n}}},{key:"computeMinMaxValue",value:function(t,e){var n=Math.min.apply(null,t[this.state.xItem]),i=Math.max.apply(null,e[this.state.xItem]),r=Math.min.apply(null,t[this.state.yItem]),a=Math.max.apply(null,e[this.state.yItem]);return"z"===this.state.xItem&&(i-=n,n=0),"z"===this.state.yItem&&(a-=r,r=0),{xMinMax:[n,i],yMinMax:[r,a]}}},{key:"componentDidMount",value:function(){if(this.initCanvas(),this.state.targetList.length>0){var t=this.computeMinMaxValue(this.state.minList,this.state.maxList);this.xMinMax=t.xMinMax,this.yMinMax=t.yMinMax,this.updateAxis(),this.updateWidthVariable()}}},{key:"initCanvas",value:function(){var t=Number($("#featureArea").css("padding-left").replace("px","")),e=Number($("#featureArea").css("padding-right").replace("px","")),n=Math.floor(.3*$("#mainFeatureArea").width()-t-e);this.setState({size:n});var i=o.select("#QBSCanvasArea").style("position","relative").style("padding-bottom",n+"px");this.svg=i.append("svg").attr("id","QBSSketchPadSVG").attr("width",n).attr("height",n).style("position","absolute"),this.canvas=i.append("canvas").attr("width",n+"px !important").attr("height",n+"px !important").attr("id","QBSSketchPad").style("position","absolute").style("border","1px solid lightgray"),a.default.setup(this.canvas.node()),this.xAxis=this.svg.append("g").attr("class","x_axis"),this.xAxisText=i.append("text").attr("class","axisLabel").attr("id","sketchPadXLabel").attr("fill","black").attr("text-anchor","middle").style("font-size","0.7rem").style("position","absolute").style("background-color","white").style("left",n/2+"px").style("top",n-18+"px").text(this.state.lookup[this.state.xItem]).on("click",this.CanvasXLabelOnClick().bind(this)),this.xScale=o.scaleLinear(),this.yAxis=this.svg.append("g").attr("class","y_axis"),this.yAxisText=i.append("text").attr("class","axisLabel").attr("id","sketchPadYLabel").attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle").style("font-size","0.7rem").style("position","absolute").style("background-color","white").style("left",this.margin.left/2+"px").style("top",n/2+"px").text(this.state.lookup[this.state.yItem]).on("click",this.CanvasYLabelOnClick().bind(this)),this.yScale=o.scaleLinear(),this.tool=new a.default.Tool,this.tool.minDistance=15,this.tool.onMouseDown=this.CanvasOnMouseDown().bind(this),this.tool.onMouseDrag=this.CanvasOnMouseDrag().bind(this),this.tool.onMouseUp=this.CanvasOnMouseUp().bind(this),document.getElementById("QBSSketchPad").addEventListener("touchmove",this.CanvasOnTouchMove().bind(this)),a.default.view.onFrame=this.CanvasOnFrame().bind(this)}},{key:"CanvasOnFrame",value:function(){return function(t){if(this.sketching&&!this.touch&&this.penSizeCircle){var e=this.penSizeCircle.position,n=Date.now()-this.timeStamps[this.timeStamps.length-1],i=Math.min(n/1e3*30+2.5,100);this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(e,i),this.penSizeCircle.strokeColor="#325D88"}}}},{key:"clearCanvas",value:function(){this.path&&this.path.remove(),this.pathWidth&&this.pathWidth.remove(),this.penSizeCircle&&this.penSizeCircle.remove();for(var t=0;t<this.controlPoints.length;t++)this.controlPoints[t].label&&(this.controlPoints[t].label.remove(),this.controlPoints[t].label=null,this.controlPoints[t].labelRect.remove(),this.controlPoints[t].labelRect=null);this.controlPoints=[],this.timeStamps=[],this.radiuses=[]}},{key:"CanvasOnTouchMove",value:function(){return function(t){if(this.sketching&&this.touch&&this.penSizeCircle){var e=this.penSizeCircle.position,n=97.5*t.touches[0].force+2.5;this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(e,n),this.penSizeCircle.strokeColor="#325D88"}}}},{key:"CanvasOnMouseDown",value:function(){return function(t){var e=void 0;if(this.state.assignVariables){if(e=null,e=this.path.hitTest(t.point,{segments:!0,tolerance:5})){this.highlightedPointIdx=e.segment.index,this.highlightedPoint&&this.highlightedPoint.remove(),this.highlightedPoint=new a.default.Path.Circle({center:e.point,radius:5,fillColor:"#d23430"});var n=$("#controlPointPopover");n.css("display","block");var i=$("#controlPointPopoverArrow"),r=n.outerWidth()+8,o=n.outerHeight()+8,l=null,u=void 0,c={},h=this.state.size-e.point.x,f=e.point.x,d=e.point.y,p=this.state.size-e.point.y;for(var m in h>=r?(l="right",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x,y:e.point.y-o/2},c={top:o/2-16+"px"}):f>=r?(l="left",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-r,y:e.point.y-o/2},c={top:o/2-16+"px"}):d>=o?(l="top",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-r/2,y:e.point.y-o},c={left:r/2-16+"px"}):p>=o&&(l="bottom",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-r/2,y:e.point.y},c={left:r/2-16+"px"}),u.x<0?(u.x=0,c={left:e.point.x-16+"px"}):u.x>this.state.size-r&&(u.x=this.state.size-r,c={left:this.state.size-e.point.x-16+"px"}),u.y<0?(u.y=0,c={top:e.point.y-16+"px"}):u.y>this.state.size-o&&(u.y=this.state.size-o,c={top:o-(this.state.size-e.point.y)-16+"px"}),n.css({left:u.x+"px",top:u.y+"px"}),i.css({top:"",left:""}),i.css(c),this.controlPoints[this.highlightedPointIdx].assignedVariables)if(this.controlPoints[this.highlightedPointIdx].assignedVariables[m].length<=0)if(m===this.state.xItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.xScale.invert(this.controlPoints[this.highlightedPointIdx].position.x)));else if(m===this.state.yItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.yScale.invert(this.controlPoints[this.highlightedPointIdx].position.y)));else if(m!==this.widthVar)$("#valueAssignmentCheckbox_"+m).prop("checked",!1),$("#valueAssignmentCheckbox_"+m).prop("disabled",!1),$("#slider_"+m).css("display","block"),$("#slider_"+m).slider("option","values",[0,100]),$("#slider_"+m).slider("option","disabled",!0),$("#widthValue_"+m).css("display","none");else{$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none");var g=Math.min.apply(null,this.radiuses),v=Math.max.apply(null,this.radiuses),y=Math.min.apply(null,this.state.minList[m]),b=Math.max.apply(null,this.state.maxList[m]),x=$("#sketchWidthSlider").slider("option","values"),_=x[0]/100*(b-y)+y,w=x[1]/100*(b-y)+y;$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)((w-_)/(v-g)*(this.radiuses[this.highlightedPointIdx]-g)+_))}else if(m===this.state.xItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.xScale.invert(this.controlPoints[this.highlightedPointIdx].position.x)));else if(m===this.state.yItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.yScale.invert(this.controlPoints[this.highlightedPointIdx].position.y)));else if(m!==this.widthVar){$("#valueAssignmentCheckbox_"+m).prop("checked",!0),$("#valueAssignmentCheckbox_"+m).prop("disabled",!1);var S=Math.min.apply(null,this.state.minList[m]),E=Math.max.apply(null,this.state.maxList[m]);$("#slider_"+m).slider("option","values",[(this.controlPoints[this.highlightedPointIdx].assignedVariables[m][0]-S)/(E-S)*100,(this.controlPoints[this.highlightedPointIdx].assignedVariables[m][1]-S)/(E-S)*100]),$("#slider_"+m).slider("option","disabled",!1)}else{$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none");var M=Math.min.apply(null,this.radiuses),T=Math.max.apply(null,this.radiuses),C=Math.min.apply(null,this.state.minList[m]),k=Math.max.apply(null,this.state.maxList[m]),P=$("#sketchWidthSlider").slider("option","values"),A=P[0]/100*(k-C)+C,O=P[1]/100*(k-C)+C;$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)((O-A)/(T-M)*(this.radiuses[this.highlightedPointIdx]-M)+A))}}}else{var L=t.event.type;switch(this.state.selector){case"pen":this.sketching=!0,"touchstart"===L&&(this.touch=!0),this.clearCanvas(),this.state.detectWidth&&(this.radiuses.push(0),this.pathWidth=new a.default.Path({segments:[t.point],strokeColor:"#325D88",strokeWidth:1,fillColor:"#29ABE0",opacity:.5}),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor="#325D88",this.timeStamps.push(Date.now())),this.path=new a.default.Path({segments:[t.point],strokeColor:"black",strokeWidth:5});break;case"addPoint":if(e=null,e=this.path.hitTest(t.point,{fill:!0,stroke:!0,tolerance:5})){var I=e.location.curve,N=I.length;for(var R in this.path.insert(I.segment2.index,e.point),this.controlPoints.splice(I.segment2.index,0,{position:{x:e.point.x,y:e.point.x},assignedVariables:{},label:null,labelRect:null}),this.state.lookup)this.controlPoints[I.segment2.index].assignedVariables[R]=[];this.path.getOffsetOf(e.point);for(var D=0;D<I.segment1.index;D++)this.path.curves[D].length;if(this.state.detectWidth){var z=this.radiuses[I.segment1.index],B=(this.radiuses[I.segment2.index]-z)*I.length/N+z;this.radiuses.splice(I.segment2.index,0,B),this.pathWidth.remove(),this.drawPathWidth()}}break;case"eraser":if(e=null,e=this.path.hitTest(t.point,{segments:!0,tolerance:5})){var F=e.segment.index;this.path.removeSegment(F),this.controlPoints.splice(F,1),this.state.detectWidth&&(this.radiuses.splice(F,1),this.pathWidth.remove(),this.drawPathWidth())}break;case"controlPoint":this.tool.minDistance=1,this.selectedIdx=-1,this.selectedHandle=null,this.selectedPoint=null,e=null,(e=this.path.hitTest(t.point,{handles:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,"handle-in"===e.type?this.selectedHandle=e.segment.handleIn:"handle-out"===e.type&&(this.selectedHandle=e.segment.handleOut)),null==this.selectedHandle&&(e=this.path.hitTest(t.point,{segments:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,this.selectedPoint=e.segment);break;case"changeWidth":this.state.detectWidth&&(this.tool.minDistance=1,this.selectedIdx=-1,this.selectedPoint=null,e=null,(e=this.path.hitTest(t.point,{segments:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,this.selectedPoint=e.segment))}}}}},{key:"CanvasOnMouseDrag",value:function(){return function(t){var e=t.event.type;if(!this.state.assignVariables)switch(this.state.selector){case"pen":if(this.path.add(t.point),this.state.detectWidth)if("mousemove"===e){var n=Date.now(),i=n-this.timeStamps[this.timeStamps.length-1];this.timeStamps.push(n);var r=Math.min(i/1e3*30+2.5,100),o=t.delta.x,s=t.delta.y,l=Math.sqrt(o*o+s*s),u=t.delta;u.angle+=90;var c={x:t.middlePoint.x+r/l*u.x,y:t.middlePoint.y+r/l*u.y},h={x:t.middlePoint.x-r/l*u.x,y:t.middlePoint.y-r/l*u.y};this.pathWidth.add(c),this.pathWidth.insert(0,h),this.pathWidth.smooth(),this.radiuses.push(r),this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor="#325D88"}else if("touchmove"===e){if(t.event.touches.length>0){var f=97.5*t.event.touches[0].force+2.5,d=t.delta.x,p=t.delta.y,m=Math.sqrt(d*d+p*p),g=t.delta;g.angle+=90;var v={x:t.middlePoint.x+f/m*g.x,y:t.middlePoint.y+f/m*g.y},y={x:t.middlePoint.x-f/m*g.x,y:t.middlePoint.y-f/m*g.y};this.pathWidth.add(v),this.pathWidth.insert(0,y),this.pathWidth.smooth(),this.radiuses.push(f),this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor="#325D88"}}break;case"controlPoint":if(this.selectedIdx>=0&&(this.selectedHandle&&(this.selectedHandle.x+=t.delta.x,this.selectedHandle.y+=t.delta.y),this.selectedPoint&&(this.selectedPoint.point.x+=t.delta.x,this.selectedPoint.point.y+=t.delta.y,this.controlPoints[this.selectedIdx].position={x:this.selectedPoint.point.x+t.delta.x,y:this.selectedPoint.point.y+t.delta.y}),null!==this.controlPoints[this.selectedIdx].label&&(this.controlPoints[this.selectedIdx].label.position=new a.default.Point(this.controlPoints[this.selectedIdx].position.x,this.controlPoints[this.selectedIdx].position.y-10),this.controlPoints[this.selectedIdx].labelRect.position=this.controlPoints[this.selectedIdx].label.bounds)),this.state.detectWidth){if(this.selectedIdx>0&&this.selectedIdx<this.path.segments.length-1){for(var b=0,x=0;x<this.selectedIdx-1;x++)b+=this.path.curves[x].length;for(var _=this.radiuses[this.selectedIdx-1],w=this.radiuses[this.selectedIdx],S=this.radiuses[this.selectedIdx+1],E=this.path.curves[this.selectedIdx-1].length,M=1;M<this.curveSegment;M++){var T=(w-_)*M/this.curveSegment+_,C=this.path.getPointAt(b+E/this.curveSegment*M),k=void 0,P=(this.selectedIdx-1)*this.curveSegment+M,A=this.segPoints[P-1];k=new a.default.Point(C.x-A.x,C.y-A.y);var O=Math.sqrt(k.x*k.x+k.y*k.y);k.angle+=90,this.segPoints[P]=C,this.pathUpper[P]={x:C.x+T/O*k.x,y:C.y+T/O*k.y},this.pathLower[P]={x:C.x-T/O*k.x,y:C.y-T/O*k.y}}b+=E,E=this.path.curves[this.selectedIdx].length;for(var L=0;L<this.curveSegment;L++){var I=(S-w)*L/this.curveSegment+w,N=this.path.getPointAt(b+E/this.curveSegment*L),R=void 0,D=this.selectedIdx*this.curveSegment+L,z=this.segPoints[D-1];R=new a.default.Point(N.x-z.x,N.y-z.y);var B=Math.sqrt(R.x*R.x+R.y*R.y);R.angle+=90,this.segPoints[D]=N,this.pathUpper[D]={x:N.x+I/B*R.x,y:N.y+I/B*R.y},this.pathLower[D]={x:N.x-I/B*R.x,y:N.y-I/B*R.y}}}else if(0===this.selectedIdx)for(var F=this.radiuses[0],j=this.radiuses[1],V=this.path.curves[0].length,U=0;U<this.curveSegment;U++){var H=(j-F)*U/this.curveSegment+F,G=this.path.getPointAt(V/this.curveSegment*U),W=void 0;if(0===U)W=new a.default.Point(this.path.segments[0].handleOut.x,this.path.segments[0].handleOut.y);else{var q=this.segPoints[U-1];W=new a.default.Point(G.x-q.x,G.y-q.y)}var Q=Math.sqrt(W.x*W.x+W.y*W.y);W.angle+=90,this.segPoints[U]=G,this.pathUpper[U]={x:G.x+H/Q*W.x,y:G.y+H/Q*W.y},this.pathLower[U]={x:G.x-H/Q*W.x,y:G.y-H/Q*W.y}}else if(this.selectedIdx===this.path.segments.length-1){for(var Y=0,X=0;X<this.selectedIdx-1;X++)Y+=this.path.curves[X].length;for(var $=this.radiuses[this.selectedIdx-1],Z=this.radiuses[this.selectedIdx],J=this.path.curves[this.selectedIdx-1].length,K=1;K<=this.curveSegment;K++){var tt=(Z-$)*K/this.curveSegment+$,et=void 0;et=K!==this.curveSegment?this.path.getPointAt(Y+J/this.curveSegment*K):this.path.segments[this.path.segments.length-1].point;var nt=void 0,it=(this.selectedIdx-1)*this.curveSegment+K,rt=this.segPoints[it-1];nt=new a.default.Point(et.x-rt.x,et.y-rt.y);var at=Math.sqrt(nt.x*nt.x+nt.y*nt.y);nt.angle+=90,this.segPoints[it]=et,this.pathUpper[it]={x:et.x+tt/at*nt.x,y:et.y+tt/at*nt.y},this.pathLower[it]={x:et.x-tt/at*nt.x,y:et.y-tt/at*nt.y}}}var ot=this.pathLower.slice().reverse(),st=this.pathUpper.concat(ot);this.pathWidth.remove(),this.pathWidth=new a.default.Path({segments:st,strokeColor:"#325D88",strokeWidth:1,fillColor:"#29ABE0",opacity:.5,closed:!0}),this.pathWidth.smooth(),this.pathWidth.sendToBack()}break;case"changeWidth":if(this.state.detectWidth&&this.selectedPoint){var lt=t.point.x-this.selectedPoint.point.x,ut=t.point.y-this.selectedPoint.point.y,ct=Math.sqrt(lt*lt+ut*ut);this.penSizeCircle&&this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(this.selectedPoint.point,ct),this.penSizeCircle.strokeColor="#325D88"}}}}},{key:"CanvasOnMouseUp",value:function(){return function(t){var e=t.event.type;if(!this.state.assignVariables){switch(this.state.selector){case"pen":this.path.add(t.point);var n=this.path.segments.slice(0,this.path.segments.length);if(n[n.length-2].point.x>n[n.length-1].point.x&&!0,this.path.simplify(10),this.path.segments.forEach(function(t){for(var e in this.controlPoints.push({position:{x:t.point.x,y:t.point.y},assignedVariables:{},label:null,labelRect:null}),this.state.lookup)this.controlPoints[this.controlPoints.length-1].assignedVariables[e]=[]}.bind(this)),this.state.detectWidth){var i=0;if("mouseup"===e){var r=Date.now(),a=r-this.timeStamps[this.timeStamps.length-1];this.timeStamps.push(r),i=Math.min(a/1e3*30+2.5,100)}else if("touchend"===e){t.event.touches.length>0&&(i=97.5*t.event.touches[0].force+2.5)}this.radiuses.push(i),this.pathWidth.remove();var o=n.length/this.path.segments.length;o=Math.floor(o)%2==1?Math.floor(o):Math.ceil(o);for(var s=0,l=0,u=[];s<n.length&&l<this.path.segments.length;)if(n[s].point.x!==this.path.segments[l].point.x||n[s].point.y!==this.path.segments[l].point.y)s++;else{var c=0,h=0,f=s-Math.floor(o/2),d=s+Math.floor(o/2);f=Math.max(0,f),d=Math.min(n.length-1,d);for(var p=f;p<=d;p++)c+=this.radiuses[p],h++;c/=h,u.push(c),s++,l++}this.radiuses=u,this.drawPathWidth(),this.penSizeCircle.remove()}this.penSizeCircle=null,this.sketching=!1,this.touch=!1,this.touchPressure=0;break;case"controlPoint":this.selectedHandle=null,this.selectedPoint=null;break;case"changeWidth":if(this.state.detectWidth&&this.penSizeCircle&&this.selectedPoint){var m=this.penSizeCircle.segments[0].point.x-this.selectedPoint.point.x,g=this.penSizeCircle.segments[0].point.y-this.selectedPoint.point.y,v=Math.sqrt(m*m+g*g);this.radiuses[this.selectedIdx]=v,this.selectedHandle=null,this.selectedPoint=null,this.selectedIdx=-1,this.pathWidth.remove(),this.drawPathWidth(),this.penSizeCircle.remove()}}this.tool.minDistance=15}this.convertSketchIntoQuery()}}},{key:"drawPathWidth",value:function(){if(this.path.curves.length>0){this.segPoints=[];for(var t=[],e=[],n=0,i=0;i<this.path.curves.length;i++){for(var r=this.radiuses[i],o=this.radiuses[i+1],s=this.path.curves[i].length,l=0;l<this.curveSegment;l++){var u=(o-r)*l/this.curveSegment+r,c=this.path.getPointAt(n+s/this.curveSegment*l),h=void 0;if(0===l&&0!==this.path.segments[i].handleOut.x&&0!==this.path.segments[i].handleOut.y)h=new a.default.Point(this.path.segments[i].handleOut.x,this.path.segments[i].handleOut.y);else{var f=this.segPoints[this.segPoints.length-1];h=new a.default.Point(c.x-f.x,c.y-f.y)}var d=Math.sqrt(h.x*h.x+h.y*h.y);h.angle+=90,this.segPoints.push(c),t.push({x:c.x+u/d*h.x,y:c.y+u/d*h.y}),e.push({x:c.x-u/d*h.x,y:c.y-u/d*h.y})}n+=s}var p=this.radiuses[this.radiuses.length-1],m=this.path.segments[this.path.segments.length-1].point,g=this.segPoints[this.segPoints.length-1],v=new a.default.Point(m.x-g.x,m.y-g.y),y=Math.sqrt(v.x*v.x+v.y*v.y);v.angle+=90,this.segPoints.push(m),t.push({x:m.x+p/y*v.x,y:m.y+p/y*v.y}),e.push({x:m.x-p/y*v.x,y:m.y-p/y*v.y}),this.pathUpper=t,this.pathLower=e;var b=e.slice().reverse(),x=t.concat(b);this.pathWidth=new a.default.Path({segments:x,strokeColor:"#325D88",strokeWidth:1,fillColor:"#29ABE0",opacity:.5,closed:!0}),this.pathWidth.smooth(),this.pathWidth.sendToBack()}}},{key:"convertSketchIntoQuery",value:function(){if(this.state.targetList.length>0&&this.path&&this.path.curves.length>0){var t={};for(var e in this.state.lookup)"z"!==e&&(t[e]=[]);if("z"!==this.state.xItem&&"z"!==this.state.yItem){var n=this.path.length,i=$("#periodOfSketchQuery").val();if(""!==i){var r=n/(i=Number(i)),o=this.path.curves[0].length,u=0,c=0,h=void 0,f=[],d=[];if(this.widthVar){var p=Math.min.apply(null,this.radiuses),m=Math.max.apply(null,this.radiuses),g=Math.min.apply(null,this.state.minList[this.widthVar]),v=Math.max.apply(null,this.state.maxList[this.widthVar]),y=$("#sketchWidthSlider").slider("option","values");f=[p,m],d=[y[0]/100*(v-g)+g,y[1]/100*(v-g)+g]}for(var b in t)this.controlPoints[0].assignedVariables[b].length>0&&t[b].push(this.controlPoints[0].assignedVariables[b]);h=this.controlPoints[0].position;for(var x=0;x<=i;x++){var _=this.path.getPointAt(r*x);if(_){for(var w in t)if(w===this.state.xItem)t[w].push(this.xScale.invert(_.x));else if(w===this.state.yItem)t[w].push(this.yScale.invert(_.y));else if(w===this.widthVar){var S=(this.radiuses[u+1]-this.radiuses[u])*(r*x-c)/o+this.radiuses[u];t[w].push((d[1]-d[0])/(f[1]-f[0])*(S-f[0])+d[0])}else t[w].push(null);if(c+o<=r*x){var E=this.controlPoints[u+1].position,M=this.controlPoints[u+1].assignedVariables;if(Math.sqrt(Math.pow(E.x-h.x,2)+Math.pow(E.y-h.y,2))<=Math.sqrt(Math.pow(E.x-_.x,2)+Math.pow(E.y-_.y,2)))for(var T in t)M[T].length>0&&(t[T][t[T].length-2]=M[T]);else for(var C in t)M[C].length>0&&(t[C][t[C].length-1]=M[C]);c+=o,(u+=1)<this.path.curves.length&&(o=this.path.curves[u].length)}h=_}}var k=this.controlPoints[this.controlPoints.length-1].assignedVariables;for(var P in k)k[P].length>0&&(t[P][t[P].length-1]=k[P])}}else if("z"===this.state.xItem){var A=this.controlPoints[0].position.x,O=this.controlPoints[this.controlPoints.length-1].position.x,L=this.xScale.invert(O-A);$("#periodOfSketchQuery").val((0,s.formatValue)(L)),$("#targetLengthMin").val(Math.floor(L)),$("#targetLengthMax").val(Math.ceil(L));var I,N=this.path.curves[0].length,R=0,D=0,z=[],B=[];if(this.widthVar){var F=Math.min.apply(null,this.radiuses),j=Math.max.apply(null,this.radiuses),V=Math.min.apply(null,this.state.minList[this.widthVar]),U=Math.max.apply(null,this.state.maxList[this.widthVar]),H=$("#sketchWidthSlider").slider("option","values");z=[F,j],B=[H[0]/100*(U-V)+V,H[1]/100*(U-V)+V]}var G=this.xScale(1),W=new a.default.Path.Line(new a.default.Point(A,0),new a.default.Point(A,this.state.size)),q=A;for(I=this.controlPoints[0].position;q<=O;){var Q=this.path.getIntersections(W);if(Q.length>0){var Y=this.path.getOffsetOf(Q[0].point);for(var X in t)if(X===this.state.yItem)t[X].push(this.yScale.invert(Q[0].point.y));else if(X===this.widthVar){var Z=(this.radiuses[R+1]-this.radiuses[R])*(Y-D)/N+this.radiuses[R];t[X].push((B[1]-B[0])/(z[1]-z[0])*(Z-z[0])+B[0])}else"z"!==X&&t[X].push(null);if(D+N<=Y){var J=this.controlPoints[R+1].position,K=this.controlPoints[R+1].assignedVariables;if(Math.sqrt(Math.pow(J.x-I.x,2)+Math.pow(J.y-I.y,2))<=Math.sqrt(Math.pow(J.x-Q[0].point.x,2)+Math.pow(J.y-Q[0].point.y,2)))for(var tt in t)K[tt].length>0&&(t[tt][t[tt].length-2]=K[tt]);else for(var et in t)K[et].length>0&&(t[et][t[et].length-1]=K[et]);D+=N,(R+=1)<this.path.curves.length&&(N=this.path.curves[R].length)}}q+=G,W.segments[0].point.x=q,W.segments[1].point.x=q}W.remove();var nt=this.controlPoints[0].assignedVariables;for(var it in t)nt[it].length>0&&(t[it][0]=nt[it]);var rt=this.controlPoints[this.controlPoints.length-1].assignedVariables;for(var at in rt)rt[at].length>0&&(t[at][t[at].length-1]=rt[at])}else if("z"===this.state.yItem){var ot=this.controlPoints[0].position.y,st=this.controlPoints[this.controlPoints.length-1].position.y,lt=this.yScale.invert(st-ot);$("#periodOfSketchQuery").val((0,s.formatValue)(lt));var ut,ct=this.path.curves[0].length,ht=0,ft=0,dt=[],pt=[];if(this.widthVar){var mt=Math.min.apply(null,this.radiuses),gt=Math.max.apply(null,this.radiuses),vt=Math.min.apply(null,this.state.minList[this.widthVar]),yt=Math.max.apply(null,this.state.maxList[this.widthVar]),bt=$("#sketchWidthSlider").slider("option","values");dt=[mt,gt],pt=[bt[0]/100*(yt-vt)+vt,bt[1]/100*(yt-vt)+vt]}var xt=this.state.size-this.yScale(1),_t=new a.default.Path.Line(new a.default.Point(0,ot),new a.default.Point(this.state.size,ot)),wt=ot;for(ut=this.controlPoints[0].position;wt>=st;){var St=this.path.getIntersections(_t),Et=this.path.getOffsetOf(St[0].point);for(var Mt in t)if(Mt===this.state.xItem)t[Mt].push(this.xScale.invert(St[0].point.x));else if(Mt===this.widthVar){var Tt=(this.radiuses[ht+1]-this.radiuses[ht])*(Et-ft)/ct+this.radiuses[ht];t[Mt].push((pt[1]-pt[0])/(dt[1]-dt[0])*(Tt-dt[0])+pt[0])}else"z"!==Mt&&t[Mt].push(null);if(ft+ct<=Et){var Ct=this.controlPoints[ht+1].position,kt=this.controlPoints[ht+1].assignedVariables;if(Math.sqrt(Math.pow(Ct.x-ut.x,2)+Math.pow(Ct.y-ut.y,2))<=Math.sqrt(Math.pow(Ct.x-St[0].point.x,2)+Math.pow(Ct.y-St[0].point.y,2)))for(var Pt in t)kt[Pt].length>0&&(t[Pt][t[Pt].length-2]=kt[Pt]);else for(var At in t)kt[At].length>0&&(t[At][t[At].length-1]=kt[At]);ft+=ct,(ht+=1)<this.path.curves.length&&(ct=this.path.curves[ht].length)}wt-=xt,_t.segments[0].point.y=wt,_t.segments[1].point.y=wt}_t.remove();var Ot=this.controlPoints[0].assignedVariables;for(var Lt in t)Ot[Lt].length>0&&(t[Lt][0]=Ot[Lt]);var It=this.controlPoints[this.controlPoints.length-1].assignedVariables;for(var Nt in It)It[Nt].length>0&&(t[Nt][t[Nt].length-1]=It[Nt])}t.arrayLength=t[Object.keys(t)[0]].length,l.setQuery(t)}}},{key:"transformDataIntoSketch",value:function(t,e){var n=h.default.getDataArray(t,1),i=n.z.indexOf(e[0]),r=n.z.indexOf(e[1]);if("z"!==this.state.xItem&&"z"!==this.state.yItem){var o=n[this.state.xItem].slice(i,r+1),s=n[this.state.yItem].slice(i,r+1);this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var l=0;l<o.length;l++)this.path.add(new a.default.Point(this.xScale(o[l]),this.yScale(s[l])))}else if("z"===this.state.xItem){var u=n[this.state.yItem].slice(i,r+1),c=Math.floor(this.xScale.domain()[1]/2)-Math.floor(u.length/2);this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var f=0;f<u.length;f++)this.path.add(new a.default.Point(this.xScale(f+c),this.yScale(u[f])))}else if("z"===this.state.yItem){var d=n[this.state.xItem].slice(i,r+1),p=Math.floor(this.yScale.domain()[1]/2)-Math.floor(d.length/2);this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var m=0;m<d.length;m++)this.path.add(new a.default.Point(this.xScale(d[m]),this.yScale(m+p)))}var g=this.path.segments.slice(0,this.path.segments.length);if(this.path.simplify(10),this.path.segments.forEach(function(t){for(var e in this.controlPoints.push({position:{x:t.point.x,y:t.point.y},assignedVariables:{},label:null,labelRect:null}),this.state.lookup)this.controlPoints[this.controlPoints.length-1].assignedVariables[e]=[]}.bind(this)),this.widthVar){for(var v=n[this.widthVar].slice(i,r+1),y=Math.min.apply(null,v),b=Math.max.apply(null,v),x=0;x<v.length;x++)this.radiuses.push((v[x]-y)/(b-y)*22.5+2.5);var _=g.length/this.path.segments.length;_=Math.floor(_)%2==1?Math.floor(_):Math.ceil(_);for(var w=0,S=0,E=[];w<g.length&&S<this.path.segments.length;)if(g[w].point.x!==this.path.segments[S].point.x||g[w].point.y!==this.path.segments[S].point.y)w++;else{var M=0,T=0,C=w-Math.floor(_/2),k=w+Math.floor(_/2);C=Math.max(0,C),k=Math.min(g.length-1,k);for(var P=C;P<=k;P++)M+=this.radiuses[P],T++;M/=T,E.push(M),w++,S++}this.radiuses=E,this.drawPathWidth()}}},{key:"CanvasXLabelOnClick",value:function(){return function(){var t=this.state.xItemonPanel,e=Math.min.apply(null,this.state.minList[t]),n=Math.max.apply(null,this.state.maxList[t]);"z"===t&&(n-=e,e=0),this.setValueSlider("sketchPadXRangeSlider",e,n),$("#sketchPadXRangeSlider").slider("option","disabled",!1);var i=o.select("#changeXAxisPanel_SketchPad");if("visible"===i.style("visibility"))i.transition().duration(50).style("visibility","hidden"),this.setState({xItemonPanel:this.state.xItem});else{var r=document.getElementById("changeXAxisPanel_SketchPad").clientHeight,a=document.getElementById("changeXAxisPanel_SketchPad").clientWidth;if(i.style("transform","translate("+(this.state.size/2-a/2)+"px,"+(this.state.size-r-this.margin.bottom)+"px)").style("visibility","visible"),this.state.xItem===t){var s=(this.xMinMax[0]-e)/(n-e)*100,l=(this.xMinMax[1]-e)/(n-e)*100;$("#sketchPadXRangeSlider").slider("option","values",[s,l])}}}}},{key:"CanvasYLabelOnClick",value:function(){return function(){var t=this.state.yItemonPanel,e=Math.min.apply(null,this.state.minList[t]),n=Math.max.apply(null,this.state.maxList[t]);"z"===t&&(n-=e,e=0),this.setValueSlider("sketchPadYRangeSlider",e,n),$("#sketchPadYRangeSlider").slider("option","disabled",!1);var i=o.select("#changeYAxisPanel_SketchPad");if("visible"===i.style("visibility"))i.transition().duration(50).style("visibility","hidden"),this.setState({xItemonPanel:this.state.xItem});else{var r=document.getElementById("changeYAxisPanel_SketchPad").clientHeight;document.getElementById("changeYAxisPanel_SketchPad").clientWidth;i.style("transform","translate("+(this.margin.left+10)+"px,"+(this.state.size/2-r/2)+"px)").style("visibility","visible")}if(this.state.yItem===t){var a=(this.yMinMax[0]-e)/(n-e)*100,s=(this.yMinMax[1]-e)/(n-e)*100;$("#sketchPadYRangeSlider").slider("option","values",[a,s])}}}},{key:"onSelectXItem",value:function(t){var e=t.target.value;this.setState({xItemonPanel:e});var n=Math.min.apply(null,this.state.minList[e]),i=Math.max.apply(null,this.state.maxList[e]);"z"===e&&(i-=n,n=0),this.setValueSlider("sketchPadXRangeSlider",n,i),$("#sketchPadXRangeSlider").slider("option","disabled",!1)}},{key:"onSelectYItem",value:function(t){var e=t.target.value;this.setState({yItemonPanel:e});var n=Math.min.apply(null,this.state.minList[e]),i=Math.max.apply(null,this.state.maxList[e]);"z"===e&&(i-=n,n=0),this.setValueSlider("sketchPadYRangeSlider",n,i),$("#sketchPadYRangeSlider").slider("option","disabled",!1)}},{key:"updateXAxisValue",value:function(t,e){this.xMinMax=[t,e],this.updateAxis()}},{key:"updateYAxisValue",value:function(t,e){this.yMinMax=[t,e],this.updateAxis()}},{key:"updateAxis",value:function(){var t=Number($("#featureArea").css("padding-left").replace("px","")),e=Number($("#featureArea").css("padding-right").replace("px","")),n=Math.floor(.3*$("#mainFeatureArea").width()-t-e);this.setState({size:n}),o.select("#QBSCanvasArea").style("padding-bottom",n+"px"),this.svg.attr("width",n).attr("height",n),this.canvas.attr("width",n+"px !important").attr("height",n+"px !important"),a.default.setup(this.canvas.node()),this.xScale.domain(this.xMinMax).range([0,n]).nice(),this.xLabel=o.axisTop(this.xScale).ticks(5).tickSize(-n).tickFormat(s.tickFormatting),this.xAxis.call(this.xLabel),this.xAxis.select(".domain").remove(),this.xAxis.selectAll(".tick text").attr("y",n-this.margin.bottom).style("color","#8c7b7b"),this.xAxisText.style("left",n/2+"px").style("top",n-18+"px"),this.yScale.domain(this.yMinMax).range([n,0]).nice(),this.yLabel=o.axisRight(this.yScale).ticks(5).tickSize(n).tickFormat(s.tickFormatting),this.yAxis.call(this.yLabel),this.yAxis.select(".domain").remove(),this.yAxis.selectAll(".tick text").attr("x",this.margin.left).attr("y","-0.5em").style("color","#79897b"),this.yAxisText.style("left",this.margin.left/2+"px").style("top",n/2+"px")}},{key:"changeXAxis",value:function(){this.setState({xItem:this.state.xItemonPanel}),this.xAxisText&&this.xAxisText.text(this.state.lookup[this.state.xItemonPanel]);var t=Math.min.apply(null,this.state.minList[this.state.xItemonPanel]),e=Math.max.apply(null,this.state.maxList[this.state.xItemonPanel]);"z"===this.state.xItemonPanel&&(e-=t,t=0);var n=$("#sketchPadXRangeSlider").slider("option","values"),i=n[0]/100*(e-t)+t,r=n[1]/100*(e-t)+t;this.updateXAxisValue(i,r),o.select("#changeXAxisPanel_SketchPad").transition().duration(50).style("visibility","hidden"),"z"!==this.state.xItemonPanel&&"z"!==this.state.yItem&&$("#periodOfSketchQuery").val(20),this.convertSketchIntoQuery()}},{key:"changeYAxis",value:function(){this.setState({yItem:this.state.yItemonPanel}),this.yAxisText&&this.yAxisText.text(this.state.lookup[this.state.yItemonPanel]);var t=Math.min.apply(null,this.state.minList[this.state.yItemonPanel]),e=Math.max.apply(null,this.state.maxList[this.state.yItemonPanel]);"z"===this.state.yItemonPanel&&(e-=t,t=0);var n=$("#sketchPadYRangeSlider").slider("option","values"),i=n[0]/100*(e-t)+t,r=n[1]/100*(e-t)+t;this.updateYAxisValue(i,r),o.select("#changeYAxisPanel_SketchPad").transition().duration(50).style("visibility","hidden"),"z"!==this.state.xItem&&"z"!==this.state.yItemonPanel&&$("#periodOfSketchQuery").val(20),this.convertSketchIntoQuery()}},{key:"selectPen",value:function(){this.setState({selector:"pen"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorPen").addClass("selected"),this.updateSelectedStatus("pen")}},{key:"selectEraser",value:function(){this.setState({selector:"eraser"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorEraser").addClass("selected"),this.updateSelectedStatus("eraser")}},{key:"selectAddPoint",value:function(){this.setState({selector:"addPoint"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorAddPoint").addClass("selected"),this.updateSelectedStatus("addPoint")}},{key:"selectControlPoint",value:function(){this.setState({selector:"controlPoint"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorControlPoint").addClass("selected"),this.updateSelectedStatus("controlPoint")}},{key:"selectChangeWidth",value:function(){this.setState({selector:"changeWidth"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorChangeWidth").addClass("selected"),this.updateSelectedStatus("changeWidth")}},{key:"switchVariableAssignment",value:function(){var t=!this.state.assignVariables;if(this.setState({assignVariables:t}),t)$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected"),$(this).addClass("disabled")}));else{var e=this.state.selector;$("img[name=QBSSelector]").each((function(){$(this).removeClass("disabled"),$(this).attr("value")===e&&$(this).addClass("selected")}))}$("#variableAssignmentSwitch").prop("checked",t),t&&this.path?this.path.fullySelected=!0:t||(this.setState({popover:!1}),this.highlightedPoint&&this.highlightedPoint.remove(),this.updateSelectedStatus(this.state.selector))}},{key:"updateSelectedStatus",value:function(t){"addPoint"===t||"eraser"===t?this.path&&(this.path.fullySelected=!0):"controlPoint"===t?this.path&&(this.path.fullySelected=!0):"changeWidth"===t?this.path&&(this.path.fullySelected=!0):"pen"===t&&this.path&&(this.path.fullySelected=!1)}},{key:"removeAllAsignment",value:function(){for(var t=0;t<this.controlPoints.length;t++){for(var e in this.controlPoints[t].assignedVariables)this.controlPoints[t].assignedVariables[e]=[];this.controlPoints[t].label&&(this.controlPoints[t].label.remove(),this.controlPoints[t].label=null,this.controlPoints[t].labelRect.remove(),this.controlPoints[t].labelRect=null)}}},{key:"axisSelectionPanel",value:function(){var t=[],e=[];for(var n in this.state.lookup){var i="";(i=this.state.lookup[n].length>1?this.state.lookup[n].join(","):this.state.lookup[n]).indexOf("JD")<0?(t.push(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectXAxis_SketchPad",value:n,checked:this.state.xItemonPanel===n,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i))),e.push(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectYAxis_SketchPad",value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i)))):(t.unshift(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectXAxis_SketchPad",value:n,checked:this.state.xItemonPanel===n,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i))),e.unshift(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectYAxis_SketchPad",value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i))))}return{x:r.default.createElement("div",{className:"overlayPanel",id:"changeXAxisPanel_SketchPad",style:{visibility:"hidden",textAlign:"center",zIndex:"101"}},r.default.createElement("h6",null,"Change x axis"),r.default.createElement("div",{id:"changeXAxisItem_SketchPad",style:{textAlign:"left"}},r.default.createElement("form",{id:"changeXAxisForm_SketchPad"},t),r.default.createElement("div",{className:"featureElem",id:"sketchPadXRangeSlider",style:{width:"150px"}},r.default.createElement("output",{id:"sketchPadXRangeSliderMax",style:{bottom:"1.3rem",zIndex:200}}),r.default.createElement("output",{id:"sketchPadXRangeSliderMin",style:{bottom:"1.3rem",zIndex:201}})),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeXAxisBtn_SketchPad",style:{float:"right"},onClick:this.changeXAxis.bind(this)},"Done"))),y:r.default.createElement("div",{className:"overlayPanel",id:"changeYAxisPanel_SketchPad",style:{visibility:"hidden",textAlign:"center",zIndex:"102"}},r.default.createElement("h6",null,"Change y axis"),r.default.createElement("div",{id:"changeYAxisItem_SketchPad",style:{textAlign:"left"}},r.default.createElement("form",{id:"changeYAxisForm_SketchPad"},e)),r.default.createElement("div",{className:"featureElem",id:"sketchPadYRangeSlider",style:{width:"150px"}},r.default.createElement("output",{id:"sketchPadYRangeSliderMax",style:{bottom:"1.3rem",zIndex:200}}),r.default.createElement("output",{id:"sketchPadYRangeSliderMin",style:{bottom:"1.3rem",zIndex:201}})),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeXAxisBtn_SketchPad",style:{float:"right"},onClick:this.changeYAxis.bind(this)},"Done"))}}},{key:"sketchMenu",value:function(){return r.default.createElement("div",{id:"QBSSelectorMenu",className:"featureElem"},r.default.createElement("h5",null,"Selection"),r.default.createElement("form",{className:"selector featureRow"},r.default.createElement("div",{className:"form-check form-check-inline"},r.default.createElement("img",{id:"selectorPen",className:"selectorIcon selected",name:"QBSSelector",value:"pen",src:"img/icons/pen.png",alt:"pen",width:"30",height:"30",title:"draw a sketch",onClick:this.selectPen.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorAddPoint",className:"selectorIcon",name:"QBSSelector",value:"addPoint",src:"img/icons/add.png",alt:"add point",width:"30",height:"30",title:"add a control point on the sketch",onClick:this.selectAddPoint.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorEraser",className:"selectorIcon",name:"QBSSelector",value:"eraser",src:"img/icons/delete.png",alt:"delete point",width:"30",height:"30",title:"remove a control point from the sketch",onClick:this.selectEraser.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorControlPoint",className:"selectorIcon",name:"QBSSelector",value:"controlPoint",src:"img/icons/control.png",alt:"control point",width:"30",height:"30",title:"move a control point on the sketch",onClick:this.selectControlPoint.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorChangeWidth",className:"selectorIcon",name:"QBSSelector",value:"changeWidth",src:"img/icons/width.png",alt:"change width",width:"30",height:"30",title:"change the width of the sketch",onClick:this.selectChangeWidth.bind(this),readOnly:!0})),r.default.createElement("div",{id:"selectorExploration",className:"tooltip",style:{visibility:"hidden"}})))}},{key:"sketchOptions",value:function(){return r.default.createElement("div",{id:"QBSSketchOptions",className:"featureElem"},r.default.createElement("h5",{onClick:this.collapseQBSSketchOptions},"Options of Query-by-sketch"),r.default.createElement("div",{id:"QBSSketchOptionsMain"},this.sketchWidthControl(),this.assignVariablesArea(),this.definePeriodOfQuery()))}},{key:"importExportQueryMenu",value:function(){return r.default.createElement("div",{id:"importExportQuery",className:"featureElem form-inline",style:{float:"right"}},r.default.createElement("div",{className:"custom-file",style:{width:"170px",marginRight:"0.5rem"}},r.default.createElement("input",{type:"file",id:"importQuery",className:"custom-file-input",onChange:this.importQuery.bind(this)}),r.default.createElement("label",{className:"custom-file-label",htmlFor:"importQuery",style:{justifyContent:"start"}},"Import")),r.default.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.exportQuery.bind(this)},"Export"))}},{key:"importQuery",value:function(){var t=document.getElementById("importQuery").files,e=new FileReader;e.readAsText(t[0]),e.onload=function(){var t=e.result,n=JSON.parse(t);if("Query-by-sketch"===n.type){this.clearCanvas(),this.setState({xItem:n.xItem,yItem:n.yItem}),this.xAxisText&&this.xAxisText.text(this.state.lookup[n.xItem]),this.yAxisText&&this.yAxisText.text(this.state.lookup[n.yItem]),this.xMinMax=n.xRange,this.yMinMax=n.yRange,this.updateAxis(),$("#periodOfSketchQuery").val(n.queryLength);for(var i=this.state.size/n.size,r=0;r<n.controlPoints.length;r++)this.controlPoints.push(n.controlPoints[r]),this.controlPoints[this.controlPoints.length-1].position.x=this.controlPoints[this.controlPoints.length-1].position.x*i,this.controlPoints[this.controlPoints.length-1].position.y=this.controlPoints[this.controlPoints.length-1].position.y*i;this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var o=0;o<n.path.length;o++)this.path.add(new a.default.Point(n.path[o][1][0]*i,n.path[o][1][1]*i)),this.path.segments[this.path.segments.length-1].handleIn.x=n.path[o][2][0]*i,this.path.segments[this.path.segments.length-1].handleIn.y=n.path[o][2][1]*i,this.path.segments[this.path.segments.length-1].handleOut.x=n.path[o][3][0]*i,this.path.segments[this.path.segments.length-1].handleOut.y=n.path[o][3][1]*i;n.widthVar&&(this.widthVar=n.widthVar,this.changeWidthVariable(this.widthVar),this.radiuses=n.radiuses,this.drawPathWidth());for(var s=0;s<this.controlPoints.length;s++){var l="";for(var u in this.controlPoints[s].assignedVariables)this.controlPoints[s].assignedVariables[u].length>0&&(l+=this.state.lookup[u]+", ");""!==l&&(this.controlPoints[s].label=new a.default.PointText({position:{x:this.controlPoints[s].position.x,y:this.controlPoints[s].position.y},fillColor:"#7b7971",justification:"center",fontSize:8}),l=l.slice(0,-2),this.controlPoints[s].label.content=l,this.controlPoints[s].labelRect=new a.default.Path.Rectangle(this.controlPoints[s].label.bounds),this.controlPoints[s].labelRect.fillColor="white",this.controlPoints[s].labelRect.strokeColor="white",this.controlPoints[s].label.insertAbove(this.controlPoints[s].labelRect))}this.convertSketchIntoQuery()}else alert("This file is not for a query-by-sketch.")}.bind(this)}},{key:"exportQuery",value:function(){if(this.path){var t={type:"Query-by-sketch",xItem:this.state.xItem,yItem:this.state.yItem,xRange:this.xScale.domain(),yRange:this.yScale.domain(),controlPoints:this.controlPoints,widthVar:this.widthVar,radiuses:this.radiuses,path:this.path.segments,queryLength:Number($("#periodOfSketchQuery").val()),size:this.state.size};t=JSON.stringify(t,null,"\t");var e="sketchQuery_"+(0,u.createDateLabel)()+".json",n=new Blob([t],{type:"application/json"}),i=(window.URL||window.webkitURL).createObjectURL(n),r=document.createElement("a");r.download=decodeURI(e),r.href=i,r.click()}}},{key:"collapseQBSSketchOptions",value:function(){$("#QBSSketchOptionsMain").slideToggle()}},{key:"sketchWidthControl",value:function(){var t=[];for(var e in this.state.lookup)if(e!==this.state.xItem&&e!==this.state.yItem){var n="";n=this.state.lookup[e].length>1?this.state.lookup[e].join(","):this.state.lookup[e],"z"!==e&&t.push(r.default.createElement("option",{key:e,value:e},n))}return r.default.createElement("div",{id:"sketchWidthControl",className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("h6",null,"Variable assigned to the sketch width"),r.default.createElement("div",{className:"row matchingOption",style:{paddingLeft:"15px",paddingRight:"15px"}},r.default.createElement("div",{className:"custom-control custom-switch"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"widthDetectionSwitch",checked:this.state.detectWidth,onChange:this.updateWidthDetection.bind(this)}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"widthDetectionSwitch"},"Detect width"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-5"},"Variable assigned to width"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"widthVariables",style:{width:"40%"},disabled:!this.state.detectWidth,onChange:this.updateWidthVariable.bind(this)},t))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-5"},"Value range"),r.default.createElement("div",{className:"col"},r.default.createElement("div",{className:"featureElem",id:"sketchWidthSlider",style:{width:"150px"}},r.default.createElement("output",{id:"sketchWidthSliderMax",style:{bottom:"1.3rem",zIndex:200}}),r.default.createElement("output",{id:"sketchWidthSliderMin",style:{bottom:"1.3rem",zIndex:201}})))))}},{key:"updateWidthDetection",value:function(){var t=!this.state.detectWidth;if(this.setState({detectWidth:t}),t){var e=document.getElementById("widthVariables"),n=e.selectedIndex,i=e.options[n].value;this.widthVar=i,$("img[name=QBSSelector]").each((function(){$(this).removeClass("disabled")}))}else this.widthVar=null,this.pathWidth&&this.pathWidth.remove(),this.convertSketchIntoQuery(),$("img[name=QBSSelector]").each((function(){"changeWidth"===$(this).attr("value")&&$(this).addClass("disabled")}))}},{key:"updateWidthVariable",value:function(){var t=document.getElementById("widthVariables");if(t&&t.options.length>0){var e=t.selectedIndex,n=t.options[e].value;this.setValueSlider("sketchWidthSlider",Math.min.apply(null,this.state.minList[n]),Math.max.apply(null,this.state.maxList[n])),$("#sketchWidthSlider").on("slidestop",this.stopSlidingWidthSlider().bind(this)),$("#sketchWidthSlider").slider("option","disabled",!this.state.detectWidth),this.widthVar=n,this.convertSketchIntoQuery()}}},{key:"changeWidthVariable",value:function(t){var e=document.getElementById("widthVariables"),n=-1;if(e&&e.options.length>0)for(n=0;n<e.options.length&&e.options[n].value!==t;n++);n<e.options.length&&(e.selectedIndex=n)}},{key:"stopSlidingWidthSlider",value:function(){return function(t,e){this.convertSketchIntoQuery()}}},{key:"definePeriodOfQuery",value:function(){return r.default.createElement("div",{id:"timeLengthOfSketch"},r.default.createElement("h6",null,"The length of time of the sketch"),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Length of the sketched query"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"Length of time",id:"periodOfSketchQuery",style:{width:"40%",marginRight:"0.5rem"},onChange:this.updateTimeLength.bind(this),required:!0,disabled:"z"===this.state.xItem||"z"===this.state.yItem}),r.default.createElement("label",{className:"col-form-label col-form-label-sm",htmlFor:"periodOfSketchQuery"},"days"))))}},{key:"updateTimeLength",value:function(){var t=$("#periodOfSketchQuery").val();if(""!==t){t=Number(t);var e=$("#QBSSketchPad").width();if("z"===this.state.xItem){var n=this.controlPoints[0].position.x,i=this.controlPoints[this.controlPoints.length-1].position.x;this.updateXAxisValue(0,(0,s.formatValue)(t/(i-n)*e))}else if("z"===this.state.yItem){var r=this.controlPoints[0].position.y,a=this.controlPoints[this.controlPoints.length-1].position.y;this.updateYAxisValue(0,(0,s.formatValue)(t/(a-r)*e))}this.convertSketchIntoQuery()}}},{key:"assignVariablesArea",value:function(){return r.default.createElement("div",{id:"variableAssignment"},r.default.createElement("h6",null,"Assign variables to the sketch"),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},r.default.createElement("div",{className:"custom-control custom-switch"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"variableAssignmentSwitch",onChange:this.switchVariableAssignment.bind(this)}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"variableAssignmentSwitch"},"Assign variables"))),r.default.createElement("div",{className:"col"},r.default.createElement("button",{type:"button",className:"btn btn-primary btn-sm",id:"removeAllAssignment",onClick:this.removeAllAsignment.bind(this)},"Remove all assignments"))))}},{key:"onClickValueAssignmentCheckbox",value:function(t){var e=t.target.value,n=t.target.checked;$("#slider_"+e).slider("option","disabled",!n)}},{key:"onClickValueAssignmentDone",value:function(){$("#controlPointPopover").css("display","none");for(var t=$("input[name=assignedVariableList]"),e="",n=(this.controlPoints[this.highlightedPointIdx].assignedVariables,0);n<t.length;n++)if(t[n].checked){var i=t[n].value,r=Math.min.apply(null,this.state.minList[i]),o=Math.max.apply(null,this.state.maxList[i]),s=$("#slider_"+t[n].value).slider("option","values");this.controlPoints[this.highlightedPointIdx].assignedVariables[i]=[r+(o-r)*s[0]/100,r+(o-r)*s[1]/100],e+=this.state.lookup[i]+", "}else{var l=t[n].value;this.controlPoints[this.highlightedPointIdx].assignedVariables[l]=[]}this.controlPoints[this.highlightedPointIdx].label&&(this.controlPoints[this.highlightedPointIdx].label.remove(),this.controlPoints[this.highlightedPointIdx].label=null,this.controlPoints[this.highlightedPointIdx].labelRect.remove(),this.controlPoints[this.highlightedPointIdx].labelRect=null),""!==e&&(this.controlPoints[this.highlightedPointIdx].label=new a.default.PointText({position:{x:this.controlPoints[this.highlightedPointIdx].position.x,y:this.controlPoints[this.highlightedPointIdx].position.y-10},fillColor:"#7b7971",justification:"center",fontSize:8}),e=e.slice(0,-2),this.controlPoints[this.highlightedPointIdx].label.content=e,this.controlPoints[this.highlightedPointIdx].labelRect=new a.default.Path.Rectangle(this.controlPoints[this.highlightedPointIdx].label.bounds),this.controlPoints[this.highlightedPointIdx].labelRect.fillColor="white",this.controlPoints[this.highlightedPointIdx].labelRect.strokeColor="white",this.controlPoints[this.highlightedPointIdx].label.insertAbove(this.controlPoints[this.highlightedPointIdx].labelRect)),this.convertSketchIntoQuery()}},{key:"setValueSlider",value:function(t,e,n){var i=$("#"+t),r=$("#"+t+"Min"),a=$("#"+t+"Max");t.slice("_")[1];i.slider({range:!0,disabled:!0,//!$('#valueAssignmentCheckbox_' + key).prop('checked'),
min:0,max:100,values:[0,100],slide:function(t,i){r.css("display","initial"),a.css("display","initial");var o=i.values[0]/100*(n-e)+e,l=i.values[1]/100*(n-e)+e;r.val((0,s.formatValue)(o)),a.val((0,s.formatValue)(l));var u=150*i.values[0]/100-8,c=142-150*i.values[1]/100;r.css("left",u+"px"),a.css("right",c+"px")}.bind(this),stop:function(){r.css("display","none"),a.css("display","none")}}),r.val(i.slider("values",0)),a.val(i.slider("values",1))}},{key:"controlPointPopover",value:function(){var t=0,e=[];for(var n in this.state.lookup){var i="";if((i=this.state.lookup[n].length>1?this.state.lookup[n].join(","):this.state.lookup[n][0]).indexOf("JD")<0){var a="slider_"+n;e.push(r.default.createElement("div",{id:"assignVariable_"+n,className:"row align-items-center",key:i},r.default.createElement("div",{className:"form-check col-4",style:{paddingLeft:"0px"},onChange:this.onClickValueAssignmentCheckbox.bind(this)},r.default.createElement("input",{type:"checkbox",id:"valueAssignmentCheckbox_"+n,name:"assignedVariableList",value:n}),r.default.createElement("label",{className:"form-check-label",key:i},i)),r.default.createElement("div",{className:"col",id:a,style:{width:"150px"}},r.default.createElement("output",{id:a+"Max",style:{bottom:"1.3rem",zIndex:100+t}}),r.default.createElement("output",{id:a+"Min",style:{bottom:"1.3rem",zIndex:150+t}})),r.default.createElement("div",{id:"widthValue_"+n,style:{display:"none"}}))),this.setValueSlider(a,Math.min.apply(null,this.state.minList[n]),Math.max.apply(null,this.state.maxList[n]))}t++}return r.default.createElement("div",{id:"controlPointPopover",className:"popover",style:{position:"absolute",opacity:"0.85",display:"none",padding:"0.5rem 0.8rem"}},r.default.createElement("div",{id:"controlPointPopoverArrow",className:"arrow"}),r.default.createElement("form",{className:"container",name:"assignVariablesForm",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},e),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"valueAssignmentDoneBtn",style:{float:"right"},onClick:this.onClickValueAssignmentDone.bind(this)},"Done"))}},{key:"render",value:function(){var t=this.axisSelectionPanel();return r.default.createElement("div",{id:"QBSQuerying"},this.sketchMenu(),r.default.createElement("div",{id:"QBSCanvasArea"},t.x,t.y,this.controlPointPopover(),r.default.createElement("div",{className:"overlayHidingPanel"})),r.default.createElement("div",{id:"QBSSketchMenuArea"},this.importExportQueryMenu(),r.default.createElement("div",{style:{clear:"both"}}),this.sketchOptions()))}}]),e}(r.default.Component);e.default=p},function(t,e){},function(t,e,n){"use strict";n.r(e),n.d(e,"Node",(function(){return st})),n.d(e,"Parser",(function(){return G})),n.d(e,"Position",(function(){return N})),n.d(e,"SourceLocation",(function(){return R})),n.d(e,"TokContext",(function(){return ct})),n.d(e,"Token",(function(){return It})),n.d(e,"TokenType",(function(){return g})),n.d(e,"defaultOptions",(function(){return z})),n.d(e,"getLineInfo",(function(){return D})),n.d(e,"isIdentifierChar",(function(){return m})),n.d(e,"isIdentifierStart",(function(){return p})),n.d(e,"isNewLine",(function(){return M})),n.d(e,"keywordTypes",(function(){return x})),n.d(e,"lineBreak",(function(){return S})),n.d(e,"lineBreakG",(function(){return E})),n.d(e,"nonASCIIwhitespace",(function(){return T})),n.d(e,"parse",(function(){return Bt})),n.d(e,"parseExpressionAt",(function(){return Ft})),n.d(e,"tokContexts",(function(){return ht})),n.d(e,"tokTypes",(function(){return w})),n.d(e,"tokenizer",(function(){return jt})),n.d(e,"version",(function(){return zt}));var i={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},r="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:r,"5module":r+" export import",6:r+" const class extends export import super"},o=/^in(stanceof)?$/,s="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",l="--------------------------------------------------------------------------------------------------------------------------------------------------",u=new RegExp("["+s+"]"),c=new RegExp("["+s+l+"]");s=l=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],f=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function d(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&d(t,h)))}function m(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&c.test(String.fromCharCode(t)):!1!==e&&(d(t,h)||d(t,f)))))}var g=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function v(t,e){return new g(t,{beforeExpr:!0,binop:e})}var y={beforeExpr:!0},b={startsExpr:!0},x={};function _(t,e){return void 0===e&&(e={}),e.keyword=t,x[t]=new g(t,e)}var w={num:new g("num",b),regexp:new g("regexp",b),string:new g("string",b),name:new g("name",b),eof:new g("eof"),bracketL:new g("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new g("]"),braceL:new g("{",{beforeExpr:!0,startsExpr:!0}),braceR:new g("}"),parenL:new g("(",{beforeExpr:!0,startsExpr:!0}),parenR:new g(")"),comma:new g(",",y),semi:new g(";",y),colon:new g(":",y),dot:new g("."),question:new g("?",y),arrow:new g("=>",y),template:new g("template"),invalidTemplate:new g("invalidTemplate"),ellipsis:new g("...",y),backQuote:new g("`",b),dollarBraceL:new g("${",{beforeExpr:!0,startsExpr:!0}),eq:new g("=",{beforeExpr:!0,isAssign:!0}),assign:new g("_=",{beforeExpr:!0,isAssign:!0}),incDec:new g("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:v("||",1),logicalAND:v("&&",2),bitwiseOR:v("|",3),bitwiseXOR:v("^",4),bitwiseAND:v("&",5),equality:v("==/!=/===/!==",6),relational:v("</>/<=/>=",7),bitShift:v("<</>>/>>>",8),plusMin:new g("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:v("%",10),star:v("*",10),slash:v("/",10),starstar:new g("**",{beforeExpr:!0}),_break:_("break"),_case:_("case",y),_catch:_("catch"),_continue:_("continue"),_debugger:_("debugger"),_default:_("default",y),_do:_("do",{isLoop:!0,beforeExpr:!0}),_else:_("else",y),_finally:_("finally"),_for:_("for",{isLoop:!0}),_function:_("function",b),_if:_("if"),_return:_("return",y),_switch:_("switch"),_throw:_("throw",y),_try:_("try"),_var:_("var"),_const:_("const"),_while:_("while",{isLoop:!0}),_with:_("with"),_new:_("new",{beforeExpr:!0,startsExpr:!0}),_this:_("this",b),_super:_("super",b),_class:_("class",b),_extends:_("extends",y),_export:_("export"),_import:_("import",b),_null:_("null",b),_true:_("true",b),_false:_("false",b),_in:_("in",{beforeExpr:!0,binop:7}),_instanceof:_("instanceof",{beforeExpr:!0,binop:7}),_typeof:_("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},S=/\r\n?|\n|\u2028|\u2029/,E=new RegExp(S.source,"g");function M(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,C=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,k=Object.prototype,P=k.hasOwnProperty,A=k.toString;function O(t,e){return P.call(t,e)}var L=Array.isArray||function(t){return"[object Array]"===A.call(t)};function I(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var N=function(t,e){this.line=t,this.column=e};N.prototype.offset=function(t){return new N(this.line,this.column+t)};var R=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function D(t,e){for(var n=1,i=0;;){E.lastIndex=i;var r=E.exec(t);if(!(r&&r.index<e))return new N(n,e-i);++n,i=r.index+r[0].length}}var z={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(t){var e={};for(var n in z)e[n]=t&&O(t,n)?t[n]:z[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),L(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return L(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,a,o,s){var l={type:n?"Block":"Line",value:i,start:r,end:a};t.locations&&(l.loc=new R(this,o,s)),t.ranges&&(l.range=[r,a]),e.push(l)}}(e,e.onComment)),e}var F=2,j=1|F,V=4,U=8;function H(t,e){return F|(t?V:0)|(e?U:0)}var G=function(t,e,n){this.options=t=B(t),this.sourceFile=t.sourceFile,this.keywords=I(a[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var r="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(r=i[o]);o--);"module"===t.sourceType&&(r+=" await")}this.reservedWords=I(r);var s=(r?r+" ":"")+i.strict;this.reservedWordsStrict=I(s),this.reservedWordsStrictBind=I(s+" "+i.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(S).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},W={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};G.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},W.inFunction.get=function(){return(this.currentVarScope().flags&F)>0},W.inGenerator.get=function(){return(this.currentVarScope().flags&U)>0},W.inAsync.get=function(){return(this.currentVarScope().flags&V)>0},W.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},W.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},W.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},G.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&F)>0},G.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},G.parse=function(t,e){return new this(e,t).parse()},G.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},G.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(G.prototype,W);var q=G.prototype,Q=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function Y(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}q.strictDirective=function(t){for(;;){C.lastIndex=t,t+=C.exec(this.input)[0].length;var e=Q.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,C.lastIndex=t,t+=C.exec(this.input)[0].length,";"===this.input[t]&&t++}},q.eat=function(t){return this.type===t&&(this.next(),!0)},q.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},q.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},q.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},q.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||S.test(this.input.slice(this.lastTokEnd,this.start))},q.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},q.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},q.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},q.expect=function(t){this.eat(t)||this.unexpected()},q.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},q.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},q.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},q.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},q.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var X=G.prototype;X.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var a=r[i];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var $={kind:"loop"},Z={kind:"switch"};X.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i)return!0;if(t)return!1;if(123===i)return!0;if(p(i,!0)){for(var r=n+1;m(this.input.charCodeAt(r),!0);)++r;var a=this.input.slice(n,r);if(!o.test(a))return!0}return!1},X.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),e=this.pos+t[0].length;return!(S.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&m(this.input.charAt(e+8)))},X.parseStatement=function(t,e,n){var i,r=this.type,a=this.startNode();switch(this.isLet(t)&&(r=w._var,i="let"),r){case w._break:case w._continue:return this.parseBreakContinueStatement(a,r.keyword);case w._debugger:return this.parseDebuggerStatement(a);case w._do:return this.parseDoStatement(a);case w._for:return this.parseForStatement(a);case w._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case w._class:return t&&this.unexpected(),this.parseClass(a,!0);case w._if:return this.parseIfStatement(a);case w._return:return this.parseReturnStatement(a);case w._switch:return this.parseSwitchStatement(a);case w._throw:return this.parseThrowStatement(a);case w._try:return this.parseTryStatement(a);case w._const:case w._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(a,i);case w._while:return this.parseWhileStatement(a);case w._with:return this.parseWithStatement(a);case w.braceL:return this.parseBlock(!0,a);case w.semi:return this.parseEmptyStatement(a);case w._export:case w._import:if(this.options.ecmaVersion>10&&r===w._import){C.lastIndex=this.pos;var o=C.exec(this.input),s=this.pos+o[0].length;if(40===this.input.charCodeAt(s))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===w._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var l=this.value,u=this.parseExpression();return r===w.name&&"Identifier"===u.type&&this.eat(w.colon)?this.parseLabeledStatement(a,l,u,t):this.parseExpressionStatement(a,u)}},X.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},X.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},X.parseDoStatement=function(t){return this.next(),this.labels.push($),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},X.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push($),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===w._var||this.type===w._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var a=new Y,o=this.parseExpression(!0,a);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},X.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,K|(n?0:tt),!1,e)},X.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},X.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},X.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push(Z),this.enterScope(0);for(var n=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var i=this.type===w._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},X.parseThrowStatement=function(t){return this.next(),S.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var J=[];X.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();if(this.next(),this.eat(w.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLVal(e.param,n?4:2),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},X.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},X.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push($),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},X.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},X.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},X.parseLabeledStatement=function(t,e,n,i){for(var r=0,a=this.labels;r<a.length;r+=1){a[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===w._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var l=this.labels[s];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},X.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},X.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(w.braceL),t&&this.enterScope(0);!this.eat(w.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},X.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},X.parseForIn=function(t,e){var n=this.type===w._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},X.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(w.eq)?i.init=this.parseMaybeAssign(e):"const"!==n||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===w._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(w.comma))break}return t},X.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var K=1,tt=2;X.parseFunction=function(t,e,n,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===w.star&&e&tt&&this.unexpected(),t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&K&&(t.id=4&e&&this.type!==w.name?null:this.parseIdent(),!t.id||e&tt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(t.async,t.generator)),e&K||(t.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&K?"FunctionDeclaration":"FunctionExpression")},X.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},X.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),r=!1;for(i.body=[],this.expect(w.braceL);!this.eat(w.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(i.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(r&&this.raise(a.start,"Duplicate constructor in the same class"),r=!0))}return t.body=this.finishNode(i,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},X.parseClassElement=function(t){var e=this;if(this.eat(w.semi))return null;var n=this.startNode(),i=function(t,i){void 0===i&&(i=!1);var r=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===w.parenL||i&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(r,a),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=i("static");var r=this.eat(w.star),a=!1;r||(this.options.ecmaVersion>=8&&i("async",!0)?(a=!0,r=this.options.ecmaVersion>=9&&this.eat(w.star)):i("get")?n.kind="get":i("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),r&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=t),this.parseClassMethod(n,r,a,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},X.parseClassMethod=function(t,e,n,i){return t.value=this.parseMethod(e,n,i),this.finishNode(t,"MethodDefinition")},X.parseClassId=function(t,e){this.type===w.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},X.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},X.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.expectContextual("from"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(w._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===w._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,4|K,!1,n)}else if(this.type===w._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},X.checkExport=function(t,e,n){t&&(O(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},X.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var i=0,r=e.properties;i<r.length;i+=1){var a=r[i];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var o=0,s=e.elements;o<s.length;o+=1){var l=s[o];l&&this.checkPatternExport(t,l)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},X.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}},X.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},X.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(n)n=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var i=this.startNode();i.local=this.parseIdent(!0),i.exported=this.eatContextual("as")?this.parseIdent(!0):i.local,this.checkExport(t,i.exported.name,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},X.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=J,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},X.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var r=this.startNode();r.imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportSpecifier"))}return t},X.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},X.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var et=G.prototype;et.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var a=r[i];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},et.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},et.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},et.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},et.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},et.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(w.comma),e&&this.type===w.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),i.push(a),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),i.push(o)}return i},et.parseBindingListItem=function(t){return t},et.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},et.checkLVal=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Identifier":2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(O(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var a=r[i];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var o=0,s=t.elements;o<s.length;o+=1){var l=s[o];l&&this.checkLVal(l,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var nt=G.prototype;nt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===a&&(e.proto&&(n&&n.doubleProto<0?n.doubleProto=r.start:this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[i="$"+i];if(o)("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(r.start,"Redefinition of property");else o=e[i]={init:!1,get:!1,set:!1};o[a]=!0}}},nt.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===w.comma){var a=this.startNodeAt(n,i);for(a.expressions=[r];this.eat(w.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return r},nt.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,a=-1,o=-1;e?(r=e.parenthesizedAssign,a=e.trailingComma,o=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new Y,i=!0);var s=this.start,l=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,s,l)),this.type.isAssign){var c=this.startNodeAt(s,l);return c.operator=this.value,c.left=this.type===w.eq?this.toAssignable(u,!1,e):u,i||Y.call(e),e.shorthandAssign=-1,this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),a>-1&&(e.trailingComma=a),o>-1&&(e.shorthandAssign=o),u},nt.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(w.question)){var a=this.startNodeAt(n,i);return a.test=r,a.consequent=this.parseMaybeAssign(),this.expect(w.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return r},nt.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?r:r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},nt.parseExprOp=function(t,e,n,i,r){var a=this.type.binop;if(null!=a&&(!r||this.type!==w._in)&&a>i){var o=this.type===w.logicalOR||this.type===w.logicalAND,s=this.value;this.next();var l=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,u,a,r),h=this.buildBinary(e,n,t,c,s,o);return this.parseExprOp(h,e,n,i,r)}return t},nt.buildBinary=function(t,e,n,i,r,a){var o=this.startNodeAt(t,e);return o.left=n,o.operator=r,o.right=i,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},nt.parseMaybeUnary=function(t,e){var n,i=this.start,r=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===w.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(i,r);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(w.starstar)?this.buildBinary(i,r,n,this.parseMaybeUnary(null,!1),"**",!1):n},nt.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,i=this.parseExprAtom(t),r="ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||r)return i;var a=this.parseSubscripts(i,e,n);return t&&"MemberExpression"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1)),a},nt.parseSubscripts=function(t,e,n,i){for(var r=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,i,r);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},nt.parseSubscript=function(t,e,n,i,r){var a=this.eat(w.bracketL);if(a||this.eat(w.dot)){var o=this.startNodeAt(e,n);o.object=t,o.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!a,a&&this.expect(w.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!i&&this.eat(w.parenL)){var s=new Y,l=this.yieldPos,u=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&"Import"!==t.type,!1,s);if(r&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=u,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(s,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=u||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var f=this.startNodeAt(e,n);if(f.callee=t,f.arguments=h,"Import"===f.callee.type){1!==f.arguments.length&&this.raise(f.start,"import() requires exactly one argument");var d=f.arguments[0];d&&"SpreadElement"===d.type&&this.raise(d.start,"... is not allowed in import()")}t=this.finishNode(f,"CallExpression")}else if(this.type===w.backQuote){var p=this.startNodeAt(e,n);p.tag=t,p.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(p,"TaggedTemplateExpression")}return t},nt.parseExprAtom=function(t){this.type===w.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==w.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,"Super");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case w.name:var i=this.start,r=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(i,r),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(i,r),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===w.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,r),[o],!0)}return o;case w.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case w.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),u;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},nt.parseDynamicImport=function(){var t=this.startNode();return this.next(),this.type!==w.parenL&&this.unexpected(),this.finishNode(t,"Import")},nt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},nt.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},nt.parseParenAndDistinguishExpression=function(t){var e,n=this.start,i=this.startLoc,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,l=[],u=!0,c=!1,h=new Y,f=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(u?u=!1:this.expect(w.comma),r&&this.afterTrailingComma(w.parenR,!0)){c=!0;break}if(this.type===w.ellipsis){a=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var p=this.start,m=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(n,i,l);l.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((e=this.startNodeAt(o,s)).expressions=l,this.finishNodeAt(e,"SequenceExpression",p,m)):e=l[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,i);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},nt.parseParenItem=function(t){return t},nt.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var it=[];nt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0),this.options.ecmaVersion>10&&"Import"===t.callee.type&&this.raise(t.callee.start,"Cannot use new with import(...)"),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&"Import"!==t.callee.type,!1):t.arguments=it,this.finishNode(t,"NewExpression")},nt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===w.backQuote,this.finishNode(n,"TemplateElement")},nt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(w.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},nt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!S.test(this.input.slice(this.lastTokEnd,this.start))},nt.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(w.braceR);){if(i)i=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,r,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},nt.parseProperty=function(t,e){var n,i,r,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(r=this.start,a=this.startLoc),t||(n=this.eat(w.star)));var s=this.containsEsc;return this.parsePropertyName(o),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(o,e)):i=!1,this.parsePropertyValue(o,t,n,i,r,a,e,s),this.finishNode(o,"Property")},nt.parsePropertyValue=function(t,e,n,i,r,a,o,s){if((n||i)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===w.comma||this.type===w.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,a,t.key):this.type===w.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var l="get"===t.kind?0:1;if(t.value.params.length!==l){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},nt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},nt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},nt.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|H(e,i.generator)|(n?128:0)),this.expect(w.parenL),i.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")},nt.parseArrowExpression=function(t,e,n){var i=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|H(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=i,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},nt.parseFunctionBody=function(t,e,n){var i=e&&this.type!==w.braceL,r=this.strict,a=!1;if(i)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!r&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=r},nt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if("Identifier"!==n[e].type)return!1}return!0},nt.checkParams=function(t,e){for(var n={},i=0,r=t.params;i<r.length;i+=1){var a=r[i];this.checkLVal(a,1,e?null:n)}},nt.parseExprList=function(t,e,n,i){for(var r=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===w.comma?o=null:this.type===w.ellipsis?(o=this.parseSpread(i),i&&this.type===w.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):o=this.parseMaybeAssign(!1,i),r.push(o)}return r},nt.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},nt.parseIdent=function(t,e){var n=this.startNode();return this.type===w.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},nt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(w.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},nt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var rt=G.prototype;rt.raise=function(t,e){var n=D(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},rt.raiseRecoverable=rt.raise,rt.curPosition=function(){if(this.options.locations)return new N(this.curLine,this.pos-this.lineStart)};var at=G.prototype,ot=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};at.enterScope=function(t){this.scopeStack.push(new ot(t))},at.exitScope=function(){this.scopeStack.pop()},at.treatFunctionsAsVarInScope=function(t){return t.flags&F||!this.inModule&&1&t.flags},at.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var a=this.currentScope();i=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(t)>-1&&!(32&s.flags&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(t)>-1){i=!0;break}if(s.var.push(t),this.inModule&&1&s.flags&&delete this.undefinedExports[t],s.flags&j)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},at.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},at.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},at.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&j)return e}},at.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&j&&!(16&e.flags))return e}};var st=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new R(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},lt=G.prototype;function ut(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}lt.startNode=function(){return new st(this,this.start,this.startLoc)},lt.startNodeAt=function(t,e){return new st(this,t,e)},lt.finishNode=function(t,e){return ut.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},lt.finishNodeAt=function(t,e,n,i){return ut.call(this,t,e,n,i)};var ct=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},ht={b_stat:new ct("{",!1),b_expr:new ct("{",!0),b_tmpl:new ct("${",!1),p_stat:new ct("(",!1),p_expr:new ct("(",!0),q_tmpl:new ct("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new ct("function",!1),f_expr:new ct("function",!0),f_expr_gen:new ct("function",!0,!1,null,!0),f_gen:new ct("function",!1,!1,null,!0)},ft=G.prototype;ft.initialContext=function(){return[ht.b_stat]},ft.braceIsBlock=function(t){var e=this.curContext();return e===ht.f_expr||e===ht.f_stat||(t!==w.colon||e!==ht.b_stat&&e!==ht.b_expr?t===w._return||t===w.name&&this.exprAllowed?S.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t===w.arrow||(t===w.braceL?e===ht.b_stat:t!==w._var&&t!==w._const&&t!==w.name&&!this.exprAllowed):!e.isExpr)},ft.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},ft.updateContext=function(t){var e,n=this.type;n.keyword&&t===w.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===ht.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ht.b_stat:ht.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(ht.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?ht.p_stat:ht.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){!t.beforeExpr||t===w.semi||t===w._else||t===w._return&&S.test(this.input.slice(this.lastTokEnd,this.start))||(t===w.colon||t===w.braceL)&&this.curContext()===ht.b_stat?this.context.push(ht.f_stat):this.context.push(ht.f_expr),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===ht.q_tmpl?this.context.pop():this.context.push(ht.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t===w._function){var e=this.context.length-1;this.context[e]===ht.f_expr?this.context[e]=ht.f_expr_gen:this.context[e]=ht.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==w.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var dt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",pt=dt+" Extended_Pictographic",mt={9:dt,10:pt,11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},gt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",vt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",yt=vt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",bt={9:vt,10:yt,11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},xt={};function _t(t){var e=xt[t]={binary:I(mt[t]+" "+gt),nonBinary:{General_Category:I(gt),Script:I(bt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}_t(9),_t(10),_t(11);var wt=G.prototype,St=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=xt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Et(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Mt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Tt(t){return t>=65&&t<=90||t>=97&&t<=122}function Ct(t){return Tt(t)||95===t}function kt(t){return Ct(t)||Pt(t)}function Pt(t){return t>=48&&t<=57}function At(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Ot(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Lt(t){return t>=48&&t<=55}St.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},St.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},St.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?i:(i<<10)+e.charCodeAt(t+1)-56613888},St.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?t+1:t+2},St.prototype.current=function(){return this.at(this.pos)},St.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},St.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},St.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},wt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},wt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},wt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},wt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},wt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},wt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},wt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},wt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},wt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},wt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},wt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},wt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},wt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},wt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},wt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},wt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},wt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Mt(e)&&(t.lastIntValue=e,t.advance(),!0)},wt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!Mt(n);)t.advance();return t.pos!==e},wt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},wt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},wt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},wt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Et(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Et(t.lastIntValue);return!0}return!1},wt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return p(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},wt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return m(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},wt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},wt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},wt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},wt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},wt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},wt.regexp_eatZero=function(t){return 48===t.current()&&!Pt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},wt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},wt.regexp_eatControlLetter=function(t){var e=t.current();return!!Tt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},wt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,n=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(t.switchU&&i>=55296&&i<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(i-55296)+(a-56320)+65536,!0}t.pos=r,t.lastIntValue=i}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((e=t.lastIntValue)>=0&&e<=1114111))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=n}return!1},wt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},wt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},wt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},wt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},wt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){O(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},wt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},wt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Ct(e=t.current());)t.lastStringValue+=Et(e),t.advance();return""!==t.lastStringValue},wt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";kt(e=t.current());)t.lastStringValue+=Et(e),t.advance();return""!==t.lastStringValue},wt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},wt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},wt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},wt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Lt(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},wt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},wt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Pt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},wt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},wt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Pt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},wt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;At(n=t.current());)t.lastIntValue=16*t.lastIntValue+Ot(n),t.advance();return t.pos!==e},wt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},wt.regexp_eatOctalDigit=function(t){var e=t.current();return Lt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},wt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!At(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Ot(r),t.advance()}return!0};var It=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new R(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nt=G.prototype;function Rt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Nt.next=function(){this.options.onToken&&this.options.onToken(new It(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Nt.getToken=function(){return this.next(),new It(this)},"undefined"!=typeof Symbol&&(Nt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),Nt.curContext=function(){return this.context[this.context.length-1]},Nt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Nt.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Nt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Nt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(E.lastIndex=n;(t=E.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,i),n,this.pos,e,this.curPosition())},Nt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!M(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Nt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},Nt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Nt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},Nt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},Nt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,n+1):this.finishOp(i,n)},Nt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?w.logicalOR:w.logicalAND,2):61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},Nt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},Nt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!S.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},Nt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(w.assign,n+1):this.finishOp(w.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(w.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Nt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},Nt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 63:return++this.pos,this.finishToken(w.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+Rt(t)+"'")},Nt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Nt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(S.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new St(this));s.reset(n,r,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(r,o)}catch(t){}return this.finishToken(w.regexp,{pattern:r,flags:o,value:l})},Nt.readInt=function(t,e){for(var n=this.pos,i=0,r=0,a=null==e?1/0:e;r<a;++r){var o=this.input.charCodeAt(this.pos),s=void 0;if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,i=i*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:i},Nt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!=typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,n)},Nt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=this.input.slice(e,this.pos),a="undefined"!=typeof BigInt?BigInt(r):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,a)}46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(e,this.pos),s=n?parseInt(o,8):parseFloat(o);return this.finishToken(w.num,s)},Nt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Nt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(M(i,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(w.string,e)};var Dt={};Nt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Dt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Nt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Dt;this.raise(t,e)},Nt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===n?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(M(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Nt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Nt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Rt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return M(e)?"":String.fromCharCode(e)}},Nt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},Nt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(m(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?p:m)(o,i)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Rt(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Nt.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=x[t]),this.finishToken(e,t)};var zt="6.4.0";function Bt(t,e){return G.parse(t,e)}function Ft(t,e,n){return G.parseExpressionAt(t,e,n)}function jt(t,e){return G.tokenizer(t,e)}G.acorn={Parser:G,version:zt,defaultOptions:z,Position:N,SourceLocation:R,getLineInfo:D,Node:st,TokenType:g,tokTypes:w,keywordTypes:x,TokContext:ct,tokContexts:ht,isIdentifierChar:m,isIdentifierStart:p,Token:It,isNewLine:M,lineBreak:S,lineBreakG:E,nonASCIIwhitespace:T}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=d(n(0)),a=f(n(23)),o=n(21),s=f(n(8)),l=f(n(9)),u=f(n(303)),c=d(n(5)),h=d(n(3));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.id=t.id,n.fileName=h.default.getFileName(n.id),n.thumbnail=t.thumbnail,n.result=t.result,n.rank=t.rank,n.ignored=c.default.getIgnored(),n.lookup=h.default.getData(n.id).data.lookup,n.variables=[],n.clickedX=null,n.clickedY=null,n.moved=!1,n.ignored)for(var i in n.lookup)n.ignored.indexOf(i)<0&&"z"!==i&&n.variables.push(i);return c.default.on("focusResultFromTimeline",(function(t){var e=!1;if(void 0!==t.V&&n.result.flares){for(var i=0;i<n.result.flares.length;i++)if(u.isEqual(n.result.flares[i],t)){e=!0;break}}else u.isEqual(n.result,t)&&(e=!0);e&&l.select("#resultSummary_"+n.rank).transition().duration(300).style("border","1px solid #d23430").transition().duration(1e3).style("border","1px solid rgba(223, 215, 202, 0.75)")})),c.default.on("selectResultFromTimeline",(function(t){var e=!1;if(void 0!==t.V&&n.result.flares){for(var i=0;i<n.result.flares.length;i++)if(u.isEqual(n.result.flares[i],t)){e=!0;break}}else u.isEqual(n.result,t)&&(e=!0);e&&(l.select("#resultSummary_"+n.rank).transition().duration(300).style("border","1px solid #d23430").transition().duration(1e3).style("border","1px solid rgba(223, 215, 202, 0.75)"),n.showDetails())})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=document.getElementById("resultSummaryCanvas_"+this.rank).getContext("2d"),e=Math.min(this.thumbnail.height,this.thumbnail.width),n=this.thumbnail.width/2-e/2,i=this.thumbnail.height/2-e/2;this.thumbnail.onload=function(){t.drawImage(this.thumbnail,n,i,e,e,0,0,300,150)}.bind(this),document.getElementById("resultSummary_"+this.rank).addEventListener("mousedown",this.onMouseDownOnResultSummary.bind(this),!1)}},{key:"showFileName",value:function(){return r.default.createElement("div",{style:{wordWrap:"anywhere"}},r.default.createElement("label",null,this.fileName))}},{key:"showThumbnail",value:function(){return r.default.createElement("canvas",{id:"resultSummaryCanvas_"+this.rank,className:"resultSummaryCanvas"})}},{key:"showPeriod",value:function(){return this.result.period?r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Period")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.start)," - ",(0,o.formatValue)(this.result.start+this.result.period))):r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"JD")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.start)))}},{key:"showDistance",value:function(){return isNaN(this.result.distance)?isNaN(this.result.V)?isNaN(this.result.angle)?void 0:r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Angle")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.angle))):r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Intensity")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.V))):r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Distance")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.distance)))}},{key:"showDetails",value:function(){"none"===$("#resultDetailArea").css("display")&&a.toggleExtractionDetailPanel();var t=document.getElementById("detailThumbnailCanvas"),e=$("#extractionDetailThumbnail").width();$("#detailThumbnailCanvas").width(e),$("#detailThumbnailCanvas").height(e);var n=t.getContext("2d");n.clearRect(0,0,e,e);var i=Math.min(this.thumbnail.height,this.thumbnail.width),r=this.thumbnail.width/2-i/2,o=this.thumbnail.height/2-i/2;n.drawImage(this.thumbnail,r,o,i,i,0,0,300,150),$("#extractionDetailLC").height(e)}},{key:"onMouseDownOnResultSummary",value:function(t){this.moved=!1;var e=document.getElementById("resultSummaryHolder_"+this.rank);e.classList.add("drag");var n=document.getElementById("resultSummary_"+this.rank);this.clickedX=t.pageX-n.offsetLeft,this.clickedY=t.pageY-n.offsetTop,document.body.addEventListener("mousemove",this.onMouseMoveOnResultSummary.bind(this),!1),document.body.addEventListener("mouseleave",this.onMouseUpFromResultSummary.bind(this),!1),e.addEventListener("mouseup",this.onMouseUpFromResultSummary.bind(this),!1)}},{key:"onMouseMoveOnResultSummary",value:function(t){this.moved=!0;var e=document.getElementsByClassName("drag")[0];if(e)switch(e.style.position="absolute",t.preventDefault(),e.style.top=t.pageY-this.clickedY+"px",e.style.left=t.pageX-this.clickedX+"px",c.default.getMode()){case"AE":break;case"QBE":var n=$("#selectedTimeSliceView"),i=n.offset(),r=n.width(),a=n.height();if(i.left<=t.pageX&&t.pageX<=i.left+r&&i.top<=t.pageY&&t.pageY<=i.top+a){var o=$("#selectedTimeSliceView > .overlayHidingPanel");o.css("display","block"),o.css("width",Math.min(r,a)),o.css("height",Math.min(r,a))}break;case"QBS":var s=$("#QBSSketchPad"),l=s.offset(),u=s.width(),h=s.innerHeight();if(l.left<=t.pageX&&t.pageX<=l.left+u&&l.top<=t.pageY&&t.pageY<=l.top+h){var f=$("#QBSCanvasArea > .overlayHidingPanel");f.css("display","block"),f.css("width",Math.min(u,h)),f.css("height",Math.min(u,h))}}}},{key:"onMouseUpFromResultSummary",value:function(t){document.body.removeEventListener("mousemove",this.onMouseMoveOnResultSummary.bind(this),!1);var e=document.getElementsByClassName("drag")[0];if(e&&(e.removeEventListener("mouseup",this.onMouseUpFromResultSummary.bind(this),!1),e.classList.remove("drag"),e.style.position="static"),this.moved){switch(c.default.getMode()){case"AE":break;case"QBE":$("#selectedTimeSliceView > .overlayHidingPanel").css("display","none");var n=$("#selectedTimeSliceView"),i=n.offset(),r=n.width(),o=n.height();i&&i.left<=t.pageX&&t.pageX<=i.left+r&&i.top<=t.pageY&&t.pageY<=i.top+o&&(s.convertResultIntoQuery(this.result.id,[this.result.start,this.result.start+this.result.period],this.ignored),"block"===$("#resultDetailArea").css("display")&&a.toggleExtractionDetailPanel());break;case"QBS":$("#QBSCanvasArea > .overlayHidingPanel").css("display","none");var l=$("#QBSSketchPad"),u=l.offset(),h=l.width(),f=l.innerHeight();u&&u.left<=t.pageX&&t.pageX<=u.left+h&&u.top<=t.pageY&&t.pageY<=u.top+f&&(s.convertResultIntoQuery(this.result.id,[this.result.start,this.result.start+this.result.period],this.ignored),"block"===$("#resultDetailArea").css("display")&&a.toggleExtractionDetailPanel())}this.moveToOriginalPos()}else{this.showDetails();var d=$("#extractionDetailLC").width();s.updateSelectedResult(this.result,d,200)}}},{key:"moveToOriginalPos",value:function(){var t=$("#resultSummaryHolder_"+(this.rank+1));t?t.before($("#resultSummaryHolder_"+this.rank)):$("#resultSummaryHolder_"+(this.rank-1)).after($("#resultSummaryHolder_"+this.rank))}},{key:"render",value:function(){return r.default.createElement("div",{className:"resultSummary",id:"resultSummary_"+this.rank},this.showFileName(),this.showThumbnail(),r.default.createElement("div",{className:"container",style:{paddingLeft:"0px",paddingRight:"0px"}},this.showPeriod(),this.showDistance()))}}]),e}(r.default.Component);e.default=p},function(t,e,n){(function(t,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",f=1,d=2,p=4,m=1,g=2,v=1,y=2,b=4,x=8,_=16,w=32,S=64,E=128,M=256,T=512,C=30,k="...",P=800,A=16,O=1,L=2,I=1/0,N=9007199254740991,R=17976931348623157e292,D=NaN,z=4294967295,B=z-1,F=z>>>1,j=[["ary",E],["bind",v],["bindKey",y],["curry",x],["curryRight",_],["flip",T],["partial",w],["partialRight",S],["rearg",M]],V="[object Arguments]",U="[object Array]",H="[object AsyncFunction]",G="[object Boolean]",W="[object Date]",q="[object DOMException]",Q="[object Error]",Y="[object Function]",X="[object GeneratorFunction]",$="[object Map]",Z="[object Number]",J="[object Null]",K="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",it="[object String]",rt="[object Symbol]",at="[object Undefined]",ot="[object WeakMap]",st="[object WeakSet]",lt="[object ArrayBuffer]",ut="[object DataView]",ct="[object Float32Array]",ht="[object Float64Array]",ft="[object Int8Array]",dt="[object Int16Array]",pt="[object Int32Array]",mt="[object Uint8Array]",gt="[object Uint8ClampedArray]",vt="[object Uint16Array]",yt="[object Uint32Array]",bt=/\b__p \+= '';/g,xt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Et=RegExp(wt.source),Mt=RegExp(St.source),Tt=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Lt.source),Nt=/^\s+|\s+$/g,Rt=/^\s+/,Dt=/\s+$/,zt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,Gt=/^[-+]0x[0-9a-f]+$/i,Wt=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,Qt=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Kt+"]",ne="["+Jt+"]",ie="\\d+",re="[\\u2700-\\u27bf]",ae="[a-z\\xdf-\\xf6\\xf8-\\xff]",oe="[^\\ud800-\\udfff"+Kt+ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",le="[^\\ud800-\\udfff]",ue="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",fe="(?:"+ae+"|"+oe+")",de="(?:"+he+"|"+oe+")",pe="(?:"+ne+"|"+se+")"+"?",me="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[le,ue,ce].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),ge="(?:"+[re,ue,ce].join("|")+")"+me,ve="(?:"+[le+ne+"?",ne,ue,ce,te].join("|")+")",ye=RegExp("[']","g"),be=RegExp(ne,"g"),xe=RegExp(se+"(?="+se+")|"+ve+me,"g"),_e=RegExp([he+"?"+ae+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[ee,he,"$"].join("|")+")",de+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[ee,he+fe,"$"].join("|")+")",he+"?"+fe+"+(?:['](?:d|ll|m|re|s|t|ve))?",he+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie,ge].join("|"),"g"),we=RegExp("[\\u200d\\ud800-\\udfff"+Jt+"\\ufe0e\\ufe0f]"),Se=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ee=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,Te={};Te[ct]=Te[ht]=Te[ft]=Te[dt]=Te[pt]=Te[mt]=Te[gt]=Te[vt]=Te[yt]=!0,Te[V]=Te[U]=Te[lt]=Te[G]=Te[ut]=Te[W]=Te[Q]=Te[Y]=Te[$]=Te[Z]=Te[K]=Te[et]=Te[nt]=Te[it]=Te[ot]=!1;var Ce={};Ce[V]=Ce[U]=Ce[lt]=Ce[ut]=Ce[G]=Ce[W]=Ce[ct]=Ce[ht]=Ce[ft]=Ce[dt]=Ce[pt]=Ce[$]=Ce[Z]=Ce[K]=Ce[et]=Ce[nt]=Ce[it]=Ce[rt]=Ce[mt]=Ce[gt]=Ce[vt]=Ce[yt]=!0,Ce[Q]=Ce[Y]=Ce[ot]=!1;var ke={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pe=parseFloat,Ae=parseInt,Oe="object"==typeof t&&t&&t.Object===Object&&t,Le="object"==typeof self&&self&&self.Object===Object&&self,Ie=Oe||Le||Function("return this")(),Ne=e&&!e.nodeType&&e,Re=Ne&&"object"==typeof i&&i&&!i.nodeType&&i,De=Re&&Re.exports===Ne,ze=De&&Oe.process,Be=function(){try{var t=Re&&Re.require&&Re.require("util").types;return t||ze&&ze.binding&&ze.binding("util")}catch(t){}}(),Fe=Be&&Be.isArrayBuffer,je=Be&&Be.isDate,Ve=Be&&Be.isMap,Ue=Be&&Be.isRegExp,He=Be&&Be.isSet,Ge=Be&&Be.isTypedArray;function We(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function qe(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function Qe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Ye(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Xe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function $e(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function Ze(t,e){return!!(null==t?0:t.length)&&ln(t,e,0)>-1}function Je(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Ke(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function tn(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function en(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function nn(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function rn(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var an=fn("length");function on(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function sn(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function ln(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):sn(t,cn,n)}function un(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function cn(t){return t!=t}function hn(t,e){var n=null==t?0:t.length;return n?mn(t,e)/n:D}function fn(t){return function(e){return null==e?a:e[t]}}function dn(t){return function(e){return null==t?a:t[e]}}function pn(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function mn(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==a&&(n=n===a?o:n+o)}return n}function gn(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function vn(t){return function(e){return t(e)}}function yn(t,e){return Ke(e,(function(e){return t[e]}))}function bn(t,e){return t.has(e)}function xn(t,e){for(var n=-1,i=t.length;++n<i&&ln(e,t[n],0)>-1;);return n}function _n(t,e){for(var n=t.length;n--&&ln(e,t[n],0)>-1;);return n}var wn=dn({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Sn=dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function En(t){return"\\"+ke[t]}function Mn(t){return we.test(t)}function Tn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function Cn(t,e){return function(n){return t(e(n))}}function kn(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n];o!==e&&o!==h||(t[n]=h,a[r++]=n)}return a}function Pn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function An(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function On(t){return Mn(t)?function(t){var e=xe.lastIndex=0;for(;xe.test(t);)++e;return e}(t):an(t)}function Ln(t){return Mn(t)?function(t){return t.match(xe)||[]}(t):function(t){return t.split("")}(t)}var In=dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Nn=function t(e){var n,i=(e=null==e?Ie:Nn.defaults(Ie.Object(),e,Nn.pick(Ie,Ee))).Array,r=e.Date,Jt=e.Error,Kt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,ie=e.String,re=e.TypeError,ae=i.prototype,oe=Kt.prototype,se=ee.prototype,le=e["__core-js_shared__"],ue=oe.toString,ce=se.hasOwnProperty,he=0,fe=(n=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",de=se.toString,pe=ue.call(ee),me=Ie._,ge=ne("^"+ue.call(ce).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=De?e.Buffer:a,xe=e.Symbol,we=e.Uint8Array,ke=ve?ve.allocUnsafe:a,Oe=Cn(ee.getPrototypeOf,ee),Le=ee.create,Ne=se.propertyIsEnumerable,Re=ae.splice,ze=xe?xe.isConcatSpreadable:a,Be=xe?xe.iterator:a,an=xe?xe.toStringTag:a,dn=function(){try{var t=Ba(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),Rn=e.clearTimeout!==Ie.clearTimeout&&e.clearTimeout,Dn=r&&r.now!==Ie.Date.now&&r.now,zn=e.setTimeout!==Ie.setTimeout&&e.setTimeout,Bn=te.ceil,Fn=te.floor,jn=ee.getOwnPropertySymbols,Vn=ve?ve.isBuffer:a,Un=e.isFinite,Hn=ae.join,Gn=Cn(ee.keys,ee),Wn=te.max,qn=te.min,Qn=r.now,Yn=e.parseInt,Xn=te.random,$n=ae.reverse,Zn=Ba(e,"DataView"),Jn=Ba(e,"Map"),Kn=Ba(e,"Promise"),ti=Ba(e,"Set"),ei=Ba(e,"WeakMap"),ni=Ba(ee,"create"),ii=ei&&new ei,ri={},ai=co(Zn),oi=co(Jn),si=co(Kn),li=co(ti),ui=co(ei),ci=xe?xe.prototype:a,hi=ci?ci.valueOf:a,fi=ci?ci.toString:a;function di(t){if(ks(t)&&!vs(t)&&!(t instanceof vi)){if(t instanceof gi)return t;if(ce.call(t,"__wrapped__"))return ho(t)}return new gi(t)}var pi=function(){function t(){}return function(e){if(!Cs(e))return{};if(Le)return Le(e);t.prototype=e;var n=new t;return t.prototype=a,n}}();function mi(){}function gi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}function vi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=z,this.__views__=[]}function yi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function xi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _i(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new xi;++e<n;)this.add(t[e])}function wi(t){var e=this.__data__=new bi(t);this.size=e.size}function Si(t,e){var n=vs(t),i=!n&&gs(t),r=!n&&!i&&_s(t),a=!n&&!i&&!r&&Ds(t),o=n||i||r||a,s=o?gn(t.length,ie):[],l=s.length;for(var u in t)!e&&!ce.call(t,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Wa(u,l))||s.push(u);return s}function Ei(t){var e=t.length;return e?t[_r(0,e-1)]:a}function Mi(t,e){return so(na(t),Ni(e,0,t.length))}function Ti(t){return so(na(t))}function Ci(t,e,n){(n===a||ds(t[e],n))&&(n!==a||e in t)||Li(t,e,n)}function ki(t,e,n){var i=t[e];ce.call(t,e)&&ds(i,n)&&(n!==a||e in t)||Li(t,e,n)}function Pi(t,e){for(var n=t.length;n--;)if(ds(t[n][0],e))return n;return-1}function Ai(t,e,n,i){return Fi(t,(function(t,r,a){e(i,t,n(t),a)})),i}function Oi(t,e){return t&&ia(e,rl(e),t)}function Li(t,e,n){"__proto__"==e&&dn?dn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ii(t,e){for(var n=-1,r=e.length,o=i(r),s=null==t;++n<r;)o[n]=s?a:Ks(t,e[n]);return o}function Ni(t,e,n){return t==t&&(n!==a&&(t=t<=n?t:n),e!==a&&(t=t>=e?t:e)),t}function Ri(t,e,n,i,r,o){var s,l=e&f,u=e&d,c=e&p;if(n&&(s=r?n(t,i,r,o):n(t)),s!==a)return s;if(!Cs(t))return t;var h=vs(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&ce.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return na(t,s)}else{var m=Va(t),g=m==Y||m==X;if(_s(t))return $r(t,l);if(m==K||m==V||g&&!r){if(s=u||g?{}:Ha(t),!l)return u?function(t,e){return ia(t,ja(t),e)}(t,function(t,e){return t&&ia(e,al(e),t)}(s,t)):function(t,e){return ia(t,Fa(t),e)}(t,Oi(s,t))}else{if(!Ce[m])return r?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case lt:return Zr(t);case G:case W:return new i(+t);case ut:return function(t,e){var n=e?Zr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ct:case ht:case ft:case dt:case pt:case mt:case gt:case vt:case yt:return Jr(t,n);case $:return new i;case Z:case it:return new i(t);case et:return function(t){var e=new t.constructor(t.source,Ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new i;case rt:return r=t,hi?ee(hi.call(r)):{}}var r}(t,m,l)}}o||(o=new wi);var v=o.get(t);if(v)return v;o.set(t,s),Is(t)?t.forEach((function(i){s.add(Ri(i,e,n,i,t,o))})):Ps(t)&&t.forEach((function(i,r){s.set(r,Ri(i,e,n,r,t,o))}));var y=h?a:(c?u?Oa:Aa:u?al:rl)(t);return Qe(y||t,(function(i,r){y&&(i=t[r=i]),ki(s,r,Ri(i,e,n,r,t,o))})),s}function Di(t,e,n){var i=n.length;if(null==t)return!i;for(t=ee(t);i--;){var r=n[i],o=e[r],s=t[r];if(s===a&&!(r in t)||!o(s))return!1}return!0}function zi(t,e,n){if("function"!=typeof t)throw new re(l);return io((function(){t.apply(a,n)}),e)}function Bi(t,e,n,i){var r=-1,a=Ze,s=!0,l=t.length,u=[],c=e.length;if(!l)return u;n&&(e=Ke(e,vn(n))),i?(a=Je,s=!1):e.length>=o&&(a=bn,s=!1,e=new _i(e));t:for(;++r<l;){var h=t[r],f=null==n?h:n(h);if(h=i||0!==h?h:0,s&&f==f){for(var d=c;d--;)if(e[d]===f)continue t;u.push(h)}else a(e,f,i)||u.push(h)}return u}di.templateSettings={escape:Tt,evaluate:Ct,interpolate:kt,variable:"",imports:{_:di}},di.prototype=mi.prototype,di.prototype.constructor=di,gi.prototype=pi(mi.prototype),gi.prototype.constructor=gi,vi.prototype=pi(mi.prototype),vi.prototype.constructor=vi,yi.prototype.clear=function(){this.__data__=ni?ni(null):{},this.size=0},yi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yi.prototype.get=function(t){var e=this.__data__;if(ni){var n=e[t];return n===u?a:n}return ce.call(e,t)?e[t]:a},yi.prototype.has=function(t){var e=this.__data__;return ni?e[t]!==a:ce.call(e,t)},yi.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ni&&e===a?u:e,this},bi.prototype.clear=function(){this.__data__=[],this.size=0},bi.prototype.delete=function(t){var e=this.__data__,n=Pi(e,t);return!(n<0)&&(n==e.length-1?e.pop():Re.call(e,n,1),--this.size,!0)},bi.prototype.get=function(t){var e=this.__data__,n=Pi(e,t);return n<0?a:e[n][1]},bi.prototype.has=function(t){return Pi(this.__data__,t)>-1},bi.prototype.set=function(t,e){var n=this.__data__,i=Pi(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},xi.prototype.clear=function(){this.size=0,this.__data__={hash:new yi,map:new(Jn||bi),string:new yi}},xi.prototype.delete=function(t){var e=Da(this,t).delete(t);return this.size-=e?1:0,e},xi.prototype.get=function(t){return Da(this,t).get(t)},xi.prototype.has=function(t){return Da(this,t).has(t)},xi.prototype.set=function(t,e){var n=Da(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},_i.prototype.add=_i.prototype.push=function(t){return this.__data__.set(t,u),this},_i.prototype.has=function(t){return this.__data__.has(t)},wi.prototype.clear=function(){this.__data__=new bi,this.size=0},wi.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wi.prototype.get=function(t){return this.__data__.get(t)},wi.prototype.has=function(t){return this.__data__.has(t)},wi.prototype.set=function(t,e){var n=this.__data__;if(n instanceof bi){var i=n.__data__;if(!Jn||i.length<o-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new xi(i)}return n.set(t,e),this.size=n.size,this};var Fi=oa(Qi),ji=oa(Yi,!0);function Vi(t,e){var n=!0;return Fi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function Ui(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(l===a?s==s&&!Rs(s):n(s,l)))var l=s,u=o}return u}function Hi(t,e){var n=[];return Fi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function Gi(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=Ga),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Gi(s,e-1,n,i,r):tn(r,s):i||(r[r.length]=s)}return r}var Wi=sa(),qi=sa(!0);function Qi(t,e){return t&&Wi(t,e,rl)}function Yi(t,e){return t&&qi(t,e,rl)}function Xi(t,e){return $e(e,(function(e){return Es(t[e])}))}function $i(t,e){for(var n=0,i=(e=qr(e,t)).length;null!=t&&n<i;)t=t[uo(e[n++])];return n&&n==i?t:a}function Zi(t,e,n){var i=e(t);return vs(t)?i:tn(i,n(t))}function Ji(t){return null==t?t===a?at:J:an&&an in ee(t)?function(t){var e=ce.call(t,an),n=t[an];try{t[an]=a;var i=!0}catch(t){}var r=de.call(t);i&&(e?t[an]=n:delete t[an]);return r}(t):function(t){return de.call(t)}(t)}function Ki(t,e){return t>e}function tr(t,e){return null!=t&&ce.call(t,e)}function er(t,e){return null!=t&&e in ee(t)}function nr(t,e,n){for(var r=n?Je:Ze,o=t[0].length,s=t.length,l=s,u=i(s),c=1/0,h=[];l--;){var f=t[l];l&&e&&(f=Ke(f,vn(e))),c=qn(f.length,c),u[l]=!n&&(e||o>=120&&f.length>=120)?new _i(l&&f):a}f=t[0];var d=-1,p=u[0];t:for(;++d<o&&h.length<c;){var m=f[d],g=e?e(m):m;if(m=n||0!==m?m:0,!(p?bn(p,g):r(h,g,n))){for(l=s;--l;){var v=u[l];if(!(v?bn(v,g):r(t[l],g,n)))continue t}p&&p.push(g),h.push(m)}}return h}function ir(t,e,n){var i=null==(t=to(t,e=qr(e,t)))?t:t[uo(So(e))];return null==i?a:We(i,t,n)}function rr(t){return ks(t)&&Ji(t)==V}function ar(t,e,n,i,r){return t===e||(null==t||null==e||!ks(t)&&!ks(e)?t!=t&&e!=e:function(t,e,n,i,r,o){var s=vs(t),l=vs(e),u=s?U:Va(t),c=l?U:Va(e),h=(u=u==V?K:u)==K,f=(c=c==V?K:c)==K,d=u==c;if(d&&_s(t)){if(!_s(e))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new wi),s||Ds(t)?ka(t,e,n,i,r,o):function(t,e,n,i,r,a,o){switch(n){case ut:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lt:return!(t.byteLength!=e.byteLength||!a(new we(t),new we(e)));case G:case W:case Z:return ds(+t,+e);case Q:return t.name==e.name&&t.message==e.message;case et:case it:return t==e+"";case $:var s=Tn;case nt:var l=i&m;if(s||(s=Pn),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;i|=g,o.set(t,e);var c=ka(s(t),s(e),i,r,a,o);return o.delete(t),c;case rt:if(hi)return hi.call(t)==hi.call(e)}return!1}(t,e,u,n,i,r,o);if(!(n&m)){var p=h&&ce.call(t,"__wrapped__"),v=f&&ce.call(e,"__wrapped__");if(p||v){var y=p?t.value():t,b=v?e.value():e;return o||(o=new wi),r(y,b,n,i,o)}}if(!d)return!1;return o||(o=new wi),function(t,e,n,i,r,o){var s=n&m,l=Aa(t),u=l.length,c=Aa(e).length;if(u!=c&&!s)return!1;var h=u;for(;h--;){var f=l[h];if(!(s?f in e:ce.call(e,f)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var p=!0;o.set(t,e),o.set(e,t);var g=s;for(;++h<u;){f=l[h];var v=t[f],y=e[f];if(i)var b=s?i(y,v,f,e,t,o):i(v,y,f,t,e,o);if(!(b===a?v===y||r(v,y,n,i,o):b)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var x=t.constructor,_=e.constructor;x!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,i,r,o)}(t,e,n,i,ar,r))}function or(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=ee(t);r--;){var l=n[r];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++r<o;){var u=(l=n[r])[0],c=t[u],h=l[1];if(s&&l[2]){if(c===a&&!(u in t))return!1}else{var f=new wi;if(i)var d=i(c,h,u,t,e,f);if(!(d===a?ar(h,c,m|g,i,f):d))return!1}}return!0}function sr(t){return!(!Cs(t)||(e=t,fe&&fe in e))&&(Es(t)?ge:qt).test(co(t));var e}function lr(t){return"function"==typeof t?t:null==t?Al:"object"==typeof t?vs(t)?pr(t[0],t[1]):dr(t):Fl(t)}function ur(t){if(!$a(t))return Gn(t);var e=[];for(var n in ee(t))ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function cr(t){if(!Cs(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=$a(t),n=[];for(var i in t)("constructor"!=i||!e&&ce.call(t,i))&&n.push(i);return n}function hr(t,e){return t<e}function fr(t,e){var n=-1,r=bs(t)?i(t.length):[];return Fi(t,(function(t,i,a){r[++n]=e(t,i,a)})),r}function dr(t){var e=za(t);return 1==e.length&&e[0][2]?Ja(e[0][0],e[0][1]):function(n){return n===t||or(n,t,e)}}function pr(t,e){return Qa(t)&&Za(e)?Ja(uo(t),e):function(n){var i=Ks(n,t);return i===a&&i===e?tl(n,t):ar(e,i,m|g)}}function mr(t,e,n,i,r){t!==e&&Wi(e,(function(o,s){if(r||(r=new wi),Cs(o))!function(t,e,n,i,r,o,s){var l=eo(t,n),u=eo(e,n),c=s.get(u);if(c)return void Ci(t,n,c);var h=o?o(l,u,n+"",t,e,s):a,f=h===a;if(f){var d=vs(u),p=!d&&_s(u),m=!d&&!p&&Ds(u);h=u,d||p||m?vs(l)?h=l:xs(l)?h=na(l):p?(f=!1,h=$r(u,!0)):m?(f=!1,h=Jr(u,!0)):h=[]:Os(u)||gs(u)?(h=l,gs(l)?h=Gs(l):Cs(l)&&!Es(l)||(h=Ha(u))):f=!1}f&&(s.set(u,h),r(h,u,i,o,s),s.delete(u));Ci(t,n,h)}(t,e,s,n,mr,i,r);else{var l=i?i(eo(t,s),o,s+"",t,e,r):a;l===a&&(l=o),Ci(t,s,l)}}),al)}function gr(t,e){var n=t.length;if(n)return Wa(e+=e<0?n:0,n)?t[e]:a}function vr(t,e,n){var i=-1;return e=Ke(e.length?e:[Al],vn(Ra())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fr(t,(function(t,n,r){return{criteria:Ke(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,n){var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;for(;++i<o;){var l=Kr(r[i],a[i]);if(l){if(i>=s)return l;var u=n[i];return l*("desc"==u?-1:1)}}return t.index-e.index}(t,e,n)}))}function yr(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=$i(t,o);n(s,o)&&Tr(a,qr(o,t),s)}return a}function br(t,e,n,i){var r=i?un:ln,a=-1,o=e.length,s=t;for(t===e&&(e=na(e)),n&&(s=Ke(t,vn(n)));++a<o;)for(var l=0,u=e[a],c=n?n(u):u;(l=r(s,c,l,i))>-1;)s!==t&&Re.call(s,l,1),Re.call(t,l,1);return t}function xr(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;Wa(r)?Re.call(t,r,1):Br(t,r)}}return t}function _r(t,e){return t+Fn(Xn()*(e-t+1))}function wr(t,e){var n="";if(!t||e<1||e>N)return n;do{e%2&&(n+=t),(e=Fn(e/2))&&(t+=t)}while(e);return n}function Sr(t,e){return ro(Ka(t,e,Al),t+"")}function Er(t){return Ei(dl(t))}function Mr(t,e){var n=dl(t);return so(n,Ni(e,0,n.length))}function Tr(t,e,n,i){if(!Cs(t))return t;for(var r=-1,o=(e=qr(e,t)).length,s=o-1,l=t;null!=l&&++r<o;){var u=uo(e[r]),c=n;if(r!=s){var h=l[u];(c=i?i(h,u,l):a)===a&&(c=Cs(h)?h:Wa(e[r+1])?[]:{})}ki(l,u,c),l=l[u]}return t}var Cr=ii?function(t,e){return ii.set(t,e),t}:Al,kr=dn?function(t,e){return dn(t,"toString",{configurable:!0,enumerable:!1,value:Cl(e),writable:!0})}:Al;function Pr(t){return so(dl(t))}function Ar(t,e,n){var r=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var o=i(a);++r<a;)o[r]=t[r+e];return o}function Or(t,e){var n;return Fi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function Lr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=F){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!Rs(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return Ir(t,e,Al,n)}function Ir(t,e,n,i){e=n(e);for(var r=0,o=null==t?0:t.length,s=e!=e,l=null===e,u=Rs(e),c=e===a;r<o;){var h=Fn((r+o)/2),f=n(t[h]),d=f!==a,p=null===f,m=f==f,g=Rs(f);if(s)var v=i||m;else v=c?m&&(i||d):l?m&&d&&(i||!p):u?m&&d&&!p&&(i||!g):!p&&!g&&(i?f<=e:f<e);v?r=h+1:o=h}return qn(o,B)}function Nr(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!ds(s,l)){var l=s;a[r++]=0===o?0:o}}return a}function Rr(t){return"number"==typeof t?t:Rs(t)?D:+t}function Dr(t){if("string"==typeof t)return t;if(vs(t))return Ke(t,Dr)+"";if(Rs(t))return fi?fi.call(t):"";var e=t+"";return"0"==e&&1/t==-I?"-0":e}function zr(t,e,n){var i=-1,r=Ze,a=t.length,s=!0,l=[],u=l;if(n)s=!1,r=Je;else if(a>=o){var c=e?null:wa(t);if(c)return Pn(c);s=!1,r=bn,u=new _i}else u=e?[]:l;t:for(;++i<a;){var h=t[i],f=e?e(h):h;if(h=n||0!==h?h:0,s&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue t;e&&u.push(f),l.push(h)}else r(u,f,n)||(u!==l&&u.push(f),l.push(h))}return l}function Br(t,e){return null==(t=to(t,e=qr(e,t)))||delete t[uo(So(e))]}function Fr(t,e,n,i){return Tr(t,e,n($i(t,e)),i)}function jr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?Ar(t,i?0:a,i?a+1:r):Ar(t,i?a+1:0,i?r:a)}function Vr(t,e){var n=t;return n instanceof vi&&(n=n.value()),en(e,(function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))}),n)}function Ur(t,e,n){var r=t.length;if(r<2)return r?zr(t[0]):[];for(var a=-1,o=i(r);++a<r;)for(var s=t[a],l=-1;++l<r;)l!=a&&(o[a]=Bi(o[a]||s,t[l],e,n));return zr(Gi(o,1),e,n)}function Hr(t,e,n){for(var i=-1,r=t.length,o=e.length,s={};++i<r;){var l=i<o?e[i]:a;n(s,t[i],l)}return s}function Gr(t){return xs(t)?t:[]}function Wr(t){return"function"==typeof t?t:Al}function qr(t,e){return vs(t)?t:Qa(t,e)?[t]:lo(Ws(t))}var Qr=Sr;function Yr(t,e,n){var i=t.length;return n=n===a?i:n,!e&&n>=i?t:Ar(t,e,n)}var Xr=Rn||function(t){return Ie.clearTimeout(t)};function $r(t,e){if(e)return t.slice();var n=t.length,i=ke?ke(n):new t.constructor(n);return t.copy(i),i}function Zr(t){var e=new t.constructor(t.byteLength);return new we(e).set(new we(t)),e}function Jr(t,e){var n=e?Zr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Kr(t,e){if(t!==e){var n=t!==a,i=null===t,r=t==t,o=Rs(t),s=e!==a,l=null===e,u=e==e,c=Rs(e);if(!l&&!c&&!o&&t>e||o&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!r)return 1;if(!i&&!o&&!c&&t<e||c&&n&&r&&!i&&!o||l&&n&&r||!s&&r||!u)return-1}return 0}function ta(t,e,n,r){for(var a=-1,o=t.length,s=n.length,l=-1,u=e.length,c=Wn(o-s,0),h=i(u+c),f=!r;++l<u;)h[l]=e[l];for(;++a<s;)(f||a<o)&&(h[n[a]]=t[a]);for(;c--;)h[l++]=t[a++];return h}function ea(t,e,n,r){for(var a=-1,o=t.length,s=-1,l=n.length,u=-1,c=e.length,h=Wn(o-l,0),f=i(h+c),d=!r;++a<h;)f[a]=t[a];for(var p=a;++u<c;)f[p+u]=e[u];for(;++s<l;)(d||a<o)&&(f[p+n[s]]=t[a++]);return f}function na(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function ia(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],u=i?i(n[l],t[l],l,n,t):a;u===a&&(u=t[l]),r?Li(n,l,u):ki(n,l,u)}return n}function ra(t,e){return function(n,i){var r=vs(n)?qe:Ai,a=e?e():{};return r(n,t,Ra(i,2),a)}}function aa(t){return Sr((function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:a,s=r>2?n[2]:a;for(o=t.length>3&&"function"==typeof o?(r--,o):a,s&&qa(n[0],n[1],s)&&(o=r<3?a:o,r=1),e=ee(e);++i<r;){var l=n[i];l&&t(e,l,i,o)}return e}))}function oa(t,e){return function(n,i){if(null==n)return n;if(!bs(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=ee(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function sa(t){return function(e,n,i){for(var r=-1,a=ee(e),o=i(e),s=o.length;s--;){var l=o[t?s:++r];if(!1===n(a[l],l,a))break}return e}}function la(t){return function(e){var n=Mn(e=Ws(e))?Ln(e):a,i=n?n[0]:e.charAt(0),r=n?Yr(n,1).join(""):e.slice(1);return i[t]()+r}}function ua(t){return function(e){return en(El(gl(e).replace(ye,"")),t,"")}}function ca(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=pi(t.prototype),i=t.apply(n,e);return Cs(i)?i:n}}function ha(t){return function(e,n,i){var r=ee(e);if(!bs(e)){var o=Ra(n,3);e=rl(e),n=function(t){return o(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[o?e[s]:s]:a}}function fa(t){return Pa((function(e){var n=e.length,i=n,r=gi.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new re(l);if(r&&!s&&"wrapper"==Ia(o))var s=new gi([],!0)}for(i=s?i:n;++i<n;){var u=Ia(o=e[i]),c="wrapper"==u?La(o):a;s=c&&Ya(c[0])&&c[1]==(E|x|w|M)&&!c[4].length&&1==c[9]?s[Ia(c[0])].apply(s,c[3]):1==o.length&&Ya(o)?s[u]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&vs(i))return s.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}}))}function da(t,e,n,r,o,s,l,u,c,h){var f=e&E,d=e&v,p=e&y,m=e&(x|_),g=e&T,b=p?a:ca(t);return function v(){for(var y=arguments.length,x=i(y),_=y;_--;)x[_]=arguments[_];if(m)var w=Na(v),S=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(x,w);if(r&&(x=ta(x,r,o,m)),s&&(x=ea(x,s,l,m)),y-=S,m&&y<h){var E=kn(x,w);return xa(t,e,da,v.placeholder,n,x,E,u,c,h-y)}var M=d?n:this,T=p?M[t]:t;return y=x.length,u?x=function(t,e){var n=t.length,i=qn(e.length,n),r=na(t);for(;i--;){var o=e[i];t[i]=Wa(o,n)?r[o]:a}return t}(x,u):g&&y>1&&x.reverse(),f&&c<y&&(x.length=c),this&&this!==Ie&&this instanceof v&&(T=b||ca(T)),T.apply(M,x)}}function pa(t,e){return function(n,i){return function(t,e,n,i){return Qi(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function ma(t,e){return function(n,i){var r;if(n===a&&i===a)return e;if(n!==a&&(r=n),i!==a){if(r===a)return i;"string"==typeof n||"string"==typeof i?(n=Dr(n),i=Dr(i)):(n=Rr(n),i=Rr(i)),r=t(n,i)}return r}}function ga(t){return Pa((function(e){return e=Ke(e,vn(Ra())),Sr((function(n){var i=this;return t(e,(function(t){return We(t,i,n)}))}))}))}function va(t,e){var n=(e=e===a?" ":Dr(e)).length;if(n<2)return n?wr(e,t):e;var i=wr(e,Bn(t/On(e)));return Mn(e)?Yr(Ln(i),0,t).join(""):i.slice(0,t)}function ya(t){return function(e,n,r){return r&&"number"!=typeof r&&qa(e,n,r)&&(n=r=a),e=js(e),n===a?(n=e,e=0):n=js(n),function(t,e,n,r){for(var a=-1,o=Wn(Bn((e-t)/(n||1)),0),s=i(o);o--;)s[r?o:++a]=t,t+=n;return s}(e,n,r=r===a?e<n?1:-1:js(r),t)}}function ba(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Hs(e),n=Hs(n)),t(e,n)}}function xa(t,e,n,i,r,o,s,l,u,c){var h=e&x;e|=h?w:S,(e&=~(h?S:w))&b||(e&=~(v|y));var f=[t,e,r,h?o:a,h?s:a,h?a:o,h?a:s,l,u,c],d=n.apply(a,f);return Ya(t)&&no(d,f),d.placeholder=i,ao(d,t,e)}function _a(t){var e=te[t];return function(t,n){if(t=Hs(t),(n=null==n?0:qn(Vs(n),292))&&Un(t)){var i=(Ws(t)+"e").split("e");return+((i=(Ws(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var wa=ti&&1/Pn(new ti([,-0]))[1]==I?function(t){return new ti(t)}:Rl;function Sa(t){return function(e){var n=Va(e);return n==$?Tn(e):n==nt?An(e):function(t,e){return Ke(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ea(t,e,n,r,o,s,u,c){var f=e&y;if(!f&&"function"!=typeof t)throw new re(l);var d=r?r.length:0;if(d||(e&=~(w|S),r=o=a),u=u===a?u:Wn(Vs(u),0),c=c===a?c:Vs(c),d-=o?o.length:0,e&S){var p=r,m=o;r=o=a}var g=f?a:La(t),T=[t,e,n,r,o,p,m,s,u,c];if(g&&function(t,e){var n=t[1],i=e[1],r=n|i,a=r<(v|y|E),o=i==E&&n==x||i==E&&n==M&&t[7].length<=e[8]||i==(E|M)&&e[7].length<=e[8]&&n==x;if(!a&&!o)return t;i&v&&(t[2]=e[2],r|=n&v?0:b);var s=e[3];if(s){var l=t[3];t[3]=l?ta(l,s,e[4]):s,t[4]=l?kn(t[3],h):e[4]}(s=e[5])&&(l=t[5],t[5]=l?ea(l,s,e[6]):s,t[6]=l?kn(t[5],h):e[6]);(s=e[7])&&(t[7]=s);i&E&&(t[8]=null==t[8]?e[8]:qn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(T,g),t=T[0],e=T[1],n=T[2],r=T[3],o=T[4],!(c=T[9]=T[9]===a?f?0:t.length:Wn(T[9]-d,0))&&e&(x|_)&&(e&=~(x|_)),e&&e!=v)C=e==x||e==_?function(t,e,n){var r=ca(t);return function o(){for(var s=arguments.length,l=i(s),u=s,c=Na(o);u--;)l[u]=arguments[u];var h=s<3&&l[0]!==c&&l[s-1]!==c?[]:kn(l,c);return(s-=h.length)<n?xa(t,e,da,o.placeholder,a,l,h,a,a,n-s):We(this&&this!==Ie&&this instanceof o?r:t,this,l)}}(t,e,c):e!=w&&e!=(v|w)||o.length?da.apply(a,T):function(t,e,n,r){var a=e&v,o=ca(t);return function e(){for(var s=-1,l=arguments.length,u=-1,c=r.length,h=i(c+l),f=this&&this!==Ie&&this instanceof e?o:t;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++s];return We(f,a?n:this,h)}}(t,e,n,r);else var C=function(t,e,n){var i=e&v,r=ca(t);return function e(){return(this&&this!==Ie&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return ao((g?Cr:no)(C,T),t,e)}function Ma(t,e,n,i){return t===a||ds(t,se[n])&&!ce.call(i,n)?e:t}function Ta(t,e,n,i,r,o){return Cs(t)&&Cs(e)&&(o.set(e,t),mr(t,e,a,Ta,o),o.delete(e)),t}function Ca(t){return Os(t)?a:t}function ka(t,e,n,i,r,o){var s=n&m,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var h=-1,f=!0,d=n&g?new _i:a;for(o.set(t,e),o.set(e,t);++h<l;){var p=t[h],v=e[h];if(i)var y=s?i(v,p,h,e,t,o):i(p,v,h,t,e,o);if(y!==a){if(y)continue;f=!1;break}if(d){if(!rn(e,(function(t,e){if(!bn(d,e)&&(p===t||r(p,t,n,i,o)))return d.push(e)}))){f=!1;break}}else if(p!==v&&!r(p,v,n,i,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Pa(t){return ro(Ka(t,a,yo),t+"")}function Aa(t){return Zi(t,rl,Fa)}function Oa(t){return Zi(t,al,ja)}var La=ii?function(t){return ii.get(t)}:Rl;function Ia(t){for(var e=t.name+"",n=ri[e],i=ce.call(ri,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function Na(t){return(ce.call(di,"placeholder")?di:t).placeholder}function Ra(){var t=di.iteratee||Ol;return t=t===Ol?lr:t,arguments.length?t(arguments[0],arguments[1]):t}function Da(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function za(t){for(var e=rl(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Za(r)]}return e}function Ba(t,e){var n=function(t,e){return null==t?a:t[e]}(t,e);return sr(n)?n:a}var Fa=jn?function(t){return null==t?[]:(t=ee(t),$e(jn(t),(function(e){return Ne.call(t,e)})))}:Ul,ja=jn?function(t){for(var e=[];t;)tn(e,Fa(t)),t=Oe(t);return e}:Ul,Va=Ji;function Ua(t,e,n){for(var i=-1,r=(e=qr(e,t)).length,a=!1;++i<r;){var o=uo(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&Ts(r)&&Wa(o,r)&&(vs(t)||gs(t))}function Ha(t){return"function"!=typeof t.constructor||$a(t)?{}:pi(Oe(t))}function Ga(t){return vs(t)||gs(t)||!!(ze&&t&&t[ze])}function Wa(t,e){var n=typeof t;return!!(e=null==e?N:e)&&("number"==n||"symbol"!=n&&Yt.test(t))&&t>-1&&t%1==0&&t<e}function qa(t,e,n){if(!Cs(n))return!1;var i=typeof e;return!!("number"==i?bs(n)&&Wa(e,n.length):"string"==i&&e in n)&&ds(n[e],t)}function Qa(t,e){if(vs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Rs(t))||(At.test(t)||!Pt.test(t)||null!=e&&t in ee(e))}function Ya(t){var e=Ia(t),n=di[e];if("function"!=typeof n||!(e in vi.prototype))return!1;if(t===n)return!0;var i=La(n);return!!i&&t===i[0]}(Zn&&Va(new Zn(new ArrayBuffer(1)))!=ut||Jn&&Va(new Jn)!=$||Kn&&"[object Promise]"!=Va(Kn.resolve())||ti&&Va(new ti)!=nt||ei&&Va(new ei)!=ot)&&(Va=function(t){var e=Ji(t),n=e==K?t.constructor:a,i=n?co(n):"";if(i)switch(i){case ai:return ut;case oi:return $;case si:return"[object Promise]";case li:return nt;case ui:return ot}return e});var Xa=le?Es:Hl;function $a(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se)}function Za(t){return t==t&&!Cs(t)}function Ja(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==a||t in ee(n)))}}function Ka(t,e,n){return e=Wn(e===a?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=Wn(r.length-e,0),s=i(o);++a<o;)s[a]=r[e+a];a=-1;for(var l=i(e+1);++a<e;)l[a]=r[a];return l[e]=n(s),We(t,this,l)}}function to(t,e){return e.length<2?t:$i(t,Ar(e,0,-1))}function eo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var no=oo(Cr),io=zn||function(t,e){return Ie.setTimeout(t,e)},ro=oo(kr);function ao(t,e,n){var i=e+"";return ro(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(zt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Qe(j,(function(n){var i="_."+n[0];e&n[1]&&!Ze(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(Bt);return e?e[1].split(Ft):[]}(i),n)))}function oo(t){var e=0,n=0;return function(){var i=Qn(),r=A-(i-n);if(n=i,r>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(a,arguments)}}function so(t,e){var n=-1,i=t.length,r=i-1;for(e=e===a?i:e;++n<e;){var o=_r(n,r),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var lo=function(t){var e=ss(t,(function(t){return n.size===c&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ot,(function(t,n,i,r){e.push(i?r.replace(Vt,"$1"):n||t)})),e}));function uo(t){if("string"==typeof t||Rs(t))return t;var e=t+"";return"0"==e&&1/t==-I?"-0":e}function co(t){if(null!=t){try{return ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ho(t){if(t instanceof vi)return t.clone();var e=new gi(t.__wrapped__,t.__chain__);return e.__actions__=na(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fo=Sr((function(t,e){return xs(t)?Bi(t,Gi(e,1,xs,!0)):[]})),po=Sr((function(t,e){var n=So(e);return xs(n)&&(n=a),xs(t)?Bi(t,Gi(e,1,xs,!0),Ra(n,2)):[]})),mo=Sr((function(t,e){var n=So(e);return xs(n)&&(n=a),xs(t)?Bi(t,Gi(e,1,xs,!0),a,n):[]}));function go(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Vs(n);return r<0&&(r=Wn(i+r,0)),sn(t,Ra(e,3),r)}function vo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==a&&(r=Vs(n),r=n<0?Wn(i+r,0):qn(r,i-1)),sn(t,Ra(e,3),r,!0)}function yo(t){return(null==t?0:t.length)?Gi(t,1):[]}function bo(t){return t&&t.length?t[0]:a}var xo=Sr((function(t){var e=Ke(t,Gr);return e.length&&e[0]===t[0]?nr(e):[]})),_o=Sr((function(t){var e=So(t),n=Ke(t,Gr);return e===So(n)?e=a:n.pop(),n.length&&n[0]===t[0]?nr(n,Ra(e,2)):[]})),wo=Sr((function(t){var e=So(t),n=Ke(t,Gr);return(e="function"==typeof e?e:a)&&n.pop(),n.length&&n[0]===t[0]?nr(n,a,e):[]}));function So(t){var e=null==t?0:t.length;return e?t[e-1]:a}var Eo=Sr(Mo);function Mo(t,e){return t&&t.length&&e&&e.length?br(t,e):t}var To=Pa((function(t,e){var n=null==t?0:t.length,i=Ii(t,e);return xr(t,Ke(e,(function(t){return Wa(t,n)?+t:t})).sort(Kr)),i}));function Co(t){return null==t?t:$n.call(t)}var ko=Sr((function(t){return zr(Gi(t,1,xs,!0))})),Po=Sr((function(t){var e=So(t);return xs(e)&&(e=a),zr(Gi(t,1,xs,!0),Ra(e,2))})),Ao=Sr((function(t){var e=So(t);return e="function"==typeof e?e:a,zr(Gi(t,1,xs,!0),a,e)}));function Oo(t){if(!t||!t.length)return[];var e=0;return t=$e(t,(function(t){if(xs(t))return e=Wn(t.length,e),!0})),gn(e,(function(e){return Ke(t,fn(e))}))}function Lo(t,e){if(!t||!t.length)return[];var n=Oo(t);return null==e?n:Ke(n,(function(t){return We(e,a,t)}))}var Io=Sr((function(t,e){return xs(t)?Bi(t,e):[]})),No=Sr((function(t){return Ur($e(t,xs))})),Ro=Sr((function(t){var e=So(t);return xs(e)&&(e=a),Ur($e(t,xs),Ra(e,2))})),Do=Sr((function(t){var e=So(t);return e="function"==typeof e?e:a,Ur($e(t,xs),a,e)})),zo=Sr(Oo);var Bo=Sr((function(t){var e=t.length,n=e>1?t[e-1]:a;return n="function"==typeof n?(t.pop(),n):a,Lo(t,n)}));function Fo(t){var e=di(t);return e.__chain__=!0,e}function jo(t,e){return e(t)}var Vo=Pa((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Ii(e,t)};return!(e>1||this.__actions__.length)&&i instanceof vi&&Wa(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:jo,args:[r],thisArg:a}),new gi(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(a),t}))):this.thru(r)}));var Uo=ra((function(t,e,n){ce.call(t,n)?++t[n]:Li(t,n,1)}));var Ho=ha(go),Go=ha(vo);function Wo(t,e){return(vs(t)?Qe:Fi)(t,Ra(e,3))}function qo(t,e){return(vs(t)?Ye:ji)(t,Ra(e,3))}var Qo=ra((function(t,e,n){ce.call(t,n)?t[n].push(e):Li(t,n,[e])}));var Yo=Sr((function(t,e,n){var r=-1,a="function"==typeof e,o=bs(t)?i(t.length):[];return Fi(t,(function(t){o[++r]=a?We(e,t,n):ir(t,e,n)})),o})),Xo=ra((function(t,e,n){Li(t,n,e)}));function $o(t,e){return(vs(t)?Ke:fr)(t,Ra(e,3))}var Zo=ra((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Jo=Sr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&qa(t,e[0],e[1])?e=[]:n>2&&qa(e[0],e[1],e[2])&&(e=[e[0]]),vr(t,Gi(e,1),[])})),Ko=Dn||function(){return Ie.Date.now()};function ts(t,e,n){return e=n?a:e,e=t&&null==e?t.length:e,Ea(t,E,a,a,a,a,e)}function es(t,e){var n;if("function"!=typeof e)throw new re(l);return t=Vs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=a),n}}var ns=Sr((function(t,e,n){var i=v;if(n.length){var r=kn(n,Na(ns));i|=w}return Ea(t,i,e,n,r)})),is=Sr((function(t,e,n){var i=v|y;if(n.length){var r=kn(n,Na(is));i|=w}return Ea(e,i,t,n,r)}));function rs(t,e,n){var i,r,o,s,u,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new re(l);function m(e){var n=i,o=r;return i=r=a,h=e,s=t.apply(o,n)}function g(t){var n=t-c;return c===a||n>=e||n<0||d&&t-h>=o}function v(){var t=Ko();if(g(t))return y(t);u=io(v,function(t){var n=e-(t-c);return d?qn(n,o-(t-h)):n}(t))}function y(t){return u=a,p&&i?m(t):(i=r=a,s)}function b(){var t=Ko(),n=g(t);if(i=arguments,r=this,c=t,n){if(u===a)return function(t){return h=t,u=io(v,e),f?m(t):s}(c);if(d)return Xr(u),u=io(v,e),m(c)}return u===a&&(u=io(v,e)),s}return e=Hs(e)||0,Cs(n)&&(f=!!n.leading,o=(d="maxWait"in n)?Wn(Hs(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==a&&Xr(u),h=0,i=c=r=u=a},b.flush=function(){return u===a?s:y(Ko())},b}var as=Sr((function(t,e){return zi(t,1,e)})),os=Sr((function(t,e,n){return zi(t,Hs(e)||0,n)}));function ss(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new re(l);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(ss.Cache||xi),n}function ls(t){if("function"!=typeof t)throw new re(l);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ss.Cache=xi;var us=Qr((function(t,e){var n=(e=1==e.length&&vs(e[0])?Ke(e[0],vn(Ra())):Ke(Gi(e,1),vn(Ra()))).length;return Sr((function(i){for(var r=-1,a=qn(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return We(t,this,i)}))})),cs=Sr((function(t,e){var n=kn(e,Na(cs));return Ea(t,w,a,e,n)})),hs=Sr((function(t,e){var n=kn(e,Na(hs));return Ea(t,S,a,e,n)})),fs=Pa((function(t,e){return Ea(t,M,a,a,a,e)}));function ds(t,e){return t===e||t!=t&&e!=e}var ps=ba(Ki),ms=ba((function(t,e){return t>=e})),gs=rr(function(){return arguments}())?rr:function(t){return ks(t)&&ce.call(t,"callee")&&!Ne.call(t,"callee")},vs=i.isArray,ys=Fe?vn(Fe):function(t){return ks(t)&&Ji(t)==lt};function bs(t){return null!=t&&Ts(t.length)&&!Es(t)}function xs(t){return ks(t)&&bs(t)}var _s=Vn||Hl,ws=je?vn(je):function(t){return ks(t)&&Ji(t)==W};function Ss(t){if(!ks(t))return!1;var e=Ji(t);return e==Q||e==q||"string"==typeof t.message&&"string"==typeof t.name&&!Os(t)}function Es(t){if(!Cs(t))return!1;var e=Ji(t);return e==Y||e==X||e==H||e==tt}function Ms(t){return"number"==typeof t&&t==Vs(t)}function Ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=N}function Cs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ks(t){return null!=t&&"object"==typeof t}var Ps=Ve?vn(Ve):function(t){return ks(t)&&Va(t)==$};function As(t){return"number"==typeof t||ks(t)&&Ji(t)==Z}function Os(t){if(!ks(t)||Ji(t)!=K)return!1;var e=Oe(t);if(null===e)return!0;var n=ce.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==pe}var Ls=Ue?vn(Ue):function(t){return ks(t)&&Ji(t)==et};var Is=He?vn(He):function(t){return ks(t)&&Va(t)==nt};function Ns(t){return"string"==typeof t||!vs(t)&&ks(t)&&Ji(t)==it}function Rs(t){return"symbol"==typeof t||ks(t)&&Ji(t)==rt}var Ds=Ge?vn(Ge):function(t){return ks(t)&&Ts(t.length)&&!!Te[Ji(t)]};var zs=ba(hr),Bs=ba((function(t,e){return t<=e}));function Fs(t){if(!t)return[];if(bs(t))return Ns(t)?Ln(t):na(t);if(Be&&t[Be])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Be]());var e=Va(t);return(e==$?Tn:e==nt?Pn:dl)(t)}function js(t){return t?(t=Hs(t))===I||t===-I?(t<0?-1:1)*R:t==t?t:0:0===t?t:0}function Vs(t){var e=js(t),n=e%1;return e==e?n?e-n:e:0}function Us(t){return t?Ni(Vs(t),0,z):0}function Hs(t){if("number"==typeof t)return t;if(Rs(t))return D;if(Cs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Cs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Nt,"");var n=Wt.test(t);return n||Qt.test(t)?Ae(t.slice(2),n?2:8):Gt.test(t)?D:+t}function Gs(t){return ia(t,al(t))}function Ws(t){return null==t?"":Dr(t)}var qs=aa((function(t,e){if($a(e)||bs(e))ia(e,rl(e),t);else for(var n in e)ce.call(e,n)&&ki(t,n,e[n])})),Qs=aa((function(t,e){ia(e,al(e),t)})),Ys=aa((function(t,e,n,i){ia(e,al(e),t,i)})),Xs=aa((function(t,e,n,i){ia(e,rl(e),t,i)})),$s=Pa(Ii);var Zs=Sr((function(t,e){t=ee(t);var n=-1,i=e.length,r=i>2?e[2]:a;for(r&&qa(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],s=al(o),l=-1,u=s.length;++l<u;){var c=s[l],h=t[c];(h===a||ds(h,se[c])&&!ce.call(t,c))&&(t[c]=o[c])}return t})),Js=Sr((function(t){return t.push(a,Ta),We(sl,a,t)}));function Ks(t,e,n){var i=null==t?a:$i(t,e);return i===a?n:i}function tl(t,e){return null!=t&&Ua(t,e,er)}var el=pa((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=n}),Cl(Al)),nl=pa((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),ce.call(t,e)?t[e].push(n):t[e]=[n]}),Ra),il=Sr(ir);function rl(t){return bs(t)?Si(t):ur(t)}function al(t){return bs(t)?Si(t,!0):cr(t)}var ol=aa((function(t,e,n){mr(t,e,n)})),sl=aa((function(t,e,n,i){mr(t,e,n,i)})),ll=Pa((function(t,e){var n={};if(null==t)return n;var i=!1;e=Ke(e,(function(e){return e=qr(e,t),i||(i=e.length>1),e})),ia(t,Oa(t),n),i&&(n=Ri(n,f|d|p,Ca));for(var r=e.length;r--;)Br(n,e[r]);return n}));var ul=Pa((function(t,e){return null==t?{}:function(t,e){return yr(t,e,(function(e,n){return tl(t,n)}))}(t,e)}));function cl(t,e){if(null==t)return{};var n=Ke(Oa(t),(function(t){return[t]}));return e=Ra(e),yr(t,n,(function(t,n){return e(t,n[0])}))}var hl=Sa(rl),fl=Sa(al);function dl(t){return null==t?[]:yn(t,rl(t))}var pl=ua((function(t,e,n){return e=e.toLowerCase(),t+(n?ml(e):e)}));function ml(t){return Sl(Ws(t).toLowerCase())}function gl(t){return(t=Ws(t))&&t.replace(Xt,wn).replace(be,"")}var vl=ua((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),yl=ua((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),bl=la("toLowerCase");var xl=ua((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var _l=ua((function(t,e,n){return t+(n?" ":"")+Sl(e)}));var wl=ua((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Sl=la("toUpperCase");function El(t,e,n){return t=Ws(t),(e=n?a:e)===a?function(t){return Se.test(t)}(t)?function(t){return t.match(_e)||[]}(t):function(t){return t.match(jt)||[]}(t):t.match(e)||[]}var Ml=Sr((function(t,e){try{return We(t,a,e)}catch(t){return Ss(t)?t:new Jt(t)}})),Tl=Pa((function(t,e){return Qe(e,(function(e){e=uo(e),Li(t,e,ns(t[e],t))})),t}));function Cl(t){return function(){return t}}var kl=fa(),Pl=fa(!0);function Al(t){return t}function Ol(t){return lr("function"==typeof t?t:Ri(t,f))}var Ll=Sr((function(t,e){return function(n){return ir(n,t,e)}})),Il=Sr((function(t,e){return function(n){return ir(t,n,e)}}));function Nl(t,e,n){var i=rl(e),r=Xi(e,i);null!=n||Cs(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Xi(e,rl(e)));var a=!(Cs(n)&&"chain"in n&&!n.chain),o=Es(t);return Qe(r,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=na(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,tn([this.value()],arguments))})})),t}function Rl(){}var Dl=ga(Ke),zl=ga(Xe),Bl=ga(rn);function Fl(t){return Qa(t)?fn(uo(t)):function(t){return function(e){return $i(e,t)}}(t)}var jl=ya(),Vl=ya(!0);function Ul(){return[]}function Hl(){return!1}var Gl=ma((function(t,e){return t+e}),0),Wl=_a("ceil"),ql=ma((function(t,e){return t/e}),1),Ql=_a("floor");var Yl,Xl=ma((function(t,e){return t*e}),1),$l=_a("round"),Zl=ma((function(t,e){return t-e}),0);return di.after=function(t,e){if("function"!=typeof e)throw new re(l);return t=Vs(t),function(){if(--t<1)return e.apply(this,arguments)}},di.ary=ts,di.assign=qs,di.assignIn=Qs,di.assignInWith=Ys,di.assignWith=Xs,di.at=$s,di.before=es,di.bind=ns,di.bindAll=Tl,di.bindKey=is,di.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return vs(t)?t:[t]},di.chain=Fo,di.chunk=function(t,e,n){e=(n?qa(t,e,n):e===a)?1:Wn(Vs(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,s=0,l=i(Bn(r/e));o<r;)l[s++]=Ar(t,o,o+=e);return l},di.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},di.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return tn(vs(n)?na(n):[n],Gi(e,1))},di.cond=function(t){var e=null==t?0:t.length,n=Ra();return t=e?Ke(t,(function(t){if("function"!=typeof t[1])throw new re(l);return[n(t[0]),t[1]]})):[],Sr((function(n){for(var i=-1;++i<e;){var r=t[i];if(We(r[0],this,n))return We(r[1],this,n)}}))},di.conforms=function(t){return function(t){var e=rl(t);return function(n){return Di(n,t,e)}}(Ri(t,f))},di.constant=Cl,di.countBy=Uo,di.create=function(t,e){var n=pi(t);return null==e?n:Oi(n,e)},di.curry=function t(e,n,i){var r=Ea(e,x,a,a,a,a,a,n=i?a:n);return r.placeholder=t.placeholder,r},di.curryRight=function t(e,n,i){var r=Ea(e,_,a,a,a,a,a,n=i?a:n);return r.placeholder=t.placeholder,r},di.debounce=rs,di.defaults=Zs,di.defaultsDeep=Js,di.defer=as,di.delay=os,di.difference=fo,di.differenceBy=po,di.differenceWith=mo,di.drop=function(t,e,n){var i=null==t?0:t.length;return i?Ar(t,(e=n||e===a?1:Vs(e))<0?0:e,i):[]},di.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Ar(t,0,(e=i-(e=n||e===a?1:Vs(e)))<0?0:e):[]},di.dropRightWhile=function(t,e){return t&&t.length?jr(t,Ra(e,3),!0,!0):[]},di.dropWhile=function(t,e){return t&&t.length?jr(t,Ra(e,3),!0):[]},di.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&qa(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=Vs(n))<0&&(n=-n>r?0:r+n),(i=i===a||i>r?r:Vs(i))<0&&(i+=r),i=n>i?0:Us(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},di.filter=function(t,e){return(vs(t)?$e:Hi)(t,Ra(e,3))},di.flatMap=function(t,e){return Gi($o(t,e),1)},di.flatMapDeep=function(t,e){return Gi($o(t,e),I)},di.flatMapDepth=function(t,e,n){return n=n===a?1:Vs(n),Gi($o(t,e),n)},di.flatten=yo,di.flattenDeep=function(t){return(null==t?0:t.length)?Gi(t,I):[]},di.flattenDepth=function(t,e){return(null==t?0:t.length)?Gi(t,e=e===a?1:Vs(e)):[]},di.flip=function(t){return Ea(t,T)},di.flow=kl,di.flowRight=Pl,di.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},di.functions=function(t){return null==t?[]:Xi(t,rl(t))},di.functionsIn=function(t){return null==t?[]:Xi(t,al(t))},di.groupBy=Qo,di.initial=function(t){return(null==t?0:t.length)?Ar(t,0,-1):[]},di.intersection=xo,di.intersectionBy=_o,di.intersectionWith=wo,di.invert=el,di.invertBy=nl,di.invokeMap=Yo,di.iteratee=Ol,di.keyBy=Xo,di.keys=rl,di.keysIn=al,di.map=$o,di.mapKeys=function(t,e){var n={};return e=Ra(e,3),Qi(t,(function(t,i,r){Li(n,e(t,i,r),t)})),n},di.mapValues=function(t,e){var n={};return e=Ra(e,3),Qi(t,(function(t,i,r){Li(n,i,e(t,i,r))})),n},di.matches=function(t){return dr(Ri(t,f))},di.matchesProperty=function(t,e){return pr(t,Ri(e,f))},di.memoize=ss,di.merge=ol,di.mergeWith=sl,di.method=Ll,di.methodOf=Il,di.mixin=Nl,di.negate=ls,di.nthArg=function(t){return t=Vs(t),Sr((function(e){return gr(e,t)}))},di.omit=ll,di.omitBy=function(t,e){return cl(t,ls(Ra(e)))},di.once=function(t){return es(2,t)},di.orderBy=function(t,e,n,i){return null==t?[]:(vs(e)||(e=null==e?[]:[e]),vs(n=i?a:n)||(n=null==n?[]:[n]),vr(t,e,n))},di.over=Dl,di.overArgs=us,di.overEvery=zl,di.overSome=Bl,di.partial=cs,di.partialRight=hs,di.partition=Zo,di.pick=ul,di.pickBy=cl,di.property=Fl,di.propertyOf=function(t){return function(e){return null==t?a:$i(t,e)}},di.pull=Eo,di.pullAll=Mo,di.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?br(t,e,Ra(n,2)):t},di.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?br(t,e,a,n):t},di.pullAt=To,di.range=jl,di.rangeRight=Vl,di.rearg=fs,di.reject=function(t,e){return(vs(t)?$e:Hi)(t,ls(Ra(e,3)))},di.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=Ra(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return xr(t,r),n},di.rest=function(t,e){if("function"!=typeof t)throw new re(l);return Sr(t,e=e===a?e:Vs(e))},di.reverse=Co,di.sampleSize=function(t,e,n){return e=(n?qa(t,e,n):e===a)?1:Vs(e),(vs(t)?Mi:Mr)(t,e)},di.set=function(t,e,n){return null==t?t:Tr(t,e,n)},di.setWith=function(t,e,n,i){return i="function"==typeof i?i:a,null==t?t:Tr(t,e,n,i)},di.shuffle=function(t){return(vs(t)?Ti:Pr)(t)},di.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&qa(t,e,n)?(e=0,n=i):(e=null==e?0:Vs(e),n=n===a?i:Vs(n)),Ar(t,e,n)):[]},di.sortBy=Jo,di.sortedUniq=function(t){return t&&t.length?Nr(t):[]},di.sortedUniqBy=function(t,e){return t&&t.length?Nr(t,Ra(e,2)):[]},di.split=function(t,e,n){return n&&"number"!=typeof n&&qa(t,e,n)&&(e=n=a),(n=n===a?z:n>>>0)?(t=Ws(t))&&("string"==typeof e||null!=e&&!Ls(e))&&!(e=Dr(e))&&Mn(t)?Yr(Ln(t),0,n):t.split(e,n):[]},di.spread=function(t,e){if("function"!=typeof t)throw new re(l);return e=null==e?0:Wn(Vs(e),0),Sr((function(n){var i=n[e],r=Yr(n,0,e);return i&&tn(r,i),We(t,this,r)}))},di.tail=function(t){var e=null==t?0:t.length;return e?Ar(t,1,e):[]},di.take=function(t,e,n){return t&&t.length?Ar(t,0,(e=n||e===a?1:Vs(e))<0?0:e):[]},di.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Ar(t,(e=i-(e=n||e===a?1:Vs(e)))<0?0:e,i):[]},di.takeRightWhile=function(t,e){return t&&t.length?jr(t,Ra(e,3),!1,!0):[]},di.takeWhile=function(t,e){return t&&t.length?jr(t,Ra(e,3)):[]},di.tap=function(t,e){return e(t),t},di.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new re(l);return Cs(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),rs(t,e,{leading:i,maxWait:e,trailing:r})},di.thru=jo,di.toArray=Fs,di.toPairs=hl,di.toPairsIn=fl,di.toPath=function(t){return vs(t)?Ke(t,uo):Rs(t)?[t]:na(lo(Ws(t)))},di.toPlainObject=Gs,di.transform=function(t,e,n){var i=vs(t),r=i||_s(t)||Ds(t);if(e=Ra(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:Cs(t)&&Es(a)?pi(Oe(t)):{}}return(r?Qe:Qi)(t,(function(t,i,r){return e(n,t,i,r)})),n},di.unary=function(t){return ts(t,1)},di.union=ko,di.unionBy=Po,di.unionWith=Ao,di.uniq=function(t){return t&&t.length?zr(t):[]},di.uniqBy=function(t,e){return t&&t.length?zr(t,Ra(e,2)):[]},di.uniqWith=function(t,e){return e="function"==typeof e?e:a,t&&t.length?zr(t,a,e):[]},di.unset=function(t,e){return null==t||Br(t,e)},di.unzip=Oo,di.unzipWith=Lo,di.update=function(t,e,n){return null==t?t:Fr(t,e,Wr(n))},di.updateWith=function(t,e,n,i){return i="function"==typeof i?i:a,null==t?t:Fr(t,e,Wr(n),i)},di.values=dl,di.valuesIn=function(t){return null==t?[]:yn(t,al(t))},di.without=Io,di.words=El,di.wrap=function(t,e){return cs(Wr(e),t)},di.xor=No,di.xorBy=Ro,di.xorWith=Do,di.zip=zo,di.zipObject=function(t,e){return Hr(t||[],e||[],ki)},di.zipObjectDeep=function(t,e){return Hr(t||[],e||[],Tr)},di.zipWith=Bo,di.entries=hl,di.entriesIn=fl,di.extend=Qs,di.extendWith=Ys,Nl(di,di),di.add=Gl,di.attempt=Ml,di.camelCase=pl,di.capitalize=ml,di.ceil=Wl,di.clamp=function(t,e,n){return n===a&&(n=e,e=a),n!==a&&(n=(n=Hs(n))==n?n:0),e!==a&&(e=(e=Hs(e))==e?e:0),Ni(Hs(t),e,n)},di.clone=function(t){return Ri(t,p)},di.cloneDeep=function(t){return Ri(t,f|p)},di.cloneDeepWith=function(t,e){return Ri(t,f|p,e="function"==typeof e?e:a)},di.cloneWith=function(t,e){return Ri(t,p,e="function"==typeof e?e:a)},di.conformsTo=function(t,e){return null==e||Di(t,e,rl(e))},di.deburr=gl,di.defaultTo=function(t,e){return null==t||t!=t?e:t},di.divide=ql,di.endsWith=function(t,e,n){t=Ws(t),e=Dr(e);var i=t.length,r=n=n===a?i:Ni(Vs(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},di.eq=ds,di.escape=function(t){return(t=Ws(t))&&Mt.test(t)?t.replace(St,Sn):t},di.escapeRegExp=function(t){return(t=Ws(t))&&It.test(t)?t.replace(Lt,"\\$&"):t},di.every=function(t,e,n){var i=vs(t)?Xe:Vi;return n&&qa(t,e,n)&&(e=a),i(t,Ra(e,3))},di.find=Ho,di.findIndex=go,di.findKey=function(t,e){return on(t,Ra(e,3),Qi)},di.findLast=Go,di.findLastIndex=vo,di.findLastKey=function(t,e){return on(t,Ra(e,3),Yi)},di.floor=Ql,di.forEach=Wo,di.forEachRight=qo,di.forIn=function(t,e){return null==t?t:Wi(t,Ra(e,3),al)},di.forInRight=function(t,e){return null==t?t:qi(t,Ra(e,3),al)},di.forOwn=function(t,e){return t&&Qi(t,Ra(e,3))},di.forOwnRight=function(t,e){return t&&Yi(t,Ra(e,3))},di.get=Ks,di.gt=ps,di.gte=ms,di.has=function(t,e){return null!=t&&Ua(t,e,tr)},di.hasIn=tl,di.head=bo,di.identity=Al,di.includes=function(t,e,n,i){t=bs(t)?t:dl(t),n=n&&!i?Vs(n):0;var r=t.length;return n<0&&(n=Wn(r+n,0)),Ns(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&ln(t,e,n)>-1},di.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Vs(n);return r<0&&(r=Wn(i+r,0)),ln(t,e,r)},di.inRange=function(t,e,n){return e=js(e),n===a?(n=e,e=0):n=js(n),function(t,e,n){return t>=qn(e,n)&&t<Wn(e,n)}(t=Hs(t),e,n)},di.invoke=il,di.isArguments=gs,di.isArray=vs,di.isArrayBuffer=ys,di.isArrayLike=bs,di.isArrayLikeObject=xs,di.isBoolean=function(t){return!0===t||!1===t||ks(t)&&Ji(t)==G},di.isBuffer=_s,di.isDate=ws,di.isElement=function(t){return ks(t)&&1===t.nodeType&&!Os(t)},di.isEmpty=function(t){if(null==t)return!0;if(bs(t)&&(vs(t)||"string"==typeof t||"function"==typeof t.splice||_s(t)||Ds(t)||gs(t)))return!t.length;var e=Va(t);if(e==$||e==nt)return!t.size;if($a(t))return!ur(t).length;for(var n in t)if(ce.call(t,n))return!1;return!0},di.isEqual=function(t,e){return ar(t,e)},di.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:a)?n(t,e):a;return i===a?ar(t,e,a,n):!!i},di.isError=Ss,di.isFinite=function(t){return"number"==typeof t&&Un(t)},di.isFunction=Es,di.isInteger=Ms,di.isLength=Ts,di.isMap=Ps,di.isMatch=function(t,e){return t===e||or(t,e,za(e))},di.isMatchWith=function(t,e,n){return n="function"==typeof n?n:a,or(t,e,za(e),n)},di.isNaN=function(t){return As(t)&&t!=+t},di.isNative=function(t){if(Xa(t))throw new Jt(s);return sr(t)},di.isNil=function(t){return null==t},di.isNull=function(t){return null===t},di.isNumber=As,di.isObject=Cs,di.isObjectLike=ks,di.isPlainObject=Os,di.isRegExp=Ls,di.isSafeInteger=function(t){return Ms(t)&&t>=-N&&t<=N},di.isSet=Is,di.isString=Ns,di.isSymbol=Rs,di.isTypedArray=Ds,di.isUndefined=function(t){return t===a},di.isWeakMap=function(t){return ks(t)&&Va(t)==ot},di.isWeakSet=function(t){return ks(t)&&Ji(t)==st},di.join=function(t,e){return null==t?"":Hn.call(t,e)},di.kebabCase=vl,di.last=So,di.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==a&&(r=(r=Vs(n))<0?Wn(i+r,0):qn(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):sn(t,cn,r,!0)},di.lowerCase=yl,di.lowerFirst=bl,di.lt=zs,di.lte=Bs,di.max=function(t){return t&&t.length?Ui(t,Al,Ki):a},di.maxBy=function(t,e){return t&&t.length?Ui(t,Ra(e,2),Ki):a},di.mean=function(t){return hn(t,Al)},di.meanBy=function(t,e){return hn(t,Ra(e,2))},di.min=function(t){return t&&t.length?Ui(t,Al,hr):a},di.minBy=function(t,e){return t&&t.length?Ui(t,Ra(e,2),hr):a},di.stubArray=Ul,di.stubFalse=Hl,di.stubObject=function(){return{}},di.stubString=function(){return""},di.stubTrue=function(){return!0},di.multiply=Xl,di.nth=function(t,e){return t&&t.length?gr(t,Vs(e)):a},di.noConflict=function(){return Ie._===this&&(Ie._=me),this},di.noop=Rl,di.now=Ko,di.pad=function(t,e,n){t=Ws(t);var i=(e=Vs(e))?On(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return va(Fn(r),n)+t+va(Bn(r),n)},di.padEnd=function(t,e,n){t=Ws(t);var i=(e=Vs(e))?On(t):0;return e&&i<e?t+va(e-i,n):t},di.padStart=function(t,e,n){t=Ws(t);var i=(e=Vs(e))?On(t):0;return e&&i<e?va(e-i,n)+t:t},di.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Yn(Ws(t).replace(Rt,""),e||0)},di.random=function(t,e,n){if(n&&"boolean"!=typeof n&&qa(t,e,n)&&(e=n=a),n===a&&("boolean"==typeof e?(n=e,e=a):"boolean"==typeof t&&(n=t,t=a)),t===a&&e===a?(t=0,e=1):(t=js(t),e===a?(e=t,t=0):e=js(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Xn();return qn(t+r*(e-t+Pe("1e-"+((r+"").length-1))),e)}return _r(t,e)},di.reduce=function(t,e,n){var i=vs(t)?en:pn,r=arguments.length<3;return i(t,Ra(e,4),n,r,Fi)},di.reduceRight=function(t,e,n){var i=vs(t)?nn:pn,r=arguments.length<3;return i(t,Ra(e,4),n,r,ji)},di.repeat=function(t,e,n){return e=(n?qa(t,e,n):e===a)?1:Vs(e),wr(Ws(t),e)},di.replace=function(){var t=arguments,e=Ws(t[0]);return t.length<3?e:e.replace(t[1],t[2])},di.result=function(t,e,n){var i=-1,r=(e=qr(e,t)).length;for(r||(r=1,t=a);++i<r;){var o=null==t?a:t[uo(e[i])];o===a&&(i=r,o=n),t=Es(o)?o.call(t):o}return t},di.round=$l,di.runInContext=t,di.sample=function(t){return(vs(t)?Ei:Er)(t)},di.size=function(t){if(null==t)return 0;if(bs(t))return Ns(t)?On(t):t.length;var e=Va(t);return e==$||e==nt?t.size:ur(t).length},di.snakeCase=xl,di.some=function(t,e,n){var i=vs(t)?rn:Or;return n&&qa(t,e,n)&&(e=a),i(t,Ra(e,3))},di.sortedIndex=function(t,e){return Lr(t,e)},di.sortedIndexBy=function(t,e,n){return Ir(t,e,Ra(n,2))},di.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Lr(t,e);if(i<n&&ds(t[i],e))return i}return-1},di.sortedLastIndex=function(t,e){return Lr(t,e,!0)},di.sortedLastIndexBy=function(t,e,n){return Ir(t,e,Ra(n,2),!0)},di.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Lr(t,e,!0)-1;if(ds(t[n],e))return n}return-1},di.startCase=_l,di.startsWith=function(t,e,n){return t=Ws(t),n=null==n?0:Ni(Vs(n),0,t.length),e=Dr(e),t.slice(n,n+e.length)==e},di.subtract=Zl,di.sum=function(t){return t&&t.length?mn(t,Al):0},di.sumBy=function(t,e){return t&&t.length?mn(t,Ra(e,2)):0},di.template=function(t,e,n){var i=di.templateSettings;n&&qa(t,e,n)&&(e=a),t=Ws(t),e=Ys({},e,i,Ma);var r,o,s=Ys({},e.imports,i.imports,Ma),l=rl(s),u=yn(s,l),c=0,h=e.interpolate||$t,f="__p += '",d=ne((e.escape||$t).source+"|"+h.source+"|"+(h===kt?Ut:$t).source+"|"+(e.evaluate||$t).source+"|$","g"),p="//# sourceURL="+(ce.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";t.replace(d,(function(e,n,i,a,s,l){return i||(i=a),f+=t.slice(c,l).replace(Zt,En),n&&(r=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),f+="';\n";var m=ce.call(e,"variable")&&e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(bt,""):f).replace(xt,"$1").replace(_t,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Ml((function(){return Kt(l,p+"return "+f).apply(a,u)}));if(g.source=f,Ss(g))throw g;return g},di.times=function(t,e){if((t=Vs(t))<1||t>N)return[];var n=z,i=qn(t,z);e=Ra(e),t-=z;for(var r=gn(i,e);++n<t;)e(n);return r},di.toFinite=js,di.toInteger=Vs,di.toLength=Us,di.toLower=function(t){return Ws(t).toLowerCase()},di.toNumber=Hs,di.toSafeInteger=function(t){return t?Ni(Vs(t),-N,N):0===t?t:0},di.toString=Ws,di.toUpper=function(t){return Ws(t).toUpperCase()},di.trim=function(t,e,n){if((t=Ws(t))&&(n||e===a))return t.replace(Nt,"");if(!t||!(e=Dr(e)))return t;var i=Ln(t),r=Ln(e);return Yr(i,xn(i,r),_n(i,r)+1).join("")},di.trimEnd=function(t,e,n){if((t=Ws(t))&&(n||e===a))return t.replace(Dt,"");if(!t||!(e=Dr(e)))return t;var i=Ln(t);return Yr(i,0,_n(i,Ln(e))+1).join("")},di.trimStart=function(t,e,n){if((t=Ws(t))&&(n||e===a))return t.replace(Rt,"");if(!t||!(e=Dr(e)))return t;var i=Ln(t);return Yr(i,xn(i,Ln(e))).join("")},di.truncate=function(t,e){var n=C,i=k;if(Cs(e)){var r="separator"in e?e.separator:r;n="length"in e?Vs(e.length):n,i="omission"in e?Dr(e.omission):i}var o=(t=Ws(t)).length;if(Mn(t)){var s=Ln(t);o=s.length}if(n>=o)return t;var l=n-On(i);if(l<1)return i;var u=s?Yr(s,0,l).join(""):t.slice(0,l);if(r===a)return u+i;if(s&&(l+=u.length-l),Ls(r)){if(t.slice(l).search(r)){var c,h=u;for(r.global||(r=ne(r.source,Ws(Ht.exec(r))+"g")),r.lastIndex=0;c=r.exec(h);)var f=c.index;u=u.slice(0,f===a?l:f)}}else if(t.indexOf(Dr(r),l)!=l){var d=u.lastIndexOf(r);d>-1&&(u=u.slice(0,d))}return u+i},di.unescape=function(t){return(t=Ws(t))&&Et.test(t)?t.replace(wt,In):t},di.uniqueId=function(t){var e=++he;return Ws(t)+e},di.upperCase=wl,di.upperFirst=Sl,di.each=Wo,di.eachRight=qo,di.first=bo,Nl(di,(Yl={},Qi(di,(function(t,e){ce.call(di.prototype,e)||(Yl[e]=t)})),Yl),{chain:!1}),di.VERSION="4.17.15",Qe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){di[t].placeholder=di})),Qe(["drop","take"],(function(t,e){vi.prototype[t]=function(n){n=n===a?1:Wn(Vs(n),0);var i=this.__filtered__&&!e?new vi(this):this.clone();return i.__filtered__?i.__takeCount__=qn(n,i.__takeCount__):i.__views__.push({size:qn(n,z),type:t+(i.__dir__<0?"Right":"")}),i},vi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Qe(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=n==O||3==n;vi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ra(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Qe(["head","last"],(function(t,e){var n="take"+(e?"Right":"");vi.prototype[t]=function(){return this[n](1).value()[0]}})),Qe(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");vi.prototype[t]=function(){return this.__filtered__?new vi(this):this[n](1)}})),vi.prototype.compact=function(){return this.filter(Al)},vi.prototype.find=function(t){return this.filter(t).head()},vi.prototype.findLast=function(t){return this.reverse().find(t)},vi.prototype.invokeMap=Sr((function(t,e){return"function"==typeof t?new vi(this):this.map((function(n){return ir(n,t,e)}))})),vi.prototype.reject=function(t){return this.filter(ls(Ra(t)))},vi.prototype.slice=function(t,e){t=Vs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new vi(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==a&&(n=(e=Vs(e))<0?n.dropRight(-e):n.take(e-t)),n)},vi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},vi.prototype.toArray=function(){return this.take(z)},Qi(vi.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=di[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);r&&(di.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof vi,u=s[0],c=l||vs(e),h=function(t){var e=r.apply(di,tn([t],s));return i&&f?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,m=l&&!d;if(!o&&c){e=m?e:new vi(this);var g=t.apply(e,s);return g.__actions__.push({func:jo,args:[h],thisArg:a}),new gi(g,f)}return p&&m?t.apply(this,s):(g=this.thru(h),p?i?g.value()[0]:g.value():g)})})),Qe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);di.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(vs(r)?r:[],t)}return this[n]((function(n){return e.apply(vs(n)?n:[],t)}))}})),Qi(vi.prototype,(function(t,e){var n=di[e];if(n){var i=n.name+"";ce.call(ri,i)||(ri[i]=[]),ri[i].push({name:e,func:n})}})),ri[da(a,y).name]=[{name:"wrapper",func:a}],vi.prototype.clone=function(){var t=new vi(this.__wrapped__);return t.__actions__=na(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=na(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=na(this.__views__),t},vi.prototype.reverse=function(){if(this.__filtered__){var t=new vi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},vi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=vs(t),i=e<0,r=n?t.length:0,a=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=qn(e,t+o);break;case"takeRight":t=Wn(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,l=s-o,u=i?s:o-1,c=this.__iteratees__,h=c.length,f=0,d=qn(l,this.__takeCount__);if(!n||!i&&r==l&&d==l)return Vr(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var m=-1,g=t[u+=e];++m<h;){var v=c[m],y=v.iteratee,b=v.type,x=y(g);if(b==L)g=x;else if(!x){if(b==O)continue t;break t}}p[f++]=g}return p},di.prototype.at=Vo,di.prototype.chain=function(){return Fo(this)},di.prototype.commit=function(){return new gi(this.value(),this.__chain__)},di.prototype.next=function(){this.__values__===a&&(this.__values__=Fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?a:this.__values__[this.__index__++]}},di.prototype.plant=function(t){for(var e,n=this;n instanceof mi;){var i=ho(n);i.__index__=0,i.__values__=a,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},di.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof vi){var e=t;return this.__actions__.length&&(e=new vi(this)),(e=e.reverse()).__actions__.push({func:jo,args:[Co],thisArg:a}),new gi(e,this.__chain__)}return this.thru(Co)},di.prototype.toJSON=di.prototype.valueOf=di.prototype.value=function(){return Vr(this.__wrapped__,this.__actions__)},di.prototype.first=di.prototype.head,Be&&(di.prototype[Be]=function(){return this}),di}();Ie._=Nn,(r=function(){return Nn}.call(e,n,e,i))===a||(i.exports=r)}).call(this)}).call(this,n(69),n(31)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=h(n(0)),a=c(n(9)),o=c(n(105)),s=c(n(64)),l=c(n(8)),u=h(n(5));h(n(67));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.gaussMargin={top:10,bottom:10,left:10,right:10},n.state={flare:!1,flareOption:"automatic AveAve",rotation:!1,anomaly:!1},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){document.getElementById("weightForAverageList").selectedIndex="2",document.getElementById("stdConstraintsList").selectedIndex="1",this.setGaussCurve(),this.setDefaultValues()}},{key:"setDefaultValues",value:function(){$("#flareLookaround").val(3),$("#flareSensitivity").val(2),$("#rotationPeriodMin").val(20),$("#rotationPeriodMax").val(30),$("#rotationAngle").val(270)}},{key:"setGaussCurve",value:function(){var t=150-this.gaussMargin.left-this.gaussMargin.right,e=150-this.gaussMargin.top-this.gaussMargin.bottom,n=a.select("#gaussCurveArea").append("svg").attr("width",150).attr("height",150).attr("id","gaussCurve");n.append("rect").attr("width",t).attr("height",e).style("fill","none").style("stroke","lightgray").attr("transform","translate("+this.gaussMargin.left+","+this.gaussMargin.top+")"),this.xScaleGauss=a.scaleLinear().range([0,t]),this.yScaleGauss=a.scaleLinear().range([e,0]);var i=document.getElementById("weightForAverageList"),r=i.selectedIndex,s=i.options[r].value,l=o.getGaussData(Number(s));this.xScaleGauss.domain([a.min(l,(function(t){return t.x})),a.max(l,(function(t){return t.x}))]),this.yScaleGauss.domain([a.min(l,(function(t){return t.y})),a.max(l,(function(t){return t.y}))]),this.gaussPath=n.append("path").datum(l).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","gaussCurvePath").attr("transform","translate("+this.gaussMargin.left+","+this.gaussMargin.top+")").attr("d",a.line().x(function(t){return this.xScaleGauss(t.x)}.bind(this)).y(function(t){return this.yScaleGauss(t.y)}.bind(this)).curve(a.curveBasis))}},{key:"updateWeight",value:function(){a.select("#gaussCurvePath").remove();var t=document.getElementById("weightForAverageList"),e=t.selectedIndex,n=t.options[e].value,i=o.getGaussData(Number(n));this.xScaleGauss.domain([a.min(i,(function(t){return t.x})),a.max(i,(function(t){return t.x}))]),this.yScaleGauss.domain([a.min(i,(function(t){return t.y})),a.max(i,(function(t){return t.y}))]),this.gaussPath=a.select("#gaussCurve").append("path").datum(i).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","gaussCurvePath").attr("transform","translate("+this.gaussMargin.left+","+this.gaussMargin.top+")").attr("d",a.line().x(function(t){return this.xScaleGauss(t.x)}.bind(this)).y(function(t){return this.yScaleGauss(t.y)}.bind(this)).curve(a.curveBasis))}},{key:"clickRunButton",value:function(){$("#matchingStatus").text("searching..."),setTimeout(function(){this.runAutomaticExtraction()}.bind(this),0)}},{key:"runAutomaticExtraction",value:function(){var t=u.default.getTarget(),e=void 0,n=void 0,i=void 0,r={};if(this.state.flare){var a=this.state.flareOption.split(" ")[0];if("automatic"===a){var o=this.state.flareOption.split(" ")[1],c=$("#flareLookaround").val(),h=$("#flareSensitivity").val();""!==c&&""!==h&&(c=Number(c),h=Number(h),e=s.extractFlares(t,o,c,h)),r.flare={mode:a,peakFunction:this.state.flareOption.split(" ")[1],lookaround:c,sensitivity:h}}else"manual"===a&&(e=s.extractFlaresManual(t,Number($("#flareThreshold").val())),r.flare={mode:a,threshold:Number($("#flareThreshold").val())})}if(this.state.rotation){var f=[Number($("#rotationPeriodMin").val()),Number($("#rotationPeriodMax").val())],d=$("#rotationDiameter").val(),p=$("#rotationAngle").val();d=""===d?0:Number(d),p=""===p?0:Number(p);var m=document.getElementById("stdConstraintsList"),g=m.selectedIndex,v=m.options[g].value,y=document.getElementById("weightForAverageList");g=y.selectedIndex;var b=Number(y.options[g].value);n=s.extractRotations(t,f,d,p,b,v),r.rotation={period:f,diameter:d,angle:p,stdOfthePeriod:v,weightForAverage:0===b?"flat":b}}this.state.anomaly&&(i=s.extractAnomalies(t));var x=[];if(this.state.flare&&this.state.rotation){for(var _=0,w=0,S=void 0;_<e.length&&w<n.length;)n[w].id<e[_].id?w++:e[_].id<n[w].id?_++:n[w].start<=e[_].start&&e[_].start<=n[w].start+n[w].period?(void 0===(S=n[w]).flares&&(S.flares=[]),S.flares.push(e[_]),_++):e[_].start<n[w].start?_++:n[w].start+n[w].period<e[_].start&&(S&&(x.push(S),S=null),w++);S&&x.push(S)}else this.state.flare?x=e:this.state.rotation&&(x=n);this.state.anomaly&&(x=i),l.setExtractionResults(r,x),s.setDefaltOrderOfResults(),s.showExtractionResults()}},{key:"flareOptions",value:function(){return r.default.createElement("form",{className:"form-check",id:"flareOptions",style:{paddingLeft:"0px"}},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"flareAutomatic",name:"flareOptions",value:"automatic",checked:this.state.flareOption.indexOf("automatic")>=0,disabled:!this.state.flare,onChange:this.switchFlareOption.bind(this),className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"flareAutomatic"},"Automatic"),r.default.createElement("h6",null,"Parameters"),r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}}),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Lookaround"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"k neightbors",id:"flareLookaround",disabled:!this.state.flare,style:{width:"7rem",marginRight:"0.5rem"}}))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Sensitivity cutoff"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"h",id:"flareSensitivity",disabled:!this.state.flare,style:{width:"7rem",marginRight:"0.5rem"}}))),r.default.createElement("h6",null,"Peak function"),r.default.createElement("div",{className:"form-check form-check-inline"},r.default.createElement("img",{id:"peakAveMaximum",className:"selectorIcon",name:"peakFunction",value:"AveMaximum",src:"img/icons/flare1.png",alt:"Average of the maximums among k left & right neightbors",width:"80",height:"80",title:"Average of the maximums among k left & right neightbors",onClick:this.selectFlareAveMaximum.bind(this),readOnly:!0}),r.default.createElement("img",{id:"peakAveAve",className:"selectorIcon selected",name:"peakFunction",value:"AveAve",src:"img/icons/flare2.png",alt:"Average of the averages of the signed distance from k left & right neightbors",width:"80",height:"80",title:"Average of the averages of the signed distance from k left & right neightbors",onClick:this.selectFlareAveAve.bind(this),readOnly:!0}),r.default.createElement("img",{id:"peakAveDist",className:"selectorIcon",name:"peakFunction",value:"AveDist",src:"img/icons/flare3.png",alt:"Average signed distance from the averages of k neightbors",width:"80",height:"80",title:"Average signed distance from the averages of k neightbors",onClick:this.selectFlareAveDist.bind(this),readOnly:!0}))),r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"flareManual",name:"flareOptions",value:"manual",checked:"manual"===this.state.flareOption,disabled:!this.state.flare,onChange:this.switchFlareOption.bind(this),className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"flareManual"},"Manual"),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Intensity Threshold"),r.default.createElement("div",{className:"col"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"threshold",id:"flareThreshold",disabled:!this.state.flare,style:{width:"7rem",marginRight:"0.5rem"}})))))}},{key:"rotationOptions",value:function(){return r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Rotation period"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"min",id:"rotationPeriodMin",disabled:!this.state.rotation,style:{width:"20%",marginRight:"0.5rem"}}),"~",r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"max",id:"rotationPeriodMax",disabled:!this.state.rotation,style:{width:"20%",marginRight:"0.5rem",marginLeft:"0.5rem"}}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Rotation diameter"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"diameter",id:"rotationDiameter",disabled:!this.state.rotation,style:{width:"40%",marginRight:"0.5rem"}}))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Rotation angle"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"angle",id:"rotationAngle",disabled:!this.state.rotation,style:{width:"40%",marginRight:"0.5rem"}}))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5",title:"Sx and Sy are standard deviations of the whole data,  sx and sy are those of the time interval"},"Standard deviation of the period"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"stdConstraintsList",style:{width:"60%"},disabled:!this.state.rotation},r.default.createElement("option",{value:"no"},"No constraints"),r.default.createElement("option",{value:"and"},"Sx < sx  Sy < sy"),r.default.createElement("option",{value:"or"},"Sx < sx  Sy < sy"),r.default.createElement("option",{value:"x"},"Sx < sx"),r.default.createElement("option",{value:"y"},"Sy < sy")))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Weight for average"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"weightForAverageList",style:{width:"60%"},disabled:!this.state.rotation,onChange:this.updateWeight.bind(this)},r.default.createElement("option",{value:"0"},"Flat (arithmetic mean)"),r.default.createElement("option",{value:"1"},"=1"),r.default.createElement("option",{value:"3"},"=3"),r.default.createElement("option",{value:"5"},"=5")))),r.default.createElement("div",{id:"gaussCurveArea",style:{textAlign:"center"}}))}},{key:"switchFlareOption",value:function(){var t=$("input[name=flareOptions]:checked").val();this.setState({flareOption:t})}},{key:"selectFlareMethod",value:function(){var t=$("input[name=flareMethods]:checked").val();this.setState({flareOption:"automatic "+t})}},{key:"selectFlareAveMaximum",value:function(){this.setState({flareOption:"automatic AveMaximum"}),$("img[name=peakFunction]").each((function(){$(this).removeClass("selected")})),$("#peakAveMaximum").addClass("selected")}},{key:"selectFlareAveAve",value:function(){this.setState({flareOption:"automatic AveAve"}),$("img[name=peakFunction]").each((function(){$(this).removeClass("selected")})),$("#peakAveAve").addClass("selected")}},{key:"selectFlareAveDist",value:function(){this.setState({flareOption:"automatic AveDist"}),$("img[name=peakFunction]").each((function(){$(this).removeClass("selected")})),$("#peakAveDist").addClass("selected")}},{key:"clickFlare",value:function(){var t=!this.state.flare;this.setState({flare:t}),l.updateAEOption("flare",t)}},{key:"clickRotation",value:function(){var t=!this.state.rotation;this.setState({rotation:t}),l.updateAEOption("rotation",t)}},{key:"clickAnomaly",value:function(){var t=!this.state.anomaly;this.setState({anomaly:t}),l.updateAEOption("anomaly",t)}},{key:"render",value:function(){return r.default.createElement("div",{id:"AEQuerying",className:"featureArea",style:{padding:"15px"}},r.default.createElement("div",{className:"form-group",name:"AEModeForm"},r.default.createElement("div",{className:"custom-control custom-checkbox"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"flareExtractionCheck",name:"AEMode",value:"flare",onChange:this.clickFlare.bind(this),checked:this.state.flare}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"flareExtractionCheck"},"Flare"),this.flareOptions()),r.default.createElement("div",{id:"rotationExtraction"},r.default.createElement("div",{className:"custom-control custom-checkbox"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"rotationExtractionCheck",name:"AEMode",value:"rotation",onChange:this.clickRotation.bind(this),checked:this.state.rotation}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"rotationExtractionCheck"},"Rotation")),this.rotationOptions()),r.default.createElement("div",{className:"custom-control custom-checkbox"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",name:"AEMode",value:"anomaly",id:"anomalyExtractionCheck",onChange:this.clickAnomaly.bind(this),checked:this.state.anomaly}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"anomalyExtractionCheck"},"Anomaly"))),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"runAutomaticExtractionBtn",style:{float:"right"},onClick:this.clickRunButton.bind(this)},"Run"))}}]),e}(r.default.Component);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=p(n(0)),a=d(n(9)),o=n(21),s=d(n(17)),l=d(n(8)),u=p(n(3)),c=p(n(11)),h=p(n(63)),f=p(n(5));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}a.selection.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.margin={top:10,bottom:30,right:10,left:50},n.id=t.id,n.divID=t.divID,n.SPID="QBE_SP_Selector",n.data=u.default.getData(n.id);var i=h.default.getTimeRange(n.id);return n.timeRange=void 0===i?[n.data.data.meta.min.z,n.data.data.meta.max.z]:i,n.slicedData=n.data.data.spatial,n.xMinMax=[0,0],n.yMinMax=[0,0],n.selectedPeriod=[-1,-1],n.selector="selectRegion",n.state={yItem:t.yItem,yItemonPanel:t.yItem,width:t.width,height:Math.max(t.height,200)},c.default.on("updateFocus",(function(t,e,i){t===n.id&&(i?n.highlightCurrentPlot(e):n.updateCurrentPos(e))})),c.default.on("changePlotColor",(function(t){t===n.id&&n.changePlotColor(c.default.getPlotColor(t))})),f.default.on("updateSelectedPeriod",(function(){n.divID.indexOf("QBE")>=0&&"QBE"===f.default.getMode()&&Number(f.default.getSource())===n.id&&(n.selectedPeriod=f.default.getSelectedPeriod(),n.highlightSelectedTimePeriod())})),f.default.on("convertResultIntoQuery",(function(t,e,i){n.divID.indexOf("QBE")>=0&&"QBE"===f.default.getMode()&&Number(t)===n.id&&(n.selectedPeriod=f.default.getSelectedPeriod(),n.highlightSelectedTimePeriod())})),f.default.on("switchQBESelectorSP",(function(t){"reset"===t?n.resetScatterplots():(n.selector=t,n.switchMouseInteraction())})),f.default.on("resetSelection",(function(){n.resetSelection()})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){this.initalizeElements(),this.computeRange(this.state.yItem),this.drawScatterplots()}},{key:"initalizeElements",value:function(){this.zoom=a.zoom().scaleExtent([.5,10]),this.sp=a.select("#"+this.divID).append("svg").attr("id",this.SPID).attr("class","scatterplot scatterplots"+this.id+" "+this.divID),this.xScale=a.scaleLinear(),this.xScaleTmp=this.xScale,this.xAxis=this.sp.append("g").attr("class","x_axis "+this.divID),this.xAxisText=a.selectAll("g.x_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("text-anchor","middle"),this.yScale=a.scaleLinear(),this.yScaleTmp=this.yScale,this.yAxis=this.sp.append("g").attr("class","y_axis "+this.divID).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.yAxisText=a.selectAll("g.y_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle"),this.tooltip=a.select("#"+this.divID).append("div").attr("class","tooltip "+this.divID).attr("id","tooltip_"+this.SPID).style("opacity",.75).style("visibility","hidden"),this.line=a.line().x((function(t){return t[0]})).y((function(t){return t[1]})),this.lineH=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineH "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.lineV=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineV "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.clip=this.sp.append("defs").append("clipPath").attr("id","clipScatterplots_"+this.SPID).append("rect"),this.point_g=this.sp.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")").attr("clip-path","url(#clipScatterplots_"+this.SPID+")").classed("points_g",!0);var t=this.state.yItem;this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").select((function(e){return"z"in e&&t in e?this:null})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id),this.brush=a.brushX(),this.spBrusher=this.sp.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")").attr("class","brush")}},{key:"drawScatterplots",value:function(){var t=this.SPID,e=this.margin,n=this.props.width,i=Math.max(this.props.height,200),r=n-this.margin.left-this.margin.right,s=i-this.margin.top-this.margin.bottom,l=this.state.yItem;this.zoom.extent([[0,0],[r,s]]).on("zoom",this.zoomed().bind(this)),this.sp.attr("width",n).attr("height",i).call(this.zoom).on("dblclick.zoom",null).on("mousedown.zoom",null),this.brush.extent([[0,0],[r,s]]).on("start brush",this.brushed().bind(this)).on("end",this.brushedEnd().bind(this)),this.spBrusher.call(this.brush).call(this.brush.move,[0,0]),this.xScale.domain(this.xMinMax).nice().range([0,r]),this.xScaleTmp=this.xScale,this.xMinMax=this.xScale.domain(),this.xLabel=a.axisBottom(this.xScale).ticks(10).tickSize(-s).tickFormat(o.tickFormatting),this.xAxis.attr("transform","translate("+this.margin.left+","+(this.margin.top+s)+")").call(this.xLabel),this.xAxisText.attr("x",r/2).attr("y",this.margin.bottom/2+10).text(this.data.data.lookup.z),this.yScale.domain(this.yMinMax).nice().range([s,0]),this.yScaleTmp=this.yScale,this.yMinMax=this.yScale.domain(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickSize(-r).tickFormat(o.tickFormatting),this.yAxis.call(this.yLabel),this.yAxisText.attr("x",-s/2).attr("y",-this.margin.left/2-10).text(this.data.data.lookup[l]).on("click",function(){var n=a.select("#changeYAxisPanel_"+t);if("visible"===n.style("visibility"))n.transition().duration(50).style("visibility","hidden"),this.setState({yItemonPanel:this.state.yItem});else{var i=document.getElementById("changeXAxisPanel_"+t).clientHeight;document.getElementById("changeXAxisPanel_"+t).clientWidth;n.style("transform","translate("+e.left+"px,"+(s/2+e.top-i/2)+"px)").style("visibility","visible")}}.bind(this)).on("mouseover",(function(){a.select(this).style("fill","orange")})).on("mouseout",(function(){a.select(this).style("fill","black")}));var h=[[0,this.margin.top],[r,this.margin.top]],f=[[this.margin.left,0],[this.margin.left,s]];if(this.lineH.attr("d",this.line(h)),this.lineV.attr("d",this.line(f)),this.clip.attr("width",r).attr("height",s),this.data.data.merge){for(var d={},p=this.data.name.split(","),m=[],g=0;g<p.length;g++){var v=u.default.getIdFromName(p[g]);d[p[g]]=g;var y=p[g].split("+");if(y.length>1)for(var b=0;b<y.length;b++)d[y[b]]=g;m.push(c.default.getPlotColor(v))}this.points.attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(t){return this.yScale(t[l])}.bind(this)).attr("fill",(function(t){return m[d[t.source]]})).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var x=c.default.getPlotColor(this.id);this.points.attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(t){return this.yScale(t[l])}.bind(this)).attr("fill",x).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}}},{key:"zoomed",value:function(){return function(){var t=this.state.yItem,e=a.event.transform.rescaleX(this.xScale),n=a.event.transform.rescaleY(this.yScale);this.xScaleTmp=e,this.yScaleTmp=n,this.xMinMax=e.domain(),this.yMinMax=n.domain(),this.xAxis.call(this.xLabel.scale(e)),this.yAxis.call(this.yLabel.scale(n)),this.points.attr("cx",(function(t){return e(t.z)})).attr("cy",(function(e){return n(e[t])})),this.spBrusher.call(this.brush.move,[e(this.selectedPeriod[0]),e(this.selectedPeriod[1])]);var i=a.select("circle.current."+this.divID);if(i._groups[0][0]){var r=i.attr("cx"),o=i.attr("cy");o<=0||height<=o?this.lineH.attr("transform","translate("+this.margin.left+","+o+")").style("visibility","hidden"):this.lineH.transition().duration(0).attr("transform","translate("+this.margin.left+","+o+")").style("visibility","visible"),r<=0||width<=r?this.lineV.attr("transform","translate("+r+","+this.margin.top+")").style("visibility","hidden"):this.lineV.transition().duration(0).attr("transform","translate("+r+","+this.margin.top+")").style("visibility","visible")}}}},{key:"brushed",value:function(){return function(){var t=(a.event.selection||this.xScaleTmp.range).map(this.xScaleTmp.invert,this.xScaleTmp);this.selectedPeriod=t}}},{key:"brushedEnd",value:function(){return function(){"QBE"===f.default.getMode()&&Number(f.default.getSource())===this.id&&(l.selectPeriodfromSP(this.selectedPeriod),this.selectedPeriod[1]-this.selectedPeriod[0]>0?this.highlightSelectedTimePeriod():this.resetSelection())}}},{key:"spMouseOver",value:function(){var t=this.tooltip,e=this.data,n=this.state.yItem;return function(i){a.select(this).attr("stroke-width",1).attr("stroke","black"),t.transition().duration(50).style("visibility","visible"),t.html("<i>"+e.data.lookup.z+"</i>: "+i.z+"<br/><i>"+e.data.lookup[n]+"</i>: "+i[n]).style("left",a.event.pageX+20+"px").style("top",a.event.pageY-30+"px")}}},{key:"spMouseOut",value:function(){var t=this.tooltip;return function(e){var n=a.select(this);n.style("fill")!==a.color("red").toString()&&(n.attr("stroke-width",.5).attr("stroke","dimgray"),n.attr("class").indexOf("current")<0?n.attr("stroke-width",.5).attr("stroke","dimgray"):n.attr("stroke","orange").attr("stroke-width",1)),t.transition().duration(150).style("visibility","hidden")}}},{key:"spDblClick",value:function(){var t=this.id;return function(e){s.searchTime(t,e.z)}}},{key:"resetScatterplots",value:function(){this.sp.transition().duration(500).call(this.zoom.transform,a.zoomIdentity)}},{key:"highlightCurrentPlot",value:function(t){var e=this.margin,n=this.divID,i=t+this.data.data.spatial[0].z,r=a.selectAll("svg."+n),o=this.state.yItem;function s(t){var i=a.select(this),r=(i.attr("class").split(" ")[1],a.select("svg."+n)),o=r.selectAll(".currentLineH"),s=r.selectAll(".currentLineV");o.transition().duration(0).style("visibility","visible").attr("transform","translate("+e.left+","+i.attr("cy")+")"),s.transition().duration(0).style("visibility","visible").attr("transform","translate("+i.attr("cx")+","+e.top+")")}r.each((function(t){var e=a.select(this),n=e.selectAll("circle"),r=e.attr("class").split(" ");n.attr("stroke-width",.5).attr("stroke","dimgray").attr("class",r[1]+" "+r[2]);var l=n.filter((function(t){return t.z===i&&o in t}));l._groups.length>0&&l.attr("stroke","orange").attr("stroke-width",1).attr("class",r[1]+" "+r[2]+" current").moveToFront().each(s)}))}},{key:"updateCurrentPos",value:function(t){this.sp.attr("height");var e=a.scaleLinear().domain([this.xMinMax[0],this.xMinMax[1]]).range([0,this.props.width-this.margin.left-this.margin.right]),n=t+this.data.data.spatial[0].z;this.lineH.style("visibility","hidden"),this.lineV.transition().duration(0).style("visibility","visible").attr("transform","translate("+e(n)+","+this.margin.top+")")}},{key:"changePlotColor",value:function(t){a.select("#"+this.divID).selectAll("circle").attr("fill",t)}},{key:"onSelectYItem",value:function(t){this.setState({yItemonPanel:t.target.value})}},{key:"onClickYAxisDone",value:function(t){this.setState({yItem:this.state.yItemonPanel}),this.computeRange(this.state.yItemonPanel),this.updateScatterplots(this.state.yItemonPanel),this.yAxisText.text(this.data.data.lookup[this.state.yItemonPanel]),a.select("#changeYAxisPanel_"+this.SPID).transition().duration(50).style("visibility","hidden")}},{key:"computeRange",value:function(t){this.slicedData=this.data.data.spatial.filter(function(t){return this.timeRange[0]<=t.z&&t.z<=this.timeRange[1]}.bind(this)),this.xMinMax=a.extent(this.slicedData,(function(t){return t.z})),this.yMinMax=a.extent(this.slicedData,(function(e){return e[t]}))}},{key:"updateScatterplots",value:function(t){if(this.xScale.domain(this.xMinMax).nice(),this.yScale.domain(this.yMinMax).nice(),this.xMinMax=this.xScale.domain(),this.yMinMax=this.yScale.domain(),this.points.remove(),this.data.data.merge){for(var e={},n=this.data.name.split(","),i=[],r=0;r<n.length;r++){var a=u.default.getIdFromName(n[r]);e[n[r]]=r;var o=n[r].split("+");if(o.length>1)for(var s=0;s<o.length;s++)e[o[s]]=r;i.push(c.default.getPlotColor(a))}this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(e){return this.yScale(e[t])}.bind(this)).select((function(e){return z in e&&t in e?this:null})).attr("fill",(function(t){return i[e[t.source]]})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var l=c.default.getPlotColor(this.id);this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(e){return this.yScale(e[t])}.bind(this)).select((function(e){return"z"in e&&t in e?this:null})).attr("fill",l).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}this.xAxis.call(this.xLabel.scale(this.xScale)),this.yAxis.call(this.yLabel.scale(this.yScale))}},{key:"highlightSelectedTimePeriod",value:function(){var t=this.selectedPeriod;this.points.attr("stroke","dimgray").attr("stroke-width",.5),this.points.select((function(e){return t[0]<=e.z&&e.z<=t[1]?this:null})).attr("stroke","#d23430").attr("stroke-width",1)}},{key:"resetSelection",value:function(){this.selectedPeriod=[-1,-1],this.points.attr("stroke","dimgray").attr("stroke-width",.5)}},{key:"switchMouseInteraction",value:function(){switch(this.selector){case"selectRegion":this.zoom=a.zoom().scaleExtent([.5,10]).extent([[0,0],[this.props.width-this.margin.left-this.margin.right,Math.max(this.props.height,200)-this.margin.top-this.margin.bottom]]).on("zoom",this.zoomed().bind(this)),this.sp.call(this.zoom).on("dblclick.zoom",null).on("mousedown.zoom",null),this.spBrusher.attr("class","brush").call(this.brush);break;case"move":this.zoom=a.zoom().scaleExtent([.5,10]).extent([[0,0],[this.props.width-this.margin.left-this.margin.right,Math.max(this.props.height,200)-this.margin.top-this.margin.bottom]]).on("zoom",this.zoomed().bind(this)),this.sp.call(this.zoom).on("dblclick.zoom",null),this.spBrusher.on(".brush",null)}}},{key:"render",value:function(){a.selectAll("svg#"+this.SPID).size()>0&&this.drawScatterplots();var t=[],e=this.data.data.lookup;for(var n in e){var i="";(i=e[n].length>1?e[n].join(","):e[n]).indexOf("JD")<0?t.push(r.default.createElement("div",{className:"form-check",key:i},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:i},i))):t.unshift(r.default.createElement("div",{className:"form-check",key:i},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:i},i)))}return r.default.createElement("div",{id:"scatterplotsSelectors_"+this.SPID},r.default.createElement("div",{className:"overlayPanel",id:"changeYAxisPanel_"+this.SPID,style:{visibility:"hidden",textAlign:"center"}},r.default.createElement("h6",null,"Change y axis"),r.default.createElement("div",{id:"changeYAxisItem_"+this.SPID,style:{float:"left",textAlign:"left"}},r.default.createElement("form",{id:"selectYAxisForm_"+this.SPID},t)),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeYAxisBtn_"+this.SPID,onClick:this.onClickYAxisDone.bind(this)},"Done")))}}]),e}(r.default.Component);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=y(n(0)),o=(y(n(43)),y(n(307))),s=y(n(308)),l=v(n(23)),u=v(n(64)),c=v(n(17)),h=v(n(66)),f=v(n(29)),d=y(n(5)),p=y(n(3)),m=n(21),g=v(n(42));function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.LCWidth=300,n.LCHeight=200,n.optimalWarpPath=null,n.state={shownResults:[],LC:[],selected:{},accessibility:"private",mode:d.default.getMode(),AEOptions:d.default.getAEOptions()},d.default.on("setExtractionResults",(function(){n.setState({selected:{}}),"block"===$("#resultDetailArea").css("display")&&l.toggleExtractionDetailPanel()})),d.default.on("showLineCharts",(function(t){n.setState({LC:t})})),d.default.on("updateSelectedResult",(function(t,e,i){n.LCWidth=Math.max(300,e),n.LCHeight=Math.max(200,i),t.path&&(n.optimalWarpPath=t.path),n.setState({selected:t})})),d.default.on("clearResults",(function(){n.setState({shownResults:[]})})),d.default.on("updateShownResults",(function(t){n.setState({shownResults:t})})),d.default.on("selectResultFromTimeline",(function(t){var e=$("#extractionDetailLC").width();n.LCWidth=Math.max(300,e),n.LCHeight=200,t.path&&(n.optimalWarpPath=t.path),n.setState({selected:t})})),d.default.on("switchQueryMode",(function(){n.setState({mode:d.default.getMode()})})),d.default.on("updateAEOption",(function(){n.setState({AEOptions:d.default.getAEOptions()})})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){$("#topKResults").val(20)}},{key:"updateOrder",value:function(){u.showExtractionResults()}},{key:"updateKValue",value:function(){u.showExtractionResults()}},{key:"updateDistanceThreshold",value:function(){u.showExtractionResults()}},{key:"orderOfResults",value:function(){return a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"left",marginLeft:"1rem"},onChange:this.updateOrder.bind(this)},a.default.createElement("label",{className:"col-form-label col-form-label-sm",style:{marginRight:"0.5rem"}},"Sort results by"),a.default.createElement("select",{id:"resultOrderList",className:"custom-select custom-select-sm",style:{width:"7rem"}},u.updateSortResultsPulldown()))}},{key:"distanceThreshold",value:function(){return a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"left",marginLeft:"1rem"}},a.default.createElement("label",{className:"col-form-label col-form-label-sm",style:{marginRight:"0.5rem"}},"Distance threshold"),a.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"threshold",id:"distanceThreshold",onChange:this.updateDistanceThreshold.bind(this),style:{width:"7rem"}}))}},{key:"topKResults",value:function(){var t=!1;return"AE"===this.state.mode&&(this.state.AEOptions.flare||this.state.AEOptions.rotation)&&(t=!0),a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"left",marginLeft:"1rem"}},a.default.createElement("label",{className:"col-form-label col-form-label-sm",style:{marginRight:"0.5rem"}},"Top k result"),a.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"k value",id:"topKResults",disabled:t,onChange:this.updateKValue.bind(this),style:{width:"7rem"}}))}},{key:"exportResultsButton",value:function(){return a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"right"}},a.default.createElement("button",{id:"exportResultsBtn",className:"btn btn-primary btn-sm",onClick:this.exportResults.bind(this)},"Export"))}},{key:"exportResults",value:function(){var t={};t.parameters=d.default.getParameters(),"AE"!==d.default.getMode&&(t.query=d.default.getQuery()),t.results=[];for(var e=0;e<this.state.shownResults.length;e++){var n={};for(var i in this.state.shownResults[e])"id"===i?n.fileName=p.default.getFileName(Number(this.state.shownResults[e][i])):n[i]=this.state.shownResults[e][i];t.results.push(n)}t=JSON.stringify(t,null,"\t");var r="extractionResults_"+g.createDateLabel()+".json",a=new Blob([t],{type:"application/json"}),o=(window.URL||window.webkitURL).createObjectURL(a),s=document.createElement("a");s.download=decodeURI(r),s.href=o,s.click()}},{key:"updateAccessibility",value:function(){var t=$("input[name=accessibility]:checked").val();this.setState({accessibility:t})}},{key:"addComment",value:function(){document.getElementById("commentFormFeatureExtraction").style.display="block"}},{key:"cancelComment",value:function(){document.getElementById("commentFormFeatureExtraction").style.display="none"}},{key:"submitComment",value:function(t){var e=g.getUniqueId(),n=$("#userNameComment").val(),i=this.state.accessibility,r=$("#textareaComment").val(),a=(new Date).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});if("private"===i){var o={id:e,timeStamp:a,fileName:p.default.getData(this.state.selected.id).name,userName:n,start:this.state.selected.start,comment:r};g.addCommentData(o)}document.getElementById("commentFormFeatureExtraction").style.display="none",$("#userNameComment").val(""),$("#textareaComment").val(""),f.updatePrivateComment()}},{key:"showTT",value:function(){h.selectMenu("visualization"),this.state.selected.angle?c.showRotationCenter(this.state.selected.id,[this.state.selected.start,this.state.selected.start+this.state.selected.period],this.state.selected.center):this.state.selected.period?c.showTimeTubesOfTimeSlice(this.state.selected.id,[this.state.selected.start,this.state.selected.start+this.state.selected.period]):c.searchTime(this.state.selected.id,this.state.selected.start)}},{key:"showLegendOfLC",value:function(){return a.default.createElement("svg",{id:"lineChartLegend",height:"20px",width:"300px"},a.default.createElement("line",{x1:"0",y1:"12",x2:"40",y2:"12",style:{stroke:"#80b139",strokeWidth:3}}),a.default.createElement("text",{x:"50px",y:"15px",fill:"black",fontSize:"0.8rem"},"Query"),a.default.createElement("line",{x1:"100",y1:"12",x2:"140",y2:"12",style:{stroke:"#f26418",strokeWidth:3}}),a.default.createElement("text",{x:"150px",y:"15px",fill:"black",fontSize:"0.8rem"},"Result"))}},{key:"splitResultsByData",value:function(){for(var t=this.state.shownResults.slice().sort(u.sortResults("data")),e={},n=0,i=[],r=t[0].id;n<t.length;)t[n].id!==r?(e[r]=i,r=t[n].id,i=[]):i.push(t[n]),n++;return i.length>0&&(e[r]=i),e}},{key:"render",value:function(){var t=[],e=[];if(Object.keys(this.state.selected).length>0){if(this.state.selected.period&&!this.state.selected.angle){var n=p.default.getDataArray(this.state.selected.id,1),r=d.default.getQuery();if(r.r){for(var c=[],h=[],f=0;f<n.arrayLength;f++){var g=Math.sqrt(Math.pow(n.x[f],2)+Math.pow(n.y[f],2)),v=u.convertRadToDeg(Math.atan2(n.x[f],n.y[f]));c.push(g),h.push(v)}var y={};for(var b in y.r=c,y.theta=h,n)"x"!==b&&"y"!==b&&(y[b]=n[b]);n=y}var x={},_=n.z.indexOf(this.state.selected.start),w=n.z.indexOf(this.state.selected.start+this.state.selected.period);for(var S in r)if(Array.isArray(r[S])&&Array.isArray(n[S])&&"z"!==S){if(r[S].indexOf(null)>=0){for(var E=!1,M=0;M<r[S].length;M++)if(r[S][M]){E=!0;break}if(!E)continue}x[S]=n[S].slice(_,w+1),t.push(a.default.createElement(o.default,{key:S,id:this.state.selected.id,item:S,query:r[S],target:x[S],width:this.LCWidth,height:this.LCHeight,path:"Object"==typeof this.optimalWarpPath?this.optimalWarpPath[S]:this.optimalWarpPath}))}}for(var T in this.state.selected)if("id"!==T&&"path"!==T&&!Array.isArray(this.state.selected[T])){var C=void 0;C="V"===T?"Flx(V)":l.transformCamelToSentence(T);var k=this.state.selected[T];if("object"===(void 0===k?"undefined":i(k))){var P="(";for(var A in k)P+=(0,m.formatValue)(k[A])+", ";P=P.slice(0,P.length-2),k=P+=")"}else"string"==typeof k||"number"==typeof k&&(k=(0,m.formatValue)(k));e.push(a.default.createElement("tr",{id:"extractionDetail"+C,key:T},a.default.createElement("td",null,C),a.default.createElement("td",{id:"extractionDetail"+C+"Value"},k)))}var O=p.default.getData(this.state.selected.id).data.lookup,L=d.default.getIgnored();if(L){var I=[];for(var N in O)L.indexOf(N)<0&&"z"!==N&&I.push(N);for(var R="",D=0;D<I.length;D++)R+=O[I[D]]+", ";R=R.slice(0,R.length-2),e.push(a.default.createElement("tr",{id:"extractionDetailVariables",key:"variables"},a.default.createElement("td",null,"Variables"),a.default.createElement("td",{id:"extractionDetailVariablesValue"},R)))}}var z=[];if(this.state.shownResults.length>0){var B=this.splitResultsByData();for(var F in B)z.push(a.default.createElement("div",{className:"row",key:F},a.default.createElement("div",{className:"col-2",style:{wordWrap:"anywhere",position:"relative",fontSize:"0.7rem",lineHeight:"90%"}},a.default.createElement("label",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)"}},p.default.getFileName(Number(F)))),a.default.createElement("div",{className:"col-10",id:"resultTimelineArea_"+F},a.default.createElement(s.default,{id:Number(F),results:B[F],height:40}))))}return a.default.createElement("div",{id:"extractionResults",className:"resultElem"},a.default.createElement("div",{id:"resultMenus",style:{overflow:"hidden",height:"2rem"}},this.topKResults(),this.distanceThreshold(),this.orderOfResults(),this.exportResultsButton()),a.default.createElement("div",{id:"mainResultArea"},a.default.createElement("div",{id:"resultTimelinesArea",className:"container"},z),a.default.createElement("div",{id:"resultDetail",style:{position:"relative",height:"1.5rem",marginBottom:"0px"}},a.default.createElement("div",{id:"resultDetailArea",className:"container",style:{display:"none"}},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-3",id:"extractionDetailThumbnail"},a.default.createElement("canvas",{id:"detailThumbnailCanvas"})),a.default.createElement("div",{className:"col-3",id:"extractionDetailInfo"},a.default.createElement("table",{id:"extractionDetailInfoTable",style:{width:"100%"}},a.default.createElement("tbody",null,e)),a.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"showTTBtn",style:{float:"right"},onClick:this.showTT.bind(this)},"TimeTubes"),a.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"commentBtn",style:{float:"right"},onClick:this.addComment.bind(this)},"Comment")),a.default.createElement("div",{className:"col",id:"extractionDetailLC"},this.showLegendOfLC(),t))),a.default.createElement("div",{className:"formPopup",id:"commentFormFeatureExtraction"},a.default.createElement("form",{className:"formContainer"},a.default.createElement("h6",null,"User name"),a.default.createElement("input",{type:"text",id:"userNameComment",className:"form-control form-control-sm",placeholder:"Enter Name",name:"name",required:!0}),a.default.createElement("h6",null,"Accessibility"),a.default.createElement("div",{className:"form-check form-inline",id:"accessibility",onChange:this.updateAccessibility.bind(this),style:{paddingLeft:"0px"}},a.default.createElement("div",{className:"custom-control custom-radio"},a.default.createElement("input",{type:"radio",id:"privateComment",name:"accessibility",value:"private",checked:"private"===this.state.accessibility,className:"custom-control-input",readOnly:!0}),a.default.createElement("label",{className:"custom-control-label",htmlFor:"privateComment"},"Private")),a.default.createElement("div",{className:"custom-control custom-radio",style:{marginLeft:"1.5rem"}},a.default.createElement("input",{type:"radio",id:"publicComment",name:"accessibility",value:"public",checked:"public"===this.state.accessibility,disabled:!0,className:"custom-control-input",readOnly:!0}),a.default.createElement("label",{className:"custom-control-label",htmlFor:"publicComment"},"Public"))),a.default.createElement("h6",null,"Comment"),a.default.createElement("textarea",{className:"form-control",id:"textareaComment",placeholder:"Enter comment",rows:"3",style:{marginBottom:"0.5rem"}}),a.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"submitCommentBtn",onClick:this.submitComment.bind(this),style:{float:"right"}},"Submit"),a.default.createElement("button",{className:"btn btn-secondary btn-sm",type:"button",id:"cancelCommentBtn",style:{float:"right"},onClick:this.cancelComment.bind(this)},"Cancel"))),a.default.createElement("button",{id:"collapseResultDetailPanel",className:"btn btn-primary btn-sm",style:{width:"4rem",height:"1.5rem",position:"absolute",right:"0.5rem"},onClick:l.toggleExtractionDetailPanel},"Open")),a.default.createElement("label",{id:"matchingStatus"}),a.default.createElement("div",{id:"resultsArea"})))}}]),e}(a.default.Component);e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(9)),o=n(21),s=(l(n(5)),l(n(3)));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.margin={top:30,bottom:30,right:30,left:60},n.tickWidth=10,n.id=t.id,n.item=t.item,n.itemName=s.default.getData(n.id).data.lookup[n.item],void 0===n.itemName&&(n.itemName=n.item),n.query=t.query,n.target=t.target,n.path=t.path,n.filter=!1,n.query.indexOf(null)>=0&&(n.filter=!0),n.yMinMax,n.filter){var i=n.query.filter((function(t){return null!==t}));if(i.length>0){for(var r=i[0][0],a=i[0][1],o=1;o<i.length;o++)i[o][0]<r&&(r=i[o][0]),a<i[o][1]&&(a=i[o][1]);n.yMinMax=[Math.min(r,Math.min.apply(null,n.target)),Math.max(a,Math.max.apply(null,n.target))]}else n.yMinMax=[Math.min.apply(null,n.target),Math.max.apply(null,n.target)]}else n.yMinMax=[Math.min(Math.min.apply(null,n.query),Math.min.apply(null,n.target)),Math.max(Math.max.apply(null,n.query),Math.max.apply(null,n.target))];return n.state={width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){this.initLineChart()}},{key:"componentWillUnmount",value:function(){}},{key:"initLineChart",value:function(){var t=this.state.width-this.margin.left-this.margin.right,e=this.state.height-this.margin.top-this.margin.bottom;if(this.parentArea=a.select("#lineChartArea_"+this.item),this.svg=this.parentArea.append("svg").attr("id","lineChart_"+this.item).attr("class","lineChart").attr("width",this.state.width).attr("height",this.state.height),this.graphName=this.svg.append("text").attr("x",this.margin.left+t/2).attr("y",this.margin.top).attr("text-anchor","middle").style("fill","black").style("font-size","0.8rem").text(this.itemName),this.xScale=a.scaleLinear().domain([0,this.filter?this.target.length-1:Math.max(this.query.length-1,this.target.length-1)]).nice().range([0,t]),this.xLabel=a.axisBottom(this.xScale).tickFormat(o.tickFormatting),this.xAxis=this.svg.append("g").attr("class","x_axis").attr("transform","translate("+this.margin.left+","+(this.margin.top+e)+")").call(this.xLabel),this.yScale=a.scaleLinear().domain(this.yMinMax).nice().range([e,0]),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickFormat(o.tickFormatting),this.yAxis=this.svg.append("g").attr("class","y_axis").attr("transform","translate("+this.margin.left+","+this.margin.top+")").call(this.yLabel),this.filter){for(var n=[],i=0;i<this.query.length;i++)if(this.query[i])for(var r=0;r<this.path.length&&!(this.path[r][1]<i);r++)this.path[r][1]===i&&n.push({x:this.path[r][0],range:this.query[i]});this.ranges=this.svg.selectAll("line.filteredRange").data(n).enter().append("line").attr("class","filteredRange").attr("x1",function(t){return this.xScale(t.x)}.bind(this)).attr("x2",function(t){return this.xScale(t.x)}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeTop=this.svg.selectAll("line.filteredRangeTop").data(n).enter().append("line").attr("class","filteredRangeTop").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[0])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeBottom=this.svg.selectAll("line.filteredRangeBottom").data(n).enter().append("line").attr("class","filteredRangeBottom").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[1])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}else this.queryPath=this.svg.append("path").datum(this.query).attr("fill","none").attr("stroke","#80b139").attr("stroke-width",1.5).attr("id","lineChartQuery_"+this.item).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this))).attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.targetPath=this.svg.append("path").datum(this.target).attr("fill","none").attr("stroke","#f26418").attr("stroke-width",1.5).attr("id","lineChartTarget_"+this.item).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this))).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}},{key:"updateLineChart",value:function(){if(this.id=this.props.id,this.item=this.props.item,this.query=this.props.query,this.target=this.props.target,this.path=this.props.path,this.filter=!1,this.query.indexOf(null)>=0&&(this.filter=!0),this.filter){var t=this.query.filter((function(t){return null!==t}));if(t.length>0){for(var e=t[0][0],n=t[0][1],i=1;i<t.length;i++)t[i][0]<e&&(e=t[i][0]),n<t[i][1]&&(n=t[i][1]);this.yMinMax=[Math.min(e,Math.min.apply(null,this.target)),Math.max(n,Math.max.apply(null,this.target))]}else this.yMinMax=[Math.min.apply(null,this.target),Math.max.apply(null,this.target)]}else this.yMinMax=[Math.min(Math.min.apply(null,this.query),Math.min.apply(null,this.target)),Math.max(Math.max.apply(null,this.query),Math.max.apply(null,this.target))];this.svg.selectAll("line.filteredRange").remove(),this.svg.selectAll("line.filteredRangeTop").remove(),this.svg.selectAll("line.filteredRangeBottom").remove(),this.changeLineChart()}},{key:"changeLineChart",value:function(){if(this.xScale.domain([0,Math.max(this.query.length,this.target.length)]).nice(),this.xLabel=a.axisBottom(this.xScale).tickFormat(o.tickFormatting),this.xAxis.call(this.xLabel),this.yScale.domain(this.yMinMax).nice(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickFormat(o.tickFormatting),this.yAxis.call(this.yLabel),this.filter){for(var t=[],e=0;e<this.query.length;e++)if(this.query[e])for(var n=0;n<this.path.length&&!(this.path[n][1]<e);n++)this.path[n][1]===e&&t.push({x:this.path[n][0],range:this.query[e]});this.ranges=this.svg.selectAll("line.filteredRange").data(t).enter().append("line").attr("class","filteredRange").attr("x1",function(t){return this.xScale(t.x)}.bind(this)).attr("x2",function(t){return this.xScale(t.x)}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeTop=this.svg.selectAll("line.filteredRangeTop").data(t).enter().append("line").attr("class","filteredRangeTop").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[0])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeBottom=this.svg.selectAll("line.filteredRangeBottom").data(t).enter().append("line").attr("class","filteredRangeBottom").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[1])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}else this.queryPath.datum(this.query).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this)));this.targetPath.datum(this.target).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this)))}},{key:"render",value:function(){return document.getElementById("lineChartArea_"+this.item)&&this.updateLineChart(),r.default.createElement("div",{id:"lineChartArea_"+this.item})}}]),e}(r.default.Component);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=d(n(0)),o=f(n(9)),s=f(n(8)),l=f(n(23)),u=n(21),c=d(n(3)),h=d(n(5));n(104);function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}o.selection.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=c.default.getData(t.id),n.state={id:t.id,results:t.results,height:t.height,width:0},n.resultsVQ=null,n.resultsFlare=null,n.resultsRotation=null,n.resultsAnomaly=null,h.default.on("updateShownResults",(function(t){n.updateTimeline()})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"render",value:function(){return a.default.createElement("div",{id:"resultTimeline_"+this.state.id,className:"timeline"})}},{key:"componentDidMount",value:function(){this.initializeTimeline(),this.setUpTimeline()}},{key:"componentWillUnmount",value:function(){var t=document.getElementById("resultTimeline_"+this.state.id);if(t){for(;t.firstChild;)t.removeChild(t.firstChild);t.parentNode.removeChild(t)}}},{key:"initializeTimeline",value:function(){this.svg=o.select("#resultTimeline_"+this.state.id).append("svg").attr("id","resultTimelineSVG_"+this.state.id),this.xScale=o.scaleLinear().domain([this.data.data.meta.min.z,this.data.data.meta.max.z]),this.xAxis=this.svg.append("g").attr("class","x-axis"),this.tooltip=o.select("#resultTimeline_"+this.state.id).append("div").attr("class","tooltip").attr("id","tooltipResultTimeline_"+this.state.id).style("opacity",.75).style("visibility","hidden")}},{key:"updateTimeline",value:function(){this.data=c.default.getData(this.props.id),this.setState({id:this.props.id,results:this.props.results,height:this.props.height}),this.resultsVQ=null,this.resultsFlare=null,this.resultsRotation=null,this.resultsAnomaly=null,this.setUpTimeline()}},{key:"setUpTimeline",value:function(){var t=$("#resultTimelineArea_"+this.state.id).width(),e=this.state.height;this.setState({width:t});var n=20,i=t-n-20,r=e;this.svg.attr("width",t).attr("height",e),this.xScale.domain([this.data.data.meta.min.z,this.data.data.meta.max.z]).nice().range([0,i]),this.xLabel=o.axisBottom(this.xScale).ticks(10).tickSize(10),this.xAxis.attr("transform","translate("+n+","+(r/2-5)+")").call(this.xLabel);var a=this.state.results.filter((function(t){return void 0!==t.distance})),s=this.state.results.filter((function(t){return t.angle})),l=[];this.state.results.forEach((function(t){t.V?l=l.concat(t):t.flares&&(l=l.concat(t.flares))}));var u=this.state.results.filter((function(t){return t.anomalyDegree}));this.svg.selectAll("line.resultsVQ").remove(),this.svg.selectAll("line.resultsRotation").remove(),this.svg.selectAll("circle.resultsFlare").remove(),this.svg.selectAll("circle.resultsAnomaly").remove(),a.length>0&&(this.resultsVQ=this.svg.selectAll("line.resultsVQ").data(a).enter().append("line").attr("class","resultsVQ").attr("x1",function(t){return this.xScale(t.start)}.bind(this)).attr("y1",r/2-5).attr("x2",function(t){return this.xScale(t.start+t.period)}.bind(this)).attr("y2",r/2-5).attr("stroke","#1d95c6").attr("stroke-width",20).attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick())),s.length>0&&(this.resultsRotation=this.svg.selectAll("line.resultsRotation").data(s).enter().append("line").attr("class","resultsRotation").attr("x1",function(t){return this.xScale(t.start)}.bind(this)).attr("y1",r/2-5).attr("x2",function(t){return this.xScale(t.start+t.period)}.bind(this)).attr("y2",r/2-5).attr("stroke","#80b139").attr("stroke-width",20).attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick())),l.length>0&&(this.resultsFlare=this.svg.selectAll("circle.resultsFlare").data(l).enter().append("circle").attr("class","resultsFlare").attr("cx",function(t){return this.xScale(t.start)}.bind(this)).attr("cy",r/2-5).attr("r",10).attr("fill","#f26418").attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick())),u.length>0&&(this.resultsAnomaly=this.svg.selectAll("circle.resultsAnomaly").data(u).enter().append("circle").attr("class","resultsAnomaly").attr("cx",function(t){return this.xScale(t.start)}.bind(this)).attr("cy",r/2-5).attr("r",10).attr("fill","#d23430").attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick()))}},{key:"timelineMouseOver",value:function(){var t=this.tooltip,e=this.xScale,n=this.svg.attr("width");return function(r){var a=o.select(this);a.attr("stroke")?a.attr("stroke","#284a6c").moveToFront():a.attr("fill")&&a.attr("fill","#284a6c").moveToFront(),t.transition().duration(50).style("visibility","visible");var c="";for(var h in r)if("id"!==h&&"start"!==h&&"period"!==h&&"flares"!==h&&"path"!==h){var f=r[h];if("object"===i(r[h])){for(var d in f="(",r[h])f+=(0,u.formatValue)(r[h][d])+", ";f=f.slice(0,f.length-2),f+=")"}else"number"==typeof r[h]&&(f=(0,u.formatValue)(r[h]));c+="<tr><td>"+l.transformCamelToSentence(h)+"</td><td>"+f+"</td></tr>"}if(e(r.start)<n/2)t.html("<table><tbody>"+c+"</tbody></table>").style("left",e(r.start)+50+"px").style("top","10px");else{var p=Number(t.style("width").slice(0,-2));t.html("<table><tbody>"+c+"</tbody></table>").style("left",e(r.start)-p+20+"px").style("top","10px")}s.focusResultfromTimeline(r)}}},{key:"timelineMouseOut",value:function(){var t=this.tooltip;return function(e){var n=o.select(this);e.distance?n.attr("stroke","#1d95c6"):e.angle?n.attr("stroke","#80b139"):e.V?n.attr("fill","#f26418"):e.anomalyDegree&&n.attr("fill","#d23430"),t.transition().duration(100).style("visibility","hidden")}}},{key:"timelineClick",value:function(){return function(t){s.selectResultFromTimeline(t)}}}]),e}(a.default.Component);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(0)),a=l(n(42)),o=l(n(29)),s=u(n(44));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={privateComments:a.getDataFromLocalStorage("privateComment")},s.default.on("selectMenu",(function(e){"comment"===e&&t.setState({privateComments:a.getDataFromLocalStorage("privateComment")})})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){$("#privateCommentTable").tablesorter()}},{key:"privateCommentListTr",value:function(){var t=[];if(this.state.privateComments)for(var e=0;e<this.state.privateComments.length;e++)t.push(r.default.createElement("tr",{key:e,className:"privateCommentBody",id:this.state.privateComments[e].id},r.default.createElement("td",{style:{textAlign:"center"}},r.default.createElement("input",{type:"checkbox",className:this.state.privateComments[e].id+" selectComment",name:"privateCommentSelector"})),r.default.createElement("td",null,this.state.privateComments[e].timeStamp.toLocaleString("en-US")),r.default.createElement("td",null,this.state.privateComments[e].fileName),r.default.createElement("td",null,this.state.privateComments[e].start),r.default.createElement("td",null,this.state.privateComments[e].comment),r.default.createElement("td",null,this.state.privateComments[e].userName)));return t}},{key:"privateCommentListHeader",value:function(){return r.default.createElement("thead",null,r.default.createElement("tr",{id:"privateCommentHeader"},r.default.createElement("th",{className:"col-1"},"Select"),r.default.createElement("th",{className:"col-2 num",value:"timeStamp"},"Date (GMT)"),r.default.createElement("th",{className:"col-2 case",value:"fileName"},"File name"),r.default.createElement("th",{className:"col-1 num",value:"start"},"JD"),r.default.createElement("th",{className:"col-4",value:"comment"},"Comment"),r.default.createElement("th",{className:"col-2 case",value:"userName"},"User name")))}},{key:"getSelectedPrivateComment",value:function(){for(var t=$("input[name=privateCommentSelector]:checked"),e=[],n=0;n<t.length;n++)e.push($(t[n]).attr("class").split(" ")[0]);return e}},{key:"editPrivateComment",value:function(){}},{key:"deletePrivateComment",value:function(t){for(var e=this.getSelectedPrivateComment(),n=0;n<e.length;n++)a.deletePrivateComment(e[n]);this.setState({privateComments:a.getDataFromLocalStorage("privateComment")}),o.updatePrivateComment()}},{key:"exportPrivateComment",value:function(){a.exportPrivateComment(this.getSelectedPrivateComment())}},{key:"selectAllPrivateComment",value:function(){var t=$("#selectAllPrivateCommentBtn").text(),e=$("input[name=privateCommentSelector]");"Select All"===t?(e.prop("checked",!0),$("#selectAllPrivateCommentBtn").text("Deselect All")):"Deselect All"===t&&(e.prop("checked",!1),$("#selectAllPrivateCommentBtn").text("Select All"))}},{key:"render",value:function(){var t=this.privateCommentListHeader(),e=this.privateCommentListTr();return r.default.createElement("div",{className:"contents",id:"mainCommentsArea"},r.default.createElement("ul",{className:"nav nav-tabs"},r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link active","data-toggle":"tab",href:"#private"},"Private comments")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link disabled","data-toggle":"tab",href:"#public"},"Public comments"))),r.default.createElement("div",{id:"myTabContent",className:"tab-content"},r.default.createElement("div",{className:"tab-pane fade active show commentsArea",id:"private"},r.default.createElement("div",{id:"privateCommentMenu",style:{float:"right",marginBottom:"15px"}},r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"selectAllPrivateCommentBtn",onClick:this.selectAllPrivateComment.bind(this)},"Select All"),r.default.createElement("button",{className:"btn btn-danger btn-sm",type:"button",id:"deleteCommentBtn",onClick:this.deletePrivateComment.bind(this)},"Delete"),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"exportPrivateCommentBtn",onClick:this.exportPrivateComment.bind(this)},"Export")),r.default.createElement("table",{id:"privateCommentTable",className:"table table-hover tablesorter"},t,r.default.createElement("tbody",{id:"privateCommentBody"},e))),r.default.createElement("div",{className:"tab-pane fade commentsArea",id:"public"},"Public comments will be here.")))}}]),e}(r.default.Component);e.default=c}]);