!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=106)}([function(t,e,n){"use strict";t.exports=n(107)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactCSS=e.loop=e.handleActive=e.handleHover=e.hover=void 0;var i=u(n(121)),r=u(n(192)),a=u(n(212)),o=u(n(213)),s=u(n(214)),l=u(n(215));function u(t){return t&&t.__esModule?t:{default:t}}e.hover=o.default,e.handleHover=o.default,e.handleActive=s.default,e.loop=l.default;var c=e.ReactCSS=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var s=(0,i.default)(n),l=(0,r.default)(t,s);return(0,a.default)(l)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(216);Object.defineProperty(e,"Alpha",{enumerable:!0,get:function(){return h(i).default}});var r=n(64);Object.defineProperty(e,"Checkboard",{enumerable:!0,get:function(){return h(r).default}});var a=n(219);Object.defineProperty(e,"EditableInput",{enumerable:!0,get:function(){return h(a).default}});var o=n(220);Object.defineProperty(e,"Hue",{enumerable:!0,get:function(){return h(o).default}});var s=n(222);Object.defineProperty(e,"Raised",{enumerable:!0,get:function(){return h(s).default}});var l=n(238);Object.defineProperty(e,"Saturation",{enumerable:!0,get:function(){return h(l).default}});var u=n(101);Object.defineProperty(e,"ColorWrap",{enumerable:!0,get:function(){return h(u).default}});var c=n(246);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Swatch",{enumerable:!0,get:function(){return h(c).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(15)),n(14)),s=(i=o)&&i.__esModule?i:{default:i};var l=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.data=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPLOAD_DATA":this.uploadData(t.data);break;case"UPDATE_DETAIL":this.emit("updateDetail",t.id,t.zpos);break;case"UPDATE_PRIVATE_COMMENT":this.updatePrivateComment()}}},{key:"uploadData",value:function(t){var e=this.data.length;this.data.push({id:e,name:t.name,data:t}),this.emit("upload",e),this.emit("showInitSP",e)}},{key:"getAllData",value:function(){return this.data}},{key:"getAllFileNames",value:function(){for(var t=[],e=0;e<this.data.length;e++)t.push(this.data[e].name);return t}},{key:"getAllIdsFileNames",value:function(){for(var t=[],e=0;e<this.data.length;e++)t.push({id:this.data[e].id,name:this.data[e].name});return t}},{key:"getData",value:function(t){return this.data[t]}},{key:"getDataArray",value:function(t,e){var n={};for(var i in this.data[t].data.lookup)n[i]=[];for(var r=this.data[t].data.meta.min.z,a=Math.ceil(this.data[t].data.meta.min.z),o=Math.floor(this.data[t].data.meta.max.z),s=a;s<=o;s+=e){var l=this.getValues(t,s-r);for(var u in l)n[u].push(l[u]);n.z[n.z.length-1]=s}return n.arrayLength=o-a+1,n}},{key:"getDataNum",value:function(){return this.data.length}},{key:"getTailID",value:function(){return this.data[this.data.length-1].id||0}},{key:"getFileName",value:function(t){return this.data[t].name||""}},{key:"getValues",value:function(t,e){if(t<0)return{};var n=e+this.data[t].data.meta.min.z,i=void 0;for(i=1;i<this.data[t].data.position.length&&!(this.data[t].data.position[i-1].z<=n&&n<this.data[t].data.position[i].z);i++);var r=void 0;r=n===this.data[t].data.meta.min.z||i<0?0:n===this.data[t].data.position[this.data[t].data.position.length-1].z||i>this.data[t].data.position.length-1?1:(i-1+(n-this.data[t].data.position[i-1].z)/(this.data[t].data.position[i].z-this.data[t].data.position[i-1].z))/(this.data[t].data.position.length-1);var a=void 0;for(a=1;a<this.data[t].data.color.length&&!(this.data[t].data.color[a-1].z<=n&&n<this.data[t].data.color[a].z);a++);var o=void 0;o=a>=this.data[t].data.color.length-1?1:(a-1+(n-this.data[t].data.color[a-1].z)/(this.data[t].data.color[a].z-this.data[t].data.color[a-1].z))/(this.data[t].data.color.length-1);var s=this.data[t].data.splines.position.getPoint(r),l=this.data[t].data.splines.radius.getPoint(r),u=this.data[t].data.splines.color.getPoint(o),c=this.data[t].data.splines.PDPA.getPoint(r);return{z:s.z,x:s.x,r_x:l.x,y:s.y,r_y:l.y,V:u.y,H:u.x,PD:c.x,PA:c.y}}},{key:"getIdFromName",value:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].name===t)return e;return-1}},{key:"getAverage",value:function(t,e,n){for(var i=void 0,r=void 0,a={x:0,y:0},o=0;o<n;o++)i=e+o,r=this.getValues(t,i),a.x+=r.x,a.y+=r.y;return a.x/=n,a.y/=n,a}},{key:"updatePrivateComment",value:function(){this.emit("updatePrivateComment")}}]),e}(a.EventEmitter));s.default.register(l.handleActions.bind(l)),e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(26),a=u(n(14)),o=u(n(11)),s=u(n(3)),l=n(22);function u(t){return t&&t.__esModule?t:{default:t}}var c=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.visualQuery=!1,t.mode="AE",t.AEOptions={flare:!1,rotation:!1,anomaly:!1},t.source=-1,t.target=[],t.selector=!0,t.dragSelection=!0,t.tubeAttributes=[],t.selectedPeriod=[-1,-1],t.extractionResults=[],t.query={},t.ignored=[],t.parameters={},t.kValue=20,t.order="timeStamp",t.distanceThreshold="",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPDATE_SOURCE":this.updateSource(t.id);break;case"UPDATE_TARGET":this.updateTarget(t.ids);break;case"SWITCH_SELECTOR":this.switchSelector(t.selector);break;case"SWITCH_DRAGSELECTION":this.switchDragSelection();break;case"RESET_SELECTION":this.resetSelection();break;case"SELECT_TIMEINTERVAL":this.selectTimeInterval(t.value);break;case"SWITCH_QUERY_MODE":this.switchQueryMode(t.mode);break;case"UPLOAD_TUBE_ATTRIBUTES":this.uploadTubeAttributes(t.id,t.position,t.color,t.indices);break;case"UPDATE_SELECTED_PERIOD":this.updateSelectedPeriod(t.period);break;case"SELECT_PERIOD_FROM_SP":this.selectPeriodfromSP(t.period);break;case"SET_IGNORED_VARIALES":this.setIgnoredVariables(t.varList);break;case"SET_EXTRACTION_RESULTS":this.setExtractionResults(t.parameters,t.results,t.query,t.ignored);break;case"SHOW_LINE_CHARTS":this.showLineCharts(t.LC);break;case"UPDATE_SELECTED_RESULT":this.updateSelectedResult(t.result,t.width,t.height);break;case"CLEAR_RESULTS":this.emit("clearResults");break;case"SET_QUERY":this.setQuery(t.query);break;case"CONVERT_RESULT_INTO_QUERY":this.convertResultIntoQuery(t.id,t.period,t.ignored);break;case"UPDATE_AE_OPTION":this.updateAEOption(t.option,t.value);break;case"UPDATE_SHOWN_RESULTS":this.updateShownResults(t.results);break;case"FOCUS_RESULT_FROM_TIMELINE":this.focusResultFromTimeline(t.result);break;case"SELECT_RESULT_FROM_TIMELINE":this.selectResultFromTimeline(t.result);break;case"SWITCH_QBE_SELECTOR_SP":this.switchQBESelectorSP(t.selector);break;case"UPDATE_K_VALUE":this.updateKValue(t.k);break;case"UPDATE_ORDER":this.updateOrder(t.order);break;case"UPDATE_DISTANCE_THRESHOLD":this.updateDistanceThreshold(t.threshold)}}},{key:"getVisualQuery",value:function(){return this.visualQuery}},{key:"getSource",value:function(){return this.source}},{key:"getTarget",value:function(){return this.target}},{key:"getSelector",value:function(){return this.selector}},{key:"getDragSelection",value:function(){return this.dragSelection}},{key:"getSelectedPeriod",value:function(){return this.selectedPeriod}},{key:"getMode",value:function(){return this.mode}},{key:"getTubeAttributes",value:function(t){return this.tubeAttributes[t]}},{key:"getExtractionResults",value:function(){return this.extractionResults}},{key:"getIgnored",value:function(){return this.ignored}},{key:"getQuery",value:function(){return this.query}},{key:"getAEOptions",value:function(){return this.AEOptions}},{key:"getAEOptionStatus",value:function(t){return this.AEOptions[t]}},{key:"getParameters",value:function(){return this.parameters}},{key:"getKValue",value:function(){return this.kValue}},{key:"getOrder",value:function(){return this.order}},{key:"getDistanceThreshold",value:function(){return this.distanceThreshold}},{key:"updateSource",value:function(t){this.source=t,this.emit("updateSource")}},{key:"updateTarget",value:function(t){this.target=t,this.emit("updateTarget")}},{key:"switchSelector",value:function(t){this.selector=t,this.emit("switchSelector")}},{key:"switchDragSelection",value:function(){this.dragSelection=!this.dragSelection,this.emit("switchDragSelection")}},{key:"resetSelection",value:function(){this.emit("resetSelection")}},{key:"selectTimeInterval",value:function(t){var e=this.source,n=Number(t),i=o.default.getFocused(Number(e))+s.default.getData(Number(e)).data.meta.min.z;this.selectedPeriod=[i,i+n],this.emit("selectTimeInterval",e,n)}},{key:"switchQueryMode",value:function(t){if(this.mode=t,"AE"!==t)for(var e in this.AEOptions)this.AEOptions[e]=!1;"QBE"!==t&&(this.source="default",this.ignored=[],(0,l.uncheckIgnoredVariables)()),this.emit("switchQueryMode",t)}},{key:"uploadTubeAttributes",value:function(t,e,n,i){this.tubeAttributes[t]={position:e,color:n,indices:i},this.emit("uploadTubeAttributes")}},{key:"updateSelectedPeriod",value:function(t){this.selectedPeriod=t,this.emit("updateSelectedPeriod")}},{key:"selectPeriodfromSP",value:function(t){this.selectedPeriod=t,this.emit("updateSelectedPeriod")}},{key:"setIgnoredVariables",value:function(t){this.emit("setIgnoredVariables",t)}},{key:"setExtractionResults",value:function(t,e,n,i){this.parameters=t,this.extractionResults=e,this.query=n,this.ignored=i,this.emit("setExtractionResults")}},{key:"setTexture",value:function(t){this.texture=t,this.emit("setTexture")}},{key:"showLineCharts",value:function(t){this.emit("showLineCharts",t)}},{key:"updateSelectedResult",value:function(t,e,n){this.emit("updateSelectedResult",t,e,n)}},{key:"setQuery",value:function(t){this.query=t}},{key:"convertResultIntoQuery",value:function(t,e,n){"QBE"==this.mode&&(this.selectedPeriod=e,this.ignored=n),this.emit("convertResultIntoQuery",t,e,n)}},{key:"updateAEOption",value:function(t,e){this.AEOptions[t]=e,this.emit("updateAEOption")}},{key:"updateShownResults",value:function(t){this.emit("updateShownResults",t)}},{key:"focusResultFromTimeline",value:function(t){this.emit("focusResultFromTimeline",t)}},{key:"selectResultFromTimeline",value:function(t){this.emit("selectResultFromTimeline",t)}},{key:"switchQBESelectorSP",value:function(t){this.emit("switchQBESelectorSP",t)}},{key:"updateKValue",value:function(t){this.kValue=t,this.emit("updateKValue")}},{key:"updateOrder",value:function(t){this.order=t,this.emit("updateOrder")}},{key:"updateDistanceThreshold",value:function(t){this.distanceThreshold=t,this.emit("updateDistanceThreshold")}}]),e}(r.EventEmitter));a.default.register(c.handleActions.bind(c)),e.default=c},function(t,e,n){t.exports=n(223)()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateSource=function(t){a.default.dispatch({type:"UPDATE_SOURCE",id:t})},e.updateTarget=function(t){a.default.dispatch({type:"UPDATE_TARGET",ids:t})},e.switchSelector=function(t){a.default.dispatch({type:"SWITCH_SELECTOR",selector:t})},e.switchDragSelection=function(){a.default.dispatch({type:"SWITCH_DRAGSELECTION"})},e.resetSelection=function(){a.default.dispatch({type:"RESET_SELECTION"})},e.selectTimeInterval=function(t){a.default.dispatch({type:"SELECT_TIMEINTERVAL",value:t})},e.updateSelectedPeriod=function(t){a.default.dispatch({type:"UPDATE_SELECTED_PERIOD",period:t})},e.selectPeriodfromSP=function(t){a.default.dispatch({type:"SELECT_PERIOD_FROM_SP",period:t})},e.switchQueryMode=function(t){a.default.dispatch({type:"SWITCH_QUERY_MODE",mode:t})},e.setIgnoredVariables=function(t){a.default.dispatch({type:"SET_IGNORED_VARIALES",varList:t})},e.setExtractionResults=function(t,e,n,i){a.default.dispatch({type:"SET_EXTRACTION_RESULTS",parameters:t,results:e,query:n,ignored:i})},e.showLineCharts=function(t){a.default.dispatch({type:"SHOW_LINE_CHARTS",LC:t})},e.updateSelectedResult=function(t,e,n){a.default.dispatch({type:"UPDATE_SELECTED_RESULT",result:t,width:e,height:n})},e.clearResults=function(){a.default.dispatch({type:"CLEAR_RESULTS"})},e.setQuery=function(t){a.default.dispatch({type:"SET_QUERY",query:t})},e.convertResultIntoQuery=function(t,e,n){a.default.dispatch({type:"CONVERT_RESULT_INTO_QUERY",id:t,period:e,ignored:n})},e.updateAEOption=function(t,e){a.default.dispatch({type:"UPDATE_AE_OPTION",option:t,value:e})},e.updateShownResults=function(t){a.default.dispatch({type:"UPDATE_SHOWN_RESULTS",results:t})},e.focusResultfromTimeline=function(t){a.default.dispatch({type:"FOCUS_RESULT_FROM_TIMELINE",result:t})},e.selectResultFromTimeline=function(t){a.default.dispatch({type:"SELECT_RESULT_FROM_TIMELINE",result:t})},e.switchQBESelectorSP=function(t){a.default.dispatch({type:"SWITCH_QBE_SELECTOR_SP",selector:t})},e.updateKValue=function(t){a.default.dispatch({type:"UPDATE_K_VALUE",k:t})},e.updateOrder=function(t){a.default.dispatch({type:"UPDATE_ORDER",order:t})},e.updateDistanceThreshold=function(t){a.default.dispatch({type:"UPDATE_DISTANCE_THRESHOLD",threshold:t})};var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i};n(5)},function(t,e,n){"use strict";n.r(e);var i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},r=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}};var a=r(i),o=a.right,s=a.left,l=o,u=function(t,e){null==e&&(e=c);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return a};function c(t,e){return[t,e]}var h=function(t,e,n){var i,r,a,o,s=t.length,l=e.length,u=new Array(s*l);for(null==n&&(n=c),i=a=0;i<s;++i)for(o=t[i],r=0;r<l;++r,++a)u[a]=n(o,e[r]);return u},f=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},d=function(t){return null===t?NaN:+t},p=function(t,e){var n,i,r=t.length,a=0,o=-1,s=0,l=0;if(null==e)for(;++o<r;)isNaN(n=d(t[o]))||(l+=(i=n-s)*(n-(s+=i/++a)));else for(;++o<r;)isNaN(n=d(e(t[o],o,t)))||(l+=(i=n-s)*(n-(s+=i/++a)));if(a>1)return l/(a-1)},m=function(t,e){var n=p(t,e);return n?Math.sqrt(n):n},v=function(t,e){var n,i,r,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(i=r=n;++o<a;)null!=(n=t[o])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=r=n;++o<a;)null!=(n=e(t[o],o,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]},g=Array.prototype,y=g.slice,b=g.map,x=function(t){return function(){return t}},_=function(t){return t},w=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a},S=Math.sqrt(50),E=Math.sqrt(10),M=Math.sqrt(2),T=function(t,e,n){var i,r,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=C(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(r=Math.ceil(t-e+1));++s<r;)a[s]=(t-s)/o;return i&&a.reverse(),a};function C(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=S?10:a>=E?5:a>=M?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=S?10:a>=E?5:a>=M?2:1)}function k(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=S?r*=10:a>=E?r*=5:a>=M&&(r*=2),e<t?-r:r}var P=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},A=function(){var t=_,e=v,n=P;function i(i){var r,a,o=i.length,s=new Array(o);for(r=0;r<o;++r)s[r]=t(i[r],r,i);var u=e(s),c=u[0],h=u[1],f=n(s,c,h);Array.isArray(f)||(f=k(c,h,f),f=w(Math.ceil(c/f)*f,h,f));for(var d=f.length;f[0]<=c;)f.shift(),--d;for(;f[d-1]>h;)f.pop(),--d;var p,m=new Array(d+1);for(r=0;r<=d;++r)(p=m[r]=[]).x0=r>0?f[r-1]:c,p.x1=r<d?f[r]:h;for(r=0;r<o;++r)c<=(a=s[r])&&a<=h&&m[l(f,a,0,d)].push(i[r]);return m}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:x(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:x([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?x(y.call(t)):x(t),i):n},i},O=function(t,e,n){if(null==n&&(n=d),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(r-a)}},L=function(t,e,n){return t=b.call(t,d).sort(i),Math.ceil((n-e)/(2*(O(t,.75)-O(t,.25))*Math.pow(t.length,-1/3)))},I=function(t,e,n){return Math.ceil((n-e)/(3.5*m(t)*Math.pow(t.length,-1/3)))},N=function(t,e){var n,i,r=t.length,a=-1;if(null==e){for(;++a<r;)if(null!=(n=t[a])&&n>=n)for(i=n;++a<r;)null!=(n=t[a])&&n>i&&(i=n)}else for(;++a<r;)if(null!=(n=e(t[a],a,t))&&n>=n)for(i=n;++a<r;)null!=(n=e(t[a],a,t))&&n>i&&(i=n);return i},R=function(t,e){var n,i=t.length,r=i,a=-1,o=0;if(null==e)for(;++a<i;)isNaN(n=d(t[a]))?--r:o+=n;else for(;++a<i;)isNaN(n=d(e(t[a],a,t)))?--r:o+=n;if(r)return o/r},D=function(t,e){var n,r=t.length,a=-1,o=[];if(null==e)for(;++a<r;)isNaN(n=d(t[a]))||o.push(n);else for(;++a<r;)isNaN(n=d(e(t[a],a,t)))||o.push(n);return O(o.sort(i),.5)},z=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--o]=i[e];return n},B=function(t,e){var n,i,r=t.length,a=-1;if(null==e){for(;++a<r;)if(null!=(n=t[a])&&n>=n)for(i=n;++a<r;)null!=(n=t[a])&&i>n&&(i=n)}else for(;++a<r;)if(null!=(n=e(t[a],a,t))&&n>=n)for(i=n;++a<r;)null!=(n=e(t[a],a,t))&&i>n&&(i=n);return i},F=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},j=function(t,e){if(n=t.length){var n,r,a=0,o=0,s=t[o];for(null==e&&(e=i);++a<n;)(e(r=t[a],s)<0||0!==e(s,s))&&(s=r,o=a);return 0===e(s,s)?o:void 0}},V=function(t,e,n){for(var i,r,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},U=function(t,e){var n,i=t.length,r=-1,a=0;if(null==e)for(;++r<i;)(n=+t[r])&&(a+=n);else for(;++r<i;)(n=+e(t[r],r,t))&&(a+=n);return a},H=function(t){if(!(r=t.length))return[];for(var e=-1,n=B(t,G),i=new Array(n);++e<n;)for(var r,a=-1,o=i[e]=new Array(r);++a<r;)o[a]=t[a][e];return i};function G(t){return t.length}var W=function(){return H(arguments)},q=Array.prototype.slice,$=function(t){return t};function Q(t){return"translate("+(t+.5)+",0)"}function Y(t){return"translate(0,"+(t+.5)+")"}function X(t){return function(e){return+t(e)}}function Z(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function J(){return!this.__axis}function K(t,e){var n=[],i=null,r=null,a=6,o=6,s=3,l=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",c=1===t||3===t?Q:Y;function h(h){var f=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,d=null==r?e.tickFormat?e.tickFormat.apply(e,n):$:r,p=Math.max(a,0)+s,m=e.range(),v=+m[0]+.5,g=+m[m.length-1]+.5,y=(e.bandwidth?Z:X)(e.copy()),b=h.selection?h.selection():h,x=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(f,e).order(),w=_.exit(),S=_.enter().append("g").attr("class","tick"),E=_.select("line"),M=_.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(S),E=E.merge(S.append("line").attr("stroke","currentColor").attr(u+"2",l*a)),M=M.merge(S.append("text").attr("fill","currentColor").attr(u,l*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==b&&(x=x.transition(h),_=_.transition(h),E=E.transition(h),M=M.transition(h),w=w.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=y(t))?c(t):this.getAttribute("transform")})),S.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:y(t))}))),w.remove(),x.attr("d",4===t||2==t?o?"M"+l*o+","+v+"H0.5V"+g+"H"+l*o:"M0.5,"+v+"V"+g:o?"M"+v+","+l*o+"V0.5H"+g+"V"+l*o:"M"+v+",0.5H"+g),_.attr("opacity",1).attr("transform",(function(t){return c(y(t))})),E.attr(u+"2",l*a),M.attr(u,l*p).text(d),b.filter(J).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=y}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=q.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:q.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(i=null==t?null:q.call(t),h):i&&i.slice()},h.tickFormat=function(t){return arguments.length?(r=t,h):r},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function tt(t){return K(1,t)}function et(t){return K(2,t)}function nt(t){return K(3,t)}function it(t){return K(4,t)}var rt={value:function(){}};function at(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new ot(i)}function ot(t){this._=t}function st(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function lt(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function ut(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=rt,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}ot.prototype=at.prototype={constructor:ot,on:function(t,e){var n,i=this._,r=st(t+"",i),a=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=r[a]).type)i[n]=ut(i[n],t.name,e);else if(null==e)for(n in i)i[n]=ut(i[n],t.name,null);return this}for(;++a<o;)if((n=(t=r[a]).type)&&(n=lt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ot(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var ct=at;function ht(){}var ft=function(t){return null==t?ht:function(){return this.querySelector(t)}};function dt(){return[]}var pt=function(t){return null==t?dt:function(){return this.querySelectorAll(t)}},mt=function(t){return function(){return this.matches(t)}},vt=function(t){return new Array(t.length)};function gt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}gt.prototype={constructor:gt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function yt(t,e,n,i,r,a){for(var o,s=0,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new gt(t,a[s]);for(;s<l;++s)(o=e[s])&&(r[s]=o)}function bt(t,e,n,i,r,a,o){var s,l,u,c={},h=e.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(d[s]=u="$"+o.call(l,l.__data__,s,e),u in c?r[s]=l:c[u]=l);for(s=0;s<f;++s)(l=c[u="$"+o.call(t,a[s],s,a)])?(i[s]=l,l.__data__=a[s],c[u]=null):n[s]=new gt(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&c[d[s]]===l&&(r[s]=l)}function xt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var _t="http://www.w3.org/1999/xhtml",wt={svg:"http://www.w3.org/2000/svg",xhtml:_t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},St=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),wt.hasOwnProperty(e)?{space:wt[e],local:t}:t};function Et(t){return function(){this.removeAttribute(t)}}function Mt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tt(t,e){return function(){this.setAttribute(t,e)}}function Ct(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Pt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var At=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Ot(t){return function(){this.style.removeProperty(t)}}function Lt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function It(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Nt(t,e){return t.style.getPropertyValue(e)||At(t).getComputedStyle(t,null).getPropertyValue(e)}function Rt(t){return function(){delete this[t]}}function Dt(t,e){return function(){this[t]=e}}function zt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Bt(t){return t.trim().split(/^|\s+/)}function Ft(t){return t.classList||new jt(t)}function jt(t){this._node=t,this._names=Bt(t.getAttribute("class")||"")}function Vt(t,e){for(var n=Ft(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Ut(t,e){for(var n=Ft(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Ht(t){return function(){Vt(this,t)}}function Gt(t){return function(){Ut(this,t)}}function Wt(t,e){return function(){(e.apply(this,arguments)?Vt:Ut)(this,t)}}jt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qt(){this.textContent=""}function $t(t){return function(){this.textContent=t}}function Qt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Yt(){this.innerHTML=""}function Xt(t){return function(){this.innerHTML=t}}function Zt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Jt(){this.nextSibling&&this.parentNode.appendChild(this)}function Kt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function te(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_t&&e.documentElement.namespaceURI===_t?e.createElement(t):e.createElementNS(n,t)}}function ee(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var ne=function(t){var e=St(t);return(e.local?ee:te)(e)};function ie(){return null}function re(){var t=this.parentNode;t&&t.removeChild(this)}function ae(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function oe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var se={},le=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(se={mouseenter:"mouseover",mouseleave:"mouseout"}));function ue(t,e,n){return t=ce(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function ce(t,e,n){return function(i){var r=le;le=i;try{t.call(this,this.__data__,e,n)}finally{le=r}}}function he(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function fe(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,a=e.length;i<a;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function de(t,e,n){var i=se.hasOwnProperty(t.type)?ue:ce;return function(r,a,o){var s,l=this.__on,u=i(e,a,o);if(l)for(var c=0,h=l.length;c<h;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function pe(t,e,n,i){var r=le;t.sourceEvent=le,le=t;try{return e.apply(n,i)}finally{le=r}}function me(t,e,n){var i=At(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ve(t,e){return function(){return me(this,t,e)}}function ge(t,e){return function(){return me(this,t,e.apply(this,arguments))}}var ye=[null];function be(t,e){this._groups=t,this._parents=e}function xe(){return new be([[document.documentElement]],ye)}be.prototype=xe.prototype={constructor:be,select:function(t){"function"!=typeof t&&(t=ft(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],l=s.length,u=i[r]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new be(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=pt(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(i.push(t.call(o,o.__data__,u,s)),r.push(o));return new be(i,r)},filter:function(t){"function"!=typeof t&&(t=mt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new be(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each((function(t){p[++c]=t})),p;var n,i=e?bt:yt,r=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var h=r[c],f=a[c],d=f.length,p=t.call(h,h&&h.__data__,c,r),m=p.length,v=l[c]=new Array(m),g=s[c]=new Array(m);i(h,f,v,g,u[c]=new Array(d),p,e);for(var y,b,x=0,_=0;x<m;++x)if(y=v[x]){for(x>=_&&(_=x+1);!(b=g[_])&&++_<m;);y._next=b||null}}return(s=new be(s,r))._enter=l,s._exit=u,s},enter:function(){return new be(this._enter||this._groups.map(vt),this._parents)},exit:function(){return new be(this._exit||this._groups.map(vt),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=e[s],c=n[s],h=u.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;s<i;++s)o[s]=e[s];return new be(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=xt);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o,s=n[a],l=s.length,u=r[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new be(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=St(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Mt:Et:"function"==typeof e?n.local?Pt:kt:n.local?Ct:Tt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ot:"function"==typeof e?It:Lt)(t,e,null==n?"":n)):Nt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Rt:"function"==typeof e?zt:Dt)(t,e)):this.node()[t]},classed:function(t,e){var n=Bt(t+"");if(arguments.length<2){for(var i=Ft(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Wt:e?Ht:Gt)(n,e))},text:function(t){return arguments.length?this.each(null==t?qt:("function"==typeof t?Qt:$t)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Yt:("function"==typeof t?Zt:Xt)(t)):this.node().innerHTML},raise:function(){return this.each(Jt)},lower:function(){return this.each(Kt)},append:function(t){var e="function"==typeof t?t:ne(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ne(t),i=null==e?ie:"function"==typeof e?e:ft(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(re)},clone:function(t){return this.select(t?oe:ae)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=he(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?de:fe,null==n&&(n=!1),i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<o;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?ge:ve)(t,e))}};var _e=xe,we=function(t){return"string"==typeof t?new be([[document.querySelector(t)]],[document.documentElement]):new be([[t]],ye)};function Se(){le.stopImmediatePropagation()}var Ee=function(){le.preventDefault(),le.stopImmediatePropagation()},Me=function(t){var e=t.document.documentElement,n=we(t).on("dragstart.drag",Ee,!0);"onselectstart"in e?n.on("selectstart.drag",Ee,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Te(t,e){var n=t.document.documentElement,i=we(t).on("dragstart.drag",null);e&&(i.on("click.drag",Ee,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ce=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ke(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Pe(){}var Ae="\\s*([+-]?\\d+)\\s*",Oe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Le="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ie=/^#([0-9a-f]{3,8})$/,Ne=new RegExp("^rgb\\("+[Ae,Ae,Ae]+"\\)$"),Re=new RegExp("^rgb\\("+[Le,Le,Le]+"\\)$"),De=new RegExp("^rgba\\("+[Ae,Ae,Ae,Oe]+"\\)$"),ze=new RegExp("^rgba\\("+[Le,Le,Le,Oe]+"\\)$"),Be=new RegExp("^hsl\\("+[Oe,Le,Le]+"\\)$"),Fe=new RegExp("^hsla\\("+[Oe,Le,Le,Oe]+"\\)$"),je={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ve(){return this.rgb().formatHex()}function Ue(){return this.rgb().formatRgb()}function He(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ge(e):3===n?new Qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new Qe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new Qe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ne.exec(t))?new Qe(e[1],e[2],e[3],1):(e=Re.exec(t))?new Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=De.exec(t))?We(e[1],e[2],e[3],e[4]):(e=ze.exec(t))?We(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Be.exec(t))?Je(e[1],e[2]/100,e[3]/100,1):(e=Fe.exec(t))?Je(e[1],e[2]/100,e[3]/100,e[4]):je.hasOwnProperty(t)?Ge(je[t]):"transparent"===t?new Qe(NaN,NaN,NaN,0):null}function Ge(t){return new Qe(t>>16&255,t>>8&255,255&t,1)}function We(t,e,n,i){return i<=0&&(t=e=n=NaN),new Qe(t,e,n,i)}function qe(t){return t instanceof Pe||(t=He(t)),t?new Qe((t=t.rgb()).r,t.g,t.b,t.opacity):new Qe}function $e(t,e,n,i){return 1===arguments.length?qe(t):new Qe(t,e,n,null==i?1:i)}function Qe(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Ye(){return"#"+Ze(this.r)+Ze(this.g)+Ze(this.b)}function Xe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ze(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Je(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new en(t,e,n,i)}function Ke(t){if(t instanceof en)return new en(t.h,t.s,t.l,t.opacity);if(t instanceof Pe||(t=He(t)),!t)return new en;if(t instanceof en)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new en(o,s,l,t.opacity)}function tn(t,e,n,i){return 1===arguments.length?Ke(t):new en(t,e,n,null==i?1:i)}function en(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function nn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function rn(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}Ce(Pe,He,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ve,formatHex:Ve,formatHsl:function(){return Ke(this).formatHsl()},formatRgb:Ue,toString:Ue}),Ce(Qe,$e,ke(Pe,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ye,formatHex:Ye,formatRgb:Xe,toString:Xe})),Ce(en,tn,ke(Pe,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new en(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new en(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Qe(nn(t>=240?t-240:t+120,r,i),nn(t,r,i),nn(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var an=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],a=t[i+1],o=i>0?t[i-1]:2*r-a,s=i<e-1?t[i+2]:2*a-r;return rn((n-i/e)*e,o,r,a,s)}},on=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],a=t[i%e],o=t[(i+1)%e],s=t[(i+2)%e];return rn((n-i/e)*e,r,a,o,s)}},sn=function(t){return function(){return t}};function ln(t,e){return function(n){return t+n*e}}function un(t,e){var n=e-t;return n?ln(t,n>180||n<-180?n-360*Math.round(n/360):n):sn(isNaN(t)?e:t)}function cn(t){return 1==(t=+t)?hn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):sn(isNaN(e)?n:e)}}function hn(t,e){var n=e-t;return n?ln(t,n):sn(isNaN(t)?e:t)}var fn=function t(e){var n=cn(e);function i(t,e){var i=n((t=$e(t)).r,(e=$e(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),o=hn(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function dn(t){return function(e){var n,i,r=e.length,a=new Array(r),o=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=$e(e[n]),a[n]=i.r||0,o[n]=i.g||0,s[n]=i.b||0;return a=t(a),o=t(o),s=t(s),i.opacity=1,function(t){return i.r=a(t),i.g=o(t),i.b=s(t),i+""}}}var pn=dn(an),mn=dn(on),vn=function(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(n=0;n<i;++n)r[n]=t[n]*(1-a)+e[n]*a;return r}};function gn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var yn=function(t,e){return(gn(e)?vn:bn)(t,e)};function bn(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=kn(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}var xn=function(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}},_n=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},wn=function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=kn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},Sn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,En=new RegExp(Sn.source,"g");var Mn,Tn,Cn=function(t,e){var n,i,r,a=Sn.lastIndex=En.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=Sn.exec(t))&&(i=En.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:_n(n,i)})),a=En.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})},kn=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?sn(e):("number"===i?_n:"string"===i?(n=He(e))?(e=n,fn):Cn:e instanceof He?fn:e instanceof Date?xn:gn(e)?vn:Array.isArray(e)?bn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?wn:_n)(t,e)},Pn=function(){for(var t,e=le;t=e.sourceEvent;)e=t;return e},An=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]},On=function(t,e,n){arguments.length<3&&(n=e,e=Pn().changedTouches);for(var i,r=0,a=e?e.length:0;r<a;++r)if((i=e[r]).identifier===n)return An(t,i);return null},Ln=function(t){var e=Pn();return e.changedTouches&&(e=e.changedTouches[0]),An(t,e)},In=0,Nn=0,Rn=0,Dn=0,zn=0,Bn=0,Fn="object"==typeof performance&&performance.now?performance:Date,jn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vn(){return zn||(jn(Un),zn=Fn.now()+Bn)}function Un(){zn=0}function Hn(){this._call=this._time=this._next=null}function Gn(t,e,n){var i=new Hn;return i.restart(t,e,n),i}function Wn(){Vn(),++In;for(var t,e=Mn;e;)(t=zn-e._time)>=0&&e._call.call(null,t),e=e._next;--In}function qn(){zn=(Dn=Fn.now())+Bn,In=Nn=0;try{Wn()}finally{In=0,function(){var t,e,n=Mn,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Mn=e);Tn=t,Qn(i)}(),zn=0}}function $n(){var t=Fn.now(),e=t-Dn;e>1e3&&(Bn-=e,Dn=t)}function Qn(t){In||(Nn&&(Nn=clearTimeout(Nn)),t-zn>24?(t<1/0&&(Nn=setTimeout(qn,t-Fn.now()-Bn)),Rn&&(Rn=clearInterval(Rn))):(Rn||(Dn=Fn.now(),Rn=setInterval($n,1e3)),In=1,jn(qn)))}Hn.prototype=Gn.prototype={constructor:Hn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Vn():+n)+(null==e?0:+e),this._next||Tn===this||(Tn?Tn._next=this:Mn=this,Tn=this),this._call=t,this._time=n,Qn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qn())}};var Yn=function(t,e,n){var i=new Hn;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i},Xn=ct("start","end","cancel","interrupt"),Zn=[],Jn=function(t,e,n,i,r,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function a(l){var u,c,h,f;if(1!==n.state)return s();for(u in r)if((f=r[u]).name===n.name){if(3===f.state)return Yn(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(Yn((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=f);i.length=c+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Gn((function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:Xn,tween:Zn,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function Kn(t,e){var n=ei(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function ti(t,e){var n=ei(t,e);if(n.state>3)throw new Error("too late; already running");return n}function ei(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var ni,ii,ri,ai,oi=function(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}},si=180/Math.PI,li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ui=function(t,e,n,i,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*si,skewX:Math.atan(l)*si,scaleX:o,scaleY:s}};function ci(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,i,r,a,o,s){if(t!==r||i!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:_n(t,r)},{i:l-2,x:_n(i,a)})}else(r||a)&&o.push("translate("+r+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:_n(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:_n(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(a.skewX,o.skewX,s,l),function(t,e,n,i,a,o){if(t!==n||e!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:_n(t,n)},{i:s-2,x:_n(e,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var hi=ci((function(t){return"none"===t?li:(ni||(ni=document.createElement("DIV"),ii=document.documentElement,ri=document.defaultView),ni.style.transform=t,t=ri.getComputedStyle(ii.appendChild(ni),null).getPropertyValue("transform"),ii.removeChild(ni),t=t.slice(7,-1).split(","),ui(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),fi=ci((function(t){return null==t?li:(ai||(ai=document.createElementNS("http://www.w3.org/2000/svg","g")),ai.setAttribute("transform",t),(t=ai.transform.baseVal.consolidate())?(t=t.matrix,ui(t.a,t.b,t.c,t.d,t.e,t.f)):li)}),", ",")",")");function di(t,e){var n,i;return function(){var r=ti(this,t),a=r.tween;if(a!==n)for(var o=0,s=(i=n=a).length;o<s;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function pi(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=ti(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=s;break}l===u&&r.push(s)}a.tween=r}}function mi(t,e,n){var i=t._id;return t.each((function(){var t=ti(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return ei(t,i).value[e]}}var vi=function(t,e){var n;return("number"==typeof e?_n:e instanceof He?fn:(n=He(e))?(e=n,fn):Cn)(t,e)};function gi(t){return function(){this.removeAttribute(t)}}function yi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bi(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===i?r:r=e(i=o,n)}}function xi(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===i?r:r=e(i=o,n)}}function _i(t,e,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,l));this.removeAttribute(t)}}function wi(t,e,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,l));this.removeAttributeNS(t.space,t.local)}}function Si(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ei(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Mi(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Ei(t,r)),n}return r._value=e,r}function Ti(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Si(t,r)),n}return r._value=e,r}function Ci(t,e){return function(){Kn(this,t).delay=+e.apply(this,arguments)}}function ki(t,e){return e=+e,function(){Kn(this,t).delay=e}}function Pi(t,e){return function(){ti(this,t).duration=+e.apply(this,arguments)}}function Ai(t,e){return e=+e,function(){ti(this,t).duration=e}}function Oi(t,e){if("function"!=typeof e)throw new Error;return function(){ti(this,t).ease=e}}function Li(t,e,n){var i,r,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Kn:ti;return function(){var o=a(this,t),s=o.on;s!==i&&(r=(i=s).copy()).on(e,n),o.on=r}}var Ii=_e.prototype.constructor;function Ni(t){return function(){this.style.removeProperty(t)}}function Ri(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Di(t,e,n){var i,r;function a(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Ri(t,a,n)),i}return a._value=e,a}function zi(t){return function(e){this.textContent=t.call(this,e)}}function Bi(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&zi(i)),e}return i._value=t,i}var Fi=0;function ji(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Vi(t){return _e().transition(t)}function Ui(){return++Fi}var Hi=_e.prototype;function Gi(t){return t*t*t}function Wi(t){return--t*t*t+1}function qi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}ji.prototype=Vi.prototype={constructor:ji,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ft(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,l,u=i[o],c=u.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=t.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,Jn(h[f],e,n,f,h,ei(s,n)));return new ji(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=pt(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var f,d=t.call(l,l.__data__,h,u),p=ei(l,n),m=0,v=d.length;m<v;++m)(f=d[m])&&Jn(f,e,n,m,d,p);a.push(d),o.push(l)}return new ji(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=mt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new ji(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=e[s],c=n[s],h=u.length,f=o[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;s<i;++s)o[s]=e[s];return new ji(o,this._parents,this._name,this._id)},selection:function(){return new Ii(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ui(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=ei(o,e);Jn(o,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ji(i,this._parents,t,n)},call:Hi.call,nodes:Hi.nodes,node:Hi.node,size:Hi.size,empty:Hi.empty,each:Hi.each,on:function(t,e){var n=this._id;return arguments.length<2?ei(this.node(),n).on.on(t):this.each(Li(n,t,e))},attr:function(t,e){var n=St(t),i="transform"===n?fi:vi;return this.attrTween(t,"function"==typeof e?(n.local?wi:_i)(n,i,mi(this,"attr."+t,e)):null==e?(n.local?yi:gi)(n):(n.local?xi:bi)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=St(t);return this.tween(n,(i.local?Mi:Ti)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?hi:vi;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var a=Nt(this,t),o=(this.style.removeProperty(t),Nt(this,t));return a===o?null:a===n&&o===i?r:r=e(n=a,i=o)}}(t,i)).on("end.style."+t,Ni(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,a;return function(){var o=Nt(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=Nt(this,t)),o===l?null:o===i&&l===r?a:(r=l,a=e(i=o,s))}}(t,i,mi(this,"style."+t,e))).each(function(t,e){var n,i,r,a,o="style."+e,s="end."+o;return function(){var l=ti(this,t),u=l.on,c=null==l.value[o]?a||(a=Ni(e)):void 0;u===n&&r===c||(i=(n=u).copy()).on(s,r=c),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,a=n+"";return function(){var o=Nt(this,t);return o===a?null:o===i?r:r=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Di(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(mi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Bi(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=ei(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?di:pi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ci:ki)(e,t)):ei(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Pi:Ai)(e,t)):ei(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Oi(e,t)):ei(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--r&&a()}};n.each((function(){var n=ti(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}))}))}};var $i={time:null,delay:0,duration:250,ease:qi};function Qi(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return $i.time=Vn(),$i;return n}_e.prototype.interrupt=function(t){return this.each((function(){oi(this,t)}))},_e.prototype.transition=function(t){var e,n;t instanceof ji?(e=t._id,t=t._name):(e=Ui(),(n=$i).time=Vn(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)(o=s[u])&&Jn(o,t,e,u,s,n||Qi(o,e));return new ji(i,this._parents,t,e)};var Yi=[null],Xi=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>1&&n.name===e)return new ji([[t]],Yi,e,+i);return null},Zi=function(t){return function(){return t}},Ji=function(t,e,n){this.target=t,this.type=e,this.selection=n};function Ki(){le.stopImmediatePropagation()}var tr=function(){le.preventDefault(),le.stopImmediatePropagation()},er={name:"drag"},nr={name:"space"},ir={name:"handle"},rr={name:"center"};function ar(t){return[+t[0],+t[1]]}function or(t){return[ar(t[0]),ar(t[1])]}function sr(t){return function(e){return On(e,le.touches,t)}}var lr={name:"x",handles:["w","e"].map(vr),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ur={name:"y",handles:["n","s"].map(vr),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},cr={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(vr),input:function(t){return null==t?null:or(t)},output:function(t){return t}},hr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},dr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},pr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},mr={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function vr(t){return{type:t}}function gr(){return!le.ctrlKey&&!le.button}function yr(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function br(){return navigator.maxTouchPoints||"ontouchstart"in this}function xr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function _r(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function wr(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Sr(){return Tr(lr)}function Er(){return Tr(ur)}var Mr=function(){return Tr(cr)};function Tr(t){var e,n=yr,i=gr,r=br,a=!0,o=ct("start","brush","end"),s=6;function l(e){var n=e.property("__brush",m).selectAll(".overlay").data([vr("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",hr.overlay).merge(n).each((function(){var t=xr(this).extent;we(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([vr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",hr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return hr[t.type]})),e.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var t=we(this),e=xr(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if((!e||le.touches)&&i.apply(this,arguments)){var n,r,o,s,l,h,f,d,p,m,v,g=this,y=le.target.__data__.type,b="selection"===(a&&le.metaKey?y="overlay":y)?er:a&&le.altKey?rr:ir,x=t===ur?null:pr[y],_=t===lr?null:mr[y],w=xr(g),S=w.extent,E=w.selection,M=S[0][0],T=S[0][1],C=S[1][0],k=S[1][1],P=0,A=0,O=x&&_&&a&&le.shiftKey,L=le.touches?sr(le.changedTouches[0].identifier):Ln,I=L(g),N=I,R=c(g,arguments,!0).beforestart();"overlay"===y?(E&&(p=!0),w.selection=E=[[n=t===ur?M:I[0],o=t===lr?T:I[1]],[l=t===ur?C:n,f=t===lr?k:o]]):(n=E[0][0],o=E[0][1],l=E[1][0],f=E[1][1]),r=n,s=o,h=l,d=f;var D=we(g).attr("pointer-events","none"),z=D.selectAll(".overlay").attr("cursor",hr[y]);if(le.touches)R.moved=F,R.ended=V;else{var B=we(le.view).on("mousemove.brush",F,!0).on("mouseup.brush",V,!0);a&&B.on("keydown.brush",U,!0).on("keyup.brush",H,!0),Me(le.view)}Ki(),oi(g),u.call(g),R.start()}function F(){var t=L(g);!O||m||v||(Math.abs(t[0]-N[0])>Math.abs(t[1]-N[1])?v=!0:m=!0),N=t,p=!0,tr(),j()}function j(){var t;switch(P=N[0]-I[0],A=N[1]-I[1],b){case nr:case er:x&&(P=Math.max(M-n,Math.min(C-l,P)),r=n+P,h=l+P),_&&(A=Math.max(T-o,Math.min(k-f,A)),s=o+A,d=f+A);break;case ir:x<0?(P=Math.max(M-n,Math.min(C-n,P)),r=n+P,h=l):x>0&&(P=Math.max(M-l,Math.min(C-l,P)),r=n,h=l+P),_<0?(A=Math.max(T-o,Math.min(k-o,A)),s=o+A,d=f):_>0&&(A=Math.max(T-f,Math.min(k-f,A)),s=o,d=f+A);break;case rr:x&&(r=Math.max(M,Math.min(C,n-P*x)),h=Math.max(M,Math.min(C,l+P*x))),_&&(s=Math.max(T,Math.min(k,o-A*_)),d=Math.max(T,Math.min(k,f+A*_)))}h<r&&(x*=-1,t=n,n=l,l=t,t=r,r=h,h=t,y in fr&&z.attr("cursor",hr[y=fr[y]])),d<s&&(_*=-1,t=o,o=f,f=t,t=s,s=d,d=t,y in dr&&z.attr("cursor",hr[y=dr[y]])),w.selection&&(E=w.selection),m&&(r=E[0][0],h=E[1][0]),v&&(s=E[0][1],d=E[1][1]),E[0][0]===r&&E[0][1]===s&&E[1][0]===h&&E[1][1]===d||(w.selection=[[r,s],[h,d]],u.call(g),R.brush())}function V(){if(Ki(),le.touches){if(le.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Te(le.view,p),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),z.attr("cursor",hr.overlay),w.selection&&(E=w.selection),_r(E)&&(w.selection=null,u.call(g)),R.end()}function U(){switch(le.keyCode){case 16:O=x&&_;break;case 18:b===ir&&(x&&(l=h-P*x,n=r+P*x),_&&(f=d-A*_,o=s+A*_),b=rr,j());break;case 32:b!==ir&&b!==rr||(x<0?l=h-P:x>0&&(n=r-P),_<0?f=d-A:_>0&&(o=s-A),b=nr,z.attr("cursor",hr.selection),j());break;default:return}tr()}function H(){switch(le.keyCode){case 16:O&&(m=v=O=!1,j());break;case 18:b===rr&&(x<0?l=h:x>0&&(n=r),_<0?f=d:_>0&&(o=s),b=ir,j());break;case 32:b===nr&&(le.altKey?(x&&(l=h-P*x,n=r+P*x),_&&(f=d-A*_,o=s+A*_),b=rr):(x<0?l=h:x>0&&(n=r),_<0?f=d:_>0&&(o=s),b=ir),z.attr("cursor",hr[y]),j());break;default:return}tr()}}function d(){c(this,arguments).moved()}function p(){c(this,arguments).ended()}function m(){var e=this.__brush||{selection:null};return e.extent=or(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n){e.selection?e.on("start.brush",(function(){c(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){c(this,arguments).end()})).tween("brush",(function(){var e=this,i=e.__brush,r=c(e,arguments),a=i.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=kn(a,o);function l(t){i.selection=1===t&&null===o?null:s(t),u.call(e),r.brush()}return null!==a&&null!==o?l:l(1)})):e.each((function(){var e=this,i=arguments,r=e.__brush,a=t.input("function"==typeof n?n.apply(e,i):n,r.extent),o=c(e,i).beforestart();oi(e),r.selection=null===a?null:a,u.call(e),o.start().brush().end()}))},l.clear=function(t){l.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){pe(new Ji(l,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:Zi(or(t)),l):n},l.filter=function(t){return arguments.length?(i="function"==typeof t?t:Zi(!!t),l):i},l.touchable=function(t){return arguments.length?(r="function"==typeof t?t:Zi(!!t),l):r},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(a=!!t,l):a},l.on=function(){var t=o.on.apply(o,arguments);return t===o?l:t},l}var Cr=Math.cos,kr=Math.sin,Pr=Math.PI,Ar=Pr/2,Or=2*Pr,Lr=Math.max;function Ir(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Nr=function(){var t=0,e=null,n=null,i=null;function r(r){var a,o,s,l,u,c,h=r.length,f=[],d=w(h),p=[],m=[],v=m.groups=new Array(h),g=new Array(h*h);for(a=0,u=-1;++u<h;){for(o=0,c=-1;++c<h;)o+=r[u][c];f.push(o),p.push(w(h)),a+=o}for(e&&d.sort((function(t,n){return e(f[t],f[n])})),n&&p.forEach((function(t,e){t.sort((function(t,i){return n(r[e][t],r[e][i])}))})),l=(a=Lr(0,Or-t*h)/a)?t:Or/h,o=0,u=-1;++u<h;){for(s=o,c=-1;++c<h;){var y=d[u],b=p[y][c],x=r[y][b],_=o,S=o+=x*a;g[b*h+y]={index:y,subindex:b,startAngle:_,endAngle:S,value:x}}v[y]={index:y,startAngle:s,endAngle:o,value:f[y]},o+=l}for(u=-1;++u<h;)for(c=u-1;++c<h;){var E=g[c*h+u],M=g[u*h+c];(E.value||M.value)&&m.push(E.value<M.value?{source:M,target:E}:{source:E,target:M})}return i?m.sort(i):m}return r.padAngle=function(e){return arguments.length?(t=Lr(0,e),r):t},r.sortGroups=function(t){return arguments.length?(e=t,r):e},r.sortSubgroups=function(t){return arguments.length?(n=t,r):n},r.sortChords=function(t){return arguments.length?(null==t?i=null:(i=Ir(t))._=t,r):i&&i._},r},Rr=Array.prototype.slice,Dr=function(t){return function(){return t}},zr=Math.PI,Br=2*zr,Fr=Br-1e-6;function jr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Vr(){return new jr}jr.prototype=Vr.prototype={constructor:jr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,l=i-e,u=a-t,c=o-e,h=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(c*s-l*u)>1e-6&&r){var f=n-a,d=i-o,p=s*s+l*l,m=f*f+d*d,v=Math.sqrt(p),g=Math.sqrt(h),y=r*Math.tan((zr-Math.acos((p+h-m)/(2*v*g)))/2),b=y/g,x=y/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*u)+","+(e+b*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+o,u=e+s,c=1^a,h=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%Br+Br),h>Fr?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=zr)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Ur=Vr;function Hr(t){return t.source}function Gr(t){return t.target}function Wr(t){return t.radius}function qr(t){return t.startAngle}function $r(t){return t.endAngle}var Qr=function(){var t=Hr,e=Gr,n=Wr,i=qr,r=$r,a=null;function o(){var o,s=Rr.call(arguments),l=t.apply(this,s),u=e.apply(this,s),c=+n.apply(this,(s[0]=l,s)),h=i.apply(this,s)-Ar,f=r.apply(this,s)-Ar,d=c*Cr(h),p=c*kr(h),m=+n.apply(this,(s[0]=u,s)),v=i.apply(this,s)-Ar,g=r.apply(this,s)-Ar;if(a||(a=o=Ur()),a.moveTo(d,p),a.arc(0,0,c,h,f),h===v&&f===g||(a.quadraticCurveTo(0,0,m*Cr(v),m*kr(v)),a.arc(0,0,m,v,g)),a.quadraticCurveTo(0,0,d,p),a.closePath(),o)return a=null,o+""||null}return o.radius=function(t){return arguments.length?(n="function"==typeof t?t:Dr(+t),o):n},o.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Dr(+t),o):i},o.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Dr(+t),o):r},o.source=function(e){return arguments.length?(t=e,o):t},o.target=function(t){return arguments.length?(e=t,o):e},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o};function Yr(){}function Xr(t,e){var n=new Yr;if(t instanceof Yr)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,a=t.length;if(null==e)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e(i=t[r],r,t),i)}else if(t)for(var o in t)n.set(o,t[o]);return n}Yr.prototype=Xr.prototype={constructor:Yr,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Zr=Xr,Jr=function(){var t,e,n,i=[],r=[];function a(n,r,o,s){if(r>=i.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,u,c,h=-1,f=n.length,d=i[r++],p=Zr(),m=o();++h<f;)(c=p.get(l=d(u=n[h])+""))?c.push(u):p.set(l,[u]);return p.each((function(t,e){s(m,e,a(t,r,o,s))})),m}return n={object:function(t){return a(t,0,Kr,ta)},map:function(t){return a(t,0,ea,na)},entries:function(t){return function t(n,a){if(++a>i.length)return n;var o,s=r[a-1];return null!=e&&a>=i.length?o=n.entries():(o=[],n.each((function(e,n){o.push({key:n,values:t(e,a)})}))),null!=s?o.sort((function(t,e){return s(t.key,e.key)})):o}(a(t,0,ea,na),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return r[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function Kr(){return{}}function ta(t,e,n){t[e]=n}function ea(){return Zr()}function na(t,e,n){t.set(e,n)}function ia(){}var ra=Zr.prototype;function aa(t,e){var n=new ia;if(t instanceof ia)t.each((function(t){n.add(t)}));else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}ia.prototype=aa.prototype={constructor:ia,has:ra.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ra.remove,clear:ra.clear,values:ra.keys,size:ra.size,empty:ra.empty,each:ra.each};var oa=aa,sa=function(t){var e=[];for(var n in t)e.push(n);return e},la=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ua=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ca=Math.PI/180,ha=180/Math.PI;function fa(t){if(t instanceof ma)return new ma(t.l,t.a,t.b,t.opacity);if(t instanceof Sa)return Ea(t);t instanceof Qe||(t=qe(t));var e,n,i=ba(t.r),r=ba(t.g),a=ba(t.b),o=va((.2225045*i+.7168786*r+.0606169*a)/1);return i===r&&r===a?e=n=o:(e=va((.4360747*i+.3850649*r+.1430804*a)/.96422),n=va((.0139322*i+.0971045*r+.7141733*a)/.82521)),new ma(116*o-16,500*(e-o),200*(o-n),t.opacity)}function da(t,e){return new ma(t,0,0,null==e?1:e)}function pa(t,e,n,i){return 1===arguments.length?fa(t):new ma(t,e,n,null==i?1:i)}function ma(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function va(t){return t>6/29*(6/29)*(6/29)?Math.pow(t,1/3):t/(6/29*3*(6/29))+4/29}function ga(t){return t>6/29?t*t*t:6/29*3*(6/29)*(t-4/29)}function ya(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ba(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xa(t){if(t instanceof Sa)return new Sa(t.h,t.c,t.l,t.opacity);if(t instanceof ma||(t=fa(t)),0===t.a&&0===t.b)return new Sa(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ha;return new Sa(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function _a(t,e,n,i){return 1===arguments.length?xa(t):new Sa(n,e,t,null==i?1:i)}function wa(t,e,n,i){return 1===arguments.length?xa(t):new Sa(t,e,n,null==i?1:i)}function Sa(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Ea(t){if(isNaN(t.h))return new ma(t.l,0,0,t.opacity);var e=t.h*ca;return new ma(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ce(ma,pa,ke(Pe,{brighter:function(t){return new ma(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ma(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Qe(ya(3.1338561*(e=.96422*ga(e))-1.6168667*(t=1*ga(t))-.4906146*(n=.82521*ga(n))),ya(-.9787684*e+1.9161415*t+.033454*n),ya(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ce(Sa,wa,ke(Pe,{brighter:function(t){return new Sa(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Sa(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ea(this).rgb()}}));var Ma=-.29227,Ta=-1.7884503806,Ca=3.5172982438,ka=-.6557636667999999;function Pa(t){if(t instanceof Oa)return new Oa(t.h,t.s,t.l,t.opacity);t instanceof Qe||(t=qe(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(ka*i+Ta*e-Ca*n)/(ka+Ta-Ca),a=i-r,o=(1.97294*(n-r)-Ma*a)/-.90649,s=Math.sqrt(o*o+a*a)/(1.97294*r*(1-r)),l=s?Math.atan2(o,a)*ha-120:NaN;return new Oa(l<0?l+360:l,s,r,t.opacity)}function Aa(t,e,n,i){return 1===arguments.length?Pa(t):new Oa(t,e,n,null==i?1:i)}function Oa(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ce(Oa,Aa,ke(Pe,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Oa(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Oa(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ca,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Qe(255*(e+n*(-.14861*i+1.78277*r)),255*(e+n*(Ma*i+-.90649*r)),255*(e+n*(1.97294*i)),this.opacity)}}));var La=Array.prototype.slice,Ia=function(t,e){return t-e},Na=function(t){return function(){return t}},Ra=function(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=Da(t,e[i]))return n;return 0};function Da(t,e){for(var n=e[0],i=e[1],r=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],u=l[0],c=l[1],h=t[s],f=h[0],d=h[1];if(za(l,h,e))return 0;c>i!=d>i&&n<(f-u)*(i-c)/(d-c)+u&&(r=-r)}return r}function za(t,e,n){var i,r,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(r=t[i=+(t[0]===e[0])],a=n[i],o=e[i],r<=a&&a<=o||o<=a&&a<=r)}var Ba=function(){},Fa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],ja=function(){var t=1,e=1,n=P,i=s;function r(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Ia);else{var i=v(t),r=i[0],o=i[1];e=k(r,o,e),e=w(Math.floor(r/e)*e,Math.floor(o/e)*e,e)}return e.map((function(e){return a(t,e)}))}function a(n,r){var a=[],s=[];return function(n,i,r){var a,s,l,u,c,h,f=new Array,d=new Array;a=s=-1,u=n[0]>=i,Fa[u<<1].forEach(p);for(;++a<t-1;)l=u,u=n[a+1]>=i,Fa[l|u<<1].forEach(p);Fa[u<<0].forEach(p);for(;++s<e-1;){for(a=-1,u=n[s*t+t]>=i,c=n[s*t]>=i,Fa[u<<1|c<<2].forEach(p);++a<t-1;)l=u,u=n[s*t+t+a+1]>=i,h=c,c=n[s*t+a+1]>=i,Fa[l|u<<1|c<<2|h<<3].forEach(p);Fa[u|c<<3].forEach(p)}a=-1,c=n[s*t]>=i,Fa[c<<2].forEach(p);for(;++a<t-1;)h=c,c=n[s*t+a+1]>=i,Fa[c<<2|h<<3].forEach(p);function p(t){var e,n,i=[t[0][0]+a,t[0][1]+s],l=[t[1][0]+a,t[1][1]+s],u=o(i),c=o(l);(e=d[u])?(n=f[c])?(delete d[e.end],delete f[n.start],e===n?(e.ring.push(l),r(e.ring)):f[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(l),d[e.end=c]=e):(e=f[c])?(n=d[u])?(delete f[e.start],delete d[n.end],e===n?(e.ring.push(l),r(e.ring)):f[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(i),f[e.start=u]=e):f[u]=d[c]={start:u,end:c,ring:[i,l]}}Fa[c<<3].forEach(p)}(n,r,(function(t){i(t,n,r),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?a.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,i=a.length;n<i;++n)if(-1!==Ra((e=a[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:r,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,i,r){n.forEach((function(n){var a,o=n[0],s=n[1],l=0|o,u=0|s,c=i[u*t+l];o>0&&o<t&&l===o&&(a=i[u*t+l-1],n[0]=o+(r-a)/(c-a)-.5),s>0&&s<e&&u===s&&(a=i[(u-1)*t+l],n[1]=s+(r-a)/(c-a)-.5)}))}return r.contour=a,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(i>0&&a>0))throw new Error("invalid size");return t=i,e=a,r},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Na(La.call(t)):Na(t),r):n},r.smooth=function(t){return arguments.length?(i=t?s:Ba,r):i===s},r};function Va(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=t.data[s+o*i]),s>=n&&(s>=a&&(l-=t.data[s-a+o*i]),e.data[s-n+o*i]=l/Math.min(s+1,i-1+a-s,a))}function Ua(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=t.data[o+s*i]),s>=n&&(s>=a&&(l-=t.data[o+(s-a)*i]),e.data[o+(s-n)*i]=l/Math.min(s+1,r-1+a-s,a))}function Ha(t){return t[0]}function Ga(t){return t[1]}function Wa(){return 1}var qa=function(){var t=Ha,e=Ga,n=Wa,i=960,r=500,a=20,o=2,s=3*a,l=i+2*s>>o,u=r+2*s>>o,c=Na(20);function h(i){var r=new Float32Array(l*u),h=new Float32Array(l*u);i.forEach((function(i,a,c){var h=+t(i,a,c)+s>>o,f=+e(i,a,c)+s>>o,d=+n(i,a,c);h>=0&&h<l&&f>=0&&f<u&&(r[h+f*l]+=d)})),Va({width:l,height:u,data:r},{width:l,height:u,data:h},a>>o),Ua({width:l,height:u,data:h},{width:l,height:u,data:r},a>>o),Va({width:l,height:u,data:r},{width:l,height:u,data:h},a>>o),Ua({width:l,height:u,data:h},{width:l,height:u,data:r},a>>o),Va({width:l,height:u,data:r},{width:l,height:u,data:h},a>>o),Ua({width:l,height:u,data:h},{width:l,height:u,data:r},a>>o);var d=c(r);if(!Array.isArray(d)){var p=N(r);d=k(0,p,d),(d=w(0,Math.floor(p/d)*d,d)).shift()}return ja().thresholds(d).size([l,u])(r).map(f)}function f(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function v(){return l=i+2*(s=3*a)>>o,u=r+2*s>>o,h}return h.x=function(e){return arguments.length?(t="function"==typeof e?e:Na(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:Na(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:Na(+t),h):n},h.size=function(t){if(!arguments.length)return[i,r];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return i=e,r=n,v()},h.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),v()},h.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?Na(La.call(t)):Na(t),h):c},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),v()},h},$a=function(t){return function(){return t}};function Qa(t,e,n,i,r,a,o,s,l,u){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=u}function Ya(){return!le.ctrlKey&&!le.button}function Xa(){return this.parentNode}function Za(t){return null==t?{x:le.x,y:le.y}:t}function Ja(){return navigator.maxTouchPoints||"ontouchstart"in this}Qa.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ka=function(){var t,e,n,i,r=Ya,a=Xa,o=Za,s=Ja,l={},u=ct("start","drag","end"),c=0,h=0;function f(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",v).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!i&&r.apply(this,arguments)){var o=b("mouse",a.apply(this,arguments),Ln,this,arguments);o&&(we(le.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),Me(le.view),Se(),n=!1,t=le.clientX,e=le.clientY,o("start"))}}function p(){if(Ee(),!n){var i=le.clientX-t,r=le.clientY-e;n=i*i+r*r>h}l.mouse("drag")}function m(){we(le.view).on("mousemove.drag mouseup.drag",null),Te(le.view,n),Ee(),l.mouse("end")}function v(){if(r.apply(this,arguments)){var t,e,n=le.changedTouches,i=a.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=b(n[t].identifier,i,On,this,arguments))&&(Se(),e("start"))}}function g(){var t,e,n=le.changedTouches,i=n.length;for(t=0;t<i;++t)(e=l[n[t].identifier])&&(Ee(),e("drag"))}function y(){var t,e,n=le.changedTouches,r=n.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),t=0;t<r;++t)(e=l[n[t].identifier])&&(Se(),e("end"))}function b(t,e,n,i,r){var a,s,h,d=n(e,t),p=u.copy();if(pe(new Qa(f,"beforestart",a,t,c,d[0],d[1],0,0,p),(function(){return null!=(le.subject=a=o.apply(i,r))&&(s=a.x-d[0]||0,h=a.y-d[1]||0,!0)})))return function o(u){var m,v=d;switch(u){case"start":l[t]=o,m=c++;break;case"end":delete l[t],--c;case"drag":d=n(e,t),m=c}pe(new Qa(f,u,a,t,m,d[0]+s,d[1]+h,d[0]-v[0],d[1]-v[1],p),p.apply,p,[u,i,r])}}return f.filter=function(t){return arguments.length?(r="function"==typeof t?t:$a(!!t),f):r},f.container=function(t){return arguments.length?(a="function"==typeof t?t:$a(t),f):a},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:$a(t),f):o},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:$a(!!t),f):s},f.on=function(){var t=u.on.apply(u,arguments);return t===u?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f},to={},eo={};function no(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function io(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function ro(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function ao(t){var e,n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+ro(-e,6):e>9999?"+"+ro(e,6):ro(e,4))+"-"+ro(t.getUTCMonth()+1,2)+"-"+ro(t.getUTCDate(),2)+(a?"T"+ro(n,2)+":"+ro(i,2)+":"+ro(r,2)+"."+ro(a,3)+"Z":r?"T"+ro(n,2)+":"+ro(i,2)+":"+ro(r,2)+"Z":i||n?"T"+ro(n,2)+":"+ro(i,2)+"Z":"")}var oo=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],a=t.length,o=0,s=0,l=a<=0,u=!1;function c(){if(l)return eo;if(u)return u=!1,to;var e,i,r=o;if(34===t.charCodeAt(r)){for(;o++<a&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=a?l=!0:10===(i=t.charCodeAt(o++))?u=!0:13===i&&(u=!0,10===t.charCodeAt(o)&&++o),t.slice(r+1,e-1).replace(/""/g,'"')}for(;o<a;){if(10===(i=t.charCodeAt(e=o++)))u=!0;else if(13===i)u=!0,10===t.charCodeAt(o)&&++o;else if(i!==n)continue;return t.slice(r,e)}return l=!0,t.slice(r,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(i=c())!==eo;){for(var h=[];i!==to&&i!==eo;)h.push(i),i=c();e&&null==(h=e(h,s++))||r.push(h)}return r}function r(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?ao(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,a=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=no(t);return function(i,r){return e(n(i),r,t)}}(t,e):no(t)}));return a.columns=r||[],a},parseRows:i,format:function(e,n){return null==n&&(n=io(e)),[n.map(o).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=io(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}},so=oo(","),lo=so.parse,uo=so.parseRows,co=so.format,ho=so.formatBody,fo=so.formatRows,po=so.formatRow,mo=so.formatValue,vo=oo("\t"),go=vo.parse,yo=vo.parseRows,bo=vo.format,xo=vo.formatBody,_o=vo.formatRows,wo=vo.formatRow,So=vo.formatValue;function Eo(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Mo&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t}var Mo=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function To(t){return+t}function Co(t){return t*t}function ko(t){return t*(2-t)}function Po(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Ao=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Oo=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Lo=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Io=Math.PI,No=Io/2;function Ro(t){return 1-Math.cos(t*No)}function Do(t){return Math.sin(t*No)}function zo(t){return(1-Math.cos(Io*t))/2}function Bo(t){return Math.pow(2,10*t-10)}function Fo(t){return 1-Math.pow(2,-10*t)}function jo(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Vo(t){return 1-Math.sqrt(1-t*t)}function Uo(t){return Math.sqrt(1- --t*t)}function Ho(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Go(t){return 1-Wo(1-t)}function Wo(t){return(t=+t)<4/11?7.5625*t*t:t<8/11?7.5625*(t-=6/11)*t+.75:t<10/11?7.5625*(t-=9/11)*t+.9375:7.5625*(t-=21/22)*t+63/64}function qo(t){return((t*=2)<=1?1-Wo(1-t):Wo(t-1)+1)/2}var $o=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),Qo=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),Yo=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Xo=2*Math.PI,Zo=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Xo);function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*Xo)},r.period=function(n){return t(e,n)},r}(1,.3),Jo=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Xo);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*Xo)},r.period=function(n){return t(e,n)},r}(1,.3),Ko=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Xo);function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*Xo)},r.period=function(n){return t(e,n)},r}(1,.3);function ts(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var es=function(t,e){return fetch(t,e).then(ts)};function ns(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var is=function(t,e){return fetch(t,e).then(ns)};function rs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var as=function(t,e){return fetch(t,e).then(rs)};function os(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),as(e,n).then((function(e){return t(e,i)}))}}function ss(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=oo(t);return as(e,n).then((function(t){return r.parse(t,i)}))}var ls=os(lo),us=os(go),cs=function(t,e){return new Promise((function(n,i){var r=new Image;for(var a in e)r[a]=e[a];r.onerror=i,r.onload=function(){n(r)},r.src=t}))};function hs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var fs=function(t,e){return fetch(t,e).then(hs)};function ds(t){return function(e,n){return as(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var ps=ds("application/xml"),ms=ds("text/html"),vs=ds("image/svg+xml"),gs=function(t,e){var n;function i(){var i,r,a=n.length,o=0,s=0;for(i=0;i<a;++i)o+=(r=n[i]).x,s+=r.y;for(o=o/a-t,s=s/a-e,i=0;i<a;++i)(r=n[i]).x-=o,r.y-=s}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},ys=function(t){return function(){return t}},bs=function(){return 1e-6*(Math.random()-.5)};function xs(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a,o,s,l,u,c,h,f,d=t._root,p={data:i},m=t._x0,v=t._y0,g=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(a=(m+g)/2))?m=a:g=a,(c=n>=(o=(v+y)/2))?v=o:y=o,r=d,!(d=d[h=c<<1|u]))return r[h]=p,t;if(s=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===s&&n===l)return p.next=d,r?r[h]=p:t._root=p,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(u=e>=(a=(m+g)/2))?m=a:g=a,(c=n>=(o=(v+y)/2))?v=o:y=o}while((h=c<<1|u)==(f=(l>=o)<<1|s>=a));return r[f]=d,r[h]=p,t}var _s=function(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r};function ws(t){return t[0]}function Ss(t){return t[1]}function Es(t,e,n){var i=new Ms(null==e?ws:e,null==n?Ss:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Ms(t,e,n,i,r,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function Ts(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Cs=Es.prototype=Ms.prototype;function ks(t){return t.x+t.vx}function Ps(t){return t.y+t.vy}Cs.copy=function(){var t,e,n=new Ms(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Ts(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=Ts(e));return n},Cs.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return xs(this.cover(e,n),e,n,t)},Cs.addAll=function(t){var e,n,i,r,a=t.length,o=new Array(a),s=new Array(a),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(o[n]=i,s[n]=r,i<l&&(l=i),i>c&&(c=i),r<u&&(u=r),r>h&&(h=r));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<a;++n)xs(this,o[n],s[n],t[n]);return this},Cs.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{for(var o,s,l=r-n,u=this._root;n>t||t>=r||i>e||e>=a;)switch(s=(e<i)<<1|t<n,(o=new Array(4))[s]=u,u=o,l*=2,s){case 0:r=n+l,a=i+l;break;case 1:n=r-l,a=i+l;break;case 2:r=n+l,i=a-l;break;case 3:n=r-l,i=a-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this},Cs.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Cs.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Cs.find=function(t,e,n){var i,r,a,o,s,l,u,c=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new _s(m,c,h,f,d)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>f||(a=l.y0)>d||(o=l.x1)<c||(s=l.y1)<h))if(m.length){var v=(r+o)/2,g=(a+s)/2;p.push(new _s(m[3],v,g,o,s),new _s(m[2],r,g,v,s),new _s(m[1],v,a,o,g),new _s(m[0],r,a,v,g)),(u=(e>=g)<<1|t>=v)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),x=y*y+b*b;if(x<n){var _=Math.sqrt(n=x);c=t-_,h=e-_,f=t+_,d=e+_,i=m.data}}return i},Cs.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,a,o,s,l,u,c,h,f,d=this._root,p=this._x0,m=this._y0,v=this._x1,g=this._y1;if(!d)return this;if(d.length)for(;;){if((u=a>=(s=(p+v)/2))?p=s:v=s,(c=o>=(l=(m+g)/2))?m=l:g=l,e=d,!(d=d[h=c<<1|u]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},Cs.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Cs.root=function(){return this._root},Cs.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Cs.visit=function(t){var e,n,i,r,a,o,s=[],l=this._root;for(l&&s.push(new _s(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,a=e.x1,o=e.y1)&&l.length){var u=(i+a)/2,c=(r+o)/2;(n=l[3])&&s.push(new _s(n,u,c,a,o)),(n=l[2])&&s.push(new _s(n,i,c,u,o)),(n=l[1])&&s.push(new _s(n,u,r,a,c)),(n=l[0])&&s.push(new _s(n,i,r,u,c))}return this},Cs.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new _s(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var a,o=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(o+l)/2,h=(s+u)/2;(a=r[0])&&n.push(new _s(a,o,s,c,h)),(a=r[1])&&n.push(new _s(a,c,s,l,h)),(a=r[2])&&n.push(new _s(a,o,h,c,u)),(a=r[3])&&n.push(new _s(a,c,h,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Cs.x=function(t){return arguments.length?(this._x=t,this):this._x},Cs.y=function(t){return arguments.length?(this._y=t,this):this._y};var As=function(t){var e,n,i=1,r=1;function a(){for(var t,a,s,l,u,c,h,f=e.length,d=0;d<r;++d)for(a=Es(e,ks,Ps).visitAfter(o),t=0;t<f;++t)s=e[t],c=n[s.index],h=c*c,l=s.x+s.vx,u=s.y+s.vy,a.visit(p);function p(t,e,n,r,a){var o=t.data,f=t.r,d=c+f;if(!o)return e>l+d||r<l-d||n>u+d||a<u-d;if(o.index>s.index){var p=l-o.x-o.vx,m=u-o.y-o.vy,v=p*p+m*m;v<d*d&&(0===p&&(v+=(p=bs())*p),0===m&&(v+=(m=bs())*m),v=(d-(v=Math.sqrt(v)))/v*i,s.vx+=(p*=v)*(d=(f*=f)/(h+f)),s.vy+=(m*=v)*d,o.vx-=p*(d=1-d),o.vy-=m*d)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var i,r,a=e.length;for(n=new Array(a),i=0;i<a;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=ys(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(r=+t,a):r},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),s(),a):t},a};function Os(t){return t.index}function Ls(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var Is=function(t){var e,n,i,r,a,o=Os,s=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},l=ys(30),u=1;function c(i){for(var r=0,o=t.length;r<u;++r)for(var s,l,c,h,f,d,p,m=0;m<o;++m)l=(s=t[m]).source,h=(c=s.target).x+c.vx-l.x-l.vx||bs(),f=c.y+c.vy-l.y-l.vy||bs(),h*=d=((d=Math.sqrt(h*h+f*f))-n[m])/d*i*e[m],f*=d,c.vx-=h*(p=a[m]),c.vy-=f*p,l.vx+=h*(p=1-p),l.vy+=f*p}function h(){if(i){var s,l,u=i.length,c=t.length,h=Zr(i,o);for(s=0,r=new Array(u);s<c;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=Ls(h,l.source)),"object"!=typeof l.target&&(l.target=Ls(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)l=t[s],a[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(c),f(),n=new Array(c),d()}}function f(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+s(t[n],n,t)}function d(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){i=t,h()},c.links=function(e){return arguments.length?(t=e,h(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(u=+t,c):u},c.strength=function(t){return arguments.length?(s="function"==typeof t?t:ys(+t),f(),c):s},c.distance=function(t){return arguments.length?(l="function"==typeof t?t:ys(+t),d(),c):l},c};function Ns(t){return t.x}function Rs(t){return t.y}var Ds=Math.PI*(3-Math.sqrt(5)),zs=function(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,o=.6,s=Zr(),l=Gn(c),u=ct("tick","end");function c(){h(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function h(i){var l,u,c=t.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(a-n)*r,s.each((function(t){t(n)})),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(n),a=n*Ds;e.x=r*Math.cos(a),e.y=r*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,i){var r,a,o,s,l,u=0,c=t.length;for(null==i?i=1/0:i*=i,u=0;u<c;++u)(o=(r=e-(s=t[u]).x)*r+(a=n-s.y)*a)<i&&(l=s,i=o);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}},Bs=function(){var t,e,n,i,r=ys(-30),a=1,o=1/0,s=.81;function l(i){var r,a=t.length,o=Es(t,Ns,Rs).visitAfter(c);for(n=i,r=0;r<a;++r)e=t[r],o.visit(h)}function u(){if(t){var e,n,a=t.length;for(i=new Array(a),e=0;e<a;++e)n=t[e],i[n.index]=+r(n,e,t)}}function c(t){var e,n,r,a,o,s=0,l=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,a+=n*e.y);t.x=r/l,t.y=a/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,r,l,u){if(!t.value)return!0;var c=t.x-e.x,h=t.y-e.y,f=u-r,d=c*c+h*h;if(f*f/s<d)return d<o&&(0===c&&(d+=(c=bs())*c),0===h&&(d+=(h=bs())*h),d<a&&(d=Math.sqrt(a*d)),e.vx+=c*t.value*n/d,e.vy+=h*t.value*n/d),!0;if(!(t.length||d>=o)){(t.data!==e||t.next)&&(0===c&&(d+=(c=bs())*c),0===h&&(d+=(h=bs())*h),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(f=i[t.data.index]*n/d,e.vx+=c*f,e.vy+=h*f)}while(t=t.next)}}return l.initialize=function(e){t=e,u()},l.strength=function(t){return arguments.length?(r="function"==typeof t?t:ys(+t),u(),l):r},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l},Fs=function(t,e,n){var i,r,a,o=ys(.1);function s(t){for(var o=0,s=i.length;o<s;++o){var l=i[o],u=l.x-e||1e-6,c=l.y-n||1e-6,h=Math.sqrt(u*u+c*c),f=(a[o]-h)*r[o]*t/h;l.vx+=u*f,l.vy+=c*f}}function l(){if(i){var e,n=i.length;for(r=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(i[e],e,i),r[e]=isNaN(a[e])?0:+o(i[e],e,i)}}return"function"!=typeof t&&(t=ys(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){i=t,l()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:ys(+t),l(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},js=function(t){var e,n,i,r=ys(.1);function a(t){for(var r,a=0,o=e.length;a<o;++a)(r=e[a]).vx+=(i[a]-r.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),i=new Array(o),a=0;a<o;++a)n[a]=isNaN(i[a]=+t(e[a],a,e))?0:+r(e[a],a,e)}}return"function"!=typeof t&&(t=ys(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(r="function"==typeof t?t:ys(+t),o(),a):r},a.x=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),o(),a):t},a},Vs=function(t){var e,n,i,r=ys(.1);function a(t){for(var r,a=0,o=e.length;a<o;++a)(r=e[a]).vy+=(i[a]-r.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),i=new Array(o),a=0;a<o;++a)n[a]=isNaN(i[a]=+t(e[a],a,e))?0:+r(e[a],a,e)}}return"function"!=typeof t&&(t=ys(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(r="function"==typeof t?t:ys(+t),o(),a):r},a.y=function(e){return arguments.length?(t="function"==typeof e?e:ys(+e),o(),a):t},a},Us=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},Hs=function(t){return(t=Us(Math.abs(t)))?t[1]:NaN},Gs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ws(t){if(!(e=Gs.exec(t)))throw new Error("invalid format: "+t);var e;return new qs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function qs(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ws.prototype=qs.prototype,qs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var $s,Qs,Ys,Xs,Zs=function(t,e){var n=Us(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},Js={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Zs(100*t,e)},r:Zs,s:function(t,e){var n=Us(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-($s=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Us(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ks=function(t){return t},tl=Array.prototype.map,el=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],nl=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Ks:(e=tl.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,a=[],o=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Ks:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(tl.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ws(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,v=t.precision,g=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Js[y]||(void 0===v&&(v=12),g=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===f?r:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?a:/[%p]/.test(y)?l:"",_=Js[y],w=/[defgprs%]/.test(y);function S(t){var r,a,l,f=b,S=x;if("c"===y)S=_(t)+S,t="";else{var E=(t=+t)<0;if(t=isNaN(t)?c:_(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),E&&0==+t&&(E=!1),f=(E?"("===h?h:u:"-"===h||"("===h?"":h)+f,S=("s"===y?el[8+$s/3]:"")+S+(E&&"("===h?")":""),w)for(r=-1,a=t.length;++r<a;)if(48>(l=t.charCodeAt(r))||l>57){S=(46===l?o+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}m&&!d&&(t=i(t,1/0));var M=f.length+t.length+S.length,T=M<p?new Array(p-M+1).join(e):"";switch(m&&d&&(t=i(T+t,T.length?p-S.length:1/0),T=""),n){case"<":t=f+t+S+T;break;case"=":t=f+T+t+S;break;case"^":t=T.slice(0,M=T.length>>1)+f+t+S+T.slice(M);break;default:t=T+f+t+S}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ws(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Hs(e)/3))),r=Math.pow(10,-i),a=el[8+i/3];return function(t){return n(r*t)+a}}}};function il(t){return Qs=nl(t),Ys=Qs.format,Xs=Qs.formatPrefix,Qs}il({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var rl=function(t){return Math.max(0,-Hs(Math.abs(t)))},al=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Hs(e)/3)))-Hs(Math.abs(t)))},ol=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hs(e)-Hs(t))+1},sl=function(){return new ll};function ll(){this.reset()}ll.prototype={constructor:ll,reset:function(){this.s=this.t=0},add:function(t){cl(ul,t,this.t),cl(this,ul.s,this.s),this.s?this.t+=ul.t:this.s=ul.t},valueOf:function(){return this.s}};var ul=new ll;function cl(t,e,n){var i=t.s=e+n,r=i-e,a=i-r;t.t=e-a+(n-r)}var hl=Math.PI,fl=hl/2,dl=hl/4,pl=2*hl,ml=180/hl,vl=hl/180,gl=Math.abs,yl=Math.atan,bl=Math.atan2,xl=Math.cos,_l=Math.ceil,wl=Math.exp,Sl=(Math.floor,Math.log),El=Math.pow,Ml=Math.sin,Tl=Math.sign||function(t){return t>0?1:t<0?-1:0},Cl=Math.sqrt,kl=Math.tan;function Pl(t){return t>1?0:t<-1?hl:Math.acos(t)}function Al(t){return t>1?fl:t<-1?-fl:Math.asin(t)}function Ol(t){return(t=Ml(t/2))*t}function Ll(){}function Il(t,e){t&&Rl.hasOwnProperty(t.type)&&Rl[t.type](t,e)}var Nl={Feature:function(t,e){Il(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Il(n[i].geometry,e)}},Rl={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Dl(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Dl(n[i],e,0)},Polygon:function(t,e){zl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)zl(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Il(n[i],e)}};function Dl(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function zl(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Dl(t[n],e,1);e.polygonEnd()}var Bl,Fl,jl,Vl,Ul,Hl=function(t,e){t&&Nl.hasOwnProperty(t.type)?Nl[t.type](t,e):Il(t,e)},Gl=sl(),Wl=sl(),ql={point:Ll,lineStart:Ll,lineEnd:Ll,polygonStart:function(){Gl.reset(),ql.lineStart=$l,ql.lineEnd=Ql},polygonEnd:function(){var t=+Gl;Wl.add(t<0?pl+t:t),this.lineStart=this.lineEnd=this.point=Ll},sphere:function(){Wl.add(pl)}};function $l(){ql.point=Yl}function Ql(){Xl(Bl,Fl)}function Yl(t,e){ql.point=Xl,Bl=t,Fl=e,jl=t*=vl,Vl=xl(e=(e*=vl)/2+dl),Ul=Ml(e)}function Xl(t,e){var n=(t*=vl)-jl,i=n>=0?1:-1,r=i*n,a=xl(e=(e*=vl)/2+dl),o=Ml(e),s=Ul*o,l=Vl*a+s*xl(r),u=s*i*Ml(r);Gl.add(bl(u,l)),jl=t,Vl=a,Ul=o}var Zl=function(t){return Wl.reset(),Hl(t,ql),2*Wl};function Jl(t){return[bl(t[1],t[0]),Al(t[2])]}function Kl(t){var e=t[0],n=t[1],i=xl(n);return[i*xl(e),i*Ml(e),Ml(n)]}function tu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eu(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function nu(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function iu(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ru(t){var e=Cl(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var au,ou,su,lu,uu,cu,hu,fu,du,pu,mu=sl(),vu={point:gu,lineStart:bu,lineEnd:xu,polygonStart:function(){vu.point=_u,vu.lineStart=wu,vu.lineEnd=Su,mu.reset(),ql.polygonStart()},polygonEnd:function(){ql.polygonEnd(),vu.point=gu,vu.lineStart=bu,vu.lineEnd=xu,Gl<0?(au=-(su=180),ou=-(lu=90)):mu>1e-6?lu=90:mu<-1e-6&&(ou=-90),pu[0]=au,pu[1]=su},sphere:function(){au=-(su=180),ou=-(lu=90)}};function gu(t,e){du.push(pu=[au=t,su=t]),e<ou&&(ou=e),e>lu&&(lu=e)}function yu(t,e){var n=Kl([t*vl,e*vl]);if(fu){var i=eu(fu,n),r=eu([i[1],-i[0],0],i);ru(r),r=Jl(r);var a,o=t-uu,s=o>0?1:-1,l=r[0]*ml*s,u=gl(o)>180;u^(s*uu<l&&l<s*t)?(a=r[1]*ml)>lu&&(lu=a):u^(s*uu<(l=(l+360)%360-180)&&l<s*t)?(a=-r[1]*ml)<ou&&(ou=a):(e<ou&&(ou=e),e>lu&&(lu=e)),u?t<uu?Eu(au,t)>Eu(au,su)&&(su=t):Eu(t,su)>Eu(au,su)&&(au=t):su>=au?(t<au&&(au=t),t>su&&(su=t)):t>uu?Eu(au,t)>Eu(au,su)&&(su=t):Eu(t,su)>Eu(au,su)&&(au=t)}else du.push(pu=[au=t,su=t]);e<ou&&(ou=e),e>lu&&(lu=e),fu=n,uu=t}function bu(){vu.point=yu}function xu(){pu[0]=au,pu[1]=su,vu.point=gu,fu=null}function _u(t,e){if(fu){var n=t-uu;mu.add(gl(n)>180?n+(n>0?360:-360):n)}else cu=t,hu=e;ql.point(t,e),yu(t,e)}function wu(){ql.lineStart()}function Su(){_u(cu,hu),ql.lineEnd(),gl(mu)>1e-6&&(au=-(su=180)),pu[0]=au,pu[1]=su,fu=null}function Eu(t,e){return(e-=t)<0?e+360:e}function Mu(t,e){return t[0]-e[0]}function Tu(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Cu,ku,Pu,Au,Ou,Lu,Iu,Nu,Ru,Du,zu,Bu,Fu,ju,Vu,Uu,Hu=function(t){var e,n,i,r,a,o,s;if(lu=su=-(au=ou=1/0),du=[],Hl(t,vu),n=du.length){for(du.sort(Mu),e=1,a=[i=du[0]];e<n;++e)Tu(i,(r=du[e])[0])||Tu(i,r[1])?(Eu(i[0],r[1])>Eu(i[0],i[1])&&(i[1]=r[1]),Eu(r[0],i[1])>Eu(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,e=0,i=a[n=a.length-1];e<=n;i=r,++e)r=a[e],(s=Eu(i[1],r[0]))>o&&(o=s,au=r[0],su=i[1])}return du=pu=null,au===1/0||ou===1/0?[[NaN,NaN],[NaN,NaN]]:[[au,ou],[su,lu]]},Gu={sphere:Ll,point:Wu,lineStart:$u,lineEnd:Xu,polygonStart:function(){Gu.lineStart=Zu,Gu.lineEnd=Ju},polygonEnd:function(){Gu.lineStart=$u,Gu.lineEnd=Xu}};function Wu(t,e){t*=vl;var n=xl(e*=vl);qu(n*xl(t),n*Ml(t),Ml(e))}function qu(t,e,n){++Cu,Pu+=(t-Pu)/Cu,Au+=(e-Au)/Cu,Ou+=(n-Ou)/Cu}function $u(){Gu.point=Qu}function Qu(t,e){t*=vl;var n=xl(e*=vl);ju=n*xl(t),Vu=n*Ml(t),Uu=Ml(e),Gu.point=Yu,qu(ju,Vu,Uu)}function Yu(t,e){t*=vl;var n=xl(e*=vl),i=n*xl(t),r=n*Ml(t),a=Ml(e),o=bl(Cl((o=Vu*a-Uu*r)*o+(o=Uu*i-ju*a)*o+(o=ju*r-Vu*i)*o),ju*i+Vu*r+Uu*a);ku+=o,Lu+=o*(ju+(ju=i)),Iu+=o*(Vu+(Vu=r)),Nu+=o*(Uu+(Uu=a)),qu(ju,Vu,Uu)}function Xu(){Gu.point=Wu}function Zu(){Gu.point=Ku}function Ju(){tc(Bu,Fu),Gu.point=Wu}function Ku(t,e){Bu=t,Fu=e,t*=vl,e*=vl,Gu.point=tc;var n=xl(e);ju=n*xl(t),Vu=n*Ml(t),Uu=Ml(e),qu(ju,Vu,Uu)}function tc(t,e){t*=vl;var n=xl(e*=vl),i=n*xl(t),r=n*Ml(t),a=Ml(e),o=Vu*a-Uu*r,s=Uu*i-ju*a,l=ju*r-Vu*i,u=Cl(o*o+s*s+l*l),c=Al(u),h=u&&-c/u;Ru+=h*o,Du+=h*s,zu+=h*l,ku+=c,Lu+=c*(ju+(ju=i)),Iu+=c*(Vu+(Vu=r)),Nu+=c*(Uu+(Uu=a)),qu(ju,Vu,Uu)}var ec=function(t){Cu=ku=Pu=Au=Ou=Lu=Iu=Nu=Ru=Du=zu=0,Hl(t,Gu);var e=Ru,n=Du,i=zu,r=e*e+n*n+i*i;return r<1e-12&&(e=Lu,n=Iu,i=Nu,ku<1e-6&&(e=Pu,n=Au,i=Ou),(r=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[bl(n,e)*ml,Al(i/Cl(r))*ml]},nc=function(t){return function(){return t}},ic=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};function rc(t,e){return[gl(t)>hl?t+Math.round(-t/pl)*pl:t,e]}function ac(t,e,n){return(t%=pl)?e||n?ic(sc(t),lc(e,n)):sc(t):e||n?lc(e,n):rc}function oc(t){return function(e,n){return[(e+=t)>hl?e-pl:e<-hl?e+pl:e,n]}}function sc(t){var e=oc(t);return e.invert=oc(-t),e}function lc(t,e){var n=xl(t),i=Ml(t),r=xl(e),a=Ml(e);function o(t,e){var o=xl(e),s=xl(t)*o,l=Ml(t)*o,u=Ml(e),c=u*n+s*i;return[bl(l*r-c*a,s*n-u*i),Al(c*r+l*a)]}return o.invert=function(t,e){var o=xl(e),s=xl(t)*o,l=Ml(t)*o,u=Ml(e),c=u*r-l*a;return[bl(l*r+u*a,s*n+c*i),Al(c*n-s*i)]},o}rc.invert=rc;var uc=function(t){function e(e){return(e=t(e[0]*vl,e[1]*vl))[0]*=ml,e[1]*=ml,e}return t=ac(t[0]*vl,t[1]*vl,t.length>2?t[2]*vl:0),e.invert=function(e){return(e=t.invert(e[0]*vl,e[1]*vl))[0]*=ml,e[1]*=ml,e},e};function cc(t,e,n,i,r,a){if(n){var o=xl(e),s=Ml(e),l=i*n;null==r?(r=e+i*pl,a=e-l/2):(r=hc(o,r),a=hc(o,a),(i>0?r<a:r>a)&&(r+=i*pl));for(var u,c=r;i>0?c>a:c<a;c-=l)u=Jl([o,-s*xl(c),-s*Ml(c)]),t.point(u[0],u[1])}}function hc(t,e){(e=Kl(e))[0]-=t,ru(e);var n=Pl(-e[1]);return((-e[2]<0?-n:n)+pl-1e-6)%pl}var fc=function(){var t,e,n=nc([0,0]),i=nc(90),r=nc(6),a={point:function(n,i){t.push(n=e(n,i)),n[0]*=ml,n[1]*=ml}};function o(){var o=n.apply(this,arguments),s=i.apply(this,arguments)*vl,l=r.apply(this,arguments)*vl;return t=[],e=ac(-o[0]*vl,-o[1]*vl,0).invert,cc(a,s,l,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n="function"==typeof t?t:nc([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(i="function"==typeof t?t:nc(+t),o):i},o.precision=function(t){return arguments.length?(r="function"==typeof t?t:nc(+t),o):r},o},dc=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Ll,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},pc=function(t,e){return gl(t[0]-e[0])<1e-6&&gl(t[1]-e[1])<1e-6};function mc(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var vc=function(t,e,n,i,r){var a,o,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(pc(i,o)){for(r.lineStart(),a=0;a<e;++a)r.point((i=t[a])[0],i[1]);r.lineEnd()}else s.push(n=new mc(i,t,null,!0)),l.push(n.o=new mc(i,null,n,!1)),s.push(n=new mc(o,t,null,!1)),l.push(n.o=new mc(o,null,n,!0))}})),s.length){for(l.sort(e),gc(s),gc(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var u,c,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,o=u.length;a<o;++a)r.point((c=u[a])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(u=f.p.z,a=u.length-1;a>=0;--a)r.point((c=u[a])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,d=!d}while(!f.v);r.lineEnd()}}};function gc(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}var yc=sl();function bc(t){return gl(t[0])<=hl?t[0]:Tl(t[0])*((gl(t[0])+hl)%pl-hl)}var xc=function(t,e){var n=bc(e),i=e[1],r=Ml(i),a=[Ml(n),-xl(n),0],o=0,s=0;yc.reset(),1===r?i=fl+1e-6:-1===r&&(i=-fl-1e-6);for(var l=0,u=t.length;l<u;++l)if(h=(c=t[l]).length)for(var c,h,f=c[h-1],d=bc(f),p=f[1]/2+dl,m=Ml(p),v=xl(p),g=0;g<h;++g,d=b,m=_,v=w,f=y){var y=c[g],b=bc(y),x=y[1]/2+dl,_=Ml(x),w=xl(x),S=b-d,E=S>=0?1:-1,M=E*S,T=M>hl,C=m*_;if(yc.add(bl(C*E*Ml(M),v*w+C*xl(M))),o+=T?S+E*pl:S,T^d>=n^b>=n){var k=eu(Kl(f),Kl(y));ru(k);var P=eu(a,k);ru(P);var A=(T^S>=0?-1:1)*Al(P[2]);(i>A||i===A&&(k[0]||k[1]))&&(s+=T^S>=0?1:-1)}}return(o<-1e-6||o<1e-6&&yc<-1e-6)^1&s},_c=function(t,e,n,i){return function(r){var a,o,s,l=e(r),u=dc(),c=e(u),h=!1,f={point:d,lineStart:m,lineEnd:v,polygonStart:function(){f.point=g,f.lineStart=y,f.lineEnd=b,o=[],a=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=v,o=z(o);var t=xc(a,i);o.length?(h||(r.polygonStart(),h=!0),vc(o,Sc,t,n,r)):t&&(h||(r.polygonStart(),h=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),o=a=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(e,n){t(e,n)&&r.point(e,n)}function p(t,e){l.point(t,e)}function m(){f.point=p,l.lineStart()}function v(){f.point=d,l.lineEnd()}function g(t,e){s.push([t,e]),c.point(t,e)}function y(){c.lineStart(),s=[]}function b(){g(s[0][0],s[0][1]),c.lineEnd();var t,e,n,i,l=c.clean(),f=u.result(),d=f.length;if(s.pop(),a.push(s),s=null,d)if(1&l){if((e=(n=f[0]).length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else d>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter(wc))}return f}};function wc(t){return t.length>1}function Sc(t,e){return((t=t.x)[0]<0?t[1]-fl-1e-6:fl-t[1])-((e=e.x)[0]<0?e[1]-fl-1e-6:fl-e[1])}var Ec=_c((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?hl:-hl,l=gl(a-n);gl(l-hl)<1e-6?(t.point(n,i=(i+o)/2>0?fl:-fl),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&l>=hl&&(gl(n-r)<1e-6&&(n-=1e-6*r),gl(a-s)<1e-6&&(a-=1e-6*s),i=function(t,e,n,i){var r,a,o=Ml(t-n);return gl(o)>1e-6?yl((Ml(e)*(a=xl(i))*Ml(n)-Ml(i)*(r=xl(e))*Ml(t))/(r*a*o)):(e+i)/2}(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*fl,i.point(-hl,r),i.point(0,r),i.point(hl,r),i.point(hl,0),i.point(hl,-r),i.point(0,-r),i.point(-hl,-r),i.point(-hl,0),i.point(-hl,r);else if(gl(t[0]-e[0])>1e-6){var a=t[0]<e[0]?hl:-hl;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}),[-hl,-fl]);var Mc=function(t){var e=xl(t),n=6*vl,i=e>0,r=gl(e)>1e-6;function a(t,n){return xl(t)*xl(n)>e}function o(t,n,i){var r=[1,0,0],a=eu(Kl(t),Kl(n)),o=tu(a,a),s=a[0],l=o-s*s;if(!l)return!i&&t;var u=e*o/l,c=-e*s/l,h=eu(r,a),f=iu(r,u);nu(f,iu(a,c));var d=h,p=tu(f,d),m=tu(d,d),v=p*p-m*(tu(f,f)-1);if(!(v<0)){var g=Cl(v),y=iu(d,(-p-g)/m);if(nu(y,f),y=Jl(y),!i)return y;var b,x=t[0],_=n[0],w=t[1],S=n[1];_<x&&(b=x,x=_,_=b);var E=_-x,M=gl(E-hl)<1e-6;if(!M&&S<w&&(b=w,w=S,S=b),M||E<1e-6?M?w+S>0^y[1]<(gl(y[0]-x)<1e-6?w:S):w<=y[1]&&y[1]<=S:E>hl^(x<=y[0]&&y[0]<=_)){var T=iu(d,(-p+g)/m);return nu(T,f),[y,Jl(T)]}}}function s(e,n){var r=i?t:hl-t,a=0;return e<-r?a|=1:e>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}return _c(a,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,p=[h,f],m=a(h,f),v=i?m?0:s(h,f):m?s(h+(h<0?hl:-hl),f):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(!(d=o(e,p))||pc(e,d)||pc(p,d))&&(p[0]+=1e-6,p[1]+=1e-6,m=a(p[0],p[1])),m!==l)c=0,m?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(r&&e&&i^m){var g;v&n||!(g=o(p,e,!0))||(c=0,i?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!m||e&&pc(e,p)||t.point(p[0],p[1]),e=p,l=m,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(e,i,r,a){cc(a,t,n,r,e,i)}),i?[0,-t]:[-hl,t-hl])};function Tc(t,e,n,i){function r(r,a){return t<=r&&r<=n&&e<=a&&a<=i}function a(r,a,s,u){var c=0,h=0;if(null==r||(c=o(r,s))!==(h=o(a,s))||l(r,a)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+s+4)%4)!==h);else u.point(a[0],a[1])}function o(i,r){return gl(i[0]-t)<1e-6?r>0?0:3:gl(i[0]-n)<1e-6?r>0?2:1:gl(i[1]-e)<1e-6?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,u,c,h,f,d,p,m,v,g,y,b=o,x=dc(),_={point:w,lineStart:function(){_.point=S,u&&u.push(c=[]);g=!0,v=!1,p=m=NaN},lineEnd:function(){l&&(S(h,f),d&&v&&x.rejoin(),l.push(x.result()));_.point=w,v&&b.lineEnd()},polygonStart:function(){b=x,l=[],u=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var a,o,s=u[n],l=1,c=s.length,h=s[0],f=h[0],d=h[1];l<c;++l)a=f,o=d,h=s[l],f=h[0],d=h[1],o<=i?d>i&&(f-a)*(i-o)>(d-o)*(t-a)&&++e:d<=i&&(f-a)*(i-o)<(d-o)*(t-a)&&--e;return e}(),n=y&&e,r=(l=z(l)).length;(n||r)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),r&&vc(l,s,e,a,o),o.polygonEnd());b=o,l=u=c=null}};function w(t,e){r(t,e)&&b.point(t,e)}function S(a,o){var s=r(a,o);if(u&&c.push([a,o]),g)h=a,f=o,d=s,g=!1,s&&(b.lineStart(),b.point(a,o));else if(s&&v)b.point(a,o);else{var l=[p=Math.max(-1e9,Math.min(1e9,p)),m=Math.max(-1e9,Math.min(1e9,m))],x=[a=Math.max(-1e9,Math.min(1e9,a)),o=Math.max(-1e9,Math.min(1e9,o))];!function(t,e,n,i,r,a){var o,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,f=e[1]-l;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<u)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>u&&(u=o)}if(o=r-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>u&&(u=o)}else if(h>0){if(o<u)return;o<c&&(c=o)}if(o=i-l,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>u&&(u=o)}if(o=a-l,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<c&&(c=o)}return u>0&&(t[0]=s+u*h,t[1]=l+u*f),c<1&&(e[0]=s+c*h,e[1]=l+c*f),!0}}}}}(l,x,t,e,n,i)?s&&(b.lineStart(),b.point(a,o),y=!1):(v||(b.lineStart(),b.point(l[0],l[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1)}p=a,m=o,v=s}return _}}var Cc,kc,Pc,Ac=function(){var t,e,n,i=0,r=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=Tc(i,r,a,o)(e=n)},extent:function(s){return arguments.length?(i=+s[0][0],r=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[i,r],[a,o]]}}},Oc=sl(),Lc={sphere:Ll,point:Ll,lineStart:function(){Lc.point=Nc,Lc.lineEnd=Ic},lineEnd:Ll,polygonStart:Ll,polygonEnd:Ll};function Ic(){Lc.point=Lc.lineEnd=Ll}function Nc(t,e){Cc=t*=vl,kc=Ml(e*=vl),Pc=xl(e),Lc.point=Rc}function Rc(t,e){t*=vl;var n=Ml(e*=vl),i=xl(e),r=gl(t-Cc),a=xl(r),o=i*Ml(r),s=Pc*n-kc*i*a,l=kc*n+Pc*i*a;Oc.add(bl(Cl(o*o+s*s),l)),Cc=t,kc=n,Pc=i}var Dc=function(t){return Oc.reset(),Hl(t,Lc),+Oc},zc=[null,null],Bc={type:"LineString",coordinates:zc},Fc=function(t,e){return zc[0]=t,zc[1]=e,Dc(Bc)},jc={Feature:function(t,e){return Uc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(Uc(n[i].geometry,e))return!0;return!1}},Vc={Sphere:function(){return!0},Point:function(t,e){return Hc(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Hc(n[i],e))return!0;return!1},LineString:function(t,e){return Gc(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Gc(n[i],e))return!0;return!1},Polygon:function(t,e){return Wc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Wc(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(Uc(n[i],e))return!0;return!1}};function Uc(t,e){return!(!t||!Vc.hasOwnProperty(t.type))&&Vc[t.type](t,e)}function Hc(t,e){return 0===Fc(t,e)}function Gc(t,e){for(var n,i,r,a=0,o=t.length;a<o;a++){if(0===(i=Fc(t[a],e)))return!0;if(a>0&&(r=Fc(t[a],t[a-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<1e-12*r)return!0;n=i}return!1}function Wc(t,e){return!!xc(t.map(qc),$c(e))}function qc(t){return(t=t.map($c)).pop(),t}function $c(t){return[t[0]*vl,t[1]*vl]}var Qc=function(t,e){return(t&&jc.hasOwnProperty(t.type)?jc[t.type]:Uc)(t,e)};function Yc(t,e,n){var i=w(t,e-1e-6,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function Xc(t,e,n){var i=w(t,e-1e-6,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Zc(){var t,e,n,i,r,a,o,s,l,u,c,h,f=10,d=f,p=90,m=360,v=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return w(_l(i/p)*p,n,p).map(c).concat(w(_l(s/m)*m,o,m).map(h)).concat(w(_l(e/f)*f,t,f).filter((function(t){return gl(t%p)>1e-6})).map(l)).concat(w(_l(a/d)*d,r,d).filter((function(t){return gl(t%m)>1e-6})).map(u))}return g.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},g.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(h(o).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],i>n&&(t=i,i=n,n=t),s>o&&(t=s,s=o,o=t),g.precision(v)):[[i,s],[n,o]]},g.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),a>r&&(n=a,a=r,r=n),g.precision(v)):[[e,a],[t,r]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],g):[p,m]},g.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],g):[f,d]},g.precision=function(f){return arguments.length?(v=+f,l=Yc(a,r,90),u=Xc(e,t,v),c=Yc(s,o,90),h=Xc(i,n,v),g):v},g.extentMajor([[-180,1e-6-90],[180,90-1e-6]]).extentMinor([[-180,-80-1e-6],[180,80+1e-6]])}function Jc(){return Zc()()}var Kc,th,eh,nh,ih=function(t,e){var n=t[0]*vl,i=t[1]*vl,r=e[0]*vl,a=e[1]*vl,o=xl(i),s=Ml(i),l=xl(a),u=Ml(a),c=o*xl(n),h=o*Ml(n),f=l*xl(r),d=l*Ml(r),p=2*Al(Cl(Ol(a-i)+o*l*Ol(r-n))),m=Ml(p),v=p?function(t){var e=Ml(t*=p)/m,n=Ml(p-t)/m,i=n*c+e*f,r=n*h+e*d,a=n*s+e*u;return[bl(r,i)*ml,bl(a,Cl(i*i+r*r))*ml]}:function(){return[n*ml,i*ml]};return v.distance=p,v},rh=function(t){return t},ah=sl(),oh=sl(),sh={point:Ll,lineStart:Ll,lineEnd:Ll,polygonStart:function(){sh.lineStart=lh,sh.lineEnd=hh},polygonEnd:function(){sh.lineStart=sh.lineEnd=sh.point=Ll,ah.add(gl(oh)),oh.reset()},result:function(){var t=ah/2;return ah.reset(),t}};function lh(){sh.point=uh}function uh(t,e){sh.point=ch,Kc=eh=t,th=nh=e}function ch(t,e){oh.add(nh*t-eh*e),eh=t,nh=e}function hh(){ch(Kc,th)}var fh=sh,dh=1/0,ph=dh,mh=-dh,vh=mh;var gh,yh,bh,xh,_h={point:function(t,e){t<dh&&(dh=t);t>mh&&(mh=t);e<ph&&(ph=e);e>vh&&(vh=e)},lineStart:Ll,lineEnd:Ll,polygonStart:Ll,polygonEnd:Ll,result:function(){var t=[[dh,ph],[mh,vh]];return mh=vh=-(ph=dh=1/0),t}},wh=0,Sh=0,Eh=0,Mh=0,Th=0,Ch=0,kh=0,Ph=0,Ah=0,Oh={point:Lh,lineStart:Ih,lineEnd:Dh,polygonStart:function(){Oh.lineStart=zh,Oh.lineEnd=Bh},polygonEnd:function(){Oh.point=Lh,Oh.lineStart=Ih,Oh.lineEnd=Dh},result:function(){var t=Ah?[kh/Ah,Ph/Ah]:Ch?[Mh/Ch,Th/Ch]:Eh?[wh/Eh,Sh/Eh]:[NaN,NaN];return wh=Sh=Eh=Mh=Th=Ch=kh=Ph=Ah=0,t}};function Lh(t,e){wh+=t,Sh+=e,++Eh}function Ih(){Oh.point=Nh}function Nh(t,e){Oh.point=Rh,Lh(bh=t,xh=e)}function Rh(t,e){var n=t-bh,i=e-xh,r=Cl(n*n+i*i);Mh+=r*(bh+t)/2,Th+=r*(xh+e)/2,Ch+=r,Lh(bh=t,xh=e)}function Dh(){Oh.point=Lh}function zh(){Oh.point=Fh}function Bh(){jh(gh,yh)}function Fh(t,e){Oh.point=jh,Lh(gh=bh=t,yh=xh=e)}function jh(t,e){var n=t-bh,i=e-xh,r=Cl(n*n+i*i);Mh+=r*(bh+t)/2,Th+=r*(xh+e)/2,Ch+=r,kh+=(r=xh*t-bh*e)*(bh+t),Ph+=r*(xh+e),Ah+=3*r,Lh(bh=t,xh=e)}var Vh=Oh;function Uh(t){this._context=t}Uh.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,pl)}},result:Ll};var Hh,Gh,Wh,qh,$h,Qh=sl(),Yh={point:Ll,lineStart:function(){Yh.point=Xh},lineEnd:function(){Hh&&Zh(Gh,Wh),Yh.point=Ll},polygonStart:function(){Hh=!0},polygonEnd:function(){Hh=null},result:function(){var t=+Qh;return Qh.reset(),t}};function Xh(t,e){Yh.point=Zh,Gh=qh=t,Wh=$h=e}function Zh(t,e){qh-=t,$h-=e,Qh.add(Cl(qh*qh+$h*$h)),qh=t,$h=e}var Jh=Yh;function Kh(){this._string=[]}function tf(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Kh.prototype={_radius:4.5,_circle:tf(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=tf(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var ef=function(t,e){var n,i,r=4.5;function a(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),Hl(t,n(i))),i.result()}return a.area=function(t){return Hl(t,n(fh)),fh.result()},a.measure=function(t){return Hl(t,n(Jh)),Jh.result()},a.bounds=function(t){return Hl(t,n(_h)),_h.result()},a.centroid=function(t){return Hl(t,n(Vh)),Vh.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,rh):(t=e).stream,a):t},a.context=function(t){return arguments.length?(i=null==t?(e=null,new Kh):new Uh(e=t),"function"!=typeof r&&i.pointRadius(r),a):e},a.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),a):r},a.projection(t).context(e)},nf=function(t){return{stream:rf(t)}};function rf(t){return function(e){var n=new af;for(var i in t)n[i]=t[i];return n.stream=e,n}}function af(){}function of(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Hl(n,t.stream(_h)),e(_h.result()),null!=i&&t.clipExtent(i),t}function sf(t,e,n){return of(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],a=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),o=+e[0][0]+(i-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(r-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function lf(t,e,n){return sf(t,[[0,0],e],n)}function uf(t,e,n){return of(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),a=(i-r*(n[1][0]+n[0][0]))/2,o=-r*n[0][1];t.scale(150*r).translate([a,o])}),n)}function cf(t,e,n){return of(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),a=-r*n[0][0],o=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([a,o])}),n)}af.prototype={constructor:af,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var hf=xl(30*vl),ff=function(t,e){return+e?function(t,e){function n(i,r,a,o,s,l,u,c,h,f,d,p,m,v){var g=u-i,y=c-r,b=g*g+y*y;if(b>4*e&&m--){var x=o+f,_=s+d,w=l+p,S=Cl(x*x+_*_+w*w),E=Al(w/=S),M=gl(gl(w)-1)<1e-6||gl(a-h)<1e-6?(a+h)/2:bl(_,x),T=t(M,E),C=T[0],k=T[1],P=C-i,A=k-r,O=y*P-g*A;(O*O/b>e||gl((g*P+y*A)/b-.5)>.3||o*f+s*d+l*p<hf)&&(n(i,r,a,o,s,l,C,k,M,x/=S,_/=S,w,m,v),v.point(C,k),n(C,k,M,x,_,w,u,c,h,f,d,p,m,v))}}return function(e){var i,r,a,o,s,l,u,c,h,f,d,p,m={point:v,lineStart:g,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=g}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function g(){c=NaN,m.point=y,e.lineStart()}function y(i,r){var a=Kl([i,r]),o=t(i,r);n(c,h,u,f,d,p,c=o[0],h=o[1],u=i,f=a[0],d=a[1],p=a[2],16,e),e.point(c,h)}function b(){m.point=v,e.lineEnd()}function x(){g(),m.point=_,m.lineEnd=w}function _(t,e){y(i=t,e),r=c,a=h,o=f,s=d,l=p,m.point=y}function w(){n(c,h,u,f,d,p,r,a,i,o,s,l,16,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return rf({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var df=rf({point:function(t,e){this.stream.point(t*vl,e*vl)}});function pf(t,e,n){function i(i,r){return[e+t*i,n-t*r]}return i.invert=function(i,r){return[(i-e)/t,(n-r)/t]},i}function mf(t,e,n,i){var r=xl(i),a=Ml(i),o=r*t,s=a*t,l=r/t,u=a/t,c=(a*n-r*e)/t,h=(a*e+r*n)/t;function f(t,i){return[o*t-s*i+e,n-s*t-o*i]}return f.invert=function(t,e){return[l*t-u*e+c,h-u*t-l*e]},f}function vf(t){return gf((function(){return t}))()}function gf(t){var e,n,i,r,a,o,s,l,u,c,h=150,f=480,d=250,p=0,m=0,v=0,g=0,y=0,b=0,x=null,_=Ec,w=null,S=rh,E=.5;function M(t){return l(t[0]*vl,t[1]*vl)}function T(t){return(t=l.invert(t[0],t[1]))&&[t[0]*ml,t[1]*ml]}function C(){var t=mf(h,0,0,b).apply(null,e(p,m)),i=(b?mf:pf)(h,f-t[0],d-t[1],b);return n=ac(v,g,y),s=ic(e,i),l=ic(n,s),o=ff(s,E),k()}function k(){return u=c=null,M}return M.stream=function(t){return u&&c===t?u:u=df(function(t){return rf({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(_(o(S(c=t)))))},M.preclip=function(t){return arguments.length?(_=t,x=void 0,k()):_},M.postclip=function(t){return arguments.length?(S=t,w=i=r=a=null,k()):S},M.clipAngle=function(t){return arguments.length?(_=+t?Mc(x=t*vl):(x=null,Ec),k()):x*ml},M.clipExtent=function(t){return arguments.length?(S=null==t?(w=i=r=a=null,rh):Tc(w=+t[0][0],i=+t[0][1],r=+t[1][0],a=+t[1][1]),k()):null==w?null:[[w,i],[r,a]]},M.scale=function(t){return arguments.length?(h=+t,C()):h},M.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],C()):[f,d]},M.center=function(t){return arguments.length?(p=t[0]%360*vl,m=t[1]%360*vl,C()):[p*ml,m*ml]},M.rotate=function(t){return arguments.length?(v=t[0]%360*vl,g=t[1]%360*vl,y=t.length>2?t[2]%360*vl:0,C()):[v*ml,g*ml,y*ml]},M.angle=function(t){return arguments.length?(b=t%360*vl,C()):b*ml},M.precision=function(t){return arguments.length?(o=ff(s,E=t*t),k()):Cl(E)},M.fitExtent=function(t,e){return sf(M,t,e)},M.fitSize=function(t,e){return lf(M,t,e)},M.fitWidth=function(t,e){return uf(M,t,e)},M.fitHeight=function(t,e){return cf(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&T,C()}}function yf(t){var e=0,n=hl/3,i=gf(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*vl,n=t[1]*vl):[e*ml,n*ml]},r}function bf(t,e){var n=Ml(t),i=(n+Ml(e))/2;if(gl(i)<1e-6)return function(t){var e=xl(t);function n(t,n){return[t*e,Ml(n)/e]}return n.invert=function(t,n){return[t/e,Al(n*e)]},n}(t);var r=1+n*(2*i-n),a=Cl(r)/i;function o(t,e){var n=Cl(r-2*i*Ml(e))/i;return[n*Ml(t*=i),a-n*xl(t)]}return o.invert=function(t,e){var n=a-e;return[bl(t,gl(n))/i*Tl(n),Al((r-(t*t+n*n)*i*i)/(2*i))]},o}var xf=function(){return yf(bf).scale(155.424).center([0,33.6442])},_f=function(){return xf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var wf=function(){var t,e,n,i,r,a,o=_f(),s=xf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=xf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(i.point(e,o),a)||(r.point(e,o),a)}function h(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:o).invert(t)},c.stream=function(n){return t&&e===n?t:(i=[o.stream(e=n),s.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},c.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),l.precision(t),h()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),l.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(u),i=s.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+1e-6,c+.12*e+1e-6],[a-.214*e-1e-6,c+.234*e-1e-6]]).stream(u),r=l.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+1e-6,c+.166*e+1e-6],[a-.115*e-1e-6,c+.234*e-1e-6]]).stream(u),h()},c.fitExtent=function(t,e){return sf(c,t,e)},c.fitSize=function(t,e){return lf(c,t,e)},c.fitWidth=function(t,e){return uf(c,t,e)},c.fitHeight=function(t,e){return cf(c,t,e)},c.scale(1070)};function Sf(t){return function(e,n){var i=xl(e),r=xl(n),a=t(i*r);return[a*r*Ml(e),a*Ml(n)]}}function Ef(t){return function(e,n){var i=Cl(e*e+n*n),r=t(i),a=Ml(r),o=xl(r);return[bl(e*a,i*o),Al(i&&n*a/i)]}}var Mf=Sf((function(t){return Cl(2/(1+t))}));Mf.invert=Ef((function(t){return 2*Al(t/2)}));var Tf=function(){return vf(Mf).scale(124.75).clipAngle(179.999)},Cf=Sf((function(t){return(t=Pl(t))&&t/Ml(t)}));Cf.invert=Ef((function(t){return t}));var kf=function(){return vf(Cf).scale(79.4188).clipAngle(179.999)};function Pf(t,e){return[t,Sl(kl((fl+e)/2))]}Pf.invert=function(t,e){return[t,2*yl(wl(e))-fl]};var Af=function(){return Of(Pf).scale(961/pl)};function Of(t){var e,n,i,r=vf(t),a=r.center,o=r.scale,s=r.translate,l=r.clipExtent,u=null;function c(){var a=hl*o(),s=r(uc(r.rotate()).invert([0,0]));return l(null==u?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===Pf?[[Math.max(s[0]-a,u),e],[Math.min(s[0]+a,n),i]]:[[u,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,i)]])}return r.scale=function(t){return arguments.length?(o(t),c()):o()},r.translate=function(t){return arguments.length?(s(t),c()):s()},r.center=function(t){return arguments.length?(a(t),c()):a()},r.clipExtent=function(t){return arguments.length?(null==t?u=e=n=i=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),c()):null==u?null:[[u,e],[n,i]]},c()}function Lf(t){return kl((fl+t)/2)}function If(t,e){var n=xl(t),i=t===e?Ml(t):Sl(n/xl(e))/Sl(Lf(e)/Lf(t)),r=n*El(Lf(t),i)/i;if(!i)return Pf;function a(t,e){r>0?e<1e-6-fl&&(e=1e-6-fl):e>fl-1e-6&&(e=fl-1e-6);var n=r/El(Lf(e),i);return[n*Ml(i*t),r-n*xl(i*t)]}return a.invert=function(t,e){var n=r-e,a=Tl(i)*Cl(t*t+n*n);return[bl(t,gl(n))/i*Tl(n),2*yl(El(r/a,1/i))-fl]},a}var Nf=function(){return yf(If).scale(109.5).parallels([30,30])};function Rf(t,e){return[t,e]}Rf.invert=Rf;var Df=function(){return vf(Rf).scale(152.63)};function zf(t,e){var n=xl(t),i=t===e?Ml(t):(n-xl(e))/(e-t),r=n/i+t;if(gl(i)<1e-6)return Rf;function a(t,e){var n=r-e,a=i*t;return[n*Ml(a),r-n*xl(a)]}return a.invert=function(t,e){var n=r-e;return[bl(t,gl(n))/i*Tl(n),r-Tl(i)*Cl(t*t+n*n)]},a}var Bf=function(){return yf(zf).scale(131.154).center([0,13.9389])},Ff=1.340264,jf=-.081106,Vf=893e-6,Uf=.003796,Hf=Cl(3)/2;function Gf(t,e){var n=Al(Hf*Ml(e)),i=n*n,r=i*i*i;return[t*xl(n)/(Hf*(Ff+3*jf*i+r*(7*Vf+9*Uf*i))),n*(Ff+jf*i+r*(Vf+Uf*i))]}Gf.invert=function(t,e){for(var n,i=e,r=i*i,a=r*r*r,o=0;o<12&&(a=(r=(i-=n=(i*(Ff+jf*r+a*(Vf+Uf*r))-e)/(Ff+3*jf*r+a*(7*Vf+9*Uf*r)))*i)*r*r,!(gl(n)<1e-12));++o);return[Hf*t*(Ff+3*jf*r+a*(7*Vf+9*Uf*r))/xl(i),Al(Ml(i)/Hf)]};var Wf=function(){return vf(Gf).scale(177.158)};function qf(t,e){var n=xl(e),i=xl(t)*n;return[n*Ml(t)/i,Ml(e)/i]}qf.invert=Ef(yl);var $f=function(){return vf(qf).scale(144.049).clipAngle(60)};function Qf(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?rh:rf({point:function(r,a){this.stream.point(r*t+n,a*e+i)}})}var Yf=function(){var t,e,n,i,r,a,o=1,s=0,l=0,u=1,c=1,h=rh,f=null,d=rh;function p(){return i=r=null,a}return a={stream:function(t){return i&&r===t?i:i=h(d(r=t))},postclip:function(i){return arguments.length?(d=i,f=t=e=n=null,p()):d},clipExtent:function(i){return arguments.length?(d=null==i?(f=t=e=n=null,rh):Tc(f=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),p()):null==f?null:[[f,t],[e,n]]},scale:function(t){return arguments.length?(h=Qf((o=+t)*u,o*c,s,l),p()):o},translate:function(t){return arguments.length?(h=Qf(o*u,o*c,s=+t[0],l=+t[1]),p()):[s,l]},reflectX:function(t){return arguments.length?(h=Qf(o*(u=t?-1:1),o*c,s,l),p()):u<0},reflectY:function(t){return arguments.length?(h=Qf(o*u,o*(c=t?-1:1),s,l),p()):c<0},fitExtent:function(t,e){return sf(a,t,e)},fitSize:function(t,e){return lf(a,t,e)},fitWidth:function(t,e){return uf(a,t,e)},fitHeight:function(t,e){return cf(a,t,e)}}};function Xf(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}Xf.invert=function(t,e){var n,i=e,r=25;do{var a=i*i,o=a*a;i-=n=(i*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(gl(n)>1e-6&&--r>0);return[t/(.8707+(a=i*i)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),i]};var Zf=function(){return vf(Xf).scale(175.295)};function Jf(t,e){return[xl(e)*Ml(t),Ml(e)]}Jf.invert=Ef(Al);var Kf=function(){return vf(Jf).scale(249.5).clipAngle(90+1e-6)};function td(t,e){var n=xl(e),i=1+xl(t)*n;return[n*Ml(t)/i,Ml(e)/i]}td.invert=Ef((function(t){return 2*yl(t)}));var ed=function(){return vf(td).scale(250).clipAngle(142)};function nd(t,e){return[Sl(kl((fl+e)/2)),-t]}nd.invert=function(t,e){return[-e,2*yl(wl(t))-fl]};var id=function(){var t=Of(nd),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function rd(t,e){return t.parent===e.parent?1:2}function ad(t,e){return t+e.x}function od(t,e){return Math.max(t,e.y)}var sd=function(){var t=rd,e=1,n=1,i=!1;function r(r){var a,o=0;r.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(ad,0)/t.length}(n),e.y=function(t){return 1+t.reduce(od,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),u=s.x-t(s,l)/2,c=l.x+t(l,s)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r};function ld(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function ud(t,e){var n,i,r,a,o,s=new dd(t),l=+t.value&&(s.value=t.value),u=[s];for(null==e&&(e=cd);n=u.pop();)if(l&&(n.value=+n.data.value),(r=e(n.data))&&(o=r.length))for(n.children=new Array(o),a=o-1;a>=0;--a)u.push(i=n.children[a]=new dd(r[a])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(fd)}function cd(t){return t.children}function hd(t){t.data=t.data.data}function fd(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function dd(t){this.data=t,this.depth=this.height=0,this.parent=null}dd.prototype=ud.prototype={constructor:dd,count:function(){return this.eachAfter(ld)},each:function(t){var e,n,i,r,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i])}while(o.length);return this},eachAfter:function(t){for(var e,n,i,r=this,a=[r],o=[];r=a.pop();)if(o.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)a.push(e[n]);for(;r=o.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return ud(this).eachBefore(hd)}};var pd=Array.prototype.slice;var md=function(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(pd.call(t))).length,a=[];i<r;)e=t[i],n&&yd(n,e)?++i:(n=xd(a=vd(a,e)),i=0);return n};function vd(t,e){var n,i;if(bd(e,t))return[e];for(n=0;n<t.length;++n)if(gd(e,t[n])&&bd(_d(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(gd(_d(t[n],t[i]),e)&&gd(_d(t[n],e),t[i])&&gd(_d(t[i],e),t[n])&&bd(wd(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function gd(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function yd(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function bd(t,e){for(var n=0;n<e.length;++n)if(!yd(t,e[n]))return!1;return!0}function xd(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return _d(t[0],t[1]);case 3:return wd(t[0],t[1],t[2])}var e}function _d(t,e){var n=t.x,i=t.y,r=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-i,c=s-r,h=Math.sqrt(l*l+u*u);return{x:(n+a+l/h*c)/2,y:(i+o+u/h*c)/2,r:(h+r+s)/2}}function wd(t,e,n){var i=t.x,r=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,c=n.y,h=n.r,f=i-o,d=i-u,p=r-s,m=r-c,v=l-a,g=h-a,y=i*i+r*r-a*a,b=y-o*o-s*s+l*l,x=y-u*u-c*c+h*h,_=d*p-f*m,w=(p*x-m*b)/(2*_)-i,S=(m*v-p*g)/_,E=(d*b-f*x)/(2*_)-r,M=(f*g-d*v)/_,T=S*S+M*M-1,C=2*(a+w*S+E*M),k=w*w+E*E-a*a,P=-(T?(C+Math.sqrt(C*C-4*T*k))/(2*T):k/C);return{x:i+w+S*P,y:r+E+M*P,r:P}}function Sd(t,e,n){var i,r,a,o,s=t.x-e.x,l=t.y-e.y,u=s*s+l*l;u?(r=e.r+n.r,r*=r,o=t.r+n.r,r>(o*=o)?(i=(u+o-r)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x-i*s-a*l,n.y=t.y-i*l+a*s):(i=(u+r-o)/(2*u),a=Math.sqrt(Math.max(0,r/u-i*i)),n.x=e.x+i*s-a*l,n.y=e.y+i*l+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Ed(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function Md(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,a=(e.y*n.r+n.y*e.r)/i;return r*r+a*a}function Td(t){this._=t,this.next=null,this.previous=null}function Cd(t){if(!(r=t.length))return 0;var e,n,i,r,a,o,s,l,u,c,h;if((e=t[0]).x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;Sd(n,e,i=t[2]),e=new Td(e),n=new Td(n),i=new Td(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;s<r;++s){Sd(e._,n._,i=t[s]),i=new Td(i),l=n.next,u=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(Ed(l._,i._)){n=l,e.next=n,n.previous=e,--s;continue t}c+=l._.r,l=l.next}else{if(Ed(u._,i._)){(e=u).next=n,n.previous=e,--s;continue t}h+=u._.r,u=u.previous}}while(l!==u.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,a=Md(e);(i=i.next)!==n;)(o=Md(i))<a&&(e=i,a=o);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=md(e),s=0;s<r;++s)(e=t[s]).x-=i.x,e.y-=i.y;return i.r}var kd=function(t){return Cd(t),t};function Pd(t){return null==t?null:Ad(t)}function Ad(t){if("function"!=typeof t)throw new Error;return t}function Od(){return 0}var Ld=function(t){return function(){return t}};function Id(t){return Math.sqrt(t.value)}var Nd=function(){var t=null,e=1,n=1,i=Od;function r(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(Rd(t)).eachAfter(Dd(i,.5)).eachBefore(zd(1)):r.eachBefore(Rd(Id)).eachAfter(Dd(Od,1)).eachAfter(Dd(i,r.r/Math.min(e,n))).eachBefore(zd(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=Pd(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:Ld(+t),r):i},r};function Rd(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Dd(t,e){return function(n){if(i=n.children){var i,r,a,o=i.length,s=t(n)*e||0;if(s)for(r=0;r<o;++r)i[r].r+=s;if(a=Cd(i),s)for(r=0;r<o;++r)i[r].r-=s;n.r=a+s}}}function zd(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Bd=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Fd=function(t,e,n,i,r){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(i-e)/t.value;++s<l;)(a=o[s]).y0=n,a.y1=r,a.x0=e,a.x1=e+=a.value*u},jd=function(){var t=1,e=1,n=0,i=!1;function r(r){var a=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/a,r.eachBefore(function(t,e){return function(i){i.children&&Fd(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,a=i.y0,o=i.x1-n,s=i.y1-n;o<r&&(r=o=(r+o)/2),s<a&&(a=s=(a+s)/2),i.x0=r,i.y0=a,i.x1=o,i.y1=s}}(e,a)),i&&r.eachBefore(Bd),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},Vd={depth:-1},Ud={};function Hd(t){return t.id}function Gd(t){return t.parentId}var Wd=function(){var t=Hd,e=Gd;function n(n){var i,r,a,o,s,l,u,c=n.length,h=new Array(c),f={};for(r=0;r<c;++r)i=n[r],s=h[r]=new dd(i),null!=(l=t(i,r,n))&&(l+="")&&(f[u="$"+(s.id=l)]=u in f?Ud:s);for(r=0;r<c;++r)if(s=h[r],null!=(l=e(n[r],r,n))&&(l+="")){if(!(o=f["$"+l]))throw new Error("missing: "+l);if(o===Ud)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=Vd,a.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(fd),a.parent=null,c>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=Ad(e),n):t},n.parentId=function(t){return arguments.length?(e=Ad(t),n):e},n};function qd(t,e){return t.parent===e.parent?1:2}function $d(t){var e=t.children;return e?e[0]:t.t}function Qd(t){var e=t.children;return e?e[e.length-1]:t.t}function Yd(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Xd(t,e,n){return t.a.parent===e.parent?t.a:n}function Zd(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Zd.prototype=Object.create(dd.prototype);var Jd=function(){var t=qd,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,a,o=new Zd(t,0),s=[o];e=s.pop();)if(i=e._.children)for(e.children=new Array(a=i.length),r=a-1;r>=0;--r)s.push(n=e.children[r]=new Zd(i[r],r)),n.parent=e;return(o.parent=new Zd(null,0)).children=[o],o}(r);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),i)r.eachBefore(s);else{var u=r,c=r,h=r;r.eachBefore((function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)}));var f=u===c?1:t(u,c)/2,d=f-u.x,p=e/(c.x+f+d),m=n/(h.depth||1);r.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*m}))}return r}function a(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,a=e,o=e,s=n,l=a.parent.children[0],u=a.m,c=o.m,h=s.m,f=l.m;s=Qd(s),a=$d(a),s&&a;)l=$d(l),(o=Qd(o)).a=e,(r=s.z+h-a.z-u+t(s._,a._))>0&&(Yd(Xd(s,e,i),e,r),u+=r,c+=r),h+=s.m,u+=a.m,f+=l.m,c+=o.m;s&&!Qd(o)&&(o.t=s,o.m+=h-c),a&&!$d(l)&&(l.t=a,l.m+=u-f,i=e)}return i}(e,r,e.parent.A||i[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},Kd=function(t,e,n,i,r){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(r-n)/t.value;++s<l;)(a=o[s]).x0=e,a.x1=i,a.y0=n,a.y1=n+=a.value*u},tp=(1+Math.sqrt(5))/2;function ep(t,e,n,i,r,a){for(var o,s,l,u,c,h,f,d,p,m,v,g=[],y=e.children,b=0,x=0,_=y.length,w=e.value;b<_;){l=r-n,u=a-i;do{c=y[x++].value}while(!c&&x<_);for(h=f=c,v=c*c*(m=Math.max(u/l,l/u)/(w*t)),p=Math.max(f/v,v/h);x<_;++x){if(c+=s=y[x].value,s<h&&(h=s),s>f&&(f=s),v=c*c*m,(d=Math.max(f/v,v/h))>p){c-=s;break}p=d}g.push(o={value:c,dice:l<u,children:y.slice(b,x)}),o.dice?Fd(o,n,i,r,w?i+=u*c/w:a):Kd(o,n,i,w?n+=l*c/w:r,a),w-=c,b=x}return g}var np=function t(e){function n(t,n,i,r,a){ep(e,t,n,i,r,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(tp),ip=function(){var t=np,e=!1,n=1,i=1,r=[0],a=Od,o=Od,s=Od,l=Od,u=Od;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),r=[0],e&&t.eachBefore(Bd),t}function h(e){var n=r[e.depth],i=e.x0+n,c=e.y0+n,h=e.x1-n,f=e.y1-n;h<i&&(i=h=(i+h)/2),f<c&&(c=f=(c+f)/2),e.x0=i,e.y0=c,e.x1=h,e.y1=f,e.children&&(n=r[e.depth+1]=a(e)/2,i+=u(e)-n,c+=o(e)-n,(h-=s(e)-n)<i&&(i=h=(i+h)/2),(f-=l(e)-n)<c&&(c=f=(c+f)/2),t(e,i,c,h,f))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],i=+t[1],c):[n,i]},c.tile=function(e){return arguments.length?(t=Ad(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:Ld(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:Ld(+t),c):o},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Ld(+t),c):s},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Ld(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:Ld(+t),c):u},c},rp=function(t,e,n,i,r){var a,o,s=t.children,l=s.length,u=new Array(l+1);for(u[0]=o=a=0;a<l;++a)u[a+1]=o+=s[a].value;!function t(e,n,i,r,a,o,l){if(e>=n-1){var c=s[e];return c.x0=r,c.y0=a,c.x1=o,void(c.y1=l)}var h=u[e],f=i/2+h,d=e+1,p=n-1;for(;d<p;){var m=d+p>>>1;u[m]<f?d=m+1:p=m}f-u[d-1]<u[d]-f&&e+1<d&&--d;var v=u[d]-h,g=i-v;if(o-r>l-a){var y=(r*g+o*v)/i;t(e,d,v,r,a,y,l),t(d,n,g,y,a,o,l)}else{var b=(a*g+l*v)/i;t(e,d,v,r,a,o,b),t(d,n,g,r,b,o,l)}}(0,l,t.value,e,n,i,r)},ap=function(t,e,n,i,r){(1&t.depth?Kd:Fd)(t,e,n,i,r)},op=function t(e){function n(t,n,i,r,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,u,c,h=-1,f=o.length,d=t.value;++h<f;){for(l=(s=o[h]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?Fd(s,n,i,r,i+=(a-i)*s.value/d):Kd(s,n,i,n+=(r-n)*s.value/d,a),d-=s.value}else t._squarify=o=ep(e,t,n,i,r,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(tp),sp=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},lp=function(t,e){var n=un(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},up=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},cp=Math.SQRT2;function hp(t){return((t=Math.exp(t))+1/t)/2}var fp=function(t,e){var n,i,r=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],c=s-r,h=l-a,f=c*c+h*h;if(f<1e-12)i=Math.log(u/o)/cp,n=function(t){return[r+t*c,a+t*h,o*Math.exp(cp*t*i)]};else{var d=Math.sqrt(f),p=(u*u-o*o+4*f)/(2*o*2*d),m=(u*u-o*o-4*f)/(2*u*2*d),v=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(m*m+1)-m);i=(g-v)/cp,n=function(t){var e,n=t*i,s=hp(v),l=o/(2*d)*(s*(e=cp*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[r+l*c,a+l*h,o*s/hp(cp*n+v)]}}return n.duration=1e3*i,n};function dp(t){return function(e,n){var i=t((e=tn(e)).h,(n=tn(n)).h),r=hn(e.s,n.s),a=hn(e.l,n.l),o=hn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=a(t),e.opacity=o(t),e+""}}}var pp=dp(un),mp=dp(hn);function vp(t,e){var n=hn((t=pa(t)).l,(e=pa(e)).l),i=hn(t.a,e.a),r=hn(t.b,e.b),a=hn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=a(e),t+""}}function gp(t){return function(e,n){var i=t((e=wa(e)).h,(n=wa(n)).h),r=hn(e.c,n.c),a=hn(e.l,n.l),o=hn(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=a(t),e.opacity=o(t),e+""}}}var yp=gp(un),bp=gp(hn);function xp(t){return function e(n){function i(e,i){var r=t((e=Aa(e)).h,(i=Aa(i)).h),a=hn(e.s,i.s),o=hn(e.l,i.l),s=hn(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}var _p=xp(un),wp=xp(hn);function Sp(t,e){for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[e](t-e)}}var Ep=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},Mp=function(t){for(var e,n=-1,i=t.length,r=t[i-1],a=0;++n<i;)e=r,r=t[n],a+=e[1]*r[0]-e[0]*r[1];return a/2},Tp=function(t){for(var e,n,i=-1,r=t.length,a=0,o=0,s=t[r-1],l=0;++i<r;)e=s,s=t[i],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(l*=3),o/l]};function Cp(t,e){return t[0]-e[0]||t[1]-e[1]}function kp(t){for(var e,n,i,r=t.length,a=[0,1],o=2,s=2;s<r;++s){for(;o>1&&(e=t[a[o-2]],n=t[a[o-1]],i=t[s],(n[0]-e[0])*(i[1]-e[1])-(n[1]-e[1])*(i[0]-e[0])<=0);)--o;a[o++]=s}return a.slice(0,o)}var Pp=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Cp),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var a=kp(i),o=kp(r),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(e=a.length-1;e>=0;--e)u.push(t[i[a[e]][2]]);for(e=+s;e<o.length-l;++e)u.push(t[i[o[e]][2]]);return u},Ap=function(t,e){for(var n,i,r=t.length,a=t[r-1],o=e[0],s=e[1],l=a[0],u=a[1],c=!1,h=0;h<r;++h)n=(a=t[h])[0],(i=a[1])>s!=u>s&&o<(l-n)*(s-i)/(u-i)+n&&(c=!c),l=n,u=i;return c},Op=function(t){for(var e,n,i=-1,r=t.length,a=t[r-1],o=a[0],s=a[1],l=0;++i<r;)e=o,n=s,e-=o=(a=t[i])[0],n-=s=a[1],l+=Math.sqrt(e*e+n*n);return l},Lp=function(){return Math.random()},Ip=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Lp),Np=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=i)a=i,i=null;else do{i=2*e()-1,a=2*e()-1,r=i*i+a*a}while(!r||r>1);return t+n*a*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(Lp),Rp=function t(e){function n(){var t=Np.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Lp),Dp=function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(Lp),zp=function t(e){function n(t){var n=Dp.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Lp),Bp=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Lp);function Fp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function jp(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Vp=Array.prototype,Up=Vp.map,Hp=Vp.slice,Gp={name:"implicit"};function Wp(){var t=Zr(),e=[],n=[],i=Gp;function r(r){var a=r+"",o=t.get(a);if(!o){if(i!==Gp)return i;t.set(a,o=e.push(r))}return n[(o-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Zr();for(var i,a,o=-1,s=n.length;++o<s;)t.has(a=(i=n[o])+"")||t.set(a,e.push(i));return r},r.range=function(t){return arguments.length?(n=Hp.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Wp(e,n).unknown(i)},Fp.apply(r,arguments),r}function qp(){var t,e,n=Wp().unknown(void 0),i=n.domain,r=n.range,a=[0,1],o=!1,s=0,l=0,u=.5;function c(){var n=i().length,c=a[1]<a[0],h=a[c-0],f=a[1-c];t=(f-h)/Math.max(1,n-s+2*l),o&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*u,e=t*(1-s),o&&(h=Math.round(h),e=Math.round(e));var d=w(n).map((function(e){return h+t*e}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),c()):i()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,c()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,l=+t),c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),c()):s},n.paddingOuter=function(t){return arguments.length?(l=+t,c()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.copy=function(){return qp(i(),a).round(o).paddingInner(s).paddingOuter(l).align(u)},Fp.apply(c(),arguments)}function $p(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return $p(e())},t}function Qp(){return $p(qp.apply(null,arguments).paddingInner(1))}var Yp=function(t){return+t},Xp=[0,1];function Zp(t){return t}function Jp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Kp(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function tm(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=Jp(r,i),a=n(o,a)):(i=Jp(i,r),a=n(a,o)),function(t){return a(i(t))}}function em(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Jp(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=l(t,e,1,i)-1;return a[n](r[n](e))}}function nm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function im(){var t,e,n,i,r,a,o=Xp,s=Xp,l=kn,u=Zp;function c(){return i=Math.min(o.length,s.length)>2?em:tm,r=a=null,h}function h(e){return isNaN(e=+e)?n:(r||(r=i(o.map(t),s,l)))(t(u(e)))}return h.invert=function(n){return u(e((a||(a=i(s,o.map(t),_n)))(n)))},h.domain=function(t){return arguments.length?(o=Up.call(t,Yp),u===Zp||(u=Kp(o)),c()):o.slice()},h.range=function(t){return arguments.length?(s=Hp.call(t),c()):s.slice()},h.rangeRound=function(t){return s=Hp.call(t),l=up,c()},h.clamp=function(t){return arguments.length?(u=t?Kp(o):Zp,h):u!==Zp},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,c()}}function rm(t,e){return im()(t,e)}var am=function(t,e,n,i){var r,a=k(t,e,n);switch((i=Ws(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=al(a,o))||(i.precision=r),Xs(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=ol(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=rl(a))||(i.precision=r-2*("%"===i.type))}return Ys(i)};function om(t){var e=t.domain;return t.ticks=function(t){var n=e();return T(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return am(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),a=0,o=r.length-1,s=r[a],l=r[o];return l<s&&(i=s,s=l,l=i,i=a,a=o,o=i),(i=C(s,l,n))>0?i=C(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=C(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[a]=Math.floor(s/i)*i,r[o]=Math.ceil(l/i)*i,e(r)):i<0&&(r[a]=Math.ceil(s*i)/i,r[o]=Math.floor(l*i)/i,e(r)),t},t}function sm(){var t=rm(Zp,Zp);return t.copy=function(){return nm(t,sm())},Fp.apply(t,arguments),om(t)}function lm(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Up.call(e,Yp),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return lm(t).unknown(e)},t=arguments.length?Up.call(t,Yp):[0,1],om(n)}var um=function(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t};function cm(t){return Math.log(t)}function hm(t){return Math.exp(t)}function fm(t){return-Math.log(-t)}function dm(t){return-Math.exp(-t)}function pm(t){return isFinite(t)?+("1e"+t):t<0?0:t}function mm(t){return function(e){return-t(-e)}}function vm(t){var e,n,i=t(cm,hm),r=i.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?pm:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),r()[0]<0?(e=mm(e),n=mm(n),t(fm,dm)):t(cm,hm),i}return i.base=function(t){return arguments.length?(a=+t,o()):a},i.domain=function(t){return arguments.length?(r(t),o()):r()},i.ticks=function(t){var i,o=r(),s=o[0],l=o[o.length-1];(i=l<s)&&(f=s,s=l,l=f);var u,c,h,f=e(s),d=e(l),p=null==t?10:+t,m=[];if(!(a%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,s>0){for(;f<d;++f)for(c=1,u=n(f);c<a;++c)if(!((h=u*c)<s)){if(h>l)break;m.push(h)}}else for(;f<d;++f)for(c=a-1,u=n(f);c>=1;--c)if(!((h=u*c)<s)){if(h>l)break;m.push(h)}}else m=T(f,d,Math.min(d-f,p)).map(n);return i?m.reverse():m},i.tickFormat=function(t,r){if(null==r&&(r=10===a?".0e":","),"function"!=typeof r&&(r=Ys(r)),t===1/0)return r;null==t&&(t=10);var o=Math.max(1,a*t/i.ticks().length);return function(t){var i=t/n(Math.round(e(t)));return i*a<a-.5&&(i*=a),i<=o?r(t):""}},i.nice=function(){return r(um(r(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},i}function gm(){var t=vm(im()).domain([1,10]);return t.copy=function(){return nm(t,gm()).base(t.base())},Fp.apply(t,arguments),t}function ym(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bm(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xm(t){var e=1,n=t(ym(e),bm(e));return n.constant=function(n){return arguments.length?t(ym(e=+n),bm(e)):e},om(n)}function _m(){var t=xm(im());return t.copy=function(){return nm(t,_m()).constant(t.constant())},Fp.apply(t,arguments)}function wm(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Sm(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Em(t){return t<0?-t*t:t*t}function Mm(t){var e=t(Zp,Zp),n=1;function i(){return 1===n?t(Zp,Zp):.5===n?t(Sm,Em):t(wm(n),wm(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},om(e)}function Tm(){var t=Mm(im());return t.copy=function(){return nm(t,Tm()).exponent(t.exponent())},Fp.apply(t,arguments),t}function Cm(){return Tm.apply(null,arguments).exponent(.5)}function km(){var t,e=[],n=[],r=[];function a(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=O(e,t/i);return o}function o(e){return isNaN(e=+e)?t:n[l(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,o=t.length;r<o;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(i),a()},o.range=function(t){return arguments.length?(n=Hp.call(t),a()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return km().domain(e).range(n).unknown(t)},Fp.apply(o,arguments)}function Pm(){var t,e=0,n=1,i=1,r=[.5],a=[0,1];function o(e){return e<=e?a[l(r,e,0,i)]:t}function s(){var t=-1;for(r=new Array(i);++t<i;)r[t]=((t+1)*n-(t-i)*e)/(i+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},o.range=function(t){return arguments.length?(i=(a=Hp.call(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,r[0]]:o>=i?[r[i-1],n]:[r[o-1],r[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return r.slice()},o.copy=function(){return Pm().domain([e,n]).range(a).unknown(t)},Fp.apply(om(o),arguments)}function Am(){var t,e=[.5],n=[0,1],i=1;function r(r){return r<=r?n[l(e,r,0,i)]:t}return r.domain=function(t){return arguments.length?(e=Hp.call(t),i=Math.min(e.length,n.length-1),r):e.slice()},r.range=function(t){return arguments.length?(n=Hp.call(t),i=Math.min(e.length,n.length-1),r):n.slice()},r.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Am().domain(e).range(n).unknown(t)},Fp.apply(r,arguments)}var Om=new Date,Lm=new Date;function Im(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<i);return s},r.filter=function(n){return Im((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return Om.setTime(+e),Lm.setTime(+i),t(Om),t(Lm),Math.floor(n(Om,Lm))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Nm=Im((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Nm.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Im((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Rm=Nm,Dm=Nm.range,zm=Im((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Bm=zm,Fm=zm.range;function jm(t){return Im((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Vm=jm(0),Um=jm(1),Hm=jm(2),Gm=jm(3),Wm=jm(4),qm=jm(5),$m=jm(6),Qm=Vm.range,Ym=Um.range,Xm=Hm.range,Zm=Gm.range,Jm=Wm.range,Km=qm.range,tv=$m.range,ev=Im((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),nv=ev,iv=ev.range,rv=Im((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),av=rv,ov=rv.range,sv=Im((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),lv=sv,uv=sv.range,cv=Im((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),hv=cv,fv=cv.range,dv=Im((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));dv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Im((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):dv:null};var pv=dv,mv=dv.range;function vv(t){return Im((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var gv=vv(0),yv=vv(1),bv=vv(2),xv=vv(3),_v=vv(4),wv=vv(5),Sv=vv(6),Ev=gv.range,Mv=yv.range,Tv=bv.range,Cv=xv.range,kv=_v.range,Pv=wv.range,Av=Sv.range,Ov=Im((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),Lv=Ov,Iv=Ov.range,Nv=Im((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Nv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Im((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Rv=Nv,Dv=Nv.range;function zv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Bv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Fv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function jv(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Jv(r),c=Kv(r),h=Jv(a),f=Kv(a),d=Jv(o),p=Kv(o),m=Jv(s),v=Kv(s),g=Jv(l),y=Kv(l),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:xg,e:xg,f:Mg,H:_g,I:wg,j:Sg,L:Eg,m:Tg,M:Cg,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ey,s:ny,S:kg,u:Pg,U:Ag,V:Og,w:Lg,W:Ig,x:null,X:null,y:Ng,Y:Rg,Z:Dg,"%":ty},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:zg,e:zg,f:Ug,H:Bg,I:Fg,j:jg,L:Vg,m:Hg,M:Gg,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ey,s:ny,S:Wg,u:qg,U:$g,V:Qg,w:Yg,W:Xg,x:null,X:null,y:Zg,Y:Jg,Z:Kg,"%":ty},_={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=v[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return E(t,e,n,i)},d:cg,e:cg,f:vg,H:fg,I:fg,j:hg,L:mg,m:ug,M:dg,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=c[i[0].toLowerCase()],n+i[0].length):-1},q:lg,Q:yg,s:bg,S:pg,u:eg,U:ng,V:ig,w:tg,W:rg,x:function(t,e,i){return E(t,n,e,i)},X:function(t,e,n){return E(t,i,e,n)},y:og,Y:ag,Z:sg,"%":gg};function w(t,e){return function(n){var i,r,a,o=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(r=qv[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(a=e[i])&&(i=a(n,r)),o.push(i),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function S(t,e){return function(n){var i,r,a=Fv(1900,void 0,1);if(E(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(!e||"Z"in a||(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(i=Bv(Fv(a.y,0,1))).getUTCDay(),i=r>4||0===r?yv.ceil(i):yv(i),i=Lv.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(r=(i=zv(Fv(a.y,0,1))).getDay(),i=r>4||0===r?Um.ceil(i):Um(i),i=nv.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?Bv(Fv(a.y,0,1)).getUTCDay():zv(Fv(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Bv(a)):zv(a)}}function E(t,e,n,i){for(var r,a,o=0,s=e.length,l=n.length;o<s;){if(i>=l)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=_[r in qv?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return(b.x=w(n,b),b.X=w(i,b),b.c=w(e,b),x.x=w(n,x),x.X=w(i,x),x.c=w(e,x),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}})}var Vv,Uv,Hv,Gv,Wv,qv={"-":"",_:" ",0:"0"},$v=/^\s*\d+/,Qv=/^%/,Yv=/[\\^$*+?|[\]().{}]/g;function Xv(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function Zv(t){return t.replace(Yv,"\\$&")}function Jv(t){return new RegExp("^(?:"+t.map(Zv).join("|")+")","i")}function Kv(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function tg(t,e,n){var i=$v.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function eg(t,e,n){var i=$v.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function ng(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function ig(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function rg(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function ag(t,e,n){var i=$v.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function og(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function sg(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function lg(t,e,n){var i=$v.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function ug(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function cg(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function hg(t,e,n){var i=$v.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function fg(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function dg(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function pg(t,e,n){var i=$v.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function mg(t,e,n){var i=$v.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function vg(t,e,n){var i=$v.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function gg(t,e,n){var i=Qv.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function yg(t,e,n){var i=$v.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function bg(t,e,n){var i=$v.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function xg(t,e){return Xv(t.getDate(),e,2)}function _g(t,e){return Xv(t.getHours(),e,2)}function wg(t,e){return Xv(t.getHours()%12||12,e,2)}function Sg(t,e){return Xv(1+nv.count(Rm(t),t),e,3)}function Eg(t,e){return Xv(t.getMilliseconds(),e,3)}function Mg(t,e){return Eg(t,e)+"000"}function Tg(t,e){return Xv(t.getMonth()+1,e,2)}function Cg(t,e){return Xv(t.getMinutes(),e,2)}function kg(t,e){return Xv(t.getSeconds(),e,2)}function Pg(t){var e=t.getDay();return 0===e?7:e}function Ag(t,e){return Xv(Vm.count(Rm(t)-1,t),e,2)}function Og(t,e){var n=t.getDay();return t=n>=4||0===n?Wm(t):Wm.ceil(t),Xv(Wm.count(Rm(t),t)+(4===Rm(t).getDay()),e,2)}function Lg(t){return t.getDay()}function Ig(t,e){return Xv(Um.count(Rm(t)-1,t),e,2)}function Ng(t,e){return Xv(t.getFullYear()%100,e,2)}function Rg(t,e){return Xv(t.getFullYear()%1e4,e,4)}function Dg(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xv(e/60|0,"0",2)+Xv(e%60,"0",2)}function zg(t,e){return Xv(t.getUTCDate(),e,2)}function Bg(t,e){return Xv(t.getUTCHours(),e,2)}function Fg(t,e){return Xv(t.getUTCHours()%12||12,e,2)}function jg(t,e){return Xv(1+Lv.count(Rv(t),t),e,3)}function Vg(t,e){return Xv(t.getUTCMilliseconds(),e,3)}function Ug(t,e){return Vg(t,e)+"000"}function Hg(t,e){return Xv(t.getUTCMonth()+1,e,2)}function Gg(t,e){return Xv(t.getUTCMinutes(),e,2)}function Wg(t,e){return Xv(t.getUTCSeconds(),e,2)}function qg(t){var e=t.getUTCDay();return 0===e?7:e}function $g(t,e){return Xv(gv.count(Rv(t)-1,t),e,2)}function Qg(t,e){var n=t.getUTCDay();return t=n>=4||0===n?_v(t):_v.ceil(t),Xv(_v.count(Rv(t),t)+(4===Rv(t).getUTCDay()),e,2)}function Yg(t){return t.getUTCDay()}function Xg(t,e){return Xv(yv.count(Rv(t)-1,t),e,2)}function Zg(t,e){return Xv(t.getUTCFullYear()%100,e,2)}function Jg(t,e){return Xv(t.getUTCFullYear()%1e4,e,4)}function Kg(){return"+0000"}function ty(){return"%"}function ey(t){return+t}function ny(t){return Math.floor(+t/1e3)}function iy(t){return Vv=jv(t),Uv=Vv.format,Hv=Vv.parse,Gv=Vv.utcFormat,Wv=Vv.utcParse,Vv}iy({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ry(t){return new Date(t)}function ay(t){return t instanceof Date?+t:+new Date(+t)}function oy(t,e,n,i,a,o,s,l,u){var c=rm(Zp,Zp),h=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),v=u("%I %p"),g=u("%a %d"),y=u("%b %d"),b=u("%B"),x=u("%Y"),_=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,36e5],[a,3,108e5],[a,6,216e5],[a,12,432e5],[i,1,864e5],[i,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function w(r){return(s(r)<r?d:o(r)<r?p:a(r)<r?m:i(r)<r?v:e(r)<r?n(r)<r?g:y:t(r)<r?b:x)(r)}function S(e,n,i,a){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(i-n)/e,s=r((function(t){return t[2]})).right(_,o);s===_.length?(a=k(n/31536e6,i/31536e6,e),e=t):s?(a=(s=_[o/_[s-1][2]<_[s][2]/o?s-1:s])[1],e=s[0]):(a=Math.max(k(n,i,e),1),e=l)}return null==a?e:e.every(a)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(Up.call(t,ay)):f().map(ry)},c.ticks=function(t,e){var n,i=f(),r=i[0],a=i[i.length-1],o=a<r;return o&&(n=r,r=a,a=n),n=(n=S(t,r,a,e))?n.range(r,a+1):[],o?n.reverse():n},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t,e){var n=f();return(t=S(t,n[0],n[n.length-1],e))?f(um(n,t)):c},c.copy=function(){return nm(c,oy(t,e,n,i,a,o,s,l,u))},c}var sy=function(){return Fp.apply(oy(Rm,Bm,Vm,nv,av,lv,hv,pv,Uv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},ly=Im((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),uy=ly,cy=ly.range,hy=Im((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),fy=hy,dy=hy.range,py=Im((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),my=py,vy=py.range,gy=function(){return Fp.apply(oy(Rv,uy,gv,Lv,fy,my,hv,pv,Gv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function yy(){var t,e,n,i,r,a=0,o=1,s=Zp,l=!1;function u(e){return isNaN(e=+e)?r:s(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}return u.domain=function(r){return arguments.length?(t=i(a=+r[0]),e=i(o=+r[1]),n=t===e?0:1/(e-t),u):[a,o]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(s=t,u):s},u.unknown=function(t){return arguments.length?(r=t,u):r},function(r){return i=r,t=r(a),e=r(o),n=t===e?0:1/(e-t),u}}function by(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xy(){var t=om(yy()(Zp));return t.copy=function(){return by(t,xy())},jp.apply(t,arguments)}function _y(){var t=vm(yy()).domain([1,10]);return t.copy=function(){return by(t,_y()).base(t.base())},jp.apply(t,arguments)}function wy(){var t=xm(yy());return t.copy=function(){return by(t,wy()).constant(t.constant())},jp.apply(t,arguments)}function Sy(){var t=Mm(yy());return t.copy=function(){return by(t,Sy()).exponent(t.exponent())},jp.apply(t,arguments)}function Ey(){return Sy.apply(null,arguments).exponent(.5)}function My(){var t=[],e=Zp;function n(n){if(!isNaN(n=+n))return e((l(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,a=0,o=e.length;a<o;++a)null==(r=e[a])||isNaN(r=+r)||t.push(r);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return My(e).domain(t)},jp.apply(n,arguments)}function Ty(){var t,e,n,i,r,a,o,s=0,l=.5,u=1,c=Zp,h=!1;function f(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(t<e?i:r),c(h?Math.max(0,Math.min(1,t)):t))}return f.domain=function(o){return arguments.length?(t=a(s=+o[0]),e=a(l=+o[1]),n=a(u=+o[2]),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),f):[s,l,u]},f.clamp=function(t){return arguments.length?(h=!!t,f):h},f.interpolator=function(t){return arguments.length?(c=t,f):c},f.unknown=function(t){return arguments.length?(o=t,f):o},function(o){return a=o,t=o(s),e=o(l),n=o(u),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),f}}function Cy(){var t=om(Ty()(Zp));return t.copy=function(){return by(t,Cy())},jp.apply(t,arguments)}function ky(){var t=vm(Ty()).domain([.1,1,10]);return t.copy=function(){return by(t,ky()).base(t.base())},jp.apply(t,arguments)}function Py(){var t=xm(Ty());return t.copy=function(){return by(t,Py()).constant(t.constant())},jp.apply(t,arguments)}function Ay(){var t=Mm(Ty());return t.copy=function(){return by(t,Ay()).exponent(t.exponent())},jp.apply(t,arguments)}function Oy(){return Ay.apply(null,arguments).exponent(.5)}var Ly=function(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n},Iy=Ly("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ny=Ly("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ry=Ly("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Dy=Ly("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),zy=Ly("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),By=Ly("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Fy=Ly("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),jy=Ly("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Vy=Ly("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Uy=Ly("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Hy=function(t){return pn(t[t.length-1])},Gy=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ly),Wy=Hy(Gy),qy=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ly),$y=Hy(qy),Qy=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ly),Yy=Hy(Qy),Xy=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ly),Zy=Hy(Xy),Jy=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ly),Ky=Hy(Jy),tb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ly),eb=Hy(tb),nb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ly),ib=Hy(nb),rb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ly),ab=Hy(rb),ob=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ly),sb=Hy(ob),lb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ly),ub=Hy(lb),cb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ly),hb=Hy(cb),fb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ly),db=Hy(fb),pb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ly),mb=Hy(pb),vb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ly),gb=Hy(vb),yb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ly),bb=Hy(yb),xb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ly),_b=Hy(xb),wb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ly),Sb=Hy(wb),Eb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ly),Mb=Hy(Eb),Tb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ly),Cb=Hy(Tb),kb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ly),Pb=Hy(kb),Ab=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ly),Ob=Hy(Ab),Lb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ly),Ib=Hy(Lb),Nb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ly),Rb=Hy(Nb),Db=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ly),zb=Hy(Db),Bb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ly),Fb=Hy(Bb),jb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ly),Vb=Hy(jb),Ub=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ly),Hb=Hy(Ub),Gb=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},Wb=wp(Aa(300,.5,0),Aa(-240,.5,1)),qb=wp(Aa(-100,.75,.35),Aa(80,1.5,.8)),$b=wp(Aa(260,.75,.35),Aa(80,1.5,.8)),Qb=Aa(),Yb=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Qb.h=360*t-100,Qb.s=1.5-1.5*e,Qb.l=.8-.9*e,Qb+""},Xb=$e(),Zb=Math.PI/3,Jb=2*Math.PI/3,Kb=function(t){var e;return t=(.5-t)*Math.PI,Xb.r=255*(e=Math.sin(t))*e,Xb.g=255*(e=Math.sin(t+Zb))*e,Xb.b=255*(e=Math.sin(t+Jb))*e,Xb+""},tx=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function ex(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var nx=ex(Ly("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ix=ex(Ly("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),rx=ex(Ly("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ax=ex(Ly("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),ox=function(t){return we(ne(t).call(document.documentElement))},sx=0;function lx(){return new ux}function ux(){this._="@"+(++sx).toString(36)}ux.prototype=lx.prototype={constructor:ux,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var cx=function(t){return"string"==typeof t?new be([document.querySelectorAll(t)],[document.documentElement]):new be([null==t?[]:t],ye)},hx=function(t,e){null==e&&(e=Pn().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=An(t,e[n]);return r},fx=function(t){return function(){return t}},dx=Math.abs,px=Math.atan2,mx=Math.cos,vx=Math.max,gx=Math.min,yx=Math.sin,bx=Math.sqrt,xx=Math.PI,_x=xx/2,wx=2*xx;function Sx(t){return t>1?0:t<-1?xx:Math.acos(t)}function Ex(t){return t>=1?_x:t<=-1?-_x:Math.asin(t)}function Mx(t){return t.innerRadius}function Tx(t){return t.outerRadius}function Cx(t){return t.startAngle}function kx(t){return t.endAngle}function Px(t){return t&&t.padAngle}function Ax(t,e,n,i,r,a,o,s){var l=n-t,u=i-e,c=o-r,h=s-a,f=h*l-c*u;if(!(f*f<1e-12))return[t+(f=(c*(e-a)-h*(t-r))/f)*l,e+f*u]}function Ox(t,e,n,i,r,a,o){var s=t-n,l=e-i,u=(o?a:-a)/bx(s*s+l*l),c=u*l,h=-u*s,f=t+c,d=e+h,p=n+c,m=i+h,v=(f+p)/2,g=(d+m)/2,y=p-f,b=m-d,x=y*y+b*b,_=r-a,w=f*m-p*d,S=(b<0?-1:1)*bx(vx(0,_*_*x-w*w)),E=(w*b-y*S)/x,M=(-w*y-b*S)/x,T=(w*b+y*S)/x,C=(-w*y+b*S)/x,k=E-v,P=M-g,A=T-v,O=C-g;return k*k+P*P>A*A+O*O&&(E=T,M=C),{cx:E,cy:M,x01:-c,y01:-h,x11:E*(r/_-1),y11:M*(r/_-1)}}var Lx=function(){var t=Mx,e=Tx,n=fx(0),i=null,r=Cx,a=kx,o=Px,s=null;function l(){var l,u,c=+t.apply(this,arguments),h=+e.apply(this,arguments),f=r.apply(this,arguments)-_x,d=a.apply(this,arguments)-_x,p=dx(d-f),m=d>f;if(s||(s=l=Ur()),h<c&&(u=h,h=c,c=u),h>1e-12)if(p>wx-1e-12)s.moveTo(h*mx(f),h*yx(f)),s.arc(0,0,h,f,d,!m),c>1e-12&&(s.moveTo(c*mx(d),c*yx(d)),s.arc(0,0,c,d,f,m));else{var v,g,y=f,b=d,x=f,_=d,w=p,S=p,E=o.apply(this,arguments)/2,M=E>1e-12&&(i?+i.apply(this,arguments):bx(c*c+h*h)),T=gx(dx(h-c)/2,+n.apply(this,arguments)),C=T,k=T;if(M>1e-12){var P=Ex(M/c*yx(E)),A=Ex(M/h*yx(E));(w-=2*P)>1e-12?(x+=P*=m?1:-1,_-=P):(w=0,x=_=(f+d)/2),(S-=2*A)>1e-12?(y+=A*=m?1:-1,b-=A):(S=0,y=b=(f+d)/2)}var O=h*mx(y),L=h*yx(y),I=c*mx(_),N=c*yx(_);if(T>1e-12){var R,D=h*mx(b),z=h*yx(b),B=c*mx(x),F=c*yx(x);if(p<xx&&(R=Ax(O,L,B,F,D,z,I,N))){var j=O-R[0],V=L-R[1],U=D-R[0],H=z-R[1],G=1/yx(Sx((j*U+V*H)/(bx(j*j+V*V)*bx(U*U+H*H)))/2),W=bx(R[0]*R[0]+R[1]*R[1]);C=gx(T,(c-W)/(G-1)),k=gx(T,(h-W)/(G+1))}}S>1e-12?k>1e-12?(v=Ox(B,F,O,L,h,k,m),g=Ox(D,z,I,N,h,k,m),s.moveTo(v.cx+v.x01,v.cy+v.y01),k<T?s.arc(v.cx,v.cy,k,px(v.y01,v.x01),px(g.y01,g.x01),!m):(s.arc(v.cx,v.cy,k,px(v.y01,v.x01),px(v.y11,v.x11),!m),s.arc(0,0,h,px(v.cy+v.y11,v.cx+v.x11),px(g.cy+g.y11,g.cx+g.x11),!m),s.arc(g.cx,g.cy,k,px(g.y11,g.x11),px(g.y01,g.x01),!m))):(s.moveTo(O,L),s.arc(0,0,h,y,b,!m)):s.moveTo(O,L),c>1e-12&&w>1e-12?C>1e-12?(v=Ox(I,N,D,z,c,-C,m),g=Ox(O,L,B,F,c,-C,m),s.lineTo(v.cx+v.x01,v.cy+v.y01),C<T?s.arc(v.cx,v.cy,C,px(v.y01,v.x01),px(g.y01,g.x01),!m):(s.arc(v.cx,v.cy,C,px(v.y01,v.x01),px(v.y11,v.x11),!m),s.arc(0,0,c,px(v.cy+v.y11,v.cx+v.x11),px(g.cy+g.y11,g.cx+g.x11),m),s.arc(g.cx,g.cy,C,px(g.y11,g.x11),px(g.y01,g.x01),!m))):s.arc(0,0,c,_,x,m):s.lineTo(I,N)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-xx/2;return[mx(i)*n,yx(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:fx(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:fx(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:fx(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:fx(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:fx(+t),l):r},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:fx(+t),l):a},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:fx(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l};function Ix(t){this._context=t}Ix.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Nx=function(t){return new Ix(t)};function Rx(t){return t[0]}function Dx(t){return t[1]}var zx=function(){var t=Rx,e=Dx,n=fx(!0),i=null,r=Nx,a=null;function o(o){var s,l,u,c=o.length,h=!1;for(null==i&&(a=r(u=Ur())),s=0;s<=c;++s)!(s<c&&n(l=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(l,s,o),+e(l,s,o));if(u)return a=null,u+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:fx(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:fx(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:fx(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(a=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=a=null:a=r(i=t),o):i},o},Bx=function(){var t=Rx,e=null,n=fx(0),i=Dx,r=fx(!0),a=null,o=Nx,s=null;function l(l){var u,c,h,f,d,p=l.length,m=!1,v=new Array(p),g=new Array(p);for(null==a&&(s=o(d=Ur())),u=0;u<=p;++u){if(!(u<p&&r(f=l[u],u,l))===m)if(m=!m)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=c;--h)s.point(v[h],g[h]);s.lineEnd(),s.areaEnd()}m&&(v[u]=+t(f,u,l),g[u]=+n(f,u,l),s.point(e?+e(f,u,l):v[u],i?+i(f,u,l):g[u]))}if(d)return s=null,d+""||null}function u(){return zx().defined(r).curve(o).context(a)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:fx(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:fx(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:fx(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:fx(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:fx(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:fx(+t),l):i},l.lineX0=l.lineY0=function(){return u().x(t).y(n)},l.lineY1=function(){return u().x(t).y(i)},l.lineX1=function(){return u().x(e).y(n)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:fx(!!t),l):r},l.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),l):o},l.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),l):a},l},Fx=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},jx=function(t){return t},Vx=function(){var t=jx,e=Fx,n=null,i=fx(0),r=fx(wx),a=fx(0);function o(o){var s,l,u,c,h,f=o.length,d=0,p=new Array(f),m=new Array(f),v=+i.apply(this,arguments),g=Math.min(wx,Math.max(-wx,r.apply(this,arguments)-v)),y=Math.min(Math.abs(g)/f,a.apply(this,arguments)),b=y*(g<0?-1:1);for(s=0;s<f;++s)(h=m[p[s]=s]=+t(o[s],s,o))>0&&(d+=h);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(o[t],o[e])})),s=0,u=d?(g-f*b)/d:0;s<f;++s,v=c)l=p[s],c=v+((h=m[l])>0?h*u:0)+b,m[l]={data:o[l],index:s,value:h,startAngle:v,endAngle:c,padAngle:y};return m}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:fx(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:fx(+t),o):i},o.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:fx(+t),o):r},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:fx(+t),o):a},o},Ux=Gx(Nx);function Hx(t){this._curve=t}function Gx(t){function e(e){return new Hx(t(e))}return e._curve=t,e}function Wx(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Gx(t)):e()._curve},t}Hx.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var qx=function(){return Wx(zx().curve(Ux))},$x=function(){var t=Bx().curve(Ux),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Wx(n())},delete t.lineX0,t.lineEndAngle=function(){return Wx(i())},delete t.lineX1,t.lineInnerRadius=function(){return Wx(r())},delete t.lineY0,t.lineOuterRadius=function(){return Wx(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Gx(t)):e()._curve},t},Qx=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Yx=Array.prototype.slice;function Xx(t){return t.source}function Zx(t){return t.target}function Jx(t){var e=Xx,n=Zx,i=Rx,r=Dx,a=null;function o(){var o,s=Yx.call(arguments),l=e.apply(this,s),u=n.apply(this,s);if(a||(a=o=Ur()),t(a,+i.apply(this,(s[0]=l,s)),+r.apply(this,s),+i.apply(this,(s[0]=u,s)),+r.apply(this,s)),o)return a=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(i="function"==typeof t?t:fx(+t),o):i},o.y=function(t){return arguments.length?(r="function"==typeof t?t:fx(+t),o):r},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}function Kx(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function t_(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function e_(t,e,n,i,r){var a=Qx(e,n),o=Qx(e,n=(n+r)/2),s=Qx(i,n),l=Qx(i,r);t.moveTo(a[0],a[1]),t.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function n_(){return Jx(Kx)}function i_(){return Jx(t_)}function r_(){var t=Jx(e_);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var a_={draw:function(t,e){var n=Math.sqrt(e/xx);t.moveTo(n,0),t.arc(0,0,n,0,wx)}},o_={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},s_=Math.sqrt(1/3),l_=2*s_,u_={draw:function(t,e){var n=Math.sqrt(e/l_),i=n*s_;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},c_=Math.sin(xx/10)/Math.sin(7*xx/10),h_=Math.sin(wx/10)*c_,f_=-Math.cos(wx/10)*c_,d_={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=h_*n,r=f_*n;t.moveTo(0,-n),t.lineTo(i,r);for(var a=1;a<5;++a){var o=wx*a/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n),t.lineTo(s*i-l*r,l*i+s*r)}t.closePath()}},p_={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},m_=Math.sqrt(3),v_={draw:function(t,e){var n=-Math.sqrt(e/(3*m_));t.moveTo(0,2*n),t.lineTo(-m_*n,-n),t.lineTo(m_*n,-n),t.closePath()}},g_=Math.sqrt(3)/2,y_=1/Math.sqrt(12),b_=3*(y_/2+1),x_={draw:function(t,e){var n=Math.sqrt(e/b_),i=n/2,r=n*y_,a=i,o=n*y_+n,s=-a,l=o;t.moveTo(i,r),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(-.5*i-g_*r,g_*i+-.5*r),t.lineTo(-.5*a-g_*o,g_*a+-.5*o),t.lineTo(-.5*s-g_*l,g_*s+-.5*l),t.lineTo(-.5*i+g_*r,-.5*r-g_*i),t.lineTo(-.5*a+g_*o,-.5*o-g_*a),t.lineTo(-.5*s+g_*l,-.5*l-g_*s),t.closePath()}},__=[a_,o_,u_,p_,d_,v_,x_],w_=function(){var t=fx(a_),e=fx(64),n=null;function i(){var i;if(n||(n=i=Ur()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:fx(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:fx(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},S_=function(){};function E_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function M_(t){this._context=t}M_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var T_=function(t){return new M_(t)};function C_(t){this._context=t}C_.prototype={areaStart:S_,areaEnd:S_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:E_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var k_=function(t){return new C_(t)};function P_(t){this._context=t}P_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:E_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var A_=function(t){return new P_(t)};function O_(t,e){this._basis=new M_(t),this._beta=e}O_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],a=e[0],o=t[n]-r,s=e[n]-a,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*o),this._beta*e[l]+(1-this._beta)*(a+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var L_=function t(e){function n(t){return 1===e?new M_(t):new O_(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function I_(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function N_(t,e){this._context=t,this._k=(1-e)/6}N_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:I_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:I_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var R_=function t(e){function n(t){return new N_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function D_(t,e){this._context=t,this._k=(1-e)/6}D_.prototype={areaStart:S_,areaEnd:S_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:I_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var z_=function t(e){function n(t){return new D_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function B_(t,e){this._context=t,this._k=(1-e)/6}B_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:I_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var F_=function t(e){function n(t){return new B_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function j_(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}function V_(t,e){this._context=t,this._alpha=e}V_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:j_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var U_=function t(e){function n(t){return e?new V_(t,e):new N_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function H_(t,e){this._context=t,this._alpha=e}H_.prototype={areaStart:S_,areaEnd:S_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:j_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var G_=function t(e){function n(t){return e?new H_(t,e):new D_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function W_(t,e){this._context=t,this._alpha=e}W_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:j_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var q_=function t(e){function n(t){return e?new W_(t,e):new B_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function $_(t){this._context=t}$_.prototype={areaStart:S_,areaEnd:S_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Q_=function(t){return new $_(t)};function Y_(t){return t<0?-1:1}function X_(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Y_(a)+Y_(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Z_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function J_(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function K_(t){this._context=t}function tw(t){this._context=new ew(t)}function ew(t){this._context=t}function nw(t){return new K_(t)}function iw(t){return new tw(t)}function rw(t){this._context=t}function aw(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(r[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;e>=0;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}K_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:J_(this,this._t0,Z_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,J_(this,Z_(this,n=X_(this,t,e)),n);break;default:J_(this,this._t0,n=X_(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(tw.prototype=Object.create(K_.prototype)).point=function(t,e){K_.prototype.point.call(this,e,t)},ew.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},rw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=aw(t),r=aw(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ow=function(t){return new rw(t)};function sw(t,e){this._context=t,this._t=e}sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var lw=function(t){return new sw(t,.5)};function uw(t){return new sw(t,0)}function cw(t){return new sw(t,1)}var hw=function(t,e){if((r=t.length)>1)for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]},fw=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function dw(t,e){return t[e]}var pw=function(){var t=fx([]),e=fw,n=hw,i=dw;function r(r){var a,o,s=t.apply(this,arguments),l=r.length,u=s.length,c=new Array(u);for(a=0;a<u;++a){for(var h,f=s[a],d=c[a]=new Array(l),p=0;p<l;++p)d[p]=h=[0,+i(r[p],f,p,r)],h.data=r[p];d.key=f}for(a=0,o=e(c);a<u;++a)c[o[a]].index=a;return n(c,o),c}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:fx(Yx.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:fx(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?fw:"function"==typeof t?t:fx(Yx.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?hw:t,r):n},r},mw=function(t,e){if((i=t.length)>0){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}hw(t,e)}},vw=function(t,e){if((s=t.length)>0)for(var n,i,r,a,o,s,l=0,u=t[e[0]].length;l<u;++l)for(a=o=0,n=0;n<s;++n)(r=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):(i[0]=0,i[1]=r)},gw=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}hw(t,e)}},yw=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,l=0,u=0;s<r;++s){for(var c=t[e[s]],h=c[o][1]||0,f=(h-(c[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}l+=h,u+=f*h}n[o-1][1]+=n[o-1][0]=a,l&&(a-=u/l)}n[o-1][1]+=n[o-1][0]=a,hw(t,e)}},bw=function(t){var e=t.map(xw);return fw(t).sort((function(t,n){return e[t]-e[n]}))};function xw(t){for(var e,n=-1,i=0,r=t.length,a=-1/0;++n<r;)(e=+t[n][1])>a&&(a=e,i=n);return i}var _w=function(t){var e=t.map(ww);return fw(t).sort((function(t,n){return e[t]-e[n]}))};function ww(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}var Sw=function(t){return _w(t).reverse()},Ew=function(t){var e,n,i=t.length,r=t.map(ww),a=bw(t),o=0,s=0,l=[],u=[];for(e=0;e<i;++e)n=a[e],o<s?(o+=r[n],l.push(n)):(s+=r[n],u.push(n));return u.reverse().concat(l)},Mw=function(t){return fw(t).reverse()};var Tw=Date.prototype.toISOString?function(t){return t.toISOString()}:Gv("%Y-%m-%dT%H:%M:%S.%LZ");var Cw=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Wv("%Y-%m-%dT%H:%M:%S.%LZ"),kw=function(t,e,n){var i=new Hn,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?Vn():+n,i.restart((function a(o){o+=r,i.restart(a,r+=e,n),t(o)}),e,n),i)},Pw=function(t){return function(){return t}};function Aw(t){return t[0]}function Ow(t){return t[1]}function Lw(){this._=null}function Iw(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Nw(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Rw(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Dw(t){for(;t.L;)t=t.L;return t}Lw.prototype={constructor:Lw,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Dw(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Nw(this,n),n=(t=n).U),n.C=!1,i.C=!0,Rw(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Rw(this,n),n=(t=n).U),n.C=!1,i.C=!0,Nw(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?Dw(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Nw(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Rw(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Nw(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Rw(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Nw(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Rw(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var zw=Lw;function Bw(t,e,n,i){var r=[null,null],a=lS.push(r)-1;return r.left=t,r.right=e,n&&jw(r,t,e,n),i&&jw(r,e,t,i),oS[t.index].halfedges.push(a),oS[e.index].halfedges.push(a),r}function Fw(t,e,n){var i=[e,n];return i.left=t,i}function jw(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Vw(t,e,n,i,r){var a,o=t[0],s=t[1],l=o[0],u=o[1],c=0,h=1,f=s[0]-l,d=s[1]-u;if(a=e-l,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>c&&(c=a)}if(a=i-l,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<h&&(h=a)}if(a=n-u,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>c&&(c=a)}if(a=r-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<h&&(h=a)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*f,u+c*d]),h<1&&(t[1]=[l+h*f,u+h*d]),!0)}}}}}function Uw(t,e,n,i,r){var a=t[1];if(a)return!0;var o,s,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],d=c[0],p=c[1],m=(h+d)/2,v=(f+p)/2;if(p===f){if(m<e||m>=i)return;if(h>d){if(l){if(l[1]>=r)return}else l=[m,n];a=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];a=[m,n]}}else if(s=v-(o=(h-d)/(p-f))*m,o<-1||o>1)if(h>d){if(l){if(l[1]>=r)return}else l=[(n-s)/o,n];a=[(r-s)/o,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/o,r];a=[(n-s)/o,n]}else if(f<p){if(l){if(l[0]>=i)return}else l=[e,o*e+s];a=[i,o*i+s]}else{if(l){if(l[0]<e)return}else l=[i,o*i+s];a=[e,o*e+s]}return t[0]=l,t[1]=a,!0}function Hw(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Gw(t,e){return e[+(e.left!==t.site)]}function Ww(t,e){return e[+(e.left===t.site)]}var qw,$w=[];function Qw(){Iw(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yw(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r[0],s=r[1],l=i[0]-o,u=i[1]-s,c=a[0]-o,h=a[1]-s,f=2*(l*h-u*c);if(!(f>=-cS)){var d=l*l+u*u,p=c*c+h*h,m=(h*d-u*p)/f,v=(l*p-c*d)/f,g=$w.pop()||new Qw;g.arc=t,g.site=r,g.x=m+o,g.y=(g.cy=v+s)+Math.sqrt(m*m+v*v),t.circle=g;for(var y=null,b=sS._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}sS.insert(y,g),y||(qw=g)}}}}function Xw(t){var e=t.circle;e&&(e.P||(qw=e.N),sS.remove(e),$w.push(e),Iw(e),t.circle=null)}var Zw=[];function Jw(){Iw(this),this.edge=this.site=this.circle=null}function Kw(t){var e=Zw.pop()||new Jw;return e.site=t,e}function tS(t){Xw(t),aS.remove(t),Zw.push(t),Iw(t)}function eS(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],a=t.P,o=t.N,s=[t];tS(t);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<uS&&Math.abs(i-l.circle.cy)<uS;)a=l.P,s.unshift(l),tS(l),l=a;s.unshift(l),Xw(l);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<uS&&Math.abs(i-u.circle.cy)<uS;)o=u.N,s.push(u),tS(u),u=o;s.push(u),Xw(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],jw(u.edge,l.site,u.site,r);l=s[0],(u=s[h-1]).edge=Bw(l.site,u.site,null,r),Yw(l),Yw(u)}function nS(t){for(var e,n,i,r,a=t[0],o=t[1],s=aS._;s;)if((i=iS(s,o)-a)>uS)s=s.L;else{if(!((r=a-rS(s,o))>uS)){i>-uS?(e=s.P,n=s):r>-uS?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){oS[t.index]={site:t,halfedges:[]}}(t);var l=Kw(t);if(aS.insert(e,l),e||n){if(e===n)return Xw(e),n=Kw(e.site),aS.insert(l,n),l.edge=n.edge=Bw(e.site,l.site),Yw(e),void Yw(n);if(n){Xw(e),Xw(n);var u=e.site,c=u[0],h=u[1],f=t[0]-c,d=t[1]-h,p=n.site,m=p[0]-c,v=p[1]-h,g=2*(f*v-d*m),y=f*f+d*d,b=m*m+v*v,x=[(v*y-d*b)/g+c,(f*b-m*y)/g+h];jw(n.edge,u,p,x),l.edge=Bw(u,t,null,x),n.edge=Bw(t,p,null,x),Yw(e),Yw(n)}else l.edge=Bw(e.site,l.site)}}function iS(t,e){var n=t.site,i=n[0],r=n[1],a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-i,h=1/a-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+r-a/2)))/h+i:(i+s)/2}function rS(t,e){var n=t.N;if(n)return iS(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var aS,oS,sS,lS,uS=1e-6,cS=1e-12;function hS(t,e){return e[1]-t[1]||e[0]-t[0]}function fS(t,e){var n,i,r,a=t.sort(hS).pop();for(lS=[],oS=new Array(t.length),aS=new zw,sS=new zw;;)if(r=qw,a&&(!r||a[1]<r.y||a[1]===r.y&&a[0]<r.x))a[0]===n&&a[1]===i||(nS(a),n=a[0],i=a[1]),a=t.pop();else{if(!r)break;eS(r.arc)}if(function(){for(var t,e,n,i,r=0,a=oS.length;r<a;++r)if((t=oS[r])&&(i=(e=t.halfedges).length)){var o=new Array(i),s=new Array(i);for(n=0;n<i;++n)o[n]=n,s[n]=Hw(t,lS[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[o[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,a=lS.length;a--;)Uw(r=lS[a],t,e,n,i)&&Vw(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>uS||Math.abs(r[0][1]-r[1][1])>uS)||delete lS[a]}(o,s,l,u),function(t,e,n,i){var r,a,o,s,l,u,c,h,f,d,p,m,v=oS.length,g=!0;for(r=0;r<v;++r)if(a=oS[r]){for(o=a.site,s=(l=a.halfedges).length;s--;)lS[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)p=(d=Ww(a,lS[l[s]]))[0],m=d[1],h=(c=Gw(a,lS[l[++s%u]]))[0],f=c[1],(Math.abs(p-h)>uS||Math.abs(m-f)>uS)&&(l.splice(s,0,lS.push(Fw(o,d,Math.abs(p-t)<uS&&i-m>uS?[t,Math.abs(h-t)<uS?f:i]:Math.abs(m-i)<uS&&n-p>uS?[Math.abs(f-i)<uS?h:n,i]:Math.abs(p-n)<uS&&m-e>uS?[n,Math.abs(h-n)<uS?f:e]:Math.abs(m-e)<uS&&p-t>uS?[Math.abs(f-e)<uS?h:t,e]:null))-1),++u);u&&(g=!1)}if(g){var y,b,x,_=1/0;for(r=0,g=null;r<v;++r)(a=oS[r])&&(x=(y=(o=a.site)[0]-t)*y+(b=o[1]-e)*b)<_&&(_=x,g=a);if(g){var w=[t,e],S=[t,i],E=[n,i],M=[n,e];g.halfedges.push(lS.push(Fw(o=g.site,w,S))-1,lS.push(Fw(o,S,E))-1,lS.push(Fw(o,E,M))-1,lS.push(Fw(o,M,w))-1)}}for(r=0;r<v;++r)(a=oS[r])&&(a.halfedges.length||delete oS[r])}(o,s,l,u)}this.edges=lS,this.cells=oS,aS=sS=lS=oS=null}fS.prototype={constructor:fS,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Gw(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(a=(r=n.halfedges).length)for(var r,a,o,s,l,u,c=n.site,h=-1,f=e[r[a-1]],d=f.left===c?f.right:f.left;++h<a;)o=d,d=(f=e[r[h]]).left===c?f.right:f.left,o&&d&&i<o.index&&i<d.index&&(l=o,u=d,((s=c)[0]-u[0])*(l[1]-s[1])-(s[0]-l[0])*(u[1]-s[1])<0)&&t.push([c.data,o.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,a=this,o=a._found||0,s=a.cells.length;!(r=a.cells[o]);)if(++o>=s)return null;var l=t-r.site[0],u=e-r.site[1],c=l*l+u*u;do{r=a.cells[i=o],o=null,r.halfedges.forEach((function(n){var i=a.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,o=s.index)}}))}while(null!==o);return a._found=i,null==n||c<=n*n?r.site:null}};var dS=function(){var t=Aw,e=Ow,n=null;function i(i){return new fS(i.map((function(n,r){var a=[Math.round(t(n,r,i)/uS)*uS,Math.round(e(n,r,i)/uS)*uS];return a.index=r,a.data=n,a})),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:Pw(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:Pw(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},pS=function(t){return function(){return t}};function mS(t,e,n){this.target=t,this.type=e,this.transform=n}function vS(t,e,n){this.k=t,this.x=e,this.y=n}vS.prototype={constructor:vS,scale:function(t){return 1===t?this:new vS(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new vS(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gS=new vS(1,0,0);function yS(t){for(;!t.__zoom;)if(!(t=t.parentNode))return gS;return t.__zoom}function bS(){le.stopImmediatePropagation()}yS.prototype=vS.prototype;var xS=function(){le.preventDefault(),le.stopImmediatePropagation()};function _S(){return!le.ctrlKey&&!le.button}function wS(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function SS(){return this.__zoom||gS}function ES(){return-le.deltaY*(1===le.deltaMode?.05:le.deltaMode?1:.002)}function MS(){return navigator.maxTouchPoints||"ontouchstart"in this}function TS(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var CS=function(){var t,e,n=_S,i=wS,r=TS,a=ES,o=MS,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,c=fp,h=ct("start","zoom","end"),f=0;function d(t){t.property("__zoom",SS).on("wheel.zoom",x).on("mousedown.zoom",_).on("dblclick.zoom",w).filter(o).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new vS(e,t.x,t.y)}function m(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new vS(t.k,i,r)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function g(t,e,n){t.on("start.zoom",(function(){y(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){y(this,arguments).end()})).tween("zoom",(function(){var t=this,r=arguments,a=y(t,r),o=i.apply(t,r),s=null==n?v(o):"function"==typeof n?n.apply(t,r):n,l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=t.__zoom,h="function"==typeof e?e.apply(t,r):e,f=c(u.invert(s).concat(l/u.k),h.invert(s).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=l/e[2];t=new vS(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function y(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.extent=i.apply(t,e),this.taps=0}function x(){if(n.apply(this,arguments)){var t=y(this,arguments),e=this.__zoom,i=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,a.apply(this,arguments)))),o=Ln(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===i)return;t.mouse=[o,e.invert(o)],oi(this),t.start()}xS(),t.wheel=setTimeout(u,150),t.zoom("mouse",r(m(p(e,i),t.mouse[0],t.mouse[1]),t.extent,l))}function u(){t.wheel=null,t.end()}}function _(){if(!e&&n.apply(this,arguments)){var t=y(this,arguments,!0),i=we(le.view).on("mousemove.zoom",u,!0).on("mouseup.zoom",c,!0),a=Ln(this),o=le.clientX,s=le.clientY;Me(le.view),bS(),t.mouse=[a,this.__zoom.invert(a)],oi(this),t.start()}function u(){if(xS(),!t.moved){var e=le.clientX-o,n=le.clientY-s;t.moved=e*e+n*n>f}t.zoom("mouse",r(m(t.that.__zoom,t.mouse[0]=Ln(t.that),t.mouse[1]),t.extent,l))}function c(){i.on("mousemove.zoom mouseup.zoom",null),Te(le.view,t.moved),xS(),t.end()}}function w(){if(n.apply(this,arguments)){var t=this.__zoom,e=Ln(this),a=t.invert(e),o=t.k*(le.shiftKey?.5:2),s=r(m(p(t,o),e,a),i.apply(this,arguments),l);xS(),u>0?we(this).transition().duration(u).call(g,s,e):we(this).call(d.transform,s)}}function S(){if(n.apply(this,arguments)){var e,i,r,a,o=le.touches,s=o.length,l=y(this,arguments,le.changedTouches.length===s);for(bS(),i=0;i<s;++i)r=o[i],a=[a=On(this,o,r.identifier),this.__zoom.invert(a),r.identifier],l.touch0?l.touch1||l.touch0[2]===a[2]||(l.touch1=a,l.taps=0):(l.touch0=a,e=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(l.taps<2&&(t=setTimeout((function(){t=null}),500)),oi(this),l.start())}}function E(){if(this.__zooming){var e,n,i,a,o=y(this,arguments),s=le.changedTouches,u=s.length;for(xS(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<u;++e)n=s[e],i=On(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=i:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=i);if(n=o.that.__zoom,o.touch1){var c=o.touch0[0],h=o.touch0[1],f=o.touch1[0],d=o.touch1[1],v=(v=f[0]-c[0])*v+(v=f[1]-c[1])*v,g=(g=d[0]-h[0])*g+(g=d[1]-h[1])*g;n=p(n,Math.sqrt(v/g)),i=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(h[0]+d[0])/2,(h[1]+d[1])/2]}else{if(!o.touch0)return;i=o.touch0[0],a=o.touch0[1]}o.zoom("touch",r(m(n,i,a),o.extent,l))}}function M(){if(this.__zooming){var t,n,i=y(this,arguments),r=le.changedTouches,a=r.length;for(bS(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<a;++t)n=r[t],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var o=we(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return d.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",SS),t!==i?g(t,e,n):i.interrupt().each((function(){y(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},d.scaleBy=function(t,e,n){d.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},d.scaleTo=function(t,e,n){d.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,o=null==n?v(t):"function"==typeof n?n.apply(this,arguments):n,s=a.invert(o),u="function"==typeof e?e.apply(this,arguments):e;return r(m(p(a,u),o,s),t,l)}),n)},d.translateBy=function(t,e,n){d.transform(t,(function(){return r(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}))},d.translateTo=function(t,e,n,a){d.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==a?v(t):"function"==typeof a?a.apply(this,arguments):a;return r(gS.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),a)},b.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){pe(new mS(d,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},d.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:pS(+t),d):a},d.filter=function(t){return arguments.length?(n="function"==typeof t?t:pS(!!t),d):n},d.touchable=function(t){return arguments.length?(o="function"==typeof t?t:pS(!!t),d):o},d.extent=function(t){return arguments.length?(i="function"==typeof t?t:pS([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),d):i},d.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],d):[s[0],s[1]]},d.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],d):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},d.constrain=function(t){return arguments.length?(r=t,d):r},d.duration=function(t){return arguments.length?(u=+t,d):u},d.interpolate=function(t){return arguments.length?(c=t,d):c},d.on=function(){var t=h.on.apply(h,arguments);return t===h?d:t},d.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,d):Math.sqrt(f)},d};n.d(e,"version",(function(){return"5.15.0"})),n.d(e,"bisect",(function(){return l})),n.d(e,"bisectRight",(function(){return o})),n.d(e,"bisectLeft",(function(){return s})),n.d(e,"ascending",(function(){return i})),n.d(e,"bisector",(function(){return r})),n.d(e,"cross",(function(){return h})),n.d(e,"descending",(function(){return f})),n.d(e,"deviation",(function(){return m})),n.d(e,"extent",(function(){return v})),n.d(e,"histogram",(function(){return A})),n.d(e,"thresholdFreedmanDiaconis",(function(){return L})),n.d(e,"thresholdScott",(function(){return I})),n.d(e,"thresholdSturges",(function(){return P})),n.d(e,"max",(function(){return N})),n.d(e,"mean",(function(){return R})),n.d(e,"median",(function(){return D})),n.d(e,"merge",(function(){return z})),n.d(e,"min",(function(){return B})),n.d(e,"pairs",(function(){return u})),n.d(e,"permute",(function(){return F})),n.d(e,"quantile",(function(){return O})),n.d(e,"range",(function(){return w})),n.d(e,"scan",(function(){return j})),n.d(e,"shuffle",(function(){return V})),n.d(e,"sum",(function(){return U})),n.d(e,"ticks",(function(){return T})),n.d(e,"tickIncrement",(function(){return C})),n.d(e,"tickStep",(function(){return k})),n.d(e,"transpose",(function(){return H})),n.d(e,"variance",(function(){return p})),n.d(e,"zip",(function(){return W})),n.d(e,"axisTop",(function(){return tt})),n.d(e,"axisRight",(function(){return et})),n.d(e,"axisBottom",(function(){return nt})),n.d(e,"axisLeft",(function(){return it})),n.d(e,"brush",(function(){return Mr})),n.d(e,"brushX",(function(){return Sr})),n.d(e,"brushY",(function(){return Er})),n.d(e,"brushSelection",(function(){return wr})),n.d(e,"chord",(function(){return Nr})),n.d(e,"ribbon",(function(){return Qr})),n.d(e,"nest",(function(){return Jr})),n.d(e,"set",(function(){return oa})),n.d(e,"map",(function(){return Zr})),n.d(e,"keys",(function(){return sa})),n.d(e,"values",(function(){return la})),n.d(e,"entries",(function(){return ua})),n.d(e,"color",(function(){return He})),n.d(e,"rgb",(function(){return $e})),n.d(e,"hsl",(function(){return tn})),n.d(e,"lab",(function(){return pa})),n.d(e,"hcl",(function(){return wa})),n.d(e,"lch",(function(){return _a})),n.d(e,"gray",(function(){return da})),n.d(e,"cubehelix",(function(){return Aa})),n.d(e,"contours",(function(){return ja})),n.d(e,"contourDensity",(function(){return qa})),n.d(e,"dispatch",(function(){return ct})),n.d(e,"drag",(function(){return Ka})),n.d(e,"dragDisable",(function(){return Me})),n.d(e,"dragEnable",(function(){return Te})),n.d(e,"dsvFormat",(function(){return oo})),n.d(e,"csvParse",(function(){return lo})),n.d(e,"csvParseRows",(function(){return uo})),n.d(e,"csvFormat",(function(){return co})),n.d(e,"csvFormatBody",(function(){return ho})),n.d(e,"csvFormatRows",(function(){return fo})),n.d(e,"csvFormatRow",(function(){return po})),n.d(e,"csvFormatValue",(function(){return mo})),n.d(e,"tsvParse",(function(){return go})),n.d(e,"tsvParseRows",(function(){return yo})),n.d(e,"tsvFormat",(function(){return bo})),n.d(e,"tsvFormatBody",(function(){return xo})),n.d(e,"tsvFormatRows",(function(){return _o})),n.d(e,"tsvFormatRow",(function(){return wo})),n.d(e,"tsvFormatValue",(function(){return So})),n.d(e,"autoType",(function(){return Eo})),n.d(e,"easeLinear",(function(){return To})),n.d(e,"easeQuad",(function(){return Po})),n.d(e,"easeQuadIn",(function(){return Co})),n.d(e,"easeQuadOut",(function(){return ko})),n.d(e,"easeQuadInOut",(function(){return Po})),n.d(e,"easeCubic",(function(){return qi})),n.d(e,"easeCubicIn",(function(){return Gi})),n.d(e,"easeCubicOut",(function(){return Wi})),n.d(e,"easeCubicInOut",(function(){return qi})),n.d(e,"easePoly",(function(){return Lo})),n.d(e,"easePolyIn",(function(){return Ao})),n.d(e,"easePolyOut",(function(){return Oo})),n.d(e,"easePolyInOut",(function(){return Lo})),n.d(e,"easeSin",(function(){return zo})),n.d(e,"easeSinIn",(function(){return Ro})),n.d(e,"easeSinOut",(function(){return Do})),n.d(e,"easeSinInOut",(function(){return zo})),n.d(e,"easeExp",(function(){return jo})),n.d(e,"easeExpIn",(function(){return Bo})),n.d(e,"easeExpOut",(function(){return Fo})),n.d(e,"easeExpInOut",(function(){return jo})),n.d(e,"easeCircle",(function(){return Ho})),n.d(e,"easeCircleIn",(function(){return Vo})),n.d(e,"easeCircleOut",(function(){return Uo})),n.d(e,"easeCircleInOut",(function(){return Ho})),n.d(e,"easeBounce",(function(){return Wo})),n.d(e,"easeBounceIn",(function(){return Go})),n.d(e,"easeBounceOut",(function(){return Wo})),n.d(e,"easeBounceInOut",(function(){return qo})),n.d(e,"easeBack",(function(){return Yo})),n.d(e,"easeBackIn",(function(){return $o})),n.d(e,"easeBackOut",(function(){return Qo})),n.d(e,"easeBackInOut",(function(){return Yo})),n.d(e,"easeElastic",(function(){return Jo})),n.d(e,"easeElasticIn",(function(){return Zo})),n.d(e,"easeElasticOut",(function(){return Jo})),n.d(e,"easeElasticInOut",(function(){return Ko})),n.d(e,"blob",(function(){return es})),n.d(e,"buffer",(function(){return is})),n.d(e,"dsv",(function(){return ss})),n.d(e,"csv",(function(){return ls})),n.d(e,"tsv",(function(){return us})),n.d(e,"image",(function(){return cs})),n.d(e,"json",(function(){return fs})),n.d(e,"text",(function(){return as})),n.d(e,"xml",(function(){return ps})),n.d(e,"html",(function(){return ms})),n.d(e,"svg",(function(){return vs})),n.d(e,"forceCenter",(function(){return gs})),n.d(e,"forceCollide",(function(){return As})),n.d(e,"forceLink",(function(){return Is})),n.d(e,"forceManyBody",(function(){return Bs})),n.d(e,"forceRadial",(function(){return Fs})),n.d(e,"forceSimulation",(function(){return zs})),n.d(e,"forceX",(function(){return js})),n.d(e,"forceY",(function(){return Vs})),n.d(e,"formatDefaultLocale",(function(){return il})),n.d(e,"format",(function(){return Ys})),n.d(e,"formatPrefix",(function(){return Xs})),n.d(e,"formatLocale",(function(){return nl})),n.d(e,"formatSpecifier",(function(){return Ws})),n.d(e,"FormatSpecifier",(function(){return qs})),n.d(e,"precisionFixed",(function(){return rl})),n.d(e,"precisionPrefix",(function(){return al})),n.d(e,"precisionRound",(function(){return ol})),n.d(e,"geoArea",(function(){return Zl})),n.d(e,"geoBounds",(function(){return Hu})),n.d(e,"geoCentroid",(function(){return ec})),n.d(e,"geoCircle",(function(){return fc})),n.d(e,"geoClipAntimeridian",(function(){return Ec})),n.d(e,"geoClipCircle",(function(){return Mc})),n.d(e,"geoClipExtent",(function(){return Ac})),n.d(e,"geoClipRectangle",(function(){return Tc})),n.d(e,"geoContains",(function(){return Qc})),n.d(e,"geoDistance",(function(){return Fc})),n.d(e,"geoGraticule",(function(){return Zc})),n.d(e,"geoGraticule10",(function(){return Jc})),n.d(e,"geoInterpolate",(function(){return ih})),n.d(e,"geoLength",(function(){return Dc})),n.d(e,"geoPath",(function(){return ef})),n.d(e,"geoAlbers",(function(){return _f})),n.d(e,"geoAlbersUsa",(function(){return wf})),n.d(e,"geoAzimuthalEqualArea",(function(){return Tf})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return Mf})),n.d(e,"geoAzimuthalEquidistant",(function(){return kf})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return Cf})),n.d(e,"geoConicConformal",(function(){return Nf})),n.d(e,"geoConicConformalRaw",(function(){return If})),n.d(e,"geoConicEqualArea",(function(){return xf})),n.d(e,"geoConicEqualAreaRaw",(function(){return bf})),n.d(e,"geoConicEquidistant",(function(){return Bf})),n.d(e,"geoConicEquidistantRaw",(function(){return zf})),n.d(e,"geoEqualEarth",(function(){return Wf})),n.d(e,"geoEqualEarthRaw",(function(){return Gf})),n.d(e,"geoEquirectangular",(function(){return Df})),n.d(e,"geoEquirectangularRaw",(function(){return Rf})),n.d(e,"geoGnomonic",(function(){return $f})),n.d(e,"geoGnomonicRaw",(function(){return qf})),n.d(e,"geoIdentity",(function(){return Yf})),n.d(e,"geoProjection",(function(){return vf})),n.d(e,"geoProjectionMutator",(function(){return gf})),n.d(e,"geoMercator",(function(){return Af})),n.d(e,"geoMercatorRaw",(function(){return Pf})),n.d(e,"geoNaturalEarth1",(function(){return Zf})),n.d(e,"geoNaturalEarth1Raw",(function(){return Xf})),n.d(e,"geoOrthographic",(function(){return Kf})),n.d(e,"geoOrthographicRaw",(function(){return Jf})),n.d(e,"geoStereographic",(function(){return ed})),n.d(e,"geoStereographicRaw",(function(){return td})),n.d(e,"geoTransverseMercator",(function(){return id})),n.d(e,"geoTransverseMercatorRaw",(function(){return nd})),n.d(e,"geoRotation",(function(){return uc})),n.d(e,"geoStream",(function(){return Hl})),n.d(e,"geoTransform",(function(){return nf})),n.d(e,"cluster",(function(){return sd})),n.d(e,"hierarchy",(function(){return ud})),n.d(e,"pack",(function(){return Nd})),n.d(e,"packSiblings",(function(){return kd})),n.d(e,"packEnclose",(function(){return md})),n.d(e,"partition",(function(){return jd})),n.d(e,"stratify",(function(){return Wd})),n.d(e,"tree",(function(){return Jd})),n.d(e,"treemap",(function(){return ip})),n.d(e,"treemapBinary",(function(){return rp})),n.d(e,"treemapDice",(function(){return Fd})),n.d(e,"treemapSlice",(function(){return Kd})),n.d(e,"treemapSliceDice",(function(){return ap})),n.d(e,"treemapSquarify",(function(){return np})),n.d(e,"treemapResquarify",(function(){return op})),n.d(e,"interpolate",(function(){return kn})),n.d(e,"interpolateArray",(function(){return yn})),n.d(e,"interpolateBasis",(function(){return an})),n.d(e,"interpolateBasisClosed",(function(){return on})),n.d(e,"interpolateDate",(function(){return xn})),n.d(e,"interpolateDiscrete",(function(){return sp})),n.d(e,"interpolateHue",(function(){return lp})),n.d(e,"interpolateNumber",(function(){return _n})),n.d(e,"interpolateNumberArray",(function(){return vn})),n.d(e,"interpolateObject",(function(){return wn})),n.d(e,"interpolateRound",(function(){return up})),n.d(e,"interpolateString",(function(){return Cn})),n.d(e,"interpolateTransformCss",(function(){return hi})),n.d(e,"interpolateTransformSvg",(function(){return fi})),n.d(e,"interpolateZoom",(function(){return fp})),n.d(e,"interpolateRgb",(function(){return fn})),n.d(e,"interpolateRgbBasis",(function(){return pn})),n.d(e,"interpolateRgbBasisClosed",(function(){return mn})),n.d(e,"interpolateHsl",(function(){return pp})),n.d(e,"interpolateHslLong",(function(){return mp})),n.d(e,"interpolateLab",(function(){return vp})),n.d(e,"interpolateHcl",(function(){return yp})),n.d(e,"interpolateHclLong",(function(){return bp})),n.d(e,"interpolateCubehelix",(function(){return _p})),n.d(e,"interpolateCubehelixLong",(function(){return wp})),n.d(e,"piecewise",(function(){return Sp})),n.d(e,"quantize",(function(){return Ep})),n.d(e,"path",(function(){return Ur})),n.d(e,"polygonArea",(function(){return Mp})),n.d(e,"polygonCentroid",(function(){return Tp})),n.d(e,"polygonHull",(function(){return Pp})),n.d(e,"polygonContains",(function(){return Ap})),n.d(e,"polygonLength",(function(){return Op})),n.d(e,"quadtree",(function(){return Es})),n.d(e,"randomUniform",(function(){return Ip})),n.d(e,"randomNormal",(function(){return Np})),n.d(e,"randomLogNormal",(function(){return Rp})),n.d(e,"randomBates",(function(){return zp})),n.d(e,"randomIrwinHall",(function(){return Dp})),n.d(e,"randomExponential",(function(){return Bp})),n.d(e,"scaleBand",(function(){return qp})),n.d(e,"scalePoint",(function(){return Qp})),n.d(e,"scaleIdentity",(function(){return lm})),n.d(e,"scaleLinear",(function(){return sm})),n.d(e,"scaleLog",(function(){return gm})),n.d(e,"scaleSymlog",(function(){return _m})),n.d(e,"scaleOrdinal",(function(){return Wp})),n.d(e,"scaleImplicit",(function(){return Gp})),n.d(e,"scalePow",(function(){return Tm})),n.d(e,"scaleSqrt",(function(){return Cm})),n.d(e,"scaleQuantile",(function(){return km})),n.d(e,"scaleQuantize",(function(){return Pm})),n.d(e,"scaleThreshold",(function(){return Am})),n.d(e,"scaleTime",(function(){return sy})),n.d(e,"scaleUtc",(function(){return gy})),n.d(e,"scaleSequential",(function(){return xy})),n.d(e,"scaleSequentialLog",(function(){return _y})),n.d(e,"scaleSequentialPow",(function(){return Sy})),n.d(e,"scaleSequentialSqrt",(function(){return Ey})),n.d(e,"scaleSequentialSymlog",(function(){return wy})),n.d(e,"scaleSequentialQuantile",(function(){return My})),n.d(e,"scaleDiverging",(function(){return Cy})),n.d(e,"scaleDivergingLog",(function(){return ky})),n.d(e,"scaleDivergingPow",(function(){return Ay})),n.d(e,"scaleDivergingSqrt",(function(){return Oy})),n.d(e,"scaleDivergingSymlog",(function(){return Py})),n.d(e,"tickFormat",(function(){return am})),n.d(e,"schemeCategory10",(function(){return Iy})),n.d(e,"schemeAccent",(function(){return Ny})),n.d(e,"schemeDark2",(function(){return Ry})),n.d(e,"schemePaired",(function(){return Dy})),n.d(e,"schemePastel1",(function(){return zy})),n.d(e,"schemePastel2",(function(){return By})),n.d(e,"schemeSet1",(function(){return Fy})),n.d(e,"schemeSet2",(function(){return jy})),n.d(e,"schemeSet3",(function(){return Vy})),n.d(e,"schemeTableau10",(function(){return Uy})),n.d(e,"interpolateBrBG",(function(){return Wy})),n.d(e,"schemeBrBG",(function(){return Gy})),n.d(e,"interpolatePRGn",(function(){return $y})),n.d(e,"schemePRGn",(function(){return qy})),n.d(e,"interpolatePiYG",(function(){return Yy})),n.d(e,"schemePiYG",(function(){return Qy})),n.d(e,"interpolatePuOr",(function(){return Zy})),n.d(e,"schemePuOr",(function(){return Xy})),n.d(e,"interpolateRdBu",(function(){return Ky})),n.d(e,"schemeRdBu",(function(){return Jy})),n.d(e,"interpolateRdGy",(function(){return eb})),n.d(e,"schemeRdGy",(function(){return tb})),n.d(e,"interpolateRdYlBu",(function(){return ib})),n.d(e,"schemeRdYlBu",(function(){return nb})),n.d(e,"interpolateRdYlGn",(function(){return ab})),n.d(e,"schemeRdYlGn",(function(){return rb})),n.d(e,"interpolateSpectral",(function(){return sb})),n.d(e,"schemeSpectral",(function(){return ob})),n.d(e,"interpolateBuGn",(function(){return ub})),n.d(e,"schemeBuGn",(function(){return lb})),n.d(e,"interpolateBuPu",(function(){return hb})),n.d(e,"schemeBuPu",(function(){return cb})),n.d(e,"interpolateGnBu",(function(){return db})),n.d(e,"schemeGnBu",(function(){return fb})),n.d(e,"interpolateOrRd",(function(){return mb})),n.d(e,"schemeOrRd",(function(){return pb})),n.d(e,"interpolatePuBuGn",(function(){return gb})),n.d(e,"schemePuBuGn",(function(){return vb})),n.d(e,"interpolatePuBu",(function(){return bb})),n.d(e,"schemePuBu",(function(){return yb})),n.d(e,"interpolatePuRd",(function(){return _b})),n.d(e,"schemePuRd",(function(){return xb})),n.d(e,"interpolateRdPu",(function(){return Sb})),n.d(e,"schemeRdPu",(function(){return wb})),n.d(e,"interpolateYlGnBu",(function(){return Mb})),n.d(e,"schemeYlGnBu",(function(){return Eb})),n.d(e,"interpolateYlGn",(function(){return Cb})),n.d(e,"schemeYlGn",(function(){return Tb})),n.d(e,"interpolateYlOrBr",(function(){return Pb})),n.d(e,"schemeYlOrBr",(function(){return kb})),n.d(e,"interpolateYlOrRd",(function(){return Ob})),n.d(e,"schemeYlOrRd",(function(){return Ab})),n.d(e,"interpolateBlues",(function(){return Ib})),n.d(e,"schemeBlues",(function(){return Lb})),n.d(e,"interpolateGreens",(function(){return Rb})),n.d(e,"schemeGreens",(function(){return Nb})),n.d(e,"interpolateGreys",(function(){return zb})),n.d(e,"schemeGreys",(function(){return Db})),n.d(e,"interpolatePurples",(function(){return Fb})),n.d(e,"schemePurples",(function(){return Bb})),n.d(e,"interpolateReds",(function(){return Vb})),n.d(e,"schemeReds",(function(){return jb})),n.d(e,"interpolateOranges",(function(){return Hb})),n.d(e,"schemeOranges",(function(){return Ub})),n.d(e,"interpolateCividis",(function(){return Gb})),n.d(e,"interpolateCubehelixDefault",(function(){return Wb})),n.d(e,"interpolateRainbow",(function(){return Yb})),n.d(e,"interpolateWarm",(function(){return qb})),n.d(e,"interpolateCool",(function(){return $b})),n.d(e,"interpolateSinebow",(function(){return Kb})),n.d(e,"interpolateTurbo",(function(){return tx})),n.d(e,"interpolateViridis",(function(){return nx})),n.d(e,"interpolateMagma",(function(){return ix})),n.d(e,"interpolateInferno",(function(){return rx})),n.d(e,"interpolatePlasma",(function(){return ax})),n.d(e,"create",(function(){return ox})),n.d(e,"creator",(function(){return ne})),n.d(e,"local",(function(){return lx})),n.d(e,"matcher",(function(){return mt})),n.d(e,"mouse",(function(){return Ln})),n.d(e,"namespace",(function(){return St})),n.d(e,"namespaces",(function(){return wt})),n.d(e,"clientPoint",(function(){return An})),n.d(e,"select",(function(){return we})),n.d(e,"selectAll",(function(){return cx})),n.d(e,"selection",(function(){return _e})),n.d(e,"selector",(function(){return ft})),n.d(e,"selectorAll",(function(){return pt})),n.d(e,"style",(function(){return Nt})),n.d(e,"touch",(function(){return On})),n.d(e,"touches",(function(){return hx})),n.d(e,"window",(function(){return At})),n.d(e,"event",(function(){return le})),n.d(e,"customEvent",(function(){return pe})),n.d(e,"arc",(function(){return Lx})),n.d(e,"area",(function(){return Bx})),n.d(e,"line",(function(){return zx})),n.d(e,"pie",(function(){return Vx})),n.d(e,"areaRadial",(function(){return $x})),n.d(e,"radialArea",(function(){return $x})),n.d(e,"lineRadial",(function(){return qx})),n.d(e,"radialLine",(function(){return qx})),n.d(e,"pointRadial",(function(){return Qx})),n.d(e,"linkHorizontal",(function(){return n_})),n.d(e,"linkVertical",(function(){return i_})),n.d(e,"linkRadial",(function(){return r_})),n.d(e,"symbol",(function(){return w_})),n.d(e,"symbols",(function(){return __})),n.d(e,"symbolCircle",(function(){return a_})),n.d(e,"symbolCross",(function(){return o_})),n.d(e,"symbolDiamond",(function(){return u_})),n.d(e,"symbolSquare",(function(){return p_})),n.d(e,"symbolStar",(function(){return d_})),n.d(e,"symbolTriangle",(function(){return v_})),n.d(e,"symbolWye",(function(){return x_})),n.d(e,"curveBasisClosed",(function(){return k_})),n.d(e,"curveBasisOpen",(function(){return A_})),n.d(e,"curveBasis",(function(){return T_})),n.d(e,"curveBundle",(function(){return L_})),n.d(e,"curveCardinalClosed",(function(){return z_})),n.d(e,"curveCardinalOpen",(function(){return F_})),n.d(e,"curveCardinal",(function(){return R_})),n.d(e,"curveCatmullRomClosed",(function(){return G_})),n.d(e,"curveCatmullRomOpen",(function(){return q_})),n.d(e,"curveCatmullRom",(function(){return U_})),n.d(e,"curveLinearClosed",(function(){return Q_})),n.d(e,"curveLinear",(function(){return Nx})),n.d(e,"curveMonotoneX",(function(){return nw})),n.d(e,"curveMonotoneY",(function(){return iw})),n.d(e,"curveNatural",(function(){return ow})),n.d(e,"curveStep",(function(){return lw})),n.d(e,"curveStepAfter",(function(){return cw})),n.d(e,"curveStepBefore",(function(){return uw})),n.d(e,"stack",(function(){return pw})),n.d(e,"stackOffsetExpand",(function(){return mw})),n.d(e,"stackOffsetDiverging",(function(){return vw})),n.d(e,"stackOffsetNone",(function(){return hw})),n.d(e,"stackOffsetSilhouette",(function(){return gw})),n.d(e,"stackOffsetWiggle",(function(){return yw})),n.d(e,"stackOrderAppearance",(function(){return bw})),n.d(e,"stackOrderAscending",(function(){return _w})),n.d(e,"stackOrderDescending",(function(){return Sw})),n.d(e,"stackOrderInsideOut",(function(){return Ew})),n.d(e,"stackOrderNone",(function(){return fw})),n.d(e,"stackOrderReverse",(function(){return Mw})),n.d(e,"timeInterval",(function(){return Im})),n.d(e,"timeMillisecond",(function(){return pv})),n.d(e,"timeMilliseconds",(function(){return mv})),n.d(e,"utcMillisecond",(function(){return pv})),n.d(e,"utcMilliseconds",(function(){return mv})),n.d(e,"timeSecond",(function(){return hv})),n.d(e,"timeSeconds",(function(){return fv})),n.d(e,"utcSecond",(function(){return hv})),n.d(e,"utcSeconds",(function(){return fv})),n.d(e,"timeMinute",(function(){return lv})),n.d(e,"timeMinutes",(function(){return uv})),n.d(e,"timeHour",(function(){return av})),n.d(e,"timeHours",(function(){return ov})),n.d(e,"timeDay",(function(){return nv})),n.d(e,"timeDays",(function(){return iv})),n.d(e,"timeWeek",(function(){return Vm})),n.d(e,"timeWeeks",(function(){return Qm})),n.d(e,"timeSunday",(function(){return Vm})),n.d(e,"timeSundays",(function(){return Qm})),n.d(e,"timeMonday",(function(){return Um})),n.d(e,"timeMondays",(function(){return Ym})),n.d(e,"timeTuesday",(function(){return Hm})),n.d(e,"timeTuesdays",(function(){return Xm})),n.d(e,"timeWednesday",(function(){return Gm})),n.d(e,"timeWednesdays",(function(){return Zm})),n.d(e,"timeThursday",(function(){return Wm})),n.d(e,"timeThursdays",(function(){return Jm})),n.d(e,"timeFriday",(function(){return qm})),n.d(e,"timeFridays",(function(){return Km})),n.d(e,"timeSaturday",(function(){return $m})),n.d(e,"timeSaturdays",(function(){return tv})),n.d(e,"timeMonth",(function(){return Bm})),n.d(e,"timeMonths",(function(){return Fm})),n.d(e,"timeYear",(function(){return Rm})),n.d(e,"timeYears",(function(){return Dm})),n.d(e,"utcMinute",(function(){return my})),n.d(e,"utcMinutes",(function(){return vy})),n.d(e,"utcHour",(function(){return fy})),n.d(e,"utcHours",(function(){return dy})),n.d(e,"utcDay",(function(){return Lv})),n.d(e,"utcDays",(function(){return Iv})),n.d(e,"utcWeek",(function(){return gv})),n.d(e,"utcWeeks",(function(){return Ev})),n.d(e,"utcSunday",(function(){return gv})),n.d(e,"utcSundays",(function(){return Ev})),n.d(e,"utcMonday",(function(){return yv})),n.d(e,"utcMondays",(function(){return Mv})),n.d(e,"utcTuesday",(function(){return bv})),n.d(e,"utcTuesdays",(function(){return Tv})),n.d(e,"utcWednesday",(function(){return xv})),n.d(e,"utcWednesdays",(function(){return Cv})),n.d(e,"utcThursday",(function(){return _v})),n.d(e,"utcThursdays",(function(){return kv})),n.d(e,"utcFriday",(function(){return wv})),n.d(e,"utcFridays",(function(){return Pv})),n.d(e,"utcSaturday",(function(){return Sv})),n.d(e,"utcSaturdays",(function(){return Av})),n.d(e,"utcMonth",(function(){return uy})),n.d(e,"utcMonths",(function(){return cy})),n.d(e,"utcYear",(function(){return Rv})),n.d(e,"utcYears",(function(){return Dv})),n.d(e,"timeFormatDefaultLocale",(function(){return iy})),n.d(e,"timeFormat",(function(){return Uv})),n.d(e,"timeParse",(function(){return Hv})),n.d(e,"utcFormat",(function(){return Gv})),n.d(e,"utcParse",(function(){return Wv})),n.d(e,"timeFormatLocale",(function(){return jv})),n.d(e,"isoFormat",(function(){return Tw})),n.d(e,"isoParse",(function(){return Cw})),n.d(e,"now",(function(){return Vn})),n.d(e,"timer",(function(){return Gn})),n.d(e,"timerFlush",(function(){return Wn})),n.d(e,"timeout",(function(){return Yn})),n.d(e,"interval",(function(){return kw})),n.d(e,"transition",(function(){return Vi})),n.d(e,"active",(function(){return Xi})),n.d(e,"interrupt",(function(){return oi})),n.d(e,"voronoi",(function(){return dS})),n.d(e,"zoom",(function(){return CS})),n.d(e,"zoomTransform",(function(){return yS})),n.d(e,"zoomIdentity",(function(){return gS}))},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var i=n(225),r=n(229)((function(t,e,n){i(t,e,n)}));t.exports=r},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(26),a=l(n(14)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(15)),s=l(n(3));function l(t){return t&&t.__esModule?t:{default:t}}var u={Default:[[0,1],[.05,.75],[.37,.5],[.62,.5],[.95,.25],[1,0]],Linear:[[0,1],[.25,.75],[.5,.5],[.75,.25],[1,0]],Flat:[[0,1],[.25,1],[.5,1],[.75,1],[1,1]],Valley:[[0,1],[.25,.75],[.5,.5],[.75,.75],[1,1]]},c=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(var n in t.initColorIdx=5,t.presetColors=["#DC143C","#FF6347","#FFA500","#FFFF00","#00FF00","#7FFFD4","#00FFFF","#00BFFF","#1E90FF","#7B68EE","#9932CC","#FF00FF","#FF69B4","#FFFFFF","#FFF8DC","#CD853F"],t.cameraProp=[{xpos:0,ypos:0,zpos:50,fov:45,far:2e3,depth:0,aspect:1,zoom:1,type:"Perspective"}],t.texture=[],t.checked=[],t.focused=[],t.minmaxV=[],t.minmaxH=[],t.plotColor=[],t.gridSize=18,t.tubeNum=16,t.segment=16,t.division=5,t.visualQuery=!1,t.dragSelection=!0,t.activeId=-1,t.lock=[],t.opacityCurves={},u){for(var i=[],r=0;r<u[n].length;r++)i.push(new o.Vector2(u[n][r][0],u[n][r][1]));t.opacityCurves[n]=new o.SplineCurve(i)}return t.averagePeriod=0,t.wheelInterval=1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPLOAD_DATA":this.uploadData();break;case"UPDATE_CAMERA":this.updateCamera(t.id,t.cameraProp);break;case"SWITCH_CAMERA":this.switchCamera(t.id);break;case"RESET_CAMERA":this.resetCamera(t.id);break;case"SEARCH_TIME":this.searchTime(t.id,t.dst);break;case"UPDATE_CHECKED":this.updateChecked(t.id);break;case"SWITCH_GRID":this.switchGridDisplay(t.id,t.state);break;case"SWITCH_LABEL":this.switchLabelDisplay(t.id,t.state);break;case"SWITCH_AXIS":this.switchAxisDisplay(t.id,t.state);break;case"SWITCH_PLOT":this.switchPlotDisplay(t.id,t.state);break;case"CHANGE_BACKGROUND":this.changeBackground(t.id,t.color);break;case"CLIP_TUBE":this.clipTube(t.id,t.state);break;case"SWITCH_SHADE":this.switchShade(t.id,t.state);break;case"UPDATE_FOCUS":this.updateFocus(t.id,t.zpos,t.flag);break;case"CHANGE_FAR":this.changeFar(t.id,t.value);break;case"UPDATE_MINMAXH":this.updateMinMaxH(t.id,t.min,t.max);break;case"UPDATE_MINMAXV":this.updateMinMaxV(t.id,t.min,t.max);break;case"CHANGE_PLOTCOLOR":this.changePlotColor(t.id,t.color);break;case"SET_TEXTURE":this.setTexture(t.id,t.texture);break;case"UPDATE_TEXTURE":this.updateTexture(t.id,t.texture);break;case"ACTIVATE_VIEWPORT":this.activateViewport(t.id);break;case"TIME_FITTING":this.timeFitting(t.dst);break;case"LOCK_CONTROL":this.lockControl(t.ids,t.state);break;case"SYNCHRONIZE_TUBES":this.synchronizeTubes(t.id,t.zpos,t.pos,t.deg);break;case"ZOOM_OUT_TIMETUBE":this.zoomOutTimeTubes(t.id);break;case"RESET_ZOOM_TIMETUBES":this.resetZoomTimeTubes(t.id);break;case"ZOOM_IN_TIMETUBES":this.zoomInTimeTubes(t.id);break;case"UPDATE_OPACITY":this.updateOpacity(t.id,t.opt);break;case"TAKE_SNAPSHOT":this.takeSnapshot(t.id,t.pos,t.far);break;case"RECOVER_TUBE":this.recoverTube(t.id,t.cameraProp,t.tubePos);break;case"SHOW_TIMETUBES_OF_TIME_SLICE":this.showTimeTubesofTimeSlice(t.id,t.period);break;case"UPDATE_AVERAGE_PERIOD":this.updateAveragePeriod(t.value);break;case"SHOW_ROTATION_CENTER":this.showRotationCenter(t.id,t.period,t.center);break;case"SWITCH_COMMENT":this.switchComment(t.id,t.state);break;case"UPDATE_WHEEL_INTERVAL":this.updateWheelInterval(t.interval)}}},{key:"getCameraProp",value:function(t){return this.cameraProp[t]}},{key:"getDefaultCameraProp",value:function(){return{xpos:0,ypos:0,zpos:50,fov:45,far:2e3,depth:0,aspect:1,zoom:1,type:"Perspective"}}},{key:"getChecked",value:function(t){return this.checked[t]}},{key:"getCheckedList",value:function(){return this.checked}},{key:"getFocused",value:function(t){return this.focused[t]}},{key:"getMinMaxH",value:function(t){return this.minmaxH[t]}},{key:"getMinMaxV",value:function(t){return this.minmaxV[t]}},{key:"getActiveId",value:function(){return this.activeId}},{key:"getPresetColors",value:function(){return this.presetColors}},{key:"getPresetColor",value:function(t){return this.presetColors[t]}},{key:"getPresetNum",value:function(){return this.presetColors.length}},{key:"getPlotColor",value:function(t){return this.plotColor[t]}},{key:"getInitColorIdx",value:function(){return this.initColorIdx}},{key:"getGridSize",value:function(){return this.gridSize}},{key:"getVisualQuery",value:function(){return this.visualQuery}},{key:"getTexture",value:function(t){return this.texture[t]}},{key:"getTubeNum",value:function(){return this.tubeNum}},{key:"getDivision",value:function(){return this.division}},{key:"getSegment",value:function(){return this.segment}},{key:"getLock",value:function(t){return this.lock[t]}},{key:"getOpacityDistSet",value:function(){return u}},{key:"getOpacityCurves",value:function(){return this.opacityCurves}},{key:"getOpacityCurve",value:function(t){return this.opacityCurves[t]}},{key:"getAveragePeriod",value:function(){return this.averagePeriod}},{key:"getWheelInterval",value:function(){return this.wheelInterval}},{key:"setPlotColor",value:function(t,e){this.plotColor[t]=e}},{key:"setPlotColorbyIdx",value:function(t,e){this.plotColor[t]=this.presetColors[e]}},{key:"setLock",value:function(t,e){this.lock[t]=e}},{key:"uploadData",value:function(){this.cameraProp.length;this.cameraProp.push({xpos:0,ypos:0,zpos:50,fov:45,depth:0,far:2e3,aspect:1,zoom:1,type:"Perspective"}),this.checked.push(!0),this.focused.push(0),this.minmaxV.push([0,0]),this.minmaxV.push([0,0]),this.lock.push(0),this.emit("upload")}},{key:"updateCamera",value:function(t,e){for(var n in e)this.cameraProp[t][n]=e[n];this.emit("updateCamera",t)}},{key:"resetCamera",value:function(t){this.cameraProp[t].xpos=0,this.cameraProp[t].ypos=0,this.cameraProp[t].zpos=50,this.emit("reset",t)}},{key:"switchCamera",value:function(t){"Perspective"===this.cameraProp[t].type?this.cameraProp[t].type="Orthographic":this.cameraProp[t].type="Perspective",this.emit("switch")}},{key:"searchTime",value:function(t,e){this.emit("searchTime",t,e)}},{key:"updateChecked",value:function(t){this.checked[t]=!this.checked[t],this.emit("updateChecked",t)}},{key:"switchGridDisplay",value:function(t,e){this.emit("switchGrid",t,e)}},{key:"switchLabelDisplay",value:function(t,e){this.emit("switchLabel",t,e)}},{key:"switchAxisDisplay",value:function(t,e){this.emit("switchAxis",t,e)}},{key:"switchPlotDisplay",value:function(t,e){this.emit("switchPlot",t,e)}},{key:"changeBackground",value:function(t,e){this.emit("changeBackground",t,e)}},{key:"clipTube",value:function(t,e){this.emit("clipTube",t,e)}},{key:"switchShade",value:function(t,e){this.emit("switchShade",t,e)}},{key:"updateFocus",value:function(t,e,n){this.focused[t]=e,this.emit("updateFocus",t,e,n)}},{key:"changeFar",value:function(t,e){this.cameraProp[t].far=e,this.emit("changeFar",t,e)}},{key:"updateMinMaxH",value:function(t,e,n){this.minmaxH[t]=[e,n],this.emit("updateMinMaxH",t)}},{key:"updateMinMaxV",value:function(t,e,n){this.minmaxV[t]=[e,n],this.emit("updateMinMaxV",t)}},{key:"changePlotColor",value:function(t,e){this.plotColor[t]=e,this.emit("changePlotColor",t)}},{key:"setTexture",value:function(t,e){this.texture[t]=e}},{key:"updateTexture",value:function(t,e){this.texture[t]=e,this.emit("updateTexture",t,e)}},{key:"activateViewport",value:function(t){this.activeId=t}},{key:"timeFitting",value:function(t){this.emit("timeFitting",t)}},{key:"lockControl",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.lock[t[n]]=this.getFocused(t[n]);else for(var i=0;i<this.lock.length;i++)this.lock[i]=0;this.emit("lockControl",t,e)}},{key:"synchronizeTubes",value:function(t,e,n,i){this.emit("synchronizeTubes",t,e,n,i)}},{key:"zoomOutTimeTubes",value:function(t){this.cameraProp[t].zoom>=.2&&(this.cameraProp[t].zoom-=.1,this.emit("updateZoomTimeTubes",t))}},{key:"resetZoomTimeTubes",value:function(t){this.cameraProp[t].zoom=1,this.emit("updateZoomTimeTubes",t)}},{key:"zoomInTimeTubes",value:function(t){this.cameraProp[t].zoom+=.1,this.emit("updateZoomTimeTubes",t)}},{key:"updateOpacity",value:function(t,e){this.emit("updateOpacity",t,e)}},{key:"takeSnapshot",value:function(t,e,n){this.emit("takeSnapshot",t,e,n)}},{key:"recoverTube",value:function(t,e,n){for(var i in e)this.cameraProp[t][i]=e[i];this.focused[t]=n,this.emit("recoverTube",t,e,n)}},{key:"showTimeTubesofTimeSlice",value:function(t,e){this.focused[t]=e[0]-s.default.getData(t).data.meta.min.z,this.emit("showTimeTubesOfTimeSlice",t,e)}},{key:"updateAveragePeriod",value:function(t){this.averagePeriod=t,this.emit("updateAveragePeriod")}},{key:"showRotationCenter",value:function(t,e,n){this.focused[t]=e[0]-s.default.getData(t).data.meta.min.z,this.emit("showRotationCenter",t,e,n)}},{key:"switchComment",value:function(t,e){this.emit("switchComment",t,e)}},{key:"updateWheelInterval",value:function(t){this.wheelInterval=t,this.emit("updateWheelInterval")}}]),e}(r.EventEmitter));a.default.register(c.handleActions.bind(c)),e.default=c},function(t,e,n){var i=n(68),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.red=e.getContrastingColor=e.isValidHex=e.toState=e.simpleCheckForValidColor=void 0;var i=a(n(243)),r=a(n(245));function a(t){return t&&t.__esModule?t:{default:t}}e.simpleCheckForValidColor=function(t){var e=0,n=0;return(0,i.default)(["r","g","b","a","h","s","l","v"],(function(i){if(t[i]&&(e+=1,isNaN(t[i])||(n+=1),"s"===i||"l"===i)){/^\d+%$/.test(t[i])&&(n+=1)}})),e===n&&t};var o=e.toState=function(t,e){var n=t.hex?(0,r.default)(t.hex):(0,r.default)(t),i=n.toHsl(),a=n.toHsv(),o=n.toRgb(),s=n.toHex();return 0===i.s&&(i.h=e||0,a.h=e||0),{hsl:i,hex:"000000"===s&&0===o.a?"transparent":"#"+s,rgb:o,hsv:a,oldHue:t.h||e||i.h,source:t.source}};e.isValidHex=function(t){var e="#"===String(t).charAt(0)?1:0;return t.length!==4+e&&t.length<7+e&&(0,r.default)(t).isValid()},e.getContrastingColor=function(t){if(!t)return"#fff";var e=o(t);return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=128?"#000":"#fff"},e.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}};e.default=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(113);e.default=new i.Dispatcher},function(t,e,n){"use strict";function i(){}n.r(e),n.d(e,"ACESFilmicToneMapping",(function(){return ut})),n.d(e,"AddEquation",(function(){return O})),n.d(e,"AddOperation",(function(){return it})),n.d(e,"AdditiveBlending",(function(){return C})),n.d(e,"AlphaFormat",(function(){return Ht})),n.d(e,"AlwaysDepth",(function(){return Q})),n.d(e,"AlwaysStencilFunc",(function(){return sn})),n.d(e,"AmbientLight",(function(){return Mc})),n.d(e,"AmbientLightProbe",(function(){return Qc})),n.d(e,"AnimationClip",(function(){return Lu})),n.d(e,"AnimationLoader",(function(){return ju})),n.d(e,"AnimationMixer",(function(){return Eh})),n.d(e,"AnimationObjectGroup",(function(){return wh})),n.d(e,"AnimationUtils",(function(){return bu})),n.d(e,"ArcCurve",(function(){return Qu})),n.d(e,"ArrayCamera",(function(){return qo})),n.d(e,"ArrowHelper",(function(){return Mf})),n.d(e,"Audio",(function(){return rh})),n.d(e,"AudioAnalyser",(function(){return ch})),n.d(e,"AudioContext",(function(){return Hc})),n.d(e,"AudioListener",(function(){return ih})),n.d(e,"AudioLoader",(function(){return Gc})),n.d(e,"AxesHelper",(function(){return Tf})),n.d(e,"AxisHelper",(function(){return Jf})),n.d(e,"BackSide",(function(){return y})),n.d(e,"BasicDepthPacking",(function(){return Ve})),n.d(e,"BasicShadowMap",(function(){return d})),n.d(e,"BinaryTextureLoader",(function(){return id})),n.d(e,"Bone",(function(){return Ts})),n.d(e,"BooleanKeyframeTrack",(function(){return Mu})),n.d(e,"BoundingBoxHelper",(function(){return Kf})),n.d(e,"Box2",(function(){return Ih})),n.d(e,"Box3",(function(){return ci})),n.d(e,"Box3Helper",(function(){return xf})),n.d(e,"BoxBufferGeometry",(function(){return Dr})),n.d(e,"BoxGeometry",(function(){return Rr})),n.d(e,"BoxHelper",(function(){return bf})),n.d(e,"BufferAttribute",(function(){return Gi})),n.d(e,"BufferGeometry",(function(){return ur})),n.d(e,"BufferGeometryLoader",(function(){return Oc})),n.d(e,"ByteType",(function(){return Lt})),n.d(e,"Cache",(function(){return Nu})),n.d(e,"Camera",(function(){return Vr})),n.d(e,"CameraHelper",(function(){return vf})),n.d(e,"CanvasRenderer",(function(){return ad})),n.d(e,"CanvasTexture",(function(){return $s})),n.d(e,"CatmullRomCurve3",(function(){return tc})),n.d(e,"CineonToneMapping",(function(){return lt})),n.d(e,"CircleBufferGeometry",(function(){return ou})),n.d(e,"CircleGeometry",(function(){return au})),n.d(e,"ClampToEdgeWrapping",(function(){return bt})),n.d(e,"Clock",(function(){return Jc})),n.d(e,"ClosedSplineCurve3",(function(){return Yf})),n.d(e,"Color",(function(){return Di})),n.d(e,"ColorKeyframeTrack",(function(){return Tu})),n.d(e,"CompressedTexture",(function(){return qs})),n.d(e,"CompressedTextureLoader",(function(){return Vu})),n.d(e,"ConeBufferGeometry",(function(){return ru})),n.d(e,"ConeGeometry",(function(){return iu})),n.d(e,"CubeCamera",(function(){return Hr})),n.d(e,"CubeGeometry",(function(){return Rr})),n.d(e,"CubeReflectionMapping",(function(){return ht})),n.d(e,"CubeRefractionMapping",(function(){return ft})),n.d(e,"CubeTexture",(function(){return ga})),n.d(e,"CubeTextureLoader",(function(){return Gu})),n.d(e,"CubeUVReflectionMapping",(function(){return vt})),n.d(e,"CubeUVRefractionMapping",(function(){return gt})),n.d(e,"CubicBezierCurve",(function(){return rc})),n.d(e,"CubicBezierCurve3",(function(){return ac})),n.d(e,"CubicInterpolant",(function(){return _u})),n.d(e,"CullFaceBack",(function(){return l})),n.d(e,"CullFaceFront",(function(){return u})),n.d(e,"CullFaceFrontBack",(function(){return c})),n.d(e,"CullFaceNone",(function(){return s})),n.d(e,"Curve",(function(){return qu})),n.d(e,"CurvePath",(function(){return fc})),n.d(e,"CustomBlending",(function(){return A})),n.d(e,"CylinderBufferGeometry",(function(){return nu})),n.d(e,"CylinderGeometry",(function(){return eu})),n.d(e,"Cylindrical",(function(){return Oh})),n.d(e,"DataTexture",(function(){return Wr})),n.d(e,"DataTexture2DArray",(function(){return ya})),n.d(e,"DataTexture3D",(function(){return ba})),n.d(e,"DataTextureLoader",(function(){return Uu})),n.d(e,"DecrementStencilOp",(function(){return Ye})),n.d(e,"DecrementWrapStencilOp",(function(){return Ze})),n.d(e,"DefaultLoadingManager",(function(){return Du})),n.d(e,"DepthFormat",(function(){return Yt})),n.d(e,"DepthStencilFormat",(function(){return Xt})),n.d(e,"DepthTexture",(function(){return Qs})),n.d(e,"DirectionalLight",(function(){return Ec})),n.d(e,"DirectionalLightHelper",(function(){return df})),n.d(e,"DirectionalLightShadow",(function(){return Sc})),n.d(e,"DiscreteInterpolant",(function(){return Su})),n.d(e,"DodecahedronBufferGeometry",(function(){return sl})),n.d(e,"DodecahedronGeometry",(function(){return ol})),n.d(e,"DoubleSide",(function(){return b})),n.d(e,"DstAlphaFactor",(function(){return U})),n.d(e,"DstColorFactor",(function(){return G})),n.d(e,"DynamicBufferAttribute",(function(){return Ff})),n.d(e,"EdgesGeometry",(function(){return tu})),n.d(e,"EdgesHelper",(function(){return td})),n.d(e,"EllipseCurve",(function(){return $u})),n.d(e,"EqualDepth",(function(){return Z})),n.d(e,"EqualStencilFunc",(function(){return en})),n.d(e,"EquirectangularReflectionMapping",(function(){return dt})),n.d(e,"EquirectangularRefractionMapping",(function(){return pt})),n.d(e,"Euler",(function(){return Rn})),n.d(e,"EventDispatcher",(function(){return i})),n.d(e,"ExtrudeBufferGeometry",(function(){return jl})),n.d(e,"ExtrudeGeometry",(function(){return Fl})),n.d(e,"Face3",(function(){return ji})),n.d(e,"Face4",(function(){return Cf})),n.d(e,"FaceColors",(function(){return S})),n.d(e,"FaceNormalsHelper",(function(){return uf})),n.d(e,"FileLoader",(function(){return Fu})),n.d(e,"FlatShading",(function(){return x})),n.d(e,"Float32Attribute",(function(){return $f})),n.d(e,"Float32BufferAttribute",(function(){return Ji})),n.d(e,"Float64Attribute",(function(){return Qf})),n.d(e,"Float64BufferAttribute",(function(){return Ki})),n.d(e,"FloatType",(function(){return zt})),n.d(e,"Fog",(function(){return es})),n.d(e,"FogExp2",(function(){return ts})),n.d(e,"Font",(function(){return jc})),n.d(e,"FontLoader",(function(){return Uc})),n.d(e,"FrontFaceDirectionCCW",(function(){return f})),n.d(e,"FrontFaceDirectionCW",(function(){return h})),n.d(e,"FrontSide",(function(){return g})),n.d(e,"Frustum",(function(){return Jr})),n.d(e,"GammaEncoding",(function(){return Re})),n.d(e,"Geometry",(function(){return Nr})),n.d(e,"GeometryUtils",(function(){return rd})),n.d(e,"GreaterDepth",(function(){return K})),n.d(e,"GreaterEqualDepth",(function(){return J})),n.d(e,"GreaterEqualStencilFunc",(function(){return on})),n.d(e,"GreaterStencilFunc",(function(){return rn})),n.d(e,"GridHelper",(function(){return nf})),n.d(e,"Group",(function(){return Wo})),n.d(e,"HalfFloatType",(function(){return Bt})),n.d(e,"HemisphereLight",(function(){return vc})),n.d(e,"HemisphereLightHelper",(function(){return tf})),n.d(e,"HemisphereLightProbe",(function(){return $c})),n.d(e,"IcosahedronBufferGeometry",(function(){return al})),n.d(e,"IcosahedronGeometry",(function(){return rl})),n.d(e,"ImageBitmapLoader",(function(){return Bc})),n.d(e,"ImageLoader",(function(){return Hu})),n.d(e,"ImageUtils",(function(){return bn})),n.d(e,"ImmediateRenderObject",(function(){return zh})),n.d(e,"IncrementStencilOp",(function(){return Qe})),n.d(e,"IncrementWrapStencilOp",(function(){return Xe})),n.d(e,"InstancedBufferAttribute",(function(){return Ac})),n.d(e,"InstancedBufferGeometry",(function(){return Pc})),n.d(e,"InstancedInterleavedBuffer",(function(){return Th})),n.d(e,"Int16Attribute",(function(){return Hf})),n.d(e,"Int16BufferAttribute",(function(){return Qi})),n.d(e,"Int32Attribute",(function(){return Wf})),n.d(e,"Int32BufferAttribute",(function(){return Xi})),n.d(e,"Int8Attribute",(function(){return jf})),n.d(e,"Int8BufferAttribute",(function(){return Wi})),n.d(e,"IntType",(function(){return Rt})),n.d(e,"InterleavedBuffer",(function(){return ns})),n.d(e,"InterleavedBufferAttribute",(function(){return is})),n.d(e,"Interpolant",(function(){return xu})),n.d(e,"InterpolateDiscrete",(function(){return Ee})),n.d(e,"InterpolateLinear",(function(){return Me})),n.d(e,"InterpolateSmooth",(function(){return Te})),n.d(e,"InvertStencilOp",(function(){return Je})),n.d(e,"JSONLoader",(function(){return od})),n.d(e,"KeepStencilOp",(function(){return qe})),n.d(e,"KeyframeTrack",(function(){return Eu})),n.d(e,"LOD",(function(){return _s})),n.d(e,"LatheBufferGeometry",(function(){return Xl})),n.d(e,"LatheGeometry",(function(){return Yl})),n.d(e,"Layers",(function(){return Dn})),n.d(e,"LensFlare",(function(){return ld})),n.d(e,"LessDepth",(function(){return Y})),n.d(e,"LessEqualDepth",(function(){return X})),n.d(e,"LessEqualStencilFunc",(function(){return nn})),n.d(e,"LessStencilFunc",(function(){return tn})),n.d(e,"Light",(function(){return mc})),n.d(e,"LightProbe",(function(){return qc})),n.d(e,"LightProbeHelper",(function(){return ef})),n.d(e,"LightShadow",(function(){return gc})),n.d(e,"Line",(function(){return Is})),n.d(e,"Line3",(function(){return Dh})),n.d(e,"LineBasicMaterial",(function(){return Cs})),n.d(e,"LineCurve",(function(){return oc})),n.d(e,"LineCurve3",(function(){return sc})),n.d(e,"LineDashedMaterial",(function(){return gu})),n.d(e,"LineLoop",(function(){return zs})),n.d(e,"LinePieces",(function(){return Pf})),n.d(e,"LineSegments",(function(){return Ds})),n.d(e,"LineStrip",(function(){return kf})),n.d(e,"LinearEncoding",(function(){return Ie})),n.d(e,"LinearFilter",(function(){return Tt})),n.d(e,"LinearInterpolant",(function(){return wu})),n.d(e,"LinearMipMapLinearFilter",(function(){return At})),n.d(e,"LinearMipMapNearestFilter",(function(){return kt})),n.d(e,"LinearMipmapLinearFilter",(function(){return Pt})),n.d(e,"LinearMipmapNearestFilter",(function(){return Ct})),n.d(e,"LinearToneMapping",(function(){return at})),n.d(e,"Loader",(function(){return zu})),n.d(e,"LoaderUtils",(function(){return kc})),n.d(e,"LoadingManager",(function(){return Ru})),n.d(e,"LogLuvEncoding",(function(){return ze})),n.d(e,"LoopOnce",(function(){return _e})),n.d(e,"LoopPingPong",(function(){return Se})),n.d(e,"LoopRepeat",(function(){return we})),n.d(e,"LuminanceAlphaFormat",(function(){return $t})),n.d(e,"LuminanceFormat",(function(){return qt})),n.d(e,"MOUSE",(function(){return a})),n.d(e,"Material",(function(){return Ui})),n.d(e,"MaterialLoader",(function(){return Cc})),n.d(e,"Math",(function(){return cn})),n.d(e,"Matrix3",(function(){return yn})),n.d(e,"Matrix4",(function(){return Ln})),n.d(e,"MaxEquation",(function(){return R})),n.d(e,"Mesh",(function(){return Cr})),n.d(e,"MeshBasicMaterial",(function(){return Hi})),n.d(e,"MeshDepthMaterial",(function(){return Fo})),n.d(e,"MeshDistanceMaterial",(function(){return jo})),n.d(e,"MeshFaceMaterial",(function(){return Af})),n.d(e,"MeshLambertMaterial",(function(){return mu})),n.d(e,"MeshMatcapMaterial",(function(){return vu})),n.d(e,"MeshNormalMaterial",(function(){return pu})),n.d(e,"MeshPhongMaterial",(function(){return fu})),n.d(e,"MeshPhysicalMaterial",(function(){return hu})),n.d(e,"MeshStandardMaterial",(function(){return cu})),n.d(e,"MeshToonMaterial",(function(){return du})),n.d(e,"MinEquation",(function(){return N})),n.d(e,"MirroredRepeatWrapping",(function(){return xt})),n.d(e,"MixOperation",(function(){return nt})),n.d(e,"MultiMaterial",(function(){return Of})),n.d(e,"MultiplyBlending",(function(){return P})),n.d(e,"MultiplyOperation",(function(){return et})),n.d(e,"NearestFilter",(function(){return _t})),n.d(e,"NearestMipMapLinearFilter",(function(){return Mt})),n.d(e,"NearestMipMapNearestFilter",(function(){return St})),n.d(e,"NearestMipmapLinearFilter",(function(){return Et})),n.d(e,"NearestMipmapNearestFilter",(function(){return wt})),n.d(e,"NeverDepth",(function(){return $})),n.d(e,"NeverStencilFunc",(function(){return Ke})),n.d(e,"NoBlending",(function(){return M})),n.d(e,"NoColors",(function(){return w})),n.d(e,"NoToneMapping",(function(){return rt})),n.d(e,"NormalBlending",(function(){return T})),n.d(e,"NotEqualDepth",(function(){return tt})),n.d(e,"NotEqualStencilFunc",(function(){return an})),n.d(e,"NumberKeyframeTrack",(function(){return Cu})),n.d(e,"Object3D",(function(){return Xn})),n.d(e,"ObjectLoader",(function(){return Ic})),n.d(e,"ObjectSpaceNormalMap",(function(){return Ge})),n.d(e,"OctahedronBufferGeometry",(function(){return il})),n.d(e,"OctahedronGeometry",(function(){return nl})),n.d(e,"OneFactor",(function(){return z})),n.d(e,"OneMinusDstAlphaFactor",(function(){return H})),n.d(e,"OneMinusDstColorFactor",(function(){return W})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return V})),n.d(e,"OneMinusSrcColorFactor",(function(){return F})),n.d(e,"OrthographicCamera",(function(){return wc})),n.d(e,"PCFShadowMap",(function(){return p})),n.d(e,"PCFSoftShadowMap",(function(){return m})),n.d(e,"ParametricBufferGeometry",(function(){return Zs})),n.d(e,"ParametricGeometry",(function(){return Xs})),n.d(e,"Particle",(function(){return If})),n.d(e,"ParticleBasicMaterial",(function(){return Df})),n.d(e,"ParticleSystem",(function(){return Nf})),n.d(e,"ParticleSystemMaterial",(function(){return zf})),n.d(e,"Path",(function(){return dc})),n.d(e,"PerspectiveCamera",(function(){return Ur})),n.d(e,"Plane",(function(){return Yr})),n.d(e,"PlaneBufferGeometry",(function(){return aa})),n.d(e,"PlaneGeometry",(function(){return ra})),n.d(e,"PlaneHelper",(function(){return _f})),n.d(e,"PointCloud",(function(){return Lf})),n.d(e,"PointCloudMaterial",(function(){return Rf})),n.d(e,"PointLight",(function(){return _c})),n.d(e,"PointLightHelper",(function(){return Yh})),n.d(e,"Points",(function(){return Hs})),n.d(e,"PointsMaterial",(function(){return Bs})),n.d(e,"PolarGridHelper",(function(){return rf})),n.d(e,"PolyhedronBufferGeometry",(function(){return Ks})),n.d(e,"PolyhedronGeometry",(function(){return Js})),n.d(e,"PositionalAudio",(function(){return uh})),n.d(e,"PositionalAudioHelper",(function(){return af})),n.d(e,"PropertyBinding",(function(){return _h})),n.d(e,"PropertyMixer",(function(){return hh})),n.d(e,"QuadraticBezierCurve",(function(){return lc})),n.d(e,"QuadraticBezierCurve3",(function(){return uc})),n.d(e,"Quaternion",(function(){return fn})),n.d(e,"QuaternionKeyframeTrack",(function(){return Pu})),n.d(e,"QuaternionLinearInterpolant",(function(){return ku})),n.d(e,"REVISION",(function(){return r})),n.d(e,"RGBADepthPacking",(function(){return Ue})),n.d(e,"RGBAFormat",(function(){return Wt})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return ye})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return me})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return ve})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return ge})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return be})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return xe})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return se})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return le})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return ue})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return ce})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return he})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return fe})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return de})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return pe})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return ae})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return re})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return Kt})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return te})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return ee})),n.d(e,"RGBDEncoding",(function(){return je})),n.d(e,"RGBEEncoding",(function(){return De})),n.d(e,"RGBEFormat",(function(){return Qt})),n.d(e,"RGBFormat",(function(){return Gt})),n.d(e,"RGBM16Encoding",(function(){return Fe})),n.d(e,"RGBM7Encoding",(function(){return Be})),n.d(e,"RGB_ETC1_Format",(function(){return oe})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return ie})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return ne})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return Jt})),n.d(e,"RawShaderMaterial",(function(){return uu})),n.d(e,"Ray",(function(){return _i})),n.d(e,"Raycaster",(function(){return Ch})),n.d(e,"RectAreaLight",(function(){return Tc})),n.d(e,"RectAreaLightHelper",(function(){return Xh})),n.d(e,"RedFormat",(function(){return Zt})),n.d(e,"ReinhardToneMapping",(function(){return ot})),n.d(e,"RepeatWrapping",(function(){return yt})),n.d(e,"ReplaceStencilOp",(function(){return $e})),n.d(e,"ReverseSubtractEquation",(function(){return I})),n.d(e,"RingBufferGeometry",(function(){return Ql})),n.d(e,"RingGeometry",(function(){return $l})),n.d(e,"Scene",(function(){return Zn})),n.d(e,"SceneUtils",(function(){return sd})),n.d(e,"ShaderChunk",(function(){return Kr})),n.d(e,"ShaderLib",(function(){return ea})),n.d(e,"ShaderMaterial",(function(){return jr})),n.d(e,"ShadowMaterial",(function(){return lu})),n.d(e,"Shape",(function(){return pc})),n.d(e,"ShapeBufferGeometry",(function(){return Jl})),n.d(e,"ShapeGeometry",(function(){return Zl})),n.d(e,"ShapePath",(function(){return Fc})),n.d(e,"ShapeUtils",(function(){return Dl})),n.d(e,"ShortType",(function(){return It})),n.d(e,"Skeleton",(function(){return Ms})),n.d(e,"SkeletonHelper",(function(){return Qh})),n.d(e,"SkinnedMesh",(function(){return ws})),n.d(e,"SmoothShading",(function(){return _})),n.d(e,"Sphere",(function(){return di})),n.d(e,"SphereBufferGeometry",(function(){return ql})),n.d(e,"SphereGeometry",(function(){return Wl})),n.d(e,"Spherical",(function(){return Ah})),n.d(e,"SphericalHarmonics3",(function(){return Wc})),n.d(e,"SphericalReflectionMapping",(function(){return mt})),n.d(e,"Spline",(function(){return Zf})),n.d(e,"SplineCurve",(function(){return cc})),n.d(e,"SplineCurve3",(function(){return Xf})),n.d(e,"SpotLight",(function(){return bc})),n.d(e,"SpotLightHelper",(function(){return Gh})),n.d(e,"SpotLightShadow",(function(){return yc})),n.d(e,"Sprite",(function(){return gs})),n.d(e,"SpriteMaterial",(function(){return rs})),n.d(e,"SrcAlphaFactor",(function(){return j})),n.d(e,"SrcAlphaSaturateFactor",(function(){return q})),n.d(e,"SrcColorFactor",(function(){return B})),n.d(e,"StereoCamera",(function(){return Zc})),n.d(e,"StringKeyframeTrack",(function(){return Au})),n.d(e,"SubtractEquation",(function(){return L})),n.d(e,"SubtractiveBlending",(function(){return k})),n.d(e,"TOUCH",(function(){return o})),n.d(e,"TangentSpaceNormalMap",(function(){return He})),n.d(e,"TetrahedronBufferGeometry",(function(){return el})),n.d(e,"TetrahedronGeometry",(function(){return tl})),n.d(e,"TextBufferGeometry",(function(){return Gl})),n.d(e,"TextGeometry",(function(){return Hl})),n.d(e,"Texture",(function(){return _n})),n.d(e,"TextureLoader",(function(){return Wu})),n.d(e,"TorusBufferGeometry",(function(){return dl})),n.d(e,"TorusGeometry",(function(){return fl})),n.d(e,"TorusKnotBufferGeometry",(function(){return hl})),n.d(e,"TorusKnotGeometry",(function(){return cl})),n.d(e,"Triangle",(function(){return Li})),n.d(e,"TriangleFanDrawMode",(function(){return Le})),n.d(e,"TriangleStripDrawMode",(function(){return Oe})),n.d(e,"TrianglesDrawMode",(function(){return Ae})),n.d(e,"TubeBufferGeometry",(function(){return ul})),n.d(e,"TubeGeometry",(function(){return ll})),n.d(e,"UVMapping",(function(){return ct})),n.d(e,"Uint16Attribute",(function(){return Gf})),n.d(e,"Uint16BufferAttribute",(function(){return Yi})),n.d(e,"Uint32Attribute",(function(){return qf})),n.d(e,"Uint32BufferAttribute",(function(){return Zi})),n.d(e,"Uint8Attribute",(function(){return Vf})),n.d(e,"Uint8BufferAttribute",(function(){return qi})),n.d(e,"Uint8ClampedAttribute",(function(){return Uf})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return $i})),n.d(e,"Uncharted2ToneMapping",(function(){return st})),n.d(e,"Uniform",(function(){return Mh})),n.d(e,"UniformsLib",(function(){return ta})),n.d(e,"UniformsUtils",(function(){return Fr})),n.d(e,"UnsignedByteType",(function(){return Ot})),n.d(e,"UnsignedInt248Type",(function(){return Ut})),n.d(e,"UnsignedIntType",(function(){return Dt})),n.d(e,"UnsignedShort4444Type",(function(){return Ft})),n.d(e,"UnsignedShort5551Type",(function(){return jt})),n.d(e,"UnsignedShort565Type",(function(){return Vt})),n.d(e,"UnsignedShortType",(function(){return Nt})),n.d(e,"VSMShadowMap",(function(){return v})),n.d(e,"Vector2",(function(){return hn})),n.d(e,"Vector3",(function(){return mn})),n.d(e,"Vector4",(function(){return wn})),n.d(e,"VectorKeyframeTrack",(function(){return Ou})),n.d(e,"Vertex",(function(){return Bf})),n.d(e,"VertexColors",(function(){return E})),n.d(e,"VertexNormalsHelper",(function(){return Uh})),n.d(e,"VideoTexture",(function(){return Ws})),n.d(e,"WebGLMultisampleRenderTarget",(function(){return En})),n.d(e,"WebGLRenderTarget",(function(){return Sn})),n.d(e,"WebGLRenderTargetCube",(function(){return Gr})),n.d(e,"WebGLRenderer",(function(){return Ko})),n.d(e,"WebGLUtils",(function(){return Go})),n.d(e,"WireframeGeometry",(function(){return Ys})),n.d(e,"WireframeHelper",(function(){return ed})),n.d(e,"WrapAroundEnding",(function(){return Pe})),n.d(e,"XHRLoader",(function(){return nd})),n.d(e,"ZeroCurvatureEnding",(function(){return Ce})),n.d(e,"ZeroFactor",(function(){return D})),n.d(e,"ZeroSlopeEnding",(function(){return ke})),n.d(e,"ZeroStencilOp",(function(){return We})),n.d(e,"sRGBEncoding",(function(){return Ne})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});for(var r="108",a={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,l=1,u=2,c=3,h=0,f=1,d=0,p=1,m=2,v=3,g=0,y=1,b=2,x=1,_=2,w=0,S=1,E=2,M=0,T=1,C=2,k=3,P=4,A=5,O=100,L=101,I=102,N=103,R=104,D=200,z=201,B=202,F=203,j=204,V=205,U=206,H=207,G=208,W=209,q=210,$=0,Q=1,Y=2,X=3,Z=4,J=5,K=6,tt=7,et=0,nt=1,it=2,rt=0,at=1,ot=2,st=3,lt=4,ut=5,ct=300,ht=301,ft=302,dt=303,pt=304,mt=305,vt=306,gt=307,yt=1e3,bt=1001,xt=1002,_t=1003,wt=1004,St=1004,Et=1005,Mt=1005,Tt=1006,Ct=1007,kt=1007,Pt=1008,At=1008,Ot=1009,Lt=1010,It=1011,Nt=1012,Rt=1013,Dt=1014,zt=1015,Bt=1016,Ft=1017,jt=1018,Vt=1019,Ut=1020,Ht=1021,Gt=1022,Wt=1023,qt=1024,$t=1025,Qt=Wt,Yt=1026,Xt=1027,Zt=1028,Jt=33776,Kt=33777,te=33778,ee=33779,ne=35840,ie=35841,re=35842,ae=35843,oe=36196,se=37808,le=37809,ue=37810,ce=37811,he=37812,fe=37813,de=37814,pe=37815,me=37816,ve=37817,ge=37818,ye=37819,be=37820,xe=37821,_e=2200,we=2201,Se=2202,Ee=2300,Me=2301,Te=2302,Ce=2400,ke=2401,Pe=2402,Ae=0,Oe=1,Le=2,Ie=3e3,Ne=3001,Re=3007,De=3002,ze=3003,Be=3004,Fe=3005,je=3006,Ve=3200,Ue=3201,He=0,Ge=1,We=0,qe=7680,$e=7681,Qe=7682,Ye=7683,Xe=34055,Ze=34056,Je=5386,Ke=512,tn=513,en=514,nn=515,rn=516,an=517,on=518,sn=519,ln=[],un=0;un<256;un++)ln[un]=(un<16?"0":"")+un.toString(16);var cn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ln[255&t]+ln[t>>8&255]+ln[t>>16&255]+ln[t>>24&255]+"-"+ln[255&e]+ln[e>>8&255]+"-"+ln[e>>16&15|64]+ln[e>>24&255]+"-"+ln[63&n|128]+ln[n>>8&255]+"-"+ln[n>>16&255]+ln[n>>24&255]+ln[255&i]+ln[i>>8&255]+ln[i>>16&255]+ln[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*cn.DEG2RAD},radToDeg:function(t){return t*cn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function hn(t,e){this.x=t||0,this.y=e||0}function fn(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}Object.defineProperties(hn.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(hn.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}}),Object.assign(fn,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[a+0],f=r[a+1],d=r[a+2],p=r[a+3];if(c!==p||s!==h||l!==f||u!==d){var m=1-o,v=s*h+l*f+u*d+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var _=o*g;if(s=s*m+h*_,l=l*m+f*_,u=u*m+d*_,c=c*m+p*_,m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}}),Object.defineProperties(fn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(fn.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t.order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),h=s(n/2),f=s(i/2),d=s(r/2);return"XYZ"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d):"YXZ"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d):"ZXY"===a?(this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d):"ZYX"===a?(this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d):"YZX"===a?(this._x=h*u*c+l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c-h*f*d):"XZY"===a&&(this._x=h*u*c-l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c+h*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],f=i+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-l)*e,this._y=(a-u)*e,this._z=(o-r)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(c-l)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(a+u)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(a-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(o-r)/e,this._x=(a+u)/e,this._y=(l+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(cn.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-e;return this._w=l*a+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),h=Math.sin((1-e)*c)/u,f=Math.sin(e*c)/u;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=i*h+this._y*f,this._z=r*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var dn=new mn,pn=new fn;function mn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(mn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(pn.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(pn.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*i-o*n,u=s*n+o*e-r*i,c=s*i+r*n-a*e,h=-r*e-a*n-o*i;return this.x=l*s+h*-r+u*-o-c*-a,this.y=u*s+h*-a+c*-r-l*-o,this.z=c*s+h*-o+l*-a-u*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return dn.copy(this).projectOnVector(t),this.sub(dn)},reflect:function(t){return this.sub(dn.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(cn.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var vn,gn=new mn;function yn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(yn.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,l){var u=this.elements;return u[0]=t,u[1]=i,u[2]=o,u[3]=e,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)gn.x=t.getX(e),gn.y=t.getY(e),gn.z=t.getZ(e),gn.applyMatrix3(this),t.setXYZ(e,gn.x,gn.y,gn.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=i[0],m=i[3],v=i[6],g=i[1],y=i[4],b=i[7],x=i[2],_=i[5],w=i[8];return r[0]=a*p+o*g+s*x,r[3]=a*m+o*y+s*_,r[6]=a*v+o*b+s*w,r[1]=l*p+u*g+c*x,r[4]=l*m+u*y+c*_,r[7]=l*v+u*b+c*w,r[2]=h*p+f*g+d*x,r[5]=h*m+f*y+d*_,r[8]=h*v+f*b+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*a*u-e*o*l-n*r*u+n*o*s+i*r*l-i*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],f=n[8],d=f*l-u*h,p=u*c-f*s,m=h*s-l*c,v=r*d+a*p+o*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=d*y,i[1]=(o*h-f*a)*y,i[2]=(u*a-o*l)*y,i[3]=p*y,i[4]=(f*r-o*c)*y,i[5]=(o*s-u*r)*y,i[6]=m*y,i[7]=(a*c-h*r)*y,i[8]=(l*r-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*a+l*o)+a+t,-i*l,i*s,-i*(-l*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],u=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*l,i[6]=e*o+n*u,i[1]=-n*r+e*s,i[4]=-n*a+e*l,i[7]=-n*o+e*u,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var bn={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===vn&&(vn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),vn.width=t.width,vn.height=t.height;var n=vn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=vn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},xn=0;function _n(t,e,n,i,r,a,o,s,l,u){Object.defineProperty(this,"id",{value:xn++}),this.uuid=cn.generateUUID(),this.name="",this.image=void 0!==t?t:_n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:_n.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:bt,this.wrapT=void 0!==i?i:bt,this.magFilter=void 0!==r?r:Tt,this.minFilter=void 0!==a?a:Pt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Wt,this.type=void 0!==s?s:Ot,this.offset=new hn(0,0),this.repeat=new hn(1,1),this.center=new hn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Ie,this.version=0,this.onUpdate=null}function wn(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function Sn(t,e,n){this.width=t,this.height=e,this.scissor=new wn(0,0,t,e),this.scissorTest=!1,this.viewport=new wn(0,0,t,e),n=n||{},this.texture=new _n(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Tt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function En(t,e,n){Sn.call(this,t,e,n),this.samples=4}_n.DEFAULT_IMAGE=void 0,_n.DEFAULT_MAPPING=ct,_n.prototype=Object.assign(Object.create(i.prototype),{constructor:_n,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=cn.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)r.push(bn.getDataURL(i[a]))}else r=bn.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==ct)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case yt:t.x=t.x-Math.floor(t.x);break;case bt:t.x=t.x<0?0:1;break;case xt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case yt:t.y=t.y-Math.floor(t.y);break;case bt:t.y=t.y<0?0:1;break;case xt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(_n.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(wn.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(wn.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,a=t.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+f)<.1&&Math.abs(h+d)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+u)/4,b=(l+f)/4,x=(h+d)/4;return m>v&&m>g?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=b/n):v>g?v<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(v)),r=x/i):g<.01?(n=.707106781,i=.707106781,r=0):(n=b/(r=Math.sqrt(g)),i=x/r),this.set(n,i,r,e),this}var _=Math.sqrt((d-h)*(d-h)+(l-f)*(l-f)+(u-s)*(u-s));return Math.abs(_)<.001&&(_=1),this.x=(d-h)/_,this.y=(l-f)/_,this.z=(u-s)/_,this.w=Math.acos((o+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Sn.prototype=Object.assign(Object.create(i.prototype),{constructor:Sn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),En.prototype=Object.assign(Object.create(Sn.prototype),{constructor:En,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Sn.prototype.copy.call(this,t),this.samples=t.samples,this}});var Mn=new mn,Tn=new Ln,Cn=new mn(0,0,0),kn=new mn(1,1,1),Pn=new mn,An=new mn,On=new mn;function Ln(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ln.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,l,u,c,h,f,d,p,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ln).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/Mn.setFromMatrixColumn(t,0).length(),r=1/Mn.setFromMatrixColumn(t,1).length(),a=1/Mn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var h=a*u,f=a*c,d=o*u,p=o*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=f+d*l,e[5]=h-p*l,e[9]=-o*s,e[2]=p-h*l,e[6]=d+f*l,e[10]=a*s}else if("YXZ"===t.order){var m=s*u,v=s*c,g=l*u,y=l*c;e[0]=m+y*o,e[4]=g*o-v,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-o,e[2]=v*o-g,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){m=s*u,v=s*c,g=l*u,y=l*c;e[0]=m-y*o,e[4]=-a*c,e[8]=g+v*o,e[1]=v+g*o,e[5]=a*u,e[9]=y-m*o,e[2]=-a*l,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){h=a*u,f=a*c,d=o*u,p=o*c;e[0]=s*u,e[4]=d*l-f,e[8]=h*l+p,e[1]=s*c,e[5]=p*l+h,e[9]=f*l-d,e[2]=-l,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var b=a*s,x=a*l,_=o*s,w=o*l;e[0]=s*u,e[4]=w-b*c,e[8]=_*c+x,e[1]=c,e[5]=a*u,e[9]=-o*u,e[2]=-l*u,e[6]=x*c+_,e[10]=b-w*c}else if("XZY"===t.order){b=a*s,x=a*l,_=o*s,w=o*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=b*c+w,e[5]=a*u,e[9]=x*c-_,e[2]=_*c-x,e[6]=o*u,e[10]=w*c+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Cn,t,kn)},lookAt:function(t,e,n){var i=this.elements;return On.subVectors(t,e),0===On.lengthSq()&&(On.z=1),On.normalize(),Pn.crossVectors(n,On),0===Pn.lengthSq()&&(1===Math.abs(n.z)?On.x+=1e-4:On.z+=1e-4,On.normalize(),Pn.crossVectors(n,On)),Pn.normalize(),An.crossVectors(On,Pn),i[0]=Pn.x,i[4]=An.x,i[8]=On.x,i[1]=Pn.y,i[5]=An.y,i[9]=On.y,i[2]=Pn.z,i[6]=An.z,i[10]=On.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],_=i[0],w=i[4],S=i[8],E=i[12],M=i[1],T=i[5],C=i[9],k=i[13],P=i[2],A=i[6],O=i[10],L=i[14],I=i[3],N=i[7],R=i[11],D=i[15];return r[0]=a*_+o*M+s*P+l*I,r[4]=a*w+o*T+s*A+l*N,r[8]=a*S+o*C+s*O+l*R,r[12]=a*E+o*k+s*L+l*D,r[1]=u*_+c*M+h*P+f*I,r[5]=u*w+c*T+h*A+f*N,r[9]=u*S+c*C+h*O+f*R,r[13]=u*E+c*k+h*L+f*D,r[2]=d*_+p*M+m*P+v*I,r[6]=d*w+p*T+m*A+v*N,r[10]=d*S+p*C+m*O+v*R,r[14]=d*E+p*k+m*L+v*D,r[3]=g*_+y*M+b*P+x*I,r[7]=g*w+y*T+b*A+x*N,r[11]=g*S+y*C+b*O+x*R,r[15]=g*E+y*k+b*L+x*D,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)Mn.x=t.getX(e),Mn.y=t.getY(e),Mn.z=t.getZ(e),Mn.applyMatrix4(this),t.setXYZ(e,Mn.x,Mn.y,Mn.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+r*s*c-i*l*c-r*o*h+n*l*h+i*o*f-n*s*f)+t[7]*(+e*s*f-e*l*h+r*a*h-i*a*f+i*l*u-r*s*u)+t[11]*(+e*l*c-e*o*f-r*a*c+n*a*f+r*o*u-n*l*u)+t[15]*(-i*o*u-e*s*c+e*o*h+i*a*c-n*a*h+n*s*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],f=i[8],d=i[9],p=i[10],m=i[11],v=i[12],g=i[13],y=i[14],b=i[15],x=d*y*h-g*p*h+g*c*m-u*y*m-d*c*b+u*p*b,_=v*p*h-f*y*h-v*c*m+l*y*m+f*c*b-l*p*b,w=f*g*h-v*d*h+v*u*m-l*g*m-f*u*b+l*d*b,S=v*d*c-f*g*c-v*u*p+l*g*p+f*u*y-l*d*y,E=r*x+a*_+o*w+s*S;if(0===E){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var T=1/E;return n[0]=x*T,n[1]=(g*p*s-d*y*s-g*o*m+a*y*m+d*o*b-a*p*b)*T,n[2]=(u*y*s-g*c*s+g*o*h-a*y*h-u*o*b+a*c*b)*T,n[3]=(d*c*s-u*p*s-d*o*h+a*p*h+u*o*m-a*c*m)*T,n[4]=_*T,n[5]=(f*y*s-v*p*s+v*o*m-r*y*m-f*o*b+r*p*b)*T,n[6]=(v*c*s-l*y*s-v*o*h+r*y*h+l*o*b-r*c*b)*T,n[7]=(l*p*s-f*c*s+f*o*h-r*p*h-l*o*m+r*c*m)*T,n[8]=w*T,n[9]=(v*d*s-f*g*s-v*a*m+r*g*m+f*a*b-r*d*b)*T,n[10]=(l*g*s-v*u*s+v*a*h-r*g*h-l*a*b+r*u*b)*T,n[11]=(f*u*s-l*d*s-f*a*h+r*d*h+l*a*m-r*u*m)*T,n[12]=S*T,n[13]=(f*g*o-v*d*o+v*a*p-r*g*p-f*a*y+r*d*y)*T,n[14]=(v*u*o-l*g*o-v*a*c+r*g*c+l*a*y-r*u*y)*T,n[15]=(l*d*o-f*u*o+f*a*c-r*d*c-l*a*p+r*u*p)*T,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,u=a+a,c=o+o,h=r*l,f=r*u,d=r*c,p=a*u,m=a*c,v=o*c,g=s*l,y=s*u,b=s*c,x=n.x,_=n.y,w=n.z;return i[0]=(1-(p+v))*x,i[1]=(f+b)*x,i[2]=(d-y)*x,i[3]=0,i[4]=(f-b)*_,i[5]=(1-(h+v))*_,i[6]=(m+g)*_,i[7]=0,i[8]=(d+y)*w,i[9]=(m-g)*w,i[10]=(1-(h+p))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=Mn.set(i[0],i[1],i[2]).length(),a=Mn.set(i[4],i[5],i[6]).length(),o=Mn.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Tn.copy(this);var s=1/r,l=1/a,u=1/o;return Tn.elements[0]*=s,Tn.elements[1]*=s,Tn.elements[2]*=s,Tn.elements[4]*=l,Tn.elements[5]*=l,Tn.elements[6]*=l,Tn.elements[8]*=u,Tn.elements[9]*=u,Tn.elements[10]*=u,e.setFromRotationMatrix(Tn),n.x=r,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(e-t),l=2*r/(n-i),u=(e+t)/(e-t),c=(n+i)/(n-i),h=-(a+r)/(a-r),f=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),l=1/(n-i),u=1/(a-r),c=(e+t)*s,h=(n+i)*l,f=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var In=new Ln,Nn=new fn;function Rn(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||Rn.DefaultOrder}function Dn(){this.mask=1}Rn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Rn.DefaultOrder="XYZ",Object.defineProperties(Rn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Rn.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=cn.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],l=r[1],u=r[5],c=r[9],h=r[2],f=r[6],d=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return In.makeRotationFromQuaternion(t),this.setFromRotationMatrix(In,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return Nn.setFromEuler(this),this.setFromQuaternion(Nn,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new mn(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(Dn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var zn=0,Bn=new mn,Fn=new fn,jn=new Ln,Vn=new mn,Un=new mn,Hn=new mn,Gn=new fn,Wn=new mn(1,0,0),qn=new mn(0,1,0),$n=new mn(0,0,1),Qn={type:"added"},Yn={type:"removed"};function Xn(){Object.defineProperty(this,"id",{value:zn++}),this.uuid=cn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xn.DefaultUp.clone();var t=new mn,e=new Rn,n=new fn,i=new mn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ln},normalMatrix:{value:new yn}}),this.matrix=new Ln,this.matrixWorld=new Ln,this.matrixAutoUpdate=Xn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Zn(){Xn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Xn.DefaultUp=new mn(0,1,0),Xn.DefaultMatrixAutoUpdate=!0,Xn.prototype=Object.assign(Object.create(i.prototype),{constructor:Xn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.multiply(Fn),this},rotateOnWorldAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.premultiply(Fn),this},rotateX:function(t){return this.rotateOnAxis(Wn,t)},rotateY:function(t){return this.rotateOnAxis(qn,t)},rotateZ:function(t){return this.rotateOnAxis($n,t)},translateOnAxis:function(t,e){return Bn.copy(t).applyQuaternion(this.quaternion),this.position.add(Bn.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wn,t)},translateY:function(t){return this.translateOnAxis(qn,t)},translateZ:function(t){return this.translateOnAxis($n,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(jn.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Vn.copy(t):Vn.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Un.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jn.lookAt(Un,Vn,this.up):jn.lookAt(Vn,Un,this.up),this.quaternion.setFromRotationMatrix(jn),i&&(jn.extractRotation(i.matrixWorld),Fn.setFromRotationMatrix(jn),this.quaternion.premultiply(Fn.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Qn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Yn)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),jn.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),jn.multiply(t.parent.matrixWorld)),t.applyMatrix(jn),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new mn),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new fn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Un,t,Hn),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new mn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Un,Gn,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ae&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];r(t.shapes,u)}else r(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(r(t.materials,this.material[s]));i.material=c}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(e){var h=m(t.geometries),f=m(t.materials),d=m(t.textures),p=m(t.images);o=m(t.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=i,n;function m(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),Zn.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Zn,isScene:!0,copy:function(t,e){return Xn.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Xn.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Jn=[new mn,new mn,new mn,new mn,new mn,new mn,new mn,new mn],Kn=new mn,ti=new mn,ei=new mn,ni=new mn,ii=new mn,ri=new mn,ai=new mn,oi=new mn,si=new mn,li=new mn,ui=new mn;function ci(t,e){this.min=void 0!==t?t:new mn(1/0,1/0,1/0),this.max=void 0!==e?e:new mn(-1/0,-1/0,-1/0)}function hi(t,e,n,i,r){var a,o;for(a=0,o=t.length-3;a<=o;a+=3){ui.fromArray(t,a);var s=r.x*Math.abs(ui.x)+r.y*Math.abs(ui.y)+r.z*Math.abs(ui.z),l=e.dot(ui),u=n.dot(ui),c=i.dot(ui);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(ci.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var u=t[s],c=t[s+1],h=t[s+2];u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var u=t.getX(s),c=t.getY(s),h=t.getZ(s);u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Kn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new mn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new mn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){var e,n;t.updateWorldMatrix(!1,!1);var i=t.geometry;if(void 0!==i)if(i.isGeometry){var r=i.vertices;for(e=0,n=r.length;e<n;e++)Kn.copy(r[e]),Kn.applyMatrix4(t.matrixWorld),this.expandByPoint(Kn)}else if(i.isBufferGeometry){var a=i.attributes.position;if(void 0!==a)for(e=0,n=a.count;e<n;e++)Kn.fromBufferAttribute(a,e).applyMatrix4(t.matrixWorld),this.expandByPoint(Kn)}var o=t.children;for(e=0,n=o.length;e<n;e++)this.expandByObject(o[e]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new mn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Kn),Kn.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(oi),si.subVectors(this.max,oi),ti.subVectors(t.a,oi),ei.subVectors(t.b,oi),ni.subVectors(t.c,oi),ii.subVectors(ei,ti),ri.subVectors(ni,ei),ai.subVectors(ti,ni);var e=[0,-ii.z,ii.y,0,-ri.z,ri.y,0,-ai.z,ai.y,ii.z,0,-ii.x,ri.z,0,-ri.x,ai.z,0,-ai.x,-ii.y,ii.x,0,-ri.y,ri.x,0,-ai.y,ai.x,0];return!!hi(e,ti,ei,ni,si)&&(!!hi(e=[1,0,0,0,1,0,0,0,1],ti,ei,ni,si)&&(li.crossVectors(ii,ri),hi(e=[li.x,li.y,li.z],ti,ei,ni,si)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new mn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Kn.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Kn).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(Jn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Jn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Jn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Jn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Jn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Jn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Jn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Jn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Jn),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var fi=new ci;function di(t,e){this.center=void 0!==t?t:new mn,this.radius=void 0!==e?e:0}Object.assign(di.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):fi.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new mn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new ci),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var pi=new mn,mi=new mn,vi=new mn,gi=new mn,yi=new mn,bi=new mn,xi=new mn;function _i(t,e){this.origin=void 0!==t?t:new mn,this.direction=void 0!==e?e:new mn}Object.assign(_i.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new mn),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,pi)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new mn),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=pi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(pi.copy(this.direction).multiplyScalar(e).add(this.origin),pi.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){mi.copy(t).add(e).multiplyScalar(.5),vi.copy(e).sub(t).normalize(),gi.copy(this.origin).sub(mi);var r,a,o,s,l=.5*t.distanceTo(e),u=-this.direction.dot(vi),c=gi.dot(this.direction),h=-gi.dot(vi),f=gi.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(a=u*c-h,s=l*d,(r=u*h-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(r*=p)*(r+u*(a*=p)+2*c)+a*(u*r+a+2*h)+f}else a=l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+f;else a=-l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+f;else a<=-s?o=-(r=Math.max(0,-(-u*l+c)))*r+(a=r>0?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+f:a<=s?(r=0,o=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+f):o=-(r=Math.max(0,-(u*l+c)))*r+(a=r>0?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+f;else a=u>0?-l:l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(vi).multiplyScalar(a).add(mi),o},intersectSphere:function(t,e){pi.subVectors(t.center,this.origin);var n=pi.dot(this.direction),i=pi.dot(pi)-n*n,r=t.radius*t.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),u>=0?(r=(t.min.y-h.y)*u,a=(t.max.y-h.y)*u):(r=(t.max.y-h.y)*u,a=(t.min.y-h.y)*u),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,pi)},intersectTriangle:function(t,e,n,i,r){yi.subVectors(e,t),bi.subVectors(n,t),xi.crossVectors(yi,bi);var a,o=this.direction.dot(xi);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}gi.subVectors(this.origin,t);var s=a*this.direction.dot(bi.crossVectors(gi,bi));if(s<0)return null;var l=a*this.direction.dot(yi.cross(gi));if(l<0)return null;if(s+l>o)return null;var u=-a*gi.dot(xi);return u<0?null:this.at(u/o,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var wi=new mn,Si=new mn,Ei=new mn,Mi=new mn,Ti=new mn,Ci=new mn,ki=new mn,Pi=new mn,Ai=new mn,Oi=new mn;function Li(t,e,n){this.a=void 0!==t?t:new mn,this.b=void 0!==e?e:new mn,this.c=void 0!==n?n:new mn}Object.assign(Li,{getNormal:function(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new mn),i.subVectors(n,e),wi.subVectors(t,e),i.cross(wi);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){wi.subVectors(i,e),Si.subVectors(n,e),Ei.subVectors(t,e);var a=wi.dot(wi),o=wi.dot(Si),s=wi.dot(Ei),l=Si.dot(Si),u=Si.dot(Ei),c=a*l-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new mn),0===c)return r.set(-2,-1,-1);var h=1/c,f=(l*s-o*u)*h,d=(a*u-o*s)*h;return r.set(1-f-d,d,f)},containsPoint:function(t,e,n,i){return Li.getBarycoord(t,e,n,i,Mi),Mi.x>=0&&Mi.y>=0&&Mi.x+Mi.y<=1},getUV:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,Mi),s.set(0,0),s.addScaledVector(r,Mi.x),s.addScaledVector(a,Mi.y),s.addScaledVector(o,Mi.z),s},isFrontFacing:function(t,e,n,i){return wi.subVectors(n,e),Si.subVectors(t,e),wi.cross(Si).dot(i)<0}}),Object.assign(Li.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return wi.subVectors(this.c,this.b),Si.subVectors(this.a,this.b),.5*wi.cross(Si).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new mn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Li.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new mn),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Li.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return Li.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return Li.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Li.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new mn);var n,i,r=this.a,a=this.b,o=this.c;Ti.subVectors(a,r),Ci.subVectors(o,r),Pi.subVectors(t,r);var s=Ti.dot(Pi),l=Ci.dot(Pi);if(s<=0&&l<=0)return e.copy(r);Ai.subVectors(t,a);var u=Ti.dot(Ai),c=Ci.dot(Ai);if(u>=0&&c<=u)return e.copy(a);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),e.copy(r).addScaledVector(Ti,n);Oi.subVectors(t,o);var f=Ti.dot(Oi),d=Ci.dot(Oi);if(d>=0&&f<=d)return e.copy(o);var p=f*l-s*d;if(p<=0&&l>=0&&d<=0)return i=l/(l-d),e.copy(r).addScaledVector(Ci,i);var m=u*d-f*c;if(m<=0&&c-u>=0&&f-d>=0)return ki.subVectors(o,a),i=(c-u)/(c-u+(f-d)),e.copy(a).addScaledVector(ki,i);var v=1/(m+p+h);return n=p*v,i=h*v,e.copy(r).addScaledVector(Ti,n).addScaledVector(Ci,i)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Ii={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ni={h:0,s:0,l:0},Ri={h:0,s:0,l:0};function Di(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function zi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Bi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Fi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function ji(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new mn,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Di,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Object.assign(Di.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=cn.euclideanModulo(t,1),e=cn.clamp(e,0,1),n=cn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=zi(r,i,t+1/3),this.g=zi(r,i,t),this.b=zi(r,i,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(u=Ii[t])?this.setHex(u):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Bi(t.r),this.g=Bi(t.g),this.b=Bi(t.b),this},copyLinearToSRGB:function(t){return this.r=Fi(t.r),this.g=Fi(t.g),this.b=Fi(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),l=(s+o)/2;if(s===o)e=0,n=0;else{var u=o-s;switch(n=l<=.5?u/(o+s):u/(2-o-s),o){case i:e=(r-a)/u+(r<a?6:0);break;case r:e=(a-i)/u+2;break;case a:e=(i-r)/u+4}e/=6}return t.h=e,t.s=n,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Ni),Ni.h+=t,Ni.s+=e,Ni.l+=n,this.setHSL(Ni.h,Ni.s,Ni.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Ni),t.getHSL(Ri);var n=cn.lerp(Ni.h,Ri.h,e),i=cn.lerp(Ni.s,Ri.s,e),r=cn.lerp(Ni.l,Ri.l,e);return this.setHSL(n,i,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(ji.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Vi=0;function Ui(){Object.defineProperty(this,"id",{value:Vi++}),this.uuid=cn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=T,this.side=g,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=w,this.opacity=1,this.transparent=!1,this.blendSrc=j,this.blendDst=V,this.blendEquation=O,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=X,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=sn,this.stencilRef=0,this.stencilMask=255,this.stencilFail=qe,this.stencilZFail=qe,this.stencilZPass=qe,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function Hi(t){Ui.call(this),this.type="MeshBasicMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Gi(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wi(t,e,n){Gi.call(this,new Int8Array(t),e,n)}function qi(t,e,n){Gi.call(this,new Uint8Array(t),e,n)}function $i(t,e,n){Gi.call(this,new Uint8ClampedArray(t),e,n)}function Qi(t,e,n){Gi.call(this,new Int16Array(t),e,n)}function Yi(t,e,n){Gi.call(this,new Uint16Array(t),e,n)}function Xi(t,e,n){Gi.call(this,new Int32Array(t),e,n)}function Zi(t,e,n){Gi.call(this,new Uint32Array(t),e,n)}function Ji(t,e,n){Gi.call(this,new Float32Array(t),e,n)}function Ki(t,e,n){Gi.call(this,new Float64Array(t),e,n)}function tr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function er(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Ui.prototype=Object.assign(Object.create(i.prototype),{constructor:Ui,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===x;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==T&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==g&&(n.side=this.side),this.vertexColors!==w&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),a=i(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWrite=t.stencilWrite,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilMask=t.stencilMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Hi.prototype=Object.create(Ui.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isMeshBasicMaterial=!0,Hi.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(Gi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Gi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Di),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new hn),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new mn),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new wn),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Wi.prototype=Object.create(Gi.prototype),Wi.prototype.constructor=Wi,qi.prototype=Object.create(Gi.prototype),qi.prototype.constructor=qi,$i.prototype=Object.create(Gi.prototype),$i.prototype.constructor=$i,Qi.prototype=Object.create(Gi.prototype),Qi.prototype.constructor=Qi,Yi.prototype=Object.create(Gi.prototype),Yi.prototype.constructor=Yi,Xi.prototype=Object.create(Gi.prototype),Xi.prototype.constructor=Xi,Zi.prototype=Object.create(Gi.prototype),Zi.prototype.constructor=Zi,Ji.prototype=Object.create(Gi.prototype),Ji.prototype.constructor=Ji,Ki.prototype=Object.create(Gi.prototype),Ki.prototype.constructor=Ki,Object.assign(tr.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,n.push(e)),e={start:3*a,materialIndex:i})}void 0!==e&&(e.count=3*a-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=t.morphTargets,l=s.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]={name:s[u].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,f=h.length;if(f>0){c=[];for(u=0;u<f;u++)c[u]={name:h[u].name,data:[]};this.morphTargets.normal=c}var d=t.skinIndices,p=t.skinWeights,m=d.length===i.length,v=p.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var x,_=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===a)void 0!==(x=r[0][u])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new hn,new hn,new hn));if(!0===o)void 0!==(x=r[1][u])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new hn,new hn,new hn));for(var S=0;S<l;S++){var E=s[S].vertices;e[S].data.push(E[g.a],E[g.b],E[g.c])}for(S=0;S<f;S++){var M=h[S].vertexNormals[u];c[S].data.push(M.a,M.b,M.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var nr=1,ir=new Ln,rr=new Xn,ar=new mn,or=new ci,sr=new ci,lr=new mn;function ur(){Object.defineProperty(this,"id",{value:nr+=2}),this.uuid=cn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ur.prototype=Object.assign(Object.create(i.prototype),{constructor:ur,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(er(t)>65535?Zi:Yi)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new Gi(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new yn).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new yn).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return ir.makeRotationX(t),this.applyMatrix(ir),this},rotateY:function(t){return ir.makeRotationY(t),this.applyMatrix(ir),this},rotateZ:function(t){return ir.makeRotationZ(t),this.applyMatrix(ir),this},translate:function(t,e,n){return ir.makeTranslation(t,e,n),this.applyMatrix(ir),this},scale:function(t,e,n){return ir.makeScale(t,e,n),this.applyMatrix(ir),this},lookAt:function(t){return rr.lookAt(t),rr.updateMatrix(),this.applyMatrix(rr.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ar).negate(),this.translate(ar.x,ar.y,ar.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Ji(3*e.vertices.length,3),i=new Ji(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Ji(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Ji(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new tr).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Gi(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Gi(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new Gi(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Gi(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Gi(a,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var s=[],l=t.morphTargets[o],u=0,c=l.length;u<c;u++){var h=l[u],f=new Ji(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var d=new Ji(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new Ji(4*t.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ci);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];or.setFromBufferAttribute(r),this.boundingBox.expandByPoint(or.min),this.boundingBox.expandByPoint(or.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new di);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(or.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];sr.setFromBufferAttribute(a),or.expandByPoint(sr.min),or.expandByPoint(sr.max)}or.getCenter(n);var o=0;for(i=0,r=t.count;i<r;i++)lr.fromBufferAttribute(t,i),o=Math.max(o,n.distanceToSquared(lr));if(e)for(i=0,r=e.length;i<r;i++)for(var s=0,l=(a=e[i]).count;s<l;s++)lr.fromBufferAttribute(a,s),o=Math.max(o,n.distanceToSquared(lr));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Gi(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;var o,s,l,u=e.normal.array,c=new mn,h=new mn,f=new mn,d=new mn,p=new mn;if(t){var m=t.array;for(r=0,a=t.count;r<a;r+=3)o=3*m[r+0],s=3*m[r+1],l=3*m[r+2],c.fromArray(n,o),h.fromArray(n,s),f.fromArray(n,l),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),u[o]+=d.x,u[o+1]+=d.y,u[o+2]+=d.z,u[s]+=d.x,u[s+1]+=d.y,u[s+2]+=d.z,u[l]+=d.x,u[l+1]+=d.y,u[l+2]+=d.z}else for(r=0,a=n.length;r<a;r+=9)c.fromArray(n,r),h.fromArray(n,r+3),f.fromArray(n,r+6),d.subVectors(f,h),p.subVectors(c,h),d.cross(p),u[r]=d.x,u[r+1]=d.y,u[r+2]=d.z,u[r+3]=d.x,u[r+4]=d.y,u[r+5]=d.z,u[r+6]=d.x,u[r+7]=d.y,u[r+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e,l=Math.min(o.length,r.length-s),u=0,c=s;u<l;u++,c++)r[c]=o[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)lr.x=t.getX(e),lr.y=t.getY(e),lr.z=t.getZ(e),lr.normalize(),t.setXYZ(e,lr.x,lr.y,lr.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=new n.constructor(e.length*i),a=0,o=0,s=0,l=e.length;s<l;s++){a=e[s]*i;for(var u=0;u<i;u++)r[o++]=n[a++]}return new Gi(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new ur,n=this.index.array,i=this.attributes;for(var r in i){var a=t(i[r],n);e.addAttribute(r,a)}var o=this.morphAttributes;for(r in o){for(var s=[],l=o[r],u=0,c=l.length;u<c;u++){a=t(l[u],n);s.push(a)}e.morphAttributes[r]=s}for(var h=this.groups,f=(u=0,h.length);u<f;u++){var d=h[u];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var a=(f=r[n]).toJSON();""!==f.name&&(a.name=f.name),t.data.attributes[n]=a}var o={},s=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,h=l.length;c<h;c++){var f;a=(f=l[c]).toJSON();""!==f.name&&(a.name=f.name),u.push(a)}u.length>0&&(o[n]=u,s=!0)}s&&(t.data.morphAttributes=o);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(t.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),t},clone:function(){return(new ur).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var l=[],u=s[e];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[e]=l}var c=t.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var cr=new Ln,hr=new _i,fr=new di,dr=new mn,pr=new mn,mr=new mn,vr=new mn,gr=new mn,yr=new mn,br=new mn,xr=new mn,_r=new mn,wr=new hn,Sr=new hn,Er=new hn,Mr=new mn,Tr=new mn;function Cr(t,e){Xn.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ur,this.material=void 0!==e?e:new Hi({color:16777215*Math.random()}),this.drawMode=Ae,this.updateMorphTargets()}function kr(t,e,n,i,r,a,o,s){if(null===(e.side===y?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,e.side!==b,s)))return null;Tr.copy(s),Tr.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(Tr);return l<n.near||l>n.far?null:{distance:l,point:Tr.clone(),object:t}}function Pr(t,e,n,i,r,a,o,s,l,u,c){dr.fromBufferAttribute(r,l),pr.fromBufferAttribute(r,u),mr.fromBufferAttribute(r,c);var h=t.morphTargetInfluences;if(e.morphTargets&&a&&h){br.set(0,0,0),xr.set(0,0,0),_r.set(0,0,0);for(var f=0,d=a.length;f<d;f++){var p=h[f],m=a[f];0!==p&&(vr.fromBufferAttribute(m,l),gr.fromBufferAttribute(m,u),yr.fromBufferAttribute(m,c),br.addScaledVector(vr.sub(dr),p),xr.addScaledVector(gr.sub(pr),p),_r.addScaledVector(yr.sub(mr),p))}dr.add(br),pr.add(xr),mr.add(_r)}var v=kr(t,e,n,i,dr,pr,mr,Mr);if(v){o&&(wr.fromBufferAttribute(o,l),Sr.fromBufferAttribute(o,u),Er.fromBufferAttribute(o,c),v.uv=Li.getUV(Mr,dr,pr,mr,wr,Sr,Er,new hn)),s&&(wr.fromBufferAttribute(s,l),Sr.fromBufferAttribute(s,u),Er.fromBufferAttribute(s,c),v.uv2=Li.getUV(Mr,dr,pr,mr,wr,Sr,Er,new hn));var g=new ji(l,u,c);Li.getNormal(dr,pr,mr,g.normal),v.face=g}return v}Cr.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Cr,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Xn.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),fr.copy(i.boundingSphere),fr.applyMatrix4(a),!1!==t.ray.intersectsSphere(fr)&&(cr.getInverse(a),hr.copy(t.ray).applyMatrix4(cr),null===i.boundingBox||!1!==hr.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,s,l,u,c,h,f,d,p,m=i.index,v=i.attributes.position,g=i.morphAttributes.position,y=i.attributes.uv,b=i.attributes.uv2,x=i.groups,_=i.drawRange;if(null!==m)if(Array.isArray(r))for(u=0,h=x.length;u<h;u++)for(p=r[(d=x[u]).materialIndex],c=Math.max(d.start,_.start),f=Math.min(d.start+d.count,_.start+_.count);c<f;c+=3)o=m.getX(c),s=m.getX(c+1),l=m.getX(c+2),(n=Pr(this,p,t,hr,v,g,y,b,o,s,l))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=d.materialIndex,e.push(n));else for(u=Math.max(0,_.start),h=Math.min(m.count,_.start+_.count);u<h;u+=3)o=m.getX(u),s=m.getX(u+1),l=m.getX(u+2),(n=Pr(this,r,t,hr,v,g,y,b,o,s,l))&&(n.faceIndex=Math.floor(u/3),e.push(n));else if(void 0!==v)if(Array.isArray(r))for(u=0,h=x.length;u<h;u++)for(p=r[(d=x[u]).materialIndex],c=Math.max(d.start,_.start),f=Math.min(d.start+d.count,_.start+_.count);c<f;c+=3)(n=Pr(this,p,t,hr,v,g,y,b,o=c,s=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=d.materialIndex,e.push(n));else for(u=Math.max(0,_.start),h=Math.min(v.count,_.start+_.count);u<h;u+=3)(n=Pr(this,r,t,hr,v,g,y,b,o=u,s=u+1,l=u+2))&&(n.faceIndex=Math.floor(u/3),e.push(n))}else if(i.isGeometry){var w,S,E,M,T=Array.isArray(r),C=i.vertices,k=i.faces,P=i.faceVertexUvs[0];P.length>0&&(M=P);for(var A=0,O=k.length;A<O;A++){var L=k[A],I=T?r[L.materialIndex]:r;if(void 0!==I&&(w=C[L.a],S=C[L.b],E=C[L.c],n=kr(this,I,t,hr,w,S,E,Mr))){if(M&&M[A]){var N=M[A];wr.copy(N[0]),Sr.copy(N[1]),Er.copy(N[2]),n.uv=Li.getUV(Mr,w,S,E,wr,Sr,Er,new hn)}n.face=L,n.faceIndex=A,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ar=0,Or=new Ln,Lr=new Xn,Ir=new mn;function Nr(){Object.defineProperty(this,"id",{value:Ar+=2}),this.uuid=cn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Rr(t,e,n,i,r,a){Nr.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new Dr(t,e,n,i,r,a)),this.mergeVertices()}function Dr(t,e,n,i,r,a){ur.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var o=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var s=[],l=[],u=[],c=[],h=0,f=0;function d(t,e,n,i,r,a,d,p,m,v,g){var y,b,x=a/m,_=d/v,w=a/2,S=d/2,E=p/2,M=m+1,T=v+1,C=0,k=0,P=new mn;for(b=0;b<T;b++){var A=b*_-S;for(y=0;y<M;y++){var O=y*x-w;P[t]=O*i,P[e]=A*r,P[n]=E,l.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[n]=p>0?1:-1,u.push(P.x,P.y,P.z),c.push(y/m),c.push(1-b/v),C+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var L=h+y+M*b,I=h+y+M*(b+1),N=h+(y+1)+M*(b+1),R=h+(y+1)+M*b;s.push(L,I,R),s.push(I,N,R),k+=6}o.addGroup(f,k,g),f+=k,h+=C}d("z","y","x",-1,-1,n,e,t,a,r,0),d("z","y","x",1,-1,n,e,-t,a,r,1),d("x","z","y",1,1,t,n,e,i,a,2),d("x","z","y",1,-1,t,n,-e,i,a,3),d("x","y","z",1,-1,t,e,n,i,r,4),d("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new Ji(l,3)),this.addAttribute("normal",new Ji(u,3)),this.addAttribute("uv",new Ji(c,2))}function zr(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function Br(t){for(var e={},n=0;n<t.length;n++){var i=zr(t[n]);for(var r in i)e[r]=i[r]}return e}Nr.prototype=Object.assign(Object.create(i.prototype),{constructor:Nr,isGeometry:!0,applyMatrix:function(t){for(var e=(new yn).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(t)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Or.makeRotationX(t),this.applyMatrix(Or),this},rotateY:function(t){return Or.makeRotationY(t),this.applyMatrix(Or),this},rotateZ:function(t){return Or.makeRotationZ(t),this.applyMatrix(Or),this},translate:function(t,e,n){return Or.makeTranslation(t,e,n),this.applyMatrix(Or),this},scale:function(t,e,n){return Or.makeScale(t,e,n),this.applyMatrix(Or),this},lookAt:function(t){return Lr.lookAt(t),Lr.updateMatrix(),this.applyMatrix(Lr.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,i=t.attributes,r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<r.length;u+=3)e.vertices.push((new mn).fromArray(r,u)),void 0!==o&&e.colors.push((new Di).fromArray(o,u));function c(t,n,i,r){var u=void 0===o?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],c=new ji(t,n,i,void 0===a?[]:[(new mn).fromArray(a,3*t),(new mn).fromArray(a,3*n),(new mn).fromArray(a,3*i)],u,r);e.faces.push(c),void 0!==s&&e.faceVertexUvs[0].push([(new hn).fromArray(s,2*t),(new hn).fromArray(s,2*n),(new hn).fromArray(s,2*i)]),void 0!==l&&e.faceVertexUvs[1].push([(new hn).fromArray(l,2*t),(new hn).fromArray(l,2*n),(new hn).fromArray(l,2*i)])}var h=t.groups;if(h.length>0)for(u=0;u<h.length;u++)for(var f=h[u],d=f.start,p=d,m=d+f.count;p<m;p+=3)void 0!==n?c(n[p],n[p+1],n[p+2],f.materialIndex):c(p,p+1,p+2,f.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(u=0;u<r.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ir).negate(),this.translate(Ir.x,Ir.y,Ir.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Ln;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new mn,e=new mn,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new mn;if(t){var s,l,u,c=new mn,h=new mn;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(i=0,r=this.faces.length;i<r;i++){var f=(a=this.faces[i]).vertexNormals;3===f.length?(f[0].copy(o[a.a]),f[1].copy(o[a.b]),f[2].copy(o[a.c])):(f[0]=o[a.a].clone(),f[1]=o[a.b].clone(),f[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new Nr;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new mn,u={a:new mn,b:new mn,c:new mn},o.push(l),s.push(u)}var l,u,c=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ci),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new di),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,l=t.faces,u=this.colors,c=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new yn).getNormalMatrix(e));for(var h=0,f=o.length;h<f;h++){var d=o[h].clone();void 0!==e&&d.applyMatrix4(e),a.push(d)}for(h=0,f=c.length;h<f;h++)u.push(c[h].clone());for(h=0,f=l.length;h<f;h++){var p,m,v,g=l[h],y=g.vertexNormals,b=g.vertexColors;(p=new ji(g.a+r,g.b+r,g.c+r)).normal.copy(g.normal),void 0!==i&&p.normal.applyMatrix3(i).normalize();for(var x=0,_=y.length;x<_;x++)m=y[x].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),p.vertexNormals.push(m);p.color.copy(g.color);for(x=0,_=b.length;x<_;x++)v=b[x],p.vertexColors.push(v.clone());p.materialIndex=g.materialIndex+n,s.push(p)}for(h=0,f=t.faceVertexUvs.length;h<f;h++){var w=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(x=0,_=w.length;x<_;x++){for(var S=w[x],E=[],M=0,T=S.length;M<T;M++)E.push(S[M].clone());this.faceVertexUvs[h].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,a,o,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],void 0===l[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(l[e]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[e]];var f=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new mn(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]);for(n=0;n<e;n++){var s=t[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},h=[],f={};for(r=0;r<this.faces.length;r++){var d=this.faces[r],p=void 0!==this.faceVertexUvs[0][r],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=S(b,0,0),b=S(b,1,!0),b=S(b,2,!1),b=S(b,3,p),b=S(b,4,m),b=S(b,5,v),b=S(b,6,g),b=S(b,7,y),o.push(b),o.push(d.a,d.b,d.c),o.push(d.materialIndex),p){var x=this.faceVertexUvs[0][r];o.push(T(x[0]),T(x[1]),T(x[2]))}if(m&&o.push(E(d.normal)),v){var _=d.vertexNormals;o.push(E(_[0]),E(_[1]),E(_[2]))}if(g&&o.push(M(d.color)),y){var w=d.vertexColors;o.push(M(w[0]),M(w[1]),M(w[2]))}}function S(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=s.length/3,s.push(t.x,t.y,t.z),l[e])}function M(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=u.length,u.push(t.getHex()),c[e])}function T(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/2,h.push(t.x,t.y),f[e])}return t.data={},t.data.vertices=i,t.data.normals=s,u.length>0&&(t.data.colors=u),h.length>0&&(t.data.uvs=[h]),t.data.faces=o,t},clone:function(){return(new Nr).copy(this)},copy:function(t){var e,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var l=t.colors;for(e=0,n=l.length;e<n;e++)this.colors.push(l[e].clone());var u=t.faces;for(e=0,n=u.length;e<n;e++)this.faces.push(u[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=c.length;i<r;i++){var h=c[i],f=[];for(a=0,o=h.length;a<o;a++){var d=h[a];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],i=0,r=p[e].vertices.length;i<r;i++)m.vertices.push(p[e].vertices[i].clone());if(void 0!==p[e].normals)for(m.normals=[],i=0,r=p[e].normals.length;i<r;i++)m.normals.push(p[e].normals[i].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],i=0,r=v[e].vertexNormals.length;i<r;i++){var y=v[e].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],i=0,r=v[e].faceNormals.length;i<r;i++)g.faceNormals.push(v[e].faceNormals[i].clone());this.morphNormals.push(g)}var x=t.skinWeights;for(e=0,n=x.length;e<n;e++)this.skinWeights.push(x[e].clone());var _=t.skinIndices;for(e=0,n=_.length;e<n;e++)this.skinIndices.push(_[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var S=t.boundingBox;null!==S&&(this.boundingBox=S.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Rr.prototype=Object.create(Nr.prototype),Rr.prototype.constructor=Rr,Dr.prototype=Object.create(ur.prototype),Dr.prototype.constructor=Dr;var Fr={clone:zr,merge:Br};function jr(t){Ui.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Vr(){Xn.call(this),this.type="Camera",this.matrixWorldInverse=new Ln,this.projectionMatrix=new Ln,this.projectionMatrixInverse=new Ln}function Ur(t,e,n,i){Vr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}jr.prototype=Object.create(Ui.prototype),jr.prototype.constructor=jr,jr.prototype.isShaderMaterial=!0,jr.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=zr(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},jr.prototype.toJSON=function(t){var e=Ui.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return Object.keys(r).length>0&&(e.extensions=r),e},Vr.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Vr,isCamera:!0,copy:function(t,e){return Xn.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new mn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Xn.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Ur.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Ur,isPerspectiveCamera:!0,copy:function(t,e){return Vr.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*cn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*cn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*cn.RAD2DEG*Math.atan(Math.tan(.5*cn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*cn.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Xn.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});function Hr(t,e,n,i){Xn.call(this),this.type="CubeCamera";var r=new Ur(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new mn(1,0,0)),this.add(r);var a=new Ur(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new mn(-1,0,0)),this.add(a);var o=new Ur(90,1,t,e);o.up.set(0,0,1),o.lookAt(new mn(0,1,0)),this.add(o);var s=new Ur(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new mn(0,-1,0)),this.add(s);var l=new Ur(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new mn(0,0,1)),this.add(l);var u=new Ur(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new mn(0,0,-1)),this.add(u),i=i||{format:Gt,magFilter:Tt,minFilter:Tt},this.renderTarget=new Gr(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),i=this.renderTarget,c=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,a),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,s),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=c,t.setRenderTarget(i,5),t.render(e,u),t.setRenderTarget(n)},this.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)t.setRenderTarget(a,o),t.clear(e,n,i);t.setRenderTarget(r)}}function Gr(t,e,n){Sn.call(this,t,e,n)}function Wr(t,e,n,i,r,a,o,s,l,u,c,h){_n.call(this,null,a,o,s,l,u,i,r,c,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:_t,this.minFilter=void 0!==u?u:_t,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}Hr.prototype=Object.create(Xn.prototype),Hr.prototype.constructor=Hr,Gr.prototype=Object.create(Sn.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isWebGLRenderTargetCube=!0,Gr.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new Zn,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new jr({type:"CubemapFromEquirect",uniforms:zr(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:y,blending:M});r.uniforms.tEquirect.value=e;var a=new Cr(new Dr(5,5,5),r);n.add(a);var o=new Hr(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(t,n),a.geometry.dispose(),a.material.dispose(),this},Wr.prototype=Object.create(_n.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isDataTexture=!0;var qr=new mn,$r=new mn,Qr=new yn;function Yr(t,e){this.normal=void 0!==t?t:new mn(1,0,0),this.constant=void 0!==e?e:0}Object.assign(Yr.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=qr.subVectors(n,e).cross($r.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new mn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new mn);var n=t.delta(qr),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:e.copy(n).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new mn),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||Qr.getNormalMatrix(t),i=this.coplanarPoint(qr).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Xr=new di,Zr=new mn;function Jr(t,e,n,i,r,a){this.planes=[void 0!==t?t:new Yr,void 0!==e?e:new Yr,void 0!==n?n:new Yr,void 0!==i?i:new Yr,void 0!==r?r:new Yr,void 0!==a?a:new Yr]}Object.assign(Jr.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(o-i,c-s,p-h,y-m).normalize(),e[1].setComponents(o+i,c+s,p+h,y+m).normalize(),e[2].setComponents(o+r,c+l,p+f,y+v).normalize(),e[3].setComponents(o-r,c-l,p-f,y-v).normalize(),e[4].setComponents(o-a,c-u,p-d,y-g).normalize(),e[5].setComponents(o+a,c+u,p+d,y+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Xr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Xr)},intersectsSprite:function(t){return Xr.center.set(0,0,0),Xr.radius=.7071067811865476,Xr.applyMatrix4(t.matrixWorld),this.intersectsSphere(Xr)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(Zr.x=i.normal.x>0?t.max.x:t.min.x,Zr.y=i.normal.y>0?t.max.y:t.min.y,Zr.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Zr)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Kr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvec3 NfromST = cross( S, T );\n\t\t\tif( dot( NfromST, N ) > 0.0 ) {\n\t\t\t\tS *= -1.0;\n\t\t\t\tT *= -1.0;\n\t\t\t}\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ta={common:{diffuse:{value:new Di(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new yn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new hn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Di(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Di(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new yn}},sprite:{diffuse:{value:new Di(15658734)},opacity:{value:1},center:{value:new hn(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new yn}}},ea={basic:{uniforms:Br([ta.common,ta.specularmap,ta.envmap,ta.aomap,ta.lightmap,ta.fog]),vertexShader:Kr.meshbasic_vert,fragmentShader:Kr.meshbasic_frag},lambert:{uniforms:Br([ta.common,ta.specularmap,ta.envmap,ta.aomap,ta.lightmap,ta.emissivemap,ta.fog,ta.lights,{emissive:{value:new Di(0)}}]),vertexShader:Kr.meshlambert_vert,fragmentShader:Kr.meshlambert_frag},phong:{uniforms:Br([ta.common,ta.specularmap,ta.envmap,ta.aomap,ta.lightmap,ta.emissivemap,ta.bumpmap,ta.normalmap,ta.displacementmap,ta.gradientmap,ta.fog,ta.lights,{emissive:{value:new Di(0)},specular:{value:new Di(1118481)},shininess:{value:30}}]),vertexShader:Kr.meshphong_vert,fragmentShader:Kr.meshphong_frag},standard:{uniforms:Br([ta.common,ta.envmap,ta.aomap,ta.lightmap,ta.emissivemap,ta.bumpmap,ta.normalmap,ta.displacementmap,ta.roughnessmap,ta.metalnessmap,ta.fog,ta.lights,{emissive:{value:new Di(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Kr.meshphysical_vert,fragmentShader:Kr.meshphysical_frag},matcap:{uniforms:Br([ta.common,ta.bumpmap,ta.normalmap,ta.displacementmap,ta.fog,{matcap:{value:null}}]),vertexShader:Kr.meshmatcap_vert,fragmentShader:Kr.meshmatcap_frag},points:{uniforms:Br([ta.points,ta.fog]),vertexShader:Kr.points_vert,fragmentShader:Kr.points_frag},dashed:{uniforms:Br([ta.common,ta.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Kr.linedashed_vert,fragmentShader:Kr.linedashed_frag},depth:{uniforms:Br([ta.common,ta.displacementmap]),vertexShader:Kr.depth_vert,fragmentShader:Kr.depth_frag},normal:{uniforms:Br([ta.common,ta.bumpmap,ta.normalmap,ta.displacementmap,{opacity:{value:1}}]),vertexShader:Kr.normal_vert,fragmentShader:Kr.normal_frag},sprite:{uniforms:Br([ta.sprite,ta.fog]),vertexShader:Kr.sprite_vert,fragmentShader:Kr.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null}},vertexShader:Kr.background_vert,fragmentShader:Kr.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Kr.cube_vert,fragmentShader:Kr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Kr.equirect_vert,fragmentShader:Kr.equirect_frag},distanceRGBA:{uniforms:Br([ta.common,ta.displacementmap,{referencePosition:{value:new mn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Kr.distanceRGBA_vert,fragmentShader:Kr.distanceRGBA_frag},shadow:{uniforms:Br([ta.lights,ta.fog,{color:{value:new Di(0)},opacity:{value:1}}]),vertexShader:Kr.shadow_vert,fragmentShader:Kr.shadow_frag}};function na(){var t=null,e=!1,n=null;function i(r,a){!1!==e&&(n(r,a),t.requestAnimationFrame(i))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(i),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ia(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);void 0===r?e.set(n,function(e,n){var i=e.array,r=e.dynamic?35048:35044,a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(n,i)):r.version<n.version&&(!function(e,n,i){var r=n.array,a=n.updateRange;t.bindBuffer(i,e),!1===n.dynamic?t.bufferData(i,r,35044):-1===a.count?t.bufferSubData(i,0,r):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function ra(t,e,n,i){Nr.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new aa(t,e,n,i)),this.mergeVertices()}function aa(t,e,n,i){ur.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,a,o=(t=t||1)/2,s=(e=e||1)/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,h=u+1,f=t/l,d=e/u,p=[],m=[],v=[],g=[];for(a=0;a<h;a++){var y=a*d-s;for(r=0;r<c;r++){var b=r*f-o;m.push(b,-y,0),v.push(0,0,1),g.push(r/l),g.push(1-a/u)}}for(a=0;a<u;a++)for(r=0;r<l;r++){var x=r+c*a,_=r+c*(a+1),w=r+1+c*(a+1),S=r+1+c*a;p.push(x,_,S),p.push(_,w,S)}this.setIndex(p),this.addAttribute("position",new Ji(m,3)),this.addAttribute("normal",new Ji(v,3)),this.addAttribute("uv",new Ji(g,2))}function oa(t,e,n,i){var r,a,o=new Di(0),s=0,l=null,u=0;function c(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),c(o,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){c(o,s=t)},render:function(e,i,h,f){var d=i.background,p=t.vr,m=p.getSession&&p.getSession();if(m&&"additive"===m.environmentBlendMode&&(d=null),null===d?(c(o,s),l=null,u=0):d&&d.isColor&&(c(d,1),f=!0,l=null,u=0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===a&&((a=new Cr(new Dr(1,1,1),new jr({type:"BackgroundCubeMaterial",uniforms:zr(ea.cube.uniforms),vertexShader:ea.cube.vertexShader,fragmentShader:ea.cube.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var v=d.isWebGLRenderTargetCube?d.texture:d;a.material.uniforms.tCube.value=v,a.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,l===d&&u===v.version||(a.material.needsUpdate=!0,l=d,u=v.version),e.unshift(a,a.geometry,a.material,0,0,null)}else d&&d.isTexture&&(void 0===r&&((r=new Cr(new aa(2,2),new jr({type:"BackgroundMaterial",uniforms:zr(ea.background.uniforms),vertexShader:ea.background.vertexShader,fragmentShader:ea.background.fragmentShader,side:g,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),r.material.uniforms.uvTransform.value.copy(d.matrix),l===d&&u===d.version||(r.material.needsUpdate=!0,l=d,u=d.version),e.unshift(r,r.geometry,r.material,0,0,null))}}}function sa(t,e,n,i){var r;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(a,o,s){var l,u;if(i.isWebGL2)l=t,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](r,o,s,a.maxInstancedCount),n.update(s,r,a.maxInstancedCount)}}function la(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),c=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),d=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),g=c>0,y=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:a?t.getParameter(36183):0}}function ua(){var t=this,e=null,n=0,i=!1,r=!1,a=new Yr,o=new yn,s={value:null,needsUpdate:!1};function l(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function u(e,n,i,r){var l=null!==e?e.length:0,u=null;if(0!==l){if(u=s.value,!0!==r||null===u){var c=i+4*l,h=n.matrixWorldInverse;o.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var f=0,d=i;f!==l;++f,d+=4)a.copy(e[f]).applyMatrix4(h,o),a.normal.toArray(u,d),u[d+3]=a.constant}s.value=u,s.needsUpdate=!0}return t.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,a){var o=0!==t.length||r||0!==n||i;return i=r,e=u(t,a,0),n=t.length,o},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,l()},this.setState=function(t,a,o,c,h,f){if(!i||null===t||0===t.length||r&&!o)r?u(null):l();else{var d=r?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=u(t,c,p,f);for(var v=0;v!==p;++v)m[v]=e[v];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function ca(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function ha(t,e,n){var i=new WeakMap,r=new WeakMap;function a(t){var o=t.target,s=i.get(o);for(var l in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[l]);o.removeEventListener("dispose",a),i.delete(o);var u=r.get(s);u&&(e.remove(u),r.delete(s)),n.memory.geometries--}function o(t){var n=[],i=t.index,a=t.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],f=s[l+2];n.push(c,h,h,f,f,c)}}else{s=a.array;o=a.version;for(l=0,u=s.length/3-1;l<u;l+=3){c=l+0,h=l+1,f=l+2;n.push(c,h,h,f,f,c)}}var d=new(er(n)>65535?Zi:Yi)(n,1);d.version=o,e.update(d,34963);var p=r.get(t);p&&e.remove(p),r.set(t,d)}return{get:function(t,e){var r=i.get(e);return r||(e.addEventListener("dispose",a),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new ur).setFromObject(t)),r=e._bufferGeometry),i.set(e,r),n.memory.geometries++,r)},update:function(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);var a=t.morphAttributes;for(var r in a)for(var o=a[r],s=0,l=o.length;s<l;s++)e.update(o[s],34962)},getWireframeAttribute:function(t){var e=r.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return r.get(t)}}}function fa(t,e,n,i){var r,a,o;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,a,e*o),n.update(i,r)},this.renderInstances=function(s,l,u){var c,h;if(i.isWebGL2)c=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](r,u,a,l*o,s.maxInstancedCount),n.update(u,r,s.maxInstancedCount)}}function da(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(i=i||1,e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 5:case 6:e.triangles+=i*(t-2);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function pa(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ma(t){var e={},n=new Float32Array(8);return{update:function(i,r,a,o){var s=i.morphTargetInfluences,l=s.length,u=e[r.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];e[r.id]=u}var h=a.morphTargets&&r.morphAttributes.position,f=a.morphNormals&&r.morphAttributes.normal;for(c=0;c<l;c++){0!==(d=u[c])[1]&&(h&&r.removeAttribute("morphTarget"+c),f&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++){(d=u[c])[0]=c,d[1]=s[c]}for(u.sort(pa),c=0;c<8;c++){var d;if(d=u[c]){var p=d[0],m=d[1];if(m){h&&r.addAttribute("morphTarget"+c,h[p]),f&&r.addAttribute("morphNormal"+c,f[p]),n[c]=m;continue}}n[c]=0}o.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function va(t,e){var n={};return{update:function(i){var r=e.render.frame,a=i.geometry,o=t.get(i,a);return n[o.id]!==r&&(a.isGeometry&&o.updateFromObject(i),t.update(o),n[o.id]=r),o},dispose:function(){n={}}}}function ga(t,e,n,i,r,a,o,s,l,u){t=void 0!==t?t:[],e=void 0!==e?e:ht,o=void 0!==o?o:Gt,_n.call(this,t,e,n,i,r,a,o,s,l,u),this.flipY=!1}function ya(t,e,n,i){_n.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=_t,this.minFilter=_t,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}function ba(t,e,n,i){_n.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=_t,this.minFilter=_t,this.wrapR=bt,this.generateMipmaps=!1,this.flipY=!1}ea.physical={uniforms:Br([ea.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Di(0)},clearcoatNormalScale:{value:new hn(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Kr.meshphysical_vert,fragmentShader:Kr.meshphysical_frag},ra.prototype=Object.create(Nr.prototype),ra.prototype.constructor=ra,aa.prototype=Object.create(ur.prototype),aa.prototype.constructor=aa,ga.prototype=Object.create(_n.prototype),ga.prototype.constructor=ga,ga.prototype.isCubeTexture=!0,Object.defineProperty(ga.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),ya.prototype=Object.create(_n.prototype),ya.prototype.constructor=ya,ya.prototype.isDataTexture2DArray=!0,ba.prototype=Object.create(_n.prototype),ba.prototype.constructor=ba,ba.prototype.isDataTexture3D=!0;var xa=new _n,_a=new ya,wa=new ba,Sa=new ga,Ea=[],Ma=[],Ta=new Float32Array(16),Ca=new Float32Array(9),ka=new Float32Array(4);function Pa(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,a=Ea[r];if(void 0===a&&(a=new Float32Array(r),Ea[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Aa(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Oa(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function La(t,e){var n=Ma[e];void 0===n&&(n=new Int32Array(e),Ma[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Ia(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Na(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Aa(n,e))return;t.uniform2fv(this.addr,e),Oa(n,e)}}function Ra(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Aa(n,e))return;t.uniform3fv(this.addr,e),Oa(n,e)}}function Da(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Aa(n,e))return;t.uniform4fv(this.addr,e),Oa(n,e)}}function za(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Aa(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Oa(n,e)}else{if(Aa(n,i))return;ka.set(i),t.uniformMatrix2fv(this.addr,!1,ka),Oa(n,i)}}function Ba(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Aa(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Oa(n,e)}else{if(Aa(n,i))return;Ca.set(i),t.uniformMatrix3fv(this.addr,!1,Ca),Oa(n,i)}}function Fa(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Aa(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Oa(n,e)}else{if(Aa(n,i))return;Ta.set(i),t.uniformMatrix4fv(this.addr,!1,Ta),Oa(n,i)}}function ja(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||xa,r)}function Va(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||_a,r)}function Ua(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||wa,r)}function Ha(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Sa,r)}function Ga(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Wa(t,e){var n=this.cache;Aa(n,e)||(t.uniform2iv(this.addr,e),Oa(n,e))}function qa(t,e){var n=this.cache;Aa(n,e)||(t.uniform3iv(this.addr,e),Oa(n,e))}function $a(t,e){var n=this.cache;Aa(n,e)||(t.uniform4iv(this.addr,e),Oa(n,e))}function Qa(t,e){t.uniform1fv(this.addr,e)}function Ya(t,e){t.uniform1iv(this.addr,e)}function Xa(t,e){t.uniform2iv(this.addr,e)}function Za(t,e){t.uniform3iv(this.addr,e)}function Ja(t,e){t.uniform4iv(this.addr,e)}function Ka(t,e){var n=Pa(e,this.size,2);t.uniform2fv(this.addr,n)}function to(t,e){var n=Pa(e,this.size,3);t.uniform3fv(this.addr,n)}function eo(t,e){var n=Pa(e,this.size,4);t.uniform4fv(this.addr,n)}function no(t,e){var n=Pa(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function io(t,e){var n=Pa(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function ro(t,e){var n=Pa(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ao(t,e,n){var i=e.length,r=La(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||xa,r[a])}function oo(t,e,n){var i=e.length,r=La(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||Sa,r[a])}function so(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ia;case 35664:return Na;case 35665:return Ra;case 35666:return Da;case 35674:return za;case 35675:return Ba;case 35676:return Fa;case 35678:case 36198:return ja;case 35679:return Ua;case 35680:return Ha;case 36289:return Va;case 5124:case 35670:return Ga;case 35667:case 35671:return Wa;case 35668:case 35672:return qa;case 35669:case 35673:return $a}}(e.type)}function lo(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Qa;case 35664:return Ka;case 35665:return to;case 35666:return eo;case 35674:return no;case 35675:return io;case 35676:return ro;case 35678:return ao;case 35680:return oo;case 5124:case 35670:return Ya;case 35667:case 35671:return Xa;case 35668:case 35672:return Za;case 35669:case 35673:return Ja}}(e.type)}function uo(t){this.id=t,this.seq=[],this.map={}}lo.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Oa(e,t)},uo.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var co=/([\w\d_]+)(\])?(\[|\.)?/g;function ho(t,e){t.seq.push(e),t.map[e.id]=e}function fo(t,e,n){var i=t.name,r=i.length;for(co.lastIndex=0;;){var a=co.exec(i),o=co.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){ho(n,void 0===u?new so(s,t,e):new lo(s,t,e));break}var c=n.map[s];void 0===c&&ho(n,c=new uo(s)),n=c}}function po(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);fo(r,t.getUniformLocation(e,r.name),this)}}function mo(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}po.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},po.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},po.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},po.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var vo=0;function go(t){switch(t){case Ie:return["Linear","( value )"];case Ne:return["sRGB","( value )"];case De:return["RGBE","( value )"];case Be:return["RGBM","( value, 7.0 )"];case Fe:return["RGBM","( value, 16.0 )"];case je:return["RGBD","( value, 256.0 )"];case Re:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case ze:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function yo(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function bo(t,e){var n=go(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function xo(t,e){var n;switch(e){case at:n="Linear";break;case ot:n="Reinhard";break;case st:n="Uncharted2";break;case lt:n="OptimizedCineon";break;case ut:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function _o(t){return""!==t}function wo(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function So(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Eo(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){var n=Kr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Eo(n)}))}function Mo(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}))}function To(t,e,n,i,r,a,o){var s=t.getContext(),l=i.defines,u=r.vertexShader,c=r.fragmentShader,h="SHADOWMAP_TYPE_BASIC";a.shadowMapType===p?h="SHADOWMAP_TYPE_PCF":a.shadowMapType===m?h="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===v&&(h="SHADOWMAP_TYPE_VSM");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(i.envMap.mapping){case ht:case ft:f="ENVMAP_TYPE_CUBE";break;case vt:case gt:f="ENVMAP_TYPE_CUBE_UV";break;case dt:case pt:f="ENVMAP_TYPE_EQUIREC";break;case mt:f="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ft:case pt:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case et:g="ENVMAP_BLENDING_MULTIPLY";break;case nt:g="ENVMAP_BLENDING_MIX";break;case it:g="ENVMAP_BLENDING_ADD"}}var y,b,x,_,w,S=t.gammaFactor>0?t.gammaFactor:1,E=o.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_o).join("\n")}(i.extensions,a,e),M=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(l),T=s.createProgram();if(i.isRawShaderMaterial?((y=[M].filter(_o).join("\n")).length>0&&(y+="\n"),(b=[E,M].filter(_o).join("\n")).length>0&&(b+="\n")):(y=["precision "+a.precision+" float;","precision "+a.precision+" int;","highp"===a.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,M,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+S,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_o).join("\n"),b=[E,"precision "+a.precision+" float;","precision "+a.precision+" int;","highp"===a.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,M,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+S,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.envMap?"#define "+d:"",a.envMap?"#define "+g:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||a.envMap)&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==rt?"#define TONE_MAPPING":"",a.toneMapping!==rt?Kr.tonemapping_pars_fragment:"",a.toneMapping!==rt?xo("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Kr.encodings_pars_fragment:"",a.mapEncoding?bo("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?bo("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?bo("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?bo("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(x="linearToOutputTexel",_=a.outputEncoding,w=go(_),"vec4 "+x+"( vec4 value ) { return LinearTo"+w[0]+w[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(_o).join("\n")),u=So(u=wo(u=Eo(u),a),a),c=So(c=wo(c=Eo(c),a),a),u=Mo(u),c=Mo(c),o.isWebGL2&&!i.isRawShaderMaterial){var C=!1,k=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==u.match(k)&&null!==c.match(k)&&(C=!0,u=u.replace(k,""),c=c.replace(k,"")),y=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#version 300 es\n","#define varying in",C?"":"out highp vec4 pc_fragColor;",C?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b}var P,A,O=b+c,L=mo(s,35633,y+u),I=mo(s,35632,O);if(s.attachShader(T,L),s.attachShader(T,I),void 0!==i.index0AttributeName?s.bindAttribLocation(T,0,i.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T),t.debug.checkShaderErrors){var N=s.getProgramInfoLog(T).trim(),R=s.getShaderInfoLog(L).trim(),D=s.getShaderInfoLog(I).trim(),z=!0,B=!0;if(!1===s.getProgramParameter(T,35714)){z=!1;var F=yo(s,L,"vertex"),j=yo(s,I,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(T,35715),"gl.getProgramInfoLog",N,F,j)}else""!==N?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",N):""!==R&&""!==D||(B=!1);B&&(this.diagnostics={runnable:z,material:i,programLog:N,vertexShader:{log:R,prefix:y},fragmentShader:{log:D,prefix:b}})}return s.deleteShader(L),s.deleteShader(I),this.getUniforms=function(){return void 0===P&&(P=new po(s,T)),P},this.getAttributes=function(){return void 0===A&&(A=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var a=t.getActiveAttrib(e,r).name;n[a]=t.getAttribLocation(e,a)}return n}(s,T)),A},this.destroy=function(){s.deleteProgram(T),this.program=void 0},this.name=r.name,this.id=vo++,this.code=n,this.usedTimes=1,this.program=T,this.vertexShader=L,this.fragmentShader=I,this}function Co(t,e,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function o(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Ie,n===Ie&&e&&(n=Re),n}this.getParameters=function(e,i,a,s,l,u,c){var h=r[e.type],f=c.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),a=Math.min(r,e.length);return a<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+a+"."),0):a}(c):0,d=n.precision;null!==e.precision&&(d=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var p=t.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:o(p?p.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:o(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:o(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:o(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===vt||e.envMap.mapping===gt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:o(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ge,tangentSpaceNormalMap:e.normalMapType===He,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap),fog:!!s,useFog:e.fog,fogExp2:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:l,numClipIntersection:u,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&a.length>0,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:rt,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===b,flipSided:e.side===y,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(r,a,o,s){for(var l,u=0,c=i.length;u<c;u++){var h=i[u];if(h.code===s){++(l=h).usedTimes;break}}return void 0===l&&(l=new To(t,e,s,r,a,o,n),i.push(l)),l},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function ko(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Po(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ao(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Oo(){var t=[],e=0,n=[],i=[],r={id:-1};function a(n,i,a,o,s,l){var u=t[e];return void 0===u?(u={id:n.id,object:n,geometry:i,material:a,program:a.program||r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:l},t[e]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=a,u.program=a.program||r,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=s,u.group=l),e++,u}return{opaque:n,transparent:i,init:function(){e=0,n.length=0,i.length=0},push:function(t,e,r,o,s,l){var u=a(t,e,r,o,s,l);(!0===r.transparent?i:n).push(u)},unshift:function(t,e,r,o,s,l){var u=a(t,e,r,o,s,l);(!0===r.transparent?i:n).unshift(u)},sort:function(){n.length>1&&n.sort(Po),i.length>1&&i.sort(Ao)}}}function Lo(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r,a=t.get(n);return void 0===a?(r=new Oo,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):void 0===(r=a.get(i))&&(r=new Oo,a.set(i,r)),r},dispose:function(){t=new WeakMap}}}function Io(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new mn,color:new Di,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn};break;case"SpotLight":n={position:new mn,direction:new mn,color:new Di,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn};break;case"PointLight":n={position:new mn,color:new Di,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hn,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new mn,skyColor:new Di,groundColor:new Di};break;case"RectAreaLight":n={color:new Di,position:new mn,halfWidth:new mn,halfHeight:new mn}}return t[e.id]=n,n}}}var No=0;function Ro(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Do(){for(var t=new Io,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)e.probe.push(new mn);var i=new mn,r=new Ln,a=new Ln;return{setup:function(n,o,s){for(var l=0,u=0,c=0,h=0;h<9;h++)e.probe[h].set(0,0,0);var f=0,d=0,p=0,m=0,v=0,g=0,y=0,b=0,x=s.matrixWorldInverse;n.sort(Ro),h=0;for(var _=n.length;h<_;h++){var w=n[h],S=w.color,E=w.intensity,M=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=S.r*E,u+=S.g*E,c+=S.b*E;else if(w.isLightProbe)for(var C=0;C<9;C++)e.probe[C].addScaledVector(w.sh.coefficients[C],E);else if(w.isDirectionalLight){if((P=t.get(w)).color.copy(w.color).multiplyScalar(w.intensity),P.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(x),P.shadow=w.castShadow,w.castShadow){var k=w.shadow;P.shadowBias=k.bias,P.shadowRadius=k.radius,P.shadowMapSize=k.mapSize,e.directionalShadowMap[f]=T,e.directionalShadowMatrix[f]=w.shadow.matrix,g++}e.directional[f]=P,f++}else if(w.isSpotLight){if((P=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(x),P.color.copy(S).multiplyScalar(E),P.distance=M,P.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(x),P.coneCos=Math.cos(w.angle),P.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),P.decay=w.decay,P.shadow=w.castShadow,w.castShadow){k=w.shadow;P.shadowBias=k.bias,P.shadowRadius=k.radius,P.shadowMapSize=k.mapSize,e.spotShadowMap[p]=T,e.spotShadowMatrix[p]=w.shadow.matrix,b++}e.spot[p]=P,p++}else if(w.isRectAreaLight){(P=t.get(w)).color.copy(S).multiplyScalar(E),P.position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(x),a.identity(),r.copy(w.matrixWorld),r.premultiply(x),a.extractRotation(r),P.halfWidth.set(.5*w.width,0,0),P.halfHeight.set(0,.5*w.height,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),e.rectArea[m]=P,m++}else if(w.isPointLight){if((P=t.get(w)).position.setFromMatrixPosition(w.matrixWorld),P.position.applyMatrix4(x),P.color.copy(w.color).multiplyScalar(w.intensity),P.distance=w.distance,P.decay=w.decay,P.shadow=w.castShadow,w.castShadow){k=w.shadow;P.shadowBias=k.bias,P.shadowRadius=k.radius,P.shadowMapSize=k.mapSize,P.shadowCameraNear=k.camera.near,P.shadowCameraFar=k.camera.far,e.pointShadowMap[d]=T,e.pointShadowMatrix[d]=w.shadow.matrix,y++}e.point[d]=P,d++}else if(w.isHemisphereLight){var P;(P=t.get(w)).direction.setFromMatrixPosition(w.matrixWorld),P.direction.transformDirection(x),P.direction.normalize(),P.skyColor.copy(w.color).multiplyScalar(E),P.groundColor.copy(w.groundColor).multiplyScalar(E),e.hemi[v]=P,v++}}e.ambient[0]=l,e.ambient[1]=u,e.ambient[2]=c;var A=e.hash;A.directionalLength===f&&A.pointLength===d&&A.spotLength===p&&A.rectAreaLength===m&&A.hemiLength===v&&A.numDirectionalShadows===g&&A.numPointShadows===y&&A.numSpotShadows===b||(e.directional.length=f,e.spot.length=p,e.rectArea.length=m,e.point.length=d,e.hemi.length=v,e.directionalShadowMap.length=g,e.pointShadowMap.length=y,e.spotShadowMap.length=b,e.directionalShadowMatrix.length=g,e.pointShadowMatrix.length=y,e.spotShadowMatrix.length=b,A.directionalLength=f,A.pointLength=d,A.spotLength=p,A.rectAreaLength=m,A.hemiLength=v,A.numDirectionalShadows=g,A.numPointShadows=y,A.numSpotShadows=b,e.version=No++)},state:e}}function zo(){var t=new Do,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Bo(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r;return!1===t.has(n)?(r=new zo,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):!1===t.get(n).has(i)?(r=new zo,t.get(n).set(i,r)):r=t.get(n).get(i),r},dispose:function(){t=new WeakMap}}}function Fo(t){Ui.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ve,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function jo(t){Ui.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new mn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}Fo.prototype=Object.create(Ui.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isMeshDepthMaterial=!0,Fo.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},jo.prototype=Object.create(Ui.prototype),jo.prototype.constructor=jo,jo.prototype.isMeshDistanceMaterial=!0,jo.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};function Vo(t,e,n){var i=new Jr,r=new hn,a=new hn,o=new wn,s=new Array(4),l=new Array(4),u={},c={0:y,1:g,2:b},h=new jr({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new hn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONAL_PASS=1;var d=new ur;d.addAttribute("position",new Gi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var m=new Cr(d,h),x=0;4!==x;++x){var _=0!=(1&x),w=0!=(2&x),S=new Fo({depthPacking:Ue,morphTargets:_,skinning:w});s[x]=S;var E=new jo({morphTargets:_,skinning:w});l[x]=E}var T=this;function C(n,i){var r=e.update(m);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,h,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,f,m,null)}function k(e,n,i,r,a,o){var h=e.geometry,f=null,d=s,p=e.customDepthMaterial;if(i.isPointLight&&(d=l,p=e.customDistanceMaterial),p)f=p;else{var m=!1;n.morphTargets&&(h&&h.isBufferGeometry?m=h.morphAttributes&&h.morphAttributes.position&&h.morphAttributes.position.length>0:h&&h.isGeometry&&(m=h.morphTargets&&h.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var g=0;m&&(g|=1),e.isSkinnedMesh&&n.skinning&&(g|=2),f=d[g]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var y=f.uuid,b=n.uuid,x=u[y];void 0===x&&(x={},u[y]=x);var _=x[b];void 0===_&&(_=f.clone(),x[b]=_),f=_}return f.visible=n.visible,f.wireframe=n.wireframe,f.side=o===v?null!=n.shadowSide?n.shadowSide:n.side:null!=n.shadowSide?n.shadowSide:c[n.side],f.clipShadows=n.clipShadows,f.clippingPlanes=n.clippingPlanes,f.clipIntersection=n.clipIntersection,f.wireframeLinewidth=n.wireframeLinewidth,f.linewidth=n.linewidth,i.isPointLight&&f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=r,f.farDistance=a),f}function P(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===v)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=e.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=u[d.materialIndex];if(p&&p.visible){var m=k(n,p,o,a.near,a.far,s);t.renderBufferDirect(a,null,l,m,n,d)}}else if(u.visible){m=k(n,u,o,a.near,a.far,s);t.renderBufferDirect(a,null,l,m,n,null)}}for(var g=n.children,y=0,b=g.length;y<b;y++)P(g[y],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(e,s,l){if(!1!==T.enabled&&(!1!==T.autoUpdate||!1!==T.needsUpdate)&&0!==e.length){var u=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(M),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=e.length;d<p;d++){var m=e[d],g=m.shadow;if(void 0!==g){r.copy(g.mapSize);var y=g.getFrameExtents();if(r.multiply(y),a.copy(g.mapSize),(r.x>n||r.y>n)&&(console.warn("THREE.WebGLShadowMap:",m,"has shadow exceeding max texture size, reducing"),r.x>n&&(a.x=Math.floor(n/y.x),r.x=a.x*y.x,g.mapSize.x=a.x),r.y>n&&(a.y=Math.floor(n/y.y),r.y=a.y*y.y,g.mapSize.y=a.y)),null===g.map&&!g.isPointLightShadow&&this.type===v){var b={minFilter:Tt,magFilter:Tt,format:Wt};g.map=new Sn(r.x,r.y,b),g.map.texture.name=m.name+".shadowMap",g.mapPass=new Sn(r.x,r.y,b),g.camera.updateProjectionMatrix()}if(null===g.map){b={minFilter:_t,magFilter:_t,format:Wt};g.map=new Sn(r.x,r.y,b),g.map.texture.name=m.name+".shadowMap",g.camera.updateProjectionMatrix()}t.setRenderTarget(g.map),t.clear();for(var x=g.getViewportCount(),_=0;_<x;_++){var w=g.getViewport(_);o.set(a.x*w.x,a.y*w.y,a.x*w.z,a.y*w.w),f.viewport(o),g.updateMatrices(m,l,_),i=g.getFrustum(),P(s,l,g.camera,m,this.type)}g.isPointLightShadow||this.type!==v||C(g,l)}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}T.needsUpdate=!1,t.setRenderTarget(u,c,h)}}}function Uo(t,e,n,i){var r=new function(){var e=!1,n=new wn,i=null,r=new wn(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?at(2929):ot(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case $:t.depthFunc(512);break;case Q:t.depthFunc(519);break;case Y:t.depthFunc(513);break;case X:t.depthFunc(515);break;case Z:t.depthFunc(514);break;case J:t.depthFunc(518);break;case K:t.depthFunc(516);break;case tt:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){var e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){e||(t?at(2960):ot(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&s===n&&l===i||(t.stencilOp(e,n,i),o=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null}}},c=t.getParameter(34921),h=new Uint8Array(c),f=new Uint8Array(c),d=new Uint8Array(c),p={},m=null,v=null,g=null,x=null,_=null,w=null,S=null,E=null,L=null,I=null,N=!1,R=null,D=null,z=null,B=null,F=null,j=t.getParameter(35661),V=!1,U=0,H=t.getParameter(7938);-1!==H.indexOf("WebGL")?(U=parseFloat(/^WebGL\ ([0-9])/.exec(H)[1]),V=U>=1):-1!==H.indexOf("OpenGL ES")&&(U=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(H)[1]),V=U>=2);var G=null,W={},q=new wn,et=new wn;function nt(e,n,i){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var it={};function rt(n,r){(h[n]=1,0===f[n]&&(t.enableVertexAttribArray(n),f[n]=1),d[n]!==r)&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),d[n]=r)}function at(e){!0!==p[e]&&(t.enable(e),p[e]=!0)}function ot(e){!1!==p[e]&&(t.disable(e),p[e]=!1)}function st(e,i,r,a,o,s,l,u){if(e!==M){if(g||(at(3042),g=!0),e===A)o=o||i,s=s||r,l=l||a,i===_&&o===E||(t.blendEquationSeparate(n.convert(i),n.convert(o)),_=i,E=o),r===w&&a===S&&s===L&&l===I||(t.blendFuncSeparate(n.convert(r),n.convert(a),n.convert(s),n.convert(l)),w=r,S=a,L=s,I=l),x=e,N=null;else if(e!==x||u!==N){if(_===O&&E===O||(t.blendEquation(32774),_=O,E=O),u)switch(e){case T:t.blendFuncSeparate(1,771,1,771);break;case C:t.blendFunc(1,1);break;case k:t.blendFuncSeparate(0,0,769,771);break;case P:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case T:t.blendFuncSeparate(770,771,1,771);break;case C:t.blendFunc(770,1);break;case k:t.blendFunc(0,769);break;case P:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}w=null,S=null,L=null,I=null,x=e,N=u}}else g&&(ot(3042),g=!1)}function lt(e){R!==e&&(e?t.frontFace(2304):t.frontFace(2305),R=e)}function ut(e){e!==s?(at(2884),e!==D&&(e===l?t.cullFace(1029):e===u?t.cullFace(1028):t.cullFace(1032))):ot(2884),D=e}function ct(e,n,i){e?(at(32823),B===n&&F===i||(t.polygonOffset(n,i),B=n,F=i)):ot(32823)}function ht(e){void 0===e&&(e=33984+j-1),G!==e&&(t.activeTexture(e),G=e)}return it[3553]=nt(3553,3553,1),it[34067]=nt(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),at(2929),a.setFunc(X),lt(!1),ut(l),at(2884),st(M),{buffers:{color:r,depth:a,stencil:o},initAttributes:function(){for(var t=0,e=h.length;t<e;t++)h[t]=0},enableAttribute:function(t){rt(t,0)},enableAttributeAndDivisor:rt,disableUnusedAttributes:function(){for(var e=0,n=f.length;e!==n;++e)f[e]!==h[e]&&(t.disableVertexAttribArray(e),f[e]=0)},enable:at,disable:ot,getCompressedTextureFormats:function(){if(null===m&&(m=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),i=0;i<n.length;i++)m.push(n[i]);return m},useProgram:function(e){return v!==e&&(t.useProgram(e),v=e,!0)},setBlending:st,setMaterial:function(t,e){t.side===b?ot(2884):at(2884);var n=t.side===y;e&&(n=!n),lt(n),t.blending===T&&!1===t.transparent?st(M):st(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);var i=t.stencilWrite;o.setTest(i),i&&(o.setFunc(t.stencilFunc,t.stencilRef,t.stencilMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),ct(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:lt,setCullFace:ut,setLineWidth:function(e){e!==z&&(V&&t.lineWidth(e),z=e)},setPolygonOffset:ct,setScissorTest:function(t){t?at(3089):ot(3089)},activeTexture:ht,bindTexture:function(e,n){null===G&&ht();var i=W[G];void 0===i&&(i={type:void 0,texture:void 0},W[G]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||it[e]),i.type=e,i.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),q.copy(e))},viewport:function(e){!1===et.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),et.copy(e))},reset:function(){for(var e=0;e<f.length;e++)1===f[e]&&(t.disableVertexAttribArray(e),f[e]=0);p={},m=null,G=null,W={},v=null,x=null,R=null,D=null,r.reset(),a.reset(),o.reset()}}}function Ho(t,e,n,i,r,a,o){var s,l=new WeakMap,u="undefined"!=typeof OffscreenCanvas;function c(t,e){return u?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function h(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?cn.floorPowerOfTwo:Math.floor,o=a(r*t.width),l=a(r*t.height);void 0===s&&(s=c(o,l));var u=n?c(o,l):s;return u.width=o,u.height=l,u.getContext("2d").drawImage(t,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+l+")."),u}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function f(t){return cn.isPowerOfTwo(t.width)&&cn.isPowerOfTwo(t.height)}function d(t,e){return t.generateMipmaps&&e&&t.minFilter!==_t&&t.minFilter!==Tt}function p(e,n,r,a){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function m(t,n){if(!r.isWebGL2)return t;var i=t;return 6403===t&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===t&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===t&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function v(t){return t===_t||t===wt||t===Et?9728:9729}function g(e){var n=e.target;n.removeEventListener("dispose",g),function(e){var n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&l.delete(n),o.memory.textures--}function y(e){var n=e.target;n.removeEventListener("dispose",y),function(e){var n=i.get(e),r=i.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}(n),o.memory.textures--}var b=0;function x(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=o.render.frame;l.get(t)!==e&&(l.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void M(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function _(e,o){if(6===e.image.length){var s=i.get(e);if(e.version>0&&s.__version!==e.version){E(s,e),n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY);for(var l=e&&e.isCompressedTexture,u=e.image[0]&&e.image[0].isDataTexture,c=[],v=0;v<6;v++)c[v]=l||u?u?e.image[v].image:e.image[v]:h(e.image[v],!1,!0,r.maxCubemapSize);var g,y=c[0],b=f(y)||r.isWebGL2,x=a.convert(e.format),_=a.convert(e.type),w=m(x,_);if(S(34067,e,b),l){for(v=0;v<6;v++){g=c[v].mipmaps;for(var M=0;M<g.length;M++){var T=g[M];e.format!==Wt&&e.format!==Gt?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(34069+v,M,w,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+v,M,w,T.width,T.height,0,x,_,T.data)}}s.__maxMipLevel=g.length-1}else{g=e.mipmaps;for(v=0;v<6;v++)if(u){n.texImage2D(34069+v,0,w,c[v].width,c[v].height,0,x,_,c[v].data);for(M=0;M<g.length;M++){var C=(T=g[M]).image[v].image;n.texImage2D(34069+v,M+1,w,C.width,C.height,0,x,_,C.data)}}else{n.texImage2D(34069+v,0,w,x,_,c[v]);for(M=0;M<g.length;M++){T=g[M];n.texImage2D(34069+v,M+1,w,x,_,T.image[v])}}s.__maxMipLevel=g.length}d(e,b)&&p(34067,e,y.width,y.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture)}}function w(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function S(n,o,s){var l;if(s?(t.texParameteri(n,10242,a.convert(o.wrapS)),t.texParameteri(n,10243,a.convert(o.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,a.convert(o.wrapR)),t.texParameteri(n,10240,a.convert(o.magFilter)),t.texParameteri(n,10241,a.convert(o.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===bt&&o.wrapT===bt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,v(o.magFilter)),t.texParameteri(n,10241,v(o.minFilter)),o.minFilter!==_t&&o.minFilter!==Tt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=e.get("EXT_texture_filter_anisotropic")){if(o.type===zt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Bt&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function E(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",g),e.__webglTexture=t.createTexture(),o.memory.textures++)}function M(e,i,o){var s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),E(e,i),n.activeTexture(33984+o),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var l=function(t){return!r.isWebGL2&&(t.wrapS!==bt||t.wrapT!==bt||t.minFilter!==_t&&t.minFilter!==Tt)}(i)&&!1===f(i.image),u=h(i.image,l,!1,r.maxTextureSize),c=f(u)||r.isWebGL2,v=a.convert(i.format),g=a.convert(i.type),y=m(v,g);S(s,i,c);var b,x=i.mipmaps;if(i.isDepthTexture){if(y=6402,i.type===zt){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else r.isWebGL2&&(y=33189);i.format===Yt&&6402===y&&i.type!==Nt&&i.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Nt,g=a.convert(i.type)),i.format===Xt&&(y=34041,i.type!==Ut&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ut,g=a.convert(i.type))),n.texImage2D(3553,0,y,u.width,u.height,0,v,g,null)}else if(i.isDataTexture)if(x.length>0&&c){for(var _=0,w=x.length;_<w;_++)b=x[_],n.texImage2D(3553,_,y,b.width,b.height,0,v,g,b.data);i.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,y,u.width,u.height,0,v,g,u.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(_=0,w=x.length;_<w;_++)b=x[_],i.format!==Wt&&i.format!==Gt?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(3553,_,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,_,y,b.width,b.height,0,v,g,b.data);e.__maxMipLevel=x.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,y,u.width,u.height,u.depth,0,v,g,u.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,y,u.width,u.height,u.depth,0,v,g,u.data),e.__maxMipLevel=0;else if(x.length>0&&c){for(_=0,w=x.length;_<w;_++)b=x[_],n.texImage2D(3553,_,y,v,g,b);i.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,y,v,g,u),e.__maxMipLevel=0;d(i,c)&&p(3553,i,u.width,u.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function T(e,r,o,s){var l=a.convert(r.texture.format),u=a.convert(r.texture.type),c=m(l,u);n.texImage2D(s,0,c,r.width,r.height,0,l,u,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function C(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(i){var r=P(n);t.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=P(n);t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var o=m(a.convert(n.texture.format),a.convert(n.texture.type));if(i){r=P(n);t.renderbufferStorageMultisample(36161,r,o,n.width,n.height)}else t.renderbufferStorage(36161,o,n.width,n.height)}t.bindRenderbuffer(36161,null)}function k(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),x(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Yt)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Xt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),C(n.__webglDepthbuffer[a],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),C(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function P(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}var A=!1,O=!1;this.allocateTextureUnit=function(){var t=b;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),b+=1,t},this.resetTextureUnits=function(){b=0},this.setTexture2D=x,this.setTexture2DArray=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?M(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?M(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=_,this.setTextureCubeDynamic=w,this.setupRenderTarget=function(e){var s=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",y),l.__webglTexture=t.createTexture(),o.memory.textures++;var u=!0===e.isWebGLRenderTargetCube,c=!0===e.isWebGLMultisampleRenderTarget,h=f(e)||r.isWebGL2;if(u){s.__webglFramebuffer=[];for(var v=0;v<6;v++)s.__webglFramebuffer[v]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),c)if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var g=m(a.convert(e.texture.format),a.convert(e.texture.type)),b=P(e);t.renderbufferStorageMultisample(36161,b,g,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),C(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,l.__webglTexture),S(34067,e.texture,h);for(v=0;v<6;v++)T(s.__webglFramebuffer[v],e,36064,34069+v);d(e.texture,h)&&p(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),S(3553,e.texture,h),T(s.__webglFramebuffer,e,36064,3553),d(e.texture,h)&&p(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&k(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(d(e,f(t)||r.isWebGL2)){var a=t.isWebGLRenderTargetCube?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(a,o),p(a,e,t.width,t.height),n.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var a=e.width,o=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===A&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),A=!0),t=t.texture),x(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?_(t,e):w(t,e)}}function Go(t,e,n){return{convert:function(t){var i;if(t===yt)return 10497;if(t===bt)return 33071;if(t===xt)return 33648;if(t===_t)return 9728;if(t===wt)return 9984;if(t===Et)return 9986;if(t===Tt)return 9729;if(t===Ct)return 9985;if(t===Pt)return 9987;if(t===Ot)return 5121;if(t===Ft)return 32819;if(t===jt)return 32820;if(t===Vt)return 33635;if(t===Lt)return 5120;if(t===It)return 5122;if(t===Nt)return 5123;if(t===Rt)return 5124;if(t===Dt)return 5125;if(t===zt)return 5126;if(t===Bt){if(n.isWebGL2)return 5131;if(null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(t===Ht)return 6406;if(t===Gt)return 6407;if(t===Wt)return 6408;if(t===qt)return 6409;if(t===$t)return 6410;if(t===Yt)return 6402;if(t===Xt)return 34041;if(t===Zt)return 6403;if(t===O)return 32774;if(t===L)return 32778;if(t===I)return 32779;if(t===D)return 0;if(t===z)return 1;if(t===B)return 768;if(t===F)return 769;if(t===j)return 770;if(t===V)return 771;if(t===U)return 772;if(t===H)return 773;if(t===G)return 774;if(t===W)return 775;if(t===q)return 776;if((t===Jt||t===Kt||t===te||t===ee)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(t===Jt)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Kt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===te)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ee)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===ne||t===ie||t===re||t===ae)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===ne)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ie)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===re)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ae)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===oe&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((t===se||t===le||t===ue||t===ce||t===he||t===fe||t===de||t===pe||t===me||t===ve||t===ge||t===ye||t===be||t===xe)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return t;if(t===N||t===R){if(n.isWebGL2){if(t===N)return 32775;if(t===R)return 32776}if(null!==(i=e.get("EXT_blend_minmax"))){if(t===N)return i.MIN_EXT;if(t===R)return i.MAX_EXT}}if(t===Ut){if(n.isWebGL2)return 34042;if(null!==(i=e.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Wo(){Xn.call(this),this.type="Group"}function qo(t){Ur.call(this),this.cameras=t||[]}Wo.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Wo,isGroup:!0}),qo.prototype=Object.assign(Object.create(Ur.prototype),{constructor:qo,isArrayCamera:!0});var $o,Qo=new mn,Yo=new mn;function Xo(t,e,n){Qo.setFromMatrixPosition(e.matrixWorld),Yo.setFromMatrixPosition(n.matrixWorld);var i=Qo.distanceTo(Yo),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=i/(-c+h),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=o+p,g=s+p,y=f-m,b=d+(i-m),x=l*s/g*v,_=u*s/g*v;t.projectionMatrix.makePerspective(y,b,x,_,v,g)}function Zo(t){var e,n,i=this,r=null,a=null,o=null,s=[],l=new Ln,u=new Ln,c=1,h="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(a=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",_,!1));var f=new Ln,d=new fn,p=new mn,m=new Ur;m.viewport=new wn,m.layers.enable(1);var v=new Ur;v.viewport=new wn,v.layers.enable(2);var g=new qo([m,v]);function y(){return null!==r&&!0===r.isPresenting}g.layers.enable(1),g.layers.enable(2);var b,x=new hn;function _(){if(y()){var a=r.getEyeParameters("left");e=2*a.renderWidth*c,n=a.renderHeight*c,b=t.getPixelRatio(),t.getSize(x),t.setDrawingBufferSize(e,n,1),m.viewport.set(0,0,e/2,n),v.viewport.set(e/2,0,e/2,n),M.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&t.setDrawingBufferSize(x.width,x.height,b),M.stop(),i.dispatchEvent({type:"sessionend"})}var w=[];function S(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=e.length;n<r;n++){var a=e[n];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("HTC Vive Focus")||a.id.startsWith("Spatial Controller"))){if(i===t)return a;i++}}}function E(t,i){null!==i&&4===i.length&&t.set(i[0]*e,i[1]*n,i[2]*e,i[3]*n)}this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Wo).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),M.setContext(t)},this.setFramebufferScaleFactor=function(t){c=t},this.setReferenceSpaceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){var e="local-floor"===h?1.6:0;if(!1===y())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(a),"local-floor"===h){var n=r.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,e,0)}var i=a.pose,c=null!==o?o:t;c.matrix.copy(l),c.matrix.decompose(c.position,c.quaternion,c.scale),null!==i.orientation&&(d.fromArray(i.orientation),c.quaternion.multiply(d)),null!==i.position&&(d.setFromRotationMatrix(l),p.fromArray(i.position),p.applyQuaternion(d),c.position.add(p)),c.updateMatrixWorld(),m.near=t.near,v.near=t.near,m.far=t.far,v.far=t.far,m.matrixWorldInverse.fromArray(a.leftViewMatrix),v.matrixWorldInverse.fromArray(a.rightViewMatrix),u.getInverse(l),"local-floor"===h&&(m.matrixWorldInverse.multiply(u),v.matrixWorldInverse.multiply(u));var b=c.parent;null!==b&&(f.getInverse(b.matrixWorld),m.matrixWorldInverse.multiply(f),v.matrixWorldInverse.multiply(f)),m.matrixWorld.getInverse(m.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),m.projectionMatrix.fromArray(a.leftProjectionMatrix),v.projectionMatrix.fromArray(a.rightProjectionMatrix),Xo(g,m,v);var x=r.getLayers();if(x.length){var _=x[0];E(m.viewport,_.leftBounds),E(v.viewport,_.rightBounds)}return function(){for(var t=0;t<s.length;t++){var e=s[t],n=S(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(l),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===w[t]&&(w[t]=!1),w[t]!==n.buttons[r].pressed&&(w[t]=n.buttons[r].pressed,!0===w[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),g},this.getStandingMatrix=function(){return l},this.isPresenting=y;var M=new na;this.setAnimationLoop=function(t){M.setAnimationLoop(t),y()&&M.start()},this.submitFrame=function(){y()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",_)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Jo(t,e){var n=this,i=null,r=null,a="local-floor",o=null,s=[],l=[];function u(){return null!==i&&null!==r}var c=new Ur;c.layers.enable(1),c.viewport=new wn;var h=new Ur;h.layers.enable(2),h.viewport=new wn;var f=new qo([c,h]);function d(t){for(var e=0;e<s.length;e++)l[e]===t.inputSource&&s[e].dispatchEvent({type:t.type})}function p(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),y.stop(),n.dispatchEvent({type:"sessionend"})}function m(t){r=t,y.setContext(i),y.start(),n.dispatchEvent({type:"sessionstart"})}function v(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Wo).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){a=t},this.getSession=function(){return i},this.setSession=function(t){null!==(i=t)&&(i.addEventListener("select",d),i.addEventListener("selectstart",d),i.addEventListener("selectend",d),i.addEventListener("end",p),i.updateRenderState({baseLayer:new XRWebGLLayer(i,e)}),i.requestReferenceSpace(a).then(m),l=i.inputSources,i.addEventListener("inputsourceschange",(function(){l=i.inputSources,console.log(l);for(var t=0;t<s.length;t++){s[t].userData.inputSource=l[t]}})))},this.getCamera=function(t){if(u()){var e=t.parent,n=f.cameras;v(f,e);for(var i=0;i<n.length;i++)v(n[i],e);t.matrixWorld.copy(f.matrixWorld);for(var r=t.children,a=(i=0,r.length);i<a;i++)r[i].updateMatrixWorld(!0);return Xo(f,c,h),f}return t},this.isPresenting=u;var g=null;var y=new na;y.setAnimationLoop((function(e,n){if(null!==(o=n.getViewerPose(r))){var a=o.views,u=i.renderState.baseLayer;t.setFramebuffer(u.framebuffer);for(var c=0;c<a.length;c++){var h=a[c],d=u.getViewport(h),p=h.transform.inverse.matrix,m=f.cameras[c];m.matrix.fromArray(p).getInverse(m.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===c&&f.matrix.copy(m.matrix)}}for(c=0;c<s.length;c++){var v=s[c],y=l[c];if(y){var b=n.getPose(y.targetRaySpace,r);if(null!==b){v.matrix.fromArray(b.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}g&&g(e)})),this.setAnimationLoop=function(t){g=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Ln},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Ko(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,f=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=at,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,m,v,g,b,x,_,w,S,E,M,T,C,k,P,A,O,L=this,I=!1,N=null,R=0,D=0,z=null,B=null,F=-1,j={geometry:null,program:null,wireframe:!1},V=null,U=null,H=new wn,G=new wn,W=null,q=e.width,$=e.height,Q=1,Y=new wn(0,0,q,$),X=new wn(0,0,q,$),Z=!1,J=new Jr,K=new ua,tt=!1,et=!1,nt=new Ln,it=new mn;function rt(){return null===z?Q:1}try{var ot={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ct,!1),e.addEventListener("webglcontextrestored",ht,!1),null===(d=n||e.getContext("webgl",ot)||e.getContext("experimental-webgl",ot)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function st(){p=new ca(d),(m=new la(d,p,t)).isWebGL2||(p.get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays")),p.get("OES_texture_float_linear"),O=new Go(d,p,m),(v=new Uo(d,p,O,m)).scissor(G.copy(X).multiplyScalar(Q).floor()),v.viewport(H.copy(Y).multiplyScalar(Q).floor()),g=new da(d),b=new ko,x=new Ho(d,p,v,b,m,O,g),_=new ia(d),w=new ha(d,_,g),S=new va(w,g),k=new ma(d),E=new Co(L,p,m),M=new Lo,T=new Bo,C=new oa(L,v,S,s),P=new sa(d,p,g,m),A=new fa(d,p,g,m),g.programs=E.programs,L.capabilities=m,L.extensions=p,L.properties=b,L.renderLists=M,L.state=v,L.info=g}st();var lt="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new Jo(L,d):new Zo(L);this.vr=lt;var ut=new Vo(L,S,m.maxTextureSize);function ct(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1,st()}function ft(t){var e=t.target;e.removeEventListener("dispose",ft),function(t){dt(t),b.remove(t)}(e)}function dt(t){var e=b.get(t).program;t.program=void 0,void 0!==e&&E.releaseProgram(e)}this.shadowMap=ut,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=p.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=p.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(t){void 0!==t&&(Q=t,this.setSize(q,$,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new hn),t.set(q,$)},this.setSize=function(t,n,i){lt.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=t,$=n,e.width=Math.floor(t*Q),e.height=Math.floor(n*Q),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new hn),t.set(q*Q,$*Q).floor()},this.setDrawingBufferSize=function(t,n,i){q=t,$=n,Q=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new wn),t.copy(H)},this.getViewport=function(t){return t.copy(Y)},this.setViewport=function(t,e,n,i){t.isVector4?Y.set(t.x,t.y,t.z,t.w):Y.set(t,e,n,i),v.viewport(H.copy(Y).multiplyScalar(Q).floor())},this.getScissor=function(t){return t.copy(X)},this.setScissor=function(t,e,n,i){t.isVector4?X.set(t.x,t.y,t.z,t.w):X.set(t,e,n,i),v.scissor(G.copy(X).multiplyScalar(Q).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(t){v.setScissorTest(Z=t)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),d.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ct,!1),e.removeEventListener("webglcontextrestored",ht,!1),M.dispose(),T.dispose(),b.dispose(),S.dispose(),lt.dispose(),mt.stop()},this.renderBufferImmediate=function(t,e){v.initAttributes();var n=b.get(t);t.hasPositions&&!n.position&&(n.position=d.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=d.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=d.createBuffer()),t.hasColors&&!n.color&&(n.color=d.createBuffer());var i=e.getAttributes();t.hasPositions&&(d.bindBuffer(34962,n.position),d.bufferData(34962,t.positionArray,35048),v.enableAttribute(i.position),d.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(d.bindBuffer(34962,n.normal),d.bufferData(34962,t.normalArray,35048),v.enableAttribute(i.normal),d.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(d.bindBuffer(34962,n.uv),d.bufferData(34962,t.uvArray,35048),v.enableAttribute(i.uv),d.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(d.bindBuffer(34962,n.color),d.bufferData(34962,t.colorArray,35048),v.enableAttribute(i.color),d.vertexAttribPointer(i.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),d.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,a){var o=r.isMesh&&r.matrixWorld.determinant()<0;v.setMaterial(i,o);var s=xt(t,e,i,r),l=!1;j.geometry===n.id&&j.program===s.id&&j.wireframe===(!0===i.wireframe)||(j.geometry=n.id,j.program=s.id,j.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(k.update(r,n,i,s),l=!0);var u,c=n.index,h=n.attributes.position,f=1;!0===i.wireframe&&(c=w.getWireframeAttribute(n),f=2);var g=P;null!==c&&(u=_.get(c),(g=A).setIndex(u)),l&&(!function(t,e,n){if(n&&n.isInstancedBufferGeometry&&!m.isWebGL2&&null===p.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");v.initAttributes();var i=n.attributes,r=e.getAttributes(),a=t.defaultAttributeValues;for(var o in r){var s=r[o];if(s>=0){var l=i[o];if(void 0!==l){var u=l.normalized,c=l.itemSize,h=_.get(l);if(void 0===h)continue;var f=h.buffer,g=h.type,y=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var b=l.data,x=b.stride,w=l.offset;b&&b.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):v.enableAttribute(s),d.bindBuffer(34962,f),d.vertexAttribPointer(s,c,g,u,x*y,w*y)}else l.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):v.enableAttribute(s),d.bindBuffer(34962,f),d.vertexAttribPointer(s,c,g,u,0,0)}else if(void 0!==a){var S=a[o];if(void 0!==S)switch(S.length){case 2:d.vertexAttrib2fv(s,S);break;case 3:d.vertexAttrib3fv(s,S);break;case 4:d.vertexAttrib4fv(s,S);break;default:d.vertexAttrib1fv(s,S)}}}}v.disableUnusedAttributes()}(i,s,n),null!==c&&d.bindBuffer(34963,u.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var b=n.drawRange.start*f,x=n.drawRange.count*f,S=null!==a?a.start*f:0,E=null!==a?a.count*f:1/0,M=Math.max(b,S),T=Math.min(y,b+x,S+E)-1,C=Math.max(0,T-M+1);if(0!==C){if(r.isMesh)if(!0===i.wireframe)v.setLineWidth(i.wireframeLinewidth*rt()),g.setMode(1);else switch(r.drawMode){case Ae:g.setMode(4);break;case Oe:g.setMode(5);break;case Le:g.setMode(6)}else if(r.isLine){var O=i.linewidth;void 0===O&&(O=1),v.setLineWidth(O*rt()),r.isLineSegments?g.setMode(1):r.isLineLoop?g.setMode(2):g.setMode(3)}else r.isPoints?g.setMode(0):r.isSprite&&g.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,M,C):g.render(M,C)}},this.compile=function(t,e){(f=T.get(t,e)).init(),t.traverse((function(t){t.isLight&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)bt(e.material[n],t.fog,e);else bt(e.material,t.fog,e)}))};var pt=null;var mt=new na;function vt(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||J.intersectsSprite(t)){i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);var r=S.update(t);(a=t.material).visible&&h.push(t,r,a,n,it.z,null)}}else if(t.isImmediateRenderObject)i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt),h.push(t,null,t.material,n,it.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||J.intersectsObject(t))){i&&it.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);r=S.update(t);var a=t.material;if(Array.isArray(a))for(var o=r.groups,s=0,l=o.length;s<l;s++){var u=o[s],c=a[u.materialIndex];c&&c.visible&&h.push(t,r,c,n,it.z,u)}else a.visible&&h.push(t,r,a,n,it.z,null)}var d=t.children;for(s=0,l=d.length;s<l;s++)vt(d[s],e,n,i)}}function gt(t,e,n,i){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,u=void 0===i?o.material:i,c=o.group;if(n.isArrayCamera){U=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var m=h[d];s.layers.test(m.layers)&&(v.viewport(H.copy(m.viewport)),f.setupLights(m),yt(s,e,m,l,u,c))}}else U=null,yt(s,e,n,l,u,c)}}function yt(t,e,n,i,r,a){if(t.onBeforeRender(L,e,n,i,r,a),f=T.get(e,U||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){v.setMaterial(r);var o=xt(n,e.fog,r,t);j.geometry=null,j.program=null,j.wireframe=!1,function(t,e){t.render((function(t){L.renderBufferImmediate(t,e)}))}(t,o)}else L.renderBufferDirect(n,e.fog,i,r,t,a);t.onAfterRender(L,e,n,i,r,a),f=T.get(e,U||n)}function bt(t,e,n){var i=b.get(t),r=f.state.lights,a=f.state.shadowsArray,o=r.state.version,s=E.getParameters(t,r.state,a,e,K.numPlanes,K.numIntersection,n),l=E.getProgramCode(t,s),u=i.program,c=!0;if(void 0===u)t.addEventListener("dispose",ft);else if(u.code!==l)dt(t);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var h=ea[s.shaderID];i.shader={name:t.type,uniforms:zr(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,L),l=E.getProgramCode(t,s),u=E.acquireProgram(t,i.shader,s,l),i.program=u,t.program=u}var d=u.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<L.maxMorphTargets;p++)d["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(p=0;p<L.maxMorphNormals;p++)d["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var m=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=K.numPlanes,i.numIntersection=K.numIntersection,m.clippingPlanes=K.uniform),i.fog=e,i.lightsStateVersion=o,t.lights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.spotLights.value=r.state.spot,m.rectAreaLights.value=r.state.rectArea,m.pointLights.value=r.state.point,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var v=i.program.getUniforms(),g=po.seqWithValue(v.seq,m);i.uniformsList=g}function xt(t,e,n,i){x.resetTextureUnits();var r=b.get(n),a=f.state.lights;if(tt&&(et||t!==V)){var o=t===V&&n.id===F;K.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,o)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsStateVersion!==a.state.version?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===K.numPlanes&&r.numIntersection===K.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(bt(n,e,i),n.needsUpdate=!1);var s,l,u=!1,c=!1,h=!1,p=r.program,g=p.getUniforms(),_=r.shader.uniforms;if(v.useProgram(p.program)&&(u=!0,c=!0,h=!0),n.id!==F&&(F=n.id,c=!0),u||V!==t){if(g.setValue(d,"projectionMatrix",t.projectionMatrix),m.logarithmicDepthBuffer&&g.setValue(d,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),V!==t&&(V=t,c=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var w=g.map.cameraPosition;void 0!==w&&w.setValue(d,it.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&g.setValue(d,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){g.setOptional(d,i,"bindMatrix"),g.setOptional(d,i,"bindMatrixInverse");var S=i.skeleton;if(S){var E=S.bones;if(m.floatVertexTextures){if(void 0===S.boneTexture){var M=Math.sqrt(4*E.length);M=cn.ceilPowerOfTwo(M),M=Math.max(M,4);var T=new Float32Array(M*M*4);T.set(S.boneMatrices);var C=new Wr(T,M,M,Wt,zt);C.needsUpdate=!0,S.boneMatrices=T,S.boneTexture=C,S.boneTextureSize=M}g.setValue(d,"boneTexture",S.boneTexture,x),g.setValue(d,"boneTextureSize",S.boneTextureSize)}else g.setOptional(d,S,"boneMatrices")}}return c&&(g.setValue(d,"toneMappingExposure",L.toneMappingExposure),g.setValue(d,"toneMappingWhitePoint",L.toneMappingWhitePoint),n.lights&&(l=h,(s=_).ambientLightColor.needsUpdate=l,s.lightProbe.needsUpdate=l,s.directionalLights.needsUpdate=l,s.pointLights.needsUpdate=l,s.spotLights.needsUpdate=l,s.rectAreaLights.needsUpdate=l,s.hemisphereLights.needsUpdate=l),e&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(_,e),n.isMeshBasicMaterial?_t(_,n):n.isMeshLambertMaterial?(_t(_,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(_,n)):n.isMeshPhongMaterial?(_t(_,n),n.isMeshToonMaterial?function(t,e){wt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(_,n):wt(_,n)):n.isMeshStandardMaterial?(_t(_,n),n.isMeshPhysicalMaterial?function(t,e){St(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===y&&t.clearcoatNormalScale.value.negate());t.transparency.value=e.transparency}(_,n):St(_,n)):n.isMeshMatcapMaterial?(_t(_,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshDepthMaterial?(_t(_,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isMeshDistanceMaterial?(_t(_,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(_,n)):n.isMeshNormalMaterial?(_t(_,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(_,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(_,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(_,n)):n.isPointsMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*Q,t.scale.value=.5*$,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,n):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(_,n):n.isShadowMaterial&&(_.color.value.copy(n.color),_.opacity.value=n.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=ta.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=ta.LTC_2),po.upload(d,r.uniformsList,_,x)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(po.upload(d,r.uniformsList,_,x),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(d,"center",i.center),g.setValue(d,"modelViewMatrix",i.modelViewMatrix),g.setValue(d,"normalMatrix",i.normalMatrix),g.setValue(d,"modelMatrix",i.matrixWorld),p}function _t(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=b.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function wt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function St(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===y&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===y&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}mt.setAnimationLoop((function(t){lt.isPresenting()||pt&&pt(t)})),"undefined"!=typeof window&&mt.setContext(window),this.setAnimationLoop=function(t){pt=t,lt.setAnimationLoop(t),mt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),e&&e.isCamera){if(!I){j.geometry=null,j.program=null,j.wireframe=!1,F=-1,V=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),lt.enabled&&(e=lt.getCamera(e)),(f=T.get(t,e)).init(),t.onBeforeRender(L,t,e,n||z),nt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),J.setFromMatrix(nt),et=this.localClippingEnabled,tt=K.init(this.clippingPlanes,et,e),(h=M.get(t,e)).init(),vt(t,e,0,L.sortObjects),!0===L.sortObjects&&h.sort(),tt&&K.beginShadows();var r=f.state.shadowsArray;ut.render(r,t,e),f.setupLights(e),tt&&K.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),C.render(h,t,e,i);var a=h.opaque,o=h.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;a.length&&gt(a,t,e,s),o.length&&gt(o,t,e,s)}else a.length&&gt(a,t,e),o.length&&gt(o,t,e);t.onAfterRender(L,t,e),null!==z&&(x.updateRenderTargetMipmap(z),x.updateMultisampleRenderTarget(z)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),lt.enabled&&lt.submitFrame(),h=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){N!==t&&d.bindFramebuffer(36160,t),N=t},this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return z},this.setRenderTarget=function(t,e,n){z=t,R=e,D=n,t&&void 0===b.get(t).__webglFramebuffer&&x.setupRenderTarget(t);var i=N,r=!1;if(t){var a=b.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=a[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?b.get(t).__webglMultisampledFramebuffer:a,H.copy(t.viewport),G.copy(t.scissor),W=t.scissorTest}else H.copy(Y).multiplyScalar(Q).floor(),G.copy(X).multiplyScalar(Q).floor(),W=Z;if(B!==i&&(d.bindFramebuffer(36160,i),B=i),v.viewport(H),v.scissor(G),v.setScissorTest(W),r){var o=b.get(t.texture);d.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=b.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){var l=!1;s!==B&&(d.bindFramebuffer(36160,s),l=!0);try{var u=t.texture,c=u.format,h=u.type;if(c!==Wt&&O.convert(c)!==d.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Ot||O.convert(h)===d.getParameter(35738)||h===zt&&(m.isWebGL2||p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float"))||h===Bt&&(m.isWebGL2?p.get("EXT_color_buffer_float"):p.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===d.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&d.readPixels(e,n,i,r,O.convert(c),O.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&d.bindFramebuffer(36160,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,a=O.convert(e.format);x.setTexture2D(e,0),d.copyTexImage2D(3553,n||0,a,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,a=e.image.height,o=O.convert(n.format),s=O.convert(n.type);x.setTexture2D(n,0),e.isDataTexture?d.texSubImage2D(3553,i||0,t.x,t.y,r,a,o,s,e.image.data):d.texSubImage2D(3553,i||0,t.x,t.y,o,s,e.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ts(t,e){this.name="",this.color=new Di(t),this.density=void 0!==e?e:25e-5}function es(t,e,n){this.name="",this.color=new Di(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function ns(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function is(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function rs(t){Ui.call(this),this.type="SpriteMaterial",this.color=new Di(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}Object.assign(Zo.prototype,i.prototype),Object.assign(Jo.prototype,i.prototype),Object.assign(ts.prototype,{isFogExp2:!0,clone:function(){return new ts(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(es.prototype,{isFog:!0,clone:function(){return new es(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(ns.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ns.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(is.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(is.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),rs.prototype=Object.create(Ui.prototype),rs.prototype.constructor=rs,rs.prototype.isSpriteMaterial=!0,rs.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var as=new mn,os=new mn,ss=new mn,ls=new hn,us=new hn,cs=new Ln,hs=new mn,fs=new mn,ds=new mn,ps=new hn,ms=new hn,vs=new hn;function gs(t){if(Xn.call(this),this.type="Sprite",void 0===$o){$o=new ur;var e=new ns(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);$o.setIndex([0,1,2,0,2,3]),$o.addAttribute("position",new is(e,3,0,!1)),$o.addAttribute("uv",new is(e,2,3,!1))}this.geometry=$o,this.material=void 0!==t?t:new rs,this.center=new hn(.5,.5)}function ys(t,e,n,i,r,a){ls.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(us.x=a*ls.x-r*ls.y,us.y=r*ls.x+a*ls.y):us.copy(ls),t.copy(e),t.x+=us.x,t.y+=us.y,t.applyMatrix4(cs)}gs.prototype=Object.assign(Object.create(Xn.prototype),{constructor:gs,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),os.setFromMatrixScale(this.matrixWorld),cs.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ss.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&os.multiplyScalar(-ss.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;ys(hs.set(-.5,-.5,0),ss,a,os,n,i),ys(fs.set(.5,-.5,0),ss,a,os,n,i),ys(ds.set(.5,.5,0),ss,a,os,n,i),ps.set(0,0),ms.set(1,0),vs.set(1,1);var o=t.ray.intersectTriangle(hs,fs,ds,!1,as);if(null!==o||(ys(fs.set(-.5,.5,0),ss,a,os,n,i),ms.set(0,1),null!==(o=t.ray.intersectTriangle(hs,ds,fs,!1,as)))){var s=t.ray.origin.distanceTo(as);s<t.near||s>t.far||e.push({distance:s,point:as.clone(),uv:Li.getUV(as,hs,fs,ds,ps,ms,vs,new hn),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Xn.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var bs=new mn,xs=new mn;function _s(){Xn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function ws(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Cr.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ln,this.bindMatrixInverse=new Ln}_s.prototype=Object.assign(Object.create(Xn.prototype),{constructor:_s,isLOD:!0,copy:function(t){Xn.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(t,e){bs.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(bs);this.getObjectForDistance(n).raycast(t,e)},update:function(t){var e=this.levels;if(e.length>1){bs.setFromMatrixPosition(t.matrixWorld),xs.setFromMatrixPosition(this.matrixWorld);var n=bs.distanceTo(xs);e[0].object.visible=!0;for(var i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){var e=Xn.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),ws.prototype=Object.assign(Object.create(Cr.prototype),{constructor:ws,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new wn,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Cr.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ss=new Ln,Es=new Ln;function Ms(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ln)}}function Ts(){Xn.call(this),this.type="Bone"}function Cs(t){Ui.call(this),this.type="LineBasicMaterial",this.color=new Di(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}Object.assign(Ms.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Ln;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:Es;Ss.multiplyMatrices(o,e[r]),Ss.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new Ms(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),Ts.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Ts,isBone:!0}),Cs.prototype=Object.create(Ui.prototype),Cs.prototype.constructor=Cs,Cs.prototype.isLineBasicMaterial=!0,Cs.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var ks=new mn,Ps=new mn,As=new Ln,Os=new _i,Ls=new di;function Is(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Xn.call(this),this.type="Line",this.geometry=void 0!==t?t:new ur,this.material=void 0!==e?e:new Cs({color:16777215*Math.random()})}Is.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Is,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)ks.fromBufferAttribute(e,i-1),Ps.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=ks.distanceTo(Ps);t.addAttribute("lineDistance",new Ji(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;(n=t.lineDistances)[0]=0;for(i=1,r=a.length;i<r;i++)n[i]=n[i-1],n[i]+=a[i-1].distanceTo(a[i])}return this},raycast:function(t,e){var n=t.linePrecision,i=this.geometry,r=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ls.copy(i.boundingSphere),Ls.applyMatrix4(r),Ls.radius+=n,!1!==t.ray.intersectsSphere(Ls)){As.getInverse(r),Os.copy(t.ray).applyMatrix4(As);var a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new mn,l=new mn,u=new mn,c=new mn,h=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var f=i.index,d=i.attributes.position.array;if(null!==f)for(var p=f.array,m=0,v=p.length-1;m<v;m+=h){var g=p[m],y=p[m+1];if(s.fromArray(d,3*g),l.fromArray(d,3*y),!(Os.distanceSqToSegment(s,l,c,u)>o))c.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(c))<t.near||_>t.far||e.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,v=d.length/3-1;m<v;m+=h){if(s.fromArray(d,3*m),l.fromArray(d,3*m+3),!(Os.distanceSqToSegment(s,l,c,u)>o))c.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(c))<t.near||_>t.far||e.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(i.isGeometry){var b=i.vertices,x=b.length;for(m=0;m<x-1;m+=h){var _;if(!(Os.distanceSqToSegment(b[m],b[m+1],c,u)>o))c.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(c))<t.near||_>t.far||e.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ns=new mn,Rs=new mn;function Ds(t,e){Is.call(this,t,e),this.type="LineSegments"}function zs(t,e){Is.call(this,t,e),this.type="LineLoop"}function Bs(t){Ui.call(this),this.type="PointsMaterial",this.color=new Di(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}Ds.prototype=Object.assign(Object.create(Is.prototype),{constructor:Ds,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)Ns.fromBufferAttribute(e,i),Rs.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Ns.distanceTo(Rs);t.addAttribute("lineDistance",new Ji(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;for(n=t.lineDistances,i=0,r=a.length;i<r;i+=2)Ns.copy(a[i]),Rs.copy(a[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Ns.distanceTo(Rs)}return this}}),zs.prototype=Object.assign(Object.create(Is.prototype),{constructor:zs,isLineLoop:!0}),Bs.prototype=Object.create(Ui.prototype),Bs.prototype.constructor=Bs,Bs.prototype.isPointsMaterial=!0,Bs.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Fs=new Ln,js=new _i,Vs=new di,Us=new mn;function Hs(t,e){Xn.call(this),this.type="Points",this.geometry=void 0!==t?t:new ur,this.material=void 0!==e?e:new Bs({color:16777215*Math.random()}),this.updateMorphTargets()}function Gs(t,e,n,i,r,a,o){var s=js.distanceSqToPoint(t);if(s<n){var l=new mn;js.closestPointToPoint(t,l),l.applyMatrix4(i);var u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}function Ws(t,e,n,i,r,a,o,s,l){_n.call(this,t,e,n,i,r,a,o,s,l),this.format=void 0!==o?o:Gt,this.minFilter=void 0!==a?a:Tt,this.magFilter=void 0!==r?r:Tt,this.generateMipmaps=!1}function qs(t,e,n,i,r,a,o,s,l,u,c,h){_n.call(this,null,a,o,s,l,u,i,r,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function $s(t,e,n,i,r,a,o,s,l){_n.call(this,t,e,n,i,r,a,o,s,l),this.needsUpdate=!0}function Qs(t,e,n,i,r,a,o,s,l,u){if((u=void 0!==u?u:Yt)!==Yt&&u!==Xt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Yt&&(n=Nt),void 0===n&&u===Xt&&(n=Ut),_n.call(this,null,i,r,a,o,s,u,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:_t,this.minFilter=void 0!==s?s:_t,this.flipY=!1,this.generateMipmaps=!1}function Ys(t){ur.call(this),this.type="WireframeGeometry";var e,n,i,r,a,o,s,l,u,c,h=[],f=[0,0],d={},p=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var v=m[e];for(n=0;n<3;n++)s=v[p[n]],l=v[p[(n+1)%3]],f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===d[u=f[0]+","+f[1]]&&(d[u]={index1:f[0],index2:f[1]})}for(u in d)o=d[u],c=t.vertices[o.index1],h.push(c.x,c.y,c.z),c=t.vertices[o.index2],h.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,b,x,_,w,S;if(c=new mn,null!==t.index){for(g=t.attributes.position,y=t.index,0===(b=t.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),r=0,a=b.length;r<a;++r)for(e=_=(x=b[r]).start,i=_+x.count;e<i;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),l=y.getX(e+(n+1)%3),f[0]=Math.min(s,l),f[1]=Math.max(s,l),void 0===d[u=f[0]+","+f[1]]&&(d[u]={index1:f[0],index2:f[1]});for(u in d)o=d[u],c.fromBufferAttribute(g,o.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,o.index2),h.push(c.x,c.y,c.z)}else for(e=0,i=(g=t.attributes.position).count/3;e<i;e++)for(n=0;n<3;n++)w=3*e+n,c.fromBufferAttribute(g,w),h.push(c.x,c.y,c.z),S=3*e+(n+1)%3,c.fromBufferAttribute(g,S),h.push(c.x,c.y,c.z)}this.addAttribute("position",new Ji(h,3))}function Xs(t,e,n){Nr.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Zs(t,e,n)),this.mergeVertices()}function Zs(t,e,n){ur.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,a=[],o=[],s=[],l=[],u=new mn,c=new mn,h=new mn,f=new mn,d=new mn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=e+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=e;r++){var v=r/e;t(v,m,c),o.push(c.x,c.y,c.z),v-1e-5>=0?(t(v-1e-5,m,h),f.subVectors(c,h)):(t(v+1e-5,m,h),f.subVectors(h,c)),m-1e-5>=0?(t(v,m-1e-5,h),d.subVectors(c,h)):(t(v,m+1e-5,h),d.subVectors(h,c)),u.crossVectors(f,d).normalize(),s.push(u.x,u.y,u.z),l.push(v,m)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var g=i*p+r,y=i*p+r+1,b=(i+1)*p+r+1,x=(i+1)*p+r;a.push(g,y,x),a.push(y,b,x)}this.setIndex(a),this.addAttribute("position",new Ji(o,3)),this.addAttribute("normal",new Ji(s,3)),this.addAttribute("uv",new Ji(l,2))}function Js(t,e,n,i){Nr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Ks(t,e,n,i)),this.mergeVertices()}function Ks(t,e,n,i){ur.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var r=[],a=[];function o(t,e,n,i){var r,a,o=Math.pow(2,i),l=[];for(r=0;r<=o;r++){l[r]=[];var u=t.clone().lerp(n,r/o),c=e.clone().lerp(n,r/o),h=o-r;for(a=0;a<=h;a++)l[r][a]=0===a&&r===o?u:u.clone().lerp(c,a/h)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var f=Math.floor(a/2);a%2==0?(s(l[r][f+1]),s(l[r+1][f]),s(l[r][f])):(s(l[r][f+1]),s(l[r+1][f+1]),s(l[r+1][f]))}}function s(t){r.push(t.x,t.y,t.z)}function l(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function u(t,e,n,i){i<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=i/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new mn,i=new mn,r=new mn,a=0;a<e.length;a+=3)l(e[a+0],n),l(e[a+1],i),l(e[a+2],r),o(n,i,r,t)}(i=i||0),function(t){for(var e=new mn,n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){for(var t=new mn,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var n=c(t)/2/Math.PI+.5,i=(o=t,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-i)}var o;(function(){for(var t=new mn,e=new mn,n=new mn,i=new mn,o=new hn,s=new hn,l=new hn,h=0,f=0;h<r.length;h+=9,f+=6){t.set(r[h+0],r[h+1],r[h+2]),e.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),o.set(a[f+0],a[f+1]),s.set(a[f+2],a[f+3]),l.set(a[f+4],a[f+5]),i.copy(t).add(e).add(n).divideScalar(3);var d=c(i);u(o,f+0,t,d),u(s,f+2,e,d),u(l,f+4,n,d)}})(),function(){for(var t=0;t<a.length;t+=6){var e=a[t+0],n=a[t+2],i=a[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),i<.2&&(a[t+4]+=1))}}()}(),this.addAttribute("position",new Ji(r,3)),this.addAttribute("normal",new Ji(r.slice(),3)),this.addAttribute("uv",new Ji(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function tl(t,e){Nr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new el(t,e)),this.mergeVertices()}function el(t,e){Ks.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function nl(t,e){Nr.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new il(t,e)),this.mergeVertices()}function il(t,e){Ks.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function rl(t,e){Nr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new al(t,e)),this.mergeVertices()}function al(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Ks.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ol(t,e){Nr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new sl(t,e)),this.mergeVertices()}function sl(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];Ks.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ll(t,e,n,i,r,a){Nr.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new ul(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function ul(t,e,n,i,r){ur.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},e=e||64,n=n||1,i=i||8,r=r||!1;var a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,l=new mn,u=new mn,c=new hn,h=new mn,f=[],d=[],p=[],m=[];function v(r){h=t.getPointAt(r/e,h);var o=a.normals[r],c=a.binormals[r];for(s=0;s<=i;s++){var p=s/i*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);u.x=v*o.x+m*c.x,u.y=v*o.y+m*c.y,u.z=v*o.z+m*c.z,u.normalize(),d.push(u.x,u.y,u.z),l.x=h.x+n*u.x,l.y=h.y+n*u.y,l.z=h.z+n*u.z,f.push(l.x,l.y,l.z)}}!function(){for(o=0;o<e;o++)v(o);v(!1===r?e:0),function(){for(o=0;o<=e;o++)for(s=0;s<=i;s++)c.x=o/e,c.y=s/i,p.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(o=1;o<=i;o++){var t=(i+1)*(s-1)+(o-1),n=(i+1)*s+(o-1),r=(i+1)*s+o,a=(i+1)*(s-1)+o;m.push(t,n,a),m.push(n,r,a)}}()}(),this.setIndex(m),this.addAttribute("position",new Ji(f,3)),this.addAttribute("normal",new Ji(d,3)),this.addAttribute("uv",new Ji(p,2))}function cl(t,e,n,i,r,a,o){Nr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new hl(t,e,n,i,r,a)),this.mergeVertices()}function hl(t,e,n,i,r,a){ur.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var o,s,l=[],u=[],c=[],h=[],f=new mn,d=new mn,p=new mn,m=new mn,v=new mn,g=new mn,y=new mn;for(o=0;o<=n;++o){var b=o/n*r*Math.PI*2;for(C(b,r,a,t,p),C(b+.01,r,a,t,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var x=s/i*Math.PI*2,_=-e*Math.cos(x),w=e*Math.sin(x);f.x=p.x+(_*y.x+w*v.x),f.y=p.y+(_*y.y+w*v.y),f.z=p.z+(_*y.z+w*v.z),u.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(o/n),h.push(s/i)}}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var S=(i+1)*(s-1)+(o-1),E=(i+1)*s+(o-1),M=(i+1)*s+o,T=(i+1)*(s-1)+o;l.push(S,E,T),l.push(E,M,T)}function C(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new Ji(u,3)),this.addAttribute("normal",new Ji(c,3)),this.addAttribute("uv",new Ji(h,2))}function fl(t,e,n,i,r){Nr.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new dl(t,e,n,i,r)),this.mergeVertices()}function dl(t,e,n,i,r){ur.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],l=[],u=[],c=[],h=new mn,f=new mn,d=new mn;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var p=o/i*r,m=a/n*Math.PI*2;f.x=(t+e*Math.cos(m))*Math.cos(p),f.y=(t+e*Math.cos(m))*Math.sin(p),f.z=e*Math.sin(m),l.push(f.x,f.y,f.z),h.x=t*Math.cos(p),h.y=t*Math.sin(p),d.subVectors(f,h).normalize(),u.push(d.x,d.y,d.z),c.push(o/i),c.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var v=(i+1)*a+o-1,g=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,b=(i+1)*a+o;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.addAttribute("position",new Ji(l,3)),this.addAttribute("normal",new Ji(u,3)),this.addAttribute("uv",new Ji(c,2))}Hs.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Hs,isPoints:!0,raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Vs.copy(n.boundingSphere),Vs.applyMatrix4(i),Vs.radius+=r,!1!==t.ray.intersectsSphere(Vs)){Fs.getInverse(i),js.copy(t.ray).applyMatrix4(Fs);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position.array;if(null!==s)for(var u=s.array,c=0,h=u.length;c<h;c++){var f=u[c];Us.fromArray(l,3*f),Gs(Us,f,o,i,t,e,this)}else{c=0;for(var d=l.length/3;c<d;c++)Us.fromArray(l,3*c),Gs(Us,c,o,i,t,e,this)}}else{var p=n.vertices;for(c=0,d=p.length;c<d;c++)Gs(p[c],c,o,i,t,e,this)}}},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ws.prototype=Object.assign(Object.create(_n.prototype),{constructor:Ws,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),qs.prototype=Object.create(_n.prototype),qs.prototype.constructor=qs,qs.prototype.isCompressedTexture=!0,$s.prototype=Object.create(_n.prototype),$s.prototype.constructor=$s,$s.prototype.isCanvasTexture=!0,Qs.prototype=Object.create(_n.prototype),Qs.prototype.constructor=Qs,Qs.prototype.isDepthTexture=!0,Ys.prototype=Object.create(ur.prototype),Ys.prototype.constructor=Ys,Xs.prototype=Object.create(Nr.prototype),Xs.prototype.constructor=Xs,Zs.prototype=Object.create(ur.prototype),Zs.prototype.constructor=Zs,Js.prototype=Object.create(Nr.prototype),Js.prototype.constructor=Js,Ks.prototype=Object.create(ur.prototype),Ks.prototype.constructor=Ks,tl.prototype=Object.create(Nr.prototype),tl.prototype.constructor=tl,el.prototype=Object.create(Ks.prototype),el.prototype.constructor=el,nl.prototype=Object.create(Nr.prototype),nl.prototype.constructor=nl,il.prototype=Object.create(Ks.prototype),il.prototype.constructor=il,rl.prototype=Object.create(Nr.prototype),rl.prototype.constructor=rl,al.prototype=Object.create(Ks.prototype),al.prototype.constructor=al,ol.prototype=Object.create(Nr.prototype),ol.prototype.constructor=ol,sl.prototype=Object.create(Ks.prototype),sl.prototype.constructor=sl,ll.prototype=Object.create(Nr.prototype),ll.prototype.constructor=ll,ul.prototype=Object.create(ur.prototype),ul.prototype.constructor=ul,ul.prototype.toJSON=function(){var t=ur.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},cl.prototype=Object.create(Nr.prototype),cl.prototype.constructor=cl,hl.prototype=Object.create(ur.prototype),hl.prototype.constructor=hl,fl.prototype=Object.create(Nr.prototype),fl.prototype.constructor=fl,dl.prototype=Object.create(ur.prototype),dl.prototype.constructor=dl;var pl=function(t,e,n){n=n||2;var i,r,a,o,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=ml(t,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(t,e,n,i){var r,a,o,s,l,u=[];for(r=0,a=e.length;r<a;r++)o=e[r]*i,s=r<a-1?e[r+1]*i:t.length,(l=ml(t,o,s,i,!1))===l.next&&(l.steiner=!0),u.push(Ml(l));for(u.sort(wl),r=0;r<u.length;r++)Sl(u[r],n),n=vl(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=a=t[0],r=o=t[1];for(var p=n;p<h;p+=n)(s=t[p])<i&&(i=s),(l=t[p+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-i,o-r))?1/u:0}return gl(f,d,n,i,r,u),d};function ml(t,e,n,i,r){var a,o;if(r===function(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}(t,e,n,i)>0)for(a=e;a<n;a+=i)o=Il(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=Il(a,t[a],t[a+1],o);return o&&Pl(o,o.next)&&(Nl(o),o=o.next),o}function vl(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Pl(i,i.next)&&0!==kl(i.prev,i,i.next))i=i.next;else{if(Nl(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function gl(t,e,n,i,r,a,o){if(t){!o&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=El(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,o,s,l,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1)}(r)}(t,i,r,a);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,a?bl(t,i,r,a):yl(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Nl(t),t=l.next,u=l.next;else if((t=l)===u){o?1===o?gl(t=xl(t,e,n),e,n,i,r,a,2):2===o&&_l(t,e,n,i,r,a):gl(vl(t),e,n,i,r,a,1);break}}}function yl(t){var e=t.prev,n=t,i=t.next;if(kl(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Tl(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&kl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function bl(t,e,n,i){var r=t.prev,a=t,o=t.next;if(kl(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=El(s,l,e,n,i),f=El(u,c,e,n,i),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&Tl(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&kl(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&Tl(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&kl(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Tl(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&kl(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Tl(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&kl(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function xl(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!Pl(r,a)&&Al(r,i,i.next,a)&&Ol(r,a)&&Ol(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),Nl(i),Nl(i.next),i=t=a),i=i.next}while(i!==t);return i}function _l(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Cl(o,s)){var l=Ll(o,s);return o=vl(o,o.next),l=vl(l,l.next),gl(o,e,n,i,r,a),void gl(l,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}function wl(t,e){return t.x-e.x}function Sl(t,e){if(e=function(t,e){var n,i=e,r=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;i=n.next;for(;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&Tl(a<h?r:o,a,c,h,a<h?o:r,a,i.x,i.y)&&((l=Math.abs(a-i.y)/(r-i.x))<f||l===f&&i.x>n.x)&&Ol(i,t)&&(n=i,f=l),i=i.next;return n}(t,e)){var n=Ll(e,t);vl(n,n.next)}}function El(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ml(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Tl(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Cl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Al(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ol(t,e)&&Ol(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function kl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Pl(t,e){return t.x===e.x&&t.y===e.y}function Al(t,e,n,i){return!!(Pl(t,n)&&Pl(e,i)||Pl(t,i)&&Pl(n,e))||kl(t,e,n)>0!=kl(t,e,i)>0&&kl(n,i,t)>0!=kl(n,i,e)>0}function Ol(t,e){return kl(t.prev,t,t.next)<0?kl(t,e,t.next)>=0&&kl(t,t.prev,e)>=0:kl(t,e,t.prev)<0||kl(t,t.next,e)<0}function Ll(t,e){var n=new Rl(t.i,t.x,t.y),i=new Rl(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Il(t,e,n,i){var r=new Rl(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Nl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Rl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Dl={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return Dl.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];zl(t),Bl(n,t);var a=t.length;e.forEach(zl);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,Bl(n,e[o]);var s=pl(n,i);for(o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function zl(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Bl(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Fl(t,e){Nr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new jl(t,e)),this.mergeVertices()}function jl(t,e){ur.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,i=[],r=[],a=0,o=t.length;a<o;a++){s(t[a])}function s(t){var a=[],o=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:100,u=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3,p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Vl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);var v,g,y,b,x,_,w,S,E=!1;p&&(v=p.getSpacedPoints(s),E=!0,u=!1,g=p.computeFrenetFrames(s,!1),y=new mn,b=new mn,x=new mn),u||(d=0,c=0,h=0,f=0);var M=t.extractPoints(o),T=M.shape,C=M.holes;if(!Dl.isClockWise(T))for(T=T.reverse(),w=0,S=C.length;w<S;w++)_=C[w],Dl.isClockWise(_)&&(C[w]=_.reverse());var k=Dl.triangulateShape(T,C),P=T;for(w=0,S=C.length;w<S;w++)_=C[w],T=T.concat(_);function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var O,L,I,N,R,D,z=T.length,B=k.length;function F(t,e,n){var i,r,a,o=t.x-e.x,s=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=e.x-s/f,m=e.y+o/f,v=((n.x-u/d-p)*u-(n.y+l/d-m)*l)/(o*u-s*l),g=(i=p+o*v-t.x)*i+(r=m+s*v-t.y)*r;if(g<=2)return new hn(i,r);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(i=-s,r=o,a=Math.sqrt(c)):(i=o,r=s,a=Math.sqrt(c/2))}return new hn(i/a,r/a)}for(var j=[],V=0,U=P.length,H=U-1,G=V+1;V<U;V++,H++,G++)H===U&&(H=0),G===U&&(G=0),j[V]=F(P[V],P[H],P[G]);var W,q,$=[],Q=j.concat();for(w=0,S=C.length;w<S;w++){for(_=C[w],W=[],V=0,H=(U=_.length)-1,G=V+1;V<U;V++,H++,G++)H===U&&(H=0),G===U&&(G=0),W[V]=F(_[V],_[H],_[G]);$.push(W),Q=Q.concat(W)}for(O=0;O<d;O++){for(I=O/d,N=c*Math.cos(I*Math.PI/2),L=h*Math.sin(I*Math.PI/2)+f,V=0,U=P.length;V<U;V++)X((R=A(P[V],j[V],L)).x,R.y,-N);for(w=0,S=C.length;w<S;w++)for(_=C[w],W=$[w],V=0,U=_.length;V<U;V++)X((R=A(_[V],W[V],L)).x,R.y,-N)}for(L=h+f,V=0;V<z;V++)R=u?A(T[V],Q[V],L):T[V],E?(b.copy(g.normals[0]).multiplyScalar(R.x),y.copy(g.binormals[0]).multiplyScalar(R.y),x.copy(v[0]).add(b).add(y),X(x.x,x.y,x.z)):X(R.x,R.y,0);for(q=1;q<=s;q++)for(V=0;V<z;V++)R=u?A(T[V],Q[V],L):T[V],E?(b.copy(g.normals[q]).multiplyScalar(R.x),y.copy(g.binormals[q]).multiplyScalar(R.y),x.copy(v[q]).add(b).add(y),X(x.x,x.y,x.z)):X(R.x,R.y,l/s*q);for(O=d-1;O>=0;O--){for(I=O/d,N=c*Math.cos(I*Math.PI/2),L=h*Math.sin(I*Math.PI/2)+f,V=0,U=P.length;V<U;V++)X((R=A(P[V],j[V],L)).x,R.y,l+N);for(w=0,S=C.length;w<S;w++)for(_=C[w],W=$[w],V=0,U=_.length;V<U;V++)R=A(_[V],W[V],L),E?X(R.x,R.y+v[s-1].y,v[s-1].x+N):X(R.x,R.y,l+N)}function Y(t,e){var n,i;for(V=t.length;--V>=0;){n=V,(i=V-1)<0&&(i=t.length-1);var r=0,a=s+2*d;for(r=0;r<a;r++){var o=z*r,l=z*(r+1);J(e+n+o,e+i+o,e+i+l,e+n+l)}}}function X(t,e,n){a.push(t),a.push(e),a.push(n)}function Z(t,e,r){K(t),K(e),K(r);var a=i.length/3,o=m.generateTopUV(n,i,a-3,a-2,a-1);tt(o[0]),tt(o[1]),tt(o[2])}function J(t,e,r,a){K(t),K(e),K(a),K(e),K(r),K(a);var o=i.length/3,s=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);tt(s[0]),tt(s[1]),tt(s[3]),tt(s[1]),tt(s[2]),tt(s[3])}function K(t){i.push(a[3*t+0]),i.push(a[3*t+1]),i.push(a[3*t+2])}function tt(t){r.push(t.x),r.push(t.y)}!function(){var t=i.length/3;if(u){var e=0,r=z*e;for(V=0;V<B;V++)Z((D=k[V])[2]+r,D[1]+r,D[0]+r);for(r=z*(e=s+2*d),V=0;V<B;V++)Z((D=k[V])[0]+r,D[1]+r,D[2]+r)}else{for(V=0;V<B;V++)Z((D=k[V])[2],D[1],D[0]);for(V=0;V<B;V++)Z((D=k[V])[0]+z*s,D[1]+z*s,D[2]+z*s)}n.addGroup(t,i.length/3-t,0)}(),function(){var t=i.length/3,e=0;for(Y(P,e),e+=P.length,w=0,S=C.length;w<S;w++)Y(_=C[w],e),e+=_.length;n.addGroup(t,i.length/3-t,1)}()}this.addAttribute("position",new Ji(i,3)),this.addAttribute("uv",new Ji(r,2)),this.computeVertexNormals()}Fl.prototype=Object.create(Nr.prototype),Fl.prototype.constructor=Fl,Fl.prototype.toJSON=function(){var t=Nr.prototype.toJSON.call(this);return Ul(this.parameters.shapes,this.parameters.options,t)},jl.prototype=Object.create(ur.prototype),jl.prototype.constructor=jl,jl.prototype.toJSON=function(){var t=ur.prototype.toJSON.call(this);return Ul(this.parameters.shapes,this.parameters.options,t)};var Vl={generateTopUV:function(t,e,n,i,r){var a=e[3*n],o=e[3*n+1],s=e[3*i],l=e[3*i+1],u=e[3*r],c=e[3*r+1];return[new hn(a,o),new hn(s,l),new hn(u,c)]},generateSideWallUV:function(t,e,n,i,r,a){var o=e[3*n],s=e[3*n+1],l=e[3*n+2],u=e[3*i],c=e[3*i+1],h=e[3*i+2],f=e[3*r],d=e[3*r+1],p=e[3*r+2],m=e[3*a],v=e[3*a+1],g=e[3*a+2];return Math.abs(s-c)<.01?[new hn(o,1-l),new hn(u,1-h),new hn(f,1-p),new hn(m,1-g)]:[new hn(s,1-l),new hn(c,1-h),new hn(d,1-p),new hn(v,1-g)]}};function Ul(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Hl(t,e){Nr.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Gl(t,e)),this.mergeVertices()}function Gl(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Nr;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),jl.call(this,i,e),this.type="TextBufferGeometry"}function Wl(t,e,n,i,r,a,o){Nr.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new ql(t,e,n,i,r,a,o)),this.mergeVertices()}function ql(t,e,n,i,r,a,o){ur.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,l,u=Math.min(a+o,Math.PI),c=0,h=[],f=new mn,d=new mn,p=[],m=[],v=[],g=[];for(l=0;l<=n;l++){var y=[],b=l/n,x=0;for(0==l&&0==a?x=.5/e:l==n&&u==Math.PI&&(x=-.5/e),s=0;s<=e;s++){var _=s/e;f.x=-t*Math.cos(i+_*r)*Math.sin(a+b*o),f.y=t*Math.cos(a+b*o),f.z=t*Math.sin(i+_*r)*Math.sin(a+b*o),m.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),g.push(_+x,1-b),y.push(c++)}h.push(y)}for(l=0;l<n;l++)for(s=0;s<e;s++){var w=h[l][s+1],S=h[l][s],E=h[l+1][s],M=h[l+1][s+1];(0!==l||a>0)&&p.push(w,S,M),(l!==n-1||u<Math.PI)&&p.push(S,E,M)}this.setIndex(p),this.addAttribute("position",new Ji(m,3)),this.addAttribute("normal",new Ji(v,3)),this.addAttribute("uv",new Ji(g,2))}function $l(t,e,n,i,r,a){Nr.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Ql(t,e,n,i,r,a)),this.mergeVertices()}function Ql(t,e,n,i,r,a){ur.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},t=t||.5,e=e||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,l,u=[],c=[],h=[],f=[],d=t,p=(e-t)/(i=void 0!==i?Math.max(1,i):1),m=new mn,v=new hn;for(s=0;s<=i;s++){for(l=0;l<=n;l++)o=r+l/n*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,f.push(v.x,v.y);d+=p}for(s=0;s<i;s++){var g=s*(n+1);for(l=0;l<n;l++){var y=o=l+g,b=o+n+1,x=o+n+2,_=o+1;u.push(y,b,_),u.push(b,x,_)}}this.setIndex(u),this.addAttribute("position",new Ji(c,3)),this.addAttribute("normal",new Ji(h,3)),this.addAttribute("uv",new Ji(f,2))}function Yl(t,e,n,i){Nr.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Xl(t,e,n,i)),this.mergeVertices()}function Xl(t,e,n,i){ur.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=cn.clamp(i,0,2*Math.PI);var r,a,o,s=[],l=[],u=[],c=1/e,h=new mn,f=new hn;for(a=0;a<=e;a++){var d=n+a*c*i,p=Math.sin(d),m=Math.cos(d);for(o=0;o<=t.length-1;o++)h.x=t[o].x*p,h.y=t[o].y,h.z=t[o].x*m,l.push(h.x,h.y,h.z),f.x=a/e,f.y=o/(t.length-1),u.push(f.x,f.y)}for(a=0;a<e;a++)for(o=0;o<t.length-1;o++){var v=r=o+a*t.length,g=r+t.length,y=r+t.length+1,b=r+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.addAttribute("position",new Ji(l,3)),this.addAttribute("uv",new Ji(u,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,_=new mn,w=new mn,S=new mn;for(r=e*t.length*3,a=0,o=0;a<t.length;a++,o+=3)_.x=x[o+0],_.y=x[o+1],_.z=x[o+2],w.x=x[r+o+0],w.y=x[r+o+1],w.z=x[r+o+2],S.addVectors(_,w).normalize(),x[o+0]=x[r+o+0]=S.x,x[o+1]=x[r+o+1]=S.y,x[o+2]=x[r+o+2]=S.z}}function Zl(t,e){Nr.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Jl(t,e)),this.mergeVertices()}function Jl(t,e){ur.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(t))u(t);else for(var l=0;l<t.length;l++)u(t[l]),this.addGroup(o,s,l),o+=s,s=0;function u(t){var o,l,u,c=i.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;for(!1===Dl.isClockWise(f)&&(f=f.reverse()),o=0,l=d.length;o<l;o++)u=d[o],!0===Dl.isClockWise(u)&&(d[o]=u.reverse());var p=Dl.triangulateShape(f,d);for(o=0,l=d.length;o<l;o++)u=d[o],f=f.concat(u);for(o=0,l=f.length;o<l;o++){var m=f[o];i.push(m.x,m.y,0),r.push(0,0,1),a.push(m.x,m.y)}for(o=0,l=p.length;o<l;o++){var v=p[o],g=v[0]+c,y=v[1]+c,b=v[2]+c;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new Ji(i,3)),this.addAttribute("normal",new Ji(r,3)),this.addAttribute("uv",new Ji(a,2))}function Kl(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function tu(t,e){ur.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,a,o=[],s=Math.cos(cn.DEG2RAD*e),l=[0,0],u={},c=["a","b","c"];t.isBufferGeometry?(a=new Nr).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,f=a.faces,d=0,p=f.length;d<p;d++)for(var m=f[d],v=0;v<3;v++)n=m[c[v]],i=m[c[(v+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===u[r=l[0]+","+l[1]]?u[r]={index1:l[0],index2:l[1],face1:d,face2:void 0}:u[r].face2=d;for(r in u){var g=u[r];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new Ji(o,3))}function eu(t,e,n,i,r,a,o,s){Nr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new nu(t,e,n,i,r,a,o,s)),this.mergeVertices()}function nu(t,e,n,i,r,a,o,s){ur.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],h=[],f=[],d=0,p=[],m=n/2,v=0;function g(n){var r,a,p,g=new hn,y=new mn,b=0,x=!0===n?t:e,_=!0===n?1:-1;for(a=d,r=1;r<=i;r++)c.push(0,m*_,0),h.push(0,_,0),f.push(.5,.5),d++;for(p=d,r=0;r<=i;r++){var w=r/i*s+o,S=Math.cos(w),E=Math.sin(w);y.x=x*E,y.y=m*_,y.z=x*S,c.push(y.x,y.y,y.z),h.push(0,_,0),g.x=.5*S+.5,g.y=.5*E*_+.5,f.push(g.x,g.y),d++}for(r=0;r<i;r++){var M=a+r,T=p+r;!0===n?u.push(T,T+1,M):u.push(T+1,T,M),b+=3}l.addGroup(v,b,!0===n?1:2),v+=b}!function(){var a,g,y=new mn,b=new mn,x=0,_=(e-t)/n;for(g=0;g<=r;g++){var w=[],S=g/r,E=S*(e-t)+t;for(a=0;a<=i;a++){var M=a/i,T=M*s+o,C=Math.sin(T),k=Math.cos(T);b.x=E*C,b.y=-S*n+m,b.z=E*k,c.push(b.x,b.y,b.z),y.set(C,_,k).normalize(),h.push(y.x,y.y,y.z),f.push(M,1-S),w.push(d++)}p.push(w)}for(a=0;a<i;a++)for(g=0;g<r;g++){var P=p[g][a],A=p[g+1][a],O=p[g+1][a+1],L=p[g][a+1];u.push(P,A,L),u.push(A,O,L),x+=6}l.addGroup(v,x,0),v+=x}(),!1===a&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(u),this.addAttribute("position",new Ji(c,3)),this.addAttribute("normal",new Ji(h,3)),this.addAttribute("uv",new Ji(f,2))}function iu(t,e,n,i,r,a,o){eu.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function ru(t,e,n,i,r,a,o){nu.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function au(t,e,n,i){Nr.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new ou(t,e,n,i)),this.mergeVertices()}function ou(t,e,n,i){ur.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],s=[],l=[],u=[],c=new mn,h=new hn;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,r=3;a<=e;a++,r+=3){var f=n+a/e*i;c.x=t*Math.cos(f),c.y=t*Math.sin(f),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[r]/t+1)/2,h.y=(s[r+1]/t+1)/2,u.push(h.x,h.y)}for(r=1;r<=e;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new Ji(s,3)),this.addAttribute("normal",new Ji(l,3)),this.addAttribute("uv",new Ji(u,2))}Hl.prototype=Object.create(Nr.prototype),Hl.prototype.constructor=Hl,Gl.prototype=Object.create(jl.prototype),Gl.prototype.constructor=Gl,Wl.prototype=Object.create(Nr.prototype),Wl.prototype.constructor=Wl,ql.prototype=Object.create(ur.prototype),ql.prototype.constructor=ql,$l.prototype=Object.create(Nr.prototype),$l.prototype.constructor=$l,Ql.prototype=Object.create(ur.prototype),Ql.prototype.constructor=Ql,Yl.prototype=Object.create(Nr.prototype),Yl.prototype.constructor=Yl,Xl.prototype=Object.create(ur.prototype),Xl.prototype.constructor=Xl,Zl.prototype=Object.create(Nr.prototype),Zl.prototype.constructor=Zl,Zl.prototype.toJSON=function(){var t=Nr.prototype.toJSON.call(this);return Kl(this.parameters.shapes,t)},Jl.prototype=Object.create(ur.prototype),Jl.prototype.constructor=Jl,Jl.prototype.toJSON=function(){var t=ur.prototype.toJSON.call(this);return Kl(this.parameters.shapes,t)},tu.prototype=Object.create(ur.prototype),tu.prototype.constructor=tu,eu.prototype=Object.create(Nr.prototype),eu.prototype.constructor=eu,nu.prototype=Object.create(ur.prototype),nu.prototype.constructor=nu,iu.prototype=Object.create(eu.prototype),iu.prototype.constructor=iu,ru.prototype=Object.create(nu.prototype),ru.prototype.constructor=ru,au.prototype=Object.create(Nr.prototype),au.prototype.constructor=au,ou.prototype=Object.create(ur.prototype),ou.prototype.constructor=ou;var su=Object.freeze({WireframeGeometry:Ys,ParametricGeometry:Xs,ParametricBufferGeometry:Zs,TetrahedronGeometry:tl,TetrahedronBufferGeometry:el,OctahedronGeometry:nl,OctahedronBufferGeometry:il,IcosahedronGeometry:rl,IcosahedronBufferGeometry:al,DodecahedronGeometry:ol,DodecahedronBufferGeometry:sl,PolyhedronGeometry:Js,PolyhedronBufferGeometry:Ks,TubeGeometry:ll,TubeBufferGeometry:ul,TorusKnotGeometry:cl,TorusKnotBufferGeometry:hl,TorusGeometry:fl,TorusBufferGeometry:dl,TextGeometry:Hl,TextBufferGeometry:Gl,SphereGeometry:Wl,SphereBufferGeometry:ql,RingGeometry:$l,RingBufferGeometry:Ql,PlaneGeometry:ra,PlaneBufferGeometry:aa,LatheGeometry:Yl,LatheBufferGeometry:Xl,ShapeGeometry:Zl,ShapeBufferGeometry:Jl,ExtrudeGeometry:Fl,ExtrudeBufferGeometry:jl,EdgesGeometry:tu,ConeGeometry:iu,ConeBufferGeometry:ru,CylinderGeometry:eu,CylinderBufferGeometry:nu,CircleGeometry:au,CircleBufferGeometry:ou,BoxGeometry:Rr,BoxBufferGeometry:Dr});function lu(t){Ui.call(this),this.type="ShadowMaterial",this.color=new Di(0),this.transparent=!0,this.setValues(t)}function uu(t){jr.call(this,t),this.type="RawShaderMaterial"}function cu(t){Ui.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Di(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function hu(t){cu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new hn(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function fu(t){Ui.call(this),this.type="MeshPhongMaterial",this.color=new Di(16777215),this.specular=new Di(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function du(t){fu.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function pu(t){Ui.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function mu(t){Ui.call(this),this.type="MeshLambertMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vu(t){Ui.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Di(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=He,this.normalScale=new hn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function gu(t){Cs.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}lu.prototype=Object.create(Ui.prototype),lu.prototype.constructor=lu,lu.prototype.isShadowMaterial=!0,lu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this},uu.prototype=Object.create(jr.prototype),uu.prototype.constructor=uu,uu.prototype.isRawShaderMaterial=!0,cu.prototype=Object.create(Ui.prototype),cu.prototype.constructor=cu,cu.prototype.isMeshStandardMaterial=!0,cu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},hu.prototype=Object.create(cu.prototype),hu.prototype.constructor=hu,hu.prototype.isMeshPhysicalMaterial=!0,hu.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new Di).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},fu.prototype=Object.create(Ui.prototype),fu.prototype.constructor=fu,fu.prototype.isMeshPhongMaterial=!0,fu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},du.prototype=Object.create(fu.prototype),du.prototype.constructor=du,du.prototype.isMeshToonMaterial=!0,du.prototype.copy=function(t){return fu.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},pu.prototype=Object.create(Ui.prototype),pu.prototype.constructor=pu,pu.prototype.isMeshNormalMaterial=!0,pu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},mu.prototype=Object.create(Ui.prototype),mu.prototype.constructor=mu,mu.prototype.isMeshLambertMaterial=!0,mu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vu.prototype=Object.create(Ui.prototype),vu.prototype.constructor=vu,vu.prototype.isMeshMatcapMaterial=!0,vu.prototype.copy=function(t){return Ui.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gu.prototype=Object.create(Cs.prototype),gu.prototype.constructor=gu,gu.prototype.isLineDashedMaterial=!0,gu.prototype.copy=function(t){return Cs.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var yu=Object.freeze({ShadowMaterial:lu,SpriteMaterial:rs,RawShaderMaterial:uu,ShaderMaterial:jr,PointsMaterial:Bs,MeshPhysicalMaterial:hu,MeshStandardMaterial:cu,MeshPhongMaterial:fu,MeshToonMaterial:du,MeshNormalMaterial:pu,MeshLambertMaterial:mu,MeshDepthMaterial:Fo,MeshDistanceMaterial:jo,MeshBasicMaterial:Hi,MeshMatcapMaterial:vu,LineDashedMaterial:gu,LineBasicMaterial:Cs,Material:Ui}),bu={arraySlice:function(t,e,n){return bu.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),a=t[r++]}while(void 0!==a)}}};function xu(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function _u(t,e,n,i){xu.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function wu(t,e,n,i){xu.call(this,t,e,n,i)}function Su(t,e,n,i){xu.call(this,t,e,n,i)}function Eu(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bu.convertArray(e,this.TimeBufferType),this.values=bu.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Mu(t,e,n){Eu.call(this,t,e,n)}function Tu(t,e,n,i){Eu.call(this,t,e,n,i)}function Cu(t,e,n,i){Eu.call(this,t,e,n,i)}function ku(t,e,n,i){xu.call(this,t,e,n,i)}function Pu(t,e,n,i){Eu.call(this,t,e,n,i)}function Au(t,e,n,i){Eu.call(this,t,e,n,i)}function Ou(t,e,n,i){Eu.call(this,t,e,n,i)}function Lu(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=cn.generateUUID(),this.duration<0&&this.resetDuration()}function Iu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cu;case"vector":case"vector2":case"vector3":case"vector4":return Ou;case"color":return Tu;case"quaternion":return Pu;case"bool":case"boolean":return Mu;case"string":return Au}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];bu.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(xu.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}a=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,t>=(r=e[--n-1]))break e}a=n,n=0}for(;n<a;){var l=n+a>>>1;t<e[l]?a=l:n=l+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(xu.prototype,{beforeStart_:xu.prototype.copySampleValue_,afterEnd_:xu.prototype.copySampleValue_}),_u.prototype=Object.assign(Object.create(xu.prototype),{constructor:_u,DefaultSettings_:{endingStart:Ce,endingEnd:Ce},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case ke:r=t,o=2*e-n;break;case Pe:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ke:a=t,s=2*n-e;break;case Pe:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}var l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(i-e),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,x=0;x!==o;++x)r[x]=v*a[u+x]+g*a[l+x]+y*a[s+x]+b*a[c+x];return r}}),wu.prototype=Object.assign(Object.create(xu.prototype),{constructor:wu,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=(n-e)/(i-e),c=1-u,h=0;h!==o;++h)r[h]=a[l+h]*c+a[s+h]*u;return r}}),Su.prototype=Object.assign(Object.create(xu.prototype),{constructor:Su,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Eu,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:bu.convertArray(t.times,Array),values:bu.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Eu.prototype,{constructor:Eu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Me,InterpolantFactoryMethodDiscrete:function(t){return new Su(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new wu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new _u(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Ee:e=this.InterpolantFactoryMethodDiscrete;break;case Me:e=this.InterpolantFactoryMethodLinear;break;case Te:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ee;case this.InterpolantFactoryMethodLinear:return Me;case this.InterpolantFactoryMethodSmooth:return Te}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=bu.arraySlice(n,r,a),this.values=bu.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==i&&bu.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=this.getInterpolation()===Te,r=1,a=t.length-1,o=1;o<a;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(i)s=!0;else for(var u=o*n,c=u-n,h=u+n,f=0;f!==n;++f){var d=e[u+f];if(d!==e[c+f]||d!==e[h+f]){s=!0;break}}if(s){if(o!==r){t[r]=t[o];var p=o*n,m=r*n;for(f=0;f!==n;++f)e[m+f]=e[p+f]}++r}}if(a>0){t[r]=t[a];for(p=a*n,m=r*n,f=0;f!==n;++f)e[m+f]=e[p+f];++r}return r!==t.length&&(this.times=bu.arraySlice(t,0,r),this.values=bu.arraySlice(e,0,r*n)),this},clone:function(){var t=bu.arraySlice(this.times,0),e=bu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),Mu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Mu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Tu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Tu,ValueTypeName:"color"}),Cu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Cu,ValueTypeName:"number"}),ku.prototype=Object.assign(Object.create(xu.prototype),{constructor:ku,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=(n-e)/(i-e),u=s+o;s!==u;s+=4)fn.slerpFlat(r,0,a,s-o,a,s,l);return r}}),Pu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Pu,ValueTypeName:"quaternion",DefaultInterpolation:Me,InterpolantFactoryMethodLinear:function(t){return new ku(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Au.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Au,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ou.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Ou,ValueTypeName:"vector"}),Object.assign(Lu,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(Iu(n[r]).scale(i));return new Lu(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,a=n.length;r!==a;++r)e.push(Eu.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=bu.getKeyframeOrder(s);s=bu.sortedArray(s,1,u),l=bu.sortedArray(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new Cu(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/n))}return new Lu(t,-1,a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(r);if(l&&l.length>1){var u=i[h=l[1]];u||(i[h]=u=[]),u.push(s)}}var c=[];for(var h in i)c.push(Lu.CreateFromMorphTargetSequence(h,i[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];bu.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var f=0;f<u[h].morphTargets.length;f++)c[u[h].morphTargets[f]]=-1;for(var d in c){var p=[],m=[];for(f=0;f!==u[h].morphTargets.length;++f){var v=u[h];p.push(v.time),m.push(v.morphTarget===d?1:0)}i.push(new Cu(".morphTargetInfluence["+d+"]",p,m))}a=c.length*(o||1)}else{var g=".bones["+e[l].name+"]";n(Ou,g+".position",u,"pos",i),n(Pu,g+".quaternion",u,"rot",i),n(Ou,g+".scale",u,"scl",i)}}return 0===i.length?null:new Lu(r,a,i)}}),Object.assign(Lu.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Lu(this.name,this.duration,t)}});var Nu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Ru(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var Du=new Ru;function zu(t){this.manager=void 0!==t?t:Du,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(zu.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),zu.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],a=e[n+1];if(r.test(t))return a}return null}};var Bu={};function Fu(t){zu.call(this,t)}function ju(t){zu.call(this,t)}function Vu(t){zu.call(this,t),this._parser=null}function Uu(t){zu.call(this,t),this._parser=null}function Hu(t){zu.call(this,t)}function Gu(t){zu.call(this,t)}function Wu(t){zu.call(this,t)}function qu(){this.type="Curve",this.arcLengthDivisions=200}function $u(t,e,n,i,r,a,o,s){qu.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Qu(t,e,n,i,r,a){$u.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"}function Yu(){var t=0,e=0,n=0,i=0;function r(r,a,o,s){t=r,e=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(t,e,n,i,a){r(e,n,a*(n-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,a,o,s){var l=(e-t)/a-(n-t)/(a+o)+(n-e)/o,u=(n-e)/o-(i-e)/(o+s)+(i-n)/s;r(e,n,l*=o,u*=o)},calc:function(r){var a=r*r;return t+e*r+n*a+i*(a*r)}}}Fu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Fu,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Nu.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(void 0===Bu[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],l=!!o[2],u=o[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(u.length),d=0;d<u.length;d++)f[d]=u.charCodeAt(d);c="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var p=new DOMParser;c=p.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){e&&e(c),r.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{Bu[t]=[],Bu[t].push({onLoad:e,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",(function(e){var n=this.response;Nu.add(t,n);var i=Bu[t];if(delete Bu[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=i.length;a<o;a++){(s=i[a]).onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(a=0,o=i.length;a<o;a++){var s;(s=i[a]).onError&&s.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}}),!1),m.addEventListener("progress",(function(e){for(var n=Bu[t],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(e)}}),!1),m.addEventListener("error",(function(e){var n=Bu[t];delete Bu[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),m.addEventListener("abort",(function(e){var n=Bu[t];delete Bu[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(t),m}Bu[t].push({onLoad:e,onProgress:n,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),ju.prototype=Object.assign(Object.create(zu.prototype),{constructor:ju,load:function(t,e,n,i){var r=this,a=new Fu(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=Lu.parse(t[n]);e.push(i)}return e}}),Vu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Vu,load:function(t,e,n,i){var r=this,a=[],o=new qs;o.image=a;var s=new Fu(this.manager);function l(l){s.load(t[l],(function(t){var n=r._parser(t,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Tt),o.format=n.format,o.needsUpdate=!0,e&&e(o))}),n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,c=0,h=t.length;c<h;++c)l(c);else s.load(t,(function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Tt),o.format=n.format,o.needsUpdate=!0,e&&e(o)}),n,i);return o}}),Uu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Uu,load:function(t,e,n,i){var r=this,a=new Wr,o=new Fu(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){var n=r._parser(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:bt,a.wrapT=void 0!==n.wrapT?n.wrapT:bt,a.magFilter=void 0!==n.magFilter?n.magFilter:Tt,a.minFilter=void 0!==n.minFilter?n.minFilter:Pt,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=Tt),a.needsUpdate=!0,e&&e(a,n))}),n,i),a}}),Hu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Hu,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Nu.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),Nu.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}),Gu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Gu,load:function(t,e,n,i){var r=new ga,a=new Hu(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(t[n],(function(t){r.images[n]=t,6===++o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(var l=0;l<t.length;++l)s(l);return r}}),Wu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Wu,load:function(t,e,n,i){var r=new _n,a=new Hu(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(n){r.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?Gt:Wt,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}),Object.assign(qu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=t;n++)a+=(e=this.getPoint(n/t)).distanceTo(r),i.push(a),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,a=i.length;n=e||t*i[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(a-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,a=new mn,o=[],s=[],l=[],u=new mn,c=new Ln;for(n=0;n<=t;n++)i=n/t,o[n]=this.getTangentAt(i),o[n].normalize();s[0]=new mn,l[0]=new mn;var h=Number.MAX_VALUE,f=Math.abs(o[0].x),d=Math.abs(o[0].y),p=Math.abs(o[0].z);for(f<=h&&(h=f,a.set(1,0,0)),d<=h&&(h=d,a.set(0,1,0)),p<=h&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),l[0].crossVectors(o[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(cn.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,r))),l[n].crossVectors(o[n],s[n]);if(!0===e)for(r=Math.acos(cn.clamp(s[0].dot(s[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(s[0],s[t]))>0&&(r=-r),n=1;n<=t;n++)s[n].applyMatrix4(c.makeRotationAxis(o[n],r*n)),l[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),$u.prototype=Object.create(qu.prototype),$u.prototype.constructor=$u,$u.prototype.isEllipseCurve=!0,$u.prototype.getPoint=function(t,e){for(var n=e||new hn,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=l-this.aY;s=h*u-f*c+this.aX,l=h*c+f*u+this.aY}return n.set(s,l)},$u.prototype.copy=function(t){return qu.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},$u.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},$u.prototype.fromJSON=function(t){return qu.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Qu.prototype=Object.create($u.prototype),Qu.prototype.constructor=Qu,Qu.prototype.isArcCurve=!0;var Xu=new mn,Zu=new Yu,Ju=new Yu,Ku=new Yu;function tc(t,e,n,i){qu.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function ec(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t;return(2*n-2*i+a+o)*(t*s)+(-3*n+3*i-2*a-o)*s+a*t+n}function nc(t,e,n,i){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function ic(t,e,n,i,r){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}function rc(t,e,n,i){qu.call(this),this.type="CubicBezierCurve",this.v0=t||new hn,this.v1=e||new hn,this.v2=n||new hn,this.v3=i||new hn}function ac(t,e,n,i){qu.call(this),this.type="CubicBezierCurve3",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn,this.v3=i||new mn}function oc(t,e){qu.call(this),this.type="LineCurve",this.v1=t||new hn,this.v2=e||new hn}function sc(t,e){qu.call(this),this.type="LineCurve3",this.v1=t||new mn,this.v2=e||new mn}function lc(t,e,n){qu.call(this),this.type="QuadraticBezierCurve",this.v0=t||new hn,this.v1=e||new hn,this.v2=n||new hn}function uc(t,e,n){qu.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new mn,this.v1=e||new mn,this.v2=n||new mn}function cc(t){qu.call(this),this.type="SplineCurve",this.points=t||[]}tc.prototype=Object.create(qu.prototype),tc.prototype.constructor=tc,tc.prototype.isCatmullRomCurve3=!0,tc.prototype.getPoint=function(t,e){var n,i,r,a,o=e||new mn,s=this.points,l=s.length,u=(l-(this.closed?0:1))*t,c=Math.floor(u),h=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===h&&c===l-1&&(c=l-2,h=1),this.closed||c>0?n=s[(c-1)%l]:(Xu.subVectors(s[0],s[1]).add(s[0]),n=Xu),i=s[c%l],r=s[(c+1)%l],this.closed||c+2<l?a=s[(c+2)%l]:(Xu.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=Xu),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(i),f),p=Math.pow(i.distanceToSquared(r),f),m=Math.pow(r.distanceToSquared(a),f);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),Zu.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,d,p,m),Ju.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,d,p,m),Ku.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,d,p,m)}else"catmullrom"===this.curveType&&(Zu.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),Ju.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),Ku.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(Zu.calc(h),Ju.calc(h),Ku.calc(h)),o},tc.prototype.copy=function(t){qu.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},tc.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},tc.prototype.fromJSON=function(t){qu.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new mn).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},rc.prototype=Object.create(qu.prototype),rc.prototype.constructor=rc,rc.prototype.isCubicBezierCurve=!0,rc.prototype.getPoint=function(t,e){var n=e||new hn,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(ic(t,i.x,r.x,a.x,o.x),ic(t,i.y,r.y,a.y,o.y)),n},rc.prototype.copy=function(t){return qu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},rc.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},rc.prototype.fromJSON=function(t){return qu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},ac.prototype=Object.create(qu.prototype),ac.prototype.constructor=ac,ac.prototype.isCubicBezierCurve3=!0,ac.prototype.getPoint=function(t,e){var n=e||new mn,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(ic(t,i.x,r.x,a.x,o.x),ic(t,i.y,r.y,a.y,o.y),ic(t,i.z,r.z,a.z,o.z)),n},ac.prototype.copy=function(t){return qu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ac.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ac.prototype.fromJSON=function(t){return qu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},oc.prototype=Object.create(qu.prototype),oc.prototype.constructor=oc,oc.prototype.isLineCurve=!0,oc.prototype.getPoint=function(t,e){var n=e||new hn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},oc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},oc.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},oc.prototype.copy=function(t){return qu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},oc.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},oc.prototype.fromJSON=function(t){return qu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},sc.prototype=Object.create(qu.prototype),sc.prototype.constructor=sc,sc.prototype.isLineCurve3=!0,sc.prototype.getPoint=function(t,e){var n=e||new mn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},sc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},sc.prototype.copy=function(t){return qu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},sc.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},sc.prototype.fromJSON=function(t){return qu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},lc.prototype=Object.create(qu.prototype),lc.prototype.constructor=lc,lc.prototype.isQuadraticBezierCurve=!0,lc.prototype.getPoint=function(t,e){var n=e||new hn,i=this.v0,r=this.v1,a=this.v2;return n.set(nc(t,i.x,r.x,a.x),nc(t,i.y,r.y,a.y)),n},lc.prototype.copy=function(t){return qu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},lc.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},lc.prototype.fromJSON=function(t){return qu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},uc.prototype=Object.create(qu.prototype),uc.prototype.constructor=uc,uc.prototype.isQuadraticBezierCurve3=!0,uc.prototype.getPoint=function(t,e){var n=e||new mn,i=this.v0,r=this.v1,a=this.v2;return n.set(nc(t,i.x,r.x,a.x),nc(t,i.y,r.y,a.y),nc(t,i.z,r.z,a.z)),n},uc.prototype.copy=function(t){return qu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},uc.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},uc.prototype.fromJSON=function(t){return qu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},cc.prototype=Object.create(qu.prototype),cc.prototype.constructor=cc,cc.prototype.isSplineCurve=!0,cc.prototype.getPoint=function(t,e){var n=e||new hn,i=this.points,r=(i.length-1)*t,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(ec(o,s.x,l.x,u.x,c.x),ec(o,s.y,l.y,u.y,c.y)),n},cc.prototype.copy=function(t){qu.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},cc.prototype.toJSON=function(){var t=qu.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},cc.prototype.fromJSON=function(t){qu.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new hn).fromArray(i))}return this};var hc=Object.freeze({ArcCurve:Qu,CatmullRomCurve3:tc,CubicBezierCurve:rc,CubicBezierCurve3:ac,EllipseCurve:$u,LineCurve:oc,LineCurve3:sc,QuadraticBezierCurve:lc,QuadraticBezierCurve3:uc,SplineCurve:cc});function fc(){qu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function dc(t){fc.call(this),this.type="Path",this.currentPoint=new hn,t&&this.setFromPoints(t)}function pc(t){dc.call(this,t),this.uuid=cn.generateUUID(),this.type="Shape",this.holes=[]}function mc(t,e){Xn.call(this),this.type="Light",this.color=new Di(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function vc(t,e,n){mc.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Xn.DefaultUp),this.updateMatrix(),this.groundColor=new Di(e)}function gc(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new hn(512,512),this.map=null,this.mapPass=null,this.matrix=new Ln,this._frustum=new Jr,this._frameExtents=new hn(1,1),this._viewportCount=1,this._viewports=[new wn(0,0,1,1)]}function yc(){gc.call(this,new Ur(50,1,.5,500))}function bc(t,e,n,i,r,a){mc.call(this,t,e),this.type="SpotLight",this.position.copy(Xn.DefaultUp),this.updateMatrix(),this.target=new Xn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new yc}function xc(){gc.call(this,new Ur(90,1,.5,500)),this._frameExtents=new hn(4,2),this._viewportCount=6,this._viewports=[new wn(2,1,1,1),new wn(0,1,1,1),new wn(3,1,1,1),new wn(1,1,1,1),new wn(3,0,1,1),new wn(1,0,1,1)],this._cubeDirections=[new mn(1,0,0),new mn(-1,0,0),new mn(0,0,1),new mn(0,0,-1),new mn(0,1,0),new mn(0,-1,0)],this._cubeUps=[new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,0,1),new mn(0,0,-1)]}function _c(t,e,n,i){mc.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new xc}function wc(t,e,n,i,r,a){Vr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Sc(){gc.call(this,new wc(-5,5,5,-5,.5,500))}function Ec(t,e){mc.call(this,t,e),this.type="DirectionalLight",this.position.copy(Xn.DefaultUp),this.updateMatrix(),this.target=new Xn,this.shadow=new Sc}function Mc(t,e){mc.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Tc(t,e,n,i){mc.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Cc(t){zu.call(this,t),this.textures={}}fc.prototype=Object.assign(Object.create(qu.prototype),{constructor:fc,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new oc(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){qu.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=qu.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){qu.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new hc[i.type]).fromJSON(i))}return this}}),dc.prototype=Object.assign(Object.create(fc.prototype),{constructor:dc,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new oc(this.currentPoint.clone(),new hn(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new lc(this.currentPoint.clone(),new hn(t,e),new hn(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,r,a){var o=new rc(this.currentPoint.clone(),new hn(t,e),new hn(n,i),new hn(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(t){var e=new cc([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,n,i,r,a)},absarc:function(t,e,n,i,r,a){this.absellipse(t,e,n,n,i,r,a)},ellipse:function(t,e,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(t+l,e+u,n,i,r,a,o,s)},absellipse:function(t,e,n,i,r,a,o,s){var l=new $u(t,e,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(t){return fc.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=fc.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return fc.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),pc.prototype=Object.assign(Object.create(dc.prototype),{constructor:pc,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){dc.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=dc.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){dc.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new dc).fromJSON(i))}return this}}),mc.prototype=Object.assign(Object.create(Xn.prototype),{constructor:mc,isLight:!0,copy:function(t){return Xn.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Xn.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),vc.prototype=Object.assign(Object.create(mc.prototype),{constructor:vc,isHemisphereLight:!0,copy:function(t){return mc.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(gc.prototype,{_projScreenMatrix:new Ln,_lightPositionWorld:new mn,_lookTarget:new mn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),yc.prototype=Object.assign(Object.create(gc.prototype),{constructor:yc,isSpotLightShadow:!0,updateMatrices:function(t,e,n){var i=this.camera,r=2*cn.RAD2DEG*t.angle,a=this.mapSize.width/this.mapSize.height,o=t.distance||i.far;r===i.fov&&a===i.aspect&&o===i.far||(i.fov=r,i.aspect=a,i.far=o,i.updateProjectionMatrix()),gc.prototype.updateMatrices.call(this,t,e,n)}}),bc.prototype=Object.assign(Object.create(mc.prototype),{constructor:bc,isSpotLight:!0,copy:function(t){return mc.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),xc.prototype=Object.assign(Object.create(gc.prototype),{constructor:xc,isPointLightShadow:!0,updateMatrices:function(t,e,n){var i=this.camera,r=this.matrix,a=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;a.setFromMatrixPosition(t.matrixWorld),i.position.copy(a),o.copy(i.position),o.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(o),i.updateMatrixWorld(),r.makeTranslation(-a.x,-a.y,-a.z),s.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromMatrix(s)}}),_c.prototype=Object.assign(Object.create(mc.prototype),{constructor:_c,isPointLight:!0,copy:function(t){return mc.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),wc.prototype=Object.assign(Object.create(Vr.prototype),{constructor:wc,isOrthographicCamera:!0,copy:function(t,e){return Vr.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(o-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Xn.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Sc.prototype=Object.assign(Object.create(gc.prototype),{constructor:Sc,isDirectionalLightShadow:!0,updateMatrices:function(t,e,n){gc.prototype.updateMatrices.call(this,t,e,n)}}),Ec.prototype=Object.assign(Object.create(mc.prototype),{constructor:Ec,isDirectionalLight:!0,copy:function(t){return mc.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Mc.prototype=Object.assign(Object.create(mc.prototype),{constructor:Mc,isAmbientLight:!0}),Tc.prototype=Object.assign(Object.create(mc.prototype),{constructor:Tc,isRectAreaLight:!0,copy:function(t){return mc.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=mc.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Cc.prototype=Object.assign(Object.create(zu.prototype),{constructor:Cc,load:function(t,e,n,i){var r=this,a=new Fu(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new yu[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var r in t.uniforms){var a=t.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=(new Di).setHex(a.value);break;case"v2":i.uniforms[r].value=(new hn).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new mn).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new wn).fromArray(a.value);break;case"m3":i.uniforms[r].value=(new yn).fromArray(a.value);case"m4":i.uniforms[r].value=(new Ln).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new hn).fromArray(s)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new hn).fromArray(t.clearcoatNormalScale)),i},setTextures:function(t){return this.textures=t,this}});var kc={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Pc(){ur.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ac(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Gi.call(this,t,e,n),this.meshPerAttribute=i||1}function Oc(t){zu.call(this,t)}Pc.prototype=Object.assign(Object.create(ur.prototype),{constructor:Pc,isInstancedBufferGeometry:!0,copy:function(t){return ur.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=ur.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Ac.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Ac,isInstancedBufferAttribute:!0,copy:function(t){return Gi.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Gi.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Oc.prototype=Object.assign(Object.create(zu.prototype),{constructor:Oc,load:function(t,e,n,i){var r=this,a=new Fu(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new Pc:new ur,n=t.data.index;if(void 0!==n){var i=new Lc[n.type](n.array);e.setIndex(new Gi(i,1))}var r=t.data.attributes;for(var a in r){var o=r[a],s=(i=new Lc[o.type](o.array),new(o.isInstancedBufferAttribute?Ac:Gi)(i,o.itemSize,o.normalized));void 0!==o.name&&(s.name=o.name),e.addAttribute(a,s)}var l=t.data.morphAttributes;if(l)for(var a in l){for(var u=l[a],c=[],h=0,f=u.length;h<f;h++){o=u[h],s=new Gi(i=new Lc[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),c.push(s)}e.morphAttributes[a]=c}var d=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==d){h=0;for(var p=d.length;h!==p;++h){var m=d[h];e.addGroup(m.start,m.count,m.materialIndex)}}var v=t.data.boundingSphere;if(void 0!==v){var g=new mn;void 0!==v.center&&g.fromArray(v.center),e.boundingSphere=new di(g,v.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Lc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ic(t){zu.call(this,t)}Ic.prototype=Object.assign(Object.create(zu.prototype),{constructor:Ic,load:function(t,e,n,i){var r=this,a=""===this.path?kc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new Fu(r.manager);o.setPath(this.path),o.load(t,(function(n){var a=null;try{a=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,i)},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),a=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new pc).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new Oc,r=0,a=t.length;r<a;r++){var o,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new su[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new su[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new su[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new su[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new su[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new su[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new su[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new su[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new su[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new su[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new su[s.type]((new hc[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new su[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new su[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var h=e[s.shapes[u]];l.push(h)}o=new su[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=s.shapes.length;u<c;u++){h=e[s.shapes[u]];l.push(h)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new hc[f.type]).fromJSON(f)),o=new su[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new Cc;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),l.push(n[c.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=Lu.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var a=new Hu(new Ru(e));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var l=t[o],u=l.url;if(Array.isArray(u)){i[l.uuid]=[];for(var c=0,h=u.length;c<h;c++){var f=u[c],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;i[l.uuid].push(r(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;i[l.uuid]=r(d)}}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var o,s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(e[s.image])?new ga(e[s.image]):new _n(e[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,Rc)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Dc),o.wrapT=n(s.wrap[1],Dc)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,zc)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,zc)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),i[s.uuid]=o}return i},parseObject:function(t,e,n){var i;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function a(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new Zn,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new Di(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new es(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new ts(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Ur(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new wc(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new Mc(t.color,t.intensity);break;case"DirectionalLight":i=new Ec(t.color,t.intensity);break;case"PointLight":i=new _c(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new Tc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new bc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new vc(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(t.geometry),s=a(t.material);i=o.bones&&o.bones.length>0?new ws(o,s):new Cr(o,s),void 0!==t.drawMode&&i.setDrawMode(t.drawMode);break;case"LOD":i=new _s;break;case"Line":i=new Is(r(t.geometry),a(t.material),t.mode);break;case"LineLoop":i=new zs(r(t.geometry),a(t.material));break;case"LineSegments":i=new Ds(r(t.geometry),a(t.material));break;case"PointCloud":case"Points":i=new Hs(r(t.geometry),a(t.material));break;case"Sprite":i=new gs(a(t.material));break;case"Group":i=new Wo;break;default:i=new Xn}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,u=0;u<l.length;u++)i.add(this.parseObject(l[u],e,n));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var f=c[h],d=i.getObjectByProperty("uuid",f.object);void 0!==d&&i.addLevel(d,f.distance)}return i}});var Nc,Rc={UVMapping:ct,CubeReflectionMapping:ht,CubeRefractionMapping:ft,EquirectangularReflectionMapping:dt,EquirectangularRefractionMapping:pt,SphericalReflectionMapping:mt,CubeUVReflectionMapping:vt,CubeUVRefractionMapping:gt},Dc={RepeatWrapping:yt,ClampToEdgeWrapping:bt,MirroredRepeatWrapping:xt},zc={NearestFilter:_t,NearestMipmapNearestFilter:wt,NearestMipmapLinearFilter:Et,LinearFilter:Tt,LinearMipmapNearestFilter:Ct,LinearMipmapLinearFilter:Pt};function Bc(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),zu.call(this,t),this.options=void 0}function Fc(){this.type="ShapePath",this.color=new Di,this.subPaths=[],this.currentPath=null}function jc(t){this.type="Font",this.data=t}function Vc(t,e,n,i,r){var a=r.glyphs[t]||r.glyphs["?"];if(a){var o,s,l,u,c,h,f,d,p=new Fc;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*e+n,s=m[v++]*e+i,p.moveTo(o,s);break;case"l":o=m[v++]*e+n,s=m[v++]*e+i,p.lineTo(o,s);break;case"q":l=m[v++]*e+n,u=m[v++]*e+i,c=m[v++]*e+n,h=m[v++]*e+i,p.quadraticCurveTo(c,h,l,u);break;case"b":l=m[v++]*e+n,u=m[v++]*e+i,c=m[v++]*e+n,h=m[v++]*e+i,f=m[v++]*e+n,d=m[v++]*e+i,p.bezierCurveTo(c,h,f,d,l,u)}}return{offsetX:a.ha*e,path:p}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".")}function Uc(t){zu.call(this,t)}Bc.prototype=Object.assign(Object.create(zu.prototype),{constructor:Bc,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Nu.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)})).then((function(n){Nu.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}),Object.assign(Fc.prototype,{moveTo:function(t,e){this.currentPath=new dc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,a){this.currentPath.bezierCurveTo(t,e,n,i,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new pc;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=e[a],l=-l,s=e[r],u=-u),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=u*(t.x-o.x)-l*(t.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i}var r=Dl.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);var o,s,l,u=[];if(1===a.length)return s=a[0],(l=new pc).curves=s.curves,u.push(l),u;var c=!r(a[0].getPoints());c=t?!c:c;var h,f,d=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)o=r(h=(s=a[g]).getPoints()),(o=t?!o:o)?(!c&&p[v]&&v++,p[v]={s:new pc,p:h},p[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(a);if(p.length>1){for(var b=!1,x=[],_=0,w=p.length;_<w;_++)d[_]=[];for(_=0,w=p.length;_<w;_++)for(var S=m[_],E=0;E<S.length;E++){for(var M=S[E],T=!0,C=0;C<p.length;C++)i(M.p,p[C].p)&&(_!==C&&x.push({froms:_,tos:C,hole:E}),T?(T=!1,d[C].push(M)):b=!0);T&&d[_].push(M)}x.length>0&&(b||(m=d))}g=0;for(var k=p.length;g<k;g++){l=p[g].s,u.push(l);for(var P=0,A=(f=m[g]).length;P<A;P++)l.holes.push(f[P].h)}return u}}),Object.assign(jc.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,l=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)s=0,l-=a;else{var h=Vc(c,r,s,l,n);s+=h.offsetX,o.push(h.path)}}return o}(t,e,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Uc.prototype=Object.assign(Object.create(zu.prototype),{constructor:Uc,load:function(t,e,n,i){var r=this,a=new Fu(this.manager);a.setPath(this.path),a.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)}),n,i)},parse:function(t){return new jc(t)}});var Hc={getContext:function(){return void 0===Nc&&(Nc=new(window.AudioContext||window.webkitAudioContext)),Nc},setContext:function(t){Nc=t}};function Gc(t){zu.call(this,t)}function Wc(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new mn)}function qc(t,e){mc.call(this,void 0,e),this.sh=void 0!==t?t:new Wc}function $c(t,e,n){qc.call(this,void 0,n);var i=(new Di).set(t),r=(new Di).set(e),a=new mn(i.r,i.g,i.b),o=new mn(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}function Qc(t,e){qc.call(this,void 0,e);var n=(new Di).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Gc.prototype=Object.assign(Object.create(zu.prototype),{constructor:Gc,load:function(t,e,n,i){var r=new Fu(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,(function(t){var n=t.slice(0);Hc.getContext().decodeAudioData(n,(function(t){e(t)}))}),n,i)}}),Object.assign(Wc.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScale(a[1],.488603*i),e.addScale(a[2],.488603*r),e.addScale(a[3],.488603*n),e.addScale(a[4],n*i*1.092548),e.addScale(a[5],i*r*1.092548),e.addScale(a[6],.315392*(3*r*r-1)),e.addScale(a[7],n*r*1.092548),e.addScale(a[8],.546274*(n*n-i*i)),e},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScale(a[1],1.023328*i),e.addScale(a[2],1.023328*r),e.addScale(a[3],1.023328*n),e.addScale(a[4],.858086*n*i),e.addScale(a[5],.858086*i*r),e.addScale(a[6],.743125*r*r-.247708),e.addScale(a[7],.858086*n*r),e.addScale(a[8],.429043*(n*n-i*i)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}),Object.assign(Wc,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),qc.prototype=Object.assign(Object.create(mc.prototype),{constructor:qc,isLightProbe:!0,copy:function(t){return mc.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return mc.prototype.toJSON.call(this,t)}}),$c.prototype=Object.assign(Object.create(qc.prototype),{constructor:$c,isHemisphereLightProbe:!0,copy:function(t){return qc.prototype.copy.call(this,t),this},toJSON:function(t){return qc.prototype.toJSON.call(this,t)}}),Qc.prototype=Object.assign(Object.create(qc.prototype),{constructor:Qc,isAmbientLightProbe:!0,copy:function(t){return qc.prototype.copy.call(this,t),this},toJSON:function(t){return qc.prototype.toJSON.call(this,t)}});var Yc=new Ln,Xc=new Ln;function Zc(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ur,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ur,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Jc(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Zc.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,i,r=t.projectionMatrix.clone(),a=e.eyeSep/2,o=a*e.near/e.focus,s=e.near*Math.tan(cn.DEG2RAD*e.fov*.5)/e.zoom;Xc.elements[12]=-a,Yc.elements[12]=a,n=-s*e.aspect+o,i=s*e.aspect+o,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),n=-s*e.aspect-o,i=s*e.aspect-o,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Xc),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Yc)}}),Object.assign(Jc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var Kc=new mn,th=new fn,eh=new mn,nh=new mn;function ih(){Xn.call(this),this.type="AudioListener",this.context=Hc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Jc}function rh(t){Xn.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}ih.prototype=Object.assign(Object.create(Xn.prototype),{constructor:ih,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){Xn.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Kc,th,eh),nh.set(0,0,-1).applyQuaternion(th),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Kc.x,i),e.positionY.linearRampToValueAtTime(Kc.y,i),e.positionZ.linearRampToValueAtTime(Kc.z,i),e.forwardX.linearRampToValueAtTime(nh.x,i),e.forwardY.linearRampToValueAtTime(nh.y,i),e.forwardZ.linearRampToValueAtTime(nh.z,i),e.upX.linearRampToValueAtTime(n.x,i),e.upY.linearRampToValueAtTime(n.y,i),e.upZ.linearRampToValueAtTime(n.z,i)}else e.setPosition(Kc.x,Kc.y,Kc.z),e.setOrientation(nh.x,nh.y,nh.z,n.x,n.y,n.z)}}),rh.prototype=Object.assign(Object.create(Xn.prototype),{constructor:rh,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var ah=new mn,oh=new fn,sh=new mn,lh=new mn;function uh(t){rh.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function ch(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function hh(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}uh.prototype=Object.assign(Object.create(rh.prototype),{constructor:uh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(Xn.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(ah,oh,sh),lh.set(0,0,1).applyQuaternion(oh);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ah.x,n),e.positionY.linearRampToValueAtTime(ah.y,n),e.positionZ.linearRampToValueAtTime(ah.z,n),e.orientationX.linearRampToValueAtTime(lh.x,n),e.orientationY.linearRampToValueAtTime(lh.y,n),e.orientationZ.linearRampToValueAtTime(lh.z,n)}else e.setPosition(ah.x,ah.y,ah.z),e.setOrientation(lh.x,lh.y,lh.z)}}}),Object.assign(ch.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(hh.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*e;this._mixBufferRegion(n,i,o,1-r,e)}for(var s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){a.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){fn.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}}});var fh=new RegExp("[\\[\\]\\.:\\/]","g"),dh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",ph=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),mh=/(WCOD+)?/.source.replace("WCOD",dh),vh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),gh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),yh=new RegExp("^"+ph+mh+vh+gh+"$"),bh=["material","materials","bones"];function xh(t,e,n){var i=n||_h.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function _h(t,e,n){this.path=e,this.parsedPath=n||_h.parseTrackName(e),this.node=_h.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function wh(){this.uuid=cn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Sh(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,a=new Array(r),o={endingStart:Ce,endingEnd:Ce},s=0;s!==r;++s){var l=i[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=we,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Eh(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Mh(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Th(t,e,n){ns.call(this,t,e),this.meshPerAttribute=n||1}function Ch(t,e,n,i){this.ray=new _i(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function kh(t,e){return t.distance-e.distance}function Ph(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,a=0,o=r.length;a<o;a++)Ph(r[a],e,n,!0)}function Ah(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Oh(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}Object.assign(xh.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(_h,{Composite:xh,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new _h.Composite(t,e,n):new _h(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(fh,"")},parseTrackName:function(t){var e=yh.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==bh.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var a=i(r.children);if(a)return a}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(_h.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=_h.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var s=t[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(_h.prototype,{_getValue_unbound:_h.prototype.getValue,_setValue_unbound:_h.prototype.setValue}),Object.assign(wh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],f=h.uuid,d=i[f];if(void 0===d){d=e++,i[f]=d,t.push(h);for(var p=0,m=s;p!==m;++p)o[p].push(new _h(h,r[p],a[p]))}else if(d<n){l=t[d];var v=--n,g=t[v];i[g.uuid]=d,t[d]=g,i[f]=v,t[v]=h;for(p=0,m=s;p!==m;++p){var y=o[p],b=y[v],x=y[d];y[d]=b,void 0===x&&(x=new _h(h,r[p],a[p])),y[v]=x}}else t[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=n[l];if(void 0!==u&&u>=e){var c=e++,h=t[c];n[h.uuid]=u,t[u]=h,n[l]=c,t[c]=s;for(var f=0,d=r;f!==d;++f){var p=i[f],m=p[c],v=p[u];p[u]=m,p[c]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var h=--n,f=t[h],d=t[y=--e];i[f.uuid]=c,t[c]=f,i[d.uuid]=h,t[h]=d,t.pop();for(var p=0,m=a;p!==m;++p){var v=(b=r[p])[h],g=b[y];b[c]=v,b[h]=g,b.pop()}}else{var y;i[(d=t[y=--e]).uuid]=c,t[c]=d,t.pop();for(p=0,m=a;p!==m;++p){var b;(b=r[p])[c]=b[y],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[t]=i,a.push(t),o.push(e),r.push(c);for(var h=u,f=s.length;h!==f;++h){var d=s[h];c[h]=new _h(d,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Sh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,a=r/i,o=i/r;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,i=this.loop,r=this._loopCount,a=i===Se;if(0===t)return-1===r?e:a&&1==(1&r)?n-e:e;if(i===_e){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var o=Math.floor(e/n);e-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=e;if(a&&1==(1&r))return n-e}return e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=ke,i.endingEnd=ke):(i.endingStart=t?this.zeroSlopeAtStart?ke:Ce:Pe,i.endingEnd=e?this.zeroSlopeAtEnd?ke:Ce:Pe)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}),Eh.prototype=Object.assign(Object.create(i.prototype),{constructor:Eh,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var h=i[c],f=h.name,d=u[f];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;++(d=new hh(_h.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],a=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new wu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Lu.findByName(n,t):t,a=null!==r?r.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var u=new Sh(this,r,e);return this._bindAction(u,s),this._addInactiveAction(u,a,i),u},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Lu.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(i,t,r,a)}var s=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,e[u]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Mh.prototype.clone=function(){return new Mh(void 0===this.value.clone?this.value:this.value.clone())},Th.prototype=Object.assign(Object.create(ns.prototype),{constructor:Th,isInstancedInterleavedBuffer:!0,copy:function(t){return ns.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Ch.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return Ph(t,this,i,e),i.sort(kh),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=t.length;r<a;r++)Ph(t[r],this,i,e);return i.sort(kh),i}}),Object.assign(Ah.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(cn.clamp(e/this.radius,-1,1))),this}}),Object.assign(Oh.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var Lh=new hn;function Ih(t,e){this.min=void 0!==t?t:new hn(1/0,1/0),this.max=void 0!==e?e:new hn(-1/0,-1/0)}Object.assign(Ih.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Lh.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new hn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new hn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new hn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new hn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Lh.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Nh=new mn,Rh=new mn;function Dh(t,e){this.start=void 0!==t?t:new mn,this.end=void 0!==e?e:new mn}function zh(t){Xn.call(this),this.material=t,this.render=function(){}}Object.assign(Dh.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new mn),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new mn),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new mn),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){Nh.subVectors(t,this.start),Rh.subVectors(this.end,this.start);var n=Rh.dot(Rh),i=Rh.dot(Nh)/n;return e&&(i=cn.clamp(i,0,1)),i},closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new mn),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),zh.prototype=Object.create(Xn.prototype),zh.prototype.constructor=zh,zh.prototype.isImmediateRenderObject=!0;var Bh=new mn,Fh=new mn,jh=new yn,Vh=["a","b","c"];function Uh(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new ur,u=new Ji(2*o*3,3);l.addAttribute("position",u),Ds.call(this,l,new Cs({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}Uh.prototype=Object.create(Ds.prototype),Uh.prototype.constructor=Uh,Uh.prototype.update=function(){this.object.updateMatrixWorld(!0),jh.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++)for(var l=r[o],u=0,c=l.vertexNormals.length;u<c;u++){var h=i[l[Vh[u]]],f=l.vertexNormals[u];Bh.copy(h).applyMatrix4(t),Fh.copy(f).applyMatrix3(jh).normalize().multiplyScalar(this.size).add(Bh),e.setXYZ(a,Bh.x,Bh.y,Bh.z),a+=1,e.setXYZ(a,Fh.x,Fh.y,Fh.z),a+=1}else if(n&&n.isBufferGeometry){var d=n.attributes.position,p=n.attributes.normal;for(a=0,u=0,c=d.count;u<c;u++)Bh.set(d.getX(u),d.getY(u),d.getZ(u)).applyMatrix4(t),Fh.set(p.getX(u),p.getY(u),p.getZ(u)),Fh.applyMatrix3(jh).normalize().multiplyScalar(this.size).add(Bh),e.setXYZ(a,Bh.x,Bh.y,Bh.z),a+=1,e.setXYZ(a,Fh.x,Fh.y,Fh.z),a+=1}e.needsUpdate=!0};var Hh=new mn;function Gh(t,e){Xn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new ur,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Ji(i,3));var l=new Cs({fog:!1});this.cone=new Ds(n,l),this.add(this.cone),this.update()}Gh.prototype=Object.create(Xn.prototype),Gh.prototype.constructor=Gh,Gh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Gh.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Hh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Hh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Wh=new mn,qh=new Ln,$h=new Ln;function Qh(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new ur,i=[],r=[],a=new Di(0,0,1),o=new Di(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new Ji(i,3)),n.addAttribute("color",new Ji(r,3));var u=new Cs({vertexColors:E,depthTest:!1,depthWrite:!1,transparent:!0});Ds.call(this,n,u),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Yh(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new ql(e,4,2),r=new Hi({wireframe:!0,fog:!1});Cr.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Xh(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=new ur;n.addAttribute("position",new Ji([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new Cs({fog:!1});Is.call(this,n,i);var r=new ur;r.addAttribute("position",new Ji([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Cr(r,new Hi({side:y,fog:!1}))),this.update()}Qh.prototype=Object.create(Ds.prototype),Qh.prototype.constructor=Qh,Qh.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,i=n.getAttribute("position");$h.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(qh.multiplyMatrices($h,o.matrixWorld),Wh.setFromMatrixPosition(qh),i.setXYZ(a,Wh.x,Wh.y,Wh.z),qh.multiplyMatrices($h,o.parent.matrixWorld),Wh.setFromMatrixPosition(qh),i.setXYZ(a+1,Wh.x,Wh.y,Wh.z),a+=2)}n.getAttribute("position").needsUpdate=!0,Xn.prototype.updateMatrixWorld.call(this,t)},Yh.prototype=Object.create(Cr.prototype),Yh.prototype.constructor=Yh,Yh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Yh.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Xh.prototype=Object.create(Is.prototype),Xh.prototype.constructor=Xh,Xh.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},Xh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var Zh=new mn,Jh=new Di,Kh=new Di;function tf(t,e,n){Xn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new il(e);i.rotateY(.5*Math.PI),this.material=new Hi({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=E);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.addAttribute("color",new Gi(a,3)),this.add(new Cr(i,this.material)),this.update()}function ef(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:""},i=new jr({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new ql(1,32,16);Cr.call(this,r,i),this.onBeforeRender()}function nf(t,e,n,i){t=t||10,e=e||10,n=new Di(void 0!==n?n:4473924),i=new Di(void 0!==i?i:8947848);for(var r=e/2,a=t/e,o=t/2,s=[],l=[],u=0,c=0,h=-o;u<=e;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var f=u===r?n:i;f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3,f.toArray(l,c),c+=3}var d=new ur;d.addAttribute("position",new Ji(s,3)),d.addAttribute("color",new Ji(l,3));var p=new Cs({vertexColors:E});Ds.call(this,d,p)}function rf(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new Di(void 0!==r?r:4473924),a=new Di(void 0!==a?a:8947848);var o,s,l,u,c,h,f,d=[],p=[];for(u=0;u<=e;u++)l=u/e*(2*Math.PI),o=Math.sin(l)*t,s=Math.cos(l)*t,d.push(0,0,0),d.push(o,0,s),f=1&u?r:a,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(u=0;u<=n;u++)for(f=1&u?r:a,h=t-t/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),p.push(f.r,f.g,f.b),l=(c+1)/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,d.push(o,0,s),p.push(f.r,f.g,f.b);var m=new ur;m.addAttribute("position",new Ji(d,3)),m.addAttribute("color",new Ji(p,3));var v=new Cs({vertexColors:E});Ds.call(this,m,v)}function af(t,e,n,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new ur,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));r.addAttribute("position",new Gi(o,3));var s=new Cs({color:65280}),l=new Cs({color:16776960});Is.call(this,r,[l,s]),this.update()}tf.prototype=Object.create(Xn.prototype),tf.prototype.constructor=tf,tf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},tf.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Jh.copy(this.light.color),Kh.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?Jh:Kh;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Zh.setFromMatrixPosition(this.light.matrixWorld).negate())},ef.prototype=Object.create(Cr.prototype),ef.prototype.constructor=ef,ef.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ef.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},nf.prototype=Object.assign(Object.create(Ds.prototype),{constructor:nf,copy:function(t){return Ds.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),rf.prototype=Object.create(Ds.prototype),rf.prototype.constructor=rf,af.prototype=Object.create(Is.prototype),af.prototype.constructor=af,af.prototype.update=function(){var t,e,n=this.audio,i=this.range,r=this.divisionsInnerAngle,a=this.divisionsOuterAngle,o=cn.degToRad(n.panner.coneInnerAngle),s=cn.degToRad(n.panner.coneOuterAngle),l=o/2,u=s/2,c=0,h=0,f=this.geometry,d=f.attributes.position;function p(n,r,a,o){var s=(r-n)/a;for(d.setXYZ(c,0,0,0),h++,t=n;t<r;t+=s)e=c+h,d.setXYZ(e,Math.sin(t)*i,0,Math.cos(t)*i),d.setXYZ(e+1,Math.sin(Math.min(t+s,r))*i,0,Math.cos(Math.min(t+s,r))*i),d.setXYZ(e+2,0,0,0),h+=3;f.addGroup(c,h,o),c+=h,h=0}f.clearGroups(),p(-u,-l,a,0),p(-l,l,r,1),p(l,u,a,0),d.needsUpdate=!0,o===s&&(this.material[0].visible=!1)},af.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var of=new mn,sf=new mn,lf=new yn;function uf(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new ur,u=new Ji(2*o*3,3);l.addAttribute("position",u),Ds.call(this,l,new Cs({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}uf.prototype=Object.create(Ds.prototype),uf.prototype.constructor=uf,uf.prototype.update=function(){this.object.updateMatrixWorld(!0),lf.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++){var l=r[o],u=l.normal;of.copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(t),sf.copy(u).applyMatrix3(lf).normalize().multiplyScalar(this.size).add(of),e.setXYZ(a,of.x,of.y,of.z),a+=1,e.setXYZ(a,sf.x,sf.y,sf.z),a+=1}e.needsUpdate=!0};var cf=new mn,hf=new mn,ff=new mn;function df(t,e,n){Xn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new ur;i.addAttribute("position",new Ji([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new Cs({fog:!1});this.lightPlane=new Is(i,r),this.add(this.lightPlane),(i=new ur).addAttribute("position",new Ji([0,0,0,0,0,1],3)),this.targetLine=new Is(i,r),this.add(this.targetLine),this.update()}df.prototype=Object.create(Xn.prototype),df.prototype.constructor=df,df.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},df.prototype.update=function(){cf.setFromMatrixPosition(this.light.matrixWorld),hf.setFromMatrixPosition(this.light.target.matrixWorld),ff.subVectors(hf,cf),this.lightPlane.lookAt(hf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(hf),this.targetLine.scale.z=ff.length()};var pf=new mn,mf=new Vr;function vf(t){var e=new ur,n=new Cs({color:16777215,vertexColors:S}),i=[],r=[],a={},o=new Di(16755200),s=new Di(16711680),l=new Di(43775),u=new Di(16777215),c=new Di(3355443);function h(t,e,n){f(t,n),f(e,n)}function f(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.addAttribute("position",new Ji(i,3)),e.addAttribute("color",new Ji(r,3)),Ds.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function gf(t,e,n,i,r,a,o){pf.set(r,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],pf.x,pf.y,pf.z)}vf.prototype=Object.create(Ds.prototype),vf.prototype.constructor=vf,vf.prototype.update=function(){var t=this.geometry,e=this.pointMap;mf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),gf("c",e,t,mf,0,0,-1),gf("t",e,t,mf,0,0,1),gf("n1",e,t,mf,-1,-1,-1),gf("n2",e,t,mf,1,-1,-1),gf("n3",e,t,mf,-1,1,-1),gf("n4",e,t,mf,1,1,-1),gf("f1",e,t,mf,-1,-1,1),gf("f2",e,t,mf,1,-1,1),gf("f3",e,t,mf,-1,1,1),gf("f4",e,t,mf,1,1,1),gf("u1",e,t,mf,.7,1.1,-1),gf("u2",e,t,mf,-.7,1.1,-1),gf("u3",e,t,mf,0,2,-1),gf("cf1",e,t,mf,-1,0,1),gf("cf2",e,t,mf,1,0,1),gf("cf3",e,t,mf,0,-1,1),gf("cf4",e,t,mf,0,1,1),gf("cn1",e,t,mf,-1,0,-1),gf("cn2",e,t,mf,1,0,-1),gf("cn3",e,t,mf,0,-1,-1),gf("cn4",e,t,mf,0,1,-1),t.getAttribute("position").needsUpdate=!0};var yf=new ci;function bf(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ur;r.setIndex(new Gi(n,1)),r.addAttribute("position",new Gi(i,3)),Ds.call(this,r,new Cs({color:e})),this.matrixAutoUpdate=!1,this.update()}function xf(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new ur;i.setIndex(new Gi(n,1)),i.addAttribute("position",new Ji([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ds.call(this,i,new Cs({color:e})),this.geometry.computeBoundingSphere()}function _f(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=new ur;r.addAttribute("position",new Ji([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Is.call(this,r,new Cs({color:i}));var a=new ur;a.addAttribute("position",new Ji([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Cr(a,new Hi({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}bf.prototype=Object.create(Ds.prototype),bf.prototype.constructor=bf,bf.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&yf.setFromObject(this.object),!yf.isEmpty()){var e=yf.min,n=yf.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},bf.prototype.setFromObject=function(t){return this.object=t,this.update(),this},bf.prototype.copy=function(t){return Ds.prototype.copy.call(this,t),this.object=t.object,this},bf.prototype.clone=function(){return(new this.constructor).copy(this)},xf.prototype=Object.create(Ds.prototype),xf.prototype.constructor=xf,xf.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Xn.prototype.updateMatrixWorld.call(this,t))},_f.prototype=Object.create(Is.prototype),_f.prototype.constructor=_f,_f.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?y:g,this.lookAt(this.plane.normal),Xn.prototype.updateMatrixWorld.call(this,t)};var wf,Sf,Ef=new mn;function Mf(t,e,n,i,r,a){Xn.call(this),void 0===t&&(t=new mn(0,0,1)),void 0===e&&(e=new mn(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===wf&&((wf=new ur).addAttribute("position",new Ji([0,0,0,0,1,0],3)),(Sf=new nu(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Is(wf,new Cs({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Cr(Sf,new Hi({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}function Tf(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new ur;n.addAttribute("position",new Ji(e,3)),n.addAttribute("color",new Ji([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Cs({vertexColors:E});Ds.call(this,n,i)}function Cf(t,e,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ji(t,e,n,r,a,o)}Mf.prototype=Object.create(Xn.prototype),Mf.prototype.constructor=Mf,Mf.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Ef.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Ef,e)}},Mf.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Mf.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Mf.prototype.copy=function(t){return Xn.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Mf.prototype.clone=function(){return(new this.constructor).copy(this)},Tf.prototype=Object.create(Ds.prototype),Tf.prototype.constructor=Tf;var kf=0,Pf=1;function Af(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Of(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Lf(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Hs(t,e)}function If(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new gs(t)}function Nf(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Hs(t,e)}function Rf(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Bs(t)}function Df(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Bs(t)}function zf(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Bs(t)}function Bf(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new mn(t,e,n)}function Ff(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Gi(t,e).setDynamic(!0)}function jf(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Wi(t,e)}function Vf(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new qi(t,e)}function Uf(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new $i(t,e)}function Hf(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Qi(t,e)}function Gf(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Yi(t,e)}function Wf(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Xi(t,e)}function qf(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Zi(t,e)}function $f(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ji(t,e)}function Qf(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ki(t,e)}function Yf(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),tc.call(this,t),this.type="catmullrom",this.closed=!0}function Xf(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),tc.call(this,t),this.type="catmullrom"}function Zf(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),tc.call(this,t),this.type="catmullrom"}function Jf(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Tf(t)}function Kf(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new bf(t,e)}function td(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ds(new tu(t.geometry),new Cs({color:void 0!==e?e:16777215}))}function ed(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ds(new Ys(t.geometry),new Cs({color:void 0!==e?e:16777215}))}function nd(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Fu(t)}function id(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Uu(t)}qu.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(qu.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(fc.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Nr,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new mn(r.x,r.y,r.z||0))}return e}}),Object.assign(dc.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Yf.prototype=Object.create(tc.prototype),Xf.prototype=Object.create(tc.prototype),Zf.prototype=Object.create(tc.prototype),Object.assign(Zf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),nf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Qh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(zu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),kc.extractUrlBase(t)}}),Object.assign(Ic.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Ih.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ci.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Dh.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(cn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),cn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),cn.ceilPowerOfTwo(t)}}),Object.assign(yn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ln.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new mn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)}}),Yr.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},fn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(_i.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Li.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Li,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Li.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Li.getNormal(t,e,n,i)}}),Object.assign(pc.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fl(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zl(this,t)}}),Object.assign(hn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(mn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(wn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Nr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Xn.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Xn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(_s.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ms.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ws.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(qu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Ur.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(mc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Gi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(ur.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(ur.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(jl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Mh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ui.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Di}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===x}}}),Object.defineProperties(fu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(jr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ko.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ko.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Vo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Gr.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Sn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Zo.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),rh.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Gc).load(t,(function(t){e.setBuffer(t)})),this},ch.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Hr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var rd={merge:function(t,e,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function ad(){console.error("THREE.CanvasRenderer has been removed")}function od(){console.error("THREE.JSONLoader has been removed.")}bn.crossOrigin=void 0,bn.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Wu;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},bn.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Gu;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},bn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},bn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var sd={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function ld(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateCamera=function(t,e){setTimeout((function(){a.default.dispatch({type:"UPDATE_CAMERA",id:t,cameraProp:e})}),1)},e.resetCamera=function(t){a.default.dispatch({type:"RESET_CAMERA",id:t})},e.switchCamera=function(t){a.default.dispatch({type:"SWITCH_CAMERA",id:t})},e.searchTime=function(t,e){a.default.dispatch({type:"SEARCH_TIME",id:t,dst:e})},e.updateChecked=function(t){a.default.dispatch({type:"UPDATE_CHECKED",id:t})},e.switchGridDisplay=function(t,e){a.default.dispatch({type:"SWITCH_GRID",id:t,state:e})},e.switchLabelDisplay=function(t,e){a.default.dispatch({type:"SWITCH_LABEL",id:t,state:e})},e.switchAxisDisplay=function(t,e){a.default.dispatch({type:"SWITCH_AXIS",id:t,state:e})},e.switchPlotDisplay=function(t,e){a.default.dispatch({type:"SWITCH_PLOT",id:t,state:e})},e.changeBackground=function(t,e){a.default.dispatch({type:"CHANGE_BACKGROUND",id:t,color:e})},e.clipTube=function(t,e){a.default.dispatch({type:"CLIP_TUBE",id:t,state:e})},e.switchShade=function(t,e){a.default.dispatch({type:"SWITCH_SHADE",id:t,state:e})},e.changeFar=function(t,e){a.default.dispatch({type:"CHANGE_FAR",id:t,value:e})},e.updateFocus=function(t,e,n){a.default.dispatch({type:"UPDATE_FOCUS",id:t,zpos:e,flag:n})},e.updateMinMaxV=function(t,e,n){a.default.dispatch({type:"UPDATE_MINMAXV",id:t,min:e,max:n})},e.updateMinMaxH=function(t,e,n){a.default.dispatch({type:"UPDATE_MINMAXH",id:t,min:e,max:n})},e.changePlotColor=function(t,e){a.default.dispatch({type:"CHANGE_PLOTCOLOR",id:t,color:e})},e.setTexture=function(t,e){a.default.dispatch({type:"SET_TEXTURE",id:t,texture:e})},e.updateTexture=function(t,e){a.default.dispatch({type:"UPDATE_TEXTURE",id:t,texture:e})},e.activateViewport=function(t){a.default.dispatch({type:"ACTIVATE_VIEWPORT",id:t})},e.timeFitting=function(t){a.default.dispatch({type:"TIME_FITTING",dst:t})},e.lockControl=function(t,e){a.default.dispatch({type:"LOCK_CONTROL",ids:t,state:e})},e.synchronizeTubes=function(t,e,n,i){a.default.dispatch({type:"SYNCHRONIZE_TUBES",id:t,zpos:e,pos:n,deg:i})},e.zoomOutTimeTubes=function(t){a.default.dispatch({type:"ZOOM_OUT_TIMETUBE",id:t})},e.resetZoomTimeTubes=function(t){a.default.dispatch({type:"RESET_ZOOM_TIMETUBES",id:t})},e.zoomInTimeTubes=function(t){a.default.dispatch({type:"ZOOM_IN_TIMETUBES",id:t})},e.updateOpacity=function(t,e){a.default.dispatch({type:"UPDATE_OPACITY",id:t,opt:e})},e.uploadTubeAttributes=function(t,e,n,i){a.default.dispatch({type:"UPLOAD_TUBE_ATTRIBUTES",id:t,position:e,color:n,indices:i})},e.takeSnapshot=function(t,e,n){a.default.dispatch({type:"TAKE_SNAPSHOT",id:t,pos:e,far:n})},e.recoverTube=function(t,e,n){a.default.dispatch({type:"RECOVER_TUBE",id:t,cameraProp:e,tubePos:n})},e.showTimeTubesOfTimeSlice=function(t,e){a.default.dispatch({type:"SHOW_TIMETUBES_OF_TIME_SLICE",id:t,period:e})},e.updateAveragePeriod=function(t){a.default.dispatch({type:"UPDATE_AVERAGE_PERIOD",value:t})},e.showRotationCenter=function(t,e,n){a.default.dispatch({type:"SHOW_ROTATION_CENTER",id:t,period:e,center:n})},e.switchComment=function(t,e){a.default.dispatch({type:"SWITCH_COMMENT",id:t,state:e})},e.updateWheelInterval=function(t){a.default.dispatch({type:"UPDATE_WHEEL_INTERVAL",interval:t})};var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){var i=n(76),r=n(132),a=n(190),o=n(8);t.exports=function(t,e){return(o(t)?i:a)(t,r(e,3))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tickFormatting=function(t){var e=t;Math.log10(Math.abs(t))<-2&&0!==t&&(e=t.toExponential(1));return e},e.formatValue=function(t){t=Number(t);var e=void 0;e=Math.log10(Math.abs(t))<-2&&0!==t?t.toExponential(1):t.toFixed(2);return e}},function(t,e,n){var i=n(27),r=n(123),a=n(124),o=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):a(t)}},function(t,e,n){var i=n(145),r=n(148);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toggleSourcePanel=function(){var t=$("#QBESourceMain").css("display");"block"===t?($("#QBESourceMain").css("display","none"),$("#QBESource").css("width","0%"),$("#QBESource").css("padding","0px"),$("#extractionResults").css("width","70%"),$("#collapseSourcePanel").text("Open")):"none"===t&&($("#QBESourceMain").css("display","block"),$("#QBESource").css("width","30%"),$("#QBESource").css("padding","15px"),$("#extractionResults").css("width","40%"),$("#collapseSourcePanel").text("Close"))},e.toggleExtractionDetailPanel=function(){var t=$("#resultDetailArea").css("display");"block"===t?($("#resultDetailArea").css("display","none"),$("#resultDetail").css("height","1.5rem"),$("#resultDetail").css("margin-bottom","0"),$("#collapseResultDetailPanel").text("Open")):"none"===t&&($("#resultDetailArea").css("display","block"),$("#resultDetail").css("height","auto"),$("#resultDetail").css("margin-bottom","1.5rem"),$("#collapseResultDetailPanel").text("Close"))},e.getIgnoredVariables=function(){for(var t=$("input[name=QBEIgnored]:checked"),e=[],n=0;n<t.length;n++)e.push(t[n].value);return e},e.uncheckIgnoredVariables=function(){for(var t=$("input[name=QBEIgnored]:checked"),e=0;e<t.length;e++)t[e].checked=!1},e.transformCamelToSentence=function(t){var e=t.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1)},e.transformSentenceToCamel=function(t){var e="",n=t.split(" ");e=n[0];for(var i=1;i<n.length;i++)e+=n[i].charAt(0).toUpperCase()+n[i].slice(1);return e=e.charAt(0).toLowerCase()+e.slice(1)},e.displayLoading=function(t){$("#loading").length<=0&&$("#"+t).append('<img id="loading" src="img/icons/loading.gif" width="30" height="30"/>');return"displayLoading"},e.removeLoading=function(){$("#loading").remove()};n(25)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),o=n(14),s=(i=o)&&i.__esModule?i:{default:i};var l=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.menu="Visualization",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"handleActions",value:function(t){switch(t.type){case"SELECT_MENU":this.selectMenu(t.menu);break;case"RESIZE_EXTRACTION_RESULTS_AREA":this.emit("resizeExtractionResultsArea")}}},{key:"getMenu",value:function(){return this.menu}},{key:"selectMenu",value:function(t){this.menu=t,this.emit("selectMenu",t)}}]),e}(a.EventEmitter));s.default.register(l.handleActions.bind(l)),e.default=l},function(t,e,n){var i=n(56),r=n(52);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectMenu=function(t){a.default.dispatch({type:"SELECT_MENU",menu:t})},e.resizeExtractionResultsArea=function(){a.default.dispatch({type:"RESIZE_EXTRACTION_RESULTS_AREA"})};var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,a=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var r,a,o,s;if(u(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"==typeof o?o=a[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=c(t))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=f.bind(i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):v(r,r.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)a(l,this,e);else{var u=l.length,c=v(l,u);for(n=0;n<u;++n)a(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return u(e),this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,a,o;if(u(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,n){var i=n(12).Symbol;t.exports=i},function(t,e,n){var i=n(72),r=n(130),a=n(24);t.exports=function(t){return a(t)?i(t):r(t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var i=n(91),r=n(62);t.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var u=e[s],c=a?a(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),o?r(n,u,c):i(n,u,c)}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.uploadData=function(t){!function(t){s.default.getDataNum();for(var e=Number($("#initialLineVal").text()),n=[],a=[],l=[],u=function(s){n.push(t[s].name);var u=new FileReader;u.readAsText(t[s]),u.onload=function(){var c=u.result;console.log("csv file");var h=r.csvParse(c,(function(e){return Object.keys(e).forEach((function(t){isNaN(e[t])||(e[t]=Number(e[t]))}),e),e.source=t[s].name,e})).splice(e-2);if(a.push(h),s===t.length-1){for(var v=0;v<a.length;v++)l=l.concat(a[v]);l.sort((function(t,e){return t.JD<e.JD?-1:1}));var g=d(l),y=i(g,2),b=y[0],x=y[1],_=p(f,b),w=m(b);o.default.dispatch({type:"UPLOAD_DATA",data:{name:n.join("+"),data:l,spatial:b,meta:_,position:w.position,radius:w.radius,color:w.color,splines:w.spline,lookup:x,merge:!1}})}}},c=0;c<t.length;c++)u(c)}(t)},e.updateDetails=function(t,e){o.default.dispatch({type:"UPDATE_DETAIL",id:t,zpos:e})},e.mergeData=function(t){var e=Promise.resolve(),n=[],r=[];e.then((function(){for(var e=0;e<t.length;e++){var a=s.default.getData(t[e]);n=n.concat(a.data.data),r.push(a.name)}var o=r.join(",");n.sort((function(t,e){var n=t.JD,i=e.JD;return Math.log10(t.JD)>4&&(n-=245e4),Math.log10(e.JD)>4&&(i-=245e4),n<i?-1:1}));var l=d(n),u=i(l,2),c=u[0],h=u[1],v=p(f,c),g=m(c);return{fileName:o,data:n,spatial:c,lookup:h,meta:v,splines:g}})).then((function(t){o.default.dispatch({type:"UPLOAD_DATA",data:{name:t.fileName,data:t.data,spatial:t.spatial,meta:t.meta,position:t.splines.position,radius:t.splines.radius,color:t.splines.color,splines:t.splines.spline,lookup:t.lookup,merge:!0}})}))},e.updatePrivateComment=function(){o.default.dispatch({type:"UPDATE_PRIVATE_COMMENT"})};var r=c(n(7)),a=c(n(15)),o=u(n(14)),s=u(n(3)),l=u(n(11));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var h={HU:{x:"Q/I",y:"U/I",z:"JD",r_x:"E_Q/I",r_y:"E_U/I",H:"V-J",V:"Flx(V)",PA:"PA",PD:"PD"},AUPolar:{x:"< q >",y:"< u >",z:"JD",r_x:"rms(q)",r_y:"rms(u)",PA:"PA",PD:"PD"},AUPhoto:{z:"JD",V:"V"}},f=["x","y","z","r_x","r_y","H","V","PA","PD"];function d(t){for(var e=[],n={},i=0;i<t.length;i++){e[i]={};var r="Q/I"in t[i]||"< q >"in t[i],a="Flx(V)"in t[i]||"V"in t[i];if(r&&a)for(var o in h.HU){if(h.HU[o]in t[i])e[i][o]=t[i][h.HU[o]];else if("PA"===h.HU[o]){var s=.5*Math.atan2(t[i]["U/I"],t[i]["Q/I"])*180/Math.PI;s<0&&(s+=180),e[i][o]=s}else"PD"===h.HU[o]&&(e[i][o]=100*Math.sqrt(Math.pow(t[i]["Q/I"],2)+Math.pow(t[i]["U/I"],2)));(!n[o]||n[o].indexOf(h.HU[o])<0)&&(n[o]||(n[o]=[]),n[o].push(h.HU[o]))}else if(r)for(var l in h.AUPolar)if("z"==l)e[i][l]=t[i][h.AUPolar[l]]-245e4,(!n[l]||n[l].indexOf(h.AUPolar[l])<0)&&(n[l]||(n[l]=[]),n[l].push(h.AUPolar[l]));else{if(h.AUPolar[l]in t[i])e[i][l]=t[i][h.AUPolar[l]]||0;else if("PA"===h.AUPolar[l]){var u=.5*Math.atan2(t[i]["< u >"],t[i]["< q >"])*180/Math.PI;u<0&&(u+=180),e[i][l]=u}else"PD"===h.AUPolar[l]&&(e[i][l]=100*Math.sqrt(Math.pow(t[i]["< q >"],2)+Math.pow(t[i]["< u >"],2)));(!n[l]||n[l].indexOf(h.AUPolar[l])<0)&&(n[l]||(n[l]=[]),n[l].push(h.AUPolar[l]))}else if(a)for(var c in h.AUPhoto)"z"==c?(e[i][c]=t[i][h.AUPhoto[c]]-245e4,(!n[c]||n[c].indexOf(h.AUPhoto[c])<0)&&(n[c]||(n[c]=[]),n[c].push(h.AUPhoto[c]))):"V"===c?(e[i][c]=Math.pow(10,-1*(t[i][h.AUPhoto[c]]+11.758)/2.5),(!n[c]||n[c].indexOf(h.AUPhoto[c])<0)&&(n[c]||(n[c]=[]),n[c].push(h.AUPhoto[c]))):(e[i][c]=t[i][h.AUPhoto[c]]||0,(!n[c]||n[c].indexOf(h.AUPhoto[c])<0)&&(n[c]||(n[c]=[]),n[c].push(h.AUPhoto[c])));e[i].source=t[i].source}return[e,n]}function p(t,e){for(var n={min:{},max:{},mean:{},std:{}},a=function(a){var o=t[a],s=r.extent(e,(function(t){return t[o]})),l=i(s,2);n.min[o]=l[0],n.max[o]=l[1],n.mean[o]=r.mean(e,(function(t){return t[o]})),n.std[o]=r.deviation(e,(function(t){return t[o]}))},o=0;o<t.length;o++)a(o);var s=Math.max(Math.abs(n.mean.x-3*n.std.x),Math.abs(n.mean.x+3*n.std.x)),u=Math.max(Math.abs(n.mean.y-3*n.std.y),Math.abs(n.mean.y+3*n.std.y)),c=Math.max(s,u),h=Math.round(c*Math.pow(10,2-Math.ceil(Math.log10(c))));return n.range=l.default.getGridSize()/(5*Math.ceil(h/5)*Math.pow(10,-(2-Math.ceil(Math.log10(c))))),n}function m(t){var e=[],n=t[0].z,i=[],r=[],o=[],s=[];t.forEach((function(t){"x"in t&&(i.push(new a.Vector3(t.x,t.y,t.z)),r.push(new a.Vector3(t.r_x,t.r_y,t.z)),s.push(new a.Vector3(t.PD,t.PA,t.z))),"V"in t&&o.push(new a.Vector3(t.H,t.V,t.z)),e.push(new a.Vector3(0,0,t.z-n))}));var l={};return l.position=new a.CatmullRomCurve3(i,!1,"catmullrom"),l.radius=new a.CatmullRomCurve3(r,!1,"catmullrom"),l.color=new a.CatmullRomCurve3(o,!1,"catmullrom"),l.line=new a.CatmullRomCurve3(e,!1,"catmullrom"),l.PDPA=new a.CatmullRomCurve3(s,!1,"catmullrom"),{position:i,radius:r,color:o,spline:l}}},function(t,e,n){(function(t){var i=n(12),r=n(128),a=e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?i.Buffer:void 0,l=(s?s.isBuffer:void 0)||r;t.exports=l}).call(this,n(33)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var i=n(36),r=n(140),a=n(141),o=n(142),s=n(143),l=n(144);function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=s,u.prototype.set=l,t.exports=u},function(t,e,n){var i=n(135),r=n(136),a=n(137),o=n(138),s=n(139);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(29);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},function(t,e,n){var i=n(21)(Object,"create");t.exports=i},function(t,e,n){var i=n(157);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var i=n(172),r=n(58),a=n(173),o=n(174),s=n(175),l=n(20),u=n(77),c=u(i),h=u(r),f=u(a),d=u(o),p=u(s),m=l;(i&&"[object DataView]"!=m(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=m(new r)||a&&"[object Promise]"!=m(a.resolve())||o&&"[object Set]"!=m(new o)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,n){var i=n(20),r=n(16);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},function(t,e,n){var i=n(41);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var i=n(72),r=n(197),a=n(24);t.exports=function(t){return a(t)?i(t,!0):r(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addCommentData=function(t){(i=JSON.parse(localStorage.getItem("privateComment"))).push(t),localStorage.setItem("privateComment",JSON.stringify(i))},e.getUniqueId=function(){return(new Date).getTime().toString(16)+Math.floor(1e3*Math.random()).toString(16)},e.getDataFromLocalStorage=function(t){return JSON.parse(localStorage.getItem(t))},e.deletePrivateComment=function(t){for(var e=!1,n=0;n<i.length;n++)if(i[n].id===t){i.splice(n,1),e=!0;break}return localStorage.setItem("privateComment",JSON.stringify(i)),e},e.getPrivateCommentFromId=function(t){for(var e=0;e<i.length;e++)if(i[e].id===t)return i[e];return-1},e.exportPrivateComment=function(t){for(var e=[],n=function(n){e.push(i.filter((function(e){if(e.id===t[n])return!0}))[0])},a=0;a<t.length;a++)n(a);var o="";for(a=0;a<e.length;a++){for(var s in e[a])o+="timeStamp"===s?e[a][s].replace(", ","_"):e[a][s]+",";o=o.substring(0,o.length-1),o+="\n"}var l="privateComment_"+r()+".csv",u=new Blob([o],{type:"text/csv"}),c=(window.URL||window.webkitURL).createObjectURL(u),h=document.createElement("a");h.download=decodeURI(l),h.href=c,h.click()},e.createDateLabel=r;var i=JSON.parse(localStorage.getItem("privateComment"));function r(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),r=t.getHours(),a=t.getMinutes(),o=t.getSeconds();return e+(n=n<10?"0"+n.toString():n.toString())+(i=i<10?"0"+i.toString():i.toString())+(r=r<10?"0"+r.toString():r.toString())+(a=a<10?"0"+a.toString():a.toString())+(o=o<10?"0"+o.toString():o.toString())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.makeQueryfromQBE=function(t,e,n,i){var r=[Math.floor(e[0]),Math.ceil(e[1])],a=f.default.getData(t).data.meta.min.z,o=f.default.getData(t).data.lookup,s={},l=[];for(var u in o)n.indexOf(u)<0&&l.push(u);if("rectangular"===i){for(var c=0;c<l.length;c++)s[l[c]]=[];for(var h=r[0];h<=r[1];h++){var d=f.default.getValues(t,h-a);for(var p in s)"z"!==p?s[p].push(d[p]):"z"===p&&s[p].push(h)}s.minJD=r[0],s.arrayLength=r[1]-r[0]+1}else if("polar"===i)if(l.indexOf("x")<0||l.indexOf("y")<0)alert("To use the polar coordinate for computing similarities, you cannot ignore the Stokes parameters (Q/I and U/I).");else{for(var m=0;m<l.length;m++)"x"===l[m]?s.r=[]:"y"===l[m]?s.theta=[]:s[l[m]]=[];for(var v=r[0];v<=r[1];v++){var g=f.default.getValues(t,v-a),y=Math.sqrt(Math.pow(g.x,2)+Math.pow(g.y,2)),b=L(Math.atan2(g.x,g.y));for(var x in s)"r"===x?s[x].push(y):"theta"===x?s[x].push(b):"z"!==x?s[x].push(g[x]):"z"===x&&s[x].push(v)}s.minJD=r[0],s.arrayLength=r[1]-r[0]+1}return s},e.makeQueryPolarQBS=function(t){var e=Object.keys(t),n={};if(e.indexOf("x")<0||e.indexOf("y")<0)alert("To use the polar coordinate for computing similarities, you cannot ignore the Stokes parameters (Q/I and U/I).");else if(t.x.indexOf(null)>=0||t.y.indexOf(null)>=0)alert("To use the polar coordinate for computing similarities, you have to assign Q/I and U/I to x axis, y axis, or width.");else{for(var i=[],r=[],a=0;a<t.arrayLength;a++){var o=Math.sqrt(Math.pow(t.x[a],2)+Math.pow(t.y[a],2)),s=L(Math.atan2(t.x[a],t.y[a]));i.push(o),r.push(s)}for(var l in n.r=i,n.theta=r,t)"x"!==l&&"y"!==l&&(n[l]=t[l])}return n},e.runMatching=function(t,e,n,i,r,a,o,s){var l=[],u=void 0;switch(r){case"Euclidean":u=E}i&&(t=g(t));for(var c=function(r){var c=f.default.getDataArray(e[r],1);if(t.r){for(var h={},d=[],p=[],m=0;m<c.arrayLength;m++)d.push(Math.sqrt(Math.pow(c.x[m],2)+Math.pow(c.y[m],2))),p.push(L(Math.atan2(c.x[m],c.y[m])));for(var v in h.r=d,h.theta=p,c)"x"!==v&&"y"!==v&&(h[v]=c[v]);c=h}var E=c.z[0];switch(n){case"DTWI":if(a>0)for(var M=0;M<c.arrayLength-s[0];){for(var T=[],C=s[0];C<=s[1]&&!(M+C>c.arrayLength-1);C++){var k=0,P={};for(var A in t)if(Array.isArray(c[A])&&"z"!==A){var O=c[A].slice(M,M+C);i&&(O="theta"!==A?g(O):y(O));var I=_(t[A],O,a,u),N=S(I);P[A]=N,k+=I[t[A].length-1][O.length-1]}T.push({dist:k,path:P})}for(var R=0,D=1/0,z=0;z<T.length;z++)T[z].dist<D&&(D=T[z].dist,R=z);l.push({id:r,start:M+E,period:s[0]+R,distance:D,path:T.path}),M+=o}else for(var B=0;B<c.arrayLength-s[0];){var F={},j=B+s[1]<c.arrayLength-1?s[1]:c.arrayLength-B;for(var V in t)if(Array.isArray(c[V])&&"z"!==V){var U=c[V].slice(B,B+j);i&&(U="theta"!==V?g(U):y(U));var H=b(t[V],U,u);F[V]=H}for(var G=j-s[0]+1,W=[],q=1;q<=G;q++){var $=0;for(var Q in F)$+=F[Q][t.arrayLength-1][F[Q][0].length-1-G+q];W.push($)}for(var Y=0,X=1/0,Z=0;Z<W.length;Z++)W[Z]<X&&(X=W[Z],Y=Z);var J={};for(var K in F){for(var tt=[],et=0;et<F[K].length;et++)tt.push(F[K].slice(0,F[K][et].length-1-G+(Y+1)+1));J[K]=S(tt)}l.push({id:r,start:B+E,period:s[0]+Y,distance:X,path:J}),B+=o}break;case"DTWD":var nt=[];for(var it in t)Array.isArray(t[it])&&"z"!==it&&nt.push(it);a>0?function(){for(var e=0;e<c.arrayLength-s[0];){for(var n=[],h=function(r){if(e+r>c.arrayLength-1)return"break";var o={};nt.forEach((function(t){o[t]=c[t].slice(e,e+r)})),o.arrayLength=r,i&&(o=g(o)),n.push(w(t,o,a,nt,u))},f=s[0];f<=s[1];f++){if("break"===h(f))break}for(var d=0,p=1/0,m=0;m<n.length;m++)n[m][n[m].length-1][n[m][0].length-1]<p&&(p=n[m][n[m].length-1][n[m][0].length-1],d=m);var v=S(n[d]);l.push({id:r,start:e+E,period:s[0]+d,distance:p,path:v}),e+=o}}():function(){for(var e=0,n=function(){var n={},a=e+s[1]<c.arrayLength-1?s[1]:c.arrayLength-e;nt.forEach((function(t){n[t]=c[t].slice(e,e+a)})),n.arrayLength=a,i&&(n=g(n));for(var h=x(t,n,nt,u),f=a-s[0]+1,d=[],p=1;p<=f;p++)d.push(h[t.arrayLength-1][n.arrayLength-1-f+p]);for(var m=0,v=1/0,y=1;y<d.length;y++)d[y]<v&&(v=d[y],m=y);for(var b=[],_=0;_<h.length;_++)b.push(h[_].slice(0,n.arrayLength-1-f+(m+1)+1));var w=S(b);l.push({id:r,start:e+E,period:s[0]+m,distance:v,path:w}),e+=o};e<c.arrayLength-s[0];)n()}()}},h=0;h<e.length;h++)c(h);return l},e.removeOverlappingQBE=function(t,e,n){for(var i=[],r=e[1]-e[0],a=0;a<n.length;a++)if(t===n[a].id){var o=0;e[0]<=n[a].start&&n[a].start<=e[1]?o=e[1]-n[a].start:e[0]<=n[a].start+n[a].period&&n[a].start+n[a].period<=e[1]?o=n[a].start+n[a].period-e[0]:n[a].start<=e[0]&&e[1]<=n[a].start+n[a].period?o=r:e[0]<=n[a].start&&n[a].start+n[a].period<=e[1]&&(o=n[a].period),o/r<.3&&i.push(n[a])}else i.push(n[a]);return i},e.runMatchingSketch=function(t,e,n,i,r,a,o,s){var l=[],u=void 0;switch(r){case"Euclidean":u=E}i&&(t=g(t));for(var c=function(r){var c=e[r],h=f.default.getDataArray(c,1);if(t.r){for(var d={},p=[],m=[],v=0;v<h.arrayLength;v++)p.push(Math.sqrt(Math.pow(h.x[v],2)+Math.pow(h.y[v],2))),m.push(L(Math.atan2(h.x[v],h.y[v])));for(var y in d.r=p,d.theta=m,h)"x"!==y&&"y"!==y&&(d[y]=h[y]);h=d}var b=h.z[0];switch(n){case"DTWD":var _=[],E=[];for(var M in t)Array.isArray(t[M])&&t[M].indexOf(null)<0&&"z"!==M?_.push(M):Array.isArray(t[M])&&t[M].indexOf(null)>=0&&E.push(M);a>0?function(){for(var e=0;e<h.arrayLength-s[0];){for(var n=[],r=function(r){if(e+r>h.arrayLength-1)return"break";var o={};_.forEach((function(t){o[t]=h[t].slice(e,e+r)})),o.arrayLength=r,i&&(o=g(o)),n.push(w(t,o,a,_,u))},f=s[0];f<=s[1];f++){if("break"===r(f))break}var d=0,p=1/0;for(f=0;f<n.length;f++)n[f][n[f].length-1][n[f][0].length-1]<p&&(p=n[f][n[f].length-1][n[f][0].length-1],d=f);var m=S(n[d]),v=!0;for(var y in E){for(var x=0;x<t[E[y]].length;x++){if(t[E[y]][x])for(var M=0;M<m.length&&!(m[M][1]<x);M++)if(m[M][1]===x){var T=h[E[y]][e+m[M][0]];if(T<t[E[y]][x][0]||t[E[y]][x][1]<T){v=!1;break}}if(!v)break}if(!v)break}v&&p!==1/0&&l.push({id:c,start:e+b,period:s[0]+d,distance:p,path:m}),e+=o}}():function(){for(var e=0,n=function(){var n={},r=e+s[1]<h.arrayLength-1?s[1]:h.arrayLength-e;_.forEach((function(t){n[t]=h[t].slice(e,e+r)})),n.arrayLength=r,i&&(n=g(n));for(var a=x(t,n,_,u),f=r-s[0]+1,d=[],p=1;p<=f;p++)d.push(a[t.arrayLength-1][n.arrayLength-1-f+p]);for(var m=0,v=1/0,y=0;y<d.length;y++)d[y]<v&&(v=d[y],m=y);for(var w=[],M=0;M<a.length;M++)w.push(a[M].slice(0,n.arrayLength-1-f+(m+1)+1));var T=S(w),C=!0;for(var k in E){for(var P=0;P<t[E[k]].length;P++){if(t[E[k]][P])for(var A=0;A<T.length&&!(T[A][1]<P);A++)if(T[A][1]===P){var O=h[E[k]][e+T[A][0]];if(O<t[E[k]][P][0]||t[E[k]][P][1]<O){C=!1;break}}if(!C)break}if(!C)break}C&&v!==1/0&&l.push({id:c,start:e+b,period:s[0]+m,distance:v,path:T}),e+=o};e<h.arrayLength-s[0];)n()}()}},h=0;h<e.length;h++)c(h);return l},e.DTWSimple=b,e.DTWSimpleMD=x,e.DTW=_,e.DTWMD=w,e.sortResults=M,e.setDefaltOrderOfResults=function(){var t=d.default.getMode(),e=document.getElementById("resultOrderList").options,n=0;if("AE"===t){for(n=0;n<e.length;n++)if("timeStamp"===e[n].value){document.getElementById("resultOrderList").selectedIndex=n;break}}else if("QBE"===t||"QBS"===t)for(n=0;n<e.length;n++)if("distance"===e[n].value){document.getElementById("resultOrderList").selectedIndex=n;break}u.updateOrder(e[n].value)},e.showExtractionResults=function(){"none"!==$("#QBESourceMain").css("display")&&c.toggleSourcePanel();var t=d.default.getOrder(),e=d.default.getKValue(),n=d.default.getDistanceThreshold(),i=d.default.getExtractionResults();if($("#topKResults").prop("disabled"))i.sort(M(t));else{var s=d.default.getMode();"QBE"===s||"QBS"===s?i.sort(M("distance")):"AE"===s&&d.default.getAEOptionStatus("anomaly")&&i.sort(M("anomalyDegree")),""!==e&&(i=i.slice(0,e)),i.sort(M(t))}""!==n&&(i=i.filter((function(t){return t.distance<n})));u.updateShownResults(i);for(var h=d.default.getTarget(),m={},v={},g={},y={},b=0;b<h.length;b++)m[String(h[b])]=p.default.getCameraProp(h[b]),v[String(h[b])]=p.default.getFocused(h[b]),g[String(h[b])]=f.default.getData(h[b]).data.meta.min.z,y[String(h[b])]=document.getElementById("TimeTubes_viewport_"+h[b]),l.resetCamera(h[b]);var x=document.getElementById("resultsArea");for(;x.firstChild;)a.default.unmountComponentAtNode(x.firstChild),x.removeChild(x.firstChild);for(var _=0;_<i.length;_++){var w=document.createElement("div");w.id="resultSummaryHolder_"+_,x.appendChild(w);var S=i[_];l.takeSnapshot(S.id,S.start-g[String(S.id)],S.period);var E=y[String(S.id)].height,T=y[String(S.id)].width,C=new Image;C.src=y[String(S.id)].toDataURL(),C.height=E,C.width=T,a.default.render(r.default.createElement(o.default,{key:_,id:S.id,thumbnail:C,result:S,period:[S.start,S.start+S.period],distance:S.distance,path:S.path,rank:_}),w)}for(var k=0;k<h.length;k++)l.recoverTube(h[k],m[String(h[k])],v[String(h[k])]);i.length>0?$("#matchingStatus").text(i.length+" results are found"):$("#matchingStatus").text("No results are found")},e.updateSortResultsPulldown=function(){var t=[];t.push("Time stamp"),t.push("Data");var e=[];"AE"===d.default.getMode()?(d.default.getAEOptionStatus("flare")&&(t.push("Significance"),t.push("Intensity")),d.default.getAEOptionStatus("rotation")&&(t.push("Angle"),t.push("Diameter"),t.push("Period")),d.default.getAEOptionStatus("anomaly")&&t.push("Anomaly degree")):t.push("Distance");for(var n=0;n<t.length;n++){var i=c.transformSentenceToCamel(t[n]);e.push(r.default.createElement("option",{value:i,key:i},t[n]))}return e},e.extractAnomalies=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n],r=f.default.getData(i),a=r.data.spatial,o=0;o<a.length-1;o++){var s=a[o].z,l=a[o+1].z,u=f.default.getValues(i,s-a[0].z),c=f.default.getValues(i,l-a[0].z),h=100*Math.sqrt(Math.pow((c.x-u.x)/(r.data.meta.max.x-r.data.meta.min.x),2)+Math.pow((c.y-u.y)/(r.data.meta.max.y-r.data.meta.min.y),2))/(l-s);0===h&&(h=1);var d=Math.abs(c.V-u.V)/(r.data.meta.max.V-r.data.meta.min.V)*100/(l-s);0===d&&(d=1);var p=Math.abs(c.H-u.H)/(r.data.meta.max.H-r.data.meta.min.H)*100/(l-s);0===p&&(p=1),e.push({id:i,start:s,anomalyDegree:h*d*p})}return e},e.extractFlares=function(t,e,n,i){for(var r=[],a=0;a<t.length;a++){for(var o=t[a],l=f.default.getData(o),u=[],c=void 0,h=0;h<l.data.color.length;h++){switch(e){case"AveMaximum":c=T(o,h,n);break;case"AveAve":c=C(o,h,n);break;case"AveDist":c=k(o,h,n)}u.push({index:h,significance:c,V:l.data.color[h].y})}for(var d=u.filter((function(t){return t.significance>0})),p=s.mean(d,(function(t){return t.significance})),m=s.deviation(d,(function(t){return t.significance})),v=0;v<d.length;v++)d[v].significance-p>i*m&&r.push({id:o,start:l.data.color[d[v].index].z,significance:d[v].significance,V:d[v].V})}return r},e.extractFlaresGESD=function(t,e){for(var n=0;n<t.length;n++)for(var i=f.default.getData(n),r=i.data.meta.mean.V+i.data.meta.std.V,a=0;a<i.color.length;a++)i.color[a].V>r&&0},e.extractFlaresManual=function(t,e){for(var n=[],i=0;i<t.length;i++)for(var r=t[i],a=f.default.getData(r),o=0;o<a.data.color.length;o++)a.data.color[o].y>=e&&n.push({id:r,start:a.data.color[o].z,V:a.data.color[o].y});return n},e.extractRotations=function(t,e,n,i,r,a){for(var o=[],s=0;s<t.length;s++){for(var l=t[s],u=f.default.getData(l).data.position,c=[],d=0;d<u.length;d++){for(var p=[],m=e[0];m<=e[1]&&!(u[d].z+m>u[u.length-1].z);m++){for(var v=!1,g=1;d+g<u.length&&u[d+g].z-u[d].z<m;g++)if(u[d+g].z-u[d+g-1].z>5){v=!0;break}var y={x:0,y:0},b=[];if(0===r){for(var x=0;x<m;x++){var _=f.default.getValues(l,u[d].z+x-u[0].z);b.push(_),y.x+=_.x,y.y+=_.y}y.x/=m,y.y/=m}else{for(var w=8/m,S=-4,E=0,M=0;M<m;M++){var T=f.default.getValues(l,u[d].z+M-u[0].z);b.push(T);var C=h.getGaussValue(S,r);y.x+=C*T.x,y.y+=C*T.y,E+=C,S+=w}y.x/=E,y.y/=E}for(var k={x:0,y:0},L={x:b[0].x,y:b[0].y},I={x:b[0].x,y:b[0].y},N=[],R=[],D=0;D<m;D++){var z={x:b[D].x,y:b[D].y},B=P(z,y),F=A(z,y);N.push({z:b[D].z,angle:B}),R.push({z:b[D].z,degree:F}),k.x+=Math.pow(b[D].x-y.x,2),k.y+=Math.pow(b[D].y-y.y,2),b[D].x<L.x&&(L.x=b[D].x),I.x<b[D].x&&(I.x=b[D].x),b[D].y<L.y&&(L.y=b[D].y),I.y<b[D].y&&(I.y=b[D].y)}var j={x:Math.sqrt(k.x/m),y:Math.sqrt(k.y/m)};if(!v&&(I.x-L.x>n||I.y-L.y>n)){var V=f.default.getData(l).data.meta.std.x,U=f.default.getData(l).data.meta.std.y;switch(a){case"no":break;case"and":if(!(V<j.x&&U<j.y))continue;break;case"or":if(!(V<j.x||U<j.y))continue;break;case"x":if(!(V<j.x))continue;break;case"y":if(!(U<j.y))continue}for(var H=0,G=N[0],W=N[0].angle,q=0;q<m;q++){var $=void 0,Q=.1*G.angle+.9*W;Math.abs(N[q].angle-G.angle)>180?($=Q-W<0?G.angle>N[q].angle?-1*(G.angle-N[q].angle):-1*(G.angle+360-N[q].angle):G.angle>N[q].angle?N[q].angle+360-G.angle:N[q].angle-G.angle,W=1===O(N[q].angle)&&4===O(N[q-1].angle)||4===O(N[q].angle)&&1===O(N[q-1].angle)?N[q].angle:Q):($=N[q].angle-G.angle,W=Q),H+=$,G=N[q]}Math.abs(H)>i&&p.push({id:l,start:u[d].z,angle:Math.abs(H),period:m,center:y,diameter:{x:I.x-L.x,y:I.y-L.y},direction:H<0?"clockwise":"counterclockwise"})}}if(p.length>0){for(var Y=Math.abs(p[0].angle),X=0,Z=1;Z<p.length;Z++)Y<Math.abs(p[Z].angle)&&(Y=Math.abs(p[Z].angle),X=Z);c.push(p[X])}}if(c.length>0){for(var J=0,K=1;K<c.length;K++)c[K].start-c[K-1].start<e[0]?c[J].angle<c[K].angle&&(J=K):(o.push(c[J]),J=K);o.push(c[J])}}return o},e.convertRadToDeg=L;var r=v(n(0)),a=v(n(46)),o=v(n(302)),s=m(n(7)),l=m(n(17)),u=m(n(6)),c=m(n(22)),h=m(n(104)),f=v(n(3)),d=v(n(4)),p=v(n(11));function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function v(t){return t&&t.__esModule?t:{default:t}}function g(t){var e=void 0;if(Array.isArray(t)){e=[];for(var n=Math.min.apply(null,t),r=Math.max.apply(null,t),a=0;a<t.length;a++)e.push((t[a]-n)/(r-n))}else if("object"===(void 0===t?"undefined":i(t)))for(var o in e={},t)Array.isArray(t[o])&&t[o].indexOf(null)<0?"theta"!==o?function(){var n=Math.min.apply(null,t[o]),i=Math.max.apply(null,t[o]),r=t[o].map((function(t){return(t-n)/(i-n)}));e[o]=r}():e[o]=y(t[o]):e[o]=t[o];return e}function y(t){for(var e=[],n=[],i=(t[0],O(t[0])),r=0,a=0;a<t.length;a++){var o=O(t[a]);1===i&&4===o?r-=360:4==i&&1===o&&(r+=360),n.push(t[a]+r),t[a]+r,i=o}for(var s=Math.min.apply(null,n),l=Math.max.apply(null,n),u=0;u<n.length;u++)e.push((n[u]-s)/(l-s));return e}function b(t,e,n){for(var i=[],r=0;r<t.length;r++){i[r]=[];for(var a=0;a<e.length;a++)i[r][a]=1/0}for(var o=0;o<t.length;o++)for(var s=0;s<e.length;s++)i[o][s]=o>0?s>0?n(t[o],e[s])+Math.min(i[o-1][s],i[o][s-1],i[o-1][s-1]):n(t[o],e[s])+i[o-1][s]:s>0?n(t[o],e[s])+i[o][s-1]:0;return i}function x(t,e,n,i){for(var r=[],a=0;a<t.arrayLength;a++){r[a]=[];for(var o=0;o<e.arrayLength;o++)r[a][o]=1/0}for(var s=function(a){var o=[];n.forEach((function(e){o.push(t[e][a])}));for(var s=function(t){var s=[];n.forEach((function(n){s.push(e[n][t])})),r[a][t]=a>0?t>0?i(o,s)+Math.min(r[a-1][t],r[a][t-1],r[a-1][t-1]):i(o,s)+r[a-1][t]:t>0?i(o,s)+r[a][t-1]:0},l=0;l<e.arrayLength;l++)s(l)},l=0;l<t.arrayLength;l++)s(l);return r}function _(t,e,n,i){var r=[];n=Math.max(n,Math.abs(t.length-e.length));for(var a=0;a<t.length;a++){r[a]=[];for(var o=0;o<e.length;o++)r[a][o]=1/0}r[0][0]=0;for(var s=1;s<t.length;s++)for(var l=Math.max(1,s-n),u=Math.min(e.length,s+n),c=l;c<u;c++)r[s][c]=0;for(var h=1;h<t.length;h++)for(var f=Math.max(1,h-n),d=Math.min(e.length,h+n),p=f;p<d;p++)r[h][p]=i(t[h],e[p])+Math.min(r[h-1][p],r[h][p-1],r[h-1][p-1]);return r}function w(t,e,n,i,r){var a=[];n=Math.max(n,Math.abs(t.arrayLength-e.arrayLength));for(var o=0;o<t.arrayLength;o++){a[o]=[];for(var s=0;s<e.arrayLength;s++)a[o][s]=1/0}a[0][0]=0;for(var l=1;l<t.arrayLength;l++)for(var u=Math.max(1,l-n),c=Math.min(e.arrayLength,l+n),h=u;h<c;h++)a[l][h]=0;for(var f=function(o){var s=Math.max(1,o-n),l=Math.min(e.arrayLength,o+n),u=[];i.forEach((function(e){u.push(t[e][o])}));for(var c=function(t){var n=[];i.forEach((function(i){n.push(e[i][t])})),a[o][t]=r(u,n)+Math.min(a[o-1][t],a[o][t-1],a[o-1][t-1])},h=s;h<l;h++)c(h)},d=1;d<t.arrayLength;d++)f(d);return a}function S(t){var e=[],n=t.length-1,i=t[0].length-1;for(e.push([i,n]);n>0&&i>0;)0===n?i--:0===i?n--:t[n-1][i]===Math.min(t[n-1][i-1],t[n-1][i],t[n][i-1])?n--:t[n][i-1]===Math.min(t[n-1][i-1],t[n-1][i],t[n][i-1])?i--:(n--,i--),e.push([i,n]);return e.push([0,0]),e}function E(t,e){if(Array.isArray(t)){for(var n=0,i=0;i<t.length;i++)n+=Math.pow(t[i]-e[i],2);return Math.sqrt(n)}return Math.abs(t-e)}function M(t){var e=void 0;switch(t){case"distance":e=function(t,e){return t.distance-e.distance};break;case"timeStamp":e=function(t,e){var n=t.start-e.start;return 0===n&&(n=t.id-e.id),n};break;case"data":e=function(t,e){var n=t.id-e.id;return 0===n&&(n=t.distance-e.distance),n};break;case"significance":e=function(t,e){return t.significance-e.significance};break;case"intensity":e=function(t,e){return t.intensity-e.intensity};break;case"angle":e=function(t,e){return t.angle-e.angle};break;case"diameter":e=function(t,e){return t.diameter-e.diameter};break;case"period":e=function(t,e){return t.period-e.period};break;case"anomalyDegree":e=function(t,e){return e.anomalyDegree-t.anomalyDegree}}return e}function T(t,e,n){for(var i=f.default.getData(t).data.color,r=i[e].y,a=i.slice(e-n>=0?e-n:0,e).map((function(t){return t.y})),o=0;o<a.length;o++)a[o]=r-a[o];for(var l=i.slice(e+1,e+n<i.length?e+n+1:i.length-1).map((function(t){return t.y})),u=0;u<l.length;u++)l[u]=r-l[u];var c=s.max(a),h=s.max(l);return c?h?(c+h)/2:c:h}function C(t,e,n){for(var i=f.default.getData(t).data.color,r=i[e].y,a=i.slice(e-n>=0?e-n:0,e).map((function(t){return t.y})),o=0;o<a.length;o++)a[o]=r-a[o];for(var l=i.slice(e+1,e+n<i.length?e+n+1:i.length-1).map((function(t){return t.y})),u=0;u<l.length;u++)l[u]=r-l[u];var c=s.mean(a),h=s.mean(l);return c?h?(c+h)/2:c:h}function k(t,e,n){var i=f.default.getData(t).data.color,r=i[e].y,a=i.slice(e-n>=0?e-n:0,e).map((function(t){return t.y})),o=i.slice(e+1,e+n<i.length?e+n+1:i.length-1).map((function(t){return t.y})),l=r-s.mean(a),u=r-s.mean(o);return l?u?(l+u)/2:l:u}function P(t,e){var n=Math.atan2(t.y-e.y,t.x-e.x);return n>=0?180*n/Math.PI:180*(2*Math.PI+n)/Math.PI}function A(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function O(t){return t>=0&&t<90?1:t>=90&&t<180?2:t>=180&&t<270?3:4}function L(t){return t>=0?180*t/Math.PI:180*(2*Math.PI+t)/Math.PI}},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}}(),t.exports=n(108)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=b(n(0)),a=y(n(15)),o=b(n(118)),s=y(n(17)),l=y(n(65)),u=y(n(31)),c=y(n(6)),h=y(n(44)),f=b(n(11)),d=b(n(3)),p=b(n(4)),m=b(n(284)),v=b(n(103)),g=b(n(285));function y(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function b(t){return t&&t.__esModule?t:{default:t}}var x=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.id=t.id,n.data=t.data,n.canvas,n.cameraProp=f.default.getCameraProp(t.id),n.tubeNum=16,n.segment=16,n.division=5,n.currentHighlightedPlot=0,n.drag=!1,n.visualQuery=!1,n.dragSelection=!1,n.selector=!0,n.averagePeriod=0,n.animationPara={flag:!1,dep:0,dst:0,speed:40,now:0},n.raycaster=new a.Raycaster,n.vertex=document.getElementById("vertexShader_tube").textContent,n.fragment=document.getElementById("fragmentShader_tube").textContent,n.lock=!1,n.opacityCurve=f.default.getOpacityCurve("Default"),n.rotationPeriod=null,n.wheelInterval=1,n.data.merge){n.plotColor=[],n.idNameLookup={};for(var i=n.data.name.split(","),r=0;r<i.length;r++){var o=d.default.getIdFromName(i[r]);n.idNameLookup[i[r]]=r;var s=i[r].split("+");if(s.length>1)for(var l=0;l<s.length;l++)n.idNameLookup[s[l]]=r;n.plotColor.push(f.default.getPlotColor(o))}f.default.setPlotColorbyIdx(n.id,n.plotColor)}else f.default.setPlotColorbyIdx(n.id,(f.default.getInitColorIdx()+n.id)%f.default.getPresetNum()),n.plotColor=f.default.getPlotColor(n.id);return n.state={width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){var t=this;return this.updateSize(this.props.width,this.props.height),r.default.createElement("div",{style:{position:"relative",float:"left"}},r.default.createElement("div",{className:"TimeTubes",style:{width:this.props.width+"px",height:this.props.height+"px"},ref:function(e){t.mount=e}}),r.default.createElement(o.default,null))}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"componentDidMount",value:function(){var t=this,e=this.mount.clientWidth,n=this.mount.clientHeight;this.scene=new a.Scene,this.setCameras(e,n),this.renderer=new a.WebGLRenderer({preserveDrawingBuffer:!0}),this.renderer.setClearColor("#000000"),this.renderer.setSize(e,n),this.renderer.localClippingEnabled=!0,this.renderer.domElement.id="TimeTubes_viewport_"+this.id,this.renderer.domElement.className="TimeTubes_viewport",this.canvas=this.renderer.domElement,this.initQBEView(),this.mount.appendChild(this.renderer.domElement),this.renderScene(),this.start(),this.clippingPlane=new a.Plane(new a.Vector3(0,0,-1),0),this.clippingPlane2=new a.Plane(new a.Vector3(0,0,1),0);var i=new a.DirectionalLight(16777215,.7);i.position.set(-20,40,60),this.scene.add(i);var r=new a.AmbientLight(2697513);this.scene.add(r),this.addControls();var o=document.querySelector("#TimeTubes_viewport_"+this.id),l=this.onMouseWheel(),u=this.onMouseDown(),c=this.onMouseMove(),h=this.onMouseUp(),m=this.onMouseClick();o.addEventListener("wheel",l.bind(this),!1),o.addEventListener("mousedown",u.bind(this),!1),o.addEventListener("mousemove",c.bind(this),!1),o.addEventListener("mouseup",h.bind(this),!1),o.addEventListener("click",m.bind(this),!1),this.tubeGroup=new a.Group,this.scene.add(this.tubeGroup),(new a.TextureLoader).load("img/1_256.png",function(t){s.setTexture(this.id,t),this.drawTube(t)}.bind(this)),this.drawGrid(2*f.default.getGridSize(),10),this.drawLabel(f.default.getGridSize()/this.data.meta.range),this.drawAxis(),this.drawPlot(),this.drawDisk(),this.drawDiskForRotationCenter(),this.drawComment(),this.drawPeriodMarker(),d.default.on("updatePrivateComment",(function(){t.updateComment()})),f.default.on("upload",(function(){t.cameraProp=f.default.getCameraProp(t.id),t.updateCamera()})),f.default.on("updateCamera",(function(e){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.updateCamera())})),f.default.on("reset",(function(e){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),0===t.cameraProp.xpos&&0===t.cameraProp.ypos&&50===t.cameraProp.zpos&&t.resetCamera())})),f.default.on("switch",(function(){t.cameraProp=f.default.getCameraProp(t.id),t.switchCamera()})),f.default.on("searchTime",(function(e,n){e===t.id&&t.searchTime(n)})),f.default.on("switchGrid",(function(e,n){e===t.id&&(t.grid.visible=n)})),f.default.on("switchLabel",(function(e,n){e===t.id&&(t.labelGroup.visible=n)})),f.default.on("switchAxis",(function(e,n){e===t.id&&(t.axis.visible=n)})),f.default.on("switchPlot",(function(e,n){e===t.id&&(t.plot.visible=n)})),f.default.on("changeBackground",(function(e,n){e===t.id&&(t.scene.background=new a.Color(Number(n)))})),f.default.on("clipTube",(function(e,n){e===t.id&&(t.renderer.localClippingEnabled=n)})),f.default.on("switchShade",(function(e,n){e===t.id&&(t.tube.material.uniforms.shade.value=n)})),f.default.on("changeFar",(function(e,n){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.clippingPlane2.constant=n,t.renderer.clippingPlanes=[t.clippingPlane2],t.renderer.render(t.scene,t.camera))})),f.default.on("updateMinMaxH",(function(e){e===t.id&&t.setMinMaxH(f.default.getMinMaxH(t.id))})),f.default.on("updateMinMaxV",(function(e){e===t.id&&t.setMinMaxV(f.default.getMinMaxV(t.id))})),f.default.on("changePlotColor",(function(e){if(e===t.id)t.plotColor=f.default.getPlotColor(t.id),t.drawPlot();else if(t.data.merge){var n=d.default.getFileName(e);t.data.name.indexOf(n)>=0&&(t.plotColor[t.idNameLookup[n]]=f.default.getPlotColor(e),t.drawPlot())}})),f.default.on("timeFitting",(function(e){if(f.default.getChecked(t.id)){var n=f.default.getFocused(t.id)+t.data.spatial[0].z,i=e;n<t.data.spatial[0].z?i=t.data.spatial[0].z:t.data.spatial[t.data.spatial.length-1].z<n&&(i=t.data.spatial[t.data.spatial.length-1].z),t.lock&&f.default.setLock(t.id,i-t.data.spatial[0].z),t.searchTime(i)}})),f.default.on("lockControl",(function(e,n){!n||e.indexOf(t.id)<0?t.lock=!1:(t.lock=!0,t.resetCamera())})),f.default.on("synchronizeTubes",(function(e,n,i,r){if(t.lock&e!==t.id)if(0!==n){var o=t.data.meta.min.z,s=t.data.meta.max.z,l=n+f.default.getLock(t.id)-f.default.getLock(e)+o;o<=l&&l<=s||(l<o?l=o:s<l&&(l=s)),t.searchTime(l)}else i.equals(new a.Vector3(0,0,0))||(t.controls.object.position.set(i.x,i.y,i.z),t.controls.object.rotation.set(r.x,r.y,r.z))})),f.default.on("updateZoomTimeTubes",(function(e){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.updateCamera())})),f.default.on("takeSnapshot",(function(e,n,i){e===t.id&&(t.deselectAll(),t.tubeGroup.position.z=n,void 0!==i&&(t.clippingPlane2.constant=i,t.renderer.clippingPlanes=[t.clippingPlane2]),t.renderer.render(t.scene,t.camera))})),f.default.on("recoverTube",(function(e,n,i){e===t.id&&(t.cameraProp=f.default.getCameraProp(t.id),t.tubeGroup.position.z=i,t.updateCamera(),t.renderer.clippingPlanes=[])})),f.default.on("showTimeTubesOfTimeSlice",(function(e,n){e===t.id&&(t.resetCamera(),t.tubeGroup.position.z=f.default.getFocused(e),t.clippingPlane2.constant=n[1]-n[0],t.renderer.clippingPlanes=[t.clippingPlane2],t.showPeriod(n))})),f.default.on("updateAveragePeriod",(function(){if(t.averagePeriod=f.default.getAveragePeriod(),t.averagePeriod>0){var e=d.default.getAverage(t.id,t.tubeGroup.position.z,t.averagePeriod);t.disk.visible=!0,t.disk.position.x=e.x*t.data.meta.range,t.disk.position.y=e.y*t.data.meta.range}else t.disk.visible=!1})),f.default.on("updateTexture",(function(e,n){e===t.id&&(t.tube.material.uniforms.texture.value=n)})),f.default.on("showRotationCenter",(function(e,n,i){e===t.id?(t.resetCamera(),t.tubeGroup.position.z=f.default.getFocused(e),t.diskRotation.visible=!0,t.diskRotation.position.x=i.x*t.data.meta.range,t.diskRotation.position.y=i.y*t.data.meta.range,t.rotationPeriod=n,t.clippingPlane2.constant=n[1]-n[0],t.renderer.clippingPlanes=[t.clippingPlane2],t.showPeriod(n)):t.rotationPeriod=null})),f.default.on("switchComment",(function(e,n){e===t.id&&(n?t.comment.visible=!0:(t.comment.visible=!1,t.commentContents.visible=!1))})),f.default.on("updateWheelInterval",(function(){t.wheelInterval=f.default.getWheelInterval()})),p.default.on("switchQueryMode",(function(e){var n=p.default.getSource();"QBE"===e&&"default"!==n?(t.visualQuery=Number(n)===t.id,t.setQBEView(),t.resetSelection()):t.deselectAll()})),p.default.on("updateSource",(function(){var e=p.default.getMode(),n=p.default.getSource();"QBE"===e&&"default"!==n&&(t.visualQuery=Number(n)===t.id,t.setQBEView(),t.resetSelection())})),p.default.on("switchDragSelection",(function(){t.dragSelection=p.default.getDragSelection(),t.updateControls()})),p.default.on("resetSelection",(function(){t.tube&&t.deselectAll()})),p.default.on("switchSelector",(function(){t.selector=p.default.getSelector()})),p.default.on("selectTimeInterval",(function(e,n){"QBE"===p.default.getMode()&&Number(e)===t.id&&t.paintSelectedPeriod()})),p.default.on("updateSelectedPeriod",(function(){var e=p.default.getSource();"QBE"===p.default.getMode()&&Number(e)===t.id&&t.paintSelectedPeriod()})),p.default.on("convertResultIntoQuery",(function(e,n,i){"QBE"===p.default.getMode()&&e===t.id&&(t.visualQuery=Number(e)===t.id,t.setQBEView(),t.resetSelection(),t.paintSelectedPeriod())}))}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate.bind(this)))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.renderScene(),this.frameId=window.requestAnimationFrame(this.animate.bind(this))}},{key:"renderScene",value:function(){this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera),this.renderer&&this.renderer.render(this.scene,this.camera)}},{key:"addControls",value:function(){this.controls=new v.default(this.camera,this.renderer.domElement),this.controls.position0.set(0,0,50),this.controls.screenSpacePanning=!1,this.controls.enableZoom=!1}},{key:"updateControls",value:function(){this.visualQuery&&this.dragSelection?this.QBEControls&&(this.QBEControls.enabled=!1):this.QBEControls&&(this.QBEControls.enabled=!0)}},{key:"onMouseWheel",value:function(){return function(t){t.preventDefault();var e=t.deltaY>0,n=!1,i=this.tubeGroup.position.z,r=this.tubeGroup.position.z;(r+=e?this.wheelInterval:-1*this.wheelInterval)<0?r=0:r>this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z&&(r=this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z);var o=void 0;if(e)for(o=0;o<this.data.spatial.length;o++){var c=this.data.spatial[o].z-this.data.spatial[0].z;if(Math.min(i,r)<c&&c<Math.max(i,r)){r=c,"x"in this.data.spatial[o]&&(n=!0);break}}else for(o=this.data.spatial.length-1;o>=0;o--){var h=this.data.spatial[o].z-this.data.spatial[0].z;if(Math.min(i,r)<h&&h<Math.max(i,r)){r=h,"x"in this.data.spatial[o]&&(n=!0);break}}r===this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z&&"x"in this.data.spatial[this.data.spatial.length-1]&&(n=!0),0===r&&"x"in this.data.spatial[0]&&(n=!0);var f=void 0;if(f=this.data.merge?new a.Color(Number("0x"+this.plotColor[this.idNameLookup[this.data.spatial[this.currentHighlightedPlot].source]].slice(1))):new a.Color(Number("0x"+this.plotColor.slice(1))),this.changePlotColor(this.currentHighlightedPlot*this.segment,f),n)if(this.data.merge)for(var p=0,m=0;m<this.data.spatial.length;m++)"x"in this.data.spatial[m]&&(r===this.data.spatial[m].z-this.data.spatial[0].z&&(this.changePlotColor(p*this.segment,new a.Color("red")),this.currentHighlightedPlot=p),p++);else for(var v=0;v<this.data.position.length;v++)r===this.data.spatial[v].z-this.data.spatial[0].z&&(this.changePlotColor(v*this.segment,new a.Color("red")),this.currentHighlightedPlot=v);if(this.periodStartMarker.visible&&(this.periodGroup.position.z=this.periodGroup.position.z+(r-this.tubeGroup.position.z)),this.tubeGroup.position.z=r,this.diskRotation.visible&&(r<this.rotationPeriod[0]-this.data.spatial[0].z||this.rotationPeriod[1]-this.data.spatial[0].z<r)&&(this.diskRotation.visible=!1,this.rotationPeriod=null),this.renderer.clippingPlanes.length>0&&(this.clippingPlane2.constant=this.cameraProp.far),s.updateFocus(this.id,r,n),this.lock&&s.synchronizeTubes(this.id,r,new a.Vector3(0,0,0),new a.Vector3(0,0,0)),l.moveCurrentLineonTimeSelector(this.id,r+this.data.spatial[0].z),u.updateDetails(this.id,r),this.averagePeriod>0){var g=d.default.getAverage(this.id,this.tubeGroup.position.z,this.averagePeriod);this.disk.position.x=g.x*this.data.meta.range,this.disk.position.y=g.y*this.data.meta.range}}.bind(this)}},{key:"onMouseDown",value:function(){return function(t){this.drag=!1}}},{key:"onMouseMove",value:function(){return function(t){if(this.drag=!0,this.drag){if(this.lock){var e=new a.Vector3(this.controls.object.rotation._x,this.controls.object.rotation._y,this.controls.object.rotation._z),n=this.controls.object.position;s.synchronizeTubes(this.id,0,n,e)}if(this.visualQuery&&this.dragSelection){var i=this.getIntersectedIndex(t);if(void 0!==i&&this.tube){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;var r=Math.floor(Math.min(i.a,i.b,i.c)/this.segment),o=void 0;o=this.selector?1:0;for(var l=0;l<this.segment;l++)this.tube.geometry.attributes.selected.array[r*this.segment+l]=o,this.tube.geometry.attributes.selected.array[(r+1)*this.segment+l]=o;for(var u=this.tube.geometry.attributes.selected.array.length/this.tubeNum,h=this.tube.geometry.attributes.selected.array.indexOf(1)%u,f=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%u,d=h;d<=f;d++)this.tube.geometry.attributes.selected.array[u*(this.tubeNum-1)+d]=1;var p=this.data.meta.min.z,m=Math.floor(h/this.segment)*(1/this.division)+p,v=(Math.floor(f/this.segment)+1)*(1/this.division)+p;c.updateSelectedPeriod([m,v]),this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}}}}}},{key:"onMouseUp",value:function(){return function(t){if(this.comment.visible&&!this.drag){var e=void 0,n=new a.Vector2;n.x=t.offsetX/this.renderer.domElement.clientWidth*2-1,n.y=-t.offsetY/this.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(n,this.camera);var i=this.raycaster.intersectObject(this.comment);if(i.length>0&&(e=i[0].face),void 0!==e)if(this.commentContents.visible)this.commentContents.visible=!1;else{this.commentContents.visible=!0;var r=Math.floor(e.a/6),o=this.commentList[r],s=h.getPrivateCommentFromId(o),l=s.timeStamp+"\n"+s.userName+"\n";s.comment.length>30?l+=s.comment.substr(0,50):l+=s.comment,this.commentContents.material.map.text=l,this.commentContents.position.set(-f.default.getGridSize()-10,0,0)}}else if(this.drag){var u=this.cameraProp;u.xpos=this.camera.position.x,u.ypos=this.camera.position.y,u.zpos=this.camera.position.z,this.cameraProp=u}}}},{key:"onMouseClick",value:function(){return function(t){if(this.drag||!this.visualQuery||this.dragSelection){if(!this.visualQuery){for(var e=document.getElementsByClassName("TimeTubes_viewport"),n=0;n<e.length;n++)e[n].style.border="none";var i=document.getElementById("TimeTubes_viewport_"+this.id);i.style.border="solid 3px red",i.style.boxSizing="border-box",s.activateViewport(this.id)}}else{var r=this.getIntersectedIndex(t),a=void 0,o=void 0;if(void 0!==r&&this.tube){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;var l=Math.floor(Math.min(r.a,r.b,r.c)/this.segment),u=(Math.floor(l/this.segment),this.division,this.data.meta.min.z,void 0);u=this.selector?1:0;for(var h=0;h<this.segment;h++)this.tube.geometry.attributes.selected.array[l*this.segment+h]=u,this.tube.geometry.attributes.selected.array[(l+1)*this.segment+h]=u;var f=this.tube.geometry.attributes.selected.array.length/this.tubeNum;a=this.tube.geometry.attributes.selected.array.indexOf(1)%f,o=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%f;for(var d=a;d<=o;d++)this.tube.geometry.attributes.selected.array[f*(this.tubeNum-1)+d]=1;if(this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera),a>=o)c.updateSelectedPeriod([-1,-1]);else{var p=this.data.meta.min.z,m=Math.floor(a/this.segment)*(1/this.division)+p,v=(Math.floor(o/this.segment)+1)*(1/this.division)+p;c.updateSelectedPeriod([m,v])}}}this.drag=!1}}},{key:"getIntersectedIndex",value:function(t){var e=void 0,n=new a.Vector2;n.x=t.offsetX/this.QBERenderer.domElement.clientWidth*2-1,n.y=-t.offsetY/this.QBERenderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(n,this.QBECamera);var i=this.raycaster.intersectObject(this.tube);return i.length>0&&(e=i[0].face),e}},{key:"deselectAll",value:function(){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var t=0;t<this.tube.geometry.attributes.selected.array.length;t++)this.tube.geometry.attributes.selected.array[t]=0;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:"resetSelection",value:function(){this.visualQuery||this.deselectAll()}},{key:"selectTimeInterval",value:function(t){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var e=this.tube.geometry.attributes.selected.array.length/this.tubeNum,n=this.tubeGroup.position.z,i=(Math.round(n)*this.division+1)*this.segment+e*(this.tubeNum-1),r=0;r<Math.floor(t)*this.division*this.segment;r++)this.tube.geometry.attributes.selected.array[i+r]=1;for(var a=this.tube.geometry.attributes.selected.array.indexOf(1)%e,o=this.tube.geometry.attributes.selected.array.lastIndexOf(1)%e,s=a;s<=o;s++)this.tube.geometry.attributes.selected.array[e*(this.tubeNum-1)+s]=1;var l=this.data.meta.min.z,u=Math.floor(a/this.segment)*(1/this.division)+l,h=(Math.floor(o/this.segment)+1)*(1/this.division)+l;c.updateSelectedPeriod([u,h]),this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:"paintSelectedPeriod",value:function(){this.deselectAll();var t=p.default.getSelectedPeriod(),e=this.data.meta.min.z,n=this.tube.geometry.attributes.selected.array.length/this.tubeNum,i=Math.ceil(t[0]-e)*this.division*this.segment,r=Math.ceil(t[1]-e)*this.division*this.segment;this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0;for(var a=i;a<r;a++)this.tube.geometry.attributes.selected.array[n*(this.tubeNum-1)+a]=1;this.renderer.render(this.scene,this.camera),this.QBERenderer&&this.QBERenderer.render(this.scene,this.QBECamera)}},{key:"changePlotColor",value:function(t,e){for(var n=0;n<this.segment;n++)this.plot.geometry.attributes.color.needsUpdate=!0,this.plot.geometry.attributes.color.setXYZ(t+n,e.r,e.g,e.b)}},{key:"setCameras",value:function(t,e){var n=Math.ceil(this.data.spatial[this.data.spatial.length-1].z-this.data.spatial[0].z+50),i=2*Math.tan(22.5*Math.PI/180),r=t/e;this.cameraSet={},this.cameraSet.perspective=new a.PerspectiveCamera(45,r,.1,n);var o=50*i,l=50*i*r;this.cameraSet.orthographic=new a.OrthographicCamera(-l/2,l/2,o/2,-o/2,.1,n),s.updateCamera(this.id,{xpos:0,ypos:0,zpos:50,fov:45,far:n,depth:i,aspect:r,zoom:1,type:"Perspective"}),this.camera=this.cameraSet.perspective,this.camera.position.z=50,this.camera.lookAt(this.scene.position),$("#farSlider_"+this.id).slider({min:0,max:n,value:n})}},{key:"resetCamera",value:function(){this.cameraProp.xpos=0,this.cameraProp.ypos=0,this.cameraProp.zpos=50,s.updateCamera(this.id,this.cameraProp),this.camera.position.set(this.cameraProp.xpos,this.cameraProp.ypos,this.cameraProp.zpos),this.camera.zoom=this.cameraProp.zoom,this.controls.reset()}},{key:"updateCamera",value:function(){this.camera.position.set(this.cameraProp.xpos,this.cameraProp.ypos,this.cameraProp.zpos),this.camera.fov=this.cameraProp.fov,this.camera.depth=this.cameraProp.depth,this.camera.aspect=this.cameraProp.aspect,this.camera.zoom=this.cameraProp.zoom,this.camera.updateProjectionMatrix()}},{key:"updateSize",value:function(t,e){this.renderer&&(this.renderer.setSize(t,e),s.updateCamera(this.id,{aspect:t/e}))}},{key:"switchCamera",value:function(){var t=this.camera.position;"Perspective"===this.cameraProp.type?(this.camera=this.cameraSet.perspective,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)):"Orthographic"===this.cameraProp.type&&(this.camera=this.cameraSet.orthographic,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)),this.addControls()}},{key:"searchTime",value:function(t){var e=t-this.data.spatial[0].z;isNaN(e)?alert("Please input numbers."):(this.animationPara.flag=!0,this.animationPara.dep=this.tubeGroup.position.z,this.animationPara.dst=e,this.moveTube())}},{key:"moveTube",value:function(){if(this.animationPara.flag){if(this.animationPara.now<this.animationPara.speed){requestAnimationFrame(this.moveTube.bind(this)),this.renderer.render(this.scene,this.camera),this.animationPara.now+=1;var t=(1-Math.cos(Math.PI*this.animationPara.now/this.animationPara.speed))/2;if(this.tubeGroup.position.z=this.animationPara.dep+(this.animationPara.dst-this.animationPara.dep)*t,this.disk.visible){var e=d.default.getAverage(this.id,this.tubeGroup.position.z,this.averagePeriod);this.disk.position.x=e.x*this.data.meta.range,this.disk.position.y=e.y*this.data.meta.range}}this.animationPara.now===this.animationPara.speed&&(u.updateDetails(this.id,this.animationPara.dst),s.updateFocus(this.id,this.animationPara.dst,!1),this.animationPara.flag=!1,this.animationPara.now=0,this.animationPara.dep=0,this.animationPara.dst=0)}else this.animationPara.flag=!1,this.animationPara.dst=0}},{key:"setMinMaxH",value:function(t){this.tube.material.uniforms.minmaxH.value=new a.Vector2(t[0],t[1])}},{key:"setMinMaxV",value:function(t){this.tube.material.uniforms.minmaxV.value=new a.Vector2(t[0],t[1])}},{key:"changePlotsColor",value:function(){if(this.data.merge){for(var t=[],e=[],n=0;n<this.plotColor.length;n++)e.push(new a.Color(this.plotColor[n]));Array(this.data.position.length*this.segment*2),Math.PI,this.segment,this.data.meta.range;for(var i=0;i<this.data.spatial.length;i++)if("x"in this.data.spatial[i])for(var r=this.data.spatial[i].source,o=e[this.idNameLookup[r]],s=0;s<this.segment;s++)t.push(o.r),t.push(o.g),t.push(o.b);this.plot.geometry.addAttribute("color",new a.Float32BufferAttribute(t,3))}else this.plot.material.color=new a.Color(Number("0x"+this.plotColor.slice(1)))}},{key:"updateOpacity",value:function(t){this.tube.geometry.colorsNeedUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0;var e=this.opacityCurve.getSpacedPoints(this.tubeNum),n=[];if("Flat"===t)for(var i=1;i<=this.tubeNum;i++)n.push(1);else for(var r=1;r<=this.tubeNum;r++)n.push(1-(1-e[r-1].y)/(1-e[r].y));for(var a=this.tube.geometry.attributes.colorData.array.length/(3*this.segment*this.tubeNum),o=0;o<this.tubeNum;o++)for(var s=0;s<a*this.segment;s++)this.tube.geometry.attributes.colorData.array[a*this.segment*3*o+3*s+2]=n[o];this.renderer.render(this.scene,this.camera)}},{key:"showPeriod",value:function(t){var e=f.default.getGridSize();this.periodGroup.visible=!0,this.periodTube.geometry.attributes.position.needsUpdate=!0;for(var n=this.periodTube.geometry.attributes.position.array.length/2+2,i=t[1]-t[0],r=0;r<this.periodTube.geometry.attributes.position.array.length/3/2;r++)this.periodTube.geometry.attributes.position.array[n+3*r]=-i;this.periodEndMarker.position.set(e+1,e+1,-i),this.periodGroup.position.z=-(t[0]-this.data.spatial[0].z)+this.tubeGroup.position.z,this.periodStartMarker.material.map.text=String(t[0].toFixed(0)),this.periodEndMarker.material.map.text=String(t[1].toFixed(0)),this.renderer.render(this.scene,this.camera)}},{key:"drawTube",value:function(t){this.texture=t;for(var e=this.data.spatial[0].z,n=this.data.spatial[this.data.spatial.length-1].z,i=this.data.meta.range,r=(n-e)/(this.division*Math.ceil(n-e)),o=Math.ceil((this.data.splines.position.getPoint(1).z-this.data.splines.position.getPoint(0).z)/r),l=Math.ceil((this.data.splines.color.getPoint(1).z-this.data.splines.color.getPoint(0).z)/r),u=this.data.splines.position.getSpacedPoints(o),c=this.data.splines.radius.getSpacedPoints(o),h=this.data.splines.color.getSpacedPoints(l),f=Math.ceil((this.data.splines.color.getPoint(0).z-this.data.splines.position.getPoint(0).z)/r),d=2*Math.PI/(this.segment-1),p=[],v=[],g=0;g<this.tubeNum;g++)p[g]=[],v[g]=[];for(var y,b=[],x=0,_=0,w=this.opacityCurve.getSpacedPoints(this.tubeNum),S=[],E=1;E<=this.tubeNum;E++)S.push(1-(1-w[E-1].y)/(1-w[E].y));for(var M=0;M<=o;M++){x=0,_=0,f<M&&M-f<l&&(x=h[M-f].x,_=h[M-f].y);for(var T=0;T<this.segment;T++){for(var C=0;C<this.tubeNum;C++){var k=1/this.tubeNum*(C+1),P=d*T;p[C].push(-1*(u[M].x*i+k*c[M].x*i*Math.cos(P))),p[C].push(u[M].y*i+k*c[M].y*i*Math.sin(P)),p[C].push(u[M].z-e),v[C].push(x),v[C].push(_),v[C].push(S[C])}T!==this.segment-1&&(b.push(T+M*this.segment),b.push(T+this.segment+M*this.segment),b.push(T+1+M*this.segment),b.push(T+this.segment+M*this.segment),b.push(T+1+this.segment+M*this.segment),b.push(T+1+M*this.segment))}}b=b.slice(0,-1*this.segment*3*2),y=new Float32Array(p[0].length/3);for(var A=new Float32Array(p[0].length),O=[],L=0;L<this.tubeNum;L++){var I=new a.BufferGeometry;I.addAttribute("position",new a.BufferAttribute(new Float32Array(p[L]),3)),I.addAttribute("normal",new a.BufferAttribute(A,3)),I.addAttribute("colorData",new a.BufferAttribute(new Float32Array(v[L]),3)),I.addAttribute("selected",new a.BufferAttribute(new Float32Array(y),1)),I.setIndex(new a.BufferAttribute(new Uint32Array(b),1)),I.computeVertexNormals(),O.push(I)}var N=m.default.mergeBufferGeometries(O),R=new a.ShaderMaterial({vertexShader:this.vertex,fragmentShader:this.fragment,uniforms:{lightPosition:{value:new a.Vector3(-20,40,60)},shade:{value:!0},texture:{value:this.texture},minmaxH:{value:new a.Vector2(this.data.meta.min.H,this.data.meta.max.H)},minmaxV:{value:new a.Vector2(this.data.meta.min.V,this.data.meta.max.V)},flagH:{value:!0},flagV:{value:!0}},side:a.DoubleSide,transparent:!0,clipping:!0,clippingPlanes:[this.clippingPlane]});this.tube=new a.Mesh(N,R),this.tubeGroup.add(this.tube),this.tube.rotateY(Math.PI),s.updateMinMaxH(this.id,this.data.meta.min.H,this.data.meta.max.H),s.updateMinMaxV(this.id,this.data.meta.min.V,this.data.meta.max.V);var D=p[this.tubeNum-1],z=v[this.tubeNum-1],B=b;s.uploadTubeAttributes(this.id,D,z,B)}},{key:"drawGrid",value:function(t,e){this.grid=new a.GridHelper(t,e,"white","limegreen"),this.grid.rotateX(Math.PI/2),this.scene.add(this.grid)}},{key:"drawLabel",value:function(t){var e=f.default.getGridSize();this.labelGroup=new a.Group,this.scene.add(this.labelGroup);for(var n=[[1,1],[-1,1],[-1,-1],[1,-1]],i=0;i<n.length;i++){var r=new g.default({material:{color:16777215},redrawInterval:250,textSize:.8,texture:{fontFamily:"Arial, Helvetica, sans-serif",text:"("+n[i][0]*t+", "+n[i][1]*t+")"}});this.labelGroup.add(r),r.position.set(n[i][0]*e,n[i][1]*e,0)}var o=new g.default({material:{color:25600},redrawInterval:250,textSize:1,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"Q/I"}}),s=new g.default({material:{color:25600},redrawInterval:250,textSize:1,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"U/I"}});this.labelGroup.add(o),this.labelGroup.add(s),o.position.set(e+1,0,0),s.position.set(0,e+1,0)}},{key:"drawAxis",value:function(){for(var t=new a.BufferGeometry,e=new a.LineBasicMaterial({color:"white",opacity:.5,clippingPlanes:[this.clippingPlane]}),n=[],i=[],r=0,o=0,s=0;s<this.data.spatial.length;s++)o=this.data.spatial[s].z-this.data.spatial[0].z,n.push(-10),n.push(0),n.push(o),n.push(10),n.push(0),n.push(o),n.push(0),n.push(10),n.push(o),n.push(0),n.push(-10),n.push(o),i.push(r+0),i.push(r+1),i.push(r+2),i.push(r+3),r+=4;t.setIndex(i),t.addAttribute("position",new a.Float32BufferAttribute(n,3)),this.axis=new a.LineSegments(t,e),this.tubeGroup.add(this.axis),this.axis.rotateY(Math.PI)}},{key:"drawPlot",value:function(){if(this.data.merge){for(var t=[],e=[],n=[],i=0;i<this.plotColor.length;i++)n.push(new a.Color(this.plotColor[i]));for(var r=Array(this.data.position.length*this.segment*2),o=0,s=2*Math.PI/this.segment,l=this.data.meta.range,u=0;u<this.data.spatial.length;u++)if("x"in this.data.spatial[u]){var c=this.data.spatial[u].z-this.data.spatial[0].z,h=-this.data.spatial[u].x*l,f=this.data.spatial[u].y*l,d=this.data.spatial[u].r_x*l,p=this.data.spatial[u].r_y*l,m=2*this.segment*o,v=this.data.spatial[u].source,g=n[this.idNameLookup[v]];r[m]=o*this.segment,r[m+2*this.segment-1]=o*this.segment;for(var y=0;y<this.segment;y++)t.push(h+d*Math.cos(s*y)),t.push(f+p*Math.sin(s*y)),t.push(c),e.push(g.r),e.push(g.g),e.push(g.b),0!==y&&(r[m+2*(y-1)+1]=o*this.segment+y,r[m+2*(y-1)+2]=o*this.segment+y);o++}var b=new a.BufferGeometry;b.setIndex(r),b.addAttribute("position",new a.Float32BufferAttribute(t,3)),b.addAttribute("color",new a.Float32BufferAttribute(e,3));var x=new a.LineBasicMaterial({vertexColors:a.VertexColors,clippingPlanes:[this.clippingPlane]});this.plot=new a.LineSegments(b,x)}else{for(var _=[],w=[],S=new a.Color(this.plotColor),E=Array(this.data.position.length*this.segment*2),M=2*Math.PI/this.segment,T=this.data.meta.range,C=0;C<this.data.position.length;C++){var k=this.data.position[C].z-this.data.position[0].z,P=-this.data.position[C].x*T,A=this.data.position[C].y*T,O=this.data.radius[C].x*T,L=this.data.radius[C].y*T,I=2*this.segment*C;E[I]=C*this.segment,E[I+2*this.segment-1]=C*this.segment;for(var N=0;N<this.segment;N++)_.push(P+O*Math.cos(M*N)),_.push(A+L*Math.sin(M*N)),_.push(k),w.push(S.r),w.push(S.g),w.push(S.b),0!==N&&(E[I+2*(N-1)+1]=C*this.segment+N,E[I+2*(N-1)+2]=C*this.segment+N)}var R=new a.BufferGeometry;R.setIndex(E),R.addAttribute("position",new a.Float32BufferAttribute(_,3)),R.addAttribute("color",new a.Float32BufferAttribute(w,3));var D=new a.LineBasicMaterial({vertexColors:a.VertexColors,clippingPlanes:[this.clippingPlane]});this.plot=new a.LineSegments(R,D)}this.tubeGroup.add(this.plot),this.plot.rotateY(Math.PI)}},{key:"drawDisk",value:function(){var t=new a.CircleGeometry(.5,16),e=new a.MeshBasicMaterial({color:16711680,opacity:.8});this.disk=new a.Mesh(t,e),this.scene.add(this.disk),this.disk.visible=!1}},{key:"drawDiskForRotationCenter",value:function(){var t=new a.CircleGeometry(.5,16),e=new a.MeshBasicMaterial({color:16776960,opacity:.8});this.diskRotation=new a.Mesh(t,e),this.scene.add(this.diskRotation),this.diskRotation.visible=!1}},{key:"drawComment",value:function(){this.commentList=[];for(var t=d.default.getFileName(this.id),e=h.getDataFromLocalStorage("privateComment"),n=f.default.getGridSize(),i=[],r=0;r<e.length;r++)e[r].fileName===t&&(this.commentList.push(e[r].id),i.push(n+2+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z));var o=new a.BufferGeometry;o.addAttribute("position",new a.Float32BufferAttribute(i,3));var s=new a.MeshBasicMaterial({color:8433977,side:a.DoubleSide,clippingPlanes:[this.clippingPlane]});this.comment=new a.Mesh(o,s),this.tubeGroup.add(this.comment),this.comment.rotateY(Math.PI),this.commentContents=new g.default({material:{color:16777215},redrawInterval:250,textSize:1.3,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"",align:"left"}}),this.scene.add(this.commentContents),this.commentContents.position.set(-n,n,0)}},{key:"drawPeriodMarker",value:function(){var t=f.default.getGridSize();this.periodStartMarker=new g.default({material:{color:65280,clippingPlanes:[this.clippingPlane]},redrawInterval:250,textSize:1.3,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"start",align:"left"}}),this.periodStartMarker.position.set(t+1,t+1,0),this.periodEndMarker=new g.default({material:{color:16711680,clippingPlanes:[this.clippingPlane]},redrawInterval:250,textSize:1.3,texture:{fontFamily:"Arial, Helvetica, sans-serif",fontStyle:"italic",text:"end",align:"left"}}),this.periodEndMarker.position.set(t+1,t+1,0);var e=new a.LineCurve3(new a.Vector3(0,0,0),new a.Vector3(0,0,-1)),n=new a.TubeBufferGeometry(e,1,.5,16,!1),i=new a.MeshBasicMaterial({color:255,clippingPlanes:[this.clippingPlane]});this.periodTube=new a.Mesh(n,i),this.periodGroup=new a.Group,this.periodGroup.add(this.periodStartMarker),this.periodGroup.add(this.periodEndMarker),this.periodGroup.add(this.periodTube),this.periodGroup.visible=!1,this.scene.add(this.periodGroup)}},{key:"updateComment",value:function(){this.commentList=[];for(var t=d.default.getFileName(this.id),e=h.getDataFromLocalStorage("privateComment"),n=f.default.getGridSize(),i=[],r=0;r<e.length;r++)e[r].fileName===t&&(this.commentList.push(e[r].id),i.push(n+2+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n),i.push(e[r].start-this.data.meta.min.z),i.push(n+2+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z),i.push(n+1),i.push(n-2),i.push(e[r].start-this.data.meta.min.z));this.comment.geometry.attributes.position.needsUpdate=!0,this.comment.geometry.attributes.position=new a.Float32BufferAttribute(i,3),this.commentContents.visible=!1,this.renderer.render(this.scene,this.camera)}},{key:"initQBEView",value:function(){this.QBECamera=new a.PerspectiveCamera(45,1,.1,2e3),this.QBECamera.position.z=50,this.QBERenderer=new a.WebGLRenderer,this.QBERenderer.setSize(500,500),this.QBERenderer.setClearColor("#000000"),this.QBERenderer.localClippingEnabled=!0,this.QBERenderer.domElement.id="QBE_viewport_"+this.id,this.QBERenderer.domElement.className="TimeTubes_viewport"}},{key:"setQBEView",value:function(){var t=document.getElementById("QBE_viewport_"+this.id);if(this.visualQuery){this.QBECamera.lookAt(this.scene.position),this.QBECamera.far=this.camera.far;var e=30;Number($("#QBESource").css("padding-left"))?e=2*Number($("#QBESource").css("padding-left").replace("px","")):Number($("#QBESource").css("padding"))&&(e=2*Number($("#QBESource").css("padding").replace("px","")));var n=$("#QBESource").outerWidth(!0)-(e>=0?e:0);if(this.QBERenderer.setSize(n,n),null!=t)t.style.display="block";else{var i=document.getElementById("QBESourceTT"),r=this.onMouseWheel(),a=this.onMouseDown(),o=this.onMouseMove(),s=this.onMouseUp(),l=this.onMouseClick();i.appendChild(this.QBERenderer.domElement),i.addEventListener("wheel",r.bind(this),!1),i.addEventListener("mousedown",a.bind(this),!1),i.addEventListener("mousemove",o.bind(this),!1),i.addEventListener("mouseup",s.bind(this),!1),i.addEventListener("click",l.bind(this),!1),this.QBEControls=new v.default(this.QBECamera,this.QBERenderer.domElement),this.QBEControls.position0.set(0,0,50),this.QBEControls.screenSpacePanning=!1,this.QBEControls.enableZoom=!1}}else null!=t&&(t.style.display="none")}}]),e}(r.default.Component);e.default=x},function(t,e,n){var i=n(70),r=n(74);t.exports=function(t,e){return t&&i(t,r(e))}},function(t,e,n){var i=n(127),r=n(16),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var i=n(129),r=n(53),a=n(54),o=a&&a.isTypedArray,s=o?r(o):i;t.exports=s},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var i=n(68),r=e&&!e.nodeType&&e,a=r&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===r&&i.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s}).call(this,n(33)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(20),r=n(10);t.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var i=n(73)(Object.getPrototypeOf,Object);t.exports=i},function(t,e,n){var i=n(21)(n(12),"Map");t.exports=i},function(t,e,n){var i=n(149),r=n(156),a=n(158),o=n(159),s=n(160);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(171),r=n(84),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),i(o(t),(function(e){return a.call(t,e)})))}:r;t.exports=s},function(t,e,n){var i=n(8),r=n(41),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var i=n(92);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var i=n(80);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Checkboard=void 0;var i=o(n(0)),r=o(n(1)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(218));function o(t){return t&&t.__esModule?t:{default:t}}var s=e.Checkboard=function(t){var e=t.white,n=t.grey,o=t.size,s=t.renderers,l=t.borderRadius,u=t.boxShadow,c=(0,r.default)({default:{grid:{borderRadius:l,boxShadow:u,absolute:"0px 0px 0px 0px",background:"url("+a.get(e,n,o,s.canvas)+") center left"}}});return i.default.createElement("div",{style:c.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createScatterplots=function(){},e.resetScatterplotsZoom=function(t){a.default.dispatch({type:"RESET_SCATTERPLOTS",id:t})},e.moveCurrentLineonTimeSelector=function(t,e){a.default.dispatch({type:"MOVE_CURRENT_LINE_ON_TIMESELECTOR",id:t,zpos:e})},e.updateTimeRange=function(t,e){a.default.dispatch({type:"UPDATE_TIME_RANGE",id:t,range:e})};!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(7));var i,r=n(14),a=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),o=n(14),s=(i=o)&&i.__esModule?i:{default:i};var l=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.timeRange=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"handleActions",value:function(t){switch(t.type){case"UPLOAD_DATA":this.uploadData(t.data);break;case"RESET_SCATTERPLOTS":this.emit("resetScatterplots",t.id);break;case"MOVE_CURRENT_LINE_ON_TIMESELECTOR":this.emit("moveCurrentLineonTimeSelector",t.id,t.zpos);break;case"UPDATE_TIME_RANGE":this.updateTimeRange(t.id,t.range)}}},{key:"getTimeRange",value:function(t){return this.timeRange[t]}},{key:"uploadData",value:function(t){this.timeRange.push([t.meta.min.z,t.meta.max.z]),this.emit("upload")}},{key:"updateTimeRange",value:function(t,e){this.timeRange[t]=e,this.emit("updateTimeRange",t,e)}}]),e}(a.EventEmitter));s.default.register(l.handleActions.bind(l)),e.default=l},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,l=o(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))r.call(n,c)&&(l[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(l[s[h]]=n[s[h]])}}return l}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(69))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(71),r=n(28);t.exports=function(t,e){return t&&i(t,e,r)}},function(t,e,n){var i=n(125)();t.exports=i},function(t,e,n){var i=n(126),r=n(49),a=n(8),o=n(32),s=n(50),l=n(51),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&r(t),h=!n&&!c&&o(t),f=!n&&!c&&!h&&l(t),d=n||c||h||f,p=d?i(t.length,String):[],m=p.length;for(var v in t)!e&&!u.call(t,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||p.push(v);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(34);t.exports=function(t){return"function"==typeof t?t:i}},function(t,e,n){var i=n(20),r=n(57),a=n(16),o=Function.prototype,s=Object.prototype,l=o.toString,u=s.hasOwnProperty,c=l.call(Object);t.exports=function(t){if(!a(t)||"[object Object]"!=i(t))return!1;var e=r(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var i=n(161),r=n(16);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,a,o,t,s))}},function(t,e,n){var i=n(162),r=n(165),a=n(166);t.exports=function(t,e,n,o,s,l){var u=1&n,c=t.length,h=e.length;if(c!=h&&!(u&&h>c))return!1;var f=l.get(t);if(f&&l.get(e))return f==e;var d=-1,p=!0,m=2&n?new i:void 0;for(l.set(t,e),l.set(e,t);++d<c;){var v=t[d],g=e[d];if(o)var y=u?o(g,v,d,e,t,l):o(v,g,d,t,e,l);if(void 0!==y){if(y)continue;p=!1;break}if(m){if(!r(e,(function(t,e){if(!a(m,e)&&(v===t||s(v,t,n,o,l)))return m.push(e)}))){p=!1;break}}else if(v!==g&&!s(v,g,n,o,l)){p=!1;break}}return l.delete(t),l.delete(e),p}},function(t,e,n){var i=n(12).Uint8Array;t.exports=i},function(t,e,n){var i=n(82),r=n(60),a=n(28);t.exports=function(t){return i(t,a,r)}},function(t,e,n){var i=n(83),r=n(8);t.exports=function(t,e,n){var a=e(t);return r(t)?a:i(a,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var i=n(10);t.exports=function(t){return t==t&&!i(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var i=n(88),r=n(42);t.exports=function(t,e){for(var n=0,a=(e=i(e,t)).length;null!=t&&n<a;)t=t[r(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var i=n(8),r=n(61),a=n(179),o=n(182);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:a(o(t))}},function(t,e,n){var i=n(70),r=n(191)(i);t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},function(t,e,n){var i=n(62),r=n(29),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&r(o,n)&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e,n){var i=n(21),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},function(t,e,n){(function(t){var i=n(12),r=e&&!e.nodeType&&e,a=r&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===r?i.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=s?s(n):new t.constructor(n);return t.copy(i),i}}).call(this,n(33)(t))},function(t,e){t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},function(t,e,n){var i=n(83),r=n(57),a=n(60),o=n(84),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,a(t)),t=r(t);return e}:o;t.exports=s},function(t,e,n){var i=n(63);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var i=n(207),r=n(57),a=n(55);t.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:i(r(t))}},function(t,e,n){var i=n(62),r=n(29);t.exports=function(t,e,n){(void 0===n||r(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var i=n(10),r=n(240),a=n(241),o=Math.max,s=Math.min;t.exports=function(t,e,n){var l,u,c,h,f,d,p=0,m=!1,v=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=l,i=u;return l=u=void 0,p=e,h=t.apply(i,n)}function b(t){return p=t,f=setTimeout(_,e),m?y(t):h}function x(t){var n=t-d;return void 0===d||n>=e||n<0||v&&t-p>=c}function _(){var t=r();if(x(t))return w(t);f=setTimeout(_,function(t){var n=e-(t-d);return v?s(n,c-(t-p)):n}(t))}function w(t){return f=void 0,g&&l?y(t):(l=u=void 0,h)}function S(){var t=r(),n=x(t);if(l=arguments,u=this,d=t,n){if(void 0===f)return b(d);if(v)return clearTimeout(f),f=setTimeout(_,e),y(d)}return void 0===f&&(f=setTimeout(_,e)),h}return e=a(e)||0,i(n)&&(m=!!n.leading,c=(v="maxWait"in n)?o(a(n.maxWait)||0,e):c,g="trailing"in n?!!n.trailing:g),S.cancel=function(){void 0!==f&&clearTimeout(f),p=0,l=d=u=f=void 0},S.flush=function(){return void 0===f?h:w(r())},S}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorWrap=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),o=u(a),s=u(n(100)),l=u(n(13));function u(t){return t&&t.__esModule?t:{default:t}}var c=e.ColorWrap=function(t){var e=function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.handleChange=function(t,n){if(l.default.simpleCheckForValidColor(t)){var i=l.default.toState(t,t.h||e.state.oldHue);e.setState(i),e.props.onChangeComplete&&e.debounce(e.props.onChangeComplete,i,n),e.props.onChange&&e.props.onChange(i,n)}},e.handleSwatchHover=function(t,n){if(l.default.simpleCheckForValidColor(t)){var i=l.default.toState(t,t.h||e.state.oldHue);e.props.onSwatchHover&&e.props.onSwatchHover(i,n)}},e.state=i({},l.default.toState(t.color,0)),e.debounce=(0,s.default)((function(t,e,n){t(e,n)}),100),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),r(n,[{key:"render",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),o.default.createElement(t,i({},this.props,this.state,{onChange:this.handleChange},e))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return i({},l.default.toState(t.color,e.oldHue))}}]),n}(a.PureComponent||a.Component);return e.propTypes=i({},t.propTypes),e.defaultProps=i({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e};e.default=c},function(t,e,n){"use strict";n.r(e),n.d(e,"red",(function(){return i})),n.d(e,"pink",(function(){return r})),n.d(e,"purple",(function(){return a})),n.d(e,"deepPurple",(function(){return o})),n.d(e,"indigo",(function(){return s})),n.d(e,"blue",(function(){return l})),n.d(e,"lightBlue",(function(){return u})),n.d(e,"cyan",(function(){return c})),n.d(e,"teal",(function(){return h})),n.d(e,"green",(function(){return f})),n.d(e,"lightGreen",(function(){return d})),n.d(e,"lime",(function(){return p})),n.d(e,"yellow",(function(){return m})),n.d(e,"amber",(function(){return v})),n.d(e,"orange",(function(){return g})),n.d(e,"deepOrange",(function(){return y})),n.d(e,"brown",(function(){return b})),n.d(e,"grey",(function(){return x})),n.d(e,"blueGrey",(function(){return _})),n.d(e,"darkText",(function(){return w})),n.d(e,"lightText",(function(){return S})),n.d(e,"darkIcons",(function(){return E})),n.d(e,"lightIcons",(function(){return M})),n.d(e,"white",(function(){return T})),n.d(e,"black",(function(){return C}));var i={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},a={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},o={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},u={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},c={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},h={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},f={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},d={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},p={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},m={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},v={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},g={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},y={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},b={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},x={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},_={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},w={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},S={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},E={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},M={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},T="#ffffff",C="#000000";e.default={red:i,pink:r,purple:a,deepPurple:o,indigo:s,blue:l,lightBlue:u,cyan:c,teal:h,green:f,lightGreen:d,lime:p,yellow:m,amber:v,orange:g,deepOrange:y,brown:b,grey:x,blueGrey:_,darkText:w,lightText:S,darkIcons:E,lightIcons:M,white:T,black:C}},function(t,e,n){var i=n(15);i.OrbitControls=function(t,e){var n,r,a,o,s;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new i.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN},this.touches={ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(u),l.update(),d=f.NONE},this.update=(n=new i.Vector3,r=(new i.Quaternion).setFromUnitVectors(t.up,new i.Vector3(0,1,0)),a=r.clone().inverse(),o=new i.Vector3,s=new i.Quaternion,function(){var t=l.object.position;return n.copy(t).sub(l.target),n.applyQuaternion(r),m.setFromVector3(n),l.autoRotate&&d===f.NONE&&A(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(m.theta+=v.theta*l.dampingFactor,m.phi+=v.phi*l.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi),m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),!0===l.enableDamping?l.target.addScaledVector(y,l.dampingFactor):l.target.add(y),n.setFromSpherical(m),n.applyQuaternion(a),t.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor,y.multiplyScalar(1-l.dampingFactor)):(v.set(0,0,0),y.set(0,0,0)),g=1,!!(b||o.distanceToSquared(l.object.position)>p||8*(1-s.dot(l.object.quaternion))>p)&&(l.dispatchEvent(u),o.copy(l.object.position),s.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",tt,!1),l.domElement.removeEventListener("mousedown",q,!1),l.domElement.removeEventListener("wheel",Y,!1),l.domElement.removeEventListener("touchstart",Z,!1),l.domElement.removeEventListener("touchend",K,!1),l.domElement.removeEventListener("touchmove",J,!1),document.removeEventListener("mousemove",$,!1),document.removeEventListener("mouseup",Q,!1),l.domElement.removeEventListener("keydown",X,!1)};var l=this,u={type:"change"},c={type:"start"},h={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=f.NONE,p=1e-6,m=new i.Spherical,v=new i.Spherical,g=1,y=new i.Vector3,b=!1,x=new i.Vector2,_=new i.Vector2,w=new i.Vector2,S=new i.Vector2,E=new i.Vector2,M=new i.Vector2,T=new i.Vector2,C=new i.Vector2,k=new i.Vector2;function P(){return Math.pow(.95,l.zoomSpeed)}function A(t){v.theta-=t}function O(t){v.phi-=t}var L,I=(L=new i.Vector3,function(t,e){L.setFromMatrixColumn(e,0),L.multiplyScalar(-t),y.add(L)}),N=function(){var t=new i.Vector3;return function(e,n){!0===l.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(l.object.up,t)),t.multiplyScalar(e),y.add(t)}}(),R=function(){var t=new i.Vector3;return function(e,n){var i=l.domElement;if(l.object.isPerspectiveCamera){var r=l.object.position;t.copy(r).sub(l.target);var a=t.length();a*=Math.tan(l.object.fov/2*Math.PI/180),I(2*e*a/i.clientHeight,l.object.matrix),N(2*n*a/i.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(I(e*(l.object.right-l.object.left)/l.object.zoom/i.clientWidth,l.object.matrix),N(n*(l.object.top-l.object.bottom)/l.object.zoom/i.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function D(t){l.object.isPerspectiveCamera?g/=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function z(t){l.object.isPerspectiveCamera?g*=t:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/t)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function B(t){x.set(t.clientX,t.clientY)}function F(t){S.set(t.clientX,t.clientY)}function j(t){if(1==t.touches.length)x.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);x.set(e,n)}}function V(t){if(1==t.touches.length)S.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);S.set(e,n)}}function U(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);T.set(0,i)}function H(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}w.subVectors(_,x).multiplyScalar(l.rotateSpeed);var i=l.domElement;A(2*Math.PI*w.x/i.clientHeight),O(2*Math.PI*w.y/i.clientHeight),x.copy(_)}function G(t){if(1==t.touches.length)E.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);E.set(e,n)}M.subVectors(E,S).multiplyScalar(l.panSpeed),R(M.x,M.y),S.copy(E)}function W(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);C.set(0,i),k.set(0,Math.pow(C.y/T.y,l.zoomSpeed)),D(k.y),T.copy(C)}function q(t){if(!1!==l.enabled){switch(t.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),t.button){case 0:switch(l.mouseButtons.LEFT){case i.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enablePan)return;F(t),d=f.PAN}else{if(!1===l.enableRotate)return;B(t),d=f.ROTATE}break;case i.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===l.enableRotate)return;B(t),d=f.ROTATE}else{if(!1===l.enablePan)return;F(t),d=f.PAN}break;default:d=f.NONE}break;case 1:switch(l.mouseButtons.MIDDLE){case i.MOUSE.DOLLY:if(!1===l.enableZoom)return;!function(t){T.set(t.clientX,t.clientY)}(t),d=f.DOLLY;break;default:d=f.NONE}break;case 2:switch(l.mouseButtons.RIGHT){case i.MOUSE.ROTATE:if(!1===l.enableRotate)return;B(t),d=f.ROTATE;break;case i.MOUSE.PAN:if(!1===l.enablePan)return;F(t),d=f.PAN;break;default:d=f.NONE}}d!==f.NONE&&(document.addEventListener("mousemove",$,!1),document.addEventListener("mouseup",Q,!1),l.dispatchEvent(c))}}function $(t){if(!1!==l.enabled)switch(t.preventDefault(),d){case f.ROTATE:if(!1===l.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),w.subVectors(_,x).multiplyScalar(l.rotateSpeed);var e=l.domElement;A(2*Math.PI*w.x/e.clientHeight),O(2*Math.PI*w.y/e.clientHeight),x.copy(_),l.update()}(t);break;case f.DOLLY:if(!1===l.enableZoom)return;!function(t){C.set(t.clientX,t.clientY),k.subVectors(C,T),k.y>0?D(P()):k.y<0&&z(P()),T.copy(C),l.update()}(t);break;case f.PAN:if(!1===l.enablePan)return;!function(t){E.set(t.clientX,t.clientY),M.subVectors(E,S).multiplyScalar(l.panSpeed),R(M.x,M.y),S.copy(E),l.update()}(t)}}function Q(t){!1!==l.enabled&&(document.removeEventListener("mousemove",$,!1),document.removeEventListener("mouseup",Q,!1),l.dispatchEvent(h),d=f.NONE)}function Y(t){!1===l.enabled||!1===l.enableZoom||d!==f.NONE&&d!==f.ROTATE||(t.preventDefault(),t.stopPropagation(),l.dispatchEvent(c),function(t){t.deltaY<0?z(P()):t.deltaY>0&&D(P()),l.update()}(t),l.dispatchEvent(h))}function X(t){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(t){var e=!1;switch(t.keyCode){case l.keys.UP:R(0,l.keyPanSpeed),e=!0;break;case l.keys.BOTTOM:R(0,-l.keyPanSpeed),e=!0;break;case l.keys.LEFT:R(l.keyPanSpeed,0),e=!0;break;case l.keys.RIGHT:R(-l.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),l.update())}(t)}function Z(t){if(!1!==l.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(l.touches.ONE){case i.TOUCH.ROTATE:if(!1===l.enableRotate)return;j(t),d=f.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===l.enablePan)return;V(t),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(l.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&U(t),l.enablePan&&V(t)}(t),d=f.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&U(t),l.enableRotate&&j(t)}(t),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&l.dispatchEvent(c)}}function J(t){if(!1!==l.enabled)switch(t.preventDefault(),t.stopPropagation(),d){case f.TOUCH_ROTATE:if(!1===l.enableRotate)return;H(t),l.update();break;case f.TOUCH_PAN:if(!1===l.enablePan)return;G(t),l.update();break;case f.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(t){l.enableZoom&&W(t),l.enablePan&&G(t)}(t),l.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(t){l.enableZoom&&W(t),l.enableRotate&&H(t)}(t),l.update();break;default:d=f.NONE}}function K(t){!1!==l.enabled&&(l.dispatchEvent(h),d=f.NONE)}function tt(t){!1!==l.enabled&&t.preventDefault()}l.domElement.addEventListener("contextmenu",tt,!1),l.domElement.addEventListener("mousedown",q,!1),l.domElement.addEventListener("wheel",Y,!1),l.domElement.addEventListener("touchstart",Z,!1),l.domElement.addEventListener("touchend",K,!1),l.domElement.addEventListener("touchmove",J,!1),l.domElement.addEventListener("keydown",X,!1),-1===l.domElement.tabIndex&&(l.domElement.tabIndex=0),this.update()},i.OrbitControls.prototype=Object.create(i.EventDispatcher.prototype),i.OrbitControls.prototype.constructor=i.OrbitControls,i.MapControls=function(t,e){i.OrbitControls.call(this,t,e),this.mouseButtons.LEFT=i.MOUSE.PAN,this.mouseButtons.RIGHT=i.MOUSE.ROTATE,this.touches.ONE=i.TOUCH.PAN,this.touches.TWO=i.TOUCH.DOLLY_ROTATE},i.MapControls.prototype=Object.create(i.EventDispatcher.prototype),i.MapControls.prototype.constructor=i.MapControls,t.exports=e.default=i.OrbitControls},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGaussData=function(t){var e=[];if(t>0)for(var n=-4;n<=4;n++){var i=Math.exp(-n*n/(2*t*t))/Math.sqrt(2*Math.PI*t*t);e.push({x:n,y:i})}else e.push({x:-1,y:1}),e.push({x:1,y:1});return e},e.getGaussValue=function(t,e){return Math.exp(-t*t/(2*e*e))/Math.sqrt(2*Math.PI*e*e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(0)),a=(h(n(7)),n(25)),o=h(n(22)),s=h(n(6)),l=f(n(3)),u=f(n(4)),c=f(n(305));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={data:l.default.getAllData(),source:-1},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;l.default.on("upload",(function(){t.setState({data:l.default.getAllData()})})),l.default.on("updateDetail",(function(e,n){Number(t.state.source)===e&&(document.getElementById("currentJDValue").innerText=(n+t.state.data[e].data.meta.min.z).toFixed(3))})),u.default.on("updateSource",(function(){t.setState({source:u.default.getSource()})}))}},{key:"render",value:function(){var t=this,e=400;if(null!==document.getElementById("featureArea")){var n=$("#featureArea").outerWidth(!0)-2*Number($("#featureArea").css("padding-left").replace("px",""));n>0&&(e=n)}var i=this.state.data.map((function(n){return r.default.createElement("div",{key:n.id,id:"QBE_SP_"+n.id,style:{display:n.id===Number(t.state.source)?"block":"none"}},r.default.createElement(c.default,{key:n.id,id:n.id,divID:"QBE_SP_"+n.id,xItem:"z",yItem:"V",width:e,height:Math.ceil(.8*e)}))}));return r.default.createElement("div",{id:"QBESource",className:"controllersElem featureColumn",style:{float:"left",width:"30%",position:"relative"}},r.default.createElement("div",{id:"QBESourceMain",style:{display:"block"}},this.QBESelector(),r.default.createElement("div",{id:"QBESourceTT",className:"featureElem"},this.selectorOptionsTT()),r.default.createElement("div",{id:"QBESourceSP",className:"featureElem"},this.selectorOptionsSP(),i)),r.default.createElement("button",{id:"collapseSourcePanel",className:"btn btn-primary btn-sm",style:{width:"4rem",height:"1.5rem",position:"absolute",top:"0px",right:"-4rem"},onClick:this.clickCloseSourcePanelBtn},"Close"))}},{key:"clickCloseSourcePanelBtn",value:function(){o.toggleSourcePanel(),(0,a.resizeExtractionResultsArea)()}},{key:"QBESelector",value:function(){return r.default.createElement("div",{className:"featureElem"},r.default.createElement("div",{id:"selectTimeInterval",className:"form-row featureRow"},r.default.createElement("span",{style:{marginRight:"0.3rem"}},"Select"),r.default.createElement("input",{type:"text",className:"form-control custom-input",id:"selectTimeIntervalInput",style:{width:"5rem"}}),r.default.createElement("span",{style:{marginLeft:"0.3rem"}},"days from JD="),r.default.createElement("span",{id:"currentJDValue"}),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"selectTimeIntervalBtn",style:{display:"block",margin:"0 0 0 auto"},onClick:this.selectTimeInterval.bind(this)},"Select")),r.default.createElement("button",{id:"resetSelectionBtn",className:"btn btn-primary btn-sm featureRow",style:{display:"block",margin:"0 0 0 auto"},onClick:this.resetSelection.bind(this)},"Deselect all"))}},{key:"selectorOptionsTT",value:function(){return r.default.createElement("div",{id:"selectorForQBETT"},r.default.createElement("h5",null,"Selection options for TimeTubes"),r.default.createElement("form",{className:"form-check form-check-inline selector featureRow",id:"QBESelectorTT"},r.default.createElement("img",{id:"QBESelectTT",className:"selectorIcon selected",name:"QBESelectorTT",value:"Select",src:"img/icons/pen.png",alt:"pen",width:"30",height:"30",title:"select a part of the tube",onClick:this.selectSelect.bind(this),readOnly:!0}),r.default.createElement("img",{id:"QBEDeselectTT",className:"selectorIcon",name:"QBESelectorTT",value:"Deselect",src:"img/icons/eraser.png",alt:"eraser",width:"30",height:"30",title:"deselect a part of the tube",onClick:this.selectDeselect.bind(this),readOnly:!0})))}},{key:"selectorOptionsSP",value:function(){return r.default.createElement("div",{id:"selectorForQBESP"},r.default.createElement("h5",null,"Selection options for scatterplots"),r.default.createElement("form",{className:"form-check form-check-inline selector featureRow",id:"QBESelectorSP"},r.default.createElement("img",{id:"QBESelectRegionSP",className:"selectorIcon selected",name:"QBESelectorSP",value:"SelectRegion",src:"img/icons/selectRegion.png",alt:"select region",width:"30",height:"30",title:"select a part of the scatterplot",onClick:this.selectSelectRegion.bind(this),readOnly:!0}),r.default.createElement("img",{id:"QBEMoveSP",className:"selectorIcon",name:"QBESelectorSP",value:"Move",src:"img/icons/move.png",alt:"move",width:"30",height:"30",title:"move the scatteplot",onClick:this.selectMove.bind(this),readOnly:!0}),r.default.createElement("img",{id:"QBEResetSP",className:"selectorIcon",name:"QBESelectorSP",value:"Reset",src:"img/icons/reset.png",alt:"reset",width:"30",height:"30",title:"reset changes on the scatterplot",onClick:this.selectReset.bind(this),readOnly:!0})))}},{key:"selectTimeInterval",value:function(){var t=$("#selectTimeIntervalInput").val();isNaN(t)||""==t||s.selectTimeInterval(t)}},{key:"resetSelection",value:function(){s.resetSelection()}},{key:"selectSelect",value:function(){$("img[name=QBESelectorTT]").each((function(){$(this).removeClass("selected")})),$("#QBESelectTT").addClass("selected"),s.switchSelector(!0)}},{key:"selectDeselect",value:function(){$("img[name=QBESelectorTT]").each((function(){$(this).removeClass("selected")})),$("#QBEDeselectTT").addClass("selected"),s.switchSelector(!1)}},{key:"selectSelectRegion",value:function(){$("img[name=QBESelectorSP]").each((function(){$(this).removeClass("selected")})),$("#QBESelectRegionSP").addClass("selected"),s.switchQBESelectorSP("selectRegion")}},{key:"selectMove",value:function(){$("img[name=QBESelectorSP]").each((function(){$(this).removeClass("selected")})),$("#QBEMoveSP").addClass("selected"),s.switchQBESelectorSP("move")}},{key:"selectReset",value:function(){s.switchQBESelectorSP("reset")}}]),e}(r.default.Component);e.default=d},function(t,e,n){"use strict";var i=o(n(0)),r=o(n(46)),a=o(n(111));function o(t){return t&&t.__esModule?t:{default:t}}var s=document.getElementById("app");r.default.render(i.default.createElement(a.default,null),s),void 0===localStorage.privateComment&&localStorage.setItem("privateComment",JSON.stringify([]))},function(t,e,n){"use strict";
/** @license React v16.12.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(67),r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113;r&&Symbol.for("react.suspense_list");var p=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116;r&&Symbol.for("react.fundamental"),r&&Symbol.for("react.responder"),r&&Symbol.for("react.scope");var v="function"==typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function x(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}function _(){}function w(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=x.prototype;var S=w.prototype=new _;S.constructor=w,i(S,x.prototype),S.isPureReactComponent=!0;var E={current:null},M={current:null},T=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var i,r={},o=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)T.call(e,i)&&!C.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:a,type:t,key:o,ref:s,props:r,_owner:M.current}}function P(t){return"object"==typeof t&&null!==t&&t.$$typeof===a}var A=/\/+/g,O=[];function L(t,e,n,i){if(O.length){var r=O.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=i,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function N(t,e,n){return null==t?0:function t(e,n,i,r){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case o:l=!0}}if(l)return i(r,e,""===n?"."+R(e,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=n+R(s=e[u],u);l+=t(s,c,i,r)}else if(null===e||"object"!=typeof e?c=null:c="function"==typeof(c=v&&e[v]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=t(s=s.value,c=n+R(s,u++),i,r);else if("object"===s)throw i=""+e,Error(g(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return l}(t,"",e,n)}function R(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function D(t,e){t.func.call(t.context,e,t.count++)}function z(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?B(t,i,n,(function(t){return t})):null!=t&&(P(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(A,"$&/")+"/")+n)),i.push(t))}function B(t,e,n,i,r){var a="";null!=n&&(a=(""+n).replace(A,"$&/")+"/"),N(t,z,e=L(e,a,i,r)),I(e)}function F(){var t=E.current;if(null===t)throw Error(g(321));return t}var j={Children:{map:function(t,e,n){if(null==t)return t;var i=[];return B(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;N(t,D,e=L(null,null,e,n)),I(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return B(t,e,null,(function(t){return t})),e},only:function(t){if(!P(t))throw Error(g(143));return t}},createRef:function(){return{current:null}},Component:x,PureComponent:w,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return F().useCallback(t,e)},useContext:function(t,e){return F().useContext(t,e)},useEffect:function(t,e){return F().useEffect(t,e)},useImperativeHandle:function(t,e,n){return F().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return F().useLayoutEffect(t,e)},useMemo:function(t,e){return F().useMemo(t,e)},useReducer:function(t,e,n){return F().useReducer(t,e,n)},useRef:function(t){return F().useRef(t)},useState:function(t){return F().useState(t)},Fragment:s,Profiler:u,StrictMode:l,Suspense:d,createElement:k,cloneElement:function(t,e,n){if(null==t)throw Error(g(267,t));var r=i({},t.props),o=t.key,s=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,l=M.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)T.call(e,c)&&!C.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:a,type:t.type,key:o,ref:s,props:r,_owner:l}},createFactory:function(t){var e=k.bind(null,t);return e.type=t,e},isValidElement:P,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:E,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:i}},V={default:j},U=V&&j||V;t.exports=U.default||U},function(t,e,n){"use strict";
/** @license React v16.12.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(0),r=n(67),a=n(109);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(o(227));var s=null,l={};function u(){if(s)for(var t in l){var e=l[t],n=s.indexOf(t);if(!(-1<n))throw Error(o(96,t));if(!h[n]){if(!e.extractEvents)throw Error(o(97,t));for(var i in h[n]=e,n=e.eventTypes){var r=void 0,a=n[i],u=e,d=i;if(f.hasOwnProperty(d))throw Error(o(99,d));f[d]=a;var p=a.phasedRegistrationNames;if(p){for(r in p)p.hasOwnProperty(r)&&c(p[r],u,d);r=!0}else a.registrationName?(c(a.registrationName,u,d),r=!0):r=!1;if(!r)throw Error(o(98,i,t))}}}}function c(t,e,n){if(d[t])throw Error(o(100,t));d[t]=e,p[t]=e.eventTypes[n].dependencies}var h=[],f={},d={},p={};function m(t,e,n,i,r,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var v=!1,g=null,y=!1,b=null,x={onError:function(t){v=!0,g=t}};function _(t,e,n,i,r,a,o,s,l){v=!1,g=null,m.apply(x,arguments)}var w=null,S=null,E=null;function M(t,e,n){var i=t.type||"unknown-event";t.currentTarget=E(n),function(t,e,n,i,r,a,s,l,u){if(_.apply(this,arguments),v){if(!v)throw Error(o(198));var c=g;v=!1,g=null,y||(y=!0,b=c)}}(i,e,void 0,t),t.currentTarget=null}function T(t,e){if(null==e)throw Error(o(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function C(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var k=null;function P(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var i=0;i<e.length&&!t.isPropagationStopped();i++)M(t,e[i],n[i]);else e&&M(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function A(t){if(null!==t&&(k=T(k,t)),t=k,k=null,t){if(C(t,P),k)throw Error(o(95));if(y)throw t=b,y=!1,b=null,t}}var O={injectEventPluginOrder:function(t){if(s)throw Error(o(101));s=Array.prototype.slice.call(t),u()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];if(!l.hasOwnProperty(e)||l[e]!==i){if(l[e])throw Error(o(102,e));l[e]=i,n=!0}}n&&u()}};function L(t,e){var n=t.stateNode;if(!n)return null;var i=w(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(o(231,e,typeof n));return n}var I=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;I.hasOwnProperty("ReactCurrentDispatcher")||(I.ReactCurrentDispatcher={current:null}),I.hasOwnProperty("ReactCurrentBatchConfig")||(I.ReactCurrentBatchConfig={suspense:null});var N=/^(.*)[\\\/]/,R="function"==typeof Symbol&&Symbol.for,D=R?Symbol.for("react.element"):60103,z=R?Symbol.for("react.portal"):60106,B=R?Symbol.for("react.fragment"):60107,F=R?Symbol.for("react.strict_mode"):60108,j=R?Symbol.for("react.profiler"):60114,V=R?Symbol.for("react.provider"):60109,U=R?Symbol.for("react.context"):60110,H=R?Symbol.for("react.concurrent_mode"):60111,G=R?Symbol.for("react.forward_ref"):60112,W=R?Symbol.for("react.suspense"):60113,q=R?Symbol.for("react.suspense_list"):60120,$=R?Symbol.for("react.memo"):60115,Q=R?Symbol.for("react.lazy"):60116;R&&Symbol.for("react.fundamental"),R&&Symbol.for("react.responder"),R&&Symbol.for("react.scope");var Y="function"==typeof Symbol&&Symbol.iterator;function X(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=Y&&t[Y]||t["@@iterator"])?t:null}function Z(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case B:return"Fragment";case z:return"Portal";case j:return"Profiler";case F:return"StrictMode";case W:return"Suspense";case q:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case U:return"Context.Consumer";case V:return"Context.Provider";case G:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case $:return Z(t.type);case Q:if(t=1===t._status?t._result:null)return Z(t)}return null}function J(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var i=t._debugOwner,r=t._debugSource,a=Z(t.type);n=null,i&&(n=Z(i.type)),i=a,a="",r?a=" (at "+r.fileName.replace(N,"")+":"+r.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+a}e+=n,t=t.return}while(t);return e}var K=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),tt=null,et=null,nt=null;function it(t){if(t=S(t)){if("function"!=typeof tt)throw Error(o(280));var e=w(t.stateNode);tt(t.stateNode,t.type,e)}}function rt(t){et?nt?nt.push(t):nt=[t]:et=t}function at(){if(et){var t=et,e=nt;if(nt=et=null,it(t),e)for(t=0;t<e.length;t++)it(e[t])}}function ot(t,e){return t(e)}function st(t,e,n,i){return t(e,n,i)}function lt(){}var ut=ot,ct=!1,ht=!1;function ft(){null===et&&null===nt||(lt(),at())}new Map;var dt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pt=Object.prototype.hasOwnProperty,mt={},vt={};function gt(t,e,n,i,r,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){yt[t]=new gt(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];yt[e]=new gt(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){yt[t]=new gt(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){yt[t]=new gt(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){yt[t]=new gt(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){yt[t]=new gt(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){yt[t]=new gt(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){yt[t]=new gt(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){yt[t]=new gt(t,5,!1,t.toLowerCase(),null,!1)}));var bt=/[\-:]([a-z])/g;function xt(t){return t[1].toUpperCase()}function _t(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function wt(t,e,n,i){var r=yt.hasOwnProperty(e)?yt[e]:null;(null!==r?0===r.type:!i&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,i){if(null==e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!pt.call(vt,t)||!pt.call(mt,t)&&(dt.test(t)?vt[t]=!0:(mt[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}function St(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Et(t){t._valueTracker||(t._valueTracker=function(t){var e=St(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Mt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=St(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Tt(t,e){var n=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Ct(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=_t(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function kt(t,e){null!=(e=e.checked)&&wt(t,"checked",e,!1)}function Pt(t,e){kt(t,e);var n=_t(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ot(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ot(t,e.type,_t(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function At(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Ot(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Lt(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function It(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+_t(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function Nt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rt(t,e){var n=e.value;if(null==n){if(n=e.defaultValue,null!=(e=e.children)){if(null!=n)throw Error(o(92));if(Array.isArray(e)){if(!(1>=e.length))throw Error(o(93));e=e[0]}n=e}null==n&&(n="")}t._wrapperState={initialValue:_t(n)}}function Dt(t,e){var n=_t(e.value),i=_t(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function zt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(bt,xt);yt[e]=new gt(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(bt,xt);yt[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(bt,xt);yt[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){yt[t]=new gt(t,1,!1,t.toLowerCase(),null,!1)})),yt.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){yt[t]=new gt(t,1,!1,t.toLowerCase(),null,!0)}));var Bt="http://www.w3.org/1999/xhtml",Ft="http://www.w3.org/2000/svg";function jt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?jt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Ut,Ht=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Ft||"innerHTML"in t)t.innerHTML=e;else{for((Ut=Ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Gt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Wt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qt={animationend:Wt("Animation","AnimationEnd"),animationiteration:Wt("Animation","AnimationIteration"),animationstart:Wt("Animation","AnimationStart"),transitionend:Wt("Transition","TransitionEnd")},$t={},Qt={};function Yt(t){if($t[t])return $t[t];if(!qt[t])return t;var e,n=qt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Qt)return $t[t]=n[e];return t}K&&(Qt=document.createElement("div").style,"AnimationEvent"in window||(delete qt.animationend.animation,delete qt.animationiteration.animation,delete qt.animationstart.animation),"TransitionEvent"in window||delete qt.transitionend.transition);var Xt=Yt("animationend"),Zt=Yt("animationiteration"),Jt=Yt("animationstart"),Kt=Yt("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function ee(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function ne(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ie(t){if(ee(t)!==t)throw Error(o(188))}function re(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=ee(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return ie(r),t;if(a===i)return ie(r),e;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var ae,oe,se,le=!1,ue=[],ce=null,he=null,fe=null,de=new Map,pe=new Map,me=[],ve="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),ge="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function ye(t,e,n,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i}}function be(t,e){switch(t){case"focus":case"blur":ce=null;break;case"dragenter":case"dragleave":he=null;break;case"mouseover":case"mouseout":fe=null;break;case"pointerover":case"pointerout":de.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pe.delete(e.pointerId)}}function xe(t,e,n,i,r){return null===t||t.nativeEvent!==r?(t=ye(e,n,i,r),null!==e&&(null!==(e=ui(e))&&oe(e)),t):(t.eventSystemFlags|=i,t)}function _e(t){var e=li(t.target);if(null!==e){var n=ee(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=ne(n)))return t.blockedOn=e,void a.unstable_runWithPriority(t.priority,(function(){se(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function we(t){if(null!==t.blockedOn)return!1;var e=On(t.topLevelType,t.eventSystemFlags,t.nativeEvent);if(null!==e){var n=ui(e);return null!==n&&oe(n),t.blockedOn=e,!1}return!0}function Se(t,e,n){we(t)&&n.delete(e)}function Ee(){for(le=!1;0<ue.length;){var t=ue[0];if(null!==t.blockedOn){null!==(t=ui(t.blockedOn))&&ae(t);break}var e=On(t.topLevelType,t.eventSystemFlags,t.nativeEvent);null!==e?t.blockedOn=e:ue.shift()}null!==ce&&we(ce)&&(ce=null),null!==he&&we(he)&&(he=null),null!==fe&&we(fe)&&(fe=null),de.forEach(Se),pe.forEach(Se)}function Me(t,e){t.blockedOn===e&&(t.blockedOn=null,le||(le=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ee)))}function Te(t){function e(e){return Me(e,t)}if(0<ue.length){Me(ue[0],t);for(var n=1;n<ue.length;n++){var i=ue[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==ce&&Me(ce,t),null!==he&&Me(he,t),null!==fe&&Me(fe,t),de.forEach(e),pe.forEach(e),n=0;n<me.length;n++)(i=me[n]).blockedOn===t&&(i.blockedOn=null);for(;0<me.length&&null===(n=me[0]).blockedOn;)_e(n),null===n.blockedOn&&me.shift()}function Ce(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ke(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Pe(t,e,n){(e=L(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function Ae(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=ke(e);for(e=n.length;0<e--;)Pe(n[e],"captured",t);for(e=0;e<n.length;e++)Pe(n[e],"bubbled",t)}}function Oe(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=L(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,e),n._dispatchInstances=T(n._dispatchInstances,t))}function Le(t){t&&t.dispatchConfig.registrationName&&Oe(t._targetInst,null,t)}function Ie(t){C(t,Ae)}function Ne(){return!0}function Re(){return!1}function De(t,e,n,i){for(var r in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Ne:Re,this.isPropagationStopped=Re,this}function ze(t,e,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,n,i),r}return new this(t,e,n,i)}function Be(t){if(!(t instanceof this))throw Error(o(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Fe(t){t.eventPool=[],t.getPooled=ze,t.release=Be}r(De.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Ne)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Ne)},persist:function(){this.isPersistent=Ne},isPersistent:Re,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Re,this._dispatchInstances=this._dispatchListeners=null}}),De.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},De.extend=function(t){function e(){}function n(){return i.apply(this,arguments)}var i=this;e.prototype=i.prototype;var a=new e;return r(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=r({},i.Interface,t),n.extend=i.extend,Fe(n),n},Fe(De);var je=De.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Ve=De.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ue=De.extend({view:null,detail:null}),He=Ue.extend({relatedTarget:null});function Ge(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=$e[t])&&!!e[t]}function Ye(){return Qe}for(var Xe=Ue.extend({key:function(t){if(t.key){var e=We[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Ge(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?qe[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ye,charCode:function(t){return"keypress"===t.type?Ge(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ge(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ze=0,Je=0,Ke=!1,tn=!1,en=Ue.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ye,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ze;return Ze=t.screenX,Ke?"mousemove"===t.type?t.screenX-e:0:(Ke=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Je;return Je=t.screenY,tn?"mousemove"===t.type?t.screenY-e:0:(tn=!0,0)}}),nn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),rn=en.extend({dataTransfer:null}),an=Ue.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ye}),on=De.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sn=en.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ln=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Xt,"animationEnd",2],[Zt,"animationIteration",2],[Jt,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Kt,"transitionEnd",2],["waiting","waiting",2]],un={},cn={},hn=0;hn<ln.length;hn++){var fn=ln[hn],dn=fn[0],pn=fn[1],mn=fn[2],vn="on"+(pn[0].toUpperCase()+pn.slice(1)),gn={phasedRegistrationNames:{bubbled:vn,captured:vn+"Capture"},dependencies:[dn],eventPriority:mn};un[pn]=gn,cn[dn]=gn}var yn={eventTypes:un,getEventPriority:function(t){return void 0!==(t=cn[t])?t.eventPriority:2},extractEvents:function(t,e,n,i){var r=cn[t];if(!r)return null;switch(t){case"keypress":if(0===Ge(n))return null;case"keydown":case"keyup":t=Xe;break;case"blur":case"focus":t=He;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=an;break;case Xt:case Zt:case Jt:t=je;break;case Kt:t=on;break;case"scroll":t=Ue;break;case"wheel":t=sn;break;case"copy":case"cut":case"paste":t=Ve;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=nn;break;default:t=De}return Ie(e=t.getPooled(r,e,n,i)),e}},bn=a.unstable_UserBlockingPriority,xn=a.unstable_runWithPriority,_n=yn.getEventPriority,wn=[];function Sn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=li(i)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var r=Ce(t.nativeEvent);i=t.topLevelType;for(var a=t.nativeEvent,o=t.eventSystemFlags,s=null,l=0;l<h.length;l++){var u=h[l];u&&(u=u.extractEvents(i,e,a,r,o))&&(s=T(s,u))}A(s)}}var En=!0;function Mn(t,e){Tn(e,t,!1)}function Tn(t,e,n){switch(_n(e)){case 0:var i=Cn.bind(null,e,1);break;case 1:i=kn.bind(null,e,1);break;default:i=An.bind(null,e,1)}n?t.addEventListener(e,i,!0):t.addEventListener(e,i,!1)}function Cn(t,e,n){ct||lt();var i=An,r=ct;ct=!0;try{st(i,t,e,n)}finally{(ct=r)||ft()}}function kn(t,e,n){xn(bn,An.bind(null,t,e,n))}function Pn(t,e,n,i){if(wn.length){var r=wn.pop();r.topLevelType=t,r.eventSystemFlags=e,r.nativeEvent=n,r.targetInst=i,t=r}else t={topLevelType:t,eventSystemFlags:e,nativeEvent:n,targetInst:i,ancestors:[]};try{if(e=Sn,n=t,ht)e(n,void 0);else{ht=!0;try{ut(e,n,void 0)}finally{ht=!1,ft()}}}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,wn.length<10&&wn.push(t)}}function An(t,e,n){if(En)if(0<ue.length&&-1<ve.indexOf(t))t=ye(null,t,e,n),ue.push(t);else{var i=On(t,e,n);null===i?be(t,n):-1<ve.indexOf(t)?(t=ye(i,t,e,n),ue.push(t)):function(t,e,n,i){switch(e){case"focus":return ce=xe(ce,t,e,n,i),!0;case"dragenter":return he=xe(he,t,e,n,i),!0;case"mouseover":return fe=xe(fe,t,e,n,i),!0;case"pointerover":var r=i.pointerId;return de.set(r,xe(de.get(r)||null,t,e,n,i)),!0;case"gotpointercapture":return r=i.pointerId,pe.set(r,xe(pe.get(r)||null,t,e,n,i)),!0}return!1}(i,t,e,n)||(be(t,n),Pn(t,e,n,null))}}function On(t,e,n){var i=Ce(n);if(null!==(i=li(i))){var r=ee(i);if(null===r)i=null;else{var a=r.tag;if(13===a){if(null!==(i=ne(r)))return i;i=null}else if(3===a){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Pn(t,e,n,i),null}function Ln(t){if(!K)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var In=new("function"==typeof WeakMap?WeakMap:Map);function Nn(t){var e=In.get(t);return void 0===e&&(e=new Set,In.set(t,e)),e}function Rn(t,e,n){if(!n.has(t)){switch(t){case"scroll":Tn(e,"scroll",!0);break;case"focus":case"blur":Tn(e,"focus",!0),Tn(e,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Ln(t)&&Tn(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(t)&&Mn(t,e)}n.add(t)}}var Dn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zn=["Webkit","ms","Moz","O"];function Bn(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Dn.hasOwnProperty(t)&&Dn[t]?(""+e).trim():e+"px"}function Fn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=Bn(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(Dn).forEach((function(t){zn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dn[e]=Dn[t]}))}));var jn=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(t,e){if(e){if(jn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if(!("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(o(62,""))}}function Un(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Hn(t,e){var n=Nn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=p[e];for(var i=0;i<e.length;i++)Rn(e[i],t,n)}function Gn(){}function Wn(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function qn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $n(t,e){var n,i=qn(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=qn(i)}}function Qn(){for(var t=window,e=Wn();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Wn((t=e.contentWindow).document)}return e}function Yn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Xn=null,Zn=null;function Jn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Kn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ti="function"==typeof setTimeout?setTimeout:void 0,ei="function"==typeof clearTimeout?clearTimeout:void 0;function ni(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function ii(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var ri=Math.random().toString(36).slice(2),ai="__reactInternalInstance$"+ri,oi="__reactEventHandlers$"+ri,si="__reactContainere$"+ri;function li(t){var e=t[ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[si]||n[ai]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ii(t);null!==t;){if(n=t[ai])return n;t=ii(t)}return e}n=(t=n).parentNode}return null}function ui(t){return!(t=t[ai]||t[si])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ci(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function hi(t){return t[oi]||null}var fi=null,di=null,pi=null;function mi(){if(pi)return pi;var t,e,n=di,i=n.length,r="value"in fi?fi.value:fi.textContent,a=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[a-e];e++);return pi=r.slice(t,1<e?1-e:void 0)}var vi=De.extend({data:null}),gi=De.extend({data:null}),yi=[9,13,27,32],bi=K&&"CompositionEvent"in window,xi=null;K&&"documentMode"in document&&(xi=document.documentMode);var _i=K&&"TextEvent"in window&&!xi,wi=K&&(!bi||xi&&8<xi&&11>=xi),Si=String.fromCharCode(32),Ei={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Mi=!1;function Ti(t,e){switch(t){case"keyup":return-1!==yi.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ci(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var ki=!1;var Pi={eventTypes:Ei,extractEvents:function(t,e,n,i){var r;if(bi)t:{switch(t){case"compositionstart":var a=Ei.compositionStart;break t;case"compositionend":a=Ei.compositionEnd;break t;case"compositionupdate":a=Ei.compositionUpdate;break t}a=void 0}else ki?Ti(t,n)&&(a=Ei.compositionEnd):"keydown"===t&&229===n.keyCode&&(a=Ei.compositionStart);return a?(wi&&"ko"!==n.locale&&(ki||a!==Ei.compositionStart?a===Ei.compositionEnd&&ki&&(r=mi()):(di="value"in(fi=i)?fi.value:fi.textContent,ki=!0)),a=vi.getPooled(a,e,n,i),r?a.data=r:null!==(r=Ci(n))&&(a.data=r),Ie(a),r=a):r=null,(t=_i?function(t,e){switch(t){case"compositionend":return Ci(e);case"keypress":return 32!==e.which?null:(Mi=!0,Si);case"textInput":return(t=e.data)===Si&&Mi?null:t;default:return null}}(t,n):function(t,e){if(ki)return"compositionend"===t||!bi&&Ti(t,e)?(t=mi(),pi=di=fi=null,ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wi&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=gi.getPooled(Ei.beforeInput,e,n,i)).data=t,Ie(e)):e=null,null===r?e:null===e?r:[r,e]}},Ai={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ai[t.type]:"textarea"===e}var Li={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ii(t,e,n){return(t=De.getPooled(Li.change,t,e,n)).type="change",rt(n),Ie(t),t}var Ni=null,Ri=null;function Di(t){A(t)}function zi(t){if(Mt(ci(t)))return t}function Bi(t,e){if("change"===t)return e}var Fi=!1;function ji(){Ni&&(Ni.detachEvent("onpropertychange",Vi),Ri=Ni=null)}function Vi(t){if("value"===t.propertyName&&zi(Ri))if(t=Ii(Ri,t,Ce(t)),ct)A(t);else{ct=!0;try{ot(Di,t)}finally{ct=!1,ft()}}}function Ui(t,e,n){"focus"===t?(ji(),Ri=n,(Ni=e).attachEvent("onpropertychange",Vi)):"blur"===t&&ji()}function Hi(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return zi(Ri)}function Gi(t,e){if("click"===t)return zi(e)}function Wi(t,e){if("input"===t||"change"===t)return zi(e)}K&&(Fi=Ln("input")&&(!document.documentMode||9<document.documentMode));var qi,$i={eventTypes:Li,_isInputEventSupported:Fi,extractEvents:function(t,e,n,i){var r=e?ci(e):window,a=r.nodeName&&r.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===r.type)var o=Bi;else if(Oi(r))if(Fi)o=Wi;else{o=Hi;var s=Ui}else(a=r.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=Gi);if(o&&(o=o(t,e)))return Ii(o,n,i);s&&s(t,r,e),"blur"===t&&(t=r._wrapperState)&&t.controlled&&"number"===r.type&&Ot(r,"number",r.value)}},Qi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Yi={eventTypes:Qi,extractEvents:function(t,e,n,i,r){var a="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(a&&0==(32&r)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;if(r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window,o?(o=e,null!==(e=(e=n.relatedTarget||n.toElement)?li(e):null)&&(e!==(a=ee(e))||5!==e.tag&&6!==e.tag)&&(e=null)):o=null,o===e)return null;if("mouseout"===t||"mouseover"===t)var s=en,l=Qi.mouseLeave,u=Qi.mouseEnter,c="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=nn,l=Qi.pointerLeave,u=Qi.pointerEnter,c="pointer");if(t=null==o?r:ci(o),r=null==e?r:ci(e),(l=s.getPooled(l,o,n,i)).type=c+"leave",l.target=t,l.relatedTarget=r,(i=s.getPooled(u,e,n,i)).type=c+"enter",i.target=r,i.relatedTarget=t,c=e,(s=o)&&c)t:{for(t=c,o=0,e=u=s;e;e=ke(e))o++;for(e=0,r=t;r;r=ke(r))e++;for(;0<o-e;)u=ke(u),o--;for(;0<e-o;)t=ke(t),e--;for(;o--;){if(u===t||u===t.alternate)break t;u=ke(u),t=ke(t)}u=null}else u=null;for(t=u,u=[];s&&s!==t&&(null===(o=s.alternate)||o!==t);)u.push(s),s=ke(s);for(s=[];c&&c!==t&&(null===(o=c.alternate)||o!==t);)s.push(c),c=ke(c);for(c=0;c<u.length;c++)Oe(u[c],"bubbled",l);for(c=s.length;0<c--;)Oe(s[c],"captured",i);return n===qi?(qi=null,[l]):(qi=n,[l,i])}};var Xi="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},Zi=Object.prototype.hasOwnProperty;function Ji(t,e){if(Xi(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!Zi.call(e,n[i])||!Xi(t[n[i]],e[n[i]]))return!1;return!0}var Ki=K&&"documentMode"in document&&11>=document.documentMode,tr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},er=null,nr=null,ir=null,rr=!1;function ar(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return rr||null==er||er!==Wn(n)?null:("selectionStart"in(n=er)&&Yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ir&&Ji(ir,n)?null:(ir=n,(t=De.getPooled(tr.select,nr,t,e)).type="select",t.target=er,Ie(t),t))}var or={eventTypes:tr,extractEvents:function(t,e,n,i){var r,a=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!a)){t:{a=Nn(a),r=p.onSelect;for(var o=0;o<r.length;o++)if(!a.has(r[o])){a=!1;break t}a=!0}r=!a}if(r)return null;switch(a=e?ci(e):window,t){case"focus":(Oi(a)||"true"===a.contentEditable)&&(er=a,nr=e,ir=null);break;case"blur":ir=nr=er=null;break;case"mousedown":rr=!0;break;case"contextmenu":case"mouseup":case"dragend":return rr=!1,ar(n,i);case"selectionchange":if(Ki)break;case"keydown":case"keyup":return ar(n,i)}return null}};O.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=hi,S=ui,E=ci,O.injectEventPluginsByName({SimpleEventPlugin:yn,EnterLeaveEventPlugin:Yi,ChangeEventPlugin:$i,SelectEventPlugin:or,BeforeInputEventPlugin:Pi}),new Set;var sr=[],lr=-1;function ur(t){0>lr||(t.current=sr[lr],sr[lr]=null,lr--)}function cr(t,e){lr++,sr[lr]=t.current,t.current=e}var hr={},fr={current:hr},dr={current:!1},pr=hr;function mr(t,e){var n=t.type.contextTypes;if(!n)return hr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function vr(t){return null!=(t=t.childContextTypes)}function gr(t){ur(dr),ur(fr)}function yr(t){ur(dr),ur(fr)}function br(t,e,n){if(fr.current!==hr)throw Error(o(168));cr(fr,e),cr(dr,n)}function xr(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in t))throw Error(o(108,Z(e)||"Unknown",a));return r({},n,{},i)}function _r(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||hr,pr=fr.current,cr(fr,e),cr(dr,dr.current),!0}function wr(t,e,n){var i=t.stateNode;if(!i)throw Error(o(169));n?(e=xr(t,e,pr),i.__reactInternalMemoizedMergedChildContext=e,ur(dr),ur(fr),cr(fr,e)):ur(dr),cr(dr,n)}var Sr=a.unstable_runWithPriority,Er=a.unstable_scheduleCallback,Mr=a.unstable_cancelCallback,Tr=a.unstable_shouldYield,Cr=a.unstable_requestPaint,kr=a.unstable_now,Pr=a.unstable_getCurrentPriorityLevel,Ar=a.unstable_ImmediatePriority,Or=a.unstable_UserBlockingPriority,Lr=a.unstable_NormalPriority,Ir=a.unstable_LowPriority,Nr=a.unstable_IdlePriority,Rr={},Dr=void 0!==Cr?Cr:function(){},zr=null,Br=null,Fr=!1,jr=kr(),Vr=1e4>jr?kr:function(){return kr()-jr};function Ur(){switch(Pr()){case Ar:return 99;case Or:return 98;case Lr:return 97;case Ir:return 96;case Nr:return 95;default:throw Error(o(332))}}function Hr(t){switch(t){case 99:return Ar;case 98:return Or;case 97:return Lr;case 96:return Ir;case 95:return Nr;default:throw Error(o(332))}}function Gr(t,e){return t=Hr(t),Sr(t,e)}function Wr(t,e,n){return t=Hr(t),Er(t,e,n)}function qr(t){return null===zr?(zr=[t],Br=Er(Ar,Qr)):zr.push(t),Rr}function $r(){if(null!==Br){var t=Br;Br=null,Mr(t)}Qr()}function Qr(){if(!Fr&&null!==zr){Fr=!0;var t=0;try{var e=zr;Gr(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),zr=null}catch(e){throw null!==zr&&(zr=zr.slice(t+1)),Er(Ar,$r),e}finally{Fr=!1}}}var Yr=3;function Xr(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Zr(t,e){if(t&&t.defaultProps)for(var n in e=r({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Jr={current:null},Kr=null,ta=null,ea=null;function na(){ea=ta=Kr=null}function ia(t,e){var n=t.type._context;cr(Jr,n._currentValue),n._currentValue=e}function ra(t){var e=Jr.current;ur(Jr),t.type._context._currentValue=e}function aa(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function oa(t,e){Kr=t,ea=ta=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Vo=!0),t.firstContext=null)}function sa(t,e){if(ea!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(ea=t,e=1073741823),e={context:t,observedBits:e,next:null},null===ta){if(null===Kr)throw Error(o(308));ta=e,Kr.dependencies={expirationTime:0,firstContext:e,responders:null}}else ta=ta.next=e;return t._currentValue}var la=!1;function ua(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ca(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ha(t,e){return{expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function fa(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function da(t,e){var n=t.alternate;if(null===n){var i=t.updateQueue,r=null;null===i&&(i=t.updateQueue=ua(t.memoizedState))}else i=t.updateQueue,r=n.updateQueue,null===i?null===r?(i=t.updateQueue=ua(t.memoizedState),r=n.updateQueue=ua(n.memoizedState)):i=t.updateQueue=ca(r):null===r&&(r=n.updateQueue=ca(i));null===r||i===r?fa(i,e):null===i.lastUpdate||null===r.lastUpdate?(fa(i,e),fa(r,e)):(fa(i,e),r.lastUpdate=e)}function pa(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=ua(t.memoizedState):ma(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function ma(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=ca(e)),e}function va(t,e,n,i,a,o){switch(n.tag){case 1:return"function"==typeof(t=n.payload)?t.call(o,i,a):t;case 3:t.effectTag=-4097&t.effectTag|64;case 0:if(null==(a="function"==typeof(t=n.payload)?t.call(o,i,a):t))break;return r({},i,a);case 2:la=!0}return i}function ga(t,e,n,i,r){la=!1;for(var a=(e=ma(t,e)).baseState,o=null,s=0,l=e.firstUpdate,u=a;null!==l;){var c=l.expirationTime;c<r?(null===o&&(o=l,a=u),s<c&&(s=c)):(hl(c,l.suspenseConfig),u=va(t,0,l,u,n,i),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=l:(e.lastEffect.nextEffect=l,e.lastEffect=l))),l=l.next}for(c=null,l=e.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<r?(null===c&&(c=l,null===o&&(a=u)),s<h&&(s=h)):(u=va(t,0,l,u,n,i),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=l:(e.lastCapturedEffect.nextEffect=l,e.lastCapturedEffect=l))),l=l.next}null===o&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===o&&null===c&&(a=u),e.baseState=a,e.firstUpdate=o,e.firstCapturedUpdate=c,fl(s),t.expirationTime=s,t.memoizedState=u}function ya(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ba(e.firstEffect,n),e.firstEffect=e.lastEffect=null,ba(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function ba(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var i=e;if("function"!=typeof n)throw Error(o(191,n));n.call(i)}t=t.nextEffect}}var xa=I.ReactCurrentBatchConfig,_a=(new i.Component).refs;function wa(t,e,n,i){n=null==(n=n(i,e=t.memoizedState))?e:r({},e,n),t.memoizedState=n,null!==(i=t.updateQueue)&&0===t.expirationTime&&(i.baseState=n)}var Sa={isMounted:function(t){return!!(t=t._reactInternalFiber)&&ee(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var i=Js(),r=xa.suspense;(r=ha(i=Ks(i,t,r),r)).payload=e,null!=n&&(r.callback=n),da(t,r),tl(t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var i=Js(),r=xa.suspense;(r=ha(i=Ks(i,t,r),r)).tag=1,r.payload=e,null!=n&&(r.callback=n),da(t,r),tl(t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Js(),i=xa.suspense;(i=ha(n=Ks(n,t,i),i)).tag=2,null!=e&&(i.callback=e),da(t,i),tl(t,n)}};function Ea(t,e,n,i,r,a,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!Ji(n,i)||!Ji(r,a))}function Ma(t,e,n){var i=!1,r=hr,a=e.contextType;return"object"==typeof a&&null!==a?a=sa(a):(r=vr(e)?pr:fr.current,a=(i=null!=(i=e.contextTypes))?mr(t,r):hr),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Sa,t.stateNode=e,e._reactInternalFiber=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function Ta(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Sa.enqueueReplaceState(e,e.state,null)}function Ca(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=_a;var a=e.contextType;"object"==typeof a&&null!==a?r.context=sa(a):(a=vr(e)?pr:fr.current,r.context=mr(t,a)),null!==(a=t.updateQueue)&&(ga(t,a,n,r,i),r.state=t.memoizedState),"function"==typeof(a=e.getDerivedStateFromProps)&&(wa(t,e,a,n),r.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(e=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Sa.enqueueReplaceState(r,r.state,null),null!==(a=t.updateQueue)&&(ga(t,a,n,r,i),r.state=t.memoizedState)),"function"==typeof r.componentDidMount&&(t.effectTag|=4)}var ka=Array.isArray;function Pa(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs;e===_a&&(e=i.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!=typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Aa(t,e){if("textarea"!==t.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Oa(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e,n){return(t=Ll(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.effectTag=2,n):i:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Rl(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function u(t,e,n,i){return null!==e&&e.elementType===n.type?((i=r(e,n.props)).ref=Pa(t,e,n),i.return=t,i):((i=Il(n.type,n.key,n.props,null,t.mode,i)).ref=Pa(t,e,n),i.return=t,i)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Dl(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,a){return null===e||7!==e.tag?((e=Nl(n,t.mode,i,a)).return=t,e):((e=r(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Rl(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case D:return(n=Il(e.type,e.key,e.props,null,t.mode,n)).ref=Pa(t,null,e),n.return=t,n;case z:return(e=Dl(e,t.mode,n)).return=t,e}if(ka(e)||X(e))return(e=Nl(e,t.mode,n,null)).return=t,e;Aa(t,e)}return null}function d(t,e,n,i){var r=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:l(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case D:return n.key===r?n.type===B?h(t,e,n.props.children,i,r):u(t,e,n,i):null;case z:return n.key===r?c(t,e,n,i):null}if(ka(n)||X(n))return null!==r?null:h(t,e,n,i,null);Aa(t,n)}return null}function p(t,e,n,i,r){if("string"==typeof i||"number"==typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case D:return t=t.get(null===i.key?n:i.key)||null,i.type===B?h(e,t,i.props.children,r,i.key):u(e,t,i,r);case z:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(ka(i)||X(i))return h(e,t=t.get(n)||null,i,r,null);Aa(e,i)}return null}function m(r,o,s,l){for(var u=null,c=null,h=o,m=o=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=d(r,h,s[m],l);if(null===g){null===h&&(h=v);break}t&&h&&null===g.alternate&&e(r,h),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(r,h),u;if(null===h){for(;m<s.length;m++)null!==(h=f(r,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=i(r,h);m<s.length;m++)null!==(v=p(h,r,m,s[m],l))&&(t&&null!==v.alternate&&h.delete(null===v.key?m:v.key),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v);return t&&h.forEach((function(t){return e(r,t)})),u}function v(r,s,l,u){var c=X(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=d(r,m,y.value,u);if(null===b){null===m&&(m=g);break}t&&m&&null===b.alternate&&e(r,m),s=a(b,s,v),null===h?c=b:h.sibling=b,h=b,m=g}if(y.done)return n(r,m),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=f(r,y.value,u))&&(s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return c}for(m=i(r,m);!y.done;v++,y=l.next())null!==(y=p(m,r,v,y.value,u))&&(t&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(r,t)})),c}return function(t,i,a,l){var u="object"==typeof a&&null!==a&&a.type===B&&null===a.key;u&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case D:t:{for(c=a.key,u=i;null!==u;){if(u.key===c){if(7===u.tag?a.type===B:u.elementType===a.type){n(t,u.sibling),(i=r(u,a.type===B?a.props.children:a.props)).ref=Pa(t,u,a),i.return=t,t=i;break t}n(t,u);break}e(t,u),u=u.sibling}a.type===B?((i=Nl(a.props.children,t.mode,l,a.key)).return=t,t=i):((l=Il(a.type,a.key,a.props,null,t.mode,l)).ref=Pa(t,i,a),l.return=t,t=l)}return s(t);case z:t:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(t,i.sibling),(i=r(i,a.children||[])).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=Dl(a,t.mode,l)).return=t,t=i}return s(t)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==i&&6===i.tag?(n(t,i.sibling),(i=r(i,a)).return=t,t=i):(n(t,i),(i=Rl(a,t.mode,l)).return=t,t=i),s(t);if(ka(a))return m(t,i,a,l);if(X(a))return v(t,i,a,l);if(c&&Aa(t,a),void 0===a&&!u)switch(t.tag){case 1:case 0:throw t=t.type,Error(o(152,t.displayName||t.name||"Component"))}return n(t,i)}}var La=Oa(!0),Ia=Oa(!1),Na={},Ra={current:Na},Da={current:Na},za={current:Na};function Ba(t){if(t===Na)throw Error(o(174));return t}function Fa(t,e){cr(za,e),cr(Da,t),cr(Ra,Na);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vt(null,"");break;default:e=Vt(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}ur(Ra),cr(Ra,e)}function ja(t){ur(Ra),ur(Da),ur(za)}function Va(t){Ba(za.current);var e=Ba(Ra.current),n=Vt(e,t.type);e!==n&&(cr(Da,t),cr(Ra,n))}function Ua(t){Da.current===t&&(ur(Ra),ur(Da))}var Ha={current:0};function Ga(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Wa(t,e){return{responder:t,props:e}}var qa=I.ReactCurrentDispatcher,$a=I.ReactCurrentBatchConfig,Qa=0,Ya=null,Xa=null,Za=null,Ja=null,Ka=null,to=null,eo=0,no=null,io=0,ro=!1,ao=null,oo=0;function so(){throw Error(o(321))}function lo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xi(t[n],e[n]))return!1;return!0}function uo(t,e,n,i,r,a){if(Qa=a,Ya=e,Za=null!==t?t.memoizedState:null,qa.current=null===Za?Po:Ao,e=n(i,r),ro){do{ro=!1,oo+=1,Za=null!==t?t.memoizedState:null,to=Ja,no=Ka=Xa=null,qa.current=Ao,e=n(i,r)}while(ro);ao=null,oo=0}if(qa.current=ko,(t=Ya).memoizedState=Ja,t.expirationTime=eo,t.updateQueue=no,t.effectTag|=io,t=null!==Xa&&null!==Xa.next,Qa=0,to=Ka=Ja=Za=Xa=Ya=null,eo=0,no=null,io=0,t)throw Error(o(300));return e}function co(){qa.current=ko,Qa=0,to=Ka=Ja=Za=Xa=Ya=null,eo=0,no=null,io=0,ro=!1,ao=null,oo=0}function ho(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Ka?Ja=Ka=t:Ka=Ka.next=t,Ka}function fo(){if(null!==to)to=(Ka=to).next,Za=null!==(Xa=Za)?Xa.next:null;else{if(null===Za)throw Error(o(310));var t={memoizedState:(Xa=Za).memoizedState,baseState:Xa.baseState,queue:Xa.queue,baseUpdate:Xa.baseUpdate,next:null};Ka=null===Ka?Ja=t:Ka.next=t,Za=Xa.next}return Ka}function po(t,e){return"function"==typeof e?e(t):e}function mo(t){var e=fo(),n=e.queue;if(null===n)throw Error(o(311));if(n.lastRenderedReducer=t,0<oo){var i=n.dispatch;if(null!==ao){var r=ao.get(n);if(void 0!==r){ao.delete(n);var a=e.memoizedState;do{a=t(a,r.action),r=r.next}while(null!==r);return Xi(a,e.memoizedState)||(Vo=!0),e.memoizedState=a,e.baseUpdate===n.last&&(e.baseState=a),n.lastRenderedState=a,[a,i]}}return[e.memoizedState,i]}i=n.last;var s=e.baseUpdate;if(a=e.baseState,null!==s?(null!==i&&(i.next=null),i=s.next):i=null!==i?i.next:null,null!==i){var l=r=null,u=i,c=!1;do{var h=u.expirationTime;h<Qa?(c||(c=!0,l=s,r=a),h>eo&&fl(eo=h)):(hl(h,u.suspenseConfig),a=u.eagerReducer===t?u.eagerState:t(a,u.action)),s=u,u=u.next}while(null!==u&&u!==i);c||(l=s,r=a),Xi(a,e.memoizedState)||(Vo=!0),e.memoizedState=a,e.baseUpdate=l,e.baseState=r,n.lastRenderedState=a}return[e.memoizedState,n.dispatch]}function vo(t){var e=ho();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:po,lastRenderedState:t}).dispatch=Co.bind(null,Ya,t),[e.memoizedState,t]}function go(t){return mo(po)}function yo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===no?(no={lastEffect:null}).lastEffect=t.next=t:null===(e=no.lastEffect)?no.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,no.lastEffect=t),t}function bo(t,e,n,i){var r=ho();io|=t,r.memoizedState=yo(e,n,void 0,void 0===i?null:i)}function xo(t,e,n,i){var r=fo();i=void 0===i?null:i;var a=void 0;if(null!==Xa){var o=Xa.memoizedState;if(a=o.destroy,null!==i&&lo(i,o.deps))return void yo(0,n,a,i)}io|=t,r.memoizedState=yo(e,n,a,i)}function _o(t,e){return bo(516,192,t,e)}function wo(t,e){return xo(516,192,t,e)}function So(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Eo(){}function Mo(t,e){return ho().memoizedState=[t,void 0===e?null:e],t}function To(t,e){var n=fo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&lo(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Co(t,e,n){if(!(25>oo))throw Error(o(301));var i=t.alternate;if(t===Ya||null!==i&&i===Ya)if(ro=!0,t={expirationTime:Qa,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===ao&&(ao=new Map),void 0===(n=ao.get(e)))ao.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{var r=Js(),a=xa.suspense;a={expirationTime:r=Ks(r,t,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var s=e.last;if(null===s)a.next=a;else{var l=s.next;null!==l&&(a.next=l),s.next=a}if(e.last=a,0===t.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=e.lastRenderedReducer))try{var u=e.lastRenderedState,c=i(u,n);if(a.eagerReducer=i,a.eagerState=c,Xi(c,u))return}catch(t){}tl(t,r)}}var ko={readContext:sa,useCallback:so,useContext:so,useEffect:so,useImperativeHandle:so,useLayoutEffect:so,useMemo:so,useReducer:so,useRef:so,useState:so,useDebugValue:so,useResponder:so,useDeferredValue:so,useTransition:so},Po={readContext:sa,useCallback:Mo,useContext:sa,useEffect:_o,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,bo(4,36,So.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bo(4,36,t,e)},useMemo:function(t,e){var n=ho();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ho();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Co.bind(null,Ya,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},ho().memoizedState=t},useState:vo,useDebugValue:Eo,useResponder:Wa,useDeferredValue:function(t,e){var n=vo(t),i=n[0],r=n[1];return _o((function(){a.unstable_next((function(){var n=$a.suspense;$a.suspense=void 0===e?null:e;try{r(t)}finally{$a.suspense=n}}))}),[t,e]),i},useTransition:function(t){var e=vo(!1),n=e[0],i=e[1];return[Mo((function(e){i(!0),a.unstable_next((function(){var n=$a.suspense;$a.suspense=void 0===t?null:t;try{i(!1),e()}finally{$a.suspense=n}}))}),[t,n]),n]}},Ao={readContext:sa,useCallback:To,useContext:sa,useEffect:wo,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,xo(4,36,So.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xo(4,36,t,e)},useMemo:function(t,e){var n=fo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&lo(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:mo,useRef:function(){return fo().memoizedState},useState:go,useDebugValue:Eo,useResponder:Wa,useDeferredValue:function(t,e){var n=go(),i=n[0],r=n[1];return wo((function(){a.unstable_next((function(){var n=$a.suspense;$a.suspense=void 0===e?null:e;try{r(t)}finally{$a.suspense=n}}))}),[t,e]),i},useTransition:function(t){var e=go(),n=e[0],i=e[1];return[To((function(e){i(!0),a.unstable_next((function(){var n=$a.suspense;$a.suspense=void 0===t?null:t;try{i(!1),e()}finally{$a.suspense=n}}))}),[t,n]),n]}},Oo=null,Lo=null,Io=!1;function No(t,e){var n=Al(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Ro(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Do(t){if(Io){var e=Lo;if(e){var n=e;if(!Ro(t,e)){if(!(e=ni(n.nextSibling))||!Ro(t,e))return t.effectTag=-1025&t.effectTag|2,Io=!1,void(Oo=t);No(Oo,n)}Oo=t,Lo=ni(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Io=!1,Oo=t}}function zo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Oo=t}function Bo(t){if(t!==Oo)return!1;if(!Io)return zo(t),Io=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Kn(e,t.memoizedProps))for(e=Lo;e;)No(t,e),e=ni(e.nextSibling);if(zo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Lo=ni(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Lo=null}}else Lo=Oo?ni(t.stateNode.nextSibling):null;return!0}function Fo(){Lo=Oo=null,Io=!1}var jo=I.ReactCurrentOwner,Vo=!1;function Uo(t,e,n,i){e.child=null===t?Ia(e,null,n,i):La(e,t.child,n,i)}function Ho(t,e,n,i,r){n=n.render;var a=e.ref;return oa(e,r),i=uo(t,e,n,i,a,r),null===t||Vo?(e.effectTag|=1,Uo(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),as(t,e,r))}function Go(t,e,n,i,r,a){if(null===t){var o=n.type;return"function"!=typeof o||Ol(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Il(n.type,null,i,null,e.mode,a)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Wo(t,e,o,i,r,a))}return o=t.child,r<a&&(r=o.memoizedProps,(n=null!==(n=n.compare)?n:Ji)(r,i)&&t.ref===e.ref)?as(t,e,a):(e.effectTag|=1,(t=Ll(o,i)).ref=e.ref,t.return=e,e.child=t)}function Wo(t,e,n,i,r,a){return null!==t&&Ji(t.memoizedProps,i)&&t.ref===e.ref&&(Vo=!1,r<a)?as(t,e,a):$o(t,e,n,i,a)}function qo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function $o(t,e,n,i,r){var a=vr(n)?pr:fr.current;return a=mr(e,a),oa(e,r),n=uo(t,e,n,i,a,r),null===t||Vo?(e.effectTag|=1,Uo(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),as(t,e,r))}function Qo(t,e,n,i,r){if(vr(n)){var a=!0;_r(e)}else a=!1;if(oa(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Ma(e,n,i),Ca(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"==typeof u&&null!==u?u=sa(u):u=mr(e,u=vr(n)?pr:fr.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||l!==u)&&Ta(e,o,i,u),la=!1;var f=e.memoizedState;l=o.state=f;var d=e.updateQueue;null!==d&&(ga(e,d,i,o,r),l=e.memoizedState),s!==i||f!==l||dr.current||la?("function"==typeof c&&(wa(e,n,c,i),l=e.memoizedState),(s=la||Ea(e,n,s,i,f,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.effectTag|=4)):("function"==typeof o.componentDidMount&&(e.effectTag|=4),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=s):("function"==typeof o.componentDidMount&&(e.effectTag|=4),i=!1)}else o=e.stateNode,s=e.memoizedProps,o.props=e.type===e.elementType?s:Zr(e.type,s),l=o.context,"object"==typeof(u=n.contextType)&&null!==u?u=sa(u):u=mr(e,u=vr(n)?pr:fr.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||l!==u)&&Ta(e,o,i,u),la=!1,l=e.memoizedState,f=o.state=l,null!==(d=e.updateQueue)&&(ga(e,d,i,o,r),f=e.memoizedState),s!==i||l!==f||dr.current||la?("function"==typeof c&&(wa(e,n,c,i),f=e.memoizedState),(c=la||Ea(e,n,s,i,l,f,u))?(h||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,u)),"function"==typeof o.componentDidUpdate&&(e.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=i,e.memoizedState=f),o.props=i,o.state=f,o.context=u,i=c):("function"!=typeof o.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),i=!1);return Yo(t,e,n,i,a,r)}function Yo(t,e,n,i,r,a){qo(t,e);var o=0!=(64&e.effectTag);if(!i&&!o)return r&&wr(e,n,!1),as(t,e,a);i=e.stateNode,jo.current=e;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return e.effectTag|=1,null!==t&&o?(e.child=La(e,t.child,null,a),e.child=La(e,null,s,a)):Uo(t,e,s,a),e.memoizedState=i.state,r&&wr(e,n,!0),e.child}function Xo(t){var e=t.stateNode;e.pendingContext?br(0,e.pendingContext,e.pendingContext!==e.context):e.context&&br(0,e.context,!1),Fa(t,e.containerInfo)}var Zo,Jo,Ko,ts={dehydrated:null,retryTime:0};function es(t,e,n){var i,r=e.mode,a=e.pendingProps,o=Ha.current,s=!1;if((i=0!=(64&e.effectTag))||(i=0!=(2&o)&&(null===t||null!==t.memoizedState)),i?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),cr(Ha,1&o),null===t){if(void 0!==a.fallback&&Do(e),s){if(s=a.fallback,(a=Nl(null,r,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,a.child=t;null!==t;)t.return=a,t=t.sibling;return(n=Nl(s,r,n,null)).return=e,a.sibling=n,e.memoizedState=ts,e.child=a,n}return r=a.children,e.memoizedState=null,e.child=Ia(e,null,r,n)}if(null!==t.memoizedState){if(r=(t=t.child).sibling,s){if(a=a.fallback,(n=Ll(t,t.pendingProps)).return=e,0==(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(r=Ll(r,a,r.expirationTime)).return=e,n.sibling=r,n.childExpirationTime=0,e.memoizedState=ts,e.child=n,r}return n=La(e,t.child,a.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=a.fallback,(a=Nl(null,r,0,null)).return=e,a.child=t,null!==t&&(t.return=a),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,a.child=t;null!==t;)t.return=a,t=t.sibling;return(n=Nl(s,r,n,null)).return=e,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,e.memoizedState=ts,e.child=a,n}return e.memoizedState=null,e.child=La(e,t,a.children,n)}function ns(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),aa(t.return,e)}function is(t,e,n,i,r,a){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,last:i,tail:n,tailExpiration:0,tailMode:r,lastEffect:a}:(o.isBackwards=e,o.rendering=null,o.last=i,o.tail=n,o.tailExpiration=0,o.tailMode=r,o.lastEffect=a)}function rs(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(Uo(t,e,i.children,n),0!=(2&(i=Ha.current)))i=1&i|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ns(t,n);else if(19===t.tag)ns(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(cr(Ha,i),0==(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===Ga(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),is(e,!1,r,n,a,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===Ga(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}is(e,!0,n,null,a,e.lastEffect);break;case"together":is(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function as(t,e,n){null!==t&&(e.dependencies=t.dependencies);var i=e.expirationTime;if(0!==i&&fl(i),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Ll(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ll(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function os(t){t.effectTag|=4}function ss(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ls(t){switch(t.tag){case 1:vr(t.type)&&gr();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(ja(),yr(),0!=(64&(e=t.effectTag)))throw Error(o(285));return t.effectTag=-4097&e|64,t;case 5:return Ua(t),null;case 13:return ur(Ha),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ur(Ha),null;case 4:return ja(),null;case 10:return ra(t),null;default:return null}}function us(t,e){return{value:t,source:e,stack:J(e)}}Zo=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Jo=function(t,e,n,i,a){var o=t.memoizedProps;if(o!==i){var s,l,u=e.stateNode;switch(Ba(Ra.current),t=null,n){case"input":o=Tt(u,o),i=Tt(u,i),t=[];break;case"option":o=Lt(u,o),i=Lt(u,i),t=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),t=[];break;case"textarea":o=Nt(u,o),i=Nt(u,i),t=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(u.onclick=Gn)}for(s in Vn(n,i),n=null,o)if(!i.hasOwnProperty(s)&&o.hasOwnProperty(s)&&null!=o[s])if("style"===s)for(l in u=o[s])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(d.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in i){var c=i[s];if(u=null!=o?o[s]:void 0,i.hasOwnProperty(s)&&c!==u&&(null!=c||null!=u))if("style"===s)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(t||(t=[]),t.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(t=t||[]).push(s,""+c)):"children"===s?u===c||"string"!=typeof c&&"number"!=typeof c||(t=t||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(d.hasOwnProperty(s)?(null!=c&&Hn(a,s),t||u===c||(t=[])):(t=t||[]).push(s,c))}n&&(t=t||[]).push("style",n),a=t,(e.updateQueue=a)&&os(e)}},Ko=function(t,e,n,i){n!==i&&os(e)};var cs="function"==typeof WeakSet?WeakSet:Set;function hs(t,e){var n=e.source,i=e.stack;null===i&&null!==n&&(i=J(n)),null!==n&&Z(n.type),e=e.value,null!==t&&1===t.tag&&Z(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function fs(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){El(t,e)}else e.current=null}function ds(t,e){switch(e.tag){case 0:case 11:case 15:ps(2,0,e);break;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,i=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Zr(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}function ps(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var i=n=n.next;do{if(0!=(i.tag&t)){var r=i.destroy;i.destroy=void 0,void 0!==r&&r()}0!=(i.tag&e)&&(r=i.create,i.destroy=r()),i=i.next}while(i!==n)}}function ms(t,e,n){switch("function"==typeof kl&&kl(e),e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var i=t.next;Gr(97<n?97:n,(function(){var t=i;do{var n=t.destroy;if(void 0!==n){var r=e;try{n()}catch(t){El(r,t)}}t=t.next}while(t!==i)}))}break;case 1:fs(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){El(t,e)}}(e,n);break;case 5:fs(e);break;case 4:bs(t,e,n)}}function vs(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,null!==e&&vs(e)}function gs(t){return 5===t.tag||3===t.tag||4===t.tag}function ys(t){t:{for(var e=t.return;null!==e;){if(gs(e)){var n=e;break t}e=e.return}throw Error(o(160))}switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:e=e.containerInfo,i=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Gt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var r=t;;){var a=5===r.tag||6===r.tag;if(a){var s=a?r.stateNode:r.stateNode.instance;if(n)if(i){var l=s;s=n,8===(a=e).nodeType?a.parentNode.insertBefore(l,s):a.insertBefore(l,s)}else e.insertBefore(s,n);else i?(8===(l=e).nodeType?(a=l.parentNode).insertBefore(s,l):(a=l).appendChild(s),null!=(l=l._reactRootContainer)||null!==a.onclick||(a.onclick=Gn)):e.appendChild(s)}else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function bs(t,e,n){for(var i,r,a=e,s=!1;;){if(!s){s=a.return;t:for(;;){if(null===s)throw Error(o(160));switch(i=s.stateNode,s.tag){case 5:r=!1;break t;case 3:case 4:i=i.containerInfo,r=!0;break t}s=s.return}s=!0}if(5===a.tag||6===a.tag){t:for(var l=t,u=a,c=n,h=u;;)if(ms(l,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break;for(;null===h.sibling;){if(null===h.return||h.return===u)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}r?(l=i,u=a.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):i.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(ms(t,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function xs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:ps(4,8,e);break;case 1:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps,r=null!==t?t.memoizedProps:i;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,null!==a){for(n[oi]=i,"input"===t&&"radio"===i.type&&null!=i.name&&kt(n,i),Un(t,r),e=Un(t,i),r=0;r<a.length;r+=2){var s=a[r],l=a[r+1];"style"===s?Fn(n,l):"dangerouslySetInnerHTML"===s?Ht(n,l):"children"===s?Gt(n,l):wt(n,s,l,e)}switch(t){case"input":Pt(n,i);break;case"textarea":Dt(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(t=i.value)?It(n,!!i.multiple,t,!1):e!==!!i.multiple&&(null!=i.defaultValue?It(n,!!i.multiple,i.defaultValue,!0):It(n,!!i.multiple,i.multiple?[]:"",!1))}}}break;case 6:if(null===e.stateNode)throw Error(o(162));e.stateNode.nodeValue=e.memoizedProps;break;case 3:(e=e.stateNode).hydrate&&(e.hydrate=!1,Te(e.containerInfo));break;case 12:break;case 13:if(n=e,null===e.memoizedState?i=!1:(i=!0,n=e.child,js=Vr()),null!==n)t:for(t=n;;){if(5===t.tag)a=t.stateNode,i?"function"==typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=t.stateNode,r=null!=(r=t.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,a.style.display=Bn("display",r));else if(6===t.tag)t.stateNode.nodeValue=i?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(a=t.child.sibling).return=t,t=a;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break t;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}_s(e);break;case 19:_s(e);break;case 17:case 20:case 21:break;default:throw Error(o(163))}}function _s(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new cs),e.forEach((function(e){var i=Tl.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}var ws="function"==typeof WeakMap?WeakMap:Map;function Ss(t,e,n){(n=ha(n,null)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Us||(Us=!0,Hs=i),hs(t,e)},n}function Es(t,e,n){(n=ha(n,null)).tag=3;var i=t.type.getDerivedStateFromError;if("function"==typeof i){var r=e.value;n.payload=function(){return hs(t,e),i(r)}}var a=t.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===Gs?Gs=new Set([this]):Gs.add(this),hs(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Ms,Ts=Math.ceil,Cs=I.ReactCurrentDispatcher,ks=I.ReactCurrentOwner,Ps=0,As=null,Os=null,Ls=0,Is=0,Ns=null,Rs=1073741823,Ds=1073741823,zs=null,Bs=0,Fs=!1,js=0,Vs=null,Us=!1,Hs=null,Gs=null,Ws=!1,qs=null,$s=90,Qs=null,Ys=0,Xs=null,Zs=0;function Js(){return 0!=(48&Ps)?1073741821-(Vr()/10|0):0!==Zs?Zs:Zs=1073741821-(Vr()/10|0)}function Ks(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var i=Ur();if(0==(4&e))return 99===i?1073741823:1073741822;if(0!=(16&Ps))return Ls;if(null!==n)t=Xr(t,0|n.timeoutMs||5e3,250);else switch(i){case 99:t=1073741823;break;case 98:t=Xr(t,150,100);break;case 97:case 96:t=Xr(t,5e3,250);break;case 95:t=2;break;default:throw Error(o(326))}return null!==As&&t===Ls&&--t,t}function tl(t,e){if(50<Ys)throw Ys=0,Xs=null,Error(o(185));if(null!==(t=el(t,e))){var n=Ur();1073741823===e?0!=(8&Ps)&&0==(48&Ps)?al(t):(il(t),0===Ps&&$r()):il(t),0==(4&Ps)||98!==n&&99!==n||(null===Qs?Qs=new Map([[t,e]]):(void 0===(n=Qs.get(t))||n>e)&&Qs.set(t,e))}}function el(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var i=t.return,r=null;if(null===i&&3===t.tag)r=t.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<e&&(i.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(As===r&&(fl(e),4===Is&&Fl(r,Ls)),jl(r,e)),r}function nl(t){var e=t.lastExpiredTime;return 0!==e?e:Bl(t,e=t.firstPendingTime)?(e=t.lastPingedTime)>(t=t.nextKnownPendingLevel)?e:t:e}function il(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=qr(al.bind(null,t));else{var e=nl(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var i=Js();if(1073741823===e?i=99:1===e||2===e?i=95:i=0>=(i=10*(1073741821-e)-10*(1073741821-i))?99:250>=i?98:5250>=i?97:95,null!==n){var r=t.callbackPriority;if(t.callbackExpirationTime===e&&r>=i)return;n!==Rr&&Mr(n)}t.callbackExpirationTime=e,t.callbackPriority=i,e=1073741823===e?qr(al.bind(null,t)):Wr(i,rl.bind(null,t),{timeout:10*(1073741821-e)-Vr()}),t.callbackNode=e}}}function rl(t,e){if(Zs=0,e)return Vl(t,e=Js()),il(t),null;var n=nl(t);if(0!==n){if(e=t.callbackNode,0!=(48&Ps))throw Error(o(327));if(_l(),t===As&&n===Ls||ll(t,n),null!==Os){var i=Ps;Ps|=16;for(var r=cl();;)try{pl();break}catch(e){ul(t,e)}if(na(),Ps=i,Cs.current=r,1===Is)throw e=Ns,ll(t,n),Fl(t,n),il(t),e;if(null===Os)switch(r=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,i=Is,As=null,i){case 0:case 1:throw Error(o(345));case 2:Vl(t,2<n?2:n);break;case 3:if(Fl(t,n),n===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=gl(r)),1073741823===Rs&&10<(r=js+500-Vr())){if(Fs){var a=t.lastPingedTime;if(0===a||a>=n){t.lastPingedTime=n,ll(t,n);break}}if(0!==(a=nl(t))&&a!==n)break;if(0!==i&&i!==n){t.lastPingedTime=i;break}t.timeoutHandle=ti(yl.bind(null,t),r);break}yl(t);break;case 4:if(Fl(t,n),n===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=gl(r)),Fs&&(0===(r=t.lastPingedTime)||r>=n)){t.lastPingedTime=n,ll(t,n);break}if(0!==(r=nl(t))&&r!==n)break;if(0!==i&&i!==n){t.lastPingedTime=i;break}if(1073741823!==Ds?i=10*(1073741821-Ds)-Vr():1073741823===Rs?i=0:(i=10*(1073741821-Rs)-5e3,0>(i=(r=Vr())-i)&&(i=0),(n=10*(1073741821-n)-r)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ts(i/1960))-i)&&(i=n)),10<i){t.timeoutHandle=ti(yl.bind(null,t),i);break}yl(t);break;case 5:if(1073741823!==Rs&&null!==zs){a=Rs;var s=zs;if(0>=(i=0|s.busyMinDurationMs)?i=0:(r=0|s.busyDelayMs,i=(a=Vr()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=r?0:r+i-a),10<i){Fl(t,n),t.timeoutHandle=ti(yl.bind(null,t),i);break}}yl(t);break;default:throw Error(o(329))}if(il(t),t.callbackNode===e)return rl.bind(null,t)}}return null}function al(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,t.finishedExpirationTime===e)yl(t);else{if(0!=(48&Ps))throw Error(o(327));if(_l(),t===As&&e===Ls||ll(t,e),null!==Os){var n=Ps;Ps|=16;for(var i=cl();;)try{dl();break}catch(e){ul(t,e)}if(na(),Ps=n,Cs.current=i,1===Is)throw n=Ns,ll(t,e),Fl(t,e),il(t),n;if(null!==Os)throw Error(o(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,As=null,yl(t),il(t)}}return null}function ol(t,e){var n=Ps;Ps|=1;try{return t(e)}finally{0===(Ps=n)&&$r()}}function sl(t,e){var n=Ps;Ps&=-2,Ps|=8;try{return t(e)}finally{0===(Ps=n)&&$r()}}function ll(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ei(n)),null!==Os)for(n=Os.return;null!==n;){var i=n;switch(i.tag){case 1:var r=i.type.childContextTypes;null!=r&&gr();break;case 3:ja(),yr();break;case 5:Ua(i);break;case 4:ja();break;case 13:case 19:ur(Ha);break;case 10:ra(i)}n=n.return}As=t,Os=Ll(t.current,null),Ls=e,Is=0,Ns=null,Ds=Rs=1073741823,zs=null,Bs=0,Fs=!1}function ul(t,e){for(;;){try{if(na(),co(),null===Os||null===Os.return)return Is=1,Ns=e,null;t:{var n=t,i=Os.return,r=Os,a=e;if(e=Ls,r.effectTag|=2048,r.firstEffect=r.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var o=a,s=0!=(1&Ha.current),l=i;do{var u;if(u=13===l.tag){var c=l.memoizedState;if(null!==c)u=null!==c.dehydrated;else{var h=l.memoizedProps;u=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(u){var f=l.updateQueue;if(null===f){var d=new Set;d.add(o),l.updateQueue=d}else f.add(o);if(0==(2&l.mode)){if(l.effectTag|=64,r.effectTag&=-2981,1===r.tag)if(null===r.alternate)r.tag=17;else{var p=ha(1073741823,null);p.tag=2,da(r,p)}r.expirationTime=1073741823;break t}a=void 0,r=e;var m=n.pingCache;if(null===m?(m=n.pingCache=new ws,a=new Set,m.set(o,a)):void 0===(a=m.get(o))&&(a=new Set,m.set(o,a)),!a.has(r)){a.add(r);var v=Ml.bind(null,n,o,r);o.then(v,v)}l.effectTag|=4096,l.expirationTime=e;break t}l=l.return}while(null!==l);a=Error((Z(r.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+J(r))}5!==Is&&(Is=2),a=us(a,r),l=i;do{switch(l.tag){case 3:o=a,l.effectTag|=4096,l.expirationTime=e,pa(l,Ss(l,o,e));break t;case 1:o=a;var g=l.type,y=l.stateNode;if(0==(64&l.effectTag)&&("function"==typeof g.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Gs||!Gs.has(y)))){l.effectTag|=4096,l.expirationTime=e,pa(l,Es(l,o,e));break t}}l=l.return}while(null!==l)}Os=vl(Os)}catch(t){e=t;continue}break}}function cl(){var t=Cs.current;return Cs.current=ko,null===t?ko:t}function hl(t,e){t<Rs&&2<t&&(Rs=t),null!==e&&t<Ds&&2<t&&(Ds=t,zs=e)}function fl(t){t>Bs&&(Bs=t)}function dl(){for(;null!==Os;)Os=ml(Os)}function pl(){for(;null!==Os&&!Tr();)Os=ml(Os)}function ml(t){var e=Ms(t.alternate,t,Ls);return t.memoizedProps=t.pendingProps,null===e&&(e=vl(t)),ks.current=null,e}function vl(t){Os=t;do{var e=Os.alternate;if(t=Os.return,0==(2048&Os.effectTag)){t:{var n=e,i=Ls,a=(e=Os).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:vr(e.type)&&gr();break;case 3:ja(),yr(),(a=e.stateNode).pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(null===n||null===n.child)&&Bo(e)&&os(e);break;case 5:Ua(e),i=Ba(za.current);var s=e.type;if(null!==n&&null!=e.stateNode)Jo(n,e,s,a,i),n.ref!==e.ref&&(e.effectTag|=128);else if(a){var l=Ba(Ra.current);if(Bo(e)){var u=(a=e).stateNode;n=a.type;var c=a.memoizedProps,h=i;switch(u[ai]=a,u[oi]=c,s=void 0,i=u,n){case"iframe":case"object":case"embed":Mn("load",i);break;case"video":case"audio":for(u=0;u<te.length;u++)Mn(te[u],i);break;case"source":Mn("error",i);break;case"img":case"image":case"link":Mn("error",i),Mn("load",i);break;case"form":Mn("reset",i),Mn("submit",i);break;case"details":Mn("toggle",i);break;case"input":Ct(i,c),Mn("invalid",i),Hn(h,"onChange");break;case"select":i._wrapperState={wasMultiple:!!c.multiple},Mn("invalid",i),Hn(h,"onChange");break;case"textarea":Rt(i,c),Mn("invalid",i),Hn(h,"onChange")}for(s in Vn(n,c),u=null,c)c.hasOwnProperty(s)&&(l=c[s],"children"===s?"string"==typeof l?i.textContent!==l&&(u=["children",l]):"number"==typeof l&&i.textContent!==""+l&&(u=["children",""+l]):d.hasOwnProperty(s)&&null!=l&&Hn(h,s));switch(n){case"input":Et(i),At(i,c,!0);break;case"textarea":Et(i),zt(i);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(i.onclick=Gn)}s=u,a.updateQueue=s,(a=null!==s)&&os(e)}else{n=e,h=s,c=a,u=9===i.nodeType?i:i.ownerDocument,l===Bt&&(l=jt(h)),l===Bt?"script"===h?((c=u.createElement("div")).innerHTML="<script><\/script>",u=c.removeChild(c.firstChild)):"string"==typeof c.is?u=u.createElement(h,{is:c.is}):(u=u.createElement(h),"select"===h&&(h=u,c.multiple?h.multiple=!0:c.size&&(h.size=c.size))):u=u.createElementNS(l,h),(c=u)[ai]=n,c[oi]=a,Zo(c,e),e.stateNode=c;var f=i,p=Un(h=s,n=a);switch(h){case"iframe":case"object":case"embed":Mn("load",c),i=n;break;case"video":case"audio":for(i=0;i<te.length;i++)Mn(te[i],c);i=n;break;case"source":Mn("error",c),i=n;break;case"img":case"image":case"link":Mn("error",c),Mn("load",c),i=n;break;case"form":Mn("reset",c),Mn("submit",c),i=n;break;case"details":Mn("toggle",c),i=n;break;case"input":Ct(c,n),i=Tt(c,n),Mn("invalid",c),Hn(f,"onChange");break;case"option":i=Lt(c,n);break;case"select":c._wrapperState={wasMultiple:!!n.multiple},i=r({},n,{value:void 0}),Mn("invalid",c),Hn(f,"onChange");break;case"textarea":Rt(c,n),i=Nt(c,n),Mn("invalid",c),Hn(f,"onChange");break;default:i=n}Vn(h,i),u=void 0,l=h;var m=c,v=i;for(u in v)if(v.hasOwnProperty(u)){var g=v[u];"style"===u?Fn(m,g):"dangerouslySetInnerHTML"===u?null!=(g=g?g.__html:void 0)&&Ht(m,g):"children"===u?"string"==typeof g?("textarea"!==l||""!==g)&&Gt(m,g):"number"==typeof g&&Gt(m,""+g):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(d.hasOwnProperty(u)?null!=g&&Hn(f,u):null!=g&&wt(m,u,g,p))}switch(h){case"input":Et(c),At(c,n,!1);break;case"textarea":Et(c),zt(c);break;case"option":null!=n.value&&c.setAttribute("value",""+_t(n.value));break;case"select":(i=c).multiple=!!n.multiple,null!=(c=n.value)?It(i,!!n.multiple,c,!1):null!=n.defaultValue&&It(i,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(c.onclick=Gn)}(a=Jn(s,a))&&os(e)}null!==e.ref&&(e.effectTag|=128)}else if(null===e.stateNode)throw Error(o(166));break;case 6:if(n&&null!=e.stateNode)Ko(0,e,n.memoizedProps,a);else{if("string"!=typeof a&&null===e.stateNode)throw Error(o(166));i=Ba(za.current),Ba(Ra.current),Bo(e)?(s=(a=e).stateNode,i=a.memoizedProps,s[ai]=a,(a=s.nodeValue!==i)&&os(e)):(s=e,(a=(9===i.nodeType?i:i.ownerDocument).createTextNode(a))[ai]=s,e.stateNode=a)}break;case 11:break;case 13:if(ur(Ha),a=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=i;break t}a=null!==a,s=!1,null===n?void 0!==e.memoizedProps.fallback&&Bo(e):(s=null!==(i=n.memoizedState),a||null===i||null!==(i=n.child.sibling)&&(null!==(c=e.firstEffect)?(e.firstEffect=i,i.nextEffect=c):(e.firstEffect=e.lastEffect=i,i.nextEffect=null),i.effectTag=8)),a&&!s&&0!=(2&e.mode)&&(null===n&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Ha.current)?0===Is&&(Is=3):(0!==Is&&3!==Is||(Is=4),0!==Bs&&null!==As&&(Fl(As,Ls),jl(As,Bs)))),(a||s)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:ja();break;case 10:ra(e);break;case 9:case 14:break;case 17:vr(e.type)&&gr();break;case 19:if(ur(Ha),null===(a=e.memoizedState))break;if(s=0!=(64&e.effectTag),null===(c=a.rendering)){if(s)ss(a,!1);else if(0!==Is||null!==n&&0!=(64&n.effectTag))for(n=e.child;null!==n;){if(null!==(c=Ga(n))){for(e.effectTag|=64,ss(a,!1),null!==(s=c.updateQueue)&&(e.updateQueue=s,e.effectTag|=4),null===a.lastEffect&&(e.firstEffect=null),e.lastEffect=a.lastEffect,a=i,s=e.child;null!==s;)n=a,(i=s).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(c=i.alternate)?(i.childExpirationTime=0,i.expirationTime=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=c.childExpirationTime,i.expirationTime=c.expirationTime,i.child=c.child,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,n=c.dependencies,i.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;cr(Ha,1&Ha.current|2),e=e.child;break t}n=n.sibling}}else{if(!s)if(null!==(n=Ga(c))){if(e.effectTag|=64,s=!0,null!==(i=n.updateQueue)&&(e.updateQueue=i,e.effectTag|=4),ss(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate){null!==(e=e.lastEffect=a.lastEffect)&&(e.nextEffect=null);break}}else Vr()>a.tailExpiration&&1<i&&(e.effectTag|=64,s=!0,ss(a,!1),e.expirationTime=e.childExpirationTime=i-1);a.isBackwards?(c.sibling=e.child,e.child=c):(null!==(i=a.last)?i.sibling=c:e.child=c,a.last=c)}if(null!==a.tail){0===a.tailExpiration&&(a.tailExpiration=Vr()+500),i=a.tail,a.rendering=i,a.tail=i.sibling,a.lastEffect=e.lastEffect,i.sibling=null,a=Ha.current,cr(Ha,a=s?1&a|2:1&a),e=i;break t}break;case 20:case 21:break;default:throw Error(o(156,e.tag))}e=null}if(a=Os,1===Ls||1!==a.childExpirationTime){for(s=0,i=a.child;null!==i;)(n=i.expirationTime)>s&&(s=n),(c=i.childExpirationTime)>s&&(s=c),i=i.sibling;a.childExpirationTime=s}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Os.firstEffect),null!==Os.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Os.firstEffect),t.lastEffect=Os.lastEffect),1<Os.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Os:t.firstEffect=Os,t.lastEffect=Os))}else{if(null!==(e=ls(Os)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Os.sibling))return e;Os=t}while(null!==Os);return 0===Is&&(Is=5),null}function gl(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function yl(t){var e=Ur();return Gr(99,bl.bind(null,t,e)),null}function bl(t,e){do{_l()}while(null!==qs);if(0!=(48&Ps))throw Error(o(327));var n=t.finishedWork,i=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var r=gl(n);if(t.firstPendingTime=r,i<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:i<=t.firstSuspendedTime&&(t.firstSuspendedTime=i-1),i<=t.lastPingedTime&&(t.lastPingedTime=0),i<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===As&&(Os=As=null,Ls=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){var a=Ps;Ps|=32,ks.current=null,Xn=En;var s=Qn();if(Yn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{var u=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(t){l=null;break t}var f=0,d=-1,p=-1,m=0,v=0,g=s,y=null;e:for(;;){for(var b;g!==l||0!==c&&3!==g.nodeType||(d=f+c),g!==h||0!==u&&3!==g.nodeType||(p=f+u),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)y=g,g=b;for(;;){if(g===s)break e;if(y===l&&++m===c&&(d=f),y===h&&++v===u&&(p=f),null!==(b=g.nextSibling))break;y=(g=y).parentNode}g=b}l=-1===d||-1===p?null:{start:d,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;Zn={focusedElem:s,selectionRange:l},En=!1,Vs=r;do{try{xl()}catch(t){if(null===Vs)throw Error(o(330));El(Vs,t),Vs=Vs.nextEffect}}while(null!==Vs);Vs=r;do{try{for(s=t,l=e;null!==Vs;){var x=Vs.effectTag;if(16&x&&Gt(Vs.stateNode,""),128&x){var _=Vs.alternate;if(null!==_){var w=_.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&x){case 2:ys(Vs),Vs.effectTag&=-3;break;case 6:ys(Vs),Vs.effectTag&=-3,xs(Vs.alternate,Vs);break;case 1024:Vs.effectTag&=-1025;break;case 1028:Vs.effectTag&=-1025,xs(Vs.alternate,Vs);break;case 4:xs(Vs.alternate,Vs);break;case 8:bs(s,c=Vs,l),vs(c)}Vs=Vs.nextEffect}}catch(t){if(null===Vs)throw Error(o(330));El(Vs,t),Vs=Vs.nextEffect}}while(null!==Vs);if(w=Zn,_=Qn(),x=w.focusedElem,l=w.selectionRange,_!==x&&x&&x.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==l&&Yn(x)&&(_=l.start,void 0===(w=l.end)&&(w=_),"selectionStart"in x?(x.selectionStart=_,x.selectionEnd=Math.min(w,x.value.length)):(w=(_=x.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),c=x.textContent.length,s=Math.min(l.start,c),l=void 0===l.end?s:Math.min(l.end,c),!w.extend&&s>l&&(c=l,l=s,s=c),c=$n(x,s),h=$n(x,l),c&&h&&(1!==w.rangeCount||w.anchorNode!==c.node||w.anchorOffset!==c.offset||w.focusNode!==h.node||w.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),w.removeAllRanges(),s>l?(w.addRange(_),w.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),w.addRange(_))))),_=[];for(w=x;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<_.length;x++)(w=_[x]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Zn=null,En=!!Xn,Xn=null,t.current=n,Vs=r;do{try{for(x=i;null!==Vs;){var S=Vs.effectTag;if(36&S){var E=Vs.alternate;switch(w=x,(_=Vs).tag){case 0:case 11:case 15:ps(16,32,_);break;case 1:var M=_.stateNode;if(4&_.effectTag)if(null===E)M.componentDidMount();else{var T=_.elementType===_.type?E.memoizedProps:Zr(_.type,E.memoizedProps);M.componentDidUpdate(T,E.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var C=_.updateQueue;null!==C&&ya(0,C,M);break;case 3:var k=_.updateQueue;if(null!==k){if(s=null,null!==_.child)switch(_.child.tag){case 5:s=_.child.stateNode;break;case 1:s=_.child.stateNode}ya(0,k,s)}break;case 5:var P=_.stateNode;null===E&&4&_.effectTag&&Jn(_.type,_.memoizedProps)&&P.focus();break;case 6:case 4:case 12:break;case 13:if(null===_.memoizedState){var A=_.alternate;if(null!==A){var O=A.memoizedState;if(null!==O){var L=O.dehydrated;null!==L&&Te(L)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(o(163))}}if(128&S){_=void 0;var I=Vs.ref;if(null!==I){var N=Vs.stateNode;switch(Vs.tag){case 5:_=N;break;default:_=N}"function"==typeof I?I(_):I.current=_}}Vs=Vs.nextEffect}}catch(t){if(null===Vs)throw Error(o(330));El(Vs,t),Vs=Vs.nextEffect}}while(null!==Vs);Vs=null,Dr(),Ps=a}else t.current=n;if(Ws)Ws=!1,qs=t,$s=e;else for(Vs=r;null!==Vs;)e=Vs.nextEffect,Vs.nextEffect=null,Vs=e;if(0===(e=t.firstPendingTime)&&(Gs=null),1073741823===e?t===Xs?Ys++:(Ys=0,Xs=t):Ys=0,"function"==typeof Cl&&Cl(n.stateNode,i),il(t),Us)throw Us=!1,t=Hs,Hs=null,t;return 0!=(8&Ps)?null:($r(),null)}function xl(){for(;null!==Vs;){var t=Vs.effectTag;0!=(256&t)&&ds(Vs.alternate,Vs),0==(512&t)||Ws||(Ws=!0,Wr(97,(function(){return _l(),null}))),Vs=Vs.nextEffect}}function _l(){if(90!==$s){var t=97<$s?97:$s;return $s=90,Gr(t,wl)}}function wl(){if(null===qs)return!1;var t=qs;if(qs=null,0!=(48&Ps))throw Error(o(331));var e=Ps;for(Ps|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:ps(128,0,n),ps(0,64,n)}}catch(e){if(null===t)throw Error(o(330));El(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Ps=e,$r(),!0}function Sl(t,e,n){da(t,e=Ss(t,e=us(n,e),1073741823)),null!==(t=el(t,1073741823))&&il(t)}function El(t,e){if(3===t.tag)Sl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Sl(n,t,e);break}if(1===n.tag){var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Gs||!Gs.has(i))){da(n,t=Es(n,t=us(e,t),1073741823)),null!==(n=el(n,1073741823))&&il(n);break}}n=n.return}}function Ml(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),As===t&&Ls===n?4===Is||3===Is&&1073741823===Rs&&Vr()-js<500?ll(t,Ls):Fs=!0:Bl(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,t.finishedExpirationTime===n&&(t.finishedExpirationTime=0,t.finishedWork=null),il(t)))}function Tl(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Ks(e=Js(),t,null)),null!==(t=el(t,e))&&il(t)}Ms=function(t,e,n){var i=e.expirationTime;if(null!==t){var r=e.pendingProps;if(t.memoizedProps!==r||dr.current)Vo=!0;else{if(i<n){switch(Vo=!1,e.tag){case 3:Xo(e),Fo();break;case 5:if(Va(e),4&e.mode&&1!==n&&r.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:vr(e.type)&&_r(e);break;case 4:Fa(e,e.stateNode.containerInfo);break;case 10:ia(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(i=e.child.childExpirationTime)&&i>=n?es(t,e,n):(cr(Ha,1&Ha.current),null!==(e=as(t,e,n))?e.sibling:null);cr(Ha,1&Ha.current);break;case 19:if(i=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(i)return rs(t,e,n);e.effectTag|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null),cr(Ha,Ha.current),!i)return null}return as(t,e,n)}Vo=!1}}else Vo=!1;switch(e.expirationTime=0,e.tag){case 2:if(i=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,r=mr(e,fr.current),oa(e,n),r=uo(null,e,i,t,r,n),e.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(e.tag=1,co(),vr(i)){var a=!0;_r(e)}else a=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null;var s=i.getDerivedStateFromProps;"function"==typeof s&&wa(e,i,s,t),r.updater=Sa,e.stateNode=r,r._reactInternalFiber=e,Ca(e,i,t,n),e=Yo(null,e,i,!0,a,n)}else e.tag=0,Uo(null,e,r,n),e=e.child;return e;case 16:if(r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(r),1!==r._status)throw r._result;switch(r=r._result,e.type=r,a=e.tag=function(t){if("function"==typeof t)return Ol(t)?1:0;if(null!=t){if((t=t.$$typeof)===G)return 11;if(t===$)return 14}return 2}(r),t=Zr(r,t),a){case 0:e=$o(null,e,r,t,n);break;case 1:e=Qo(null,e,r,t,n);break;case 11:e=Ho(null,e,r,t,n);break;case 14:e=Go(null,e,r,Zr(r.type,t),i,n);break;default:throw Error(o(306,r,""))}return e;case 0:return i=e.type,r=e.pendingProps,$o(t,e,i,r=e.elementType===i?r:Zr(i,r),n);case 1:return i=e.type,r=e.pendingProps,Qo(t,e,i,r=e.elementType===i?r:Zr(i,r),n);case 3:if(Xo(e),null===(i=e.updateQueue))throw Error(o(282));if(r=null!==(r=e.memoizedState)?r.element:null,ga(e,i,e.pendingProps,null,n),(i=e.memoizedState.element)===r)Fo(),e=as(t,e,n);else{if((r=e.stateNode.hydrate)&&(Lo=ni(e.stateNode.containerInfo.firstChild),Oo=e,r=Io=!0),r)for(n=Ia(e,null,i,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Uo(t,e,i,n),Fo();e=e.child}return e;case 5:return Va(e),null===t&&Do(e),i=e.type,r=e.pendingProps,a=null!==t?t.memoizedProps:null,s=r.children,Kn(i,r)?s=null:null!==a&&Kn(i,a)&&(e.effectTag|=16),qo(t,e),4&e.mode&&1!==n&&r.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Uo(t,e,s,n),e=e.child),e;case 6:return null===t&&Do(e),null;case 13:return es(t,e,n);case 4:return Fa(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=La(e,null,i,n):Uo(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,Ho(t,e,i,r=e.elementType===i?r:Zr(i,r),n);case 7:return Uo(t,e,e.pendingProps,n),e.child;case 8:case 12:return Uo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,ia(e,a=r.value),null!==s){var l=s.value;if(0===(a=Xi(l,a)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(l,a):1073741823))){if(s.children===r.children&&!dr.current){e=as(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===i&&0!=(c.observedBits&a)){1===l.tag&&((c=ha(n,null)).tag=2,da(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),aa(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===e.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===e){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Uo(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=(a=e.pendingProps).children,oa(e,n),i=i(r=sa(r,a.unstable_observedBits)),e.effectTag|=1,Uo(t,e,i,n),e.child;case 14:return a=Zr(r=e.type,e.pendingProps),Go(t,e,r,a=Zr(r.type,a),i,n);case 15:return Wo(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,vr(i)?(t=!0,_r(e)):t=!1,oa(e,n),Ma(e,i,r),Ca(e,i,r,n),Yo(null,e,i,!0,t,n);case 19:return rs(t,e,n)}throw Error(o(156,e.tag))};var Cl=null,kl=null;function Pl(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Al(t,e,n,i){return new Pl(t,e,n,i)}function Ol(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ll(t,e){var n=t.alternate;return null===n?((n=Al(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Il(t,e,n,i,r,a){var s=2;if(i=t,"function"==typeof t)Ol(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case B:return Nl(n.children,r,a,e);case H:s=8,r|=7;break;case F:s=8,r|=1;break;case j:return(t=Al(12,n,e,8|r)).elementType=j,t.type=j,t.expirationTime=a,t;case W:return(t=Al(13,n,e,r)).type=W,t.elementType=W,t.expirationTime=a,t;case q:return(t=Al(19,n,e,r)).elementType=q,t.expirationTime=a,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case V:s=10;break t;case U:s=9;break t;case G:s=11;break t;case $:s=14;break t;case Q:s=16,i=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Al(s,n,e,r)).elementType=t,e.type=i,e.expirationTime=a,e}function Nl(t,e,n,i){return(t=Al(7,t,i,e)).expirationTime=n,t}function Rl(t,e,n){return(t=Al(6,t,null,e)).expirationTime=n,t}function Dl(t,e,n){return(e=Al(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zl(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Bl(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Fl(t,e){var n=t.firstSuspendedTime,i=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(i>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function jl(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Vl(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Ul(t,e,n,i){var r=e.current,a=Js(),s=xa.suspense;a=Ks(a,r,s);t:if(n){e:{if(ee(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(vr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(vr(u)){n=xr(n,u,l);break t}}n=l}else n=hr;return null===e.context?e.context=n:e.pendingContext=n,(e=ha(a,s)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),da(r,e),tl(r,a),a}function Hl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Gl(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Wl(t,e){Gl(t,e),(t=t.alternate)&&Gl(t,e)}function ql(t,e,n){var i=new zl(t,e,n=null!=n&&!0===n.hydrate),r=Al(3,null,null,2===e?7:1===e?3:0);i.current=r,r.stateNode=i,t[si]=i.current,n&&0!==e&&function(t){var e=Nn(t);ve.forEach((function(n){Rn(n,t,e)})),ge.forEach((function(n){Rn(n,t,e)}))}(9===t.nodeType?t:t.ownerDocument),this._internalRoot=i}function $l(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ql(t,e,n,i,r){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof r){var s=r;r=function(){var t=Hl(o);s.call(t)}}Ul(e,o,t,r)}else{if(a=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ql(t,0,e?{hydrate:!0}:void 0)}(n,i),o=a._internalRoot,"function"==typeof r){var l=r;r=function(){var t=Hl(o);l.call(t)}}sl((function(){Ul(e,o,t,r)}))}return Hl(o)}function Yl(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:z,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}function Xl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(e))throw Error(o(200));return Yl(t,e,null,n)}ql.prototype.render=function(t,e){Ul(t,this._internalRoot,null,void 0===e?null:e)},ql.prototype.unmount=function(t){var e=this._internalRoot,n=void 0===t?null:t,i=e.containerInfo;Ul(null,e,null,(function(){i[si]=null,null!==n&&n()}))},ae=function(t){if(13===t.tag){var e=Xr(Js(),150,100);tl(t,e),Wl(t,e)}},oe=function(t){if(13===t.tag){Js();var e=Yr++;tl(t,e),Wl(t,e)}},se=function(t){if(13===t.tag){var e=Js();tl(t,e=Ks(e,t,null)),Wl(t,e)}},tt=function(t,e,n){switch(e){case"input":if(Pt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=hi(i);if(!r)throw Error(o(90));Mt(i),Pt(i,r)}}}break;case"textarea":Dt(t,n);break;case"select":null!=(e=n.value)&&It(t,!!n.multiple,e,!1)}},ot=ol,st=function(t,e,n,i){var r=Ps;Ps|=4;try{return Gr(98,t.bind(null,e,n,i))}finally{0===(Ps=r)&&$r()}},lt=function(){0==(49&Ps)&&(function(){if(null!==Qs){var t=Qs;Qs=null,t.forEach((function(t,e){Vl(e,t),il(e)})),$r()}}(),_l())},ut=function(t,e){var n=Ps;Ps|=2;try{return t(e)}finally{0===(Ps=n)&&$r()}};var Zl,Jl,Kl={createPortal:Xl,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(o(188));throw Error(o(268,Object.keys(t)))}return t=null===(t=re(e))?null:t.stateNode},hydrate:function(t,e,n){if(!$l(e))throw Error(o(200));return Ql(null,t,e,!0,n)},render:function(t,e,n){if(!$l(e))throw Error(o(200));return Ql(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){if(!$l(n))throw Error(o(200));if(null==t||void 0===t._reactInternalFiber)throw Error(o(38));return Ql(t,e,n,!1,i)},unmountComponentAtNode:function(t){if(!$l(t))throw Error(o(40));return!!t._reactRootContainer&&(sl((function(){Ql(null,null,t,!1,(function(){t._reactRootContainer=null,t[si]=null}))})),!0)},unstable_createPortal:function(){return Xl.apply(void 0,arguments)},unstable_batchedUpdates:ol,flushSync:function(t,e){if(0!=(48&Ps))throw Error(o(187));var n=Ps;Ps|=1;try{return Gr(99,t.bind(null,e))}finally{Ps=n,$r()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[ui,ci,hi,O.injectEventPluginsByName,f,Ie,function(t){C(t,Le)},rt,at,An,A,_l,{current:!1}]}};Jl=(Zl={findFiberByHostInstance:li,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Cl=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},kl=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(r({},Zl,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=re(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Jl?Jl(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var tu={default:Kl},eu=tu&&Kl||tu;t.exports=eu.default||eu},function(t,e,n){"use strict";t.exports=n(110)},function(t,e,n){"use strict";
/** @license React v0.18.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i,r,a,o,s;if(Object.defineProperty(e,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var t=e.unstable_now();l(!0,t),l=null}catch(t){throw setTimeout(c,0),t}},h=Date.now();e.unstable_now=function(){return Date.now()-h},i=function(t){null!==l?setTimeout(i,0,t):(l=t,setTimeout(c,0))},r=function(t,e){u=setTimeout(t,e)},a=function(){clearTimeout(u)},o=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var v=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof f&&"function"==typeof f.now)e.unstable_now=function(){return f.now()};else{var g=d.now();e.unstable_now=function(){return d.now()-g}}var y=!1,b=null,x=-1,_=5,w=0;o=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<t?Math.floor(1e3/t):5};var S=new MessageChannel,E=S.port2;S.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();w=t+_;try{b(!0,t)?E.postMessage(null):(y=!1,b=null)}catch(t){throw E.postMessage(null),t}}else y=!1},i=function(t){b=t,y||(y=!0,E.postMessage(null))},r=function(t,n){x=p((function(){t(e.unstable_now())}),n)},a=function(){m(x),x=-1}}function M(t,e){var n=t.length;t.push(e);t:for(;;){var i=Math.floor((n-1)/2),r=t[i];if(!(void 0!==r&&0<k(r,e)))break t;t[i]=e,t[n]=r,n=i}}function T(t){return void 0===(t=t[0])?null:t}function C(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length;i<r;){var a=2*(i+1)-1,o=t[a],s=a+1,l=t[s];if(void 0!==o&&0>k(o,n))void 0!==l&&0>k(l,o)?(t[i]=l,t[s]=n,i=s):(t[i]=o,t[a]=n,i=a);else{if(!(void 0!==l&&0>k(l,n)))break t;t[i]=l,t[s]=n,i=s}}}return e}return null}function k(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var P=[],A=[],O=1,L=null,I=3,N=!1,R=!1,D=!1;function z(t){for(var e=T(A);null!==e;){if(null===e.callback)C(A);else{if(!(e.startTime<=t))break;C(A),e.sortIndex=e.expirationTime,M(P,e)}e=T(A)}}function B(t){if(D=!1,z(t),!R)if(null!==T(P))R=!0,i(F);else{var e=T(A);null!==e&&r(B,e.startTime-t)}}function F(t,n){R=!1,D&&(D=!1,a()),N=!0;var i=I;try{for(z(n),L=T(P);null!==L&&(!(L.expirationTime>n)||t&&!o());){var s=L.callback;if(null!==s){L.callback=null,I=L.priorityLevel;var l=s(L.expirationTime<=n);n=e.unstable_now(),"function"==typeof l?L.callback=l:L===T(P)&&C(P),z(n)}else C(P);L=T(P)}if(null!==L)var u=!0;else{var c=T(A);null!==c&&r(B,c.startTime-n),u=!1}return u}finally{L=null,I=i,N=!1}}function j(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=s;e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_scheduleCallback=function(t,n,o){var s=e.unstable_now();if("object"==typeof o&&null!==o){var l=o.delay;l="number"==typeof l&&0<l?s+l:s,o="number"==typeof o.timeout?o.timeout:j(t)}else o=j(t),l=s;return t={id:O++,callback:n,priorityLevel:t,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>s?(t.sortIndex=l,M(A,t),null===T(P)&&t===T(A)&&(D?a():D=!0,r(B,l-s))):(t.sortIndex=o,M(P,t),R||N||(R=!0,i(F))),t},e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_shouldYield=function(){var t=e.unstable_now();z(t);var n=T(P);return n!==L&&null!==L&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<L.expirationTime||o()},e.unstable_requestPaint=V,e.unstable_continueExecution=function(){R||N||(R=!0,i(F))},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return T(P)},e.unstable_Profiling=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=c(n(112)),o=c(n(116)),s=c(n(292)),l=c(n(311)),u=c(n(23));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={menu:"visualization"},t.selectMainView(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;u.default.on("selectMenu",(function(e){t.setState({menu:e}),t.selectMainView()}))}},{key:"selectMainView",value:function(){switch(this.state.menu){case"visualization":$("body").css("overflow-y","hidden");break;case"feature":case"comment":$("body").css("overflow-y","scroll")}}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(a.default,null),r.default.createElement("div",{className:"maincontainer",id:"visualization",style:{display:"visualization"===this.state.menu?"block":"none"}},r.default.createElement(o.default,null)),r.default.createElement("div",{className:"maincontainer",id:"featureExtraction",style:{display:"feature"===this.state.menu?"block":"none"}},r.default.createElement(s.default,null)),r.default.createElement("div",{className:"maincontainer",id:"fuserComments",style:{display:"comment"===this.state.menu?"block":"none"}},r.default.createElement(l.default,null)))}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(25)),o=s(n(23));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.menu="Visualization",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;$("ul[id*=mainMenuList] li").click((function(){a.selectMenu($(this).attr("value"))})),o.default.on("selectMenu",(function(e){t.menu=e}))}},{key:"render",value:function(){return r.default.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",id:"appHeader"},r.default.createElement("a",{className:"navbar-brand",href:"#"},"TimeTubes"),r.default.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},r.default.createElement("span",{className:"navbar-toggler-icon"})),r.default.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor01"},r.default.createElement("ul",{className:"navbar-nav mr-auto",id:"mainMenuList"},r.default.createElement("li",{className:"nav-item mainMenu",value:"about"},r.default.createElement("label",{className:"nav-link menuLabel"},"About")),r.default.createElement("li",{className:"nav-item mainMenu",value:"visualization"},r.default.createElement("label",{className:"nav-link menuLabel"},"Visualization")),r.default.createElement("li",{className:"nav-item mainMenu",value:"feature"},r.default.createElement("label",{className:"nav-link menuLabel"},"Feature Extraction")),r.default.createElement("li",{className:"nav-item mainMenu",value:"comment"},r.default.createElement("label",{className:"nav-link menuLabel"},"Comment")),r.default.createElement("li",{className:"nav-item mainMenu",value:"contact"},r.default.createElement("label",{className:"nav-link menuLabel"},"Contact")))))}}]),e}(r.default.Component);e.default=l},function(t,e,n){t.exports.Dispatcher=n(114)},function(t,e,n){"use strict";e.__esModule=!0;var i=n(115),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(t){var e="ID_"+this._lastID++;return this._callbacks[e]=t,e},t.prototype.unregister=function(t){this._callbacks[t]||i(!1),delete this._callbacks[t]},t.prototype.waitFor=function(t){this._isDispatching||i(!1);for(var e=0;e<t.length;e++){var n=t[e];this._isPending[n]?this._isHandled[n]||i(!1):(this._callbacks[n]||i(!1),this._invokeCallback(n))}},t.prototype.dispatch=function(t){this._isDispatching&&i(!1),this._startDispatching(t);try{for(var e in this._callbacks)this._isPending[e]||this._invokeCallback(e)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},t.prototype._startDispatching=function(t){for(var e in this._callbacks)this._isPending[e]=!1,this._isHandled[e]=!1;this._pendingPayload=t,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();t.exports=r},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r,a,o,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,a,o,s],c=0;(l=new Error(e.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(0)),a=l(n(117)),o=l(n(287)),s=l(n(3));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={data:s.default.getAllData(),width:$(window).width(),heightTT:$(window).height()/2,heightSP:$(window).height()/2},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;s.default.on("upload",(function(){t.setState({data:s.default.getAllData(),width:$(window).width()/s.default.getDataNum()})}))}},{key:"collapseSidebar",value:function(){$("#Controllers").toggle("slow")}},{key:"collapseFeature",value:function(){$("#Feature").toggle("slow")}},{key:"render",value:function(){var t=this.state.data,e=this.state.width,n=this.state.heightTT,i=this.state.heightSP,l=s.default.getDataNum();if(l>0){e=l<=3?window.innerWidth/l:Math.ceil(window.innerWidth/3);var u=$(window).height()-$("#appHeader").outerHeight()-$("#tubeControllers").outerHeight();n=Math.ceil(.6*u)+100,i=u-n}var c=t.map((function(t){return r.default.createElement(o.default,{key:t.id,id:t.id,data:t.data,width:e,heightTT:n,heightSP:i})}));return r.default.createElement("div",{className:"contents",id:"mainVisArea"},r.default.createElement(a.default,null),r.default.createElement("div",{id:"dataColumns",className:"container",style:{display:"inline-block",maxWidth:"100%",width:"100vw",padding:"unset",overflowX:"scroll",overflowY:"hidden"}},r.default.createElement("div",{style:{margin:"unset"}},c)))}}]),e}(r.default.Component);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=u(n(17)),o=u(n(31)),s=c(n(11)),l=c(n(3));c(n(47));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={fileType:"csv",grid:!0,label:!0,axis:!0,plot:!0,comment:!0,clip:!0,shade:!0,lock:!1,multiOptions:!1},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;this.setAverageSlider(),l.default.on("upload",(function(){l.default.getAllData().length>1&&t.setState({multiOptions:!0}),$("#fileInputPanel").css("visibility","hidden")}))}},{key:"setAverageSlider",value:function(){var t=$("#averageSliderVal");$("#averageSlider").slider({range:"min",value:0,min:0,max:200,slide:function(e,n){t.css("display","initial"),t.val(n.value+" days");var i=$("#averageSlider").slider("option","min"),r=$("#averageSlider").slider("option","max")-i,o=$("#averageSlider").width()*(n.value-i)/r-10;t.css("left",o+"px"),a.updateAveragePeriod(n.value)},stop:function(){t.css("display","none")}})}},{key:"changeFileType",value:function(){var t=$("input[name=fileType]:checked").val();this.setState({fileType:t})}},{key:"resetCamera",value:function(){this.getSelectedIDs().forEach((function(t){a.resetCamera(t)}))}},{key:"switchCamera",value:function(){this.getSelectedIDs().forEach((function(t){a.switchCamera(t)}))}},{key:"uploadFile",value:function(){var t=document.getElementById("uploadFileForm").files;o.uploadData(t)}},{key:"searchTime",value:function(){var t=document.getElementById("searchTimeForm").value;this.getSelectedIDs().forEach((function(e){a.searchTime(e,Number(t))}))}},{key:"switchGridDisplay",value:function(){var t=!this.state.grid;this.setState({grid:t}),this.getSelectedIDs().forEach((function(e){a.switchGridDisplay(e,t)}))}},{key:"switchLabelDisplay",value:function(){var t=!this.state.label;this.setState({label:t}),this.getSelectedIDs().forEach((function(e){a.switchLabelDisplay(e,t)}))}},{key:"switchAxisDisplay",value:function(){var t=!this.state.axis;this.setState({axis:t}),this.getSelectedIDs().forEach((function(e){a.switchAxisDisplay(e,t)}))}},{key:"switchPlotDisplay",value:function(){var t=!this.state.plot;this.setState({plot:t}),this.getSelectedIDs().forEach((function(e){a.switchPlotDisplay(e,t)}))}},{key:"switchCommentDisplay",value:function(){var t=!this.state.comment;this.setState({comment:t}),this.getSelectedIDs().forEach((function(e){a.switchComment(e,t)}))}},{key:"changeBackground",value:function(){var t=document.getElementById("backgroundList"),e=t.selectedIndex,n=t.options[e].value;this.getSelectedIDs().forEach((function(t){a.changeBackground(t,n)}))}},{key:"clipTube",value:function(){var t=!this.state.clip;this.setState({clip:t}),this.getSelectedIDs().forEach((function(e){a.clipTube(e,t)}))}},{key:"switchShade",value:function(){var t=!this.state.shade;this.setState({shade:t}),this.getSelectedIDs().forEach((function(e){a.switchShade(e,t)}))}},{key:"selectAllViews",value:function(){var t=$("#selectAllViews").text(),e=$("input[name=selectView]");"Select All"===t?(e.prop("checked",!0),$("#selectAllViews").text("Deselect All")):"Deselect All"===t&&(e.prop("checked",!1),$("#selectAllViews").text("Select All"))}},{key:"timeFitting",value:function(){if(this.state.multiOptions){var t=s.default.getActiveId(),e=s.default.getFocused(t),n=l.default.getData(t);a.timeFitting(e+n.data.spatial[0].z)}}},{key:"mergeTubes",value:function(){if(this.state.multiOptions){var t=this.getSelectedIDs();o.mergeData(t)}}},{key:"lockControl",value:function(){if(this.state.multiOptions){var t=!this.state.lock;this.setState({lock:t});var e=this.getSelectedIDs();a.lockControl(e,t)}}},{key:"clickClose",value:function(){var t=document.getElementById("closeFilePanel").innerText;$("#fileMainArea").slideToggle(),t.match("Close")?document.getElementById("closeFilePanel").innerText="Open the file input panel":document.getElementById("closeFilePanel").innerText="Close the file input panel"}},{key:"clickSub",value:function(){var t=Number($("#initialLineVal").text());t>0&&$("#initialLineVal").text(t-1)}},{key:"clickAdd",value:function(){var t=Number($("#initialLineVal").text());$("#initialLineVal").text(t+1)}},{key:"getSelectedIDs",value:function(){var t=s.default.getCheckedList(),e=[];return t.forEach((function(t,n){t&&e.push(n)})),e}},{key:"basicMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"basicMenu"},r.default.createElement("li",{className:"nav-item dropdown"},r.default.createElement("label",{className:"nav-link menuLabel",href:"#",id:"controllersFileDropdown",role:"button",onClick:this.showFileInputPanel.bind(this)},"File"),r.default.createElement("div",{className:"input-group input-group-sm dropdownonTubeMenu",style:{visibility:"hidden",position:"absolute",top:"2rem",width:"auto",zIndex:"100"},id:"fileInputPanel"},this.fileInputPanel())),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link dropdown-toggle menuLabel",href:"#",id:"controllersSettingDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{fontSize:"1rem"}},""),r.default.createElement("div",{className:"dropdown-menu controllersElem","aria-labelledby":"navbarDropdown"},r.default.createElement("h6",null,"Wheel interval"),r.default.createElement("select",{id:"wheelIntervalList",className:"form-control custom-select",onChange:this.updateWheelInterval.bind(this),style:{fontSize:"0.8rem",height:"1.5rem",width:"5rem"}},r.default.createElement("option",{value:"1"},"1 day"),r.default.createElement("option",{value:"3"},"3 days"),r.default.createElement("option",{value:"5"},"5 days"),r.default.createElement("option",{value:"7"},"7 days")))))}},{key:"showFileInputPanel",value:function(){var t=$("#fileInputPanel").css("visibility"),e=$("#controllersFileDropdown").position();switch(t){case"visible":$("#fileInputPanel").css("visibility","hidden");break;case"hidden":$("#fileInputPanel").css("left",e.left),$("#fileInputPanel").css("visibility","visible")}}},{key:"fileInputPanel",value:function(){return r.default.createElement("div",{id:"inputFile",className:"controllersElem"},r.default.createElement("h6",null,"File type"),r.default.createElement("form",{id:"fileType",className:"form-check-inline",style:{minWidth:"200px"},onChange:this.changeFileType.bind(this)},r.default.createElement("div",{className:"custom-control custom-radio",style:{marginRight:"0.5rem"}},r.default.createElement("input",{type:"radio",name:"fileType",value:"csv",className:"custom-control-input",checked:"csv"===this.state.fileType,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"inlineCheckbox1"},"csv")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginRight:"0.5rem"}},r.default.createElement("input",{type:"radio",name:"fileType",value:"tsv",className:"custom-control-input",checked:"tsv"===this.state.fileType,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"inlineCheckbox1"},"tsv")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginRight:"0.5rem"}},r.default.createElement("input",{type:"radio",name:"fileType",value:"space",className:"custom-control-input",checked:"space"===this.state.fileType,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"inlineCheckbox1"},"space"))),r.default.createElement("h6",null,"Initial line of the data (excluding headers)"),r.default.createElement("div",{className:"form-row",id:"initialLineField",style:{display:"flex",justifyContent:"center"}},r.default.createElement("button",{type:"button",id:"sub",className:"sub btn btn-primary  btn-sm",style:{textAlign:"center"},onClick:this.clickSub.bind(this)},"-"),r.default.createElement("label",{id:"initialLineVal",style:{textAlign:"center",width:"30px"}},"2"),r.default.createElement("button",{type:"button",id:"add",className:"add btn btn-primary btn-sm",style:{textAlign:"center"},onClick:this.clickAdd.bind(this)},"+")),r.default.createElement("h6",null,"Select files"),r.default.createElement("div",{className:"custom-file"},r.default.createElement("input",{type:"file",className:"custom-file-input",id:"uploadFileForm",onChange:this.uploadFile.bind(this),multiple:!0}),r.default.createElement("label",{className:"custom-file-label",htmlFor:"customFile"})))}},{key:"updateWheelInterval",value:function(t){var e=document.getElementById("wheelIntervalList"),n=e.selectedIndex,i=e.options[n].value;a.updateWheelInterval(Number(i))}},{key:"displayMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"displayMenu"},r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",id:"resetCameraBtn",onClick:this.resetCamera.bind(this)},"Reset")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",id:"switchCameraBtn",onClick:this.switchCamera.bind(this)},"Switch camera")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxGrid",checked:this.state.grid,onChange:this.switchGridDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchGridDisplay.bind(this)},"Grid")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxLabel",checked:this.state.label,onChange:this.switchLabelDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchLabelDisplay.bind(this)},"Label")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxAxis",checked:this.state.axis,onChange:this.switchAxisDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchAxisDisplay.bind(this)},"Axis")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxPlot",checked:this.state.plot,onChange:this.switchPlotDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchPlotDisplay.bind(this)},"Plot")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxComment",checked:this.state.comment,onChange:this.switchCommentDisplay.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",onClick:this.switchCommentDisplay.bind(this)},"Comment")),r.default.createElement("div",{className:"form-check form-check-inline menuItem"},r.default.createElement("select",{className:"form-control custom-select",id:"backgroundList",onChange:this.changeBackground.bind(this),style:{fontSize:"0.8rem",height:"1.5rem",width:"5rem"}},r.default.createElement("option",{value:"0x000000"},"Black"),r.default.createElement("option",{value:"0x3f3f3f"},"Gray 75"),r.default.createElement("option",{value:"0x7f7f7f"},"Gray 50"),r.default.createElement("option",{value:"0xbfbfbf"},"Gray 25"),r.default.createElement("option",{value:"0xffffff"},"White"),r.default.createElement("option",{value:"0x191970"},"Navy"))))}},{key:"tubeMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"tubeMenu"},r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxClip",value:"option1",checked:this.state.clip,onChange:this.clipTube.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",htmlFor:"inlineCheckbox1",onClick:this.clipTube.bind(this)},"Clip")),r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxShade",value:"option1",checked:this.state.shade,onChange:this.switchShade.bind(this)}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",htmlFor:"inlineCheckbox1",onClick:this.switchShade.bind(this)},"Shade")),r.default.createElement("li",{className:"nav-item dropdown"},r.default.createElement("label",{className:"nav-link dropdown-toggle menuLabel",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Average"),r.default.createElement("div",{className:"dropdown-menu controllersElem","aria-labelledby":"navbarDropdown"},r.default.createElement("div",{id:"averageSlider",style:{float:"left",width:"8rem",marginBottom:".5rem",marginTop:".5rem"}},r.default.createElement("output",{id:"averageSliderVal",style:{position:"absolute",display:"none",top:"-30px",backgroundColor:"#fff",opacity:"0.8",borderRadius:"3px",color:"#777",padding:"2px"}})))),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",id:"selectAllViews",onClick:this.selectAllViews.bind(this)},"Select All")))}},{key:"multiTubesMenu",value:function(){return r.default.createElement("ul",{className:"navbar-nav",id:"multiTubesMenu"},r.default.createElement("div",{className:"custom-control custom-checkbox menuItem"},r.default.createElement("input",{className:"custom-control-input menuCheck",type:"checkbox",id:"checkboxLock",value:"option1",checked:this.state.lock,onChange:this.lockControl.bind(this),disabled:!this.state.multiOptions}),r.default.createElement("label",{className:"custom-control-label nav-link menuLabel",htmlFor:"inlineCheckbox1",onClick:this.lockControl.bind(this)},"Lock")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("label",{className:"nav-link menuLabel",onClick:this.timeFitting.bind(this)},"Time Fitting")),r.default.createElement("li",{className:"nav-item dropdown"},r.default.createElement("label",{className:"nav-link dropdown-toggle menuLabel",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Fusion"),r.default.createElement("div",{className:"dropdown-menu controllersElem","aria-labelledby":"navbarDropdown"},r.default.createElement("label",{className:"dropdown-item menuLabel",id:"mergeBtn",onClick:this.mergeTubes.bind(this)},"All"))))}},{key:"render",value:function(){return r.default.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",id:"tubeControllers"},r.default.createElement("div",{className:"collapse navbar-collapse",id:"TimeTubesMenu"},this.basicMenu(),this.displayMenu(),this.tubeMenu(),this.multiTubesMenu()))}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(0)),a=h(n(7)),o=h(n(15)),s=n(119),l=h(n(17)),u=f(n(11)),c=f(n(3));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.id=c.default.getTailID(),t.lookup=c.default.getData(t.id).data.lookup,t.state={fileName:c.default.getFileName(t.id),currentVal:c.default.getValues(-1,0),checked:!0},t.tubeNum=u.default.getTubeNum(),t.opacityDistSet=u.default.getOpacityDistSet(),t.opacityCurves=u.default.getOpacityCurves(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;this.setFarSlider(),this.setColormapValueSlider(),this.setColormapHueSlider(),this.setOpacityCurve(),this.setOpacityEllipse(),c.default.on("upload",(function(e){-1===t.id&&(t.id=e,t.lookup=c.default.getData(e).data.lookup,t.setState({fileName:c.default.getFileName(e),currentVal:c.default.getValues(-1,0),checked:!1}))})),c.default.on("updateDetail",(function(e,n){t.id===e&&t.setState({currentVal:c.default.getValues(e,n)})})),u.default.on("updateChecked",(function(e){t.id===e&&t.setState({checked:!t.state.checked})}))}},{key:"setFarSlider",value:function(){var t=this.id,e=$("#farSliderVal_"+t);$("#farSlider_"+t).slider({range:"min",value:0,min:1,max:100,slide:function(n,i){e.css("display","initial"),e.val(i.value);var r=$("#farSlider_"+t).slider("option","min"),a=$("#farSlider_"+t).slider("option","max")-r,o=$("#farSlider_"+t).width()*(i.value-r)/a-10;e.css("left",o+"px"),l.changeFar(t,i.value)},stop:function(){e.css("display","none")}}),$("#farSliderVal_"+t).val($("#farSlider_"+t).slider("value"))}},{key:"setColormapValueSlider",value:function(){var t=this.id,e=$("#colorValue_"+t),n=$("#colorValueMin_"+t),i=$("#colorValueMax_"+t);e.slider({range:!0,min:0,max:100,values:[0,100],orientation:"vertical",slide:function(r,a){n.css("display","initial"),i.css("display","initial");var o=c.default.getData(t),s=o.data.meta.min.V,u=o.data.meta.max.V,h=a.values[0]/100*(u-s)+s,f=a.values[1]/100*(u-s)+s;h=Math.log10(Math.abs(h))<-2&&0!==h?h.toExponential(1):h.toFixed(2),f=Math.log10(Math.abs(f))<-2&&0!==f?f.toExponential(1):f.toFixed(2),n.val(h),i.val(f);var d=e.slider("option","min"),p=e.slider("option","max")-d,m=150*(a.values[0]-d)/p-10,v=140-150*(a.values[1]-d)/p;n.css("bottom",m+"px"),i.css("top",v+"px");var g=o.data.meta.max.V-o.data.meta.min.V;l.updateMinMaxV(t,a.values[0]/100*g+o.data.meta.min.V,a.values[1]/100*g+o.data.meta.min.V)},stop:function(){n.css("display","none"),i.css("display","none")}}),n.val(e.slider("values",0)),i.val(e.slider("values",1))}},{key:"setColormapHueSlider",value:function(){var t=this.id,e=$("#colorHue_"+t),n=$("#colorHueMin_"+t),i=$("#colorHueMax_"+t);e.slider({range:!0,min:0,max:100,values:[0,100],slide:function(e,r){n.css("display","initial"),i.css("display","initial");var a=c.default.getData(t),o=a.data.meta.min.H,s=a.data.meta.max.H,u=r.values[0]/100*(s-o)+o,h=r.values[1]/100*(s-o)+o;u=Math.log10(Math.abs(u))<-2&&0!==u?u.toExponential(1):u.toFixed(2),h=Math.log10(Math.abs(h))<-2&&0!==h?h.toExponential(1):h.toFixed(2),n.val(u),i.val(h);var f=150*r.values[0]/100-8,d=142-150*r.values[1]/100;n.css("left",f+"px"),i.css("right",d+"px");var p=a.data.meta.max.H-a.data.meta.min.H;l.updateMinMaxH(t,r.values[0]/100*p+a.data.meta.min.H,r.values[1]/100*p+a.data.meta.min.H)},stop:function(){n.css("display","none"),i.css("display","none")}}),n.val(e.slider("values",0)),i.val(e.slider("values",1))}},{key:"setOpacityCurve",value:function(){var t=10,e=15,n=15,i=150-n-10,r=150-t-e,o=a.select("#opacityCurve_"+this.id).append("svg").attr("width",150).attr("height",150).attr("id","opacityCurveArea_"+this.id);o.append("rect").attr("width",i).attr("height",r).style("fill","none").style("stroke","lightgray").attr("transform","translate("+n+","+t+")");for(var s=i/(this.tubeNum-1),l=1;l<this.tubeNum;l++)o.append("line").attr("x1",s*l).attr("y1",0).attr("x2",s*l).attr("y2",i).style("stroke","lightgray").attr("transform","translate("+n+","+t+")"),o.append("line").attr("x1",0).attr("y1",s*l).attr("x2",r).attr("y2",s*l).style("stroke","lightgray").attr("transform","translate("+n+","+t+")");this.xScaleOpacity=a.scaleLinear().domain([0,1]).range([n,150-n]),this.yScaleOpacity=a.scaleLinear().domain([0,1]).range([150-t,e]),o.append("g").attr("class","axisLabel opacityCurveXAxis").append("text").attr("x",75).attr("y",150-e/2+5).style("fill","black").style("text-anchor","middle").style("font-size","xx-small").text("Radial size of the tube"),o.append("g").append("text").attr("class","axisLabel opacityCurveYAxis").attr("transform","rotate(-90)").attr("x",-75).attr("y",n/2+2).style("fill","black").style("font-size","xx-small").style("text-anchor","middle").text("Opacity"),o.append("path").datum(this.opacityDistSet.Default).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","opacityCurvePath_"+this.id).attr("d",a.line().x(function(t){return this.xScaleOpacity(t[0])}.bind(this)).y(function(t){return this.yScaleOpacity(t[1])}.bind(this)).curve(a.curveBasis))}},{key:"setOpacityEllipse",value:function(){var t=10,e=10,n=150-e-10,i=150-t-10,r=a.select("#opacityEllipse_"+this.id).append("svg").attr("width",150).attr("height",150).attr("id","opacityEllipseArea_"+this.id);r.append("rect").attr("width",n).attr("height",i).style("fill","none").style("stroke","lightgray").attr("transform","translate("+e+","+t+")");for(var o=Math.ceil(e+n/2),s=Math.ceil(t+i/2),l=this.opacityCurves.Default.getSpacedPoints(this.tubeNum),u=1;u<=this.tubeNum;u++){var c=1-(1-l[u-1].y)/(1-l[u].y);r.append("ellipse").attr("cx",o).attr("cy",s).attr("rx",50*u/this.tubeNum).attr("ry",30*u/this.tubeNum).attr("id","opacityEllipseEllipse_"+this.id+"-"+u).style("fill","orange").style("opacity",c)}}},{key:"onChangeCheckbox",value:function(t){l.updateChecked(t)}},{key:"zoomOutTimeTubes",value:function(){l.zoomOutTimeTubes(this.id)}},{key:"resetZoomTimeTubes",value:function(){l.resetZoomTimeTubes(this.id)}},{key:"zoomInTimeTubes",value:function(){l.zoomInTimeTubes(this.id)}},{key:"showPopoverFar",value:function(){var t=$("#changeFar_"+this.id).css("visibility"),e=$("#farPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changeFar_"+this.id).css("visibility","hidden");break;case"hidden":$("#changeFar_"+this.id).css("left",e.left),$("#changeFar_"+this.id).css("visibility","visible"),$("#farSlider_"+this.id).slider("option","value",u.default.getCameraProp(this.id).far)}}},{key:"showPopoverPlotColor",value:function(){var t=$("#changePlotColor_"+this.id).css("visibility"),e=$("#plotColorPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changePlotColor_"+this.id).css("visibility","hidden");break;case"hidden":$("#changePlotColor_"+this.id).css("left",e.left),$("#changePlotColor_"+this.id).css("visibility","visible")}}},{key:"showPopoverOpacity",value:function(){var t=$("#changeOpacity_"+this.id).css("visibility"),e=$("#opacityPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changeOpacity_"+this.id).css("visibility","hidden");break;case"hidden":$("#changeOpacity_"+this.id).css("left",e.left),$("#changeOpacity_"+this.id).css("visibility","visible")}}},{key:"showPopoverColormap",value:function(){var t=$("#changeColormap_"+this.id).css("visibility"),e=$("#colormapPopoverBtn_"+this.id).position();switch(t){case"visible":$("#changeColormap_"+this.id).css("visibility","hidden");break;case"hidden":$("#changeColormap_"+this.id).css("left",e.left),$("#changeColormap_"+this.id).css("visibility","visible")}}},{key:"showPopoverSearch",value:function(){var t=$("#searchTime_"+this.id).css("visibility"),e=$("#searchPopoverBtn_"+this.id).position();switch(t){case"visible":$("#searchTime_"+this.id).css("visibility","hidden");break;case"hidden":$("#searchTime_"+this.id).css("left",e.left),$("#searchTime_"+this.id).css("visibility","visible")}}},{key:"searchTime",value:function(){var t=this.id,e=$("#searchTimeInput_"+t).val();isNaN(e)||""==e||l.searchTime(t,Number(e))}},{key:"changePlotColor",value:function(t,e){l.changePlotColor(this.id,t.hex)}},{key:"changeColorMap",value:function(){var t=document.getElementById("uploadColormap").files,e=new FileReader;e.readAsDataURL(t[0]),e.onload=function(){var t=e.result;document.getElementById("colormap_"+this.id).src=t,(new o.TextureLoader).load(t,function(t){l.updateTexture(this.id,t)}.bind(this))}.bind(this)}},{key:"changeOpacityDistribution",value:function(){var t=document.getElementById("opacityList_"+this.id),e=t.selectedIndex,n=t.options[e].value;this.drawOpacityCurve(n),this.drawOpacityEllipse(n),l.updateOpacity(this.id,n)}},{key:"drawOpacityCurve",value:function(t){a.select("#opacityCurvePath_"+this.id).remove(),a.select("#opacityCurveArea_"+this.id).append("path").datum(this.opacityDistSet[t]).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","opacityCurvePath_"+this.id).attr("d",a.line().x(function(t){return this.xScaleOpacity(t[0])}.bind(this)).y(function(t){return this.yScaleOpacity(t[1])}.bind(this)).curve(a.curveBasis))}},{key:"drawOpacityEllipse",value:function(t){var e=1;if("Flat"===t)for(var n=1;n<=this.tubeNum;n++)a.select("#opacityEllipseEllipse_"+this.id+"-"+n).style("opacity",e);else for(var i=this.opacityCurves[t].getSpacedPoints(this.tubeNum),r=1;r<=this.tubeNum;r++)e=1-(1-i[r-1].y)/(1-i[r].y),a.select("#opacityEllipseEllipse_"+this.id+"-"+r).style("opacity",e)}},{key:"render",value:function(){var t=this.state.currentVal,e=[];for(var n in t){var i=void 0;i="z"===n||"H"===n?t[n].toFixed(3):"V"===n?t[n].toExponential(2):t[n].toFixed(4),e.push(r.default.createElement("tr",{key:n+"_"+this.id,className:"detailTableRow"},r.default.createElement("td",{className:"detailTableData detailTableVari"},this.lookup[n]),r.default.createElement("td",{className:"detailTableData"},i)))}return r.default.createElement("div",{id:"onViewportControllers_"+this.id},r.default.createElement("div",{id:"fileSelector_"+this.id,className:"controllersOnView",style:{position:"absolute",color:"white",top:"0px",left:"0px",zIndex:"10",fontSize:"0.8rem",marginLeft:"1.5rem"}},r.default.createElement("input",{type:"checkbox",id:"selectView_"+this.id,name:"selectView",key:this.id,value:this.id,checked:this.state.checked,onChange:this.onChangeCheckbox.bind(this,this.id)}),r.default.createElement("label",{id:"fileName_"+this.id,style:{paddingLeft:"0.5rem",paddingRight:"0.5rem"}},this.state.fileName)),r.default.createElement("div",{id:"zoomControllers_"+this.id,className:"controllersOnView",style:{position:"absolute",top:"0px",right:"0px",zIndex:"20",fontSize:"0.8rem"}},r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"zoomOutBtn_"+this.id,onClick:this.zoomOutTimeTubes.bind(this)},"-"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"resetZoomBtn_"+this.id,onClick:this.resetZoomTimeTubes.bind(this)},""),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"zoomInBtn_"+this.id,onClick:this.zoomInTimeTubes.bind(this)},"+")),r.default.createElement("div",{id:"eachTubeControllers_"+this.id,className:"controllersOnView",style:{position:"absolute",bottom:"0px",left:"0px",zIndex:"30",fontSize:"0.8rem"}},r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"colormapPopoverBtn_"+this.id,onClick:this.showPopoverColormap.bind(this)},"Colormap"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"farPopoverBtn_"+this.id,onClick:this.showPopoverFar.bind(this)},"Far"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"plotColorPopoverBtn_"+this.id,onClick:this.showPopoverPlotColor.bind(this)},"Plot Color"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"opacityPopoverBtn_"+this.id,onClick:this.showPopoverOpacity.bind(this)},"Opacity"),r.default.createElement("button",{type:"button",className:"btn btn-sm btn-primary",id:"searchPopoverBtn_"+this.id,onClick:this.showPopoverSearch.bind(this)},"Search")),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changeColormap_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"31"}},r.default.createElement("div",{id:"colorFilter_"+this.id},r.default.createElement("div",{id:"colorValue_"+this.id,style:{float:"left",height:"150px"}},r.default.createElement("output",{id:"colorValueMax_"+this.id,style:{marginLeft:"1.3rem"}}),r.default.createElement("output",{id:"colorValueMin_"+this.id,style:{marginLeft:"1.3rem"}})),r.default.createElement("div",{id:"colorMap_"+this.id,style:{float:"left",marginLeft:"10px"}},r.default.createElement("img",{src:"img/1_256.png",id:"colormap_"+this.id,style:{width:"150px",height:"150px"}})),r.default.createElement("div",{style:{clear:"both"}}),r.default.createElement("div",{id:"colorHue_"+this.id,style:{width:"150px",marginTop:"5px",marginLeft:"20px"}},r.default.createElement("output",{id:"colorHueMax_"+this.id,style:{bottom:"1.3rem"}}),r.default.createElement("output",{id:"colorHueMin_"+this.id,style:{bottom:"1.3rem"}})),r.default.createElement("div",{className:"custom-file",style:{width:"170px",marginTop:"0.5rem"}},r.default.createElement("input",{type:"file",className:"custom-file-input",id:"uploadColormap",onChange:this.changeColorMap.bind(this)}),r.default.createElement("label",{className:"custom-file-label",htmlFor:"uploadColormap"},"Change")))),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changeFar_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"32"}},r.default.createElement("div",{id:"farSliderArea_"+this.id},r.default.createElement("label",{id:"idLabel_"+this.id,style:{float:"left",width:"2rem"}},"far"),r.default.createElement("div",{id:"farSlider_"+this.id,style:{float:"left",width:"8rem",marginBottom:".5rem",marginTop:".5rem"}},r.default.createElement("output",{id:"farSliderVal_"+this.id,style:{position:"absolute",display:"none",top:"-30px",backgroundColor:"#fff",opacity:"0.8",borderRadius:"3px",color:"#777",padding:"2px"}})))),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changePlotColor_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"33"}},r.default.createElement(s.SketchPicker,{presetColors:u.default.getPresetColors(),color:u.default.getPlotColor(this.id),onChange:this.changePlotColor.bind(this)})),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"changeOpacity_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"auto",zIndex:"34",display:"block"}},r.default.createElement("select",{className:"form-control",id:"opacityList_"+this.id,onChange:this.changeOpacityDistribution.bind(this),style:{fontSize:"0.8rem",width:"150px"}},r.default.createElement("option",{value:"Default"},"Default"),r.default.createElement("option",{value:"Flat"},"Flat"),r.default.createElement("option",{value:"Linear"},"Linear"),r.default.createElement("option",{value:"Valley"},"Valley shaped")),r.default.createElement("div",{className:"currentOpacity",style:{display:"flex"}},r.default.createElement("div",{id:"opacityCurve_"+this.id}),r.default.createElement("div",{id:"opacityEllipse_"+this.id}))),r.default.createElement("div",{className:"input-group input-group-sm popover-controller",id:"searchTime_"+this.id,style:{visibility:"hidden",position:"absolute",bottom:"1.7rem",width:"10rem",zIndex:"35"}},r.default.createElement("input",{type:"text",className:"form-control custom-input",id:"searchTimeInput_"+this.id,placeholder:"Input JD"}),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"searchTimeBtn_"+this.id,onClick:this.searchTime.bind(this)},"Search")),r.default.createElement("div",{id:"detailValueArea",className:"controllersOnView",style:{position:"absolute",color:"white",right:"0px",bottom:"0px",whiteSpace:"pre-line",zIndex:"11",fontSize:"0.8rem"}},r.default.createElement("table",{className:"detailTable"},r.default.createElement("tbody",{className:"detailTableBody"},e))))}}]),e}(r.default.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomPicker=e.TwitterPicker=e.SwatchesPicker=e.SliderPicker=e.SketchPicker=e.PhotoshopPicker=e.MaterialPicker=e.HuePicker=e.GithubPicker=e.CompactPicker=e.ChromePicker=e.default=e.CirclePicker=e.BlockPicker=e.AlphaPicker=void 0;var i=n(120);Object.defineProperty(e,"AlphaPicker",{enumerable:!0,get:function(){return y(i).default}});var r=n(249);Object.defineProperty(e,"BlockPicker",{enumerable:!0,get:function(){return y(r).default}});var a=n(251);Object.defineProperty(e,"CirclePicker",{enumerable:!0,get:function(){return y(a).default}});var o=n(253);Object.defineProperty(e,"ChromePicker",{enumerable:!0,get:function(){return y(o).default}});var s=n(258);Object.defineProperty(e,"CompactPicker",{enumerable:!0,get:function(){return y(s).default}});var l=n(261);Object.defineProperty(e,"GithubPicker",{enumerable:!0,get:function(){return y(l).default}});var u=n(263);Object.defineProperty(e,"HuePicker",{enumerable:!0,get:function(){return y(u).default}});var c=n(265);Object.defineProperty(e,"MaterialPicker",{enumerable:!0,get:function(){return y(c).default}});var h=n(266);Object.defineProperty(e,"PhotoshopPicker",{enumerable:!0,get:function(){return y(h).default}});var f=n(272);Object.defineProperty(e,"SketchPicker",{enumerable:!0,get:function(){return y(f).default}});var d=n(275);Object.defineProperty(e,"SliderPicker",{enumerable:!0,get:function(){return y(d).default}});var p=n(279);Object.defineProperty(e,"SwatchesPicker",{enumerable:!0,get:function(){return y(p).default}});var m=n(283);Object.defineProperty(e,"TwitterPicker",{enumerable:!0,get:function(){return y(m).default}});var v=n(101);Object.defineProperty(e,"CustomPicker",{enumerable:!0,get:function(){return y(v).default}});var g=y(o);function y(t){return t&&t.__esModule?t:{default:t}}e.default=g.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlphaPicker=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=l(n(0)),a=l(n(1)),o=n(2),s=l(n(248));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.AlphaPicker=function(t){var e=t.rgb,n=t.hsl,s=t.width,l=t.height,u=t.onChange,c=t.direction,h=t.style,f=t.renderers,d=t.pointer,p=t.className,m=void 0===p?"":p,v=(0,a.default)({default:{picker:{position:"relative",width:s,height:l},alpha:{radius:"2px",style:h}}});return r.default.createElement("div",{style:v.picker,className:"alpha-picker "+m},r.default.createElement(o.Alpha,i({},v.alpha,{rgb:e,hsl:n,pointer:d,renderers:f,onChange:u,direction:c})))};u.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},e.default=(0,o.ColorWrap)(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flattenNames=void 0;var i=s(n(122)),r=s(n(48)),a=s(n(75)),o=s(n(18));function s(t){return t&&t.__esModule?t:{default:t}}var l=e.flattenNames=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,o.default)(e,(function(e){Array.isArray(e)?t(e).map((function(t){return n.push(t)})):(0,a.default)(e)?(0,r.default)(e,(function(t,e){!0===t&&n.push(e),n.push(e+"-"+t)})):(0,i.default)(e)&&n.push(e)})),n};e.default=l},function(t,e,n){var i=n(20),r=n(8),a=n(16);t.exports=function(t){return"string"==typeof t||!r(t)&&a(t)&&"[object String]"==i(t)}},function(t,e,n){var i=n(27),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[s]=n:delete t[s]),r}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return function(e,n,i){for(var r=-1,a=Object(e),o=i(e),s=o.length;s--;){var l=o[t?s:++r];if(!1===n(a[l],l,a))break}return e}}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(20),r=n(16);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(20),r=n(52),a=n(16),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&r(t.length)&&!!o[i(t)]}},function(t,e,n){var i=n(55),r=n(131),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var i=n(73)(Object.keys,Object);t.exports=i},function(t,e,n){var i=n(133),r=n(177),a=n(34),o=n(8),s=n(187);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?r(t[0],t[1]):i(t):s(t)}},function(t,e,n){var i=n(134),r=n(176),a=n(86);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},function(t,e,n){var i=n(35),r=n(78);t.exports=function(t,e,n,a){var o=n.length,s=o,l=!a;if(null==t)return!s;for(t=Object(t);o--;){var u=n[o];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],h=t[c],f=u[1];if(l&&u[2]){if(void 0===h&&!(c in t))return!1}else{var d=new i;if(a)var p=a(h,f,c,t,e,d);if(!(void 0===p?r(f,h,3,a,d):p))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var i=n(37),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():r.call(e,n,1),--this.size,!0)}},function(t,e,n){var i=n(37);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var i=n(37);t.exports=function(t){return i(this.__data__,t)>-1}},function(t,e,n){var i=n(37);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},function(t,e,n){var i=n(36);t.exports=function(){this.__data__=new i,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var i=n(36),r=n(58),a=n(59);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var o=n.__data__;if(!r||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var i=n(56),r=n(146),a=n(10),o=n(77),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||r(t))&&(i(t)?f:s).test(o(t))}},function(t,e,n){var i,r=n(147),a=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!a&&a in t}},function(t,e,n){var i=n(12)["__core-js_shared__"];t.exports=i},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var i=n(150),r=n(36),a=n(58);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(a||r),string:new i}}},function(t,e,n){var i=n(151),r=n(152),a=n(153),o=n(154),s=n(155);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(38);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var i=n(38),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},function(t,e,n){var i=n(38),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},function(t,e,n){var i=n(38);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var i=n(39);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var i=n(39);t.exports=function(t){return i(this,t).get(t)}},function(t,e,n){var i=n(39);t.exports=function(t){return i(this,t).has(t)}},function(t,e,n){var i=n(39);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},function(t,e,n){var i=n(35),r=n(79),a=n(167),o=n(170),s=n(40),l=n(8),u=n(32),c=n(51),h="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,p,m){var v=l(t),g=l(e),y=v?"[object Array]":s(t),b=g?"[object Array]":s(e),x=(y="[object Arguments]"==y?h:y)==h,_=(b="[object Arguments]"==b?h:b)==h,w=y==b;if(w&&u(t)){if(!u(e))return!1;v=!0,x=!1}if(w&&!x)return m||(m=new i),v||c(t)?r(t,e,n,d,p,m):a(t,e,y,n,d,p,m);if(!(1&n)){var S=x&&f.call(t,"__wrapped__"),E=_&&f.call(e,"__wrapped__");if(S||E){var M=S?t.value():t,T=E?e.value():e;return m||(m=new i),p(M,T,n,d,m)}}return!!w&&(m||(m=new i),o(t,e,n,d,p,m))}},function(t,e,n){var i=n(59),r=n(163),a=n(164);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=a,t.exports=o},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var i=n(27),r=n(80),a=n(29),o=n(79),s=n(168),l=n(169),u=i?i.prototype:void 0,c=u?u.valueOf:void 0;t.exports=function(t,e,n,i,u,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=s;case"[object Set]":var p=1&i;if(d||(d=l),t.size!=e.size&&!p)return!1;var m=f.get(t);if(m)return m==e;i|=2,f.set(t,e);var v=o(d(t),d(e),i,u,h,f);return f.delete(t),v;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var i=n(81),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,o,s){var l=1&n,u=i(t),c=u.length;if(c!=i(e).length&&!l)return!1;for(var h=c;h--;){var f=u[h];if(!(l?f in e:r.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var m=l;++h<c;){var v=t[f=u[h]],g=e[f];if(a)var y=l?a(g,v,f,e,t,s):a(v,g,f,t,e,s);if(!(void 0===y?v===g||o(v,g,n,a,s):y)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(p=!1)}return s.delete(t),s.delete(e),p}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}},function(t,e,n){var i=n(21)(n(12),"DataView");t.exports=i},function(t,e,n){var i=n(21)(n(12),"Promise");t.exports=i},function(t,e,n){var i=n(21)(n(12),"Set");t.exports=i},function(t,e,n){var i=n(21)(n(12),"WeakMap");t.exports=i},function(t,e,n){var i=n(85),r=n(28);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,i(o)]}return e}},function(t,e,n){var i=n(78),r=n(178),a=n(184),o=n(61),s=n(85),l=n(86),u=n(42);t.exports=function(t,e){return o(t)&&s(e)?l(u(t),e):function(n){var o=r(n,t);return void 0===o&&o===e?a(n,t):i(e,o,3)}}},function(t,e,n){var i=n(87);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},function(t,e,n){var i=n(180),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)})),e}));t.exports=o},function(t,e,n){var i=n(181);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var i=n(59);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(r.Cache||i),n}r.Cache=i,t.exports=r},function(t,e,n){var i=n(183);t.exports=function(t){return null==t?"":i(t)}},function(t,e,n){var i=n(27),r=n(76),a=n(8),o=n(41),s=i?i.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return r(e,t)+"";if(o(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){var i=n(185),r=n(186);t.exports=function(t,e){return null!=t&&r(t,e,i)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var i=n(88),r=n(49),a=n(8),o=n(50),s=n(52),l=n(42);t.exports=function(t,e,n){for(var u=-1,c=(e=i(e,t)).length,h=!1;++u<c;){var f=l(e[u]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++u!=c?h:!!(c=null==t?0:t.length)&&s(c)&&o(f,c)&&(a(t)||r(t))}},function(t,e,n){var i=n(188),r=n(189),a=n(61),o=n(42);t.exports=function(t){return a(t)?i(o(t)):r(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var i=n(87);t.exports=function(t){return function(e){return i(e,t)}}},function(t,e,n){var i=n(89),r=n(24);t.exports=function(t,e){var n=-1,a=r(t)?Array(t.length):[];return i(t,(function(t,i,r){a[++n]=e(t,i,r)})),a}},function(t,e,n){var i=n(24);t.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==r(s[o],o,s););return n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeClasses=void 0;var i=o(n(48)),r=o(n(193)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function o(t){return t&&t.__esModule?t:{default:t}}var s=e.mergeClasses=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.default&&(0,r.default)(t.default)||{};return e.map((function(e){var r=t[e];return r&&(0,i.default)(r,(function(t,e){n[e]||(n[e]={}),n[e]=a({},n[e],r[e])})),e})),n};e.default=s},function(t,e,n){var i=n(194);t.exports=function(t){return i(t,5)}},function(t,e,n){var i=n(35),r=n(90),a=n(91),o=n(195),s=n(196),l=n(93),u=n(94),c=n(199),h=n(200),f=n(81),d=n(201),p=n(40),m=n(202),v=n(203),g=n(97),y=n(8),b=n(32),x=n(208),_=n(10),w=n(210),S=n(28),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,t.exports=function t(e,n,M,T,C,k){var P,A=1&n,O=2&n,L=4&n;if(M&&(P=C?M(e,T,C,k):M(e)),void 0!==P)return P;if(!_(e))return e;var I=y(e);if(I){if(P=m(e),!A)return u(e,P)}else{var N=p(e),R="[object Function]"==N||"[object GeneratorFunction]"==N;if(b(e))return l(e,A);if("[object Object]"==N||"[object Arguments]"==N||R&&!C){if(P=O||R?{}:g(e),!A)return O?h(e,s(P,e)):c(e,o(P,e))}else{if(!E[N])return C?e:{};P=v(e,N,A)}}k||(k=new i);var D=k.get(e);if(D)return D;k.set(e,P),w(e)?e.forEach((function(i){P.add(t(i,n,M,i,e,k))})):x(e)&&e.forEach((function(i,r){P.set(r,t(i,n,M,r,e,k))}));var z=L?O?d:f:O?keysIn:S,B=I?void 0:z(e);return r(B||e,(function(i,r){B&&(i=e[r=i]),a(P,r,t(i,n,M,r,e,k))})),P}},function(t,e,n){var i=n(30),r=n(28);t.exports=function(t,e){return t&&i(e,r(e),t)}},function(t,e,n){var i=n(30),r=n(43);t.exports=function(t,e){return t&&i(e,r(e),t)}},function(t,e,n){var i=n(10),r=n(55),a=n(198),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return a(t);var e=r(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var i=n(30),r=n(60);t.exports=function(t,e){return i(t,r(t),e)}},function(t,e,n){var i=n(30),r=n(95);t.exports=function(t,e){return i(t,r(t),e)}},function(t,e,n){var i=n(82),r=n(95),a=n(43);t.exports=function(t){return i(t,a,r)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(i.index=t.index,i.input=t.input),i}},function(t,e,n){var i=n(63),r=n(204),a=n(205),o=n(206),s=n(96);t.exports=function(t,e,n){var l=t.constructor;switch(e){case"[object ArrayBuffer]":return i(t);case"[object Boolean]":case"[object Date]":return new l(+t);case"[object DataView]":return r(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(t);case"[object RegExp]":return a(t);case"[object Set]":return new l;case"[object Symbol]":return o(t)}}},function(t,e,n){var i=n(63);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var i=n(27),r=i?i.prototype:void 0,a=r?r.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},function(t,e,n){var i=n(10),r=Object.create,a=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},function(t,e,n){var i=n(209),r=n(53),a=n(54),o=a&&a.isMap,s=o?r(o):i;t.exports=s},function(t,e,n){var i=n(40),r=n(16);t.exports=function(t){return r(t)&&"[object Map]"==i(t)}},function(t,e,n){var i=n(211),r=n(53),a=n(54),o=a&&a.isSet,s=o?r(o):i;t.exports=s},function(t,e,n){var i=n(40),r=n(16);t.exports=function(t){return r(t)&&"[object Set]"==i(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoprefix=void 0;var i,r=n(48),a=(i=r)&&i.__esModule?i:{default:i},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};var s={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var e=t&&t.split(" ");return{position:"absolute",top:e&&e[0],right:e&&e[1],bottom:e&&e[2],left:e&&e[3]}},extend:function(t,e){var n=e[t];return n||{extend:t}}},l=e.autoprefix=function(t){var e={};return(0,a.default)(t,(function(t,n){var i={};(0,a.default)(t,(function(t,e){var n=s[e];n?i=o({},i,n(t)):i[e]=t})),e[n]=i})),e};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hover=void 0;var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.hover=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function i(){var n,a,u;s(this,i);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return a=u=l(this,(n=i.__proto__||Object.getPrototypeOf(i)).call.apply(n,[this].concat(h))),u.state={hover:!1},u.handleMouseOver=function(){return u.setState({hover:!0})},u.handleMouseOut=function(){return u.setState({hover:!1})},u.render=function(){return o.default.createElement(e,{onMouseOver:u.handleMouseOver,onMouseOut:u.handleMouseOut},o.default.createElement(t,r({},u.props,u.state)))},l(u,a)}return u(i,n),i}(o.default.Component)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.active=void 0;var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function i(){var n,a,u;s(this,i);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return a=u=l(this,(n=i.__proto__||Object.getPrototypeOf(i)).call.apply(n,[this].concat(h))),u.state={active:!1},u.handleMouseDown=function(){return u.setState({active:!0})},u.handleMouseUp=function(){return u.setState({active:!1})},u.render=function(){return o.default.createElement(e,{onMouseDown:u.handleMouseDown,onMouseUp:u.handleMouseUp},o.default.createElement(t,r({},u.props,u.state)))},l(u,a)}return u(i,n),i}(o.default.Component)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var n={},i=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[t]=e};return 0===t&&i("first-child"),t===e-1&&i("last-child"),(0===t||t%2==0)&&i("even"),1===Math.abs(t%2)&&i("odd"),i("nth-child",t),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alpha=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),o=c(a),s=c(n(1)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(217)),u=c(n(64));function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=e.Alpha=function(t){function e(){var t,n,i;h(this,e);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=i=f(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i.handleChange=function(t){var e=l.calculateChange(t,i.props.hsl,i.props.direction,i.props.a,i.container);e&&"function"==typeof i.props.onChange&&i.props.onChange(e,t)},i.handleMouseDown=function(t){i.handleChange(t),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},f(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,e=this.props.rgb,n=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*e.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)"},pointer:{left:0,top:100*e.a+"%"}},overwrite:i({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return o.default.createElement("div",{style:n.alpha},o.default.createElement("div",{style:n.checkboard},o.default.createElement(u.default,{renderers:this.props.renderers})),o.default.createElement("div",{style:n.gradient}),o.default.createElement("div",{style:n.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("div",{style:n.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:n.slider}))))}}]),e}(a.PureComponent||a.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calculateChange=function(t,e,n,i,r){var a=r.clientWidth,o=r.clientHeight,s="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,l="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,u=s-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=c<0?0:c>o?1:Math.round(100*c/o)/100,e.a!==h)return{h:e.h,s:e.s,l:e.l,a:h,source:"rgb"}}else{var f=void 0;if(i!==(f=u<0?0:u>a?1:Math.round(100*u/a)/100))return{h:e.h,s:e.s,l:e.l,a:f,source:"rgb"}}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={},r=e.render=function(t,e,n,i){if("undefined"==typeof document&&!i)return null;var r=i?new i:document.createElement("canvas");r.width=2*n,r.height=2*n;var a=r.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,r.width,r.height),a.fillStyle=e,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),r.toDataURL()):null};e.get=function(t,e,n,a){var o=t+"-"+e+"-"+n+(a?"-server":"");if(i[o])return i[o];var s=r(t,e,n,a);return i[o]=s,s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditableInput=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=s(r),o=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}var l=[38,40],u=e.EditableInput=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(t){n.setUpdatedValue(t.target.value,t)},n.handleKeyDown=function(t){var e,i=function(t){return Number(String(t).replace(/%/g,""))}(t.target.value);if(!isNaN(i)&&(e=t.keyCode,l.indexOf(e)>-1)){var r=n.getArrowOffset(),a=38===t.keyCode?i+r:i-r;n.setUpdatedValue(a,t)}},n.handleDrag=function(t){if(n.props.dragLabel){var e=Math.round(n.props.value+t.movementX);e>=0&&e<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(e),t)}},n.handleMouseDown=function(t){n.props.dragLabel&&(t.preventDefault(),n.handleDrag(t),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidUpdate",value:function(t,e){this.props.value===this.state.value||t.value===this.props.value&&e.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.props.label,t)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(t,e){var n=this.props.label?this.getValueObjectWithLabel(t):t;this.props.onChange&&this.props.onChange(n,e);var i,r=function(t){return String(t).indexOf("%")>-1}(e.target.value);this.setState({value:r?(i=t,i+"%"):t})}},{key:"render",value:function(){var t=this,e=(0,o.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return a.default.createElement("div",{style:e.wrap},a.default.createElement("input",{style:e.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?a.default.createElement("span",{style:e.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(r.PureComponent||r.Component);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hue=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=l(r),o=l(n(1)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(221));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=e.Hue=function(t){function e(){var t,n,i;u(this,e);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=i=c(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i.handleChange=function(t){var e=s.calculateChange(t,i.props.direction,i.props.hsl,i.container);e&&"function"==typeof i.props.onChange&&i.props.onChange(e,t)},i.handleMouseDown=function(t){i.handleChange(t),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},c(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.direction,n=void 0===e?"horizontal":e,i=(0,o.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return a.default.createElement("div",{style:i.hue},a.default.createElement("div",{className:"hue-"+n,style:i.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),a.default.createElement("div",{style:i.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:i.slider}))))}}]),e}(r.PureComponent||r.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calculateChange=function(t,e,n,i){var r=i.clientWidth,a=i.clientHeight,o="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,l=o-(i.getBoundingClientRect().left+window.pageXOffset),u=s-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===e){var c=void 0;if(u<0)c=359;else if(u>a)c=0;else{c=360*(-100*u/a+100)/100}if(n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:"rgb"}}else{var h=void 0;if(l<0)h=0;else if(l>r)h=359;else{h=360*(100*l/r)/100}if(n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"rgb"}}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Raised=void 0;var i=s(n(0)),r=s(n(5)),a=s(n(1)),o=s(n(9));function s(t){return t&&t.__esModule?t:{default:t}}var l=e.Raised=function(t){var e=t.zDepth,n=t.radius,r=t.background,s=t.children,l=t.styles,u=void 0===l?{}:l,c=(0,a.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+e+"px "+4*e+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},u),{"zDepth-1":1===e});return i.default.createElement("div",{style:c.wrap},i.default.createElement("div",{style:c.bg}),i.default.createElement("div",{style:c.content},s))};l.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},l.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},e.default=l},function(t,e,n){"use strict";var i=n(224);function r(){}function a(){}a.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var i=n(35),r=n(98),a=n(71),o=n(226),s=n(10),l=n(43),u=n(99);t.exports=function t(e,n,c,h,f){e!==n&&a(n,(function(a,l){if(f||(f=new i),s(a))o(e,n,l,c,t,h,f);else{var d=h?h(u(e,l),a,l+"",e,n,f):void 0;void 0===d&&(d=a),r(e,l,d)}}),l)}},function(t,e,n){var i=n(98),r=n(93),a=n(96),o=n(94),s=n(97),l=n(49),u=n(8),c=n(227),h=n(32),f=n(56),d=n(10),p=n(75),m=n(51),v=n(99),g=n(228);t.exports=function(t,e,n,y,b,x,_){var w=v(t,n),S=v(e,n),E=_.get(S);if(E)i(t,n,E);else{var M=x?x(w,S,n+"",t,e,_):void 0,T=void 0===M;if(T){var C=u(S),k=!C&&h(S),P=!C&&!k&&m(S);M=S,C||k||P?u(w)?M=w:c(w)?M=o(w):k?(T=!1,M=r(S,!0)):P?(T=!1,M=a(S,!0)):M=[]:p(S)||l(S)?(M=w,l(w)?M=g(w):d(w)&&!f(w)||(M=s(S))):T=!1}T&&(_.set(S,M),b(M,S,y,x,_),_.delete(S)),i(t,n,M)}}},function(t,e,n){var i=n(24),r=n(16);t.exports=function(t){return r(t)&&i(t)}},function(t,e,n){var i=n(30),r=n(43);t.exports=function(t){return i(t,r(t))}},function(t,e,n){var i=n(230),r=n(237);t.exports=function(t){return i((function(e,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&r(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++i<a;){var l=n[i];l&&t(e,l,i,o)}return e}))}},function(t,e,n){var i=n(34),r=n(231),a=n(233);t.exports=function(t,e){return a(r(t,e,i),t+"")}},function(t,e,n){var i=n(232),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=r(a.length-e,0),l=Array(s);++o<s;)l[o]=a[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=a[o];return u[e]=n(l),i(t,this,u)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var i=n(234),r=n(236)(i);t.exports=r},function(t,e,n){var i=n(235),r=n(92),a=n(34),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:a;t.exports=o},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,i=0;return function(){var r=n(),a=16-(r-i);if(i=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var i=n(29),r=n(24),a=n(50),o=n(10);t.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?r(n)&&a(e,n.length):"string"==s&&e in n)&&i(n[e],t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Saturation=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=u(r),o=u(n(1)),s=u(n(239)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(242));function u(t){return t&&t.__esModule?t:{default:t}}var c=e.Saturation=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleChange=function(t){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,l.calculateChange(t,n.props.hsl,n.container),t)},n.handleMouseDown=function(t){n.handleChange(t),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,s.default)((function(t,e,n){t(e,n)}),50),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.style||{},n=e.color,i=e.white,r=e.black,s=e.pointer,l=e.circle,u=(0,o.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:i,black:r,pointer:s,circle:l}},{custom:!!this.props.style});return a.default.createElement("div",{style:u.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),a.default.createElement("div",{style:u.white,className:"saturation-white"},a.default.createElement("div",{style:u.black,className:"saturation-black"}),a.default.createElement("div",{style:u.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:u.circle}))))}}]),e}(r.PureComponent||r.Component);e.default=c},function(t,e,n){var i=n(100),r=n(10);t.exports=function(t,e,n){var a=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return r(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),i(t,e,{leading:a,maxWait:e,trailing:o})}},function(t,e,n){var i=n(12);t.exports=function(){return i.Date.now()}},function(t,e,n){var i=n(10),r=n(41),a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=s.test(t);return n||l.test(t)?u(t.slice(2),n?2:8):o.test(t)?NaN:+t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calculateChange=function(t,e,n){var i=n.getBoundingClientRect(),r=i.width,a=i.height,o="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),u=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>r&&(l=r),u<0?u=0:u>a&&(u=a);var c=l/r,h=1-u/a;return{h:e.h,s:c,v:h,a:e.a,source:"rgb"}}},function(t,e,n){t.exports=n(244)},function(t,e,n){var i=n(90),r=n(89),a=n(74),o=n(8);t.exports=function(t,e){return(o(t)?i:r)(t,a(e))}},function(t,e,n){var i;!function(r){var a=/^\s+/,o=/\s+$/,s=0,l=r.round,u=r.min,c=r.max,h=r.random;function f(t,e){if(e=e||{},(t=t||"")instanceof f)return t;if(!(this instanceof f))return new f(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,i=null,s=null,l=null,h=!1,f=!1;"string"==typeof t&&(t=function(t){t=t.replace(a,"").replace(o,"").toLowerCase();var e,n=!1;if(A[t])t=A[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=H.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=H.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=H.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=H.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=H.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=H.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=H.hex8.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),a:F(e[4]),format:n?"name":"hex8"};if(e=H.hex6.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),format:n?"name":"hex"};if(e=H.hex4.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),a:F(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=H.hex3.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==typeof t&&(G(t.r)&&G(t.g)&&G(t.b)?(d=t.r,p=t.g,m=t.b,e={r:255*I(d,255),g:255*I(p,255),b:255*I(m,255)},h=!0,f="%"===String(t.r).substr(-1)?"prgb":"rgb"):G(t.h)&&G(t.s)&&G(t.v)?(i=z(t.s),s=z(t.v),e=function(t,e,n){t=6*I(t,360),e=I(e,100),n=I(n,100);var i=r.floor(t),a=t-i,o=n*(1-e),s=n*(1-a*e),l=n*(1-(1-a)*e),u=i%6;return{r:255*[n,s,o,o,l,n][u],g:255*[l,n,n,s,o,o][u],b:255*[o,o,l,n,n,s][u]}}(t.h,i,s),h=!0,f="hsv"):G(t.h)&&G(t.s)&&G(t.l)&&(i=z(t.s),l=z(t.l),e=function(t,e,n){var i,r,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=I(t,360),e=I(e,100),n=I(n,100),0===e)i=r=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=o(l,s,t+1/3),r=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*a}}(t.h,i,l),h=!0,f="hsl"),t.hasOwnProperty("a")&&(n=t.a));var d,p,m;return n=L(n),{ok:h,format:t.format||f,r:u(255,c(e.r,0)),g:u(255,c(e.g,0)),b:u(255,c(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function d(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var i,r,a=c(t,e,n),o=u(t,e,n),s=(a+o)/2;if(a==o)i=r=0;else{var l=a-o;switch(r=s>.5?l/(2-a-o):l/(a+o),a){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:s}}function p(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var i,r,a=c(t,e,n),o=u(t,e,n),s=a,l=a-o;if(r=0===a?0:l/a,a==o)i=0;else{switch(a){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:s}}function m(t,e,n,i){var r=[D(l(t).toString(16)),D(l(e).toString(16)),D(l(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function v(t,e,n,i){return[D(B(i)),D(l(t).toString(16)),D(l(e).toString(16)),D(l(n).toString(16))].join("")}function g(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s-=e/100,n.s=N(n.s),f(n)}function y(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s+=e/100,n.s=N(n.s),f(n)}function b(t){return f(t).desaturate(100)}function x(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l+=e/100,n.l=N(n.l),f(n)}function _(t,e){e=0===e?0:e||10;var n=f(t).toRgb();return n.r=c(0,u(255,n.r-l(-e/100*255))),n.g=c(0,u(255,n.g-l(-e/100*255))),n.b=c(0,u(255,n.b-l(-e/100*255))),f(n)}function w(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l-=e/100,n.l=N(n.l),f(n)}function S(t,e){var n=f(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,f(n)}function E(t){var e=f(t).toHsl();return e.h=(e.h+180)%360,f(e)}function M(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+120)%360,s:e.s,l:e.l}),f({h:(n+240)%360,s:e.s,l:e.l})]}function T(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+90)%360,s:e.s,l:e.l}),f({h:(n+180)%360,s:e.s,l:e.l}),f({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+72)%360,s:e.s,l:e.l}),f({h:(n+216)%360,s:e.s,l:e.l})]}function k(t,e,n){e=e||6,n=n||30;var i=f(t).toHsl(),r=360/n,a=[f(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,a.push(f(i));return a}function P(t,e){e=e||6;for(var n=f(t).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/e;e--;)o.push(f({h:i,s:r,v:a})),a=(a+s)%1;return o}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return t=i.r/255,e=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:r.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=L(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var a=[D(l(t).toString(16)),D(l(e).toString(16)),D(l(n).toString(16)),D(B(i))];if(r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*I(this._r,255))+"%",g:l(100*I(this._g,255))+"%",b:l(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%)":"rgba("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+v(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=f(t);n="#"+v(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},f.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:z(t[i]));t=n}return f(t,e)},f.equals=function(t,e){return!(!t||!e)&&f(t).toRgbString()==f(e).toRgbString()},f.random=function(){return f.fromRatio({r:h(),g:h(),b:h()})},f.mix=function(t,e,n){n=0===n?0:n||50;var i=f(t).toRgb(),r=f(e).toRgb(),a=n/100;return f({r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a})},f.readability=function(t,e){var n=f(t),i=f(e);return(r.max(n.getLuminance(),i.getLuminance())+.05)/(r.min(n.getLuminance(),i.getLuminance())+.05)},f.isReadable=function(t,e,n){var i,r,a=f.readability(t,e);switch(r=!1,(i=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},f.mostReadable=function(t,e,n){var i,r,a,o,s=null,l=0;r=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<e.length;u++)(i=f.readability(t,e[u]))>l&&(l=i,s=f(e[u]));return f.isReadable(t,s,{level:a,size:o})||!r?s:(n.includeFallbackColors=!1,f.mostReadable(t,["#fff","#000"],n))};var A=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=f.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(A);function L(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=u(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function N(t){return u(1,c(0,t))}function R(t){return parseInt(t,16)}function D(t){return 1==t.length?"0"+t:""+t}function z(t){return t<=1&&(t=100*t+"%"),t}function B(t){return r.round(255*parseFloat(t)).toString(16)}function F(t){return R(t)/255}var j,V,U,H=(V="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",U="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+V),rgba:new RegExp("rgba"+U),hsl:new RegExp("hsl"+V),hsla:new RegExp("hsla"+U),hsv:new RegExp("hsv"+V),hsva:new RegExp("hsva"+U),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(t){return!!H.CSS_UNIT.exec(t)}t.exports?t.exports=f:void 0===(i=function(){return f}.call(e,n,e,t))||(t.exports=i)}(Math)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Swatch=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=l(n(0)),a=l(n(1)),o=n(247),s=l(n(64));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.Swatch=function(t){var e=t.color,n=t.style,o=t.onClick,l=void 0===o?function(){}:o,u=t.onHover,c=t.title,h=void 0===c?e:c,f=t.children,d=t.focus,p=t.focusStyle,m=void 0===p?{}:p,v="transparent"===e,g=(0,a.default)({default:{swatch:i({background:e,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,d?m:{})}}),y={};return u&&(y.onMouseOver=function(t){return u(e,t)}),r.default.createElement("div",i({style:g.swatch,onClick:function(t){return l(e,t)},title:h,tabIndex:0,onKeyDown:function(t){return 13===t.keyCode&&l(e,t)}},y),f,v&&r.default.createElement(s.default,{borderRadius:g.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};e.default=(0,o.handleFocus)(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleFocus=void 0;var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),s=(i=o)&&i.__esModule?i:{default:i};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.handleFocus=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function i(){var t,e,n;l(this,i);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n=u(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},u(n,e)}return c(i,n),a(i,[{key:"render",value:function(){return s.default.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(t,r({},this.props,this.state)))}}]),i}(s.default.Component)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlphaPointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.AlphaPointer=function(t){var e=t.direction,n=(0,r.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return i.default.createElement("div",{style:n.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Block=void 0;var i=c(n(0)),r=c(n(5)),a=c(n(1)),o=c(n(9)),s=c(n(13)),l=n(2),u=c(n(250));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Block=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,c=t.colors,h=t.width,f=t.triangle,d=t.styles,p=void 0===d?{}:d,m=t.className,v=void 0===m?"":m,g="transparent"===r,y=function(t,n){s.default.isValidHex(t)&&e({hex:t,source:"hex"},n)},b=(0,a.default)((0,o.default)({default:{card:{width:h,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:s.default.getContrastingColor(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},p),{"hide-triangle":"hide"===f});return i.default.createElement("div",{style:b.card,className:"block-picker "+v},i.default.createElement("div",{style:b.triangle}),i.default.createElement("div",{style:b.head},g&&i.default.createElement(l.Checkboard,{borderRadius:"6px 6px 0 0"}),i.default.createElement("div",{style:b.label},r)),i.default.createElement("div",{style:b.body},i.default.createElement(u.default,{colors:c,onClick:y,onSwatchHover:n}),i.default.createElement(l.EditableInput,{style:{input:b.input},value:r,onChange:y})))};h.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["top","hide"]),styles:r.default.object},h.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},e.default=(0,l.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlockSwatches=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(18)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.BlockSwatches=function(t){var e=t.colors,n=t.onClick,s=t.onSwatchHover,l=(0,r.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return i.default.createElement("div",{style:l.swatches},(0,a.default)(e,(function(t){return i.default.createElement(o.Swatch,{key:t,color:t,style:l.swatch,onClick:n,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}})})),i.default.createElement("div",{style:l.clear}))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=h(n(0)),r=h(n(5)),a=h(n(1)),o=h(n(18)),s=h(n(9)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(102)),u=n(2),c=h(n(252));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Circle=function(t){var e=t.width,n=t.onChange,r=t.onSwatchHover,l=t.colors,u=t.hex,h=t.circleSize,f=t.styles,d=void 0===f?{}:f,p=t.circleSpacing,m=t.className,v=void 0===m?"":m,g=(0,a.default)((0,s.default)({default:{card:{width:e,display:"flex",flexWrap:"wrap",marginRight:-p,marginBottom:-p}}},d)),y=function(t,e){return n({hex:t,source:"hex"},e)};return i.default.createElement("div",{style:g.card,className:"circle-picker "+v},(0,o.default)(l,(function(t){return i.default.createElement(c.default,{key:t,color:t,onClick:y,onSwatchHover:r,active:u===t.toLowerCase(),circleSize:h,circleSpacing:p})})))};f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),circleSize:r.default.number,circleSpacing:r.default.number,styles:r.default.object},f.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[l.red[500],l.pink[500],l.purple[500],l.deepPurple[500],l.indigo[500],l.blue[500],l.lightBlue[500],l.cyan[500],l.teal[500],l.green[500],l.lightGreen[500],l.lime[500],l.yellow[500],l.amber[500],l.orange[500],l.deepOrange[500],l.brown[500],l.blueGrey[500]],styles:{}},e.default=(0,u.ColorWrap)(f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CircleSwatch=void 0;var i=s(n(0)),r=n(1),a=s(r),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.CircleSwatch=function(t){var e=t.color,n=t.onClick,r=t.onSwatchHover,s=t.hover,l=t.active,u=t.circleSize,c=t.circleSpacing,h=(0,a.default)({default:{swatch:{width:u,height:u,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+u/2+"px "+e,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+e}}},{hover:s,active:l});return i.default.createElement("div",{style:h.swatch},i.default.createElement(o.Swatch,{style:h.Swatch,color:e,onClick:n,onHover:r,focusStyle:{boxShadow:h.Swatch.boxShadow+", 0 0 5px "+e}}))};l.defaultProps={circleSize:28,circleSpacing:14},e.default=(0,r.handleHover)(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chrome=void 0;var i=h(n(0)),r=h(n(5)),a=h(n(1)),o=h(n(9)),s=n(2),l=h(n(254)),u=h(n(256)),c=h(n(257));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Chrome=function(t){var e=t.width,n=t.onChange,r=t.disableAlpha,h=t.rgb,f=t.hsl,d=t.hsv,p=t.hex,m=t.renderers,v=t.styles,g=void 0===v?{}:v,y=t.className,b=void 0===y?"":y,x=t.defaultView,_=(0,a.default)((0,o.default)({default:{picker:{width:e,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+h.r+", "+h.g+", "+h.b+", "+h.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},g),{disableAlpha:r});return i.default.createElement("div",{style:_.picker,className:"chrome-picker "+b},i.default.createElement("div",{style:_.saturation},i.default.createElement(s.Saturation,{style:_.Saturation,hsl:f,hsv:d,pointer:c.default,onChange:n})),i.default.createElement("div",{style:_.body},i.default.createElement("div",{style:_.controls,className:"flexbox-fix"},i.default.createElement("div",{style:_.color},i.default.createElement("div",{style:_.swatch},i.default.createElement("div",{style:_.active}),i.default.createElement(s.Checkboard,{renderers:m}))),i.default.createElement("div",{style:_.toggles},i.default.createElement("div",{style:_.hue},i.default.createElement(s.Hue,{style:_.Hue,hsl:f,pointer:u.default,onChange:n})),i.default.createElement("div",{style:_.alpha},i.default.createElement(s.Alpha,{style:_.Alpha,rgb:h,hsl:f,pointer:u.default,renderers:m,onChange:n})))),i.default.createElement(l.default,{rgb:h,hsl:f,hex:p,view:x,onChange:n,disableAlpha:r})))};f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},f.defaultProps={width:225,disableAlpha:!1,styles:{}},e.default=(0,s.ColorWrap)(f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChromeFields=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(0)),a=u(n(1)),o=u(n(13)),s=n(2),l=u(n(255));function u(t){return t&&t.__esModule?t:{default:t}}var c=e.ChromeFields=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(t,e){t.hex?o.default.isValidHex(t.hex)&&n.props.onChange({hex:t.hex,source:"hex"},e):t.r||t.g||t.b?n.props.onChange({r:t.r||n.props.rgb.r,g:t.g||n.props.rgb.g,b:t.b||n.props.rgb.b,source:"rgb"},e):t.a?(t.a<0?t.a=0:t.a>1&&(t.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},e)):(t.h||t.s||t.l)&&("string"==typeof t.s&&t.s.includes("%")&&(t.s=t.s.replace("%","")),"string"==typeof t.l&&t.l.includes("%")&&(t.l=t.l.replace("%","")),n.props.onChange({h:t.h||n.props.hsl.h,s:Number(t.s&&t.s||n.props.hsl.s),l:Number(t.l&&t.l||n.props.hsl.l),source:"hsl"},e))},n.showHighlight=function(t){t.currentTarget.style.background="#eee"},n.hideHighlight=function(t){t.currentTarget.style.background="transparent"},1!==t.hsl.a&&"hex"===t.view?n.state={view:"rgb"}:n.state={view:t.view},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){var t=this,e=(0,a.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=r.default.createElement("div",{style:e.fields,className:"flexbox-fix"},r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=r.default.createElement("div",{style:e.fields,className:"flexbox-fix"},r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),r.default.createElement("div",{style:e.alpha},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=r.default.createElement("div",{style:e.fields,className:"flexbox-fix"},r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),r.default.createElement("div",{style:e.field},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),r.default.createElement("div",{style:e.alpha},r.default.createElement(s.EditableInput,{style:{input:e.input,label:e.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),r.default.createElement("div",{style:e.wrap,className:"flexbox-fix"},n,r.default.createElement("div",{style:e.toggle},r.default.createElement("div",{style:e.icon,onClick:this.toggleViews,ref:function(e){return t.icon=e}},r.default.createElement(l.default,{style:e.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return 1!==t.hsl.a&&"hex"===e.view?{view:"rgb"}:null}}]),e}(r.default.Component);c.defaultProps={view:"hex"},e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,i=t.width,a=void 0===i?24:i,s=t.height,l=void 0===s?24:s,u=t.style,c=void 0===u?{}:u,h=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",r({viewBox:"0 0 24 24",style:r({fill:n,width:a,height:l},c)},h),o.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChromePointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.ChromePointer=function(){var t=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.default.createElement("div",{style:t.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChromePointerCircle=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.ChromePointerCircle=function(){var t=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return i.default.createElement("div",{style:t.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Compact=void 0;var i=f(n(0)),r=f(n(5)),a=f(n(1)),o=f(n(18)),s=f(n(9)),l=f(n(13)),u=n(2),c=f(n(259)),h=f(n(260));function f(t){return t&&t.__esModule?t:{default:t}}var d=e.Compact=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.colors,f=t.hex,d=t.rgb,p=t.styles,m=void 0===p?{}:p,v=t.className,g=void 0===v?"":v,y=(0,a.default)((0,s.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},m)),b=function(t,n){t.hex?l.default.isValidHex(t.hex)&&e({hex:t.hex,source:"hex"},n):e(t,n)};return i.default.createElement(u.Raised,{style:y.Compact,styles:m},i.default.createElement("div",{style:y.compact,className:"compact-picker "+g},i.default.createElement("div",null,(0,o.default)(r,(function(t){return i.default.createElement(c.default,{key:t,color:t,active:t.toLowerCase()===f,onClick:b,onSwatchHover:n})})),i.default.createElement("div",{style:y.clear})),i.default.createElement(h.default,{hex:f,rgb:d,onChange:b})))};d.propTypes={colors:r.default.arrayOf(r.default.string),styles:r.default.object},d.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},e.default=(0,u.ColorWrap)(d)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompactColor=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(13)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.CompactColor=function(t){var e=t.color,n=t.onClick,s=void 0===n?function(){}:n,l=t.onSwatchHover,u=t.active,c=(0,r.default)({default:{color:{background:e,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:a.default.getContrastingColor(e),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return i.default.createElement(o.Swatch,{style:c.color,color:e,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+e}},i.default.createElement("div",{style:c.dot}))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompactFields=void 0;var i=o(n(0)),r=o(n(1)),a=n(2);function o(t){return t&&t.__esModule?t:{default:t}}var s=e.CompactFields=function(t){var e=t.hex,n=t.rgb,o=t.onChange,s=(0,r.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:e},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(t,e){t.r||t.g||t.b?o({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},e):o({hex:t.hex,source:"hex"},e)};return i.default.createElement("div",{style:s.fields,className:"flexbox-fix"},i.default.createElement("div",{style:s.active}),i.default.createElement(a.EditableInput,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:e,onChange:l}),i.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:l}),i.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:l}),i.default.createElement(a.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:l}))};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Github=void 0;var i=c(n(0)),r=c(n(5)),a=c(n(1)),o=c(n(18)),s=c(n(9)),l=n(2),u=c(n(262));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Github=function(t){var e=t.width,n=t.colors,r=t.onChange,l=t.onSwatchHover,c=t.triangle,h=t.styles,f=void 0===h?{}:h,d=t.className,p=void 0===d?"":d,m=(0,a.default)((0,s.default)({default:{card:{width:e,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},f),{"hide-triangle":"hide"===c,"top-left-triangle":"top-left"===c,"top-right-triangle":"top-right"===c,"bottom-left-triangle":"bottom-left"===c,"bottom-right-triangle":"bottom-right"===c}),v=function(t,e){return r({hex:t,source:"hex"},e)};return i.default.createElement("div",{style:m.card,className:"github-picker "+p},i.default.createElement("div",{style:m.triangleShadow}),i.default.createElement("div",{style:m.triangle}),(0,o.default)(n,(function(t){return i.default.createElement(u.default,{color:t,key:t,onClick:v,onSwatchHover:l})})))};h.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:r.default.object},h.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},e.default=(0,l.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GithubSwatch=void 0;var i=s(n(0)),r=n(1),a=s(r),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.GithubSwatch=function(t){var e=t.hover,n=t.color,r=t.onClick,s=t.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},u=(0,a.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:e});return i.default.createElement("div",{style:u.swatch},i.default.createElement(o.Swatch,{color:n,onClick:r,onHover:s,focusStyle:l}))};e.default=(0,r.handleHover)(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HuePicker=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=c(n(0)),a=c(n(5)),o=c(n(1)),s=c(n(9)),l=n(2),u=c(n(264));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.HuePicker=function(t){var e=t.width,n=t.height,a=t.onChange,u=t.hsl,c=t.direction,h=t.pointer,f=t.styles,d=void 0===f?{}:f,p=t.className,m=void 0===p?"":p,v=(0,o.default)((0,s.default)({default:{picker:{position:"relative",width:e,height:n},hue:{radius:"2px"}}},d));return r.default.createElement("div",{style:v.picker,className:"hue-picker "+m},r.default.createElement(l.Hue,i({},v.hue,{hsl:u,pointer:h,onChange:function(t){return a({a:1,h:t.h,l:.5,s:1})},direction:c})))};h.propTypes={styles:a.default.object},h.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:u.default,styles:{}},e.default=(0,l.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderPointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderPointer=function(t){var e=t.direction,n=(0,r.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return i.default.createElement("div",{style:n.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Material=void 0;var i=l(n(0)),r=l(n(1)),a=l(n(9)),o=l(n(13)),s=n(2);function l(t){return t&&t.__esModule?t:{default:t}}var u=e.Material=function(t){var e=t.onChange,n=t.hex,l=t.rgb,u=t.styles,c=void 0===u?{}:u,h=t.className,f=void 0===h?"":h,d=(0,r.default)((0,a.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},c)),p=function(t,n){t.hex?o.default.isValidHex(t.hex)&&e({hex:t.hex,source:"hex"},n):(t.r||t.g||t.b)&&e({r:t.r||l.r,g:t.g||l.g,b:t.b||l.b,source:"rgb"},n)};return i.default.createElement(s.Raised,{styles:c},i.default.createElement("div",{style:d.material,className:"material-picker "+f},i.default.createElement(s.EditableInput,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:n,onChange:p}),i.default.createElement("div",{style:d.split,className:"flexbox-fix"},i.default.createElement("div",{style:d.third},i.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:l.r,onChange:p})),i.default.createElement("div",{style:d.third},i.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:l.g,onChange:p})),i.default.createElement("div",{style:d.third},i.default.createElement(s.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:l.b,onChange:p})))))};e.default=(0,s.ColorWrap)(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Photoshop=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=p(n(0)),a=p(n(5)),o=p(n(1)),s=p(n(9)),l=n(2),u=p(n(267)),c=p(n(268)),h=p(n(269)),f=p(n(270)),d=p(n(271));function p(t){return t&&t.__esModule?t:{default:t}}var m=e.Photoshop=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:t.hex},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){var t=this.props,e=t.styles,n=void 0===e?{}:e,i=t.className,a=void 0===i?"":i,p=(0,o.default)((0,s.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return r.default.createElement("div",{style:p.picker,className:"photoshop-picker "+a},r.default.createElement("div",{style:p.head},this.props.header),r.default.createElement("div",{style:p.body,className:"flexbox-fix"},r.default.createElement("div",{style:p.saturation},r.default.createElement(l.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:c.default,onChange:this.props.onChange})),r.default.createElement("div",{style:p.hue},r.default.createElement(l.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:h.default,onChange:this.props.onChange})),r.default.createElement("div",{style:p.controls},r.default.createElement("div",{style:p.top,className:"flexbox-fix"},r.default.createElement("div",{style:p.previews},r.default.createElement(d.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),r.default.createElement("div",{style:p.actions},r.default.createElement(f.default,{label:"OK",onClick:this.props.onAccept,active:!0}),r.default.createElement(f.default,{label:"Cancel",onClick:this.props.onCancel}),r.default.createElement(u.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(r.default.Component);m.propTypes={header:a.default.string,styles:a.default.object},m.defaultProps={header:"Color Picker",styles:{}},e.default=(0,l.ColorWrap)(m)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPicker=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(13)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.PhotoshopPicker=function(t){var e=t.onChange,n=t.rgb,s=t.hsv,l=t.hex,u=(0,r.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),c=function(t,i){t["#"]?a.default.isValidHex(t["#"])&&e({hex:t["#"],source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},i):(t.h||t.s||t.v)&&e({h:t.h||s.h,s:t.s||s.s,v:t.v||s.v,source:"hsv"},i)};return i.default.createElement("div",{style:u.fields},i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(s.h),onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(100*s.s),onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(100*s.v),onChange:c}),i.default.createElement("div",{style:u.divider}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:c}),i.default.createElement(o.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:c}),i.default.createElement("div",{style:u.divider}),i.default.createElement(o.EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:l.replace("#",""),onChange:c}),i.default.createElement("div",{style:u.fieldSymbols},i.default.createElement("div",{style:u.symbol},""),i.default.createElement("div",{style:u.symbol},"%"),i.default.createElement("div",{style:u.symbol},"%")))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPointerCircle=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPointerCircle=function(t){var e=t.hsl,n=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":e.l>.5});return i.default.createElement("div",{style:n.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPointerCircle=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPointerCircle=function(){var t=(0,r.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return i.default.createElement("div",{style:t.pointer},i.default.createElement("div",{style:t.left},i.default.createElement("div",{style:t.leftInside})),i.default.createElement("div",{style:t.right},i.default.createElement("div",{style:t.rightInside})))};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopButton=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopButton=function(t){var e=t.onClick,n=t.label,a=t.children,o=t.active,s=(0,r.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return i.default.createElement("div",{style:s.button,onClick:e},n||a)};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoshopPreviews=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.PhotoshopPreviews=function(t){var e=t.rgb,n=t.currentColor,a=(0,r.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+e.r+","+e.g+", "+e.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return i.default.createElement("div",null,i.default.createElement("div",{style:a.label},"new"),i.default.createElement("div",{style:a.swatches},i.default.createElement("div",{style:a.new}),i.default.createElement("div",{style:a.current})),i.default.createElement("div",{style:a.label},"current"))};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sketch=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=h(n(0)),a=h(n(5)),o=h(n(1)),s=h(n(9)),l=n(2),u=h(n(273)),c=h(n(274));function h(t){return t&&t.__esModule?t:{default:t}}var f=e.Sketch=function(t){var e=t.width,n=t.rgb,a=t.hex,h=t.hsv,f=t.hsl,d=t.onChange,p=t.onSwatchHover,m=t.disableAlpha,v=t.presetColors,g=t.renderers,y=t.styles,b=void 0===y?{}:y,x=t.className,_=void 0===x?"":x,w=(0,o.default)((0,s.default)({default:i({picker:{width:e,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},b),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},b),{disableAlpha:m});return r.default.createElement("div",{style:w.picker,className:"sketch-picker "+_},r.default.createElement("div",{style:w.saturation},r.default.createElement(l.Saturation,{style:w.Saturation,hsl:f,hsv:h,onChange:d})),r.default.createElement("div",{style:w.controls,className:"flexbox-fix"},r.default.createElement("div",{style:w.sliders},r.default.createElement("div",{style:w.hue},r.default.createElement(l.Hue,{style:w.Hue,hsl:f,onChange:d})),r.default.createElement("div",{style:w.alpha},r.default.createElement(l.Alpha,{style:w.Alpha,rgb:n,hsl:f,renderers:g,onChange:d}))),r.default.createElement("div",{style:w.color},r.default.createElement(l.Checkboard,null),r.default.createElement("div",{style:w.activeColor}))),r.default.createElement(u.default,{rgb:n,hsl:f,hex:a,onChange:d,disableAlpha:m}),r.default.createElement(c.default,{colors:v,onClick:d,onSwatchHover:p}))};f.propTypes={disableAlpha:a.default.bool,width:a.default.oneOfType([a.default.string,a.default.number]),styles:a.default.object},f.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},e.default=(0,l.ColorWrap)(f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SketchFields=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(13)),o=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.SketchFields=function(t){var e=t.onChange,n=t.rgb,s=t.hsl,l=t.hex,u=t.disableAlpha,c=(0,r.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),h=function(t,i){t.hex?a.default.isValidHex(t.hex)&&e({hex:t.hex,source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,a:n.a,source:"rgb"},i):t.a&&(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,e({h:s.h,s:s.s,l:s.l,a:t.a,source:"rgb"},i))};return i.default.createElement("div",{style:c.fields,className:"flexbox-fix"},i.default.createElement("div",{style:c.double},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"hex",value:l.replace("#",""),onChange:h})),i.default.createElement("div",{style:c.single},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"r",value:n.r,onChange:h,dragLabel:"true",dragMax:"255"})),i.default.createElement("div",{style:c.single},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"g",value:n.g,onChange:h,dragLabel:"true",dragMax:"255"})),i.default.createElement("div",{style:c.single},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"b",value:n.b,onChange:h,dragLabel:"true",dragMax:"255"})),i.default.createElement("div",{style:c.alpha},i.default.createElement(o.EditableInput,{style:{input:c.input,label:c.label},label:"a",value:Math.round(100*n.a),onChange:h,dragLabel:"true",dragMax:"100"})))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SketchPresetColors=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=l(n(0)),a=l(n(5)),o=l(n(1)),s=n(2);function l(t){return t&&t.__esModule?t:{default:t}}var u=e.SketchPresetColors=function(t){var e=t.colors,n=t.onClick,a=void 0===n?function(){}:n,l=t.onSwatchHover,u=(0,o.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!e||!e.length}),c=function(t,e){a({hex:t,source:"hex"},e)};return r.default.createElement("div",{style:u.colors,className:"flexbox-fix"},e.map((function(t){var e="string"==typeof t?{color:t}:t,n=""+e.color+(e.title||"");return r.default.createElement("div",{key:n,style:u.swatchWrap},r.default.createElement(s.Swatch,i({},e,{style:u.swatch,onClick:c,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+e.color}})))})))};u.propTypes={colors:a.default.arrayOf(a.default.oneOfType([a.default.string,a.default.shape({color:a.default.string,title:a.default.string})])).isRequired},e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var i=c(n(0)),r=c(n(5)),a=c(n(1)),o=c(n(9)),s=n(2),l=c(n(276)),u=c(n(278));function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Slider=function(t){var e=t.hsl,n=t.onChange,r=t.pointer,u=t.styles,c=void 0===u?{}:u,h=t.className,f=void 0===h?"":h,d=(0,a.default)((0,o.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},c));return i.default.createElement("div",{style:d.wrap||{},className:"slider-picker "+f},i.default.createElement("div",{style:d.hue},i.default.createElement(s.Hue,{style:d.Hue,hsl:e,pointer:r,onChange:n})),i.default.createElement("div",{style:d.swatches},i.default.createElement(l.default,{hsl:e,onClick:n})))};h.propTypes={styles:r.default.object},h.defaultProps={pointer:u.default,styles:{}},e.default=(0,s.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderSwatches=void 0;var i=o(n(0)),r=o(n(1)),a=o(n(277));function o(t){return t&&t.__esModule?t:{default:t}}var s=e.SliderSwatches=function(t){var e=t.onClick,n=t.hsl,o=(0,r.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return i.default.createElement("div",{style:o.swatches},i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<.1&&Math.abs(n.s-.5)<.1,onClick:e,first:!0})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<.1&&Math.abs(n.s-.5)<.1,onClick:e})),i.default.createElement("div",{style:o.swatch},i.default.createElement(a.default,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<.1&&Math.abs(n.s-.5)<.1,onClick:e,last:!0})),i.default.createElement("div",{style:o.clear}))};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderSwatch=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderSwatch=function(t){var e=t.hsl,n=t.offset,a=t.onClick,o=void 0===a?function(){}:a,s=t.active,l=t.first,u=t.last,c=(0,r.default)({default:{swatch:{height:"12px",background:"hsl("+e.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:l,last:u});return i.default.createElement("div",{style:c.swatch,onClick:function(t){return o({h:e.h,s:.5,l:n,source:"hsl"},t)}})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderPointer=void 0;var i=a(n(0)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.SliderPointer=function(){var t=(0,r.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.default.createElement("div",{style:t.picker})};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Swatches=void 0;var i=f(n(0)),r=f(n(5)),a=f(n(1)),o=f(n(18)),s=f(n(9)),l=f(n(13)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(102)),c=n(2),h=f(n(280));function f(t){return t&&t.__esModule?t:{default:t}}var d=e.Swatches=function(t){var e=t.width,n=t.height,r=t.onChange,u=t.onSwatchHover,f=t.colors,d=t.hex,p=t.styles,m=void 0===p?{}:p,v=t.className,g=void 0===v?"":v,y=(0,a.default)((0,s.default)({default:{picker:{width:e,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},m)),b=function(t,e){l.default.isValidHex(t)&&r({hex:t,source:"hex"},e)};return i.default.createElement("div",{style:y.picker,className:"swatches-picker "+g},i.default.createElement(c.Raised,null,i.default.createElement("div",{style:y.overflow},i.default.createElement("div",{style:y.body},(0,o.default)(f,(function(t){return i.default.createElement(h.default,{key:t.toString(),group:t,active:d,onClick:b,onSwatchHover:u})})),i.default.createElement("div",{style:y.clear})))))};d.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.arrayOf(r.default.string)),styles:r.default.object},d.defaultProps={width:320,height:240,colors:[[u.red[900],u.red[700],u.red[500],u.red[300],u.red[100]],[u.pink[900],u.pink[700],u.pink[500],u.pink[300],u.pink[100]],[u.purple[900],u.purple[700],u.purple[500],u.purple[300],u.purple[100]],[u.deepPurple[900],u.deepPurple[700],u.deepPurple[500],u.deepPurple[300],u.deepPurple[100]],[u.indigo[900],u.indigo[700],u.indigo[500],u.indigo[300],u.indigo[100]],[u.blue[900],u.blue[700],u.blue[500],u.blue[300],u.blue[100]],[u.lightBlue[900],u.lightBlue[700],u.lightBlue[500],u.lightBlue[300],u.lightBlue[100]],[u.cyan[900],u.cyan[700],u.cyan[500],u.cyan[300],u.cyan[100]],[u.teal[900],u.teal[700],u.teal[500],u.teal[300],u.teal[100]],["#194D33",u.green[700],u.green[500],u.green[300],u.green[100]],[u.lightGreen[900],u.lightGreen[700],u.lightGreen[500],u.lightGreen[300],u.lightGreen[100]],[u.lime[900],u.lime[700],u.lime[500],u.lime[300],u.lime[100]],[u.yellow[900],u.yellow[700],u.yellow[500],u.yellow[300],u.yellow[100]],[u.amber[900],u.amber[700],u.amber[500],u.amber[300],u.amber[100]],[u.orange[900],u.orange[700],u.orange[500],u.orange[300],u.orange[100]],[u.deepOrange[900],u.deepOrange[700],u.deepOrange[500],u.deepOrange[300],u.deepOrange[100]],[u.brown[900],u.brown[700],u.brown[500],u.brown[300],u.brown[100]],[u.blueGrey[900],u.blueGrey[700],u.blueGrey[500],u.blueGrey[300],u.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},e.default=(0,c.ColorWrap)(d)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SwatchesGroup=void 0;var i=s(n(0)),r=s(n(1)),a=s(n(18)),o=s(n(281));function s(t){return t&&t.__esModule?t:{default:t}}var l=e.SwatchesGroup=function(t){var e=t.onClick,n=t.onSwatchHover,s=t.group,l=t.active,u=(0,r.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return i.default.createElement("div",{style:u.group},(0,a.default)(s,(function(t,r){return i.default.createElement(o.default,{key:t,color:t,active:t.toLowerCase()===l,first:0===r,last:r===s.length-1,onClick:e,onSwatchHover:n})})))};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SwatchesColor=void 0;var i=l(n(0)),r=l(n(1)),a=l(n(13)),o=n(2),s=l(n(282));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.SwatchesColor=function(t){var e=t.color,n=t.onClick,l=void 0===n?function(){}:n,u=t.onSwatchHover,c=t.first,h=t.last,f=t.active,d=(0,r.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:e,marginBottom:"1px"},check:{color:a.default.getContrastingColor(e),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:c,last:h,active:f,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return i.default.createElement(o.Swatch,{color:e,style:d.color,onClick:l,onHover:u,focusStyle:{boxShadow:"0 0 4px "+e}},i.default.createElement("div",{style:d.check},i.default.createElement(s.default,null)))};e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(0),o=(i=a)&&i.__esModule?i:{default:i};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,i=t.width,a=void 0===i?24:i,s=t.height,l=void 0===s?24:s,u=t.style,c=void 0===u?{}:u,h=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",r({viewBox:"0 0 24 24",style:r({fill:n,width:a,height:l},c)},h),o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Twitter=void 0;var i=c(n(0)),r=c(n(5)),a=c(n(1)),o=c(n(18)),s=c(n(9)),l=c(n(13)),u=n(2);function c(t){return t&&t.__esModule?t:{default:t}}var h=e.Twitter=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,c=t.colors,h=t.width,f=t.triangle,d=t.styles,p=void 0===d?{}:d,m=t.className,v=void 0===m?"":m,g=(0,a.default)((0,s.default)({default:{card:{width:h,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},p),{"hide-triangle":"hide"===f,"top-left-triangle":"top-left"===f,"top-right-triangle":"top-right"===f}),y=function(t,n){l.default.isValidHex(t)&&e({hex:t,source:"hex"},n)};return i.default.createElement("div",{style:g.card,className:"twitter-picker "+v},i.default.createElement("div",{style:g.triangleShadow}),i.default.createElement("div",{style:g.triangle}),i.default.createElement("div",{style:g.body},(0,o.default)(c,(function(t,e){return i.default.createElement(u.Swatch,{key:e,color:t,hex:t,style:g.swatch,onClick:y,onHover:n,focusStyle:{boxShadow:"0 0 4px "+t}})})),i.default.createElement("div",{style:g.hash},"#"),i.default.createElement(u.EditableInput,{label:null,style:{input:g.input},value:r.replace("#",""),onChange:y}),i.default.createElement("div",{style:g.clear})))};h.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),triangle:r.default.oneOf(["hide","top-left","top-right"]),colors:r.default.arrayOf(r.default.string),styles:r.default.object},h.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},e.default=(0,u.ColorWrap)(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15);i.BufferGeometryUtils={computeTangents:function(t){var e=t.index,n=t.attributes;if(null!==e&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=e.array,a=n.position.array,o=n.normal.array,s=n.uv.array,l=a.length/3;void 0===n.tangent&&t.addAttribute("tangent",new i.BufferAttribute(new Float32Array(4*l),4));for(var u=n.tangent.array,c=[],h=[],f=0;f<l;f++)c[f]=new i.Vector3,h[f]=new i.Vector3;var d=new i.Vector3,p=new i.Vector3,m=new i.Vector3,v=new i.Vector2,g=new i.Vector2,y=new i.Vector2,b=new i.Vector3,x=new i.Vector3,_=t.groups;0===_.length&&(_=[{start:0,count:r.length}]);f=0;for(var w=_.length;f<w;++f)for(var S=I=(L=_[f]).start,E=I+L.count;S<E;S+=3)N(r[S+0],r[S+1],r[S+2]);var M,T,C,k=new i.Vector3,P=new i.Vector3,A=new i.Vector3,O=new i.Vector3;for(f=0,w=_.length;f<w;++f){var L,I;for(S=I=(L=_[f]).start,E=I+L.count;S<E;S+=3)R(r[S+0]),R(r[S+1]),R(r[S+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function N(t,e,n){d.fromArray(a,3*t),p.fromArray(a,3*e),m.fromArray(a,3*n),v.fromArray(s,2*t),g.fromArray(s,2*e),y.fromArray(s,2*n);var i=p.x-d.x,r=m.x-d.x,o=p.y-d.y,l=m.y-d.y,u=p.z-d.z,f=m.z-d.z,_=g.x-v.x,w=y.x-v.x,S=g.y-v.y,E=y.y-v.y,M=1/(_*E-w*S);b.set((E*i-S*r)*M,(E*o-S*l)*M,(E*u-S*f)*M),x.set((_*r-w*i)*M,(_*l-w*o)*M,(_*f-w*u)*M),c[t].add(b),c[e].add(b),c[n].add(b),h[t].add(x),h[e].add(x),h[n].add(x)}function R(t){A.fromArray(o,3*t),O.copy(A),T=c[t],k.copy(T),k.sub(A.multiplyScalar(A.dot(T))).normalize(),P.crossVectors(O,T),C=P.dot(h[t]),M=C<0?-1:1,u[4*t]=k.x,u[4*t+1]=k.y,u[4*t+2]=k.z,u[4*t+3]=M}},mergeBufferGeometries:function(t,e){for(var n=null!==t[0].index,r=new Set(Object.keys(t[0].attributes)),a=new Set(Object.keys(t[0].morphAttributes)),o={},s={},l=new i.BufferGeometry,u=0,c=0;c<t.length;++c){var h=t[c];if(n!==(null!==h.index))return null;for(var f in h.attributes){if(!r.has(f))return null;void 0===o[f]&&(o[f]=[]),o[f].push(h.attributes[f])}for(var f in h.morphAttributes){if(!a.has(f))return null;void 0===s[f]&&(s[f]=[]),s[f].push(h.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(h.userData),e){var d;if(n)d=h.index.count;else{if(void 0===h.attributes.position)return null;d=h.attributes.position.count}l.addGroup(u,d,c),u+=d}}if(n){var p=0,m=[];for(c=0;c<t.length;++c){for(var v=t[c].index,g=0;g<v.count;++g)m.push(v.getX(g)+p);p+=t[c].attributes.position.count}l.setIndex(m)}for(var f in o){var y=this.mergeBufferAttributes(o[f]);if(!y)return null;l.addAttribute(f,y)}for(var f in s){var b=s[f][0].length;if(0===b)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[f]=[];for(c=0;c<b;++c){var x=[];for(g=0;g<s[f].length;++g)x.push(s[f][g][c]);var _=this.mergeBufferAttributes(x);if(!_)return null;l.morphAttributes[f].push(_)}}return l},mergeBufferAttributes:function(t){for(var e,n,r,a=0,o=0;o<t.length;++o){var s=t[o];if(s.isInterleavedBufferAttribute)return null;if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return null;if(void 0===r&&(r=s.normalized),r!==s.normalized)return null;a+=s.array.length}var l=new e(a),u=0;for(o=0;o<t.length;++o)l.set(t[o].array,u),u+=t[o].array.length;return new i.BufferAttribute(l,n,r)},interleaveAttributes:function(t){for(var e,n=0,r=0,a=0,o=t.length;a<o;++a){var s=t[a];if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;n+=s.array.length,r+=s.itemSize}var l=new i.InterleavedBuffer(new e(n),r),u=0,c=[],h=["getX","getY","getZ","getW"],f=["setX","setY","setZ","setW"],d=0;for(o=t.length;d<o;d++){var p=(s=t[d]).itemSize,m=s.count,v=new i.InterleavedBufferAttribute(l,p,u,s.normalized);c.push(v),u+=p;for(var g=0;g<m;g++)for(var y=0;y<p;y++)v[f[y]](g,s[h[y]](g))}return c},estimateBytesUsed:function(t){var e=0;for(var n in t.attributes){var i=t.getAttribute(n);e+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}var r=t.getIndex();return e+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0},mergeVertices:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;e=Math.max(e,Number.EPSILON);for(var n={},r=t.getIndex(),a=t.getAttribute("position"),o=r?r.count:a.count,s=0,l=Object.keys(t.attributes),u={},c={},h=[],f=["getX","getY","getZ","getW"],d=0,p=l.length;d<p;d++){u[x=l[d]]=[],(E=t.morphAttributes[x])&&(c[x]=new Array(E.length).fill().map((function(){return[]})))}var m=Math.log10(1/e),v=Math.pow(10,m);for(d=0;d<o;d++){var g=r?r.getX(d):d,y="",b=0;for(p=l.length;b<p;b++)for(var x=l[b],_=(S=t.getAttribute(x)).itemSize,w=0;w<_;w++)y+=~~(S[f[w]](g)*v)+",";if(y in n)h.push(n[y]);else{for(b=0,p=l.length;b<p;b++){x=l[b];var S=t.getAttribute(x),E=t.morphAttributes[x],M=(_=S.itemSize,u[x]),T=c[x];for(w=0;w<_;w++){var C=f[w];if(M.push(S[C](g)),E)for(var k=0,P=E.length;k<P;k++)T[k].push(E[k][C](g))}}n[y]=s,h.push(s),s++}}var A=t.clone();for(d=0,p=l.length;d<p;d++){x=l[d];var O=t.getAttribute(x),L=new O.array.constructor(u[x]);if(O.isInterleavedBufferAttribute?S=new i.BufferAttribute(L,O.itemSize,O.itemSize):(S=t.getAttribute(x).clone()).setArray(L),A.addAttribute(x,S),x in c)for(b=0;b<c[x].length;b++){var I=t.morphAttributes[x][b].clone();I.setArray(new I.array.constructor(c[x][b])),A.morphAttributes[x][b]=I}}var N=Uint8Array;h.length>=Math.pow(2,8)&&(N=Uint16Array),h.length>=Math.pow(2,16)&&(N=Uint32Array);var R=new N(h);h=null;return null===r?h=new i.BufferAttribute(R,1):(h=t.getIndex().clone()).setArray(R),A.setIndex(h),A}},e.default=i.BufferGeometryUtils},function(t,e,n){t.exports=function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var n=new t.Vector3,i=new t.Vector3,r=new t.Vector3;return function(a){function o(n){void 0===n&&(n={});var i=n.material;void 0===i&&(i={});var r=n.maxFontSize;void 0===r&&(r=1/0);var o=n.minFontSize;void 0===o&&(o=0);var s=n.redrawInterval;void 0===s&&(s=1);var l=n.textSize;void 0===l&&(l=1);var u=n.texture;void 0===u&&(u={}),a.call(this,new t.SpriteMaterial(Object.assign({},i,{map:new e(u)}))),this.lastRedraw=0,this.maxFontSize=r,this.minFontSize=o,this.redrawInterval=s,this.textSize=l}a&&(o.__proto__=a),o.prototype=Object.create(a&&a.prototype),o.prototype.constructor=o;var s={isTextSprite:{configurable:!0}};return s.isTextSprite.get=function(){return!0},o.prototype.onBeforeRender=function(t,e,n){this.redraw(t,n)},o.prototype.updateScale=function(){this.scale.set(this.material.map.image.width/this.material.map.image.height,1,1).multiplyScalar(this.textSize*this.material.map.height)},o.prototype.updateMatrix=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.updateScale(),a.prototype.updateMatrix.apply(this,t)},o.prototype.redraw=function(t,e){var n=this;this.lastRedraw+this.redrawInterval<Date.now()&&(this.redrawInterval?setTimeout((function(){n.redrawNow(t,e)}),1):this.redrawNow(t,e))},o.prototype.redrawNow=function(e,a){this.updateScale(),this.material.map.fontSize=t.Math.clamp(t.Math.ceilPowerOfTwo(function(e,a,o){if(a.domElement.width&&a.domElement.height&&e.material.map.height){e.getWorldPosition(i),o.getWorldPosition(n);var s=i.distanceTo(n),l=2*Math.tan(t.Math.degToRad(o.fov)/2)*s;if(l){e.getWorldScale(r);var u=r.y*a.domElement.height/l;if(u)return Math.round(u/e.material.map.height)}}return 0}(this,e,a)),this.minFontSize,this.maxFontSize),this.lastRedraw=Date.now()},o.prototype.dispose=function(){this.material.map.dispose(),this.material.dispose()},Object.defineProperties(o.prototype,s),o}(t.Sprite)}(n(15),n(286))},function(t,e,n){t.exports=function(t){"use strict";function e(t,e,n,i,r){return[t,e,n,i+"px",r].join(" ")}function n(t){return void 0===t}return function(i){function r(n){void 0===n&&(n={});var r=n.align;void 0===r&&(r="center");var a=n.anisotropy,o=n.createCanvas;void 0===o&&(o=function(){return document.createElement("canvas")});var s=n.fillStyle;void 0===s&&(s="#fff");var l=n.fontFamily;void 0===l&&(l="sans-serif");var u=n.fontSize;void 0===u&&(u=16);var c=n.fontStyle;void 0===c&&(c="normal");var h=n.fontVariant;void 0===h&&(h="normal");var f=n.fontWeight;void 0===f&&(f="normal");var d=n.format,p=n.lineGap;void 0===p&&(p=.15);var m=n.loadFontFace;void 0===m&&(m=function(t,n,i,r){var a=e(n,i,r,1,t);return document.fonts.load(a)});var v=n.magFilter;void 0===v&&(v=t.LinearFilter);var g=n.mapping,y=n.minFilter;void 0===y&&(y=t.LinearFilter);var b=n.padding;void 0===b&&(b=.25);var x=n.strokeStyle;void 0===x&&(x="#000");var _=n.strokeWidth;void 0===_&&(_=0);var w=n.text;void 0===w&&(w="");var S,E,M=n.type,T=n.wrapS,C=n.wrapT;i.call(this,o(),g,T,C,v,y,d,M,a),this._align=r,this._fillStyle=s,this._fontFamily=l,this._fontSize=u,this._fontStyle=c,this._fontVariant=h,this._fontWeight=f,this._lineGap=p,this._padding=b,this._strokeStyle=x,this._strokeWidth=_,this._text=w,this.createCanvas=o,this.loadFontFace=m,this.redraw=(S=this.redrawNow,function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];return E||(E=new Promise((function(t){setTimeout(t,0)})).then((function(){return S.apply(t,e)})).finally((function(){E=void 0}))),E}),this.redrawNow()}i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r;var a={text:{configurable:!0},lines:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontWeight:{configurable:!0},fontVariant:{configurable:!0},fontStyle:{configurable:!0},font:{configurable:!0},fillStyle:{configurable:!0},strokeWidth:{configurable:!0},strokeWidthInPixels:{configurable:!0},strokeStyle:{configurable:!0},align:{configurable:!0},lineGap:{configurable:!0},lineGapInPixels:{configurable:!0},padding:{configurable:!0},paddingInPixels:{configurable:!0},textWidthInPixels:{configurable:!0},textHeight:{configurable:!0},textHeightInPixels:{configurable:!0},widthInPixels:{configurable:!0},height:{configurable:!0},heightInPixels:{configurable:!0}};return a.text.get=function(){return this._text},a.text.set=function(t){this._text!==t&&(this._text=t,this._lines=void 0,this._textWidthInPixels=void 0,this.redraw())},a.lines.get=function(){return n(this._lines)&&(this._lines=this.computeLines()),this._lines},r.prototype.computeLines=function(){var t=this.text;return t?t.split("\n"):[]},a.fontFamily.get=function(){return this._fontFamily},a.fontFamily.set=function(t){this._fontFamily!==t&&(this._fontFamily=t,this._textWidthInPixels=void 0,this.redraw())},a.fontSize.get=function(){return this._fontSize},a.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this._textWidthInPixels=void 0,this.redraw())},a.fontWeight.get=function(){return this._fontWeight},a.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this._textWidthInPixels=void 0,this.redraw())},a.fontVariant.get=function(){return this._fontVariant},a.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this._textWidthInPixels=void 0,this.redraw())},a.fontStyle.get=function(){return this._fontStyle},a.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this._textWidthInPixels=void 0,this.redraw())},a.font.get=function(){return e(this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily)},a.fillStyle.get=function(){return this._fillStyle},a.fillStyle.set=function(t){this._fillStyle!==t&&(this._fillStyle=t,this.redraw())},a.strokeWidth.get=function(){return this._strokeWidth},a.strokeWidth.set=function(t){this._strokeWidth!==t&&(this._strokeWidth=t,this.redraw())},a.strokeWidthInPixels.get=function(){return this._strokeWidth*this.fontSize},a.strokeStyle.get=function(){return this._strokeStyle},a.strokeStyle.set=function(t){this._strokeStyle!==t&&(this._strokeStyle=t,this.redraw())},a.align.get=function(){return this._align},a.align.set=function(t){this._align!==t&&(this._align=t,this.redraw())},a.lineGap.get=function(){return this._lineGap},a.lineGap.set=function(t){this._lineGap!==t&&(this._lineGap=t,this.redraw())},a.lineGapInPixels.get=function(){return this.fontSize*this.lineGap},a.padding.get=function(){return this._padding},a.padding.set=function(t){this._padding!==t&&(this._padding=t,this.redraw())},a.paddingInPixels.get=function(){return this.padding*this.fontSize},a.textWidthInPixels.get=function(){return n(this._textWidthInPixels)&&(this._textWidthInPixels=this.computeTextWidthInPixels()),this._textWidthInPixels},r.prototype.computeTextWidthInPixels=function(){var t=this.createCanvas,e=this.font,n=this.lines;if(n.length){var i=t().getContext("2d");return i.font=e,n.map((function(t){return i.measureText(t).width})).reduce((function(t,e){return Math.max(t,e)}))}return 0},a.textHeight.get=function(){var t=this.lineGap,e=this.lines;return e.length?e.length+t*(e.length-1):0},a.textHeightInPixels.get=function(){return this.textHeight*this.fontSize},a.widthInPixels.get=function(){return this.textWidthInPixels+this.strokeWidthInPixels+2*this.paddingInPixels},a.height.get=function(){return this.textHeight+this.strokeWidth+2*this.padding},a.heightInPixels.get=function(){return this.height*this.fontSize},r.prototype.redrawNow=function(){var t=this;return Promise.resolve().then((function(){return t.loadFontFace(t.fontFamily,t.fontStyle,t.fontVariant,t.fontWeight)})).then((function(){var e=t.image,n=e.getContext("2d");if(n.clearRect(0,0,e.width,e.height),t.widthInPixels&&t.heightInPixels){var i;switch(e.width=t.widthInPixels,e.height=t.heightInPixels,n.font=t.font,n.textBaseline="middle",t.align){case"left":n.textAlign="left",i=t.paddingInPixels+t.strokeWidthInPixels/2;break;case"right":n.textAlign="right",i=t.paddingInPixels+t.strokeWidthInPixels/2+t.textWidthInPixels;break;case"center":n.textAlign="center",i=t.paddingInPixels+t.strokeWidthInPixels/2+t.textWidthInPixels/2}var r=t.paddingInPixels+t.strokeWidthInPixels/2+t.fontSize/2;n.fillStyle=t.fillStyle,n.miterLimit=1,n.lineWidth=t.strokeWidthInPixels,n.strokeStyle=t.strokeStyle,t.lines.forEach((function(e){t.strokeWidthInPixels&&n.strokeText(e,i,r),n.fillText(e,i,r),r+=t.fontSize+t.lineGapInPixels}))}else e.width=e.height=1;t.needsUpdate=!0}))},Object.defineProperties(r.prototype,a),r}(t.Texture)}(n(15))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=s(n(288)),o=s(n(290));s(n(11));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.state={width:t.width,heightTT:t.heightTT,heightSP:t.heightSP},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){return r.default.createElement("div",{className:"dataColumn",id:"dataColumn_"+this.id,style:{padding:"unset",display:"table-cell"}},r.default.createElement(a.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.heightTT}),r.default.createElement(o.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.heightSP}))}}]),e}(r.default.Component);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=s(n(47)),o=s(n(289));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.state={width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){return r.default.createElement("div",{className:"TimeTubesHolder",id:"TimeTubesHolder_"+this.id},r.default.createElement(a.default,{id:this.id,data:this.data,width:this.props.width,height:this.props.height-100}),r.default.createElement("div",{id:this.divID,className:"timeSelector"},r.default.createElement(o.default,{id:this.id,divID:"timeSelector_"+this.id,width:this.props.width})))}}]),e}(r.default.Component);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(0)),a=h(n(7)),o=f(n(3)),s=h(n(17)),l=h(n(65)),u=f(n(11)),c=f(n(66));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.margin={top:10,bottom:30,right:10,left:10},n.id=t.id,n.divID=t.divID,n.data=o.default.getData(n.id),n.selectedRange=[n.data.data.meta.min.z,n.data.data.meta.max.z],n.state={width:t.width,height:100},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;this.initializeElements(),this.drawTimeSelector(),u.default.on("updateFocus",(function(e,n,i){e===t.id&&t.moveCurrentLine(n+t.data.data.spatial[0].z)})),u.default.on("showRotationCenter",(function(e,n,i){e===t.id&&t.moveCurrentLine(n[0])})),u.default.on("showTimeTubesOfTimeSlice",(function(e,n){e===t.id&&t.moveCurrentLine(n[0])})),u.default.on("searchTime",(function(e,n){e===t.id&&t.moveCurrentLine(n)})),c.default.on("moveCurrentLineonTimeSelector",(function(e,n){e===t.id&&t.moveCurrentLine(n)})),c.default.on("updateTimeRange",(function(e,n){e===t.id&&(t.selectedRange=n)}))}},{key:"initializeElements",value:function(){this.xScale=a.scaleLinear().domain([this.data.data.meta.min.z,this.data.data.meta.max.z]),this.brush=a.brushX(),this.yScale=a.scaleLinear().domain([this.data.data.meta.min.V,this.data.data.meta.max.V]),this.svg=a.select("#"+this.divID).append("svg").attr("class","timeSelector").attr("id","timeSelectorSVG_"+this.id),this.clip=this.svg.append("defs").append("clipPath").attr("id","clipTimeSelector_"+this.id).append("rect"),this.timeCurve=a.area().curve(a.curveLinear),this.timeSelector=this.svg.append("g").attr("class","timeSelector").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.timeSelectorGraph=this.timeSelector.append("path").datum(this.data.data.color).attr("class","area").attr("clip-path","url(#clipTimeSelector_"+this.id+")"),this.timeSelectorXAxis=this.timeSelector.append("g").attr("class","axis axis--x"),this.timeSelectorBrusher=this.timeSelector.append("g").attr("class","brush"),this.currentLine=this.svg.append("line").attr("stroke-width",3).attr("stroke","orange").attr("id","timeSelectorCurrent_"+this.id)}},{key:"drawTimeSelector",value:function(){this.id,this.divID;var t=this.props.width,e=this.state.height,n=t-this.margin.left-this.margin.right,i=e-this.margin.top-this.margin.bottom;this.selectedRange;this.svg.attr("width",this.props.width).attr("height",this.state.height),this.xScale.range([0,n]);this.xScale;var r=a.axisBottom(this.xScale);this.brush.extent([[0,0],[n,i]]).on("start brush",function(){var t=(a.event.selection||this.xScale.range).map(this.xScale.invert,this.xScale);a.selectAll(".scatterplots"+this.id).size()>0&&t.toString()!==this.selectedRange.toString()&&l.updateTimeRange(this.id,t)}.bind(this)),this.yScale.range([i,0]),this.clip.attr("width",n).attr("height",i),this.timeCurve.x(function(t){return this.xScale(t.z)}.bind(this)).y0(i).y1(function(t){return this.yScale(t.y)}.bind(this)),this.timeSelectorGraph.attr("d",this.timeCurve),this.timeSelectorXAxis.attr("transform","translate(0,"+i+")").call(r),this.timeSelectorBrusher.call(this.brush).call(this.brush.move,[this.invertScale(this.selectedRange[0]),this.invertScale(this.selectedRange[1])]);var o=a.drag().on("start",(function(){a.select(this).classed("selectedLine",!0)})).on("drag",function(){var t=a.select("#timeSelectorCurrent_"+this.id),e=a.event.x;e<=this.margin.left?e=this.margin.left:this.margin.left+n<=e&&(e=this.margin.left+n);t.attr("x1",e).attr("x2",e);var i=this.xScale.invert(e-this.margin.left);s.searchTime(this.id,i)}.bind(this)).on("end",(function(){a.select(this).classed("selectedLine",!1)}));this.currentLine.attr("x1",this.margin.left).attr("y1",this.margin.top).attr("x2",this.margin.left).attr("y2",i+this.margin.top).call(o)}},{key:"invertScale",value:function(t){var e=this.xScale.range(),n=this.xScale.domain();return(t-n[0])*(e[1]-e[0])/(n[1]-n[0])+e[0]}},{key:"updateTimeSelector",value:function(){this.id,this.divID;var t=this.props.width,e=this.state.height,n=t-this.margin.left-this.margin.right,i=e-this.margin.top-this.margin.bottom;this.selectedRange;this.svg.attr("width",this.props.width).attr("height",this.state.height),this.xScale.range([0,n]);this.xScale;var r=a.axisBottom(this.xScale);this.brush.extent([[0,0],[n,i]]),this.yScale.range([i,0]),this.clip.attr("width",n).attr("height",i),this.timeCurve.x(function(t){return this.xScale(t.z)}.bind(this)).y0(i).y1(function(t){return this.yScale(t.y)}.bind(this)),this.timeSelectorGraph.attr("d",this.timeCurve),this.timeSelectorXAxis.attr("transform","translate(0,"+i+")").call(r),this.timeSelectorBrusher.call(this.brush.move,[this.invertScale(this.selectedRange[0]),this.invertScale(this.selectedRange[1])]),this.currentLine.attr("y2",i+this.margin.top)}},{key:"moveCurrentLine",value:function(t){var e=a.select("#timeSelectorCurrent_"+this.id),n=this.xScale(t)+this.margin.left;e.attr("x1",n).attr("x2",n)}},{key:"render",value:function(){return a.selectAll("svg#timeSelectorSVG_"+this.id).size()>0&&this.updateTimeSelector(),r.default.createElement("div",{id:this.divID,className:"timeSelector outerContainer"})}}]),e}(r.default.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(0)),a=l(n(291)),o=l(n(3)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(65));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.id=t.id,n.data=t.data,n.fileName=n.data.name,n.menuHeight=24,n.state={scatterplotsList:[],width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;o.default.on("showInitSP",(function(e){if(e===t.id){var n=t.state.scatterplotsList;n.push({x:"z",y:"V"}),t.setState({scatterplotsList:n})}}))}},{key:"addScatterplots",value:function(){var t=document.getElementById("scatterSelectXAxis_"+this.id),e=document.getElementById("scatterSelectYAxis_"+this.id),n=t.options[t.selectedIndex].value,i=e.options[e.selectedIndex].value;if("unselected"!==n&&"unselected"!==i){var r=this.state.scatterplotsList;r.push({x:n,y:i}),this.setState({scatterplotsList:r})}}},{key:"resetScatterplotsZoom",value:function(){s.resetScatterplotsZoom(this.id)}},{key:"render",value:function(){var t=this,e=this.state.scatterplotsList.map((function(e,n){return r.default.createElement("div",{key:t.id+"_"+n,id:"scatterplots"+t.id+"_"+n,style:{display:"inline-block"}},r.default.createElement(a.default,{key:t.id+"_"+n,id:t.id,divID:"scatterplots"+t.id+"_"+n,xItem:e.x,yItem:e.y,width:t.props.width,height:t.props.height-t.menuHeight}))})),n=[];for(var i in this.data.lookup){var o="";o=this.data.lookup[i].length>1?this.data.lookup[i].join(","):this.data.lookup[i],n.push(r.default.createElement("option",{key:i,value:i},o))}return r.default.createElement("div",{className:"scatterplotsHolder",id:"scatterplotsHolder_"+this.id},r.default.createElement("div",{className:"scatterplotsMenu row"},this.fileName,r.default.createElement("button",{type:"button",className:"btn btn-primary btn-sm",id:"scatterResetBtn_"+this.id,onClick:this.resetScatterplotsZoom.bind(this)},"Reset"),r.default.createElement("select",{className:"custom-select select_axis",id:"scatterSelectXAxis_"+this.id,defaultValue:"unselected",style:{width:"6rem",height:"1.5rem",float:"right"}},r.default.createElement("option",{value:"unselected"},"x axis"),n),r.default.createElement("select",{className:"custom-select select_axis",id:"scatterSelectYAxis_"+this.id,defaultValue:"unselected",style:{width:"6rem",height:"1.5rem",float:"right"}},r.default.createElement("option",{value:"unselected"},"y axis"),n),r.default.createElement("button",{type:"button",className:"btn btn-primary btn-sm",id:"showScatter_"+this.id,style:{float:"right"},onClick:this.addScatterplots.bind(this)},"+")),r.default.createElement("div",{id:"scatterplots_"+this.id,className:"scatterplotsViewports",style:{height:this.props.height-this.menuHeight+"px",width:this.props.width+"px"}},e,r.default.createElement("div",{style:{clear:"both"}})))}}]),e}(r.default.Component);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(0)),a=h(n(7)),o=n(19),s=h(n(17)),l=(h(n(6)),f(n(3))),u=f(n(11)),c=f(n(66));f(n(4));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}a.selection.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.margin={top:10,bottom:30,right:30,left:60},n.id=t.id,n.divID=t.divID,n.SPID=t.id+"_"+t.divID.split("_")[1],n.data=l.default.getData(n.id);var i=c.default.getTimeRange(n.id);return n.timeRange=void 0===i?[n.data.data.meta.min.z,n.data.data.meta.max.z]:i,n.slicedData=n.data.data.spatial,n.xMinMax=[0,0],n.yMinMax=[0,0],n.state={xItem:t.xItem,yItem:t.yItem,xItemonPanel:t.xItem,yItemonPanel:t.yItem,width:t.width,height:Math.max(t.height,200)},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;this.initalizeElements(),this.computeRange(this.state.xItem,this.state.yItem),this.drawScatterplots(),u.default.on("updateFocus",(function(e,n,i){e===t.id&&(i?t.highlightCurrentPlot(n):t.updateCurrentPos(n))})),u.default.on("changePlotColor",(function(e){e===t.id?t.changePlotColor(u.default.getPlotColor(e)):t.data.data.merge&&t.data.data.name.indexOf(l.default.getData(e).data.name)>=0&&t.changePlotColorMerge(l.default.getData(e).data.name,u.default.getPlotColor(e))})),u.default.on("showRotationCenter",(function(e,n,i){e===t.id&&t.updateCurrentPos(n[0]-t.data.data.spatial[0].z)})),u.default.on("showTimeTubesOfTimeSlice",(function(e,n){e===t.id&&t.updateCurrentPos(n[0]-t.data.data.spatial[0].z)})),u.default.on("searchTime",(function(e,n){e===t.id&&t.highlightCurrentPlot(n-t.data.data.spatial[0].z)})),c.default.on("resetScatterplots",(function(e){e===t.id&&t.reset()})),c.default.on("updateTimeRange",(function(e,n){e===t.id&&(t.timeRange=n,t.computeRange(t.state.xItem,t.state.yItem),t.updateScatterplots(t.state.xItem,t.state.yItem))}))}},{key:"initalizeElements",value:function(){this.zoom=a.zoom().scaleExtent([.5,20]),this.sp=a.select("#"+this.divID).append("svg").attr("id","scatterplotsSVG_"+this.SPID).attr("class","scatterplot scatterplots"+this.id+" "+this.divID),this.xScale=a.scaleLinear(),this.xScaleTmp=this.xScale,this.xAxis=this.sp.append("g").attr("class","x_axis "+this.divID),this.xAxisText=a.selectAll("g.x_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("text-anchor","middle"),this.yScale=a.scaleLinear(),this.yScaleTmp=this.yScale,this.yAxis=this.sp.append("g").attr("class","y_axis "+this.divID).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.yAxisText=a.selectAll("g.y_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle"),this.tooltip=a.select("#"+this.divID).append("div").attr("class","tooltip "+this.divID).attr("id","tooltip_"+this.SPID).style("opacity",.75).style("visibility","hidden"),this.line=a.line().x((function(t){return t[0]})).y((function(t){return t[1]})),this.lineH=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineH "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.lineV=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineV "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.clip=this.sp.append("defs").append("clipPath").attr("id","clipScatterplots_"+this.SPID).append("rect"),this.point_g=this.sp.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")").attr("clip-path","url(#clipScatterplots_"+this.SPID+")").classed("points_g",!0);var t=this.state.xItem,e=this.state.yItem;this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").select((function(n){return t in n&&e in n?this:null})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id)}},{key:"drawScatterplots",value:function(){this.id;var t=this.SPID,e=(this.divID,this.margin),n=(this.data,this.props.width),i=Math.max(this.props.height,200),r=n-this.margin.left-this.margin.right,s=i-this.margin.top-this.margin.bottom,c=this.state.xItem,h=this.state.yItem;this.tooltip;this.zoom.extent([[0,0],[r,s]]).on("zoom",function(){var t=a.event.transform.rescaleX(this.xScale),e=a.event.transform.rescaleY(this.yScale);this.xScaleTmp=t,this.yScaleTmp=e,this.xMinMax=t.domain(),this.yMinMax=e.domain(),this.xAxis.call(this.xLabel.scale(t)),this.yAxis.call(this.yLabel.scale(e)),this.points.attr("cx",(function(e){return t(e[c])})).attr("cy",(function(t){return e(t[h])}));var n=a.select("circle.current."+this.divID);if(n._groups[0][0]){var i=n.attr("cx"),o=n.attr("cy");o<=0||s<=o?this.lineH.attr("transform","translate("+this.margin.left+","+o+")").style("visibility","hidden"):this.lineH.transition().duration(0).attr("transform","translate("+this.margin.left+","+o+")").style("visibility","visible"),i<=0||r<=i?this.lineV.attr("transform","translate("+i+","+this.margin.top+")").style("visibility","hidden"):this.lineV.transition().duration(0).attr("transform","translate("+i+","+this.margin.top+")").style("visibility","visible")}}.bind(this)),this.sp.attr("width",n).attr("height",i).call(this.zoom).on("dblclick.zoom",null),this.xScale.domain(this.xMinMax).nice().range([0,r]),this.xScaleTmp=this.xScale,this.xMinMax=this.xScale.domain(),this.xLabel=a.axisBottom(this.xScale).ticks(10).tickSize(-s).tickFormat(o.tickFormatting),this.xAxis.attr("transform","translate("+this.margin.left+","+(this.margin.top+s)+")").call(this.xLabel),this.xAxisText.attr("x",r/2).attr("y",this.margin.bottom/2+10).text(this.data.data.lookup[c]).on("click",function(){var n=a.select("#changeXAxisPanel_"+t);if("visible"===n.style("visibility"))n.transition().duration(50).style("visibility","hidden"),this.setState({xItemonPanel:this.state.xItem});else{var i=document.getElementById("changeXAxisPanel_"+t).clientHeight,o=document.getElementById("changeXAxisPanel_"+t).clientWidth;n.style("transform","translate("+(r/2+e.left-o/2)+"px,"+(s+e.top-i)+"px)").style("visibility","visible")}}.bind(this)).on("mouseover",(function(){a.select(this).style("fill","orange")})).on("mouseout",(function(){a.select(this).style("fill","black")})),this.yScale.domain(this.yMinMax).nice().range([s,0]),this.yScaleTmp=this.yScale,this.yMinMax=this.yScale.domain(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickSize(-r).tickFormat(o.tickFormatting),this.yAxis.call(this.yLabel),this.yAxisText.attr("x",-s/2).attr("y",-this.margin.left/2-10).text(this.data.data.lookup[h]).on("click",function(){var n=a.select("#changeYAxisPanel_"+t);if("visible"===n.style("visibility"))n.transition().duration(50).style("visibility","hidden"),this.setState({yItemonPanel:this.state.yItem});else{var i=document.getElementById("changeXAxisPanel_"+t).clientHeight;document.getElementById("changeXAxisPanel_"+t).clientWidth;n.style("transform","translate("+e.left+"px,"+(s/2+e.top-i/2)+"px)").style("visibility","visible")}}.bind(this)).on("mouseover",(function(){a.select(this).style("fill","orange")})).on("mouseout",(function(){a.select(this).style("fill","black")}));var f=[[0,this.margin.top],[r,this.margin.top]],d=[[this.margin.left,0],[this.margin.left,s]];if(this.lineH.attr("d",this.line(f)),this.lineV.attr("d",this.line(d)),this.clip.attr("width",r).attr("height",s),this.data.data.merge){for(var p={},m=this.data.name.split(","),v=[],g=0;g<m.length;g++){var y=l.default.getIdFromName(m[g]);p[m[g]]=g;var b=m[g].split("+");if(b.length>1)for(var x=0;x<b.length;x++)p[b[x]]=g;v.push(u.default.getPlotColor(y))}this.points.attr("cx",function(t){return this.xScale(t[c])}.bind(this)).attr("cy",function(t){return this.yScale(t[h])}.bind(this)).attr("fill",(function(t){return v[p[t.source]]})).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var _=u.default.getPlotColor(this.id);this.points.attr("cx",function(t){return this.xScale(t[c])}.bind(this)).attr("cy",function(t){return this.yScale(t[h])}.bind(this)).attr("fill",_).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}}},{key:"spMouseOver",value:function(){var t=this.tooltip,e=this.data,n=this.state.xItem,i=this.state.yItem;return function(r){a.select(this).attr("stroke-width",1).attr("stroke","black"),t.transition().duration(50).style("visibility","visible"),t.html("<i>"+e.data.lookup[n]+"</i>: "+r[n]+"<br/><i>"+e.data.lookup[i]+"</i>: "+r[i]).style("left",a.event.pageX+20+"px").style("top",a.event.pageY-30+"px")}}},{key:"spMouseOut",value:function(){var t=this.tooltip;return function(e){var n=a.select(this);n.style("fill")!==a.color("red").toString()&&(n.attr("stroke-width",.5).attr("stroke","dimgray"),n.attr("class").indexOf("current")<0?n.attr("stroke-width",.5).attr("stroke","dimgray"):n.attr("stroke","orange").attr("stroke-width",1)),t.transition().duration(150).style("visibility","hidden")}}},{key:"spDblClick",value:function(){var t=this.id;return function(e){s.searchTime(t,e.z)}}},{key:"highlightCurrentPlot",value:function(t){var e=this.margin,n=this.divID,i=t+this.data.data.spatial[0].z,r=a.selectAll("svg."+n),o=this.state.xItem,s=this.state.yItem;function l(t){var i=a.select(this),r=(i.attr("class").split(" ")[1],a.select("svg."+n)),o=r.selectAll(".currentLineH"),s=r.selectAll(".currentLineV");o.transition().duration(0).style("visibility","visible").attr("transform","translate("+e.left+","+i.attr("cy")+")"),s.transition().duration(0).style("visibility","visible").attr("transform","translate("+i.attr("cx")+","+e.top+")")}r.each((function(t){var e=a.select(this),n=e.selectAll("circle"),r=e.attr("class").split(" ");n.attr("stroke-width",.5).attr("stroke","dimgray").attr("class",r[1]+" "+r[2]);var u=n.filter((function(t){return t.z===i&&o in t&&s in t}));u._groups.length>0&&u.attr("stroke","orange").attr("stroke-width",1).attr("class",r[1]+" "+r[2]+" current").moveToFront().each(l)}))}},{key:"updateCurrentPos",value:function(t){var e=this.sp.attr("height");if("z"===this.state.xItem){var n=a.scaleLinear().domain([this.xMinMax[0],this.xMinMax[1]]).range([0,this.props.width-this.margin.left-this.margin.right]),i=t+this.data.data.spatial[0].z;this.lineH.style("visibility","hidden"),this.lineV.transition().duration(0).style("visibility","visible").attr("transform","translate("+n(i)+","+this.margin.top+")")}else if("z"===this.state.yItem){var r=a.scaleLinear().domain([this.yMinMax[0],this.yMinMax[1]]).range([0,e-this.margin.top-this.margin.bottom]),o=t+this.data.data.spatial[0].z;this.lineV.style("visibility","hidden"),this.lineH.transition().duration(0).style("visibility","visible").attr("transform","translate("+this.margin.left+","+r(o)+")")}}},{key:"changePlotColor",value:function(t){a.select("#"+this.divID).selectAll("circle").attr("fill",(function(e){return t}))}},{key:"changePlotColorMerge",value:function(t,e){a.select("#"+this.divID).selectAll("circle").filter((function(e){return t.indexOf(e.source)>=0})).attr("fill",e)}},{key:"onSelectXItem",value:function(t){this.setState({xItemonPanel:t.target.value})}},{key:"onSelectYItem",value:function(t){this.setState({yItemonPanel:t.target.value})}},{key:"computeRange",value:function(t,e){this.slicedData=this.data.data.spatial.filter(function(t){return this.timeRange[0]<=t.z&&t.z<=this.timeRange[1]}.bind(this)),this.xMinMax=a.extent(this.slicedData,(function(e){return e[t]})),this.yMinMax=a.extent(this.slicedData,(function(t){return t[e]}))}},{key:"updateScatterplots",value:function(t,e){if(this.xScale.domain(this.xMinMax).nice(),this.yScale.domain(this.yMinMax).nice(),this.xMinMax=this.xScale.domain(),this.yMinMax=this.yScale.domain(),this.points.remove(),this.data.data.merge){for(var n={},i=this.data.name.split(","),r=[],a=0;a<i.length;a++){var o=l.default.getIdFromName(i[a]);n[i[a]]=a;var s=i[a].split("+");if(s.length>1)for(var c=0;c<s.length;c++)n[s[c]]=a;r.push(u.default.getPlotColor(o))}this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(e){return this.xScale(e[t])}.bind(this)).attr("cy",function(t){return this.yScale(t[e])}.bind(this)).select((function(n){return t in n&&e in n?this:null})).attr("fill",(function(t){return r[n[t.source]]})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var h=u.default.getPlotColor(this.id);this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(e){return this.xScale(e[t])}.bind(this)).attr("cy",function(t){return this.yScale(t[e])}.bind(this)).select((function(n){return t in n&&e in n?this:null})).attr("fill",h).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}this.xAxis.call(this.xLabel.scale(this.xScale)),this.yAxis.call(this.yLabel.scale(this.yScale))}},{key:"onClickXAxisDone",value:function(t){this.setState({xItem:this.state.xItemonPanel}),this.computeRange(this.state.xItemonPanel,this.state.yItem),this.updateScatterplots(this.state.xItemonPanel,this.state.yItem),this.xAxisText.text(this.data.data.lookup[this.state.xItemonPanel]),a.select("#changeXAxisPanel_"+this.SPID).transition().duration(50).style("visibility","hidden")}},{key:"onClickYAxisDone",value:function(t){this.setState({yItem:this.state.yItemonPanel}),this.computeRange(this.state.xItem,this.state.yItemonPanel),this.updateScatterplots(this.state.xItem,this.state.yItemonPanel),this.yAxisText.text(this.data.data.lookup[this.state.yItemonPanel]),a.select("#changeYAxisPanel_"+this.SPID).transition().duration(50).style("visibility","hidden")}},{key:"reset",value:function(){this.sp.transition().duration(500).call(this.zoom.transform,a.zoomIdentity)}},{key:"render",value:function(){a.selectAll("svg#scatterplotsSVG_"+this.SPID).size()>0&&this.drawScatterplots();var t=[],e=[],n=this.data.data.lookup;for(var i in n){var o="";(o=n[i].length>1?n[i].join(","):n[i]).indexOf("JD")<0?(t.push(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectXAxisForm_"+this.SPID,value:i,checked:this.state.xItemonPanel===i,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o))),e.push(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:i,checked:this.state.yItemonPanel===i,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o)))):(t.unshift(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectXAxisForm_"+this.SPID,value:i,checked:this.state.xItemonPanel===i,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o))),e.unshift(r.default.createElement("div",{className:"form-check",key:o},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:i,checked:this.state.yItemonPanel===i,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:o},o))))}return r.default.createElement("div",{id:"scatterplotsSelectors_"+this.SPID},r.default.createElement("div",{className:"overlayPanel",id:"changeXAxisPanel_"+this.SPID,style:{visibility:"hidden",textAlign:"center"}},r.default.createElement("h6",null,"Change x axis"),r.default.createElement("div",{id:"changeXAxisItem_"+this.SPID,style:{float:"left",textAlign:"left"}},r.default.createElement("form",{id:"selectXAxisForm_"+this.SPID},t)),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeXAxisBtn_"+this.SPID,onClick:this.onClickXAxisDone.bind(this)},"Done")),r.default.createElement("div",{className:"overlayPanel",id:"changeYAxisPanel_"+this.SPID,style:{visibility:"hidden",textAlign:"center"}},r.default.createElement("h6",null,"Change y axis"),r.default.createElement("div",{id:"changeYAxisItem_"+this.SPID,style:{float:"left",textAlign:"left"}},r.default.createElement("form",{id:"selectYAxisForm_"+this.SPID},e)),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeYAxisBtn_"+this.SPID,onClick:this.onClickYAxisDone.bind(this)},"Done")))}}]),e}(r.default.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(0)),a=u(n(293)),o=u(n(306)),s=u(n(105)),l=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(6)),u(n(4)));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={queryMode:l.default.getMode(),menu:"Visualization"},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;l.default.on("switchQueryMode",(function(e){setTimeout((function(){return t.setState({queryMode:e})})),"QBE"===e?$("#extractionResults").css({width:"40%"}):$("#extractionResults").css({width:"70%"})}))}},{key:"render",value:function(){var t=void 0;return"QBE"===this.state.queryMode&&(t=r.default.createElement(s.default,null)),r.default.createElement("div",{className:"contents",id:"mainFeatureArea",style:{display:"flex"}},r.default.createElement(a.default,null),t,r.default.createElement(o.default,null))}}]),e}(r.default.Component);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=c(n(294)),o=c(n(304)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(6)),l=(c(n(105)),c(n(3))),u=c(n(4));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={queryMode:u.default.getMode()},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;u.default.on("switchQueryMode",(function(e){t.setState({queryMode:e})}))}},{key:"selectTab",value:function(){s.switchQueryMode("AE")}},{key:"updateTargets",value:function(){for(var t=$("input[name=targetList]:checked"),e=[],n=0;n<t.length;n++)e.push(Number(t[n].value));s.updateTarget(e)}},{key:"render",value:function(){var t=l.default.getAllIdsFileNames().map((function(t){return r.default.createElement("label",{className:"form-check form-check-inline",htmlFor:"inlineCheckbox1",key:t.id},r.default.createElement("input",{className:"form-check-input",type:"checkbox",name:"targetList",id:"checkboxTarget"+t.id,value:t.id,key:t.id}),t.name)}));return r.default.createElement("div",{id:"extractionMenu",className:"featureColumn",style:{overflow:"auto"}},r.default.createElement("div",{id:"extractionMainMenu"},r.default.createElement("div",{id:"targetDatasetsList",className:"controllersElem"},r.default.createElement("h5",null,"Target"),r.default.createElement("form",{onChange:this.updateTargets.bind(this)},t)),r.default.createElement("ul",{className:"nav nav-tabs"},r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link active","data-toggle":"tab",href:"#automaticExtraction",onClick:this.selectTab},"Automatic Extraction")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#visualQuery"},"Visual Query"))),r.default.createElement("div",{id:"extractionMenuTabs",className:"tab-content"},r.default.createElement("div",{className:"tab-pane fade show active",id:"automaticExtraction"},r.default.createElement(o.default,null)),r.default.createElement("div",{className:"tab-pane fade",id:"visualQuery"},r.default.createElement(a.default,null)))))}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=p(n(0)),a=d(n(6)),o=p(n(3)),s=p(n(4)),l=p(n(295)),u=p(n(296)),c=p(n(297)),h=d(n(45)),f=d(n(22));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={visualQuery:!1,dragSelection:!0,queryMode:s.default.getMode(),selector:!0,source:-1,selectedInterval:[-1,-1],coordinate:"rectangular",DTWMode:"DTWD"},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;$("#stepSizeOfSlidingWindow").val(5),s.default.on("updateSource",(function(){t.setState({source:s.default.getSource()})})),s.default.on("switchQueryMode",(function(e){t.setState({queryMode:e}),"block"===$("#resultDetailArea").css("display")&&f.toggleExtractionDetailPanel(),"QBS"===e&&t.setState({DTWMode:"DTWD"}),""===$("#stepSizeOfSlidingWindow").val()&&$("#stepSizeOfSlidingWindow").val(5),"QBE"!==e&&(document.getElementById("sourceList").selectedIndex=0,"block"===$("#QBESourceMain").css("display")&&f.toggleSourcePanel())})),s.default.on("updateSelectedPeriod",(function(){var e=s.default.getSelectedPeriod();e[1]-e[0]>0&&(t.setState({selectedInterval:e}),t.updateSelectedInterval())})),s.default.on("selectTimeInterval",(function(e,n){Number(t.state.source)===e&&(t.setState({selectedInterval:s.default.getSelectedPeriod()}),t.updateSelectedInterval())})),s.default.on("convertResultIntoQuery",(function(e,n,i){t.setState({source:e,selectedInterval:n})}))}},{key:"switchSelector",value:function(){this.setState({selector:!this.state.selector}),a.switchSelector()}},{key:"switchDragSelection",value:function(){this.setState({dragSelection:!this.state.dragSelection}),a.switchDragSelection()}},{key:"switchQueryMode",value:function(t){var e=$("input[name=queryMode]:checked").val();a.switchQueryMode(e)}},{key:"switchDTWMode",value:function(){var t=$("input[name=DTWType]:checked").val();this.setState({DTWMode:t})}},{key:"switchCoordinate",value:function(){var t=$("input[name=coordinate]:checked").val();this.setState({coordinate:t})}},{key:"resetSelection",value:function(){a.resetSelection()}},{key:"selectTimeInterval",value:function(){var t=$("#selectTimeIntervalInput").val();isNaN(t)||""==t||a.selectTimeInterval(this.state.source,t)}},{key:"updateSource",value:function(){var t=document.getElementById("sourceList"),e=t.selectedIndex,n=t.options[e].value;a.updateSource(n)}},{key:"updateSelectedInterval",value:function(){$("#selectedInterval").text("JD: "+this.state.selectedInterval[0].toFixed(3)+" - "+this.state.selectedInterval[1].toFixed(3)),$("#targetLengthMin").val(Math.floor(this.state.selectedInterval[1])-Math.ceil(this.state.selectedInterval[0])),$("#targetLengthMax").val(Math.floor(this.state.selectedInterval[1])-Math.ceil(this.state.selectedInterval[0]))}},{key:"updateIgnoredVariables",value:function(){var t=f.getIgnoredVariables();a.setIgnoredVariables(t)}},{key:"extractionSource",value:function(){var t=o.default.getAllIdsFileNames().map((function(t){return r.default.createElement("option",{value:t.id,key:t.id},t.name)}));return t.unshift(r.default.createElement("option",{value:"default",key:"default"},"Select a source")),r.default.createElement("div",{className:"featureElem",style:{display:"QBE"===this.state.queryMode?"block":"none"}},r.default.createElement("h5",null,"Source"),r.default.createElement("select",{className:"custom-select custom-select-sm",id:"sourceList",style:{width:"40%"},onChange:this.updateSource.bind(this)},t))}},{key:"queryModes",value:function(){return r.default.createElement("div",{className:"featureElem"},r.default.createElement("h5",null,"Query mode"),r.default.createElement("form",{className:"form-check form-check-inline",id:"queryMode",onChange:this.switchQueryMode.bind(this)},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"QBE",name:"queryMode",className:"custom-control-input",value:"QBE",checked:"QBE"===this.state.queryMode,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"QBE"},"Query-by-example")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginLeft:"0.5rem"}},r.default.createElement("input",{type:"radio",id:"QBS",name:"queryMode",className:"custom-control-input",value:"QBS",checked:"QBS"===this.state.queryMode,readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"QBS"},"Query-by-sketch"))))}},{key:"QBESelection",value:function(){return r.default.createElement("div",{className:"featureElem",id:"QBEArea",style:{display:"QBE"===this.state.queryMode?"block":"none"}},r.default.createElement(u.default,null))}},{key:"QBSSelection",value:function(){var t=[];return o.default.getAllData().forEach((function(e){t.push(e.data.lookup)})),r.default.createElement("div",{className:"featureElem",id:"QBSArea",style:{display:"QBS"===this.state.queryMode?"block":"none"}},r.default.createElement(c.default,{id:this.state.source,xItem:"z",yItem:"V"}))}},{key:"selectionDetail",value:function(){var t=void 0;"QBE"===this.state.queryMode&&(t=r.default.createElement(l.default,{sourceId:this.state.source}));var e=void 0;return"QBE"===this.state.queryMode&&(e=r.default.createElement("div",{className:"featureElem",style:{position:"relative"}},r.default.createElement("h5",null,"Selection Detail"),r.default.createElement("span",{id:"selectedInterval"}),r.default.createElement("div",{id:"selectedIntervalViewArea"},t))),e}},{key:"matchingControllers",value:function(){var t=[];if(this.state.source>=0){var e=o.default.getData(Number(this.state.source)).data.lookup;for(var n in e){var i="";i=e[n].length>1?e[n].join(","):e[n],"z"!==n&&"PA"!==n&&"PD"!==n&&t.push(r.default.createElement("div",{className:"form-check form-check-inline",key:n},r.default.createElement("input",{className:"form-check-input",type:"checkbox",name:"QBEIgnored",value:n,id:"QBEIgnored_"+n}),r.default.createElement("label",{className:"form-check-label",htmlFor:"QBEIgnored_"+n},i)))}}return r.default.createElement("div",{className:"featureElem",style:{position:"relative"}},r.default.createElement("h5",{onClick:this.collapseMatchingOptions},"Matching"),r.default.createElement("div",{id:"matchingOptionsMain"},r.default.createElement("div",{id:"ignoredVariablesArea",style:{display:"QBE"===this.state.queryMode?"block":"none"}},r.default.createElement("h6",null,"Inactive variables"),r.default.createElement("form",{id:"QBEIgnoredVariables",onChange:this.updateIgnoredVariables.bind(this)},t)),r.default.createElement("h6",null,"Computation"),r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("div",{className:"row matchingOption",style:{paddingLeft:"15px",paddingRight:"15px"}},r.default.createElement("div",{className:"custom-control custom-switch"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"QBENormalizeSwitch"}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"QBENormalizeSwitch"},"Normalize"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col"},r.default.createElement("form",{className:"form-check form-inline",id:"coordinate",onChange:this.switchCoordinate.bind(this),style:{paddingLeft:"0px"}},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"rectangularCoordinate",name:"coordinate",value:"rectangular",checked:"rectangular"===this.state.coordinate,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"rectangularCoordinate"},"Rectangular coordinate")),r.default.createElement("div",{className:"custom-control custom-radio",style:{marginLeft:"1.5rem"}},r.default.createElement("input",{type:"radio",id:"polarCoordinate",name:"coordinate",value:"polar",checked:"polar"===this.state.coordinate,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"polarCoordinate"},"Polar coordinate")))))),r.default.createElement("h6",null,"Settings of DTW"),r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Distance metric"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"distanceMetric",style:{width:"60%"}},r.default.createElement("option",{value:"Euclidean"},"Euclidean"),r.default.createElement("option",{value:"Manhattan"},"Manhattan")))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Warping window size"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"window size",id:"warpingWindowSize",style:{width:"40%",marginRight:"0.5rem"}}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Length of the target time series"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"min",id:"targetLengthMin",style:{width:"20%",marginRight:"0.5rem"},required:!0}),"~",r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"max",id:"targetLengthMax",style:{width:"20%",marginRight:"0.5rem",marginLeft:"0.5rem"},required:!0}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Step size of sliding window"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"step size",id:"stepSizeOfSlidingWindow",style:{width:"40%",marginRight:"0.5rem"},required:!0}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Type of DTW"),r.default.createElement("div",{className:"col"},r.default.createElement("form",{className:"form-check",id:"DTWType",onChange:this.switchDTWMode.bind(this),style:{paddingLeft:"0px"}},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"DTWI",name:"DTWType",value:"DTWI",checked:"DTWI"===this.state.DTWMode,disabled:"QBS"===this.state.queryMode,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"DTWI"},"DTW",r.default.createElement("sub",null,"I"))),r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"DTWD",name:"DTWType",value:"DTWD",checked:"DTWD"===this.state.DTWMode,className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"DTWD"},"DTW",r.default.createElement("sub",null,"D"))))))),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"runMatchingBtn",style:{float:"right"},onClick:this.clickRunButton.bind(this)},"Run")))}},{key:"collapseMatchingOptions",value:function(){$("#matchingOptionsMain").slideToggle()}},{key:"clickRunButton",value:function(){$("#topKLabelResults").text("Top "+s.default.getKValue()+" results"),$("#matchingStatus").text("searching..."),setTimeout(function(){this.runMatching()}.bind(this),0)}},{key:"runMatching",value:function(){var t=$("#QBENormalizeSwitch").prop("checked"),e=document.getElementById("distanceMetric"),n=e.selectedIndex,i=e.options[n].value,r=$("#warpingWindowSize").val();r=""===r?0:Number(r);var o=$("#targetLengthMin").val(),l=$("#targetLengthMax").val();o=""===o?0:Number(o),l=""===l?0:Number(l);var u=$("#stepSizeOfSlidingWindow").val();u=""===u?1:Number(u);var c=$("input[name=DTWType]:checked").val(),d=s.default.getTarget();switch(this.state.queryMode){case"QBE":var p=Number(this.state.source);if(d.length>0){var m=s.default.getSelectedPeriod(),v=f.getIgnoredVariables();v.push("PD"),v.push("PA");var g={};if(g.QBE={normalize:t,coordinate:this.state.coordinate,distanceMetric:i,warpingWindowSize:r,timeSliceLength:[o,l],slidingWindow:u,DTWType:c},NaN!==p){var y=void 0,b=h.makeQueryfromQBE(p,m,v,"rectangular");if("rectangular"===this.state.coordinate)y=h.runMatching(b,d,c,t,i,r,u,[o,l]);else if("polar"===this.state.coordinate){var x=h.makeQueryfromQBE(p,m,v,this.state.coordinate);y=h.runMatching(x,d,c,t,i,r,u,[o,l])}y=h.removeOverlappingQBE(p,m,y),a.setExtractionResults(g,y,b,v),h.setDefaltOrderOfResults()}}break;case"QBS":if(d.length>0){var _=s.default.getQuery(),w=[];for(var S in _)if(Array.isArray(_[S])){if(_[S].indexOf(null)<0)continue;for(var E=!0,M=0;M<_[S].length;M++)if(null!==_[S][M]){E=!1;break}E&&w.push(S)}var T=document.getElementById("widthVariables"),C=T.selectedIndex,k=T.options[C].innerText,P={};P.QBS={width:!!$("#widthDetectionSwitch").prop("checked")&&k,sketchLength:$("#periodOfSketchQuery").val(),normalize:t,coordinate:this.state.coordinate,distanceMetric:i,warpingWindowSize:r,timeSliceLength:[o,l],slidingWindow:u,DTWType:c};var A=void 0;if("rectangular"===this.state.coordinate)A=h.runMatchingSketch(_,d,c,t,i,r,u,[o,l]);else if("polar"===this.state.coordinate){var O=h.makeQueryPolarQBS(_);A=h.runMatchingSketch(O,d,c,t,i,r,u,[o,l])}a.setExtractionResults(P,A,_,w),h.setDefaltOrderOfResults()}}h.showExtractionResults()}},{key:"render",value:function(){return r.default.createElement("div",{id:"featureArea",className:"controllersElem featureArea"},this.queryModes(),r.default.createElement("div",{id:"queryModes"},this.QBESelection(),this.QBSSelection()),this.selectionDetail(),this.matchingControllers())}}]),e}(r.default.Component);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=c(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(15)),o=c(n(3)),s=c(n(11)),l=c(n(4)),u=c(n(103));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.sourceId=t.sourceId,n.selectedPeriod=l.default.getSelectedPeriod(),n.data=o.default.getData(n.sourceId),n.texture=s.default.getTexture(),n.segment=s.default.getSegment(),n.division=s.default.getDivision(),n.ignoredVariables=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){var t=this;$("#selectedIntervalViewArea").width();return r.default.createElement("div",{className:"TimeTubes",id:"selectedTimeSliceView",ref:function(e){t.mount=e}},r.default.createElement("div",{className:"overlayHidingPanel"}))}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"componentDidMount",value:function(){var t=this;this.initializeScene(),s.default.on("switch",(function(){t.camera&&t.switchCamera()})),l.default.on("switchQueryMode",(function(e){"QBE"!==e&&(t.sourceId=l.default.getSource(),t.ignoredVariables=[],t.deselectAll())})),l.default.on("updateSource",(function(){t.sourceId=l.default.getSource(),t.data=o.default.getData(t.sourceId),t.setUpScene()})),l.default.on("resetSelection",(function(){t.tube&&t.deselectAll()})),l.default.on("updateSelectedPeriod",(function(){t.selectedPeriod=l.default.getSelectedPeriod(),t.updateTimePeriod()})),l.default.on("selectPeriodfromSP",(function(e){t.selectedPeriod=l.default.getSelectedPeriod(),t.selectedPeriod[1]-t.selectedPeriod[0]>0?t.updateTimePeriod():t.tube&&t.deselectAll()})),l.default.on("selectTimeInterval",(function(e,n){t.selectedPeriod=l.default.getSelectedPeriod(),t.updateTimePeriod()})),l.default.on("setIgnoredVariables",(function(e){t.ignoredVariables=e,t.redrawTube()})),l.default.on("convertResultIntoQuery",(function(e,n,i){if("QBE"===l.default.getMode()){t.sourceId=e,t.selectedPeriod=n,t.ignoredVariables=i,t.data=o.default.getData(t.sourceId),t.tube||t.setUpScene();for(var r=document.getElementById("sourceList"),a=0;a<r.options.length;a++)if(Number(r.options[a].value)===e){r.selectedIndex=a;break}if($("#selectedInterval").text("JD: "+n[0].toFixed(3)+" - "+n[1].toFixed(3)),$("#targetLengthMin").val(Math.floor(n[1])-Math.ceil(n[0])),$("#targetLengthMax").val(Math.floor(n[1])-Math.ceil(n[0])),i)$("input[name=QBEIgnored]").each((function(t,e){i.indexOf(e.value)<0?e.checked=!1:e.checked=!0}))}t.updateTimePeriod(),t.redrawTube()}))}},{key:"initializeScene",value:function(){var t=$("#selectedIntervalViewArea").width(),e=t;this.scene=new a.Scene,this.setCameras(),this.renderer=new a.WebGLRenderer,this.renderer.setClearColor("#000000"),this.renderer.setSize(t,e),this.renderer.domElement.id="selectedTimeSliceView",this.mount.appendChild(this.renderer.domElement);var n=new a.DirectionalLight(16777215,.7);n.position.set(-20,40,60),this.scene.add(n);var i=new a.AmbientLight(2697513);this.scene.add(i);var r=new a.AxesHelper(1e3);this.scene.add(r),this.renderScene(),this.start(),this.addControls(),this.sourceId>=0&&this.setPlaceHolder()}},{key:"setUpScene",value:function(){this.updateCameras(),this.setPlaceHolder(),this.renderScene(),this.start(),this.addControls()}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate.bind(this)))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.renderScene(),this.frameId=window.requestAnimationFrame(this.animate.bind(this))}},{key:"renderScene",value:function(){this.renderer&&this.renderer.render(this.scene,this.camera)}},{key:"setCameras",value:function(){var t=void 0;t=this.sourceId>=0?s.default.getCameraProp(this.sourceId):s.default.getDefaultCameraProp(),this.cameraSet={},this.cameraSet.perspective=new a.PerspectiveCamera(t.fov,1,.1,t.far);var e=50*t.depth,n=50*t.depth*1;this.cameraSet.orthographic=new a.OrthographicCamera(-n/2,n/2,e/2,-e/2,.1,t.far),"Perspective"===t.type?this.camera=this.cameraSet.perspective:this.camera=this.cameraSet.orthographic,this.camera.position.z=50,this.camera.lookAt(-this.scene.position)}},{key:"updateCameras",value:function(){var t=s.default.getCameraProp(this.sourceId);this.cameraSet.perspective.fov=t.fov,this.cameraSet.perspective.far=t.far;var e=50*t.depth,n=50*t.depth*1;this.cameraSet.orthographic.left=-n/2,this.cameraSet.orthographic.right=n/2,this.cameraSet.orthographic.top=e/2,this.cameraSet.orthographic.bottom=-e/2,this.cameraSet.orthographic.far=t.far,"Perspective"===t.type?this.camera=this.cameraSet.perspective:this.camera=this.cameraSet.orthographic,this.camera.position.z=50,this.camera.lookAt(-this.scene.position)}},{key:"setPlaceHolder",value:function(){if(void 0===this.tube){var t=s.default.getTexture(this.sourceId),e=new Float32Array(0),n=new Float32Array(0),i=new Float32Array(0),r=new Float32Array(0),o=new Uint32Array(0),l=new a.BufferGeometry;l.addAttribute("position",new a.BufferAttribute(new Float32Array(e),3)),l.addAttribute("normal",new a.BufferAttribute(i,3)),l.addAttribute("colorData",new a.BufferAttribute(new Float32Array(n),2)),l.addAttribute("selected",new a.BufferAttribute(new Float32Array(r),1)),l.setIndex(new a.BufferAttribute(new Uint32Array(o),1)),l.computeVertexNormals();var u=new a.ShaderMaterial({vertexShader:document.getElementById("vertexShader_tube").textContent,fragmentShader:document.getElementById("fragmentShader_tube").textContent,uniforms:{lightPosition:{value:new a.Vector3(-20,40,60)},tubeNum:{value:1},shade:{value:!1},texture:{value:t},minmaxH:{value:new a.Vector2(this.data.data.meta.min.H,this.data.data.meta.max.H)},minmaxV:{value:new a.Vector2(this.data.data.meta.min.V,this.data.data.meta.max.V)},flagH:{value:!0},flagV:{value:!0}},side:a.DoubleSide,transparent:!0});this.tube=new a.Mesh(l,u),this.tube.rotateY(Math.PI),this.scene.add(this.tube)}}},{key:"switchCamera",value:function(){var t=this.camera.position,e=s.default.getCameraProp(this.sourceId);"Perspective"===e.type?(this.camera=this.cameraSet.perspective,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)):"Orthographic"===e.type&&(this.camera=this.cameraSet.orthographic,this.camera.position.x=t.x,this.camera.position.y=t.y,this.camera.position.z=t.z,this.camera.lookAt(this.scene.position)),this.addControls()}},{key:"addControls",value:function(){this.controls=new u.default(this.camera,this.renderer.domElement),this.controls.position0.set(0,0,50),this.controls.screenSpacePanning=!1,this.controls.enableZoom=!1}},{key:"drawSelectedTube",value:function(t,e,n){this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.normal.needsUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0,this.tube.geometry.index.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(t),3),this.tube.geometry.attributes.colorData=new a.BufferAttribute(new Float32Array(e),3),this.tube.geometry.attributes.selected=new a.BufferAttribute(new Float32Array(t.length/3),1),this.tube.geometry.attributes.normal=new a.BufferAttribute(new Float32Array(t.length),1),this.tube.geometry.index=new a.BufferAttribute(new Uint32Array(n),1),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}},{key:"deselectAll",value:function(){this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.normal.needsUpdate=!0,this.tube.geometry.attributes.colorData.needsUpdate=!0,this.tube.geometry.attributes.selected.needsUpdate=!0,this.tube.geometry.index.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(0),3),this.tube.geometry.attributes.colorData=new a.BufferAttribute(new Float32Array(0),2),this.tube.geometry.attributes.selected=new a.BufferAttribute(new Float32Array(0),1),this.tube.geometry.attributes.normal=new a.BufferAttribute(new Float32Array(0),1),this.tube.geometry.index=new a.BufferAttribute(new Uint32Array(0),1),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}},{key:"extractTubeAttributes",value:function(){for(var t=l.default.getTubeAttributes(Number(this.sourceId)),e=Math.ceil(this.selectedPeriod[0]-this.data.data.meta.min.z)*this.division*this.segment,n=Math.ceil(this.selectedPeriod[1]-this.data.data.meta.min.z)*this.division*this.segment,i=t.position.slice(3*e,3*n),r=t.color.slice(3*e,3*n),a=i[2],o=0;o<i.length/3;o++)i[3*o+2]-=a,r[3*o+2]=1;return{pos:i,col:r,indices:t.indices.slice(0,((n-e)/this.segment-1)*(this.segment-1)*3*2)}}},{key:"updateTimePeriod",value:function(){var t=this.extractTubeAttributes();this.drawSelectedTube(t.pos,t.col,t.indices)}},{key:"redrawTube",value:function(){for(var t=this.ignoredVariables?this.ignoredVariables.indexOf("x"):-1,e=this.ignoredVariables?this.ignoredVariables.indexOf("y"):-1,n=this.ignoredVariables?this.ignoredVariables.indexOf("r_x"):-1,i=this.ignoredVariables?this.ignoredVariables.indexOf("r_y"):-1,r=this.ignoredVariables?this.ignoredVariables.indexOf("H"):-1,o=this.ignoredVariables?this.ignoredVariables.indexOf("V"):-1,s=this.data.data.meta.min.z,l=this.data.data.meta.max.z,u=this.data.data.meta.range,c=(l-s)/(this.division*Math.ceil(l-s)),h=Math.ceil((this.data.data.splines.position.getPoint(1).z-this.data.data.splines.position.getPoint(0).z)/c),f=Math.ceil((this.data.data.splines.color.getPoint(1).z-this.data.data.splines.color.getPoint(0).z)/c),d=this.data.data.splines.position.getSpacedPoints(h),p=this.data.data.splines.radius.getSpacedPoints(h),m=(this.data.data.splines.color.getSpacedPoints(f),2*Math.PI/(this.segment-1)),v=Math.ceil((this.selectedPeriod[0]-s)/c),g=this.tube.geometry.attributes.position.array.length/3/this.segment,y=(Math.ceil((this.selectedPeriod[1]-s)/c),[]),b=void 0,x=void 0,_=void 0,w=void 0,S=void 0,E=v;E<v+g;E++){x=t>=0?0:d[E].x,_=e>=0?0:d[E].y,w=n>=0?1/u:p[E].x,S=i>=0?1/u:p[E].y;for(var M=0;M<this.segment;M++)b=m*M,y.push(-1*(x*u+w*u*Math.cos(b))),y.push(_*u+S*u*Math.sin(b)),y.push(d[E].z-this.selectedPeriod[0])}this.tube.material.uniforms.flagH.value=!(r>=0),this.tube.material.uniforms.flagV.value=!(o>=0),this.tube.geometry.attributes.position.needsUpdate=!0,this.tube.geometry.attributes.position=new a.BufferAttribute(new Float32Array(y),3),this.tube.geometry.computeVertexNormals(),this.renderer.render(this.scene,this.camera)}}]),e}(r.default.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(6)),o=s(n(3));n(5);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={dragSelection:!0},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"extractionSource",value:function(){var t=o.default.getAllIdsFileNames().map((function(t){return r.default.createElement("option",{value:t.id,key:t.id},t.name)}));return t.unshift(r.default.createElement("option",{value:"default",key:"default"},"Select a source")),r.default.createElement("div",{className:"featureElem"},r.default.createElement("h5",null,"Source"),r.default.createElement("select",{className:"custom-select custom-select-sm",id:"sourceList",style:{width:"40%"},onChange:this.updateSource.bind(this)},t))}},{key:"updateSource",value:function(){var t=document.getElementById("sourceList"),e=t.selectedIndex,n=t.options[e].value;a.updateSource(n)}},{key:"render",value:function(){return r.default.createElement("div",{id:"QBEQuerying"},this.extractionSource())}}]),e}(r.default.Component);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=d(n(0)),a=d(n(298)),o=f(n(7)),s=n(19),l=f(n(6)),u=n(44),c=d(n(4)),h=d(n(3));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=n.updateLookup(),r=c.default.getTarget(),a={},o={},s=[],l=[];for(var u in i){s=[],l=[];for(var f=0;f<r.length;f++)s.push(h.default.getData(r[f]).data.meta.min[u]),l.push(h.default.getData(r[f]).data.meta.max[u]);a[u]=s,o[u]=l}return n.state={xItem:t.xItem,yItem:t.yItem,xItemonPanel:t.xItem,yItemonPanel:t.yItem,size:0,lookup:i,selector:"pen",targetList:r,minList:a,maxList:o,detectWidth:!0,assignVariables:!1},n.margin={bottom:20,left:20},n.curveSegment=10,n.sketching=!1,n.touch=!1,n.path=null,n.pathWidth=null,n.penSizeCircle=null,n.radiuses=null,n.segPoints=[],n.pathUpper=null,n.pathLower=null,n.highlightedPoint=null,n.highlightedPointIdx=-1,n.controlPoints=[],n.widthVar=null,n.timeStamps=[],n.selectedIdx=-1,n.selectedHandle=null,n.selectedPoint=null,n.xMinMax=[],n.yMinMax=[],n.queryData={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;if(this.initCanvas(),this.state.targetList.length>0){var e=this.computeMinMaxValue(this.state.minList,this.state.maxList);this.xMinMax=e.xMinMax,this.yMinMax=e.yMinMax,this.updateAxis(),this.updateWidthVariable()}c.default.on("updateTarget",(function(){var e=c.default.getTarget(),n=t.extractMinMaxList(e),i=t.updateLookup();t.setState({targetList:e,minList:n.minList,maxList:n.maxList,lookup:i});var r=t.computeMinMaxValue(n.minList,n.maxList);t.xMinMax=r.xMinMax,t.yMinMax=r.yMinMax,t.xAxisText.text(t.state.lookup[t.state.xItem]),t.yAxisText.text(t.state.lookup[t.state.yItem]),t.updateAxis(),t.updateWidthVariable()})),c.default.on("switchQueryMode",(function(e){if("QBS"===e){var n=c.default.getTarget(),i=t.extractMinMaxList(n);t.setState({targetList:n,minList:i.minList,maxList:i.maxList});var r=t.computeMinMaxValue(i.minList,i.maxList);t.xMinMax=r.xMinMax,t.yMinMax=r.yMinMax,t.xAxisText.text(t.state.lookup[t.state.xItem]),t.yAxisText.text(t.state.lookup[t.state.yItem]),t.updateAxis(),t.updateWidthVariable()}})),c.default.on("convertResultIntoQuery",(function(e,n,i){if("QBS"===c.default.getMode()){t.path&&(t.path.remove(),t.path=null),t.pathWidth&&(t.pathWidth.remove(),t.pathWidth=null),t.penSizeCircle&&(t.penSizeCircle.remove(),t.penSizeCircle=null);for(var r=0;r<t.controlPoints.length;r++)t.controlPoints[r].label&&(t.controlPoints[r].label.remove(),t.controlPoints[r].label=null,t.controlPoints[r].labelRect.remove(),t.controlPoints[r].labelRect=null);t.controlPoints=[],t.timeStamps=[],t.radiuses=[],t.pathUpper=null,t.pathLower=null,t.segPoints=[],t.queryData={id:e,period:n,targetData:h.default.getDataArray(e,1)},t.transformDataIntoSketch(t.state.xItem,t.state.yItem)}}))}},{key:"updateLookup",value:function(){var t=[];h.default.getAllData().forEach((function(e){t.push(e.data.lookup)}));var e={};return t.forEach((function(t){var n=function(n){e[n]?t[n].forEach((function(t){e[n].indexOf(t)<0&&e[n].push(t)})):e[n]=t[n]};for(var i in t)n(i)})),e}},{key:"extractMinMaxList",value:function(t){var e={},n={},i=[],r=[];for(var a in this.state.lookup){i=[],r=[];for(var o=0;o<t.length;o++)i.push(h.default.getData(t[o]).data.meta.min[a]),r.push(h.default.getData(t[o]).data.meta.max[a]);e[a]=i,n[a]=r}return{minList:e,maxList:n}}},{key:"computeMinMaxValue",value:function(t,e){var n=Math.min.apply(null,t[this.state.xItem]),i=Math.max.apply(null,e[this.state.xItem]),r=Math.min.apply(null,t[this.state.yItem]),a=Math.max.apply(null,e[this.state.yItem]);return"z"===this.state.xItem&&(i=Math.min(i-n,50),n=0),"z"===this.state.yItem&&(a=Math.min(a-r,50),r=0),{xMinMax:[n,i],yMinMax:[r,a]}}},{key:"initCanvas",value:function(){var t=Number($("#featureArea").css("padding-left").replace("px","")),e=Number($("#featureArea").css("padding-right").replace("px","")),n=Math.floor(.3*$("#mainFeatureArea").width()-t-e);this.setState({size:n});var i=o.select("#QBSCanvasArea").style("position","relative").style("padding-bottom",n+"px");this.svg=i.append("svg").attr("id","QBSSketchPadSVG").attr("width",n).attr("height",n).style("position","absolute"),this.canvas=i.append("canvas").attr("width",n+"px !important").attr("height",n+"px !important").attr("id","QBSSketchPad").style("position","absolute").style("border","1px solid lightgray"),a.default.setup(this.canvas.node()),this.xAxis=this.svg.append("g").attr("class","x_axis"),this.xAxisText=i.append("text").attr("class","axisLabel").attr("id","sketchPadXLabel").attr("fill","black").attr("text-anchor","middle").style("font-size","0.7rem").style("position","absolute").style("background-color","white").style("left",n/2+"px").style("top",n-18+"px").text(this.state.lookup[this.state.xItem]).on("click",this.CanvasXLabelOnClick().bind(this)),this.xScale=o.scaleLinear(),this.yAxis=this.svg.append("g").attr("class","y_axis"),this.yAxisText=i.append("text").attr("class","axisLabel").attr("id","sketchPadYLabel").attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle").style("font-size","0.7rem").style("position","absolute").style("background-color","white").style("left",this.margin.left/2+"px").style("top",n/2+"px").text(this.state.lookup[this.state.yItem]).on("click",this.CanvasYLabelOnClick().bind(this)),this.yScale=o.scaleLinear(),this.tool=new a.default.Tool,this.tool.minDistance=15,this.tool.onMouseDown=this.CanvasOnMouseDown().bind(this),this.tool.onMouseDrag=this.CanvasOnMouseDrag().bind(this),this.tool.onMouseUp=this.CanvasOnMouseUp().bind(this),document.getElementById("QBSSketchPad").addEventListener("touchmove",this.CanvasOnTouchMove().bind(this)),a.default.view.onFrame=this.CanvasOnFrame().bind(this)}},{key:"CanvasOnFrame",value:function(){return function(t){if(this.sketching&&!this.touch&&this.penSizeCircle){var e=this.penSizeCircle.position,n=Date.now()-this.timeStamps[this.timeStamps.length-1],i=Math.min(n/1e3*30+2.5,100);this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(e,i),this.penSizeCircle.strokeColor="#325D88"}}}},{key:"clearCanvas",value:function(){this.path&&(this.path.remove(),this.path=null),this.pathWidth&&(this.pathWidth.remove(),this.pathWidth=null),this.penSizeCircle&&(this.penSizeCircle.remove(),this.penSizeCircle=null);for(var t=0;t<this.controlPoints.length;t++)this.controlPoints[t].label&&(this.controlPoints[t].label.remove(),this.controlPoints[t].label=null,this.controlPoints[t].labelRect.remove(),this.controlPoints[t].labelRect=null);this.controlPoints=[],this.timeStamps=[],this.radiuses=[],this.queryData={}}},{key:"CanvasOnTouchMove",value:function(){return function(t){if(this.sketching&&this.touch&&this.penSizeCircle){var e=this.penSizeCircle.position,n=97.5*t.touches[0].force+2.5;this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(e,n),this.penSizeCircle.strokeColor="#325D88"}}}},{key:"CanvasOnMouseDown",value:function(){return function(t){var e=void 0;if(this.state.assignVariables){if(e=null,e=this.path.hitTest(t.point,{segments:!0,tolerance:5})){this.highlightedPointIdx=e.segment.index,this.highlightedPoint&&this.highlightedPoint.remove(),this.highlightedPoint=new a.default.Path.Circle({center:e.point,radius:5,fillColor:"#d23430"});var n=$("#controlPointPopover");n.css("display","block");var i=$("#controlPointPopoverArrow"),r=n.outerWidth()+8,o=n.outerHeight()+8,l=null,u=void 0,c={},h=this.state.size-e.point.x,f=e.point.x,d=e.point.y,p=this.state.size-e.point.y;for(var m in h>=r?(l="right",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x,y:e.point.y-o/2},c={top:o/2-16+"px"}):f>=r?(l="left",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-r,y:e.point.y-o/2},c={top:o/2-16+"px"}):d>=o?(l="top",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-r/2,y:e.point.y-o},c={left:r/2-16+"px"}):p>=o&&(l="bottom",n.attr("class","popover bs-popover-"+l),r=n.outerWidth(!0),o=n.outerHeight(!0),u={x:e.point.x-r/2,y:e.point.y},c={left:r/2-16+"px"}),u.x<0?(u.x=0,c={left:e.point.x-16+"px"}):u.x>this.state.size-r&&(u.x=this.state.size-r,c={left:this.state.size-e.point.x-16+"px"}),u.y<0?(u.y=0,c={top:e.point.y-16+"px"}):u.y>this.state.size-o&&(u.y=this.state.size-o,c={top:o-(this.state.size-e.point.y)-16+"px"}),n.css({left:u.x+"px",top:u.y+"px"}),i.css({top:"",left:""}),i.css(c),this.controlPoints[this.highlightedPointIdx].assignedVariables)if(this.controlPoints[this.highlightedPointIdx].assignedVariables[m].length<=0)if(m===this.state.xItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.xScale.invert(this.controlPoints[this.highlightedPointIdx].position.x)));else if(m===this.state.yItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.yScale.invert(this.controlPoints[this.highlightedPointIdx].position.y)));else if(m!==this.widthVar)$("#valueAssignmentCheckbox_"+m).prop("checked",!1),$("#valueAssignmentCheckbox_"+m).prop("disabled",!1),$("#slider_"+m).css("display","block"),$("#slider_"+m).slider("option","values",[0,100]),$("#slider_"+m).slider("option","disabled",!0),$("#widthValue_"+m).css("display","none");else{$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none");var v=Math.min.apply(null,this.radiuses),g=Math.max.apply(null,this.radiuses),y=Math.min.apply(null,this.state.minList[m]),b=Math.max.apply(null,this.state.maxList[m]),x=$("#sketchWidthSlider").slider("option","values"),_=x[0]/100*(b-y)+y,w=x[1]/100*(b-y)+y;$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)((w-_)/(g-v)*(this.radiuses[this.highlightedPointIdx]-v)+_))}else if(m===this.state.xItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.xScale.invert(this.controlPoints[this.highlightedPointIdx].position.x)));else if(m===this.state.yItem)$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none"),$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)(this.yScale.invert(this.controlPoints[this.highlightedPointIdx].position.y)));else if(m!==this.widthVar){$("#valueAssignmentCheckbox_"+m).prop("checked",!0),$("#valueAssignmentCheckbox_"+m).prop("disabled",!1);var S=Math.min.apply(null,this.state.minList[m]),E=Math.max.apply(null,this.state.maxList[m]);$("#slider_"+m).slider("option","values",[(this.controlPoints[this.highlightedPointIdx].assignedVariables[m][0]-S)/(E-S)*100,(this.controlPoints[this.highlightedPointIdx].assignedVariables[m][1]-S)/(E-S)*100]),$("#slider_"+m).slider("option","disabled",!1)}else{$("#valueAssignmentCheckbox_"+m).prop("disabled",!0),$("#slider_"+m).css("display","none");var M=Math.min.apply(null,this.radiuses),T=Math.max.apply(null,this.radiuses),C=Math.min.apply(null,this.state.minList[m]),k=Math.max.apply(null,this.state.maxList[m]),P=$("#sketchWidthSlider").slider("option","values"),A=P[0]/100*(k-C)+C,O=P[1]/100*(k-C)+C;$("#widthValue_"+m).css("display","block"),$("#widthValue_"+m).text((0,s.formatValue)((O-A)/(T-M)*(this.radiuses[this.highlightedPointIdx]-M)+A))}}}else{var L=t.event.type;switch(this.state.selector){case"pen":this.sketching=!0,"touchstart"===L&&(this.touch=!0),this.clearCanvas(),this.state.detectWidth&&(this.radiuses.push(0),this.pathWidth=new a.default.Path({segments:[t.point],strokeColor:"#325D88",strokeWidth:1,fillColor:"#29ABE0",opacity:.5}),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor="#325D88",this.timeStamps.push(Date.now())),this.path=new a.default.Path({segments:[t.point],strokeColor:"black",strokeWidth:5});break;case"addPoint":if(e=null,e=this.path.hitTest(t.point,{fill:!0,stroke:!0,tolerance:5})){var I=e.location.curve,N=I.length;for(var R in this.path.insert(I.segment2.index,e.point),this.controlPoints.splice(I.segment2.index,0,{position:{x:e.point.x,y:e.point.x},assignedVariables:{},label:null,labelRect:null}),this.state.lookup)this.controlPoints[I.segment2.index].assignedVariables[R]=[];this.path.getOffsetOf(e.point);for(var D=0;D<I.segment1.index;D++)this.path.curves[D].length;if(this.state.detectWidth){var z=this.radiuses[I.segment1.index],B=(this.radiuses[I.segment2.index]-z)*I.length/N+z;this.radiuses.splice(I.segment2.index,0,B),this.pathWidth.remove(),this.pathWidth=null,this.drawPathWidth()}}break;case"eraser":if(e=null,e=this.path.hitTest(t.point,{segments:!0,tolerance:5})){var F=e.segment.index;this.path.removeSegment(F),this.controlPoints.splice(F,1),this.state.detectWidth&&(this.radiuses.splice(F,1),this.pathWidth.remove(),this.pathWidth=null,this.drawPathWidth())}break;case"controlPoint":this.tool.minDistance=1,this.selectedIdx=-1,this.selectedHandle=null,this.selectedPoint=null,e=null,(e=this.path.hitTest(t.point,{handles:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,"handle-in"===e.type?this.selectedHandle=e.segment.handleIn:"handle-out"===e.type&&(this.selectedHandle=e.segment.handleOut)),null==this.selectedHandle&&(e=this.path.hitTest(t.point,{segments:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,this.selectedPoint=e.segment);break;case"changeWidth":this.state.detectWidth&&(this.tool.minDistance=1,this.selectedIdx=-1,this.selectedPoint=null,e=null,(e=this.path.hitTest(t.point,{segments:!0,tolerance:5}))&&(this.selectedIdx=e.segment.index,this.selectedPoint=e.segment))}}}}},{key:"CanvasOnMouseDrag",value:function(){return function(t){var e=t.event.type;if(!this.state.assignVariables)switch(this.state.selector){case"pen":if(this.path.add(t.point),this.state.detectWidth)if("mousemove"===e){var n=Date.now(),i=n-this.timeStamps[this.timeStamps.length-1];this.timeStamps.push(n);var r=Math.min(i/1e3*30+2.5,100),o=t.delta.x,s=t.delta.y,l=Math.sqrt(o*o+s*s),u=t.delta;u.angle+=90;var c={x:t.middlePoint.x+r/l*u.x,y:t.middlePoint.y+r/l*u.y},h={x:t.middlePoint.x-r/l*u.x,y:t.middlePoint.y-r/l*u.y};this.pathWidth.add(c),this.pathWidth.insert(0,h),this.pathWidth.smooth(),this.radiuses.push(r),this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor="#325D88"}else if("touchmove"===e){if(t.event.touches.length>0){var f=97.5*t.event.touches[0].force+2.5,d=t.delta.x,p=t.delta.y,m=Math.sqrt(d*d+p*p),v=t.delta;v.angle+=90;var g={x:t.middlePoint.x+f/m*v.x,y:t.middlePoint.y+f/m*v.y},y={x:t.middlePoint.x-f/m*v.x,y:t.middlePoint.y-f/m*v.y};this.pathWidth.add(g),this.pathWidth.insert(0,y),this.pathWidth.smooth(),this.radiuses.push(f),this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(t.point,2.5),this.penSizeCircle.strokeColor="#325D88"}}break;case"controlPoint":if(this.selectedIdx>=0&&(this.selectedHandle&&(this.selectedHandle.x+=t.delta.x,this.selectedHandle.y+=t.delta.y),this.selectedPoint&&(this.selectedPoint.point.x+=t.delta.x,this.selectedPoint.point.y+=t.delta.y,this.controlPoints[this.selectedIdx].position={x:this.selectedPoint.point.x+t.delta.x,y:this.selectedPoint.point.y+t.delta.y}),null!==this.controlPoints[this.selectedIdx].label&&(this.controlPoints[this.selectedIdx].label.position=new a.default.Point(this.controlPoints[this.selectedIdx].position.x,this.controlPoints[this.selectedIdx].position.y-10),this.controlPoints[this.selectedIdx].labelRect.position=this.controlPoints[this.selectedIdx].label.bounds)),this.state.detectWidth){if(this.selectedIdx>0&&this.selectedIdx<this.path.segments.length-1){for(var b=0,x=0;x<this.selectedIdx-1;x++)b+=this.path.curves[x].length;for(var _=this.radiuses[this.selectedIdx-1],w=this.radiuses[this.selectedIdx],S=this.radiuses[this.selectedIdx+1],E=this.path.curves[this.selectedIdx-1].length,M=1;M<this.curveSegment;M++){var T=(w-_)*M/this.curveSegment+_,C=this.path.getPointAt(b+E/this.curveSegment*M),k=void 0,P=(this.selectedIdx-1)*this.curveSegment+M,A=this.segPoints[P-1];k=new a.default.Point(C.x-A.x,C.y-A.y);var O=Math.sqrt(k.x*k.x+k.y*k.y);k.angle+=90,this.segPoints[P]=C,this.pathUpper[P]={x:C.x+T/O*k.x,y:C.y+T/O*k.y},this.pathLower[P]={x:C.x-T/O*k.x,y:C.y-T/O*k.y}}b+=E,E=this.path.curves[this.selectedIdx].length;for(var L=0;L<this.curveSegment;L++){var I=(S-w)*L/this.curveSegment+w,N=this.path.getPointAt(b+E/this.curveSegment*L),R=void 0,D=this.selectedIdx*this.curveSegment+L,z=this.segPoints[D-1];R=new a.default.Point(N.x-z.x,N.y-z.y);var B=Math.sqrt(R.x*R.x+R.y*R.y);R.angle+=90,this.segPoints[D]=N,this.pathUpper[D]={x:N.x+I/B*R.x,y:N.y+I/B*R.y},this.pathLower[D]={x:N.x-I/B*R.x,y:N.y-I/B*R.y}}}else if(0===this.selectedIdx)for(var F=this.radiuses[0],j=this.radiuses[1],V=this.path.curves[0].length,U=0;U<this.curveSegment;U++){var H=(j-F)*U/this.curveSegment+F,G=this.path.getPointAt(V/this.curveSegment*U),W=void 0;if(0===U)W=new a.default.Point(this.path.segments[0].handleOut.x,this.path.segments[0].handleOut.y);else{var q=this.segPoints[U-1];W=new a.default.Point(G.x-q.x,G.y-q.y)}var $=Math.sqrt(W.x*W.x+W.y*W.y);W.angle+=90,this.segPoints[U]=G,this.pathUpper[U]={x:G.x+H/$*W.x,y:G.y+H/$*W.y},this.pathLower[U]={x:G.x-H/$*W.x,y:G.y-H/$*W.y}}else if(this.selectedIdx===this.path.segments.length-1){for(var Q=0,Y=0;Y<this.selectedIdx-1;Y++)Q+=this.path.curves[Y].length;for(var X=this.radiuses[this.selectedIdx-1],Z=this.radiuses[this.selectedIdx],J=this.path.curves[this.selectedIdx-1].length,K=1;K<=this.curveSegment;K++){var tt=(Z-X)*K/this.curveSegment+X,et=void 0;et=K!==this.curveSegment?this.path.getPointAt(Q+J/this.curveSegment*K):this.path.segments[this.path.segments.length-1].point;var nt=void 0,it=(this.selectedIdx-1)*this.curveSegment+K,rt=this.segPoints[it-1];nt=new a.default.Point(et.x-rt.x,et.y-rt.y);var at=Math.sqrt(nt.x*nt.x+nt.y*nt.y);nt.angle+=90,this.segPoints[it]=et,this.pathUpper[it]={x:et.x+tt/at*nt.x,y:et.y+tt/at*nt.y},this.pathLower[it]={x:et.x-tt/at*nt.x,y:et.y-tt/at*nt.y}}}var ot=this.pathLower.slice().reverse(),st=this.pathUpper.concat(ot);this.pathWidth.remove(),this.pathWidth=null,this.pathWidth=new a.default.Path({segments:st,strokeColor:"#325D88",strokeWidth:1,fillColor:"#29ABE0",opacity:.5,closed:!0}),this.pathWidth.smooth(),this.pathWidth.sendToBack()}break;case"changeWidth":if(this.state.detectWidth&&this.selectedPoint){var lt=t.point.x-this.selectedPoint.point.x,ut=t.point.y-this.selectedPoint.point.y,ct=Math.sqrt(lt*lt+ut*ut);this.penSizeCircle&&this.penSizeCircle.remove(),this.penSizeCircle=new a.default.Path.Circle(this.selectedPoint.point,ct),this.penSizeCircle.strokeColor="#325D88"}}}}},{key:"CanvasOnMouseUp",value:function(){return function(t){var e=t.event.type;if(!this.state.assignVariables){switch(this.state.selector){case"pen":this.path.add(t.point);var n=this.path.segments.slice(0,this.path.segments.length);if(n[n.length-2].point.x>n[n.length-1].point.x&&!0,this.path.simplify(10),this.path.segments.forEach(function(t){for(var e in this.controlPoints.push({position:{x:t.point.x,y:t.point.y},assignedVariables:{},label:null,labelRect:null}),this.state.lookup)this.controlPoints[this.controlPoints.length-1].assignedVariables[e]=[]}.bind(this)),this.state.detectWidth){var i=0;if("mouseup"===e){var r=Date.now(),a=r-this.timeStamps[this.timeStamps.length-1];this.timeStamps.push(r),i=Math.min(a/1e3*30+2.5,100)}else if("touchend"===e){t.event.touches.length>0&&(i=97.5*t.event.touches[0].force+2.5)}this.radiuses.push(i),this.pathWidth.remove(),this.pathWidth=null;var o=n.length/this.path.segments.length;o=Math.floor(o)%2==1?Math.floor(o):Math.ceil(o);for(var s=0,l=0,u=[];s<n.length&&l<this.path.segments.length;)if(n[s].point.x!==this.path.segments[l].point.x||n[s].point.y!==this.path.segments[l].point.y)s++;else{var c=0,h=0,f=s-Math.floor(o/2),d=s+Math.floor(o/2);f=Math.max(0,f),d=Math.min(n.length-1,d);for(var p=f;p<=d;p++)c+=this.radiuses[p],h++;c/=h,u.push(c),s++,l++}this.radiuses=u,this.drawPathWidth(),this.penSizeCircle.remove()}this.penSizeCircle=null,this.sketching=!1,this.touch=!1,this.touchPressure=0;break;case"controlPoint":this.selectedHandle=null,this.selectedPoint=null;break;case"changeWidth":if(this.state.detectWidth&&this.penSizeCircle&&this.selectedPoint){var m=this.penSizeCircle.segments[0].point.x-this.selectedPoint.point.x,v=this.penSizeCircle.segments[0].point.y-this.selectedPoint.point.y,g=Math.sqrt(m*m+v*v);this.radiuses[this.selectedIdx]=g,this.selectedHandle=null,this.selectedPoint=null,this.selectedIdx=-1,this.pathWidth.remove(),this.pathWidth=null,this.drawPathWidth(),this.penSizeCircle.remove()}}this.tool.minDistance=15}this.convertSketchIntoQuery(this.state.xItem,this.state.yItem)}}},{key:"drawPathWidth",value:function(){if(this.path.curves.length>0){this.segPoints=[];for(var t=[],e=[],n=0,i=0;i<this.path.curves.length;i++){for(var r=this.radiuses[i],o=this.radiuses[i+1],s=this.path.curves[i].length,l=0;l<this.curveSegment;l++){var u=(o-r)*l/this.curveSegment+r,c=this.path.getPointAt(n+s/this.curveSegment*l),h=void 0;if(0===l||0!==this.path.segments[i].handleOut.x&&0!==this.path.segments[i].handleOut.y)h=new a.default.Point(this.path.segments[i].handleOut.x,this.path.segments[i].handleOut.y);else{var f=this.segPoints[this.segPoints.length-1];h=new a.default.Point(c.x-f.x,c.y-f.y)}var d=Math.sqrt(h.x*h.x+h.y*h.y);h.angle+=90,this.segPoints.push(c),t.push({x:c.x+u/d*h.x,y:c.y+u/d*h.y}),e.push({x:c.x-u/d*h.x,y:c.y-u/d*h.y})}n+=s}var p=this.radiuses[this.radiuses.length-1],m=this.path.segments[this.path.segments.length-1].point,v=this.segPoints[this.segPoints.length-1],g=new a.default.Point(m.x-v.x,m.y-v.y),y=Math.sqrt(g.x*g.x+g.y*g.y);g.angle+=90,this.segPoints.push(m),t.push({x:m.x+p/y*g.x,y:m.y+p/y*g.y}),e.push({x:m.x-p/y*g.x,y:m.y-p/y*g.y}),this.pathUpper=t,this.pathLower=e;var b=e.slice().reverse(),x=t.concat(b);this.pathWidth=new a.default.Path({segments:x,strokeColor:"#325D88",strokeWidth:1,fillColor:"#29ABE0",opacity:.5,closed:!0}),this.pathWidth.smooth(),this.pathWidth.sendToBack()}}},{key:"convertSketchIntoQuery",value:function(t,e){if(this.state.targetList.length>0&&this.path&&this.path.curves.length>0){var n={};for(var i in this.state.lookup)"z"!==i&&(n[i]=[]);if("z"!==t&&"z"!==e){var r=this.path.length,o=$("#periodOfSketchQuery").val();if(""!==o){var u=r/(o=Number(o)),c=this.path.curves[0].length,h=0,f=0,d=void 0,p=[],m=[];if(this.widthVar){var v=Math.min.apply(null,this.radiuses),g=Math.max.apply(null,this.radiuses),y=Math.min.apply(null,this.state.minList[this.widthVar]),b=Math.max.apply(null,this.state.maxList[this.widthVar]),x=$("#sketchWidthSlider").slider("option","values");p=[v,g],m=[x[0]/100*(b-y)+y,x[1]/100*(b-y)+y]}for(var _ in n)this.controlPoints[0].assignedVariables[_].length>0&&n[_].push(this.controlPoints[0].assignedVariables[_]);d=this.controlPoints[0].position;for(var w=0;w<=o;w++){var S=this.path.getPointAt(u*w);if(S){for(var E in n)if(E===t)n[E].push(this.xScale.invert(S.x));else if(E===e)n[E].push(this.yScale.invert(S.y));else if(E===this.widthVar){var M=(this.radiuses[h+1]-this.radiuses[h])*(u*w-f)/c+this.radiuses[h];n[E].push((m[1]-m[0])/(p[1]-p[0])*(M-p[0])+m[0])}else n[E].push(null);if(f+c<=u*w){var T=this.controlPoints[h+1].position,C=this.controlPoints[h+1].assignedVariables;if(Math.sqrt(Math.pow(T.x-d.x,2)+Math.pow(T.y-d.y,2))<=Math.sqrt(Math.pow(T.x-S.x,2)+Math.pow(T.y-S.y,2)))for(var k in n)C[k].length>0&&(n[k][n[k].length-2]=C[k]);else for(var P in n)C[P].length>0&&(n[P][n[P].length-1]=C[P]);f+=c,(h+=1)<this.path.curves.length&&(c=this.path.curves[h].length)}d=S}}var A=this.controlPoints[this.controlPoints.length-1].assignedVariables;for(var O in A)A[O].length>0&&(n[O][n[O].length-1]=A[O])}}else if("z"===t){var L=this.controlPoints[0].position.x,I=this.controlPoints[this.controlPoints.length-1].position.x,N=this.xScale.invert(I-L);$("#periodOfSketchQuery").val((0,s.formatValue)(N)),$("#targetLengthMin").val(Math.floor(N)),$("#targetLengthMax").val(Math.ceil(N));var R,D=this.path.curves[0].length,z=0,B=0,F=[],j=[];if(this.widthVar){var V=Math.min.apply(null,this.radiuses),U=Math.max.apply(null,this.radiuses),H=Math.min.apply(null,this.state.minList[this.widthVar]),G=Math.max.apply(null,this.state.maxList[this.widthVar]),W=$("#sketchWidthSlider").slider("option","values");F=[V,U],j=[W[0]/100*(G-H)+H,W[1]/100*(G-H)+H]}var q=this.xScale(1),Q=new a.default.Path.Line(new a.default.Point(L,0),new a.default.Point(L,this.state.size)),Y=L;for(R=this.controlPoints[0].position;Y<=I;){var X=this.path.getIntersections(Q);if(X.length>0){var Z=this.path.getOffsetOf(X[0].point);for(var J in n)if(J===this.state.yItem)n[J].push(this.yScale.invert(X[0].point.y));else if(J===this.widthVar){var K=(this.radiuses[z+1]-this.radiuses[z])*(Z-B)/D+this.radiuses[z];n[J].push((j[1]-j[0])/(F[1]-F[0])*(K-F[0])+j[0])}else"z"!==J&&n[J].push(null);if(B+D<=Z){var tt=this.controlPoints[z+1].position,et=this.controlPoints[z+1].assignedVariables;if(Math.sqrt(Math.pow(tt.x-R.x,2)+Math.pow(tt.y-R.y,2))<=Math.sqrt(Math.pow(tt.x-X[0].point.x,2)+Math.pow(tt.y-X[0].point.y,2)))for(var nt in n)et[nt].length>0&&(n[nt][n[nt].length-2]=et[nt]);else for(var it in n)et[it].length>0&&(n[it][n[it].length-1]=et[it]);B+=D,(z+=1)<this.path.curves.length&&(D=this.path.curves[z].length)}}Y+=q,Q.segments[0].point.x=Y,Q.segments[1].point.x=Y}Q.remove();var rt=this.controlPoints[0].assignedVariables;for(var at in n)rt[at].length>0&&(n[at][0]=rt[at]);var ot=this.controlPoints[this.controlPoints.length-1].assignedVariables;for(var st in ot)ot[st].length>0&&(n[st][n[st].length-1]=ot[st])}else if("z"===e){var lt=this.controlPoints[0].position.y,ut=this.controlPoints[this.controlPoints.length-1].position.y,ct=this.yScale.invert(ut-lt);$("#periodOfSketchQuery").val((0,s.formatValue)(ct));var ht,ft=this.path.curves[0].length,dt=0,pt=0,mt=[],vt=[];if(this.widthVar){var gt=Math.min.apply(null,this.radiuses),yt=Math.max.apply(null,this.radiuses),bt=Math.min.apply(null,this.state.minList[this.widthVar]),xt=Math.max.apply(null,this.state.maxList[this.widthVar]),_t=$("#sketchWidthSlider").slider("option","values");mt=[gt,yt],vt=[_t[0]/100*(xt-bt)+bt,_t[1]/100*(xt-bt)+bt]}var wt=this.state.size-this.yScale(1),St=new a.default.Path.Line(new a.default.Point(0,lt),new a.default.Point(this.state.size,lt)),Et=lt;for(ht=this.controlPoints[0].position;Et>=ut;){var Mt=this.path.getIntersections(St),Tt=this.path.getOffsetOf(Mt[0].point);for(var Ct in n)if(Ct===t)n[Ct].push(this.xScale.invert(Mt[0].point.x));else if(Ct===this.widthVar){var kt=(this.radiuses[dt+1]-this.radiuses[dt])*(Tt-pt)/ft+this.radiuses[dt];n[Ct].push((vt[1]-vt[0])/(mt[1]-mt[0])*(kt-mt[0])+vt[0])}else"z"!==Ct&&n[Ct].push(null);if(pt+ft<=Tt){var Pt=this.controlPoints[dt+1].position,At=this.controlPoints[dt+1].assignedVariables;if(Math.sqrt(Math.pow(Pt.x-ht.x,2)+Math.pow(Pt.y-ht.y,2))<=Math.sqrt(Math.pow(Pt.x-Mt[0].point.x,2)+Math.pow(Pt.y-Mt[0].point.y,2)))for(var Ot in n)At[Ot].length>0&&(n[Ot][n[Ot].length-2]=At[Ot]);else for(var Lt in n)At[Lt].length>0&&(n[Lt][n[Lt].length-1]=At[Lt]);pt+=ft,(dt+=1)<this.path.curves.length&&(ft=this.path.curves[dt].length)}Et-=wt,St.segments[0].point.y=Et,St.segments[1].point.y=Et}St.remove();var It=this.controlPoints[0].assignedVariables;for(var Nt in n)It[Nt].length>0&&(n[Nt][0]=It[Nt]);var Rt=this.controlPoints[this.controlPoints.length-1].assignedVariables;for(var Dt in Rt)Rt[Dt].length>0&&(n[Dt][n[Dt].length-1]=Rt[Dt])}n.arrayLength=n[Object.keys(n)[0]].length,l.setQuery(n)}}},{key:"transformDataIntoSketch",value:function(t,e){var n=this.queryData.targetData,i=n.z.indexOf(this.queryData.period[0]),r=n.z.indexOf(this.queryData.period[1]);if("z"!==t&&"z"!==e){var o=n[t].slice(i,r+1),s=n[e].slice(i,r+1);this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var l=0;l<o.length;l++)this.path.add(new a.default.Point(this.xScale(o[l]),this.yScale(s[l])))}else if("z"===t){var u=n[e].slice(i,r+1),c=Math.floor(this.xScale.domain()[1]/2)-Math.floor(u.length/2);this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var h=0;h<u.length;h++)this.path.add(new a.default.Point(this.xScale(h+c),this.yScale(u[h])))}else if("z"===e){var f=n[t].slice(i,r+1),d=Math.floor(this.yScale.domain()[1]/2)-Math.floor(f.length/2);this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var p=0;p<f.length;p++)this.path.add(new a.default.Point(this.xScale(f[p]),this.yScale(p+d)))}var m=this.path.segments.slice(0,this.path.segments.length);if(this.path.simplify(10),this.path.segments.forEach(function(t){for(var e in this.controlPoints.push({position:{x:t.point.x,y:t.point.y},assignedVariables:{},label:null,labelRect:null}),this.state.lookup)this.controlPoints[this.controlPoints.length-1].assignedVariables[e]=[]}.bind(this)),this.widthVar){for(var v=n[this.widthVar].slice(i,r+1),g=Math.min.apply(null,v),y=Math.max.apply(null,v),b=0;b<v.length;b++)this.radiuses.push((v[b]-g)/(y-g)*22.5+2.5);var x=m.length/this.path.segments.length;x=Math.floor(x)%2==1?Math.floor(x):Math.ceil(x);for(var _=0,w=0,S=[];_<m.length&&w<this.path.segments.length;)if(m[_].point.x!==this.path.segments[w].point.x||m[_].point.y!==this.path.segments[w].point.y)_++;else{var E=0,M=0,T=_-Math.floor(x/2),C=_+Math.floor(x/2);T=Math.max(0,T),C=Math.min(m.length-1,C);for(var k=T;k<=C;k++)E+=this.radiuses[k],M++;E/=M,S.push(E),_++,w++}this.radiuses=S,this.drawPathWidth()}}},{key:"CanvasXLabelOnClick",value:function(){return function(){var t=this.state.xItemonPanel,e=Math.min.apply(null,this.state.minList[t]),n=Math.max.apply(null,this.state.maxList[t]);"z"===t&&(n=Math.min(n-e,50),e=0),this.setValueSlider("sketchPadXRangeSlider",e,n),$("#sketchPadXRangeSlider").slider("option","disabled",!1);var i=o.select("#changeXAxisPanel_SketchPad");if("visible"===i.style("visibility"))i.transition().duration(50).style("visibility","hidden"),this.setState({xItemonPanel:this.state.xItem});else{var r=document.getElementById("changeXAxisPanel_SketchPad").clientHeight,a=document.getElementById("changeXAxisPanel_SketchPad").clientWidth;if(i.style("transform","translate("+(this.state.size/2-a/2)+"px,"+(this.state.size-r-this.margin.bottom)+"px)").style("visibility","visible"),this.state.xItem===t){var s=(this.xMinMax[0]-e)/(n-e)*100,l=(this.xMinMax[1]-e)/(n-e)*100;$("#sketchPadXRangeSlider").slider("option","values",[s,l])}}}}},{key:"CanvasYLabelOnClick",value:function(){return function(){var t=this.state.yItemonPanel,e=Math.min.apply(null,this.state.minList[t]),n=Math.max.apply(null,this.state.maxList[t]);"z"===t&&(n=Math.min(n-e,50),e=0),this.setValueSlider("sketchPadYRangeSlider",e,n),$("#sketchPadYRangeSlider").slider("option","disabled",!1);var i=o.select("#changeYAxisPanel_SketchPad");if("visible"===i.style("visibility"))i.transition().duration(50).style("visibility","hidden"),this.setState({xItemonPanel:this.state.xItem});else{var r=document.getElementById("changeYAxisPanel_SketchPad").clientHeight;document.getElementById("changeYAxisPanel_SketchPad").clientWidth;i.style("transform","translate("+(this.margin.left+10)+"px,"+(this.state.size/2-r/2)+"px)").style("visibility","visible")}if(this.state.yItem===t){var a=(this.yMinMax[0]-e)/(n-e)*100,s=(this.yMinMax[1]-e)/(n-e)*100;$("#sketchPadYRangeSlider").slider("option","values",[a,s])}}}},{key:"onSelectXItem",value:function(t){var e=t.target.value;this.setState({xItemonPanel:e});var n=Math.min.apply(null,this.state.minList[e]),i=Math.max.apply(null,this.state.maxList[e]);"z"===e&&(i=Math.min(i-n,50),n=0),this.setValueSlider("sketchPadXRangeSlider",n,i),$("#sketchPadXRangeSlider").slider("option","disabled",!1)}},{key:"onSelectYItem",value:function(t){var e=t.target.value;this.setState({yItemonPanel:e});var n=Math.min.apply(null,this.state.minList[e]),i=Math.max.apply(null,this.state.maxList[e]);"z"===e&&(i=Math.min(i-n,50),n=0),this.setValueSlider("sketchPadYRangeSlider",n,i),$("#sketchPadYRangeSlider").slider("option","disabled",!1)}},{key:"updateXAxisValue",value:function(t,e){this.xMinMax=[t,e],this.updateAxis()}},{key:"updateYAxisValue",value:function(t,e){this.yMinMax=[t,e],this.updateAxis()}},{key:"updateAxis",value:function(){var t=Number($("#featureArea").css("padding-left").replace("px","")),e=Number($("#featureArea").css("padding-right").replace("px","")),n=Math.floor(.3*$("#mainFeatureArea").width()-t-e);this.setState({size:n}),o.select("#QBSCanvasArea").style("padding-bottom",n+"px"),this.svg.attr("width",n).attr("height",n),this.canvas.attr("width",n+"px !important").attr("height",n+"px !important"),a.default.setup(this.canvas.node()),this.xScale.domain(this.xMinMax).range([0,n]).nice(),this.xLabel=o.axisTop(this.xScale).ticks(5).tickSize(-n).tickFormat(s.tickFormatting),this.xAxis.call(this.xLabel),this.xAxis.select(".domain").remove(),this.xAxis.selectAll(".tick text").attr("y",n-this.margin.bottom).style("color","#8c7b7b"),this.xAxisText.style("left",n/2+"px").style("top",n-18+"px"),this.yScale.domain(this.yMinMax).range([n,0]).nice(),this.yLabel=o.axisRight(this.yScale).ticks(5).tickSize(n).tickFormat(s.tickFormatting),this.yAxis.call(this.yLabel),this.yAxis.select(".domain").remove(),this.yAxis.selectAll(".tick text").attr("x",this.margin.left).attr("y","-0.5em").style("color","#79897b"),this.yAxisText.style("left",this.margin.left/2+"px").style("top",n/2+"px")}},{key:"changeXAxis",value:function(){this.setState({xItem:this.state.xItemonPanel}),this.xAxisText&&this.xAxisText.text(this.state.lookup[this.state.xItemonPanel]);var t=Math.min.apply(null,this.state.minList[this.state.xItemonPanel]),e=Math.max.apply(null,this.state.maxList[this.state.xItemonPanel]);"z"===this.state.xItemonPanel&&(e=Math.min(e-t,50),t=0);var n=$("#sketchPadXRangeSlider").slider("option","values"),i=n[0]/100*(e-t)+t,r=n[1]/100*(e-t)+t;this.updateXAxisValue(i,r),o.select("#changeXAxisPanel_SketchPad").transition().duration(50).style("visibility","hidden"),"z"!==this.state.xItemonPanel&&"z"!==this.state.yItem&&$("#periodOfSketchQuery").val(20),this.convertSketchIntoQuery(this.state.xItemonPanel,this.state.yItem),this.recoverStroke(this.state.xItemonPanel,this.state.yItem)}},{key:"changeYAxis",value:function(){this.setState({yItem:this.state.yItemonPanel}),this.yAxisText&&this.yAxisText.text(this.state.lookup[this.state.yItemonPanel]);var t=Math.min.apply(null,this.state.minList[this.state.yItemonPanel]),e=Math.max.apply(null,this.state.maxList[this.state.yItemonPanel]);"z"===this.state.yItemonPanel&&(e=Math.min(e-t,50),t=0);var n=$("#sketchPadYRangeSlider").slider("option","values"),i=n[0]/100*(e-t)+t,r=n[1]/100*(e-t)+t;this.updateYAxisValue(i,r),o.select("#changeYAxisPanel_SketchPad").transition().duration(50).style("visibility","hidden"),"z"!==this.state.xItem&&"z"!==this.state.yItemonPanel&&$("#periodOfSketchQuery").val(20),this.convertSketchIntoQuery(),this.recoverStroke(this.state.xItem,this.state.yItemonPanel)}},{key:"recoverStroke",value:function(t,e){if(0===Object.keys(this.queryData).length){if(this.path){var n=this.path;this.path=new a.default.Path({segments:n.segments,strokeColor:"black",strokeWidth:5})}if(this.pathWidth){var i=this.pathWidth;this.pathWidth=new a.default.Path({segments:i.segments,strokeColor:"#325D88",strokeWidth:1,fillColor:"#29ABE0",opacity:.5}),this.pathWidth.sendToBack()}}else this.transformDataIntoSketch(t,e)}},{key:"selectPen",value:function(){this.setState({selector:"pen"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorPen").addClass("selected"),this.updateSelectedStatus("pen")}},{key:"selectEraser",value:function(){this.setState({selector:"eraser"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorEraser").addClass("selected"),this.updateSelectedStatus("eraser")}},{key:"selectAddPoint",value:function(){this.setState({selector:"addPoint"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorAddPoint").addClass("selected"),this.updateSelectedStatus("addPoint")}},{key:"selectControlPoint",value:function(){this.setState({selector:"controlPoint"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorControlPoint").addClass("selected"),this.updateSelectedStatus("controlPoint")}},{key:"selectChangeWidth",value:function(){this.setState({selector:"changeWidth"}),$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected")})),this.state.assignVariables||$("#selectorChangeWidth").addClass("selected"),this.updateSelectedStatus("changeWidth")}},{key:"switchVariableAssignment",value:function(){var t=!this.state.assignVariables;if(this.setState({assignVariables:t}),t)$("img[name=QBSSelector]").each((function(){$(this).removeClass("selected"),$(this).addClass("disabled")}));else{var e=this.state.selector;$("img[name=QBSSelector]").each((function(){$(this).removeClass("disabled"),$(this).attr("value")===e&&$(this).addClass("selected")}))}$("#variableAssignmentSwitch").prop("checked",t),t&&this.path?this.path.fullySelected=!0:t||(this.setState({popover:!1}),this.highlightedPoint&&this.highlightedPoint.remove(),this.updateSelectedStatus(this.state.selector))}},{key:"updateSelectedStatus",value:function(t){"addPoint"===t||"eraser"===t?this.path&&(this.path.fullySelected=!0):"controlPoint"===t?this.path&&(this.path.fullySelected=!0):"changeWidth"===t?this.path&&(this.path.fullySelected=!0):"pen"===t&&this.path&&(this.path.fullySelected=!1)}},{key:"removeAllAsignment",value:function(){for(var t=0;t<this.controlPoints.length;t++){for(var e in this.controlPoints[t].assignedVariables)this.controlPoints[t].assignedVariables[e]=[];this.controlPoints[t].label&&(this.controlPoints[t].label.remove(),this.controlPoints[t].label=null,this.controlPoints[t].labelRect.remove(),this.controlPoints[t].labelRect=null)}}},{key:"axisSelectionPanel",value:function(){var t=[],e=[];for(var n in this.state.lookup){var i="";(i=this.state.lookup[n].length>1?this.state.lookup[n].join(","):this.state.lookup[n]).indexOf("JD")<0?(t.push(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectXAxis_SketchPad",value:n,checked:this.state.xItemonPanel===n,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i))),e.push(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectYAxis_SketchPad",value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i)))):(t.unshift(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectXAxis_SketchPad",value:n,checked:this.state.xItemonPanel===n,onChange:this.onSelectXItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i))),e.unshift(r.default.createElement("div",{className:"form-check",key:i,style:{paddingLeft:"0px"}},r.default.createElement("input",{type:"radio",name:"selectYAxis_SketchPad",value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",key:i},i))))}return{x:r.default.createElement("div",{className:"overlayPanel",id:"changeXAxisPanel_SketchPad",style:{visibility:"hidden",textAlign:"center",zIndex:"101"}},r.default.createElement("h6",null,"Change x axis"),r.default.createElement("div",{id:"changeXAxisItem_SketchPad",style:{textAlign:"left"}},r.default.createElement("form",{id:"changeXAxisForm_SketchPad"},t),r.default.createElement("div",{className:"featureElem",id:"sketchPadXRangeSlider",style:{width:"150px"}},r.default.createElement("output",{id:"sketchPadXRangeSliderMax",style:{bottom:"1.3rem",zIndex:200}}),r.default.createElement("output",{id:"sketchPadXRangeSliderMin",style:{bottom:"1.3rem",zIndex:201}})),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeXAxisBtn_SketchPad",style:{float:"right"},onClick:this.changeXAxis.bind(this)},"Done"))),y:r.default.createElement("div",{className:"overlayPanel",id:"changeYAxisPanel_SketchPad",style:{visibility:"hidden",textAlign:"center",zIndex:"102"}},r.default.createElement("h6",null,"Change y axis"),r.default.createElement("div",{id:"changeYAxisItem_SketchPad",style:{textAlign:"left"}},r.default.createElement("form",{id:"changeYAxisForm_SketchPad"},e)),r.default.createElement("div",{className:"featureElem",id:"sketchPadYRangeSlider",style:{width:"150px"}},r.default.createElement("output",{id:"sketchPadYRangeSliderMax",style:{bottom:"1.3rem",zIndex:200}}),r.default.createElement("output",{id:"sketchPadYRangeSliderMin",style:{bottom:"1.3rem",zIndex:201}})),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeXAxisBtn_SketchPad",style:{float:"right"},onClick:this.changeYAxis.bind(this)},"Done"))}}},{key:"sketchMenu",value:function(){return r.default.createElement("div",{id:"QBSSelectorMenu",className:"featureElem"},r.default.createElement("h5",null,"Selection"),r.default.createElement("form",{className:"selector featureRow"},r.default.createElement("div",{className:"form-check form-check-inline"},r.default.createElement("img",{id:"selectorPen",className:"selectorIcon selected",name:"QBSSelector",value:"pen",src:"img/icons/pen.png",alt:"pen",width:"30",height:"30",title:"draw a sketch",onClick:this.selectPen.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorAddPoint",className:"selectorIcon",name:"QBSSelector",value:"addPoint",src:"img/icons/add.png",alt:"add point",width:"30",height:"30",title:"add a control point on the sketch",onClick:this.selectAddPoint.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorEraser",className:"selectorIcon",name:"QBSSelector",value:"eraser",src:"img/icons/delete.png",alt:"delete point",width:"30",height:"30",title:"remove a control point from the sketch",onClick:this.selectEraser.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorControlPoint",className:"selectorIcon",name:"QBSSelector",value:"controlPoint",src:"img/icons/control.png",alt:"control point",width:"30",height:"30",title:"move a control point on the sketch",onClick:this.selectControlPoint.bind(this),readOnly:!0}),r.default.createElement("img",{id:"selectorChangeWidth",className:"selectorIcon",name:"QBSSelector",value:"changeWidth",src:"img/icons/width.png",alt:"change width",width:"30",height:"30",title:"change the width of the sketch",onClick:this.selectChangeWidth.bind(this),readOnly:!0})),r.default.createElement("div",{id:"selectorExploration",className:"tooltip",style:{visibility:"hidden"}})))}},{key:"sketchOptions",value:function(){return r.default.createElement("div",{id:"QBSSketchOptions",className:"featureElem"},r.default.createElement("h5",{onClick:this.collapseQBSSketchOptions},"Options of Query-by-sketch"),r.default.createElement("div",{id:"QBSSketchOptionsMain"},this.sketchWidthControl(),this.assignVariablesArea(),this.definePeriodOfQuery()))}},{key:"importExportQueryMenu",value:function(){return r.default.createElement("div",{id:"importExportQuery",className:"featureElem form-inline",style:{float:"right"}},r.default.createElement("div",{className:"custom-file",style:{width:"170px",marginRight:"0.5rem"}},r.default.createElement("input",{type:"file",id:"importQuery",className:"custom-file-input",onChange:this.importQuery.bind(this)}),r.default.createElement("label",{className:"custom-file-label",htmlFor:"importQuery",style:{justifyContent:"start"}},"Import")),r.default.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.exportQuery.bind(this)},"Export"))}},{key:"importQuery",value:function(){var t=document.getElementById("importQuery").files,e=new FileReader;e.readAsText(t[0]),e.onload=function(){var t=e.result,n=JSON.parse(t);if("Query-by-sketch"===n.type){this.clearCanvas(),this.setState({xItem:n.xItem,yItem:n.yItem}),this.xAxisText&&this.xAxisText.text(this.state.lookup[n.xItem]),this.yAxisText&&this.yAxisText.text(this.state.lookup[n.yItem]),this.xMinMax=n.xRange,this.yMinMax=n.yRange,this.updateAxis(),$("#periodOfSketchQuery").val(n.queryLength);for(var i=this.state.size/n.size,r=0;r<n.controlPoints.length;r++)this.controlPoints.push(n.controlPoints[r]),this.controlPoints[this.controlPoints.length-1].position.x=this.controlPoints[this.controlPoints.length-1].position.x*i,this.controlPoints[this.controlPoints.length-1].position.y=this.controlPoints[this.controlPoints.length-1].position.y*i;this.path=new a.default.Path,this.path.strokeColor="black",this.path.strokeWidth=5;for(var o=0;o<n.path.length;o++)this.path.add(new a.default.Point(n.path[o][1][0]*i,n.path[o][1][1]*i)),this.path.segments[this.path.segments.length-1].handleIn.x=n.path[o][2][0]*i,this.path.segments[this.path.segments.length-1].handleIn.y=n.path[o][2][1]*i,this.path.segments[this.path.segments.length-1].handleOut.x=n.path[o][3][0]*i,this.path.segments[this.path.segments.length-1].handleOut.y=n.path[o][3][1]*i;n.widthVar&&(this.widthVar=n.widthVar,this.changeWidthVariable(this.widthVar),this.radiuses=n.radiuses,this.drawPathWidth());for(var s=0;s<this.controlPoints.length;s++){var l="";for(var u in this.controlPoints[s].assignedVariables)this.controlPoints[s].assignedVariables[u].length>0&&(l+=this.state.lookup[u]+", ");""!==l&&(this.controlPoints[s].label=new a.default.PointText({position:{x:this.controlPoints[s].position.x,y:this.controlPoints[s].position.y},fillColor:"#7b7971",justification:"center",fontSize:8}),l=l.slice(0,-2),this.controlPoints[s].label.content=l,this.controlPoints[s].labelRect=new a.default.Path.Rectangle(this.controlPoints[s].label.bounds),this.controlPoints[s].labelRect.fillColor="white",this.controlPoints[s].labelRect.strokeColor="white",this.controlPoints[s].label.insertAbove(this.controlPoints[s].labelRect))}this.convertSketchIntoQuery(n.xItem,n.yItem)}else alert("This file is not for a query-by-sketch.")}.bind(this)}},{key:"exportQuery",value:function(){if(this.path){var t={type:"Query-by-sketch",xItem:this.state.xItem,yItem:this.state.yItem,xRange:this.xScale.domain(),yRange:this.yScale.domain(),controlPoints:this.controlPoints,widthVar:this.widthVar,radiuses:this.radiuses,path:this.path.segments,queryLength:Number($("#periodOfSketchQuery").val()),size:this.state.size};t=JSON.stringify(t,null,"\t");var e="sketchQuery_"+(0,u.createDateLabel)()+".json",n=new Blob([t],{type:"application/json"}),i=(window.URL||window.webkitURL).createObjectURL(n),r=document.createElement("a");r.download=decodeURI(e),r.href=i,r.click()}}},{key:"collapseQBSSketchOptions",value:function(){$("#QBSSketchOptionsMain").slideToggle()}},{key:"sketchWidthControl",value:function(){var t=[];for(var e in this.state.lookup)if(e!==this.state.xItem&&e!==this.state.yItem){var n="";n=this.state.lookup[e].length>1?this.state.lookup[e].join(","):this.state.lookup[e],"z"!==e&&t.push(r.default.createElement("option",{key:e,value:e},n))}return r.default.createElement("div",{id:"sketchWidthControl",className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("h6",null,"Variable assigned to the sketch width"),r.default.createElement("div",{className:"row matchingOption",style:{paddingLeft:"15px",paddingRight:"15px"}},r.default.createElement("div",{className:"custom-control custom-switch"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"widthDetectionSwitch",checked:this.state.detectWidth,onChange:this.updateWidthDetection.bind(this)}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"widthDetectionSwitch"},"Detect width"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-5"},"Variable assigned to width"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"widthVariables",style:{width:"40%"},disabled:!this.state.detectWidth,onChange:this.updateWidthVariable.bind(this)},t))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-5"},"Value range"),r.default.createElement("div",{className:"col"},r.default.createElement("div",{className:"featureElem",id:"sketchWidthSlider",style:{width:"150px"}},r.default.createElement("output",{id:"sketchWidthSliderMax",style:{bottom:"1.3rem",zIndex:200}}),r.default.createElement("output",{id:"sketchWidthSliderMin",style:{bottom:"1.3rem",zIndex:201}})))))}},{key:"updateWidthDetection",value:function(){var t=!this.state.detectWidth;if(this.setState({detectWidth:t}),t){var e=document.getElementById("widthVariables"),n=e.selectedIndex,i=e.options[n].value;this.widthVar=i,$("img[name=QBSSelector]").each((function(){$(this).removeClass("disabled")}))}else this.widthVar=null,this.pathWidth&&(this.pathWidth.remove(),this.pathWidth=null),this.convertSketchIntoQuery(this.state.xItem,this.state.yItem),$("img[name=QBSSelector]").each((function(){"changeWidth"===$(this).attr("value")&&$(this).addClass("disabled")}))}},{key:"updateWidthVariable",value:function(){var t=document.getElementById("widthVariables");if(t&&t.options.length>0){var e=t.selectedIndex,n=t.options[e].value;this.setValueSlider("sketchWidthSlider",Math.min.apply(null,this.state.minList[n]),Math.max.apply(null,this.state.maxList[n])),$("#sketchWidthSlider").on("slidestop",this.stopSlidingWidthSlider().bind(this)),$("#sketchWidthSlider").slider("option","disabled",!this.state.detectWidth),this.widthVar=n,this.convertSketchIntoQuery(this.state.xItem,this.state.yItem)}}},{key:"changeWidthVariable",value:function(t){var e=document.getElementById("widthVariables"),n=-1;if(e&&e.options.length>0)for(n=0;n<e.options.length&&e.options[n].value!==t;n++);n<e.options.length&&(e.selectedIndex=n)}},{key:"stopSlidingWidthSlider",value:function(){return function(t,e){this.convertSketchIntoQuery(this.state.xItem,this.state.yItem)}}},{key:"definePeriodOfQuery",value:function(){return r.default.createElement("div",{id:"timeLengthOfSketch"},r.default.createElement("h6",null,"The length of time of the sketch"),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Length of the sketched query"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"Length of time",id:"periodOfSketchQuery",style:{width:"40%",marginRight:"0.5rem"},onChange:this.updateTimeLength.bind(this),required:!0,disabled:"z"===this.state.xItem||"z"===this.state.yItem}),r.default.createElement("label",{className:"col-form-label col-form-label-sm",htmlFor:"periodOfSketchQuery"},"days"))))}},{key:"updateTimeLength",value:function(){var t=$("#periodOfSketchQuery").val();if(""!==t){t=Number(t);var e=$("#QBSSketchPad").width();if("z"===this.state.xItem){var n=this.controlPoints[0].position.x,i=this.controlPoints[this.controlPoints.length-1].position.x;this.updateXAxisValue(0,(0,s.formatValue)(t/(i-n)*e))}else if("z"===this.state.yItem){var r=this.controlPoints[0].position.y,a=this.controlPoints[this.controlPoints.length-1].position.y;this.updateYAxisValue(0,(0,s.formatValue)(t/(a-r)*e))}this.convertSketchIntoQuery(this.state.xItem,this.state.yItem)}}},{key:"assignVariablesArea",value:function(){return r.default.createElement("div",{id:"variableAssignment"},r.default.createElement("h6",null,"Assign variables to the sketch"),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},r.default.createElement("div",{className:"custom-control custom-switch"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"variableAssignmentSwitch",onChange:this.switchVariableAssignment.bind(this)}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"variableAssignmentSwitch"},"Assign variables"))),r.default.createElement("div",{className:"col"},r.default.createElement("button",{type:"button",className:"btn btn-primary btn-sm",id:"removeAllAssignment",onClick:this.removeAllAsignment.bind(this)},"Remove all assignments"))))}},{key:"onClickValueAssignmentCheckbox",value:function(t){var e=t.target.value,n=t.target.checked;$("#slider_"+e).slider("option","disabled",!n)}},{key:"onClickValueAssignmentDone",value:function(){$("#controlPointPopover").css("display","none");for(var t=$("input[name=assignedVariableList]"),e="",n=(this.controlPoints[this.highlightedPointIdx].assignedVariables,0);n<t.length;n++)if(t[n].checked){var i=t[n].value,r=Math.min.apply(null,this.state.minList[i]),o=Math.max.apply(null,this.state.maxList[i]),s=$("#slider_"+t[n].value).slider("option","values");this.controlPoints[this.highlightedPointIdx].assignedVariables[i]=[r+(o-r)*s[0]/100,r+(o-r)*s[1]/100],e+=this.state.lookup[i]+", "}else{var l=t[n].value;this.controlPoints[this.highlightedPointIdx].assignedVariables[l]=[]}this.controlPoints[this.highlightedPointIdx].label&&(this.controlPoints[this.highlightedPointIdx].label.remove(),this.controlPoints[this.highlightedPointIdx].label=null,this.controlPoints[this.highlightedPointIdx].labelRect.remove(),this.controlPoints[this.highlightedPointIdx].labelRect=null),""!==e&&(this.controlPoints[this.highlightedPointIdx].label=new a.default.PointText({position:{x:this.controlPoints[this.highlightedPointIdx].position.x,y:this.controlPoints[this.highlightedPointIdx].position.y-10},fillColor:"#7b7971",justification:"center",fontSize:8}),e=e.slice(0,-2),this.controlPoints[this.highlightedPointIdx].label.content=e,this.controlPoints[this.highlightedPointIdx].labelRect=new a.default.Path.Rectangle(this.controlPoints[this.highlightedPointIdx].label.bounds),this.controlPoints[this.highlightedPointIdx].labelRect.fillColor="white",this.controlPoints[this.highlightedPointIdx].labelRect.strokeColor="white",this.controlPoints[this.highlightedPointIdx].label.insertAbove(this.controlPoints[this.highlightedPointIdx].labelRect)),this.convertSketchIntoQuery(this.state.xItem,this.state.yItem)}},{key:"setValueSlider",value:function(t,e,n){var i=$("#"+t),r=$("#"+t+"Min"),a=$("#"+t+"Max");t.slice("_")[1];i.slider({range:!0,disabled:!0,//!$('#valueAssignmentCheckbox_' + key).prop('checked'),
min:0,max:100,values:[0,100],slide:function(t,i){var o=i.values[0]/100*(n-e)+e,l=i.values[1]/100*(n-e)+e;r.val((0,s.formatValue)(o)),a.val((0,s.formatValue)(l));var u=150*i.values[0]/100-8,c=142-150*i.values[1]/100;0===i.handleIndex?(r.css("display","initial"),r.css("left",u+"px")):1===i.handleIndex&&(a.css("display","initial"),a.css("right",c+"px"))}.bind(this),stop:function(){r.css("display","none"),a.css("display","none")}}),r.val(i.slider("values",0)),a.val(i.slider("values",1))}},{key:"controlPointPopover",value:function(){var t=0,e=[];for(var n in this.state.lookup){var i="";if((i=this.state.lookup[n].length>1?this.state.lookup[n].join(","):this.state.lookup[n][0]).indexOf("JD")<0){var a="slider_"+n;e.push(r.default.createElement("div",{id:"assignVariable_"+n,className:"row align-items-center",key:i},r.default.createElement("div",{className:"form-check col-4",style:{paddingLeft:"0px"},onChange:this.onClickValueAssignmentCheckbox.bind(this)},r.default.createElement("input",{type:"checkbox",id:"valueAssignmentCheckbox_"+n,name:"assignedVariableList",value:n}),r.default.createElement("label",{className:"form-check-label",key:i},i)),r.default.createElement("div",{className:"col",id:a,style:{width:"150px"}},r.default.createElement("output",{id:a+"Max",style:{bottom:"1.3rem",zIndex:100+t}}),r.default.createElement("output",{id:a+"Min",style:{bottom:"1.3rem",zIndex:150+t}})),r.default.createElement("div",{id:"widthValue_"+n,style:{display:"none"}}))),this.setValueSlider(a,Math.min.apply(null,this.state.minList[n]),Math.max.apply(null,this.state.maxList[n]))}t++}return r.default.createElement("div",{id:"controlPointPopover",className:"popover",style:{position:"absolute",opacity:"0.85",display:"none",padding:"0.5rem 0.8rem"}},r.default.createElement("div",{id:"controlPointPopoverArrow",className:"arrow"}),r.default.createElement("form",{className:"container",name:"assignVariablesForm",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},e),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"valueAssignmentDoneBtn",style:{float:"right"},onClick:this.onClickValueAssignmentDone.bind(this)},"Done"))}},{key:"render",value:function(){var t=this.axisSelectionPanel();return r.default.createElement("div",{id:"QBSQuerying"},this.sketchMenu(),r.default.createElement("div",{id:"QBSCanvasArea"},t.x,t.y,this.controlPointPopover(),r.default.createElement("div",{className:"overlayHidingPanel"})),r.default.createElement("div",{id:"QBSSketchMenuArea"},this.importExportQueryMenu(),r.default.createElement("div",{style:{clear:"both"}}),this.sketchOptions()))}}]),e}(r.default.Component);e.default=p},function(t,e,n){var i,r,a;(function(o,s){var l=(o=o||n(299)).window,u=o.document,c=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],n=e.slice,i=Object.create,r=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=e.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},l=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},u=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},c=function(t,e,n){if(t){var i=r(t,"length");(i&&"number"==typeof i.value?o:l).call(t,e,n=n||t)}return n};function h(e,n,i,o,s){var l={};function u(t,u){"string"==typeof(u=u||(u=r(n,t))&&(u.get?u:u.value))&&"#"===u[0]&&(u=e[u.substring(1)]||u);var c,h="function"==typeof u,d=u,p=s||h&&!u.base?u&&u.get?t in e:e[t]:null;s&&p||(h&&p&&(u.base=p),h&&!1!==o&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),d&&!h&&d.get&&"function"==typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(r(e,t)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=i?i:!c),a(e,t,d))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&u(c);for(var c in l){var h=l[c],d=e["set"+h],p=e["get"+h]||d&&e["is"+h];!p||!0!==o&&0!==p.length||u(c,{get:p,set:d})}}return e}function f(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&u(this,n)}return this}return h(f,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&h(this.prototype,t,t.enumerable,n,i),h(this,e,null,n,i)}for(var r=1,a=arguments.length;r<a;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,r=this,o=0,s=arguments.length;o<s&&(!t||!e);o++)n=arguments[o],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){r.apply(this,arguments)}).prototype=e||i(this.prototype),a(e,"constructor",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=r,t}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=i(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:u,each:c,create:i,define:a,describe:r,clone:function(t){return u(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===f||"Object"===e.name)},pick:function(t,e){return t!==s?t:e},slice:function(t,e,i){return n.call(t,e,i)}}})};t.exports=c,c.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?m.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!c.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===c){var r=this.peek(t,e);return t.__index++,r}var a=this.prototype,o=a._readIndex,l=e||o&&t.__index||0,u=t.length,h=t[l];if(i=i||u-l,h instanceof this||n&&n.readNull&&null==h&&i<=1)return o&&(t.__index=l+1),h&&n&&n.clone?h.clone():h;if(h=c.create(a),o&&(h.__read=!0),h=h.initialize.apply(h,l>0||l+i<u?c.slice(t,l,l+i):t)||h,o){t.__index=l+h.__read;var f=h.__filtered;f&&(t.__filtered=f,h.__filtered=s),h.__read=s}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,a=[],o=e||0,s=i?o+i:t.length,l=o;l<s;l++)a.push(Array.isArray(r=t[l])?this.read(r,0,n):this.read(t,l,n,1));return a},readNamed:function(t,e,n,i,r){var a=this.getNamed(t,e),o=a!==s;if(o){var l=t.__filtered;if(!l){var u=this.getSource(t);(l=t.__filtered=c.create(u)).__unfiltered=u}l[e]=s}return this.read(o?[a]:t,n,i,r)},readSupported:function(t,e){var n=this.getSource(t),i=this,r=!1;return n&&Object.keys(n).forEach((function(n){if(n in e){var a=i.readNamed(t,n);a!==s&&(e[n]=a),r=!0}})),r},getSource:function(t){var e=t.__source;if(e===s){var n=1===t.length&&t[0];e=t.__source=n&&c.isPlainObject(n)?n:null}return e},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){var r;function a(i){if(!(n&&i in n||r&&i in r)){var a=e[i];a!==s&&(t[i]=a)}}if(i){for(var o,l={},u=0,c=i.length;u<c;u++)(o=i[u])in e&&(a(o),l[o]=!0);r=l}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,a=!i;if(a&&(e.formatter=new m(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),a=t._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!a&&n||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var s=0,l=t.length;s<l;s++)r[s]=c.serialize(t[s],e,n,i)}else if(c.isPlainObject(t)){r={};var u=Object.keys(t);for(s=0,l=u.length;s<l;s++){var h=u[s];r[h]=c.serialize(t[h],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var a=t,o=!n,s=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var l=t[0],u="dictionary"===l;if(1==t.length&&/^#/.test(l))return n.dictionary[l];a=[];for(var h=(l=c.exports[l])?1:0,f=t.length;h<f;h++)a.push(c.deserialize(t[h],e,n,u,s));if(l){var d=a;a=e?e(l,d,o||r):new l(d)}}else if(c.isPlainObject(t))for(var p in a={},i&&(n.dictionary=a),t)a[p]=c.deserialize(t[p],e,n);return s?a[1]:a},exportJSON:function(t,e){var n=c.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return c.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,n,i){var r=i&&e&&e.constructor===t,a=r?e:c.create(t.prototype);if(1===n.length&&a instanceof C&&(r||!(a instanceof P))){var o=n[0];c.isPlainObject(o)&&(o.insert=!1,r&&(n=n.concat([{insert:!0}])))}return(r?a.set:t).apply(a,n),r&&(e=null),a}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,e,n,i){var r=e&&e.length,a=n===s;(n=a?t.length:n)>t.length&&(n=t.length);for(var o=0;o<r;o++)e[o]._index=n+o;if(a)return c.push(t,e),[];var l=[n,i];e&&c.push(l,e);for(var u=t.splice.apply(t,l),h=(o=0,u.length);o<h;o++)u[o]._index=s;for(o=n+r,h=t.length;o<h;o++)t[o]._index=o;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(t,e){if("string"!=typeof t)c.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,r=i&&i[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(n=a.indexOf(e))&&1===a.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&a.splice(n,1)),this}c.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=c.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,i)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var a=e[r],o=a&&a[i];o&&o.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};c.each(n,(function(t,n){var r="string"==typeof t,a=r?t:n,o=c.capitalize(a),s=a.substring(2).toLowerCase();i[s]=r?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(s,e),t&&this.on(s,t),this[a]=t}})),e._eventTypes=i}return t.base.apply(this,arguments)}}},f=c.extend({_class:"PaperScope",initialize:function t(){ft=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=lt.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ut.nativeModes},lt.release(n)}if(!this.agent){var i=o.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],a="darwin"===r?"mac":r,s=e.agent=e.browser={platform:a};a&&(s[a]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,n,i,r){if(!s.chrome){var a="opera"===e?i:/^(node|trident)$/.test(e)?r:n;s.version=a,s.versionNumber=parseFloat(a),e={trident:"msie",jsdom:"node"}[e]||e,s.name=e,s[e]=!0}})),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.12.4",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=ft.PaperScript.execute(t,this,e);return J.updateFocus(),n},install:function(t){var e=this;for(var n in c.each(["project","view","tool"],(function(n){c.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ft=this,this.project=new T(t),this},createCanvas:function(t,e){return lt.getCanvas(t,e)},activate:function(){ft=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),d=c.extend(h,{initialize:function(t){this._scope=ft,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),p={findItemBoundsCollisions:function(t,e,n){function i(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var i=t[n].getBounds();e[n]=[i.left,i.top,i.right,i.bottom]}return e}var r=i(t),a=e&&e!==t?i(e):r;return this.findBoundsCollisions(r,a,n||0)},findCurveBoundsCollisions:function(t,e,n,i){function r(t){for(var e=Math.min,n=Math.max,i=new Array(t.length),r=0;r<t.length;r++){var a=t[r];i[r]=[e(a[0],a[2],a[4],a[6]),e(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return i}var a=r(t),o=e&&e!==t?r(e):a;if(i){for(var s=this.findBoundsCollisions(a,o,n||0,!1,!0),l=this.findBoundsCollisions(a,o,n||0,!0,!0),u=[],c=0,h=s.length;c<h;c++)u[c]={hor:s[c],ver:l[c]};return u}return this.findBoundsCollisions(a,o,n||0)},findBoundsCollisions:function(t,e,n,i,r){var a=!e||t===e,o=a?t:t.concat(e),s=t.length,l=o.length;function u(t,e,n){for(var i=0,r=t.length;i<r;){var a=r+i>>>1;o[t[a]][e]<n?i=a+1:r=a}return i-1}for(var c=i?1:0,h=c+2,f=i?0:1,d=f+2,p=new Array(l),m=0;m<l;m++)p[m]=m;p.sort((function(t,e){return o[t][c]-o[e][c]}));var v=[],g=new Array(s);for(m=0;m<l;m++){var y=p[m],b=o[y],x=a?y:y-s,_=y<s,w=a||!_,S=_?[]:null;if(v.length){var E=u(v,h,b[c]-n)+1;if(v.splice(0,E),a&&r){S=S.concat(v);for(var M=0;M<v.length;M++){g[k=v[M]].push(x)}}else{var T=b[d],C=b[f];for(M=0;M<v.length;M++){var k=v[M],P=o[k],A=k<s,O=a||k>=s;(r||(_&&O||w&&A)&&T>=P[f]-n&&C<=P[d]+n)&&(_&&O&&S.push(a?k:k-s),w&&A&&g[k].push(x))}}}if(_&&(t===e&&S.push(y),g[y]=S),v.length){var L=u(v,h,b[h]);v.splice(L+1,0,y)}else v.push(y)}for(m=0;m<g.length;m++){var I=g[m];I&&I.sort((function(t,e){return t-e}))}return g}},m=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});m.instance=new m;var v=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function o(t,e,n){return t<e?e:t>n?n:t}function s(t,e,i){function r(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var a=e*e-t*i,o=e*e+t*i;if(3*n(a)<o){var s=r(t),l=r(e),u=r(i),c=e*e,h=t*i;a=c-h+(l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1]-(s[0]*u[0]-h+s[0]*u[1]+s[1]*u[0]+s[1]*u[1]))}return a}function l(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?r(2,-Math.round(a(t))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},isMachineZero:function(t){return t>=-112e-18&&t<=112e-18},clamp:o,integrate:function(n,i,r,a){for(var o=t[a-2],s=e[a-2],l=.5*(r-i),u=l+i,c=0,h=a+1>>1,f=1&a?s[c++]*n(u):0;c<h;){var d=l*o[c];f+=s[c++]*(n(u+d)+n(u-d))}return l*f},findRoot:function(t,e,i,r,a,s,l){for(var u=0;u<s;u++){var c=t(i),h=c/e(i),f=i-h;if(n(h)<l){i=f;break}c>0?(a=i,i=f<=r?.5*(r+a):f):(r=i,i=f>=a?.5*(r+a):f)}return o(i,r,a)},solveQuadratic:function(t,e,r,a,u,c){var h,f=1/0;if(n(t)<1e-12){if(n(e)<1e-12)return n(r)<1e-12?-1:0;h=-r/e}else{var d=s(t,e*=-.5,r);if(d&&n(d)<112e-18){var p=l(n(t),n(e),n(r));p&&(d=s(t*=p,e*=p,r*=p))}if(d>=-112e-18){var m=d<0?0:i(d),v=e+(e<0?-m:m);0===v?f=-(h=r/t):(h=v/t,f=r/v)}}var g=0,y=null==u,b=u-1e-12,x=c+1e-12;return isFinite(h)&&(y||h>b&&h<x)&&(a[g++]=y?h:o(h,u,c)),f!==h&&isFinite(f)&&(y||f>b&&f<x)&&(a[g++]=y?f:o(f,u,c)),g},solveCubic:function(t,e,a,s,u,c,h){var f,d,p,m,g,y=l(n(t),n(e),n(a),n(s));function b(n){var i=t*(f=n);m=(i+(d=i+e))*f+(p=d*f+a),g=p*f+s}if(y&&(t*=y,e*=y,a*=y,s*=y),n(t)<1e-12)t=e,d=a,p=s,f=1/0;else if(n(s)<1e-12)d=e,p=a,f=0;else{b(-e/t/3);var x=g/t,_=r(n(x),1/3),w=x<0?-1:1,S=-m/t,E=S>0?1.324717957244746*Math.max(_,i(S)):_,M=f-w*E;if(M!==f){do{b(M),M=0===m?f:f-g/m/(1+112e-18)}while(w*M>w*f);n(t)*f*f>n(s/f)&&(d=((p=-s/f)-a)/f)}}var T=v.solveQuadratic(t,d,p,u,c,h),C=null==c;return isFinite(f)&&(0===T||T>0&&f!==u[0]&&f!==u[1])&&(C||f>c-1e-12&&f<h+1e-12)&&(u[T++]=C?f:o(f,c,h)),T}}},g={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},y=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new y(this.x,this.y)},toString:function(){var t=m.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();v.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=y.read(arguments),e=this.getLength()*t.getLength();if(v.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=y.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=y.read(t),n=e.x-this.x,i=e.y-this.y,r=n*n+i*i,a=c.read(t);return a?r:Math.sqrt(r)},normalize:function(t){t===s&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new y(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new y(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=y.read(arguments);return new y(this.x+t.x,this.y+t.y)},subtract:function(){var t=y.read(arguments);return new y(this.x-t.x,this.y-t.y)},multiply:function(){var t=y.read(arguments);return new y(this.x*t.x,this.y*t.y)},divide:function(){var t=y.read(arguments);return new y(this.x/t.x,this.y/t.y)},modulo:function(){var t=y.read(arguments);return new y(this.x%t.x,this.y%t.y)},negate:function(){return new y(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=arguments,e=y.read(t),n=c.read(t);return this.getDistance(e)<=n},isCollinear:function(){var t=y.read(arguments);return y.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=y.read(arguments);return y.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=v.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=y.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=y.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=y.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new y(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=y.read(t),n=y.read(t);return new y(Math.min(e.x,n.x),Math.min(e.y,n.y))},max:function(){var t=arguments,e=y.read(t),n=y.read(t);return new y(Math.max(e.x,n.x),Math.max(e.y,n.y))},random:function(){return new y(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},c.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new y(e(this.x),e(this.y))}}),{})),b=y.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),x=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new x(this.width,this.height)},toString:function(){var t=m.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=x.read(arguments);return new x(this.width+t.width,this.height+t.height)},subtract:function(){var t=x.read(arguments);return new x(this.width-t.width,this.height-t.height)},multiply:function(){var t=x.read(arguments);return new x(this.width*t.width,this.height*t.height)},divide:function(){var t=x.read(arguments);return new x(this.width/t.width,this.height/t.height)},modulo:function(){var t=x.read(arguments);return new x(this.width%t.width,this.height%t.height)},negate:function(){return new x(-this.width,-this.height)},isZero:function(){var t=v.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new x(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new x(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new x(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new x(e(this.width),e(this.height))}}),{})),_=x.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r,a=arguments,o=typeof t;if("number"===o?(this._set(t,e,n,i),r=4):"undefined"===o||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===a.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==s||t.width!==s?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===s&&t.to===s&&(this._set(0,0,0,0),c.readSupported(a,this)&&(r=1))),r===s){var l,u,h=y.readNamed(a,"from"),f=c.peek(a),d=h.x,p=h.y;if(f&&f.x!==s||c.hasNamed(a,"to")){var m=y.readNamed(a,"to");l=m.x-d,u=m.y-p,l<0&&(d=m.x,l=-l),u<0&&(p=m.y,u=-u)}else{var v=x.read(a);l=v.width,u=v.height}this._set(d,p,l,u),r=a.__index}var g=a.__filtered;return g&&(this.__filtered=g),this.__read&&(this.__read=r),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=m.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?y:b)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?x:_)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=x.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?y:b)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=y.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==s||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(y.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments),e=c.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},include:function(){var t=y.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new w(e,n,i-e,r-n)},expand:function(){var t=x.read(arguments),e=t.width,n=t.height;return new w(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===s?t:e)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],a=t[i?1:0],o="get"+r,s="get"+a,l="set"+r,u="set"+a,c="set"+n;this["get"+n]=function(t){return new(t?y:b)(this[o](),this[s](),this,c)},this[c]=function(){var t=y.read(arguments);this[l](t.x),this[u](t.y)}}),{beans:!0})),S=w.extend({initialize:function(t,e,n,i,r,a){this._set(t,e,n,i,!0),this._owner=r,this._setter=a},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return c.each(["x","y","width","height"],(function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),E=c.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments,r=i.length,a=!0;if(r>=6?this._set.apply(this,i):1===r||2===r?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):a=!1:r?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,a,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new E(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=m.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=y.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=y.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),a=Math.sin(t),o=n-n*r+i*a,s=i-n*a-i*r,l=this._a,u=this._b,c=this._c,h=this._d;return this._a=r*l+a*c,this._b=r*u+a*h,this._c=-a*l+r*c,this._d=-a*u+r*h,this._tx+=o*l+s*c,this._ty+=o*u+s*h,this._changed(),this},shear:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0});n&&this.translate(n);var i=this._a,r=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*i,this._d+=e.x*r,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0}),i=Math.PI/180,r=new y(Math.tan(e.x*i),Math.tan(e.y*i));return this.shear(r,n)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,o=t._a,s=t._c,l=t._b,u=t._d,c=t._tx,h=t._ty;this._a=o*n+l*r,this._c=s*n+u*r,this._b=o*i+l*a,this._d=s*i+u*a,this._tx+=c*n+h*r,this._ty+=c*i+h*a,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,o=this._tx,s=this._ty,l=t._a,u=t._c,c=t._b,h=t._d,f=t._tx,d=t._ty;this._a=l*n+u*i,this._c=l*r+u*a,this._b=c*n+h*i,this._d=c*r+h*a,this._tx=l*o+u*s+f,this._ty=c*o+h*s+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,o=t*i-e*n,s=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(a)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*a-i*r)/o,this._ty=(e*r-t*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new E(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(y.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new y),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var a=t[i],o=t[i+1];e[i]=a*this._a+o*this._c+this._tx,e[i+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,a=[e,n,i,n,i,r,e,r];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),a=r.slice(),o=2;o<8;o++){var s=i[o],l=1&o;s<r[l]?r[l]=s:s>a[l]&&(a[l]=s)}return e||(e=new w),e._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(y.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,a=this._c,o=this._d,s=this._tx,l=this._ty,u=i*o-r*a,c=null;if(u&&!isNaN(u)&&isFinite(s)&&isFinite(l)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new y),c=e._set((h*o-f*a)/u,(f*i-h*r)/u,n)}return c},decompose:function(){var t,e,n,i=this._a,r=this._b,a=this._c,o=this._d,s=i*o-r*a,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var h=l(i*i+r*r);t=Math.acos(i/h)*(r>0?1:-1),e=[h,s/h],n=[u(i*a+r*o,h*h),0]}else if(0!==a||0!==o){var f=l(a*a+o*o);t=Math.asin(a/f)*(o>0?1:-1),e=[s/f,f],n=[0,u(i*a+r*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new y(e),skewing:new y(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new y(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],(function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),M=c.extend({_class:"Line",initialize:function(t,e,n,i,r){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,a=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new y(this._px,this._py)},getVector:function(){return new y(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return M.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return M.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return M.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return y.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return y.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,a,o,s,l,u){l||(n-=t,i-=e,o-=r,s-=a);var c=n*s-i*o;if(!v.isMachineZero(c)){var h=t-r,f=e-a,d=(o*f-s*h)/c,p=(n*f-i*h)/c;if(u||-1e-12<d&&d<1+1e-12&&-1e-12<p&&p<1+1e-12)return u||(d=d<=0?0:d>=1?1:d),new y(t+d*n,e+d*i)}},getSide:function(t,e,n,i,r,a,o,s){o||(n-=t,i-=e);var l=r-t,u=l*i-(a-e)*n;return!s&&v.isMachineZero(u)&&(u=(l*n+l*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,n,i,r,a,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?a-e:e-a:((r-t)*i-(a-e)*n)/(i>n?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(t,e,n,i,r,a,o){return Math.abs(M.getSignedDistance(t,e,n,i,r,a,o))}}}),T=d.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=J.create(this,t||lt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,a=e._id,o=r[a];o?o.flags|=t:i.push(r[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new P({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:L,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(s,t)},insertLayer:function(t,e){if(e instanceof P){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(s,new P(C.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return C._getItems(this,t)},getItem:function(t){return C._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var a in e){var o=e[a];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new c({offset:new y(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new E],updateMatrix:!0}),a=0,o=i.length;a<o;a++)i[a].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var s=this._selectionItems,l=this._scope.settings.handleSize,u=this._updateVersion;for(var h in s)s[h]._drawSelection(t,e,l,s,u);t.restore()}}}),C=c.extend(h,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new E,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&c.isPlainObject(t),i=n&&!0===t.internal,r=this._matrix=new E,a=n&&t.project||ft.project,o=ft.settings;return this._id=i?null:g.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new Y(a._currentStyle,this,a),i||n&&0==t.insert||!o.insertItems&&(!n||!0!==t.insert)?this._setProject(a):(n&&t.parent||a)._insertItem(s,this,!0),n&&t!==C.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},i=this;function r(r){for(var a in r){var o=i[a];c.equals(o,"leading"===a?1.2*r.fontSize:r[a])||(n[a]=c.serialize(o,t,"data"!==a,e))}}return r(this._serializeFields),this instanceof k||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=s),16&t&&(this._globalMatrix=s),n&&72&t&&C._clearBoundsCache(n),2&t&&C._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,i=e._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||s,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=c.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?y:b,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(y.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new b(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=y.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof E,i=c.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i).rect;return arguments.length?r:new S(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),n=this._matrix,i=new E,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new E).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(C._updateBoundsCache(this,e.cacheItem),C._getBounds(n,t,e)):new w},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,a=i?null:this._matrix._orNullIfIdentity(),o=r&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,i),s=this._bounds;if(C._updateBoundsCache(this._parent||this._symbol,r),o&&s&&o in s)return{rect:(f=s[o]).rect.clone(),nonscaling:f.nonscaling};var l=this._getBounds(t||a,e),u=l.rect||l,c=this._style,h=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(o){s||(this._bounds=s={});var f=s[o]={rect:u.clone(),nonscaling:h,internal:i}}return{rect:u,nonscaling:h}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=s;for(var n=0,i=e.list,r=i.length;n<r;n++){var a=i[n];a!==t&&(a._bounds=a._position=s,a._boundsCache&&C._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,a=i,o=r,s=!1;n=n||{};for(var l=0,u=t.length;l<u;l++){var c=t[l];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),f=h.rect;i=Math.min(f.x,i),a=Math.min(f.y,a),r=Math.max(f.x+f.width,r),o=Math.max(f.y+f.height,o),h.nonscaling&&(s=!0)}}return{rect:isFinite(i)?new w(i,a,r-i,o-a):new w,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new b(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new E,a=this.getPosition(!0);r.translate(a),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(a.negate()),this.transform(r),i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,a=i.length;r<a;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0)));return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof P)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(C.NO_INSERT),n=this._children,i=c.pick(t?t.insert:s,t===s||!0===t),r=c.pick(t?t.deep:s,!0);n&&e.copyAttributes(this),n&&!r||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var a=this._name,o=this._parent;if(a&&o){n=o._children;for(var l=a,u=1;n[a];)a=l+" "+u++;a!==l&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var a=n[i];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,s=t._name;this._data=o?c.clone(o):null,s&&this.setName(s)},rasterize:function(t,e){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=n.getTopLeft().floor(),a=n.getBottomRight().ceil(),o=new x(a.subtract(r)),l=new O(C.NO_INSERT);if(!o.isZero()){var u=lt.getCanvas(o.multiply(i)),h=u.getContext("2d"),f=(new E).scale(i).translate(r.negate());h.save(),f.applyToContext(h),this.draw(h,new c({matrices:[f]})),h.restore(),l.setCanvas(u)}return l.transform((new E).translate(r.add(o.divide(2))).scale(1/i)),(e===s||e)&&l.insertAbove(this),l},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(y.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new j.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof C&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(y.read(t),N.getOptions(t))}function e(){var t=arguments,e=y.read(t),n=N.getOptions(t),i=[];return this._hitTest(e,new c({all:i},n)),i}function n(t,e,n,i){var r=this._children;if(r)for(var a=r.length-1;a>=0;a--){var o=r[a],s=o!==i&&o._hitTest(t,e,n);if(s&&!e.all)return s}return null}return T.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new x(j._getStrokePadding(a,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var s,l,u=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,f=this;function d(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function p(e,n){var i=n?s["get"+n]():f.getPosition();if(t.subtract(i).divide(o).length<=1)return new N(e,f,{name:n?c.hyphenate(n):e,point:i})}var m=e.position,v=e.center,g=e.bounds;if(u&&this._parent&&(m||v||g)){if((v||g)&&(s=this.getInternalBounds()),!(l=m&&p("position")||v&&p("center","Center"))&&g)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!l;b++)l=p("bounds",y[b]);l=d(l)}return l||(l=this._hitTestChildren(t,e,r)||u&&d(this._hitTestSelf(t,e,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),l&&l.point&&(l.point=i.transform(l.point)),l},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new N("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var r=/^(empty|editable)$/.test(t)?this["is"+c.capitalize(t)]():"type"===t?c.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(c.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],a=n[i];if(c.isPlainObject(r)&&c.isPlainObject(a)){if(!t(r,a))return!1}else if(!c.equals(r,a))return!1}return!0}(e,r)}return c.equals(r,e)},getItems:function(t){return C._getItems(this,t,this._matrix)},getItem:function(t){return C._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,a){if(!r){var o="object"==typeof n&&n,s=o&&o.overlapping,l=o&&o.inside,u=(y=s||l)&&w.read([y]);r={items:[],recursive:o&&!1!==o.recursive,inside:!!l,overlapping:!!s,rect:u,path:s&&new j.Rectangle({rectangle:u,insert:!1})},o&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=e._children,f=r.items;i=(u=r.rect)&&(i||new E);for(var d=0,p=h&&h.length;d<p;d++){var m=h[d],v=i&&i.appended(m._matrix),g=!0;if(u){var y=m.getBounds(v);if(!u.intersects(y))continue;u.contains(y)||r.overlapping&&(y.contains(u)||r.path.intersects(m,v))||(g=!1)}if(g&&m.matches(n)&&(f.push(m),a))break;if(!1!==r.recursive&&t(m,n,v,r,a),a&&f.length>0)break}return f}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(s,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var i={},r=(e=c.slice(e)).length-1;r>=0;r--){var a=(u=e[r])&&u._id;!u||i[a]?e.splice(r,1):(u._remove(!1,!0),i[a]=!0)}c.splice(n,e,t,0);for(var o=this._project,s=o._changes,l=(r=0,e.length);r<l;r++){var u,h=(u=e[r])._name;u._parent=this,u._setProject(o,!0),h&&u.setName(h),s&&u._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(s,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;-1!==a&&(e[i]==this&&delete e[i],r.splice(a,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var n=c.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?c:y).read(n),r=y.read(n,0,{readNull:!0});return this.transform((new E)[t](i,r||this.getPosition(!0)))}}),{translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var i=this._matrix,r=t&&!t.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(r||!i.isIdentity()||e&&this._children);if(!r&&!a)return this;if(r){!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t,!0);var o=this._style,s=o.getFillColor(!0),l=o.getStrokeColor(!0);s&&s.transform(t),l&&l.transform(t)}if(a&&(a=this._transformContent(i,e,n))){var u=this._pivot;u&&i._transformPoint(u,u,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;(r||a)&&this._changed(25);var f=r&&c&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var d in c){var p=c[d];if(p.nonscaling)delete c[d];else if(a||!p.internal){var m=p.rect;t._transformBounds(m,m)}}this._bounds=c;var v=c[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else r&&h&&this._pivot&&(this._position=t._transformPoint(h,h));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(y.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(y.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(y.read(arguments))},localToParent:function(){return this._matrix._transformPoint(y.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,a=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new w(new y,new x(n.width*a,n.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var a=i.getStrokeJoin(),o=i.getStrokeCap(),s=i.getMiterLimit();if(a&&(t.lineJoin=a),o&&(t.lineCap=o),s&&(t.miterLimit=s),ft.support.nativeDash){var l=i.getDashArray(),u=i.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=u):(t.mozDash=l,t.mozDashOffset=u))}}if(i.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend((new E).scale(c,c)),f=h.transform(new y(i.getShadowBlur(),0)),d=h.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,a=this._matrix,o=i[i.length-1].appended(a);if(o.isInvertible()){r=r?r.appended(o):o,i.push(o),e.updateMatrix&&(this._globalMatrix=o);var s,l,u,c=this._blendMode,h=this._opacity,f="normal"===c,d=ut.nativeModes[c],p=f&&1===h||e.dontStart||e.clip||(d||f&&h<1)&&this._canComposite(),m=e.pixelRatio||1;if(!p){var v=this.getStrokeBounds(r);if(!v.width||!v.height)return void i.pop();u=e.offset,l=e.offset=v.getTopLeft().floor(),s=t,t=lt.getContext(v.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var g=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!p&&e.clipItem,b=!g||y;if(p?(t.globalAlpha=h,d&&(t.globalCompositeOperation=c)):b&&t.translate(-l.x,-l.y),b&&(p?a:r).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),g){t.setTransform(m,0,0,m,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,r,g),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),p||(ut.process(c,t,s,h,l.subtract(u).multiply(m)),lt.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof V)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,l=4&a;if(this._drawSelected||(o=!1),(o||s||l)&&this._isUpdated(r)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,h,i),l){var d=this.getPosition(!0),p=this._parent,m=p?p.localToGlobal(d):d,v=m.x,g=m.y;t.beginPath(),t.arc(v,g,f,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],b=f,x=n+1,_=0;_<4;_++){var w=y[_],S=w[0],E=w[1];t.moveTo(v+S*b,g+E*b),t.lineTo(v+S*x,g+E*x),t.stroke()}}if(s){var M=h._transformCorners(this.getInternalBounds());t.beginPath();for(_=0;_<8;_++)t[_?"lineTo":"moveTo"](M[_],M[++_]);t.closePath(),t.stroke();for(_=0;_<8;_++)t.fillRect(M[_]-f,M[++_]-f,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],(function(t){this["removeOn"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,r=n&&n.start,a=null!=n&&("number"==typeof n?n:n.duration),o=new ot(this,t,e,a,i,r);return a&&this.on("frame",(function t(e){o._handleFrame(1e3*e.time),o.running||this.off("frame",t)})),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),k=C.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=s)},_getClipItem:function(){var t=this._clipItem;if(t===s){t=null;for(var e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),c.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,a=0,o=r.length;a<o;a++){var s=r[a];s!==i&&s.draw(t,e)}}}),P=k.extend({_class:"Layer",initialize:function(){k.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=C.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new _(t.width,t.height,this,"setSize")},setSize:function(){var t=x.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(x.min(this._radius,t.divide(2).abs())):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new _(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=x.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){n=x.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(j[c.capitalize(this._type)])({center:new y,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),ft.settings.applyMatrix&&e.setApplyMatrix(!0),(t===s||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,a=r.hasFill(),o=r.hasStroke(),s=e.dontFinish||e.clip,l=!i;if(a||o||s){var u=this._type,c=this._radius,h="circle"===u;if(e.dontStart||t.beginPath(),l&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,d=h?c:c.height,p=this._size,m=p.width,v=p.height;if(l&&"rectangle"===u&&0===f&&0===d)t.rect(-m/2,-v/2,m,v);else{var g=m/2,y=v/2,b=.44771525016920644,x=f*b,_=d*b,w=[-g,-y+d,-g,-y+_,-g+x,-y,-g+f,-y,g-f,-y,g-x,-y,g,-y+_,g,-y+d,g,y-d,g,y-_,g-x,y,g-f,y,-g+f,y,-g+x,y,-g,y-_,-g,y-d];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),g!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),g!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}s||!a&&!o||(this._setStyles(t,e,n),a&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(j._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),a=1;a<=4;a++){var o=new y(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(r),l=s.subtract(o.multiply(i));if(new w(n?s.add(o.multiply(n)):s,l).contains(e))return{point:l,quadrant:a}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,a,o){var s=!1,l=this._style,u=r.stroke&&l.hasStroke(),c=r.fill&&l.hasFill();if(u||c){var h=this._type,f=this._radius,d=u?l.getStrokeWidth()/2:0,p=r._tolerancePadding.add(j._getStrokePadding(d,!l.getStrokeScaling()&&o));if("rectangle"===h){var m=p.multiply(2),v=t(this,i,m);if(v)s=e(i.subtract(v.point),f,p,v.quadrant);else{var g=new w(this._size).setCenter(0,0),y=g.expand(m),b=g.expand(m.negate());s=y._containsPoint(i)&&!b._containsPoint(i)}}else s=e(i,f,p)}return s?new N(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var a=c.create(A.prototype);return a._type=t,a._size=n,a._radius=i,a._initialize(c.getNamed(r),e),a}return{Circle:function(){var e=arguments,n=y.readNamed(e,"center"),i=c.readNamed(e,"radius");return t("circle",n,new x(2*i),i,e)},Rectangle:function(){var e=arguments,n=w.readNamed(e,"rectangle"),i=x.min(x.readNamed(e,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),i,e)},Ellipse:function(){var e=arguments,n=A._readEllipse(e),i=n.radius;return t("ellipse",n.center,i.multiply(2),i,e)},_readEllipse:function(t){var e,n;if(c.hasNamed(t,"radius"))e=y.readNamed(t,"center"),n=x.readNamed(t,"radius");else{var i=w.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),O=C.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==s&&y.read(arguments))){var n,i=typeof t,r="string"===i?u.getElementById(t):"object"===i?t:null;if(r&&r!==C.NO_INSERT)if(r.getContent||null!=r.naturalHeight)n=r;else if(r){var a=x.read(arguments);a.isZero()||(n=lt.getCanvas(a))}n?this.setImage(n):this.setSource(t)}this._size||(this._size=new x,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=lt.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new _(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=x.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(lt.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&lt.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new y(0,0).transform(t),n=new y(1,0).transform(t).subtract(e),i=new y(0,1).transform(t).subtract(e);return new x(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(ft=n._scope,e.emit(i,new tt(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Z.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&lt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new x(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=lt.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){lt.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new o.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=t,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=lt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new O(C.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=y.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof F?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),r=Math.min(e.height,32),a=O._sampleContext;a?a.clearRect(0,0,33,33):a=O._sampleContext=lt.getContext(new x(32)),a.save();var o=(new E).scale(i/e.width,r/e.height).translate(-e.x,-e.y);o.applyToContext(a),n&&n.draw(a,new c({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var s=this.getElement(),l=this._size;s&&a.drawImage(s,-l.width/2,-l.height/2),a.restore();for(var u=a.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,h=[0,0,0],f=0,d=0,p=u.length;d<p;d+=4){var m=u[d+3];f+=m,m/=255,h[0]+=u[d]*m,h[1]+=u[d+1]*m,h[2]+=u[d+2]*m}for(d=0;d<3;d++)h[d]/=f;return f?q.read(h):null},getPixel:function(){var t=y.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new q("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=y.read(t),n=q.read(t),i=n._convert("rgb"),r=n._alpha,a=this.getContext(!0),o=a.createImageData(1,1),s=o.data;s[0]=255*i[0],s[1]=255*i[1],s[2]=255*i[2],s[3]=null!=r?255*r:255,a.putImageData(o,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=x.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=y.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new N("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();i&&i.width>0&&i.height>0&&(t.globalAlpha=this._opacity,this._setStyles(t,e,n),X.setPrefixed(t,"imageSmoothingEnabled",this._smoothing),t.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),L=C.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==s&&y.read(arguments,1))||this.setDefinition(t instanceof I?t:new I(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=e.extend({all:!1}),r=this._definition._item._hitTest(t,i,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),I=c.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=g.get(),this.project=ft.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&C._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new y),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new L(this,t)},clone:function(){return new I(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),N=c.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&c.read(t);return new c({type:null,tolerance:ft.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),R=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,r,a){var o,l,u,c,h=arguments.length;h>0&&(null==t||"object"==typeof t?1===h&&t&&"point"in t?(o=t.point,l=t.handleIn,u=t.handleOut,c=t.selection):(o=t,l=e,u=n,c=i):(o=[t,e],l=n!==s?[n,i]:null,u=r!==s?[r,a]:null)),new D(o,this,"_point"),new D(l,this,"_handleIn"),new D(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),c.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(y.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(y.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(y.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new B(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},r=i.type,a=i.factor,o=this.getPrevious(),l=this.getNext(),u=(o||this)._point,c=this._point,h=(l||this)._point,f=u.getDistance(c),d=c.getDistance(h);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&l){var p=u.subtract(h),m=a===s?.4:a,v=m*f/(f+d);e||this.setHandleIn(p.multiply(v)),n||this.setHandleOut(p.multiply(v-m))}}else{var g=a===s?.5:a,b=Math.pow(f,g),x=b*b,_=Math.pow(d,g),w=_*_;if(!e&&o){var S=2*w+3*_*b+x,E=3*_*(_+b);this.setHandleIn(0!==E?new y((w*u._x+S*c._x-x*h._x)/E-c._x,(w*u._y+S*c._y-x*h._y)/E-c._y):new y)}if(!n&&l){S=2*x+3*b*_+w,E=3*b*(b+_);this.setHandleOut(0!==E?new y((x*h._x+S*c._x-w*u._x)/E-c._x,(x*h._y+S*c._y-w*u._y)/E-c._y):new y)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new R(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new R(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,a=t._point,o=e._point,s=t._handleIn,l=e._handleIn,u=e._handleOut,c=t._handleOut;this._point._set(i*a._x+r*o._x,i*a._y+r*o._y,!0),this._handleIn._set(i*s._x+r*l._x,i*s._y+r*l._y,!0),this._handleOut._set(i*c._x+r*u._x,i*c._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,s=i._y,l=2;return e[0]=o,e[1]=s,r&&(e[l++]=r._x+o,e[l++]=r._y+s),a&&(e[l++]=a._x+o,e[l++]=a._y+s),t&&(t._transformCoordinates(e,e,l/2),o=e[0],s=e[1],n?(i._x=o,i._y=s,l=2,r&&(r._x=e[l++]-o,r._y=e[l++]-s),a&&(a._x=e[l++]-o,a._y=e[l++]-s)):(r||(e[l++]=o,e[l++]=s),a||(e[l++]=o,e[l++]=s))),e}}),D=y.extend({initialize:function(t,e,n){var i,r,a;if(t)if((i=t[0])!==s)r=t[1];else{var o=t;(i=o.x)===s&&(i=(o=y.read(arguments)).x),r=o.y,a=o.selected}else i=r=0;this._x=i,this._y=r,this._owner=e,e[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=v.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),z=c.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,a,o,s){var l,u,c,h,f,d,p=arguments.length;3===p?(this._path=t,l=e,u=n):p?1===p?"segment1"in t?(l=new R(t.segment1),u=new R(t.segment2)):"point1"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(l=new R(t),u=new R(e)):4===p?(c=t,f=e,d=n,h=i):8===p&&(c=[t,e],h=[o,s],f=[n-t,i-e],d=[r-o,a-s]):(l=new R,u=new R),this._segment1=l||new R(c,null,f),this._segment2=u||new R(h,d,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=s},clone:function(){return new z(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return z.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(y.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(y.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(y.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(y.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return z.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new y(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=z.getLength(this.getValues(),0,1)),this._length},getArea:function(){return z.getArea(this.getValues())},getLine:function(){return new M(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new z(z.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return z.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=1-1e-8){var i=z.subdivide(this.getValues(),t),r=i[0],a=i[1],o=e||this.hasHandles(),s=this._segment1,l=this._segment2,u=this._path;o&&(s._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=r[6],h=r[7],f=new R(new y(c,h),o&&new y(r[4]-c,r[5]-h),o&&new y(a[2]-c,a[3]-h));u?(u.insert(s._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new z(f,l))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===s?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===s?.5:e?t:this.getTimeAt(t))},reversed:function(){return new z(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,a=t._handleOut,o=e._handleIn,s=e._point,l=r.x,u=r.y,c=s.x,h=s.y,f=i?[l,u,l,u,c,h,c,h]:[l,u,l+a._x,u+a._y,c+o._x,h+o._y,c,h];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],l=t[5],u=t[6],c=t[7];e===s&&(e=.5);var h=1-e,f=h*n+e*r,d=h*i+e*a,p=h*r+e*o,m=h*a+e*l,v=h*o+e*u,g=h*l+e*c,y=h*f+e*p,b=h*d+e*m,x=h*p+e*v,_=h*m+e*g,w=h*y+e*x,S=h*b+e*_;return[[n,i,f,d,y,b,w,S],[w,S,x,_,v,g,u,c]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],a=t[i+2],o=t[i+4],s=t[i+6];if(r>=a==a>=o&&a>=o==o>=s||z.isStraight(t))n.push(t);else{var l=3*(a-o)-r+s,u=2*(r+o)-4*a,c=a-r,h=[],f=v.solveQuadratic(l,u,c,h,1e-8,1-1e-8);if(f){h.sort();var d=h[0],p=z.subdivide(t,d);n.push(p[0]),f>1&&(d=(h[1]-d)/(1-d),p=z.subdivide(p[1],d),n.push(p[0])),n.push(p[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,a){var o=t[e],s=t[e+2],l=t[e+4],u=t[e+6],c=0;if(!(o<n&&u<n&&s<n&&l<n||o>n&&u>n&&s>n&&l>n)){var h=3*(s-o),f=3*(l-s)-h,d=u-o-h-f;c=v.solveCubic(d,f,h,o-n,i,r,a)}return c},getTimeOf:function(t,e){var n=new y(t[0],t[1]),i=new y(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],a=[],o=0;o<2;o++)for(var s=z.solveCubic(t,o,r[o],a,0,1),l=0;l<s;l++){var u=a[l];if(e.isClose(z.getPoint(t,u),1e-7))return u}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(z.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,a=t[7]-i,o=r*r+a*a;if(0===o)return 0;var s=((e.x-n)*r+(e.y-i)*a)/o;return s<1e-12?0:s>.999999999999?1:z.getTimeOf(t,new y(n+s*r,i+s*a))}var l=1/0,u=0;function c(n){if(n>=0&&n<=1){var i=e.getDistance(z.getPoint(t,n),!0);if(i<l)return l=i,u=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var f=.005;f>1e-8;)c(u-f)||c(u+f)||(f/=2);return u},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=z.subdivide(t,e)[1]),n<1&&(t=z.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=3*r-2*n-l,h=3*a-2*i-u,f=3*o-2*l-n,d=3*s-2*u-i;return Math.max(c*c,f*f)+Math.max(h*h,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];return 3*((l-n)*(i+a)-(s-e)*(r+o)+r*(e-a)-i*(n-o)+l*(a+e/3)-s*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)z._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new w(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,a,o,s,l){function u(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>s[r]&&(s[r]=i)}a/=2;var c=o[r]-a,h=s[r]+a;if(t<c||e<c||n<c||i<c||t>h||e>h||n>h||i>h)if(e<t!=e<i&&n<t!=n<i)u(t,a),u(i,a);else{var f=3*(e-n)-t+i,d=2*(t+n)-4*e,p=e-t,m=v.solveQuadratic(f,d,p,l);u(i,0);for(var g=0;g<m;g++){var y=l[g],b=1-y;1e-8<=y&&y<=1-1e-8&&u(b*b*b*t+3*b*b*y*e+3*b*y*y*n+y*y*y*i,a)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=j[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),c.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var a=new M(t,i);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(i.add(n))<1e-7){var o=r.dot(r),s=r.dot(e)/o,l=r.dot(n)/o;return s>=0&&s<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},(function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],a=e[6],o=e[7];return t(new y(i,r),new y(e[2]-i,e[3]-r),new y(e[4]-a,e[5]-o),new y(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new B(this,t):null},getTimeAt:function(t,e){return z.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=y.read(arguments);return t.isZero()?[]:z.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(y.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return z.getTimeOf(this.getValues(),y.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=y.read(arguments),e=this.getValues(),n=z.getNearestTime(e,t),i=z.getPoint(e,n);return new B(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(t,(function(t){this[t+"At"]=function(e,n){var i=this.getValues();return z[t](i,n?e:z.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return z[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=9*(i-a)+3*(s-e),c=6*(e+a)-12*i,h=3*(i-e),f=9*(r-o)+3*(l-n),d=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(u*t+c)*t+h,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],a=t[1],o=t[2],s=t[3],l=t[4],u=t[5],c=t[6],h=t[7],f=v.isZero;f(o-r)&&f(s-a)&&(o=r,s=a),f(l-c)&&f(u-h)&&(l=c,u=h);var d,p,m=3*(o-r),g=3*(l-o)-m,b=c-r-m-g,x=3*(s-a),_=3*(u-s)-x,w=h-a-x-_;if(0===n)d=0===e?r:1===e?c:((b*e+g)*e+m)*e+r,p=0===e?a:1===e?h:((w*e+_)*e+x)*e+a;else{if(e<1e-8?(d=m,p=x):e>1-1e-8?(d=3*(c-l),p=3*(h-u)):(d=(3*b*e+2*g)*e+m,p=(3*w*e+2*_)*e+x),i){0===d&&0===p&&(e<1e-8||e>1-1e-8)&&(d=l-o,p=u-s);var S=Math.sqrt(d*d+p*p);S&&(d/=S,p/=S)}if(3===n){l=6*b*e+2*g,u=6*w*e+2*_;var E=Math.pow(d*d+p*p,1.5);d=0!==E?(d*u-p*l)/E:0,p=0}}return 2===n?new y(p,-d):new y(d,p)}return{statics:{classify:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=i*(n-u)+r*(l-e)+e*u-n*l,h=3*(a*(r-n)+o*(e-i)+i*n-r*e),f=h-c,d=f-c+(e*(u-o)+n*(a-l)+l*o-u*a),p=Math.sqrt(d*d+f*f+h*h),m=0!==p?1/p:0,g=v.isZero;function y(t,e,n){var i=e!==s,r=i&&e>0&&e<1,a=i&&n>0&&n<1;return!i||(r||a)&&("loop"!==t||r&&a)||(t="arch",r=a=!1),{type:t,roots:r||a?r&&a?e<n?[e,n]:[n,e]:[r?e:n]:null}}if(f*=m,h*=m,g(d*=m))return g(f)?y(g(h)?"line":"quadratic"):y("serpentine",h/(3*f));var b=3*f*f-4*d*h;if(g(b))return y("cusp",f/(2*d));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),_=2*d;return y(b>0?"serpentine":"loop",(f+x)/_,(f-x)/_)},getLength:function(n,i,r,a){if(i===s&&(i=0),r===s&&(r=1),z.isStraight(n)){var o=n;r<1&&(o=z.subdivide(o,r)[0],i/=r),i>0&&(o=z.subdivide(o,i)[1]);var l=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(l*l+u*u)}return v.integrate(a||t(n),i,r,e(i,r))},getTimeAt:function(n,i,r){if(r===s&&(r=i<0?1:0),0===i)return r;var a=Math.abs,o=i>0,l=o?r:0,u=o?1:r,c=t(n),h=z.getLength(n,l,u,c),f=a(i)-h;if(a(f)<1e-12)return o?u:l;if(f>1e-12)return null;var d=i/h,p=0;return v.findRoot((function(t){return p+=v.integrate(c,r,t,e(r,t)),r=t,p-i}),c,r+d,l,u,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=3*i-e-3*a+t[6],l=3*e-6*i+3*a,u=-3*e+3*i,c=3*r-n-3*o+t[7],h=3*n-6*r+3*o,f=-3*n+3*r,d=[];return v.solveCubic(9*(s*s+c*c),9*(s*l+h*c),2*(l*l+h*h)+3*(u*s+f*c),u*l+h*f,d,1e-8,1-1e-8),d.sort()}}}},new function(){function t(t,e,n,i,r,a,o){var s=!o&&n.getPrevious()===r,l=!o&&n!==r&&n.getNext()===r;if(null!==i&&i>=(s?1e-8:0)&&i<=(l?1-1e-8:1)&&null!==a&&a>=(l?1e-8:0)&&a<=(s?1-1e-8:1)){var u=new B(n,i,null,o),c=new B(r,a,null,o);u._intersection=c,c._intersection=u,e&&!e(u)||B.insert(t,u,!0)}}function e(i,r,a,o,s,l,u,c,h,f,d,p,m){if(++h>=4096||++c>=40)return h;var v,g,y=r[0],b=r[1],x=r[6],_=r[7],w=M.getSignedDistance,S=w(y,b,x,_,r[2],r[3]),E=w(y,b,x,_,r[4],r[5]),T=S*E>0?.75:4/9,C=T*Math.min(0,S,E),k=T*Math.max(0,S,E),P=w(y,b,x,_,i[0],i[1]),A=w(y,b,x,_,i[2],i[3]),O=w(y,b,x,_,i[4],i[5]),L=w(y,b,x,_,i[6],i[7]),I=function(t,e,n,i){var r,a=[0,t],o=[1/3,e],s=[2/3,n],l=[1,i],u=e-(2*t+i)/3,c=n-(t+2*i)/3;if(u*c<0)r=[[a,o,l],[a,s,l]];else{var h=u/c;r=[h>=2?[a,o,l]:h<=.5?[a,s,l]:[a,o,s,l],[a,l]]}return(u||c)<0?r.reverse():r}(P,A,O,L),N=I[0],R=I[1];if(0===S&&0===E&&0===P&&0===A&&0===O&&0===L||null==(v=n(N,R,C,k))||null==(g=n(N.reverse(),R.reverse(),C,k)))return h;var D=f+(d-f)*v,B=f+(d-f)*g;if(Math.max(m-p,B-D)<1e-9){var F=(D+B)/2,j=(p+m)/2;t(s,l,u?o:a,u?j:F,u?a:o,u?F:j)}else{i=z.getPart(i,v,g);var V=m-p;if(g-v>.8)if(B-D>V){F=(D+B)/2;h=e(r,(U=z.subdivide(i,.5))[0],o,a,s,l,!u,c,h,p,m,D,F),h=e(r,U[1],o,a,s,l,!u,c,h,p,m,F,B)}else{var U;j=(p+m)/2;h=e((U=z.subdivide(r,.5))[0],i,o,a,s,l,!u,c,h,p,j,D,B),h=e(U[1],i,o,a,s,l,!u,c,h,j,m,D,B)}else h=0===V||V>=1e-9?e(r,i,o,a,s,l,!u,c,h,p,m,D,B):e(i,r,a,o,s,l,u,c,h,D,B,p,m)}return h}function n(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var i=t[0][0],r=t[0][1],a=1,o=t.length;a<o;a++){var s=t[a][0],l=t[a][1];if(e?l>=n:l<=n)return l===n?s:i+(n-r)*(s-i)/(l-r);i=s,r=l}return null}function r(t,e,n,i,r){var a=v.isZero;if(a(i)&&a(r)){var o=z.getTimeOf(t,new y(e,n));return null===o?[]:[o]}for(var s=Math.atan2(-r,i),l=Math.sin(s),u=Math.cos(s),c=[],h=[],f=0;f<8;f+=2){var d=t[f]-e,p=t[f+1]-n;c.push(d*u-p*l,d*l+p*u)}return z.solveCubic(c,1,0,h,0,1),h}function a(e,n,i,a,o,s,l){for(var u=n[0],c=n[1],h=r(e,u,c,n[6]-u,n[7]-c),f=0,d=h.length;f<d;f++){var p=h[f],m=z.getPoint(e,p),v=z.getTimeOf(n,m);null!==v&&t(o,s,l?a:i,l?v:p,l?i:a,l?p:v)}}function o(e,n,i,r,a,o){var s=M.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(a,o,i,z.getTimeOf(e,s),r,z.getTimeOf(n,s))}function s(n,i,r,s,l,c){var h=Math.min,f=Math.max;if(f(n[0],n[2],n[4],n[6])+1e-12>h(i[0],i[2],i[4],i[6])&&h(n[0],n[2],n[4],n[6])-1e-12<f(i[0],i[2],i[4],i[6])&&f(n[1],n[3],n[5],n[7])+1e-12>h(i[1],i[3],i[5],i[7])&&h(n[1],n[3],n[5],n[7])-1e-12<f(i[1],i[3],i[5],i[7])){var d=u(n,i);if(d)for(var p=0;p<2;p++){var m=d[p];t(l,c,r,m[0],s,m[1],!0)}else{var v=z.isStraight(n),g=z.isStraight(i),b=v&&g,x=v&&!g,_=l.length;if((b?o:v||g?a:e)(x?i:n,x?n:i,x?s:r,x?r:s,l,c,x,0,0,0,1,0,1),!b||l.length===_)for(p=0;p<4;p++){var w=p>>1,S=1&p,E=6*w,M=6*S,T=new y(n[E],n[E+1]),C=new y(i[M],i[M+1]);T.isClose(C,1e-12)&&t(l,c,r,w,s,S)}}}return l}function l(e,n,i,r){var a=z.classify(e);if("loop"===a.type){var o=a.roots;t(i,r,n,o[0],n,o[1])}return i}function u(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=M.getDistance,a=z.isStraight(t),o=z.isStraight(e),s=a&&o,l=n(t)<n(e),u=l?e:t,c=l?t:e,h=u[0],f=u[1],d=u[6]-h,p=u[7]-f;if(r(h,f,d,p,c[0],c[1],!0)<1e-7&&r(h,f,d,p,c[6],c[7],!0)<1e-7)!s&&r(h,f,d,p,u[2],u[3],!0)<1e-7&&r(h,f,d,p,u[4],u[5],!0)<1e-7&&r(h,f,d,p,c[2],c[3],!0)<1e-7&&r(h,f,d,p,c[4],c[5],!0)<1e-7&&(a=o=s=!0);else if(s)return null;if(a^o)return null;for(var m=[t,e],v=[],g=0;g<4&&v.length<2;g++){var b=1&g,x=1^b,_=g>>1,w=z.getTimeOf(m[b],new y(m[x][_?6:0],m[x][_?7:1]));if(null!=w){var S=b?[_,w]:[w,_];(!v.length||i(S[0]-v[0][0])>1e-8&&i(S[1]-v[0][1])>1e-8)&&v.push(S)}if(g>2&&!v.length)break}if(2!==v.length)v=null;else if(!s){var E=z.getPart(t,v[0][0],v[1][0]),T=z.getPart(e,v[0][1],v[1][1]);(i(T[2]-E[2])>1e-7||i(T[3]-E[3])>1e-7||i(T[4]-E[4])>1e-7||i(T[5]-E[5])>1e-7)&&(v=null)}return v}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?s(e,n,this,t,[]):l(e,this,[])},statics:{getOverlaps:u,getIntersections:function(t,e,n,i,r,a){var o=!e;o&&(e=t);for(var u=t.length,c=e.length,h=new Array(u),f=o?h:new Array(c),d=[],m=0;m<u;m++)h[m]=t[m].getValues(i);if(!o)for(m=0;m<c;m++)f[m]=e[m].getValues(r);for(var v=p.findCurveBoundsCollisions(h,f,1e-7),g=0;g<u;g++){var y=t[g],b=h[g];o&&l(b,y,d,n);var x=v[g];if(x)for(var _=0;_<x.length;_++){if(a&&d.length)return d;var w=x[_];if(!o||w>g){var S=e[w];s(b,f[w],y,S,d,n)}}}return d},getCurveLineIntersections:r,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=e.normalize(),h=c.x,f=c.y,d=3*l-9*o+9*r-3*n,p=3*u-9*s+9*a-3*i,m=6*o-12*r+6*n,g=6*s-12*a+6*i,y=3*r-3*n,b=3*a-3*i,x=2*d*f-2*p*h,_=[];if(Math.abs(x)<v.CURVETIME_EPSILON){if(0!=(x=d*g-p*m)){var w=-(d*b-p*y)/x;w>=0&&w<=1&&_.push(w)}}else{var S=(m*m-4*d*y)*f*f+(-2*m*g+4*p*y+4*d*b)*h*f+(g*g-4*p*b)*h*h,E=m*f-g*h;if(S>=0&&0!=x){var M=Math.sqrt(S),T=-(E+M)/x,C=(-E+M)/x;T>=0&&T<=1&&_.push(T),C>=0&&C<=1&&_.push(C)}}return _}}}}),B=c.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof B){var i=this.getCurve(),r=t.getCurve(),a=i._path;if(a===r._path){var o=Math.abs,s=o(this.getOffset()-t.getOffset()),l=!e&&this._intersection,u=!e&&t._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=m.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=e>=1e-8&&e<=1-1e-8,r=n>=1e-8&&n<=1-1e-8;if(i&&r)return!this.isTouching();var a=this.getCurve(),o=a&&e<1e-8?a.getPrevious():a,s=t.getCurve(),l=s&&n<1e-8?s.getPrevious():s;if(e>1-1e-8&&(a=a.getNext()),n>1-1e-8&&(s=s.getNext()),!(o&&a&&l&&s))return!1;var u=[];function c(t,e){var n=t.getValues(),i=z.classify(n).roots||z.getPeaks(n),r=i.length,a=z.getLength(n,e&&r?i[r-1]:0,!e&&r?i[0]:1);u.push(r?a:a/64)}function h(t,e,n){return e<n?t>e&&t<n:t>e||t<n}i||(c(o,!0),c(a,!1)),r||(c(l,!0),c(s,!1));var f=this.getPoint(),d=Math.min.apply(Math,u),p=i?a.getTangentAtTime(e):a.getPointAt(d).subtract(f),m=i?p.negate():o.getPointAt(-d).subtract(f),v=r?s.getTangentAtTime(n):s.getPointAt(d).subtract(f),g=r?v.negate():l.getPointAt(-d).subtract(f),y=m.getAngle(),b=p.getAngle(),x=g.getAngle(),_=v.getAngle();return!!(i?h(y,x,_)^h(b,x,_)&&h(y,_,x)^h(b,_,x):h(x,y,b)^h(_,y,b)&&h(x,b,y)^h(_,b,y))},hasOverlap:function(){return!!this._overlap}},c.each(z._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,a=i-1;function o(n,r){for(var a=n+r;a>=-1&&a<=i;a+=r){var o=t[(a%i+i)%i];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;r<=a;){var s,l=r+a>>>1,u=t[l];if(n&&(s=e.equals(u)?u:o(l,-1)||o(l,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),h=u.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?a=l-1:r=l+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),F=C.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(c.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?V:j)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new y,s=new y;function l(t,n){var i=+e[t];return a&&(i+=o[n]),i}function u(t){return new y(l(t,"x"),l(t+1,"y"))}this.clear();for(var c=0,h=r&&r.length;c<h;c++){var f=r[c],d=f[0],p=d.toLowerCase(),m=(e=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(a=d===p,"z"!==n||/[mz]/.test(p)||this.moveTo(o),p){case"m":case"l":for(var v="m"===p,g=0;g<m;g+=2)this[v?"moveTo":"lineTo"](o=u(g)),v&&(s=o,v=!1);i=o;break;case"h":case"v":var b="h"===p?"x":"y";o=o.clone();for(g=0;g<m;g++)o[b]=l(g,b),this.lineTo(o);i=o;break;case"c":for(g=0;g<m;g+=6)this.cubicCurveTo(u(g),i=u(g+2),o=u(g+4));break;case"s":for(g=0;g<m;g+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(i):o,i=u(g),o=u(g+2)),n=p;break;case"q":for(g=0;g<m;g+=4)this.quadraticCurveTo(i=u(g),o=u(g+2));break;case"t":for(g=0;g<m;g+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?o.multiply(2).subtract(i):o,o=u(g)),n=p;break;case"a":for(g=0;g<m;g+=7)this.arcTo(o=u(g+5),new x(+e[g],+e[g+1]),+e[g+2],+e[g+4],+e[g+3]);break;case"z":this.closePath(1e-12),o=s}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,a=this._matrix._orNullIfIdentity(),o=r?a:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(a).intersects(t.getBounds(o),1e-12)?z.getIntersections(this.getCurves(),!r&&t.getCurves(),e,a,o,i):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},getNearestLocation:function(){for(var t=y.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,a=e.length;r<a;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",a=t[r],o=e[r],s=this[r];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=s.length,u=o.length;if(l<u)for(var c=i?R:j,h=l;h<u;h++)this.add(new c);else l>u&&this[i?"removeSegments":"removeChildren"](u,l);for(h=0;h<u;h++)s[h].interpolate(a[h],o[h],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,a=i.length,o=[],s=0;e=!0;for(var l=p.findBoundsOverlaps(n,i,v.GEOMETRIC_EPSILON),u=r-1;u>=0&&e;u--){var c=n[u];e=!1;var h=l[u];if(h)for(var f=h.length-1;f>=0&&!e;f--)c.compare(i[h[f]])&&(o[h[f]]||(o[h[f]]=!0,s++),e=!0)}e=e&&s===a}return e}}),j=F.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments,n=Array.isArray(t)?"object"==typeof t[0]?t:e:!t||t.size!==s||t.x===s&&t.point===s?null:e;n&&n.length>0?this.setSegments(n):(this._curves=s,this._segmentSelection=0,n||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=s,32&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=s)},getStyle:function(){var t=this._parent;return(t instanceof V?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(R.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new z(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new z(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,i,r,a,o,s,l,u,c=this._segments,h=c.length,f=new m(e),d=new Array(6),p=!0,v=[];function g(e,c){if(e._transformCoordinates(t,d),n=d[0],i=d[1],p)v.push("M"+f.pair(n,i)),p=!1;else if(o=d[2],s=d[3],o===n&&s===i&&l===r&&u===a){if(!c){var h=n-r,m=i-a;v.push(0===h?"v"+f.number(m):0===m?"h"+f.number(h):"l"+f.pair(h,m))}}else v.push("c"+f.pair(l-r,u-a)+" "+f.pair(o-r,s-a)+" "+f.pair(n-r,i-a));r=n,a=i,l=d[4],u=d[5]}if(!h)return"";for(var y=0;y<h;y++)g(c[y]);return this._closed&&h>0&&(g(c[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,a=null==e,o=(e=a?n.length:e,0);o<r;o++){var s=t[o];s._path&&(s=t[o]=s.clone()),s._path=this,s._index=e+o,s._selection&&this._updateSelection(s,0,s._selection)}if(a)c.push(n,t);else{n.splice.apply(n,[e,0].concat(t));o=e+r;for(var l=n.length;o<l;o++)n[o]._index=o}if(i){var u=this._countCurves(),h=e>0&&e+r-1===u?e-1:e,f=h,d=Math.min(h+r,u);t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),f+=t._curves.length);for(o=f;o<d;o++)i.splice(o,0,new z(this,null,null));this._adjustCurves(h,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,a=t;a<e;a++)(n=r[a])._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&"number"!=typeof t?this._add(R.readList(e)):this._add([R.read(e)])[0]},insert:function(t,e){var n=arguments;return n.length>2&&"number"!=typeof e?this._add(R.readList(n,1),t):this._add([R.read(n,1)],t)[0]},addSegment:function(){return this._add([R.read(arguments)])[0]},insertSegment:function(t){return this._add([R.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(R.readList(t))},insertSegments:function(t,e){return this._add(R.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=c.pick(e,this._segments.length);var i=this._segments,r=this._curves,a=i.length,o=i.splice(t,e-t),s=o.length;if(!s)return o;for(var l=0;l<s;l++){var u=o[l];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}l=t;for(var h=i.length;l<h;l++)i[l]._index=l;if(r){var f=t>0&&e===a+(this._closed?1:0)?t-1:t;for(l=(r=r.splice(f,s)).length-1;l>=0;l--)r[l]._path=null;n&&(o._curves=r.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var a=i+1===r;t+=z.getArea(z.getValues(e[i],e[a?0:i+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new j(C.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(t,e){var n,i=e===s?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=i?this.splitAt(i):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&t.reverse(),a=t.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var a=e[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new U(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new R(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new R(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new H(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,n=t||{},i=n.type||"asymmetric",r=this._segments,a=r.length,o=this._closed;function l(t,n){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==e)throw new Error(t._class+" "+i+" of "+r+" is not part of "+e);n&&t instanceof z&&i++}else i="number"==typeof t?t:n;return Math.min(i<0&&o?i%a:i<0?i+a:i,a-1)}var u=o&&n.from===s&&n.to===s,c=l(n.from,0),h=l(n.to,a-1);if(c>h)if(o)c-=a;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(i)){var d="asymmetric"===i,p=Math.min,m=h-c+1,v=m-1,g=u?p(m,4):1,y=g,b=g,x=[];if(o||(y=p(1,c),b=p(1,a-h-1)),(v+=y+b)<=1)return;for(var _=0,w=c-y;_<=v;_++,w++)x[_]=r[(w<0?w+a:w)%a]._point;var S=x[0]._x+2*x[1]._x,E=x[0]._y+2*x[1]._y,M=2,T=v-1,C=[S],k=[E],P=[M],A=[],O=[];for(_=1;_<v;_++){var L=_<T,I=L?4:d?2:7,N=L?4:d?3:8,R=L?2:d?0:1,D=(L?1:d?1:2)/M;M=P[_]=I-D,S=C[_]=N*x[_]._x+R*x[_+1]._x-D*S,E=k[_]=N*x[_]._y+R*x[_+1]._y-D*E}A[T]=C[T]/P[T],O[T]=k[T]/P[T];for(_=v-2;_>=0;_--)A[_]=(C[_]-A[_+1])/P[_],O[_]=(k[_]-O[_+1])/P[_];A[v]=(3*x[v]._x-A[T])/2,O[v]=(3*x[v]._y-O[T])/2;_=y;var B=v-b;for(w=c;_<=B;_++,w++){var F=r[w<0?w+a:w],j=F._point,V=A[_]-j._x,U=O[_]-j._y;(u||_<B)&&F.setHandleOut(V,U),(u||_>y)&&F.setHandleIn(-V,-U)}}else for(_=c;_<=h;_++)r[_<0?_+a:_].smooth(n,!u&&_===c,!u&&_===h)},toShape:function(t){if(!this._closed)return null;var e,n,i,r,a,o,l,u=this._segments;function c(t,e){var n=u[t],i=n.getNext(),r=u[e],a=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point))}function h(t){var e=u[t],n=e.getNext(),i=e._handleOut,r=n._handleIn;if(i.isOrthogonal(r)){var a=e._point,o=n._point,s=new M(a,i,!0).intersect(new M(o,r,!0),!0);return s&&v.isZero(i.getLength()/s.subtract(a).getLength()-.5522847498307936)&&v.isZero(r.getLength()/s.subtract(o).getLength()-.5522847498307936)}return!1}function f(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this.hasHandles()&&4===u.length&&c(0,2)&&c(1,3)&&(a=u[1],o=a.getPrevious(),l=a.getNext(),o._handleOut.isZero()&&a._handleIn.isZero()&&a._handleOut.isZero()&&l._handleIn.isZero()&&a._point.subtract(o._point).isOrthogonal(l._point.subtract(a._point)))?(e=A.Rectangle,n=new x(f(0,3),f(0,1)),r=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&h(0)&&h(2)&&h(4)&&h(6)&&c(1,5)&&c(3,7)?(e=A.Rectangle,i=(n=new x(f(1,6),f(0,3))).subtract(new x(f(0,7),f(1,2))).divide(2),r=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&h(0)&&h(1)&&h(2)&&h(3)&&(v.isZero(f(0,2)-f(1,3))?(e=A.Circle,i=f(0,2)/2):(e=A.Ellipse,i=new x(f(2,0)/2,f(3,1)/2)),r=u[1]._point),e){var d=this.getPosition(!0),p=new e({center:d,size:n,radius:i,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(r.subtract(d).getAngle()+90),(t===s||t)&&p.insertAbove(this),p}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof V)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var o,s,l=n[0].getValues(),u=[],c=0,h=0,f=0;f<a;f++){var d=i[f].getValues();if(u.push(d),v=z.getOverlaps(l,d)){o=!f&&v[0][0]>0?a-1:f,s=v[0][1];break}}var p,m=Math.abs;for(d=u[o];l&&d;){var v;if(v=z.getOverlaps(l,d))if(m(v[0][0]-h)<1e-8){1===(h=v[1][0])&&(l=++c<r?n[c].getValues():null,h=0);var g=v[0][1];if(m(g-s)<1e-8){if(p||(p=[o,g]),1===(s=v[1][1])&&(++o>=a&&(o=0),d=u[o]||i[o].getValues(),s=0),!l)return p[0]===o&&p[1]===s;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,a,o,s,l,u,c=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,m=e._tolerancePadding,v=m,g=e.stroke&&h.hasStroke(),y=e.fill&&h.hasFill(),b=e.curves,x=g?h.getStrokeWidth()/2:y&&e.tolerance>0||b?0:null;function _(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),_(n,v))return new N(i,c,{segment:t,point:n})}}function S(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function E(t){s.add(t)}function M(e){var n,l=p||e._index>0&&e._index<d-1;return"round"===(l?r:a)?_(e._point,v):(s=new j({internal:!0,closed:!0}),l?e.isSmooth()||j._addBevelJoin(e,r,x,o,null,i,E,!0):"square"===a&&j._addSquareCap(e,a,x,null,i,E,!0),s.isEmpty()?void 0:s.contains(t)||(n=s.getNearestLocation(t))&&_(n.getPoint(),m))}if(null!==x&&(x>0?(r=h.getStrokeJoin(),a=h.getStrokeCap(),o=h.getMiterLimit(),v=v.add(j._getStrokePadding(x,i))):r=a="round"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var T=0;T<d;T++)if(u=S(f[T]))return u}else if(u=S(f[0],!0)||S(f[d-1],!0))return u;if(null!==x){if(l=this.getNearestLocation(t)){var C=l.getTime();0===C||1===C&&d>1?M(l.getSegment())||(l=null):_(l.getPoint(),v)||(l=null)}if(!l&&"miter"===r&&d>1)for(T=0;T<d;T++){var k=f[T];if(t.getDistance(k._point)<=o*x&&M(k)){l=k.getLocation();break}}}return!l&&y&&this._contains(t)||l&&!g&&!b?new N("fill",this):l?new N(g?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},c.each(z._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=y.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var a=n,o=e[i];if((n+=o.getLength())>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new B(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=y.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,a=i.length;r<a;r++){for(var o=i[r],s=o.getTimesWithTangent(t),l=0,u=s.length;l<u;l++){var c=n+o.getOffsetAtTime(s[l]);e.indexOf(c)<0&&e.push(c)}n+=o.length}return e}}),new function(){function t(t,e,n){var i,r,a,o,s,l,u,c,h=e._segments,f=h.length,d=new Array(6),p=!0;function m(e){if(n)e._transformCoordinates(n,d),i=d[0],r=d[1];else{var h=e._point;i=h._x,r=h._y}if(p)t.moveTo(i,r),p=!1;else{if(n)s=d[2],l=d[3];else{var f=e._handleIn;s=i+f._x,l=r+f._y}s===i&&l===r&&u===a&&c===o?t.lineTo(i,r):t.bezierCurveTo(u,c,s,l,i,r)}if(a=i,o=r,n)u=d[4],c=d[5];else{f=e._handleOut;u=a+f._x,c=o+f._y}}for(var v=0;v<f;v++)m(h[v]);e._closed&&f>0&&m(h[0])}return{_draw:function(e,n,i,r){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),l=s.hasFill(),u=s.hasStroke(),c=s.getDashArray(),h=!ft.support.nativeDash&&u&&c&&c.length;function f(t){return c[(t%h+h)%h]}if(a||e.beginPath(),(l||u&&!h||o)&&(t(e,this,r),this._closed&&e.closePath()),!o&&(l||u)&&(this._setStyles(e,n,i),l&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(h){a||e.beginPath();var d,p=new U(this,.25,32,!1,r),m=p.length,v=-s.getDashOffset(),g=0;for(v%=m;v>0;)v-=f(g--)+f(g--);for(;v<m;)d=v+f(g++),(v>0||d>0)&&p.drawPart(e,Math.max(v,0),Math.max(d,0)),v=d+f(g++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){if(!(i<=0))for(var r,a,o=i/2,s=i-2,l=o-1,u=new Array(6),c=0,h=e.length;c<h;c++){var f=e[c],d=f._selection;if(f._transformCoordinates(n,u),r=u[0],a=u[1],2&d&&m(2),4&d&&m(4),t.fillRect(r-o,a-o,i,i),s>0&&!(1&d)){var p=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-l,a-l,s,s),t.fillStyle=p}}function m(e){var n=u[e],i=u[e+1];r==n&&a==i||(t.beginPath(),t.moveTo(r,a),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ft.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new R(y.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new R(y.read(arguments))])},cubicCurveTo:function(){var e=arguments,n=y.read(e),i=y.read(e),r=y.read(e),a=t(this);a.setHandleOut(n.subtract(a._point)),this._add([new R(r,i.subtract(r))])},quadraticCurveTo:function(){var e=arguments,n=y.read(e),i=y.read(e),r=t(this)._point;this.cubicCurveTo(n.add(r.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var e=arguments,n=y.read(e),i=y.read(e),r=c.pick(c.read(e),.5),a=1-r,o=t(this)._point,s=n.subtract(o.multiply(a*a)).subtract(i.multiply(r*r)).divide(2*r*a);if(s.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(s,i)},arcTo:function(){var e,n,i,r,a=arguments,o=Math.abs,s=Math.sqrt,l=t(this),u=l._point,h=y.read(a),f=c.peek(a);if("boolean"==typeof(b=c.pick(f,!0)))var d=(w=u.add(h).divide(2)).add(w.subtract(u).rotate(b?-90:90));else if(c.remain(a)<=2)d=h,h=y.read(a);else if(!u.equals(h)){var p=x.read(a),m=v.isZero;if(m(p.width)||m(p.height))return this.lineTo(h);var g=c.read(a),b=!!c.read(a),_=!!c.read(a),w=u.add(h).divide(2),S=(Q=u.subtract(w).rotate(-g)).x,T=Q.y,C=o(p.width),k=o(p.height),P=C*C,A=k*k,O=S*S,L=T*T,I=s(O/P+L/A);if(I>1&&(P=(C*=I)*C,A=(k*=I)*k),o(I=(P*A-P*L-A*O)/(P*L+A*O))<1e-12&&(I=0),I<0)throw new Error("Cannot create an arc with the given arguments");e=new y(C*T/k,-k*S/C).multiply((_===b?-1:1)*s(I)).rotate(g).add(w),n=(i=(r=(new E).translate(e).rotate(g).scale(C,k))._inverseTransform(u)).getDirectedAngle(r._inverseTransform(h)),!b&&n>0?n-=360:b&&n<0&&(n+=360)}if(d){var N=new M(u.add(d).divide(2),d.subtract(u).rotate(90),!0),D=new M(d.add(h).divide(2),h.subtract(d).rotate(90),!0),z=new M(u,h),B=z.getSide(d);if(!(e=N.intersect(D,!0))){if(!B)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}n=(i=u.subtract(e)).getDirectedAngle(h.subtract(e));var F=z.getSide(e,!0);0===F?n=B*o(n):B===F&&(n+=n<0?360:-360)}if(n){for(var j=1e-7,V=o(n),U=V>=360?4:Math.ceil((V-j)/90),H=n/U,G=H*Math.PI/360,W=4/3*Math.sin(G)/(1+Math.cos(G)),q=[],$=0;$<=U;$++){var Q=h,Y=null;if($<U&&(Y=i.rotate(90).multiply(W),r?(Q=r._transformPoint(i),Y=r._transformPoint(i.add(Y)).subtract(Q)):Q=e.add(i)),$){var X=i.rotate(-90).multiply(W);r&&(X=r._transformPoint(i.add(X)).subtract(Q)),q.push(new R(Q,X,Y))}else l.setHandleOut(Y);i=i.rotate(H)}this._add(q)}},lineBy:function(){var e=y.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=arguments,n=y.read(e),i=y.read(e),r=c.read(e),a=t(this)._point;this.curveTo(a.add(n),a.add(i),r)},cubicCurveBy:function(){var e=arguments,n=y.read(e),i=y.read(e),r=y.read(e),a=t(this)._point;this.cubicCurveTo(a.add(n),a.add(i),a.add(r))},quadraticCurveBy:function(){var e=arguments,n=y.read(e),i=y.read(e),r=t(this)._point;this.quadraticCurveTo(r.add(n),r.add(i))},arcBy:function(){var e=arguments,n=t(this)._point,i=n.add(y.read(e)),r=c.pick(c.peek(e),!0);"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,n.add(y.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return j[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,a){var o=t[0];if(!o)return new w;var s=new Array(6),l=o._transformCoordinates(i,new Array(6)),u=l.slice(0,2),c=u.slice(),h=new Array(2);function f(t){t._transformCoordinates(i,s);for(var e=0;e<2;e++)z._addBounds(l[e],l[e+4],s[e+2],s[e],e,a?a[e]:0,u,c,h);var n=l;l=s,s=n}for(var d=1,p=t.length;d<p;d++)f(t[d]);return e&&f(o),new w(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,n,i,r){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),l=o&&n._getStrokeMatrix(i,r),u=o&&j._getStrokePadding(s,l),c=j.getBounds(t,e,n,i,r,u);if(!o)return c;var h=s/2,f=a.getStrokeJoin(),d=a.getStrokeCap(),p=a.getMiterLimit(),m=new w(new x(u));function v(t){c=c.include(t)}function g(t){c=c.unite(m.setCenter(t._point.transform(i)))}function y(t,e){"round"===e||t.isSmooth()?g(t):j._addBevelJoin(t,e,h,p,i,l,v)}function b(t,e){"round"===e?g(t):j._addSquareCap(t,e,h,i,l,v)}for(var _=t.length-(e?0:1),S=1;S<_;S++)y(t[S],f);return e?y(t[0],f):_>0&&(b(t[0],d),b(t[t.length-1],d)),c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new y(t,0).transform(e),i=new y(0,t).transform(e),r=n.getAngleInRadians(),a=n.getLength(),o=i.getLength(),s=Math.sin(r),l=Math.cos(r),u=Math.tan(r),c=Math.atan2(o*u,a),h=Math.atan2(o,u*a);return[Math.abs(a*Math.cos(c)*l+o*Math.sin(c)*s),Math.abs(o*Math.sin(h)*l+a*Math.cos(h)*s)]},_addBevelJoin:function(t,e,n,i,r,a,o,s){var l=t.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(r),h=u.getNormalAtTime(1).multiply(n).transform(a),f=l.getNormalAtTime(0).multiply(n).transform(a),d=h.getDirectedAngle(f);if((d<0||d>=180)&&(h=h.negate(),f=f.negate()),s&&o(c),o(c.add(h)),"miter"===e){var p=new M(c.add(h),new y(-h.y,h.x),!0).intersect(new M(c.add(f),new y(-f.y,f.x),!0),!0);p&&c.getDistance(p)<=i*n&&o(p)}o(c.add(f))},_addSquareCap:function(t,e,n,i,r,a,o){var s=t._point.transform(i),l=t.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===e&&(o&&(a(s.subtract(u)),a(s.add(u))),s=s.add(u.rotate(-90))),a(s.add(u)),a(s.subtract(u))},getHandleBounds:function(t,e,n,i,r){var a,o,s=n.getStyle();if(r.stroke&&s.hasStroke()){var l=n._getStrokeMatrix(i,r),u=s.getStrokeWidth()/2,c=u;"miter"===s.getStrokeJoin()&&(c=u*s.getMiterLimit()),"square"===s.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),a=j._getStrokePadding(u,l),o=j._getStrokePadding(c,l)}for(var h=new Array(6),f=1/0,d=-f,p=f,m=d,v=0,g=t.length;v<g;v++){t[v]._transformCoordinates(i,h);for(var y=0;y<6;y+=2){var b=y?a:o,x=b?b[0]:0,_=b?b[1]:0,S=h[y],E=h[y+1],M=S-x,T=S+x,C=E-_,k=E+_;M<f&&(f=M),T>d&&(d=T),C<p&&(p=C),k>m&&(m=k)}}return new w(f,p,d-f,m-p)}}});j.inject({statics:new function(){var t=.5522847498307936,e=[new R([-1,0],[0,t],[0,-t]),new R([0,-1],[-t,0],[t,0]),new R([1,0],[0,-t],[0,t]),new R([0,1],[t,0],[-t,0])];function n(t,e,n){var i=c.getNamed(n),r=new j(i&&0==i.insert&&C.NO_INSERT);return r._add(t),r._closed=e,r.set(i,{insert:!0})}function i(t,i,r){for(var a=new Array(4),o=0;o<4;o++){var s=e[o];a[o]=new R(s._point.multiply(i).add(t),s._handleIn.multiply(i),s._handleOut.multiply(i))}return n(a,!0,r)}return{Line:function(){var t=arguments;return n([new R(y.readNamed(t,"from")),new R(y.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments,e=y.readNamed(t,"center"),n=c.readNamed(t,"radius");return i(e,new x(n),t)},Rectangle:function(){var e,i=arguments,r=w.readNamed(i,"rectangle"),a=x.readNamed(i,"radius",0,{readNull:!0}),o=r.getBottomLeft(!0),s=r.getTopLeft(!0),l=r.getTopRight(!0),u=r.getBottomRight(!0);if(!a||a.isZero())e=[new R(o),new R(s),new R(l),new R(u)];else{var c=(a=x.min(a,r.getSize(!0).divide(2))).width,h=a.height,f=c*t,d=h*t;e=[new R(o.add(c,0),null,[-f,0]),new R(o.subtract(0,h),[0,d]),new R(s.add(0,h),null,[0,-d]),new R(s.add(c,0),[-f,0],null),new R(l.subtract(c,0),null,[f,0]),new R(l.add(0,h),[0,-d],null),new R(u.subtract(0,h),null,[0,d]),new R(u.subtract(c,0),[f,0])]}return n(e,!0,i)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,e=A._readEllipse(t);return i(e.center,e.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,e=y.readNamed(t,"from"),n=y.readNamed(t,"through"),i=y.readNamed(t,"to"),r=c.getNamed(t),a=new j(r&&0==r.insert&&C.NO_INSERT);return a.moveTo(e),a.arcTo(n,i),a.set(r)},RegularPolygon:function(){for(var t=arguments,e=y.readNamed(t,"center"),i=c.readNamed(t,"sides"),r=c.readNamed(t,"radius"),a=360/i,o=i%3==0,s=new y(0,o?-r:r),l=o?-1:.5,u=new Array(i),h=0;h<i;h++)u[h]=new R(e.add(s.rotate((h+l)*a)));return n(u,!0,t)},Star:function(){for(var t=arguments,e=y.readNamed(t,"center"),i=2*c.readNamed(t,"points"),r=c.readNamed(t,"radius1"),a=c.readNamed(t,"radius2"),o=360/i,s=new y(0,-1),l=new Array(i),u=0;u<i;u++)l[u]=new R(e.add(s.rotate(o*u).multiply(u%2?a:r)));return n(l,!0,t)}}}});var V=F.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var a=n.length-1;a>=0;a--){var o=i[a];i!==n||o instanceof j||(i=c.slice(i)),Array.isArray(o)?i[a]=new j({segments:o,insert:!1}):o instanceof V&&(i.splice.apply(i,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(e)).isEmpty()&&r.remove()}return n.length?t.base.call(this):((r=new j(C.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)c.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var o=n[r],s=o._matrix;i.push(o.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===j||"path"===n.type?n:c.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=r.length;a<o;a++)r[a].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var o=i[r],s=o._matrix;n[o._id]||o._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new j(C.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=y.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},c.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][t](e)||n;return n}}),{}));F.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function r(t){return t._children||[t]}function a(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var i=r(n),a=0,o=i.length;a<o;a++){(t=i[a])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0))}n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function o(t,e,n,i,r){var a=new V(C.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),r&&0==r.insert||a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.copyAttributes(n,!0),a}function l(t){return t.hasOverlap()||t.isCrossing()}function u(t,e,n,s){if(s&&(0==s.trace||s.stroke)&&/^(subtract|intersect)$/.test(n))return h(t,e,n);var u=a(t,!0),f=e&&t!==e&&a(e,!0),d=i[n];d[n]=!0,f&&(d.subtract||d.exclude)^f.isClockwise()^u.isClockwise()&&f.reverse();var v,y=g(B.expand(u.getIntersections(f,l))),_=r(u),w=f&&r(f),S=[],E=[];function M(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];c.push(S,i._segments),c.push(E,i.getCurves()),i._overlapsOnly=!0}}function T(t){for(var e=[],n=0,i=t&&t.length;n<i;n++)e.push(E[t[n]]);return e}if(y.length){M(_),w&&M(w);for(var C=new Array(E.length),k=0,P=E.length;k<P;k++)C[k]=E[k].getValues();var A=p.findCurveBoundsCollisions(C,C,0,!0),O={};for(k=0;k<E.length;k++){var L=E[k],I=L._path._id;(O[I]=O[I]||{})[L.getIndex()]={hor:T(A[k].hor),ver:T(A[k].ver)}}for(k=0,P=y.length;k<P;k++)b(y[k]._segment,u,f,O,d);for(k=0,P=S.length;k<P;k++){var N=S[k],R=N._intersection;N._winding||b(N,u,f,O,d),R&&R._overlap||(N._path._overlapsOnly=!1)}v=x(S,d)}else v=m(w?_.concat(w):_.slice(),(function(t){return!!d[t]}));return o(v,!0,t,e,s)}function h(t,e,n){var i=a(t),r=a(e),s=i.getIntersections(r,l),u="subtract"===n,c="divide"===n,h={},f=[];function d(t){if(!h[t._id]&&(c||r.contains(t.getPointAt(t.getLength()/2))^u))return f.unshift(t),h[t._id]=!0}for(var p=s.length-1;p>=0;p--){var m=s[p].split();m&&(d(m)&&m.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return d(i),o(f,!1,t,e)}function f(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function d(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function m(t,e,i){var r=t&&t.length;if(r){var a=c.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),o=t.slice().sort((function(t,e){return n(e.getArea())-n(t.getArea())})),s=o[0],l=p.findItemBoundsCollisions(o,null,v.GEOMETRIC_EPSILON);null==i&&(i=s.isClockwise());for(var u=0;u<r;u++){var h=o[u],f=a[h._id],d=0,m=l[u];if(m)for(var g=null,y=m.length-1;y>=0;y--)if(m[y]<u){g=g||h.getInteriorPoint();var b=o[m[y]];if(b.contains(g)){var x=a[b._id];d=x.winding,f.winding+=d,f.container=x.exclude?x.container:b;break}}if(e(f.winding)===e(d))f.exclude=!0,t[f.index]=null;else{var _=f.container;h.setClockwise(_?!_.isClockwise():i)}}}return t}function g(t,e,n){var i,r,a,o=e&&[],s=!1,l=n||[],u=n&&{};function c(t){return t._path._id+"."+t._segment1._index}for(var h=(n&&n.length)-1;h>=0;h--){(p=n[h])._path&&(u[c(p)]=!0)}for(h=t.length-1;h>=0;h--){var p,m,v=t[h],g=v._time,y=g,b=e&&!e(v);if((p=v._curve)&&(p!==r?(s=!p.hasHandles()||u&&u[c(p)],i=[],a=null,r=p):a>=1e-8&&(g/=a)),b)i&&i.push(v);else{if(e&&o.unshift(v),a=y,g<1e-8)m=p._segment1;else if(g>1-1e-8)m=p._segment2;else{var x=p.divideAtTime(g,!0);s&&l.push(p,x),m=x._segment1;for(var _=i.length-1;_>=0;_--){var w=i[_];w._time=(w._time-g)/(1-g)}}v._setSegment(m);var S=m._intersection,E=v._intersection;if(S){f(S,E);for(var M=S;M;)f(M._intersection,S),M=M._next}else m._intersection=E}}return n||d(l),o||t}function y(i,r,a,o,s){var l,u,c=Array.isArray(r)?r:r[a?"hor":"ver"],h=a?1:0,f=1^h,d=[i.x,i.y],p=d[h],m=d[f],v=p-1e-9,g=p+1e-9,b=0,x=0,_=0,w=0,S=!1,E=!1,M=1,T=[];function C(n){var u=n[f+0],c=n[f+6];if(!(m<t(u,c)||m>e(u,c))){var d=n[h+0],b=n[h+2],x=n[h+4],E=n[h+6];if(u!==c){var C=m===u?0:m===c?1:v>e(d,b,x,E)||g<t(d,b,x,E)?1:z.solveCubic(n,f,m,T,0,1)>0?T[0]:1,k=0===C?d:1===C?E:z.getPoint(n,C)[a?"y":"x"],P=u>c?1:-1,A=l[f]>l[f+6]?1:-1,O=l[h+6];return m!==u?(k<v?_+=P:k>g?w+=P:S=!0,k>p-1e-6&&k<p+1e-6&&(M/=2)):(P!==A?d<v?_+=P:d>g&&(w+=P):d!=O&&(O<g&&k>g?(w+=P,S=!0):O>v&&k<v&&(_+=P,S=!0)),M/=4),l=n,!s&&k>v&&k<g&&0===z.getTangent(n,C)[a?"x":"y"]&&y(i,r,!a,o,!0)}(d<g&&E>v||E<g&&d>v)&&(S=!0)}}function k(n){var i=n[f+0],r=n[f+2],o=n[f+4],s=n[f+6];if(m<=e(i,r,o,s)&&m>=t(i,r,o,s))for(var l,u=n[h+0],c=n[h+2],d=n[h+4],p=n[h+6],y=v>e(u,c,d,p)||g<t(u,c,d,p)?[n]:z.getMonoCurves(n,a),b=0,x=y.length;b<x;b++)if(l=C(y[b]))return l}for(var P=0,A=c.length;P<A;P++){var O,L=c[P],I=L._path,N=L.getValues();if(!(P&&c[P-1]._path===I||(l=null,I._closed||(u=z.getValues(I.getLastCurve().getSegment2(),L.getSegment1(),null,!o))[f]!==u[f+6]&&(l=u),l))){l=N;for(var R=I.getLastCurve();R&&R!==L;){var D=R.getValues();if(D[f]!==D[f+6]){l=D;break}R=R.getPrevious()}}if(O=k(N))return O;if(P+1===A||c[P+1]._path!==I){if(u&&(O=k(u)))return O;!S||_||w||(_=w=I.isClockwise(o)^a?1:-1),b+=_,x+=w,_=w=0,S&&(E=!0,S=!1),u=null}}return b=n(b),x=n(x),{winding:e(b,x),windingL:b,windingR:x,quality:M,onPath:E}}function b(t,e,i,r,a){var o=[],s=t,l=0;do{if(b=t.getCurve()){var u=b.getLength();o.push({segment:t,curve:b,length:u}),l+=u}t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var c=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<c.length&&h.quality<.5;f++){u=l*c[f];for(var d=0,p=o.length;d<p;d++){var m=o[d],g=m.length;if(u<=g){var b,x=(b=m.curve)._path,_=x._parent,w=_ instanceof V?_:x,S=v.clamp(b.getTimeAt(u),.001,.999),E=b.getPointAtTime(S),M=n(b.getTangentAtTime(S).y)<Math.SQRT1_2,T=null;if(a.subtract&&i){var C=(w===e?i:e)._getWinding(E,M,!0);if(w===e&&C.winding||w===i&&!C.winding){if(C.quality<1)continue;T={winding:0,quality:1}}}(T=T||y(E,r[x._id][b.getIndex()],M,!0)).quality>h.quality&&(h=T);break}u-=g}}for(d=o.length-1;d>=0;d--)o[d].segment._winding=h}function x(t,e){var n,i=[];function r(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(t){if(t)for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0;return!1}function o(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function s(t,e){var i=t._intersection,o=i,s=[];function l(i,o){for(;i&&i!==o;){var l=i._segment,u=l&&l._path;if(u){var c=l.getNext()||u.getFirstSegment(),h=c._intersection;l!==t&&(a(l)||a(c)||c&&r(l)&&(r(c)||h&&r(h._segment)))&&s.push(l),e&&n.push(l)}i=i._next}}if(e&&(n=[t]),i){for(l(i);i&&i._prev;)i=i._prev;l(i,o)}return s}t.sort((function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),o=t._path,s=e._path;return r^a?r?1:-1:!n^!i?n?1:-1:o!==s?o._id-s._id:t._index-e._index}));for(var l=0,u=t.length;l<u;l++){var c,h,f,d=t[l],p=r(d),m=null,v=!1,g=!0,y=[];if(p&&d._path._overlapsOnly){var b=d._path,x=d._intersection._segment._path;b.compare(x)&&(b.getArea()&&i.push(b.clone(!1)),o(b),o(x),p=!1)}for(;p;){var _=!m,w=s(d,_),S=w.shift(),E=!(v=!_&&(a(d)||a(S)))&&S;if(_&&(m=new j(C.NO_INSERT),c=null),v){(d.isFirst()||d.isLast())&&(g=d._path._closed),d._visited=!0;break}if(E&&c&&(y.push(c),c=null),c||(E&&w.push(d),c={start:m._segments.length,crossings:w,visited:h=[],handleIn:f}),E&&(d=S),!r(d)){m.removeSegments(c.start);for(var M=0,T=h.length;M<T;M++)h[M]._visited=!1;h.length=0;do{(d=c&&c.crossings.shift())&&d._path||(d=null,(c=y.pop())&&(h=c.visited,f=c.handleIn))}while(c&&!r(d));if(!d)break}var k=d.getNext();m.add(new R(d._point,f,k&&d._handleOut)),d._visited=!0,h.push(d),d=k||d._path.getFirstSegment(),f=k&&k._handleIn}v&&(g&&(m.getFirstSegment().setHandleIn(f),m.setClosed(g)),0!==m.getArea()&&i.push(m))}return i}return{_getWinding:function(t,e,n){return y(t,this.getCurves(),e,n)},unite:function(t,e){return u(this,t,"unite",e)},intersect:function(t,e){return u(this,t,"intersect",e)},subtract:function(t,e){return u(this,t,"subtract",e)},exclude:function(t,e){return u(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?h(this,t,"divide"):o([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var i=!1,r=!1,a=this.getIntersections(null,(function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)})),o=i&&r&&[];if(a=B.expand(a),i)for(var s=g(a,(function(t){return t.hasOverlap()}),o),l=s.length-1;l>=0;l--){var u=s[l],h=u._path,f=u._segment,p=f.getPrevious(),m=f.getNext();n(p,h)&&n(m,h)&&(f.remove(),p._handleOut._set(0,0),m._handleIn._set(0,0),p===f||p.getCurve().hasLength()||(m._handleIn.set(p._handleIn),p.remove()))}r&&(g(a,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,a=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},o),o&&d(o),e=x(c.each(e,(function(t){c.push(this,t._segments)}),[])));var v,y=e.length;return y>1&&t?(e!==t&&this.setChildren(e),v=this):1!==y||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),v=this),v||((v=new V(C.NO_INSERT)).addChildren(e),(v=v.reduce()).copyAttributes(this),this.replaceWith(v)),v},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(m(this.removeChildren(),(function(e){return!!(t?e:1&e)}),e)):e!==s&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,a=[],o=[],s=0,l=i.length;s<l;s++){var u=i[s].getValues(),c=u[1],h=u[3],f=u[5],d=u[7];if(r>=t(c,h,f,d)&&r<=e(c,h,f,d))for(var p=z.getMonoCurves(u),m=0,v=p.length;m<v;m++){var g=p[m],y=g[1],b=g[7];if(y!==b&&(r>=y&&r<=b||r>=b&&r<=y)){var x=r===y?g[0]:r===b?g[6]:1===z.solveCubic(g,1,r,o,0,1)?z.getPoint(g,o[0]).x:(g[0]+g[6])/2;a.push(x)}}}a.length>1&&(a.sort((function(t,e){return t-e})),n.x=(a[0]+a[1])/2)}return n}}});var U=c.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){var a,o=[],s=[],l=0,u=1/(n||32),c=t._segments,h=c[0];function f(t,n){var a=z.getValues(t,n,r);o.push(a),function t(n,r,a,o){if(!(o-a>u)||i&&z.isStraight(n)||z.isFlatEnough(n,e||.25)){var c=n[6]-n[0],h=n[7]-n[1],f=Math.sqrt(c*c+h*h);f>0&&(l+=f,s.push({offset:l,curve:n,index:r,time:o}))}else{var d=z.subdivide(n,.5),p=(a+o)/2;t(d[0],r,a,p),t(d[1],r,p,o)}}(a,t._index,0,1)}for(var d=1,p=c.length;d<p;d++)f(h,a=c[d]),h=a;t._closed&&f(a||h,c[0]),this.curves=o,this.parts=s,this.length=l,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var a=n[e];if(a.offset>=t){this.index=e;var o=n[e-1],s=o&&o.index===a.index?o.time:0,l=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-l)/(a.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),a=i.index,o=r.index;a<=o;a++){var s=z.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},c.each(z._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this._get(e);return z[t](this.curves[n.index],n.time)}}),{})),H=c.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,a=0,o=i.length;a<o;a++){var s=i[a].point;e&&e.equals(s)||n.push(e=s.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new R(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,a){var o=this.points;if(i-n!=1){for(var s,l=this.chordLengthParameterize(n,i),u=Math.max(e,e*e),c=!0,h=0;h<=4;h++){var f=this.generateBezier(n,i,l,r,a),d=this.findMaxError(n,i,f,l);if(d.error<e&&c)return void this.addCurve(t,f);if(s=d.index,d.error>=u)break;c=this.reparameterize(n,i,l,f),u=d.error}var p=o[s-1].subtract(o[s+1]);this.fitCubic(t,e,n,s,r,p),this.fitCubic(t,e,s,i,p.negate(),a)}else{var m=o[n],v=o[i],g=m.getDistance(v)/3;this.addCurve(t,[m,m.add(r.normalize(g)),v.add(a.normalize(g)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new R(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var a=Math.abs,o=this.points,s=o[t],l=o[e],u=[[0,0],[0,0]],c=[0,0],h=0,f=e-t+1;h<f;h++){var d=n[h],p=1-d,m=3*d*p,v=p*p*p,g=m*p,y=m*d,b=d*d*d,x=i.normalize(g),_=r.normalize(y),w=o[t+h].subtract(s.multiply(v+g)).subtract(l.multiply(y+b));u[0][0]+=x.dot(x),u[0][1]+=x.dot(_),u[1][0]=u[0][1],u[1][1]+=_.dot(_),c[0]+=x.dot(w),c[1]+=_.dot(w)}var S,E,M=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(a(M)>1e-12){var T=u[0][0]*c[1]-u[1][0]*c[0];S=(c[0]*u[1][1]-c[1]*u[0][1])/M,E=T/M}else{var C=u[0][0]+u[0][1],k=u[1][0]+u[1][1];S=E=a(C)>1e-12?c[0]/C:a(k)>1e-12?c[1]/k:0}var P,A,O=l.getDistance(s),L=1e-12*O;if(S<L||E<L)S=E=O/3;else{var I=l.subtract(s);P=i.normalize(S),A=r.normalize(E),P.dot(I)-A.dot(I)>O*O&&(S=E=O/3,P=A=null)}return[s,s.add(P||i.normalize(S)),l.add(A||r.normalize(E)),l]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var o=this.evaluate(3,t,n),s=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=o.subtract(e),c=s.dot(s)+u.dot(l);return v.isMachineZero(c)?n:n-u.dot(s)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var a=0;a<=t-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var s=this.evaluate(3,n,i[o-t]).subtract(this.points[o]),l=s.x*s.x+s.y*s.y;l>=a&&(a=l,r=o)}return{error:a,index:r}}}),G=C.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===s&&t.y===s;this._initialize(e&&t,!e&&y.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),W=G.extend({_class:"PointText",initialize:function(){G.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new b(t.x,t.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,a=r.hasFill(),o=r.hasStroke(),s=r.getLeading(),l=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,c=i.length;u<c;u++){t.shadowColor=l;var h=i[u];a&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(h,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==a&&(l-=s/("center"===a?2:1));var u=new w(l,r?-.75*o:0,s,r*o);return t?t._transformBounds(u,u):u}}),q=c.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]};function r(e){var n,r=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(r){var o=r[4]?4:3;n=new Array(o);for(var s=0;s<o;s++){var u=r[s+1];n[s]=parseInt(1==u.length?u+u:u,16)/255}}else if(r=e.match(/^(rgb|hsl)a?\((.*)\)$/)){a=r[1],n=r[2].trim().split(/[,\s]+/g);for(var c="hsl"===a,h=(s=0,Math.min(n.length,4));s<h;s++){var f=n[s];u=parseFloat(f);if(c)if(0===s){var d=f.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else s<3&&(u/=100);else s<3&&(u/=/%$/.test(f)?100:255);n[s]=u}}else{var p=i[e];if(!p)if(l){t||((t=lt.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var m=t.getImageData(0,0,1,1).data;p=i[e]=[m[0]/255,m[1]/255,m[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),o=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[o[(i=a[i])[0]],o[i[1]],o[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,o=0===a,s=(i+r)/2;return[o?0:60*(i==t?(e-n)/a+(e<n?6:0):i==e?(n-t)/a+2:(t-e)/a+4),o?0:s<.5?a/(i+r):a/(2-i-r),s]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,o=[],s=0;s<3;s++){var l=i[s];l<0&&(l+=1),l>1&&(l-=1),o[s]=6*l<1?a+6*(r-a)*l:2*l<1?r:3*l<2?a+(r-a)*(2/3-l)*6:a}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(e,(function(t,i){n[i]=[],c.each(t,(function(t,r){var a=c.capitalize(t),o=/^(hue|saturation)$/.test(t),s=n[i][r]="gradient"===i?"gradient"===t?function(t){var e=this._components[0];return e!==(t=$.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return y.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+a]=function(){return this._type===i||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+a]=function(t){this._type===i||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=s.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function t(i){var a,o,s,l,u=arguments,h=this.__read,f=0;Array.isArray(i)&&(i=(u=i)[0]);var d=null!=i&&typeof i;if("string"===d&&i in e&&(a=i,i=u[1],Array.isArray(i)?(o=i,s=u[2]):(h&&(f=1),u=c.slice(u,1),d=typeof i)),!o){if(l="number"===d?u:"object"===d&&null!=i.length?i:null){a||(a=l.length>=3?"rgb":"gray");var p=e[a].length;s=l[p],h&&(f+=l===arguments?p+(null!=s?1:0):1),l.length>p&&(l=c.slice(l,0,p))}else if("string"===d){var m=r(i);a=m[0],4===(o=m[1]).length&&(s=o[3],o.length--)}else if("object"===d)if(i.constructor===t){if(a=i._type,o=i._components.slice(),s=i._alpha,"gradient"===a)for(var v=1,g=o.length;v<g;v++){var y=o[v];y&&(o[v]=y.clone())}}else if(i.constructor===$)a="gradient",l=u;else{var b=e[a="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],x=n[a];this._components=o=[];for(v=0,g=b.length;v<g;v++){null==(_=i[b[v]])&&!v&&"gradient"===a&&"stops"in i&&(_={stops:i.stops,radial:i.radial}),null!=(_=x[v].call(this,_))&&(o[v]=_)}s=i.alpha}h&&a&&(f=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(v=0,g=(x=n[this._type]).length;v<g;v++){var _;null!=(_=x[v].call(this,l&&l[v]))&&(o[v]=_)}}return this._components=o,this._properties=e[this._type],this._alpha=s,h&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new q(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?q.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=m.instance,r=0,a=t.length;r<a;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],a=r._stops,o=i[1],s=i[2],l=i[3],u=e&&e.inverted();if(u&&(o=u._transformPoint(o),s=u._transformPoint(s),l&&(l=u._transformPoint(l))),r._radial){var c=s.getDistance(o);if(l){var h=l.subtract(o);h.getLength()>c&&(l=o.add(h.normalize(c-.1)))}var f=l||o;n=t.createRadialGradient(f.x,f.y,0,o.x,o.y,c)}else n=t.createLinearGradient(o.x,o.y,s.x,s.y);for(var d=0,p=a.length;d<p;d++){var m=a[d],v=m._offset;n.addColorStop(null==v?d/(p-1):v,m._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new q(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return c.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=q.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),a=0,o=i.length;a<o;a++)r[a]=t(i[a],r[a]);return new q(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),$=c.extend({_class:"Gradient",initialize:function(t,e){this._id=g.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=s))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new $(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=s;for(n=0,i=(e=this._stops=Q.readList(t,0,{clone:!0})).length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),Q=c.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===s&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new Q(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return c.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){q._setOwner(this._color,null),this._color=q._setOwner(q.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Y=c.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new y,selectedColor:null},e=c.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},e,{fillColor:new q}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},a={_class:"Style",beans:!0,initialize:function(i,r,a){this._values={},this._owner=r,this._project=r&&r._project||a||ft.project,this._defaults=!r||r instanceof k?e:r instanceof G?n:t,i&&this.set(i)}};return c.each(e,(function(t,e){var n=/Color$/.test(e),o="shadowOffset"===e,l=c.capitalize(e),u=i[e],h="set"+l,f="get"+l;a[h]=function(t){var i=this._owner,r=i&&i._children,a=r&&r.length>0&&!(i instanceof V);if(a)for(var o=0,s=r.length;o<s;o++)r[o]._style[h](t);if(("selectedColor"===e||!a)&&e in this._defaults){var l=this._values[e];l!==t&&(n&&(l&&(q._setOwner(l,null),l._canvasStyle=null),t&&t.constructor===q&&(t=q._setOwner(t,i,a&&h))),this._values[e]=t,i&&i._changed(u||129))}},a[f]=function(t){var i=this._owner,r=i&&i._children,a=r&&r.length>0&&!(i instanceof V);if(a&&!t)for(var l=0,u=r.length;l<u;l++){var d=r[l]._style[f]();if(l){if(!c.equals(p,d))return s}else p=d}else if(e in this._defaults){var p;if((p=this._values[e])===s)(p=this._defaults[e])&&p.clone&&(p=p.clone());else{var m=n?q:o?y:null;!m||p&&p.constructor===m||(this._values[e]=p=m.read([p],0,{readNull:!0,clone:!0}))}}return p&&n&&(p=q._setOwner(p,i,a&&h)),p},r[f]=function(t){return this._style[f](t)},r[h]=function(t){this._style[h](t)}})),c.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var n="get"+e,i="set"+e;a[n]=r[n]="#get"+t,a[i]=r[i]="#set"+t})),C.inject(r),a},{set:function(t){var e=t instanceof Y,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,n){var i=t._values,r=e._values,a=e._defaults;for(var o in i){var l=i[o],u=r[o];if(!(n&&o in r||c.equals(l,u===s?a[o]:u)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),X=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var s=r[o],l=s?s+a:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,a=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||r.clientLeft||0),s=n.top-(a.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;o+=l.pageXOffset||a.scrollLeft||r.scrollLeft,s+=l.pageYOffset||a.scrollTop||r.scrollTop}return new w(o,s,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new w(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return X.getBounds(t,e).getPoint()},getSize:function(t){return X.getBounds(t,!0).getSize()},isInvisible:function(t){return X.getSize(t).equals(new x(0,0))},isInView:function(t){return!X.isInvisible(t)&&X.getViewportBounds(t).intersects(X.getBounds(t,!0))},isInserted:function(t){return u.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},Z={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++){var s=r[a],l=t===u&&("touchstart"===s||"touchmove"===s)&&{passive:!1};t.addEventListener(s,i,l)}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++)t.removeEventListener(r[a],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new y(e.pageX||e.clientX+u.documentElement.scrollLeft,e.pageY||e.clientY+u.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Z.getPoint(t).subtract(X.getOffset(e||Z.getTarget(t)))}};Z.requestAnimationFrame=new function(){var t,e=X.getPrefixed(l,"requestAnimationFrame"),n=!1,i=[];function r(){var t=i;i=[];for(var a=0,o=t.length;a<o;a++)t[a]();(n=e&&i.length)&&e(r)}return function(a){i.push(a),e?n||(e(r),n=!0):t||(t=setInterval(r,1e3/60))}};var J=c.extend(h,{_class:"View",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function r(){var t=X.getSize(n);return t.isNaN()||t.isZero()?new x(i("width"),i("height")):t}var a;if(l&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),Z.add(n,this._viewEvents);if(X.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var o=this;Z.add(l,this._windowEvents={resize:function(){o.setViewSize(r())}})}if(a=r(),f.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var s=this._stats.domElement,c=s.style,h=X.getOffset(n);c.position="absolute",c.left=h.x+"px",c.top=h.y+"px",u.body.appendChild(s)}}else a=new x(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=l&&l.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new E)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ft.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Z.remove(this._element,this._viewEvents),Z.remove(l,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(C._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Z.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;X.getPrefixed(u,"hidden")&&"true"!==f.getAttribute(e,"keepalive")||!X.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ft=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new c(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new _(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=x.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new y,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return X.isInView(this._element)},isInserted:function(){return X.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=u.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(X.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?c:y).read(n),r=y.read(n,0,{readNull:!0});return this.transform((new E)[t](i,r||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=y.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new E).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new b(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(y.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(y.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(y.read(arguments))},getEventPoint:function(t){return this.viewToProject(Z.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return u&&"string"==typeof e&&(e=u.getElementById(e)),new(l?K:J)(t,e)}}},new function(){if(l){var t,e,n,i,r,a=!1,o=!1,s=l.navigator;s.pointerEnabled||s.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",r="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",r="touchend touchcancel","ontouchstart"in l&&s.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",r+=" mouseup"));var c={},h={mouseout:function(t){var e=J._focused,n=Z.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=Z.getOffset(t,e._element),r=i.x,a=Math.abs,o=a(r),s=o-(1<<25);i.x=a(s)<o?s*(r<0?-1:1):r,C(e,t,e.viewToProject(i))}},scroll:T};c[n]=function(t){var e=J._focused=M(t);a||(a=!0,e._handleMouseEvent("mousedown",t))},h[i]=function(n){var i=J._focused;if(!o){var r=M(n);r?i!==r&&(i&&C(i,n),t||(t=i),i=J._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=J._focused=t,t=null,T())}i&&C(i,n)},h[n]=function(){o=!0},h[r]=function(t){var e=J._focused;e&&a&&e._handleMouseEvent("mouseup",t),o=a=!1},Z.add(u,h),Z.add(l,{load:T});var f,d,p,m,v,g,y,b,x=!1,_=!1,w={doubleclick:"click",mousedrag:"mousemove"},S=!1,E={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],o="mousemove"===t,s=this._scope.tool,l=this;function u(t){return i.virtual[t]||l.responds(t)||s&&s.responds(t)}o&&a&&u("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),h=r&&c&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,E=!1,M={};if(M[t.substr(5)]=!0,r&&w!==m&&(m&&k(m,null,"mouseleave",e,n),w&&k(w,null,"mouseenter",e,n),m=w),S^c&&(k(this,null,c?"mouseenter":"mouseleave",e,n),c?this:null,E=!0),!c&&!M.drag||n.equals(d)||(P(this,w,o?t:"mousemove",e,n,d),E=!0),S=c,M.down&&c||M.up&&f){if(P(this,w,t,e,n,f),M.down){if(b=w===g&&Date.now()-y<300,p=g=w,!_&&w){for(var T=w;T&&!T.responds("mousedrag");)T=T._parent;T&&(v=w)}f=n}else M.up&&(_||w!==p||(y=Date.now(),P(this,w,b?"doubleclick":"click",e,n,f),b=!1),p=v=null);S=!1,E=!0}d=n,E&&s&&(x=s._handleMouseEvent(t,e,n,M)||x),!1!==e.cancelable&&(x&&!M.move||M.down&&u("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,a=this._scope,o=a.tool;function s(o){o.responds(t)&&(ft=a,o.emit(t,r=r||new et(t,e,n,i)))}this.isVisible()&&(s(this),o&&o.responds(t)&&s(o))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var a in E)i[a]=(i[a]||0)+(E[a][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:T,_resetState:function(){a=o=x=S=!1,t=e=f=d=p=m=v=g=y=b=null}}}}function M(t){var e=Z.getTarget(t);return e.getAttribute&&J._viewsById[e.getAttribute("id")]}function T(){var t=J._focused;if(!t||!t.isVisible())for(var n=0,i=J._views.length;n<i;n++)if((t=J._views[n]).isVisible()){J._focused=e=t;break}}function C(t,e,n){t._handleMouseEvent("mousemove",e,n)}function k(t,e,n,i,r,a,o){var s,l=!1;function u(t,n){if(t.responds(n)){if(s||(s=new it(n,i,r,e||t,a?r.subtract(a):null)),t.emit(n,s)&&(x=!0,s.prevented&&(_=!0),s.stopped))return l=!0}else{var o=w[n];if(o)return u(t,o)}}for(;t&&t!==o&&!u(t,n);)t=t._parent;return l}function P(t,e,n,i,r,a){return t._project.removeOn(n),_=x=!1,v&&k(v,null,n,i,r,a)||e&&e!==v&&!e.isDescendant(v)&&k(e,null,"mousedrag"===n?"mousemove":n,i,r,a,v)||k(t,v||e||t,n,i,r,a)}}),K=J.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof l.HTMLCanvasElement)){var n=x.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));e=lt.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,"hidpi"))){var r=l.devicePixelRatio||1,a=X.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/a}J.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,a=this._context;if(!f.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,i=ft.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,a=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=a}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var a=0,o=e.length;a<o;a++)r=Math.max(r,n.measureText(e[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tt=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return nt.modifiers}}),et=tt.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),nt=new function(){var t,e,n={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},r={},a={},o=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ft&&ft.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===s?String.fromCharCode(t.keyCode):e,n[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function f(e,n,i,s){var l,u=J._focused;if(r[n]=e,e?a[n]=i:delete a[n],n.length>1&&(l=c.camelize(n))in o){o[l]=e;var h=ft&&ft.agent;if("meta"===l&&h&&h.mac)if(e)t={};else{for(var d in t)d in a&&f(!1,d,t[d],s);t=null}}else e&&t&&(t[n]=i);u&&u._handleKeyEvent(e?"keydown":"keyup",s,n,i)}return Z.add(u,{keydown:function(t){var n=h(t),r=ft&&ft.agent;n.length>1||r&&r.chrome&&(t.altKey||r.mac&&t.metaKey||!r.mac&&t.ctrlKey)?f(!0,n,i[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=h(t),i=t.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==e&&(n=r.toLowerCase()),f(!0,n,r,t),e=null}},keyup:function(t){var e=h(t);e in a&&f(!1,e,a[e],t)}}),Z.add(l,{blur:function(t){for(var e in a)f(!1,e,a[e],t)}}),{modifiers:o,isDown:function(t){return!!r[t]}}},it=tt.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),rt=tt.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),at=d.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){ft=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,a=this.responds(t),o=this.minDistance,s=this.maxDistance,l=!1,u=this;function c(t,e){var a=n,o=r?u._point:u._downPoint||a;if(r){if(u._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=t||null!=e)){var s=a.subtract(o),l=s.getLength();if(l<(t||0))return!1;e&&(a=o.add(s.normalize(Math.min(l,e))))}u._moveCount++}return u._point=a,u._lastPoint=o||a,i.down&&(u._moveCount=-1,u._downPoint=a,u._downCount++),!0}function h(){a&&(l=u.emit(t,new rt(u,t,e))||l)}if(i.down)c(),h();else if(i.up)c(null,s),h();else if(a)for(;c(o,s);)h();return l}}),ot=c.extend(h,{_class:"Tween",statics:{easings:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},initialize:function t(e,n,i,r,a,o){this.object=e;var s=typeof a,l="function"===s;this.type=l?s:"string"===s?a:"linear",this.easing=l?a:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var u=n||i;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(i),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},r=0,a=n&&n.length;r<a;r++){var o=n[r],s=i(this._from[o]),l=i(this._to[o]),u=s&&l&&s.__add&&l.__add?l.__subtract(s).__multiply(e).__add(s):(l-s)*e+s;this._setProperty(this._parsedKeys[o],u)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new c({progress:t,factor:e}))}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var a,o=e[i],s=this._parsedKeys[o],l=this._getProperty(s);if(t){var u=this._resolveValue(l,t[o]);this._setProperty(s,u),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,l)}else a=l&&l.clone?l.clone():l;n[o]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return ft.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],a=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=a.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),st=function(t){var e=new o.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)},lt={canvases:[],getCanvas:function(t,e){if(!l)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=u.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},ut=new function(){var t,e,n,i,r,a,o,s,l,u,h,f=Math.min,d=Math.max,p=Math.abs;function m(t,e,n){return.2989*t+.587*e+.114*n}function v(t,e,n,i){var r=i-m(t,e,n),a=(i=m(l=t+r,u=e+r,h=n+r),f(l,u,h)),o=d(l,u,h);if(a<0){var s=i-a;l=i+(l-i)*i/s,u=i+(u-i)*i/s,h=i+(h-i)*i/s}if(o>255){var c=255-i,p=o-i;l=i+(l-i)*c/p,u=i+(u-i)*c/p,h=i+(h-i)*c/p}}function g(t,e,n){return d(t,e,n)-f(t,e,n)}function y(t,e,n,i){var r,a=[t,e,n],o=d(t,e,n),s=f(t,e,n);r=0===f(s=s===t?0:s===e?1:2,o=o===t?0:o===e?1:2)?1===d(s,o)?2:1:0,a[o]>a[s]?(a[r]=(a[r]-a[s])*i/(a[o]-a[s]),a[o]=i):a[r]=a[o]=0,a[s]=0,l=a[0],u=a[1],h=a[2]}var b={multiply:function(){l=r*t/255,u=a*e/255,h=o*n/255},screen:function(){l=r+t-r*t/255,u=a+e-a*e/255,h=o+n-o*n/255},overlay:function(){l=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,u=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var i=t*r/255;l=i+r*(255-(255-r)*(255-t)/255-i)/255,u=(i=e*a/255)+a*(255-(255-a)*(255-e)/255-i)/255,h=(i=n*o/255)+o*(255-(255-o)*(255-n)/255-i)/255},"hard-light":function(){l=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,u=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){l=0===r?0:255===t?255:f(255,255*r/(255-t)),u=0===a?0:255===e?255:f(255,255*a/(255-e)),h=0===o?0:255===n?255:f(255,255*o/(255-n))},"color-burn":function(){l=255===r?255:0===t?0:d(0,255-255*(255-r)/t),u=255===a?255:0===e?0:d(0,255-255*(255-a)/e),h=255===o?255:0===n?0:d(0,255-255*(255-o)/n)},darken:function(){l=r<t?r:t,u=a<e?a:e,h=o<n?o:n},lighten:function(){l=r>t?r:t,u=a>e?a:e,h=o>n?o:n},difference:function(){(l=r-t)<0&&(l=-l),(u=a-e)<0&&(u=-u),(h=o-n)<0&&(h=-h)},exclusion:function(){l=r+t*(255-r-r)/255,u=a+e*(255-a-a)/255,h=o+n*(255-o-o)/255},hue:function(){y(t,e,n,g(r,a,o)),v(l,u,h,m(r,a,o))},saturation:function(){y(r,a,o,g(t,e,n)),v(l,u,h,m(r,a,o))},luminosity:function(){v(r,a,o,m(t,e,n))},color:function(){v(t,e,n,m(r,a,o))},add:function(){l=f(r+t,255),u=f(a+e,255),h=f(o+n,255)},subtract:function(){l=d(r-t,0),u=d(a-e,0),h=d(o-n,0)},average:function(){l=(r+t)/2,u=(a+e)/2,h=(o+n)/2},negation:function(){l=255-p(255-t-r),u=255-p(255-e-a),h=255-p(255-n-o)}},x=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),_=lt.getContext(1,1);_&&(c.each(b,(function(t,e){var n="darken"===e,i=!1;_.save();try{_.fillStyle=n?"#300":"#a00",_.fillRect(0,0,1,1),_.globalCompositeOperation=e,_.globalCompositeOperation===e&&(_.fillStyle=n?"#a00":"#300",_.fillRect(0,0,1,1),i=_.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}_.restore(),x[e]=i})),lt.release(_)),this.process=function(c,f,d,p,m){var v=f.canvas,g="normal"===c;if(g||x[c])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,g||(d.globalCompositeOperation=c),d.drawImage(v,m.x,m.y),d.restore();else{var y=b[c];if(!y)return;for(var _=d.getImageData(m.x,m.y,v.width,v.height),w=_.data,S=f.getImageData(0,0,v.width,v.height).data,E=0,M=w.length;E<M;E+=4){t=S[E],r=w[E],e=S[E+1],a=w[E+1],n=S[E+2],o=w[E+2],i=S[E+3],s=w[E+3],y();var T=i*p/255,C=1-T;w[E]=T*l+C*r,w[E+1]=T*u+C*a,w[E+2]=T*h+C*o,w[E+3]=i*p+C*s}d.putImageData(_,m.x,m.y)}}},ct=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function r(t,e,n){for(var r in e){var a=e[r],o=i[r];"number"==typeof a&&n&&(a=n.number(a)),o?t.setAttributeNS(o,r,a):t.setAttribute(r,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,i){return r(u.createElementNS(t,e),n,i)},get:function(t,e){var n=i[e],r=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===r?null:r},set:r}},ht=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof F||t instanceof A||t instanceof G)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var n=c.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&c.each(i,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});new function(){var t;function e(e,n,i){var r,a=new c,o=e.getTranslation();n&&(e.isInvertible()?(r=(e=e._shiftless())._inverseTransform(o),o=null):r=new y,a[i?"cx":"x"]=r.x,a[i?"cy":"y"]=r.y);if(!e.isIdentity()){var s=e.decompose();if(s){var l=[],u=s.rotation,h=s.scaling,f=s.skewing;o&&!o.isZero()&&l.push("translate("+t.point(o)+")"),u&&l.push("rotate("+t.number(u)+")"),v.isZero(h.x-1)&&v.isZero(h.y-1)||l.push("scale("+t.point(h)+")"),f.x&&l.push("skewX("+t.number(f.x)+")"),f.y&&l.push("skewY("+t.number(f.y)+")"),a.transform=l.join(" ")}else a.transform="matrix("+e.getValues().join(",")+")"}return a}function n(n,i){for(var r=e(n._matrix),a=n._children,o=ct.create("g",r,t),s=0,l=a.length;s<l;s++){var c=a[s],h=f(c,i);if(h)if(c.isClipMask()){var d=ct.create("clipPath");d.appendChild(h),u(c,d,"clip"),ct.set(o,{"clip-path":"url(#"+d.id+")"})}else o.appendChild(h)}return o}function i(n){var i=n._type,r=n._radius,a=e(n._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var o=n._size,s=o.width,l=o.height;a.x-=s/2,a.y-=l/2,a.width=s,a.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?a.r=r:(a.rx=r.width,a.ry=r.height)),ct.create(i,a,t)}var r,a={Group:n,Layer:n,Raster:function(n,i){var r=e(n._matrix,!0),a=n.getSize(),o=n.getImage();return r.x-=a.width/2,r.y-=a.height/2,r.width=a.width,r.height=a.height,r.href=0==i.embedImages&&o&&o.src||n.toDataURL(),ct.create("image",r,t)},Path:function(n,r){var a=r.matchShapes;if(a){var o=n.toShape(!1);if(o)return i(o)}var s,l=n._segments,u=l.length,c=e(n._matrix);if(a&&u>=2&&!n.hasHandles())if(u>2){s=n._closed?"polygon":"polyline";for(var h=[],f=0;f<u;f++)h.push(t.point(l[f]._point));c.points=h.join(" ")}else{s="line";var d=l[0]._point,p=l[1]._point;c.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else s="path",c.d=n.getPathData(null,r.precision);return ct.create(s,c,t)},Shape:i,CompoundPath:function(n,i){var r=e(n._matrix),a=n.getPathData(null,i.precision);return a&&(r.d=a),ct.create("path",r,t)},SymbolItem:function(n,i){var r=e(n._matrix,!0),a=n._definition,o=l(a,"symbol"),s=a._item,c=s.getStrokeBounds();return o||((o=ct.create("symbol",{viewBox:t.rectangle(c)})).appendChild(f(s,i)),u(a,o,"symbol")),r.href="#"+o.id,r.x+=c.x,r.y+=c.y,r.width=c.width,r.height=c.height,r.overflow="visible",ct.create("use",r,t)},PointText:function(n){var i=ct.create("text",e(n._matrix,!0),t);return i.textContent=n._content,i}};function s(e,n,i){var r={},a=!i&&e.getParent(),o=[];return null!=e._name&&(r.id=e._name),c.each(ht,(function(n){var i=n.get,s=n.type,h=e[i]();if(n.exportFilter?n.exportFilter(e,h):!a||!c.equals(a[i](),h)){if("color"===s&&null!=h){var f=h.getAlpha();f<1&&(r[n.attribute+"-opacity"]=f)}"style"===s?o.push(n.attribute+": "+h):r[n.attribute]=null==h?"none":"color"===s?h.gradient?function(e){var n=l(e,"color");if(!n){var i,r=e.getGradient(),a=r._radial,o=e.getOrigin(),s=e.getDestination();if(a){i={cx:o.x,cy:o.y,r:o.getDistance(s)};var c=e.getHighlight();c&&(i.fx=c.x,i.fy=c.y)}else i={x1:o.x,y1:o.y,x2:s.x,y2:s.y};i.gradientUnits="userSpaceOnUse",n=ct.create((a?"radial":"linear")+"Gradient",i,t);for(var h=r._stops,f=0,d=h.length;f<d;f++){var p=h[f],m=p._color,v=m.getAlpha(),g=p._offset;i={offset:null==g?f/(d-1):g},m&&(i["stop-color"]=m.toCSS(!0)),v<1&&(i["stop-opacity"]=v),n.appendChild(ct.create("stop",i,t))}u(e,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===s?h.join(","):"lookup"===s?n.toSVG[h]:h}})),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,e._visible||(r.visibility="hidden"),ct.set(n,r,t)}function l(t,e){return r||(r={ids:{},svgs:{}}),t&&r.svgs[e+"-"+(t._id||t.__id||(t.__id=g.get("svg")))]}function u(t,e,n){r||l();var i=r.ids[n]=(r.ids[n]||0)+1;e.id=n+"-"+i,r.svgs[n+"-"+(t._id||t.__id)]=e}function h(t,e){var n=t,i=null;if(r){for(var a in n="svg"===t.nodeName.toLowerCase()&&t,r.svgs)i||(n||(n=ct.create("svg")).appendChild(t),i=n.insertBefore(ct.create("defs"),n.firstChild)),i.appendChild(r.svgs[a]);r=null}return e.asString?(new o.XMLSerializer).serializeToString(n):n}function f(t,e,n){var i=a[t._class],r=i&&i(t,e);if(r){var o=e.onExport;o&&(r=o(t,r,e)||r);var l=JSON.stringify(t._data);l&&"{}"!==l&&"null"!==l&&r.setAttribute("data-paper-data",l)}return r&&s(t,r,n)}function d(e){return e||(e={}),t=new m(e.precision),e}C.inject({exportSVG:function(t){return h(f(this,t=d(t),!0),t)}}),T.inject({exportSVG:function(n){n=d(n);var i=this._children,r=this.getView(),a=c.pick(n.bounds,"view"),o=n.matrix||"view"===a&&r._matrix,s=o&&E.read([o]),l="view"===a?new w([0,0],r.getViewSize()):"content"===a?C._getBounds(i,s,{stroke:!0}).rect:w.read([a],0,{readNull:!0}),u={version:"1.1",xmlns:ct.svg,"xmlns:xlink":ct.xlink};l&&(u.width=l.width,u.height=l.height,(l.x||0===l.x||l.y||0===l.y)&&(u.viewBox=t.rectangle(l)));var p=ct.create("svg",u,t),m=p;s&&!s.isIdentity()&&(m=p.appendChild(ct.create("g",e(s),t)));for(var v=0,g=i.length;v<g;v++)m.appendChild(f(i[v],n,!0));return h(p,n)}})},new function(){var t,e={};function n(e,n,i,r,a,o){var s=ct.get(e,n)||o,l=null==s?r?null:i?"":0:i?s:parseFloat(s);return/%\s*$/.test(s)?l/100*(a?1:t[/x|^width/.test(n)?"width":"height"]):l}function i(t,e,i,r,a,o,s){return e=n(t,e||"x",!1,r,a,o),i=n(t,i||"y",!1,r,a,s),!r||null!=e&&null!=i?new y(e,i):null}function r(t,e,i,r,a){return e=n(t,e||"width",!1,r,a),i=n(t,i||"height",!1,r,a),!r||null!=e&&null!=i?new x(e,i):null}function a(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?S(t)||t:"lookup"===e?n[t]:t}function h(t,e,n,i){var r=t.childNodes,a="clippath"===e,o="defs"===e,s=new k,l=s._project,u=l._currentStyle,c=[];if(a||o||(s=_(s,t,i),l._currentStyle=s._style.clone()),i)for(var h=t.querySelectorAll("defs"),f=0,d=h.length;f<d;f++)M(h[f],n,!1);for(f=0,d=r.length;f<d;f++){var p,m=r[f];1!==m.nodeType||/^defs$/i.test(m.nodeName)||!(p=M(m,n,!1))||p instanceof I||c.push(p)}return s.addChildren(c),a&&(s=_(s.reduce(),t,i)),l._currentStyle=u,(a||o)&&(s.remove(),s=null),s}function f(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new y(parseFloat(n[r]),parseFloat(n[r+1])));var o=new j(i);return"polygon"===e&&o.closePath(),o}function d(t,r){var a,o=(n(t,"href",!0)||"").substring(1),s="radialgradient"===r;if(o)(a=e[o].getGradient())._radial^s&&((a=a.clone())._radial=s);else{for(var l=t.childNodes,u=[],c=0,h=l.length;c<h;c++){var f=l[c];1===f.nodeType&&u.push(_(new Q,f))}a=new $(u,s)}var d,p,m,v="userSpaceOnUse"!==n(t,"gradientUnits",!0);return s?(p=(d=i(t,"cx","cy",!1,v,"50%","50%")).add(n(t,"r",!1,!1,v,"50%"),0),m=i(t,"fx","fy",!0,v)):(d=i(t,"x1","y1",!1,v,"0%","0%"),p=i(t,"x2","y2",!1,v,"100%","0%")),_(new q(a,d,p,m),t)._scaleToBounds=v,null}var p={"#document":function(t,e,n,i){for(var r=t.childNodes,a=0,o=r.length;a<o;a++){var s=r[a];if(1===s.nodeType)return M(s,n,i)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(t){return F.create(t.getAttribute("d"))},lineargradient:d,radialgradient:d,image:function(t){var e=new O(n(t,"href",!0));return e.on("load",(function(){var e=r(t);this.setSize(e);var n=i(t).add(e.divide(2));this._matrix.append((new E).translate(n))})),e},symbol:function(t,e,n,i){return new I(h(t,e,n,i),!0)},defs:h,use:function(t){var r=(n(t,"href",!0)||"").substring(1),a=e[r],o=i(t);return a?a instanceof I?a.place(o):a.clone().translate(o):null},circle:function(t){return new A.Circle(i(t,"cx","cy"),n(t,"r"))},ellipse:function(t){return new A.Ellipse({center:i(t,"cx","cy"),radius:r(t,"rx","ry")})},rect:function(t){return new A.Rectangle(new w(i(t),r(t)),r(t,"rx","ry"))},line:function(t){return new j.Line(i(t,"x1","y1"),i(t,"x2","y2"))},text:function(t){var e=new W(i(t).add(i(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:h};function m(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new E,o=0,s=r.length;o<s;o++){var l=r[o];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),f=0,d=h.length;f<d;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":a.append(new E(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":a.translate(h[0],h[1]||0);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}t.transform(a)}}function v(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var g=c.set(c.each(ht,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](a(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform((new E).translate(r.getPoint()).scale(r.getSize()))}}}}),{}),{id:function(t,n){e[n]=t,t.setName&&t.setName(n)},"clip-path":function(t,e){var n=S(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof k))return new k(n,t);t.insertChild(0,n)}},gradientTransform:m,transform:m,"fill-opacity":v,"stroke-opacity":v,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,o){var s,l=new w(a(e,"array")),u=r(i,null,null,!0);if(t instanceof k){var c=u?u.divide(l.getSize()):1,h=(new E).scale(c).translate(l.getPoint().negate());s=t}else t instanceof I&&(u&&l.setSize(u),s=t._item);if(s){if("visible"!==b(i,"overflow",o)){var f=new A.Rectangle(l);f.setClipMask(!0),s.addChild(f)}h&&s.transform(h)}}});function b(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r&&t.style){var a=c.camelize(e);(r=t.style[a])||n.node[a]===n.parent[a]||(r=n.node[a])}return r?"none"===r?null:r:s}function _(t,e,n){var i=e.parentNode,r={node:X.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&X.getStyles(i)||{}};return c.each(g,(function(n,i){var a=b(e,i,r);t=a!==s&&n(t,a,i,e,r)||t})),t}function S(t){var n=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=n&&n[1],r=i&&e[l?i.replace(l.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function M(n,i,a){var o,s,l,h=n.nodeName.toLowerCase(),f="#document"!==h,d=u.body;a&&f&&(t=ft.getView().getSize(),t=r(n,null,null,!0)||t,o=ct.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=n.parentNode,l=n.nextSibling,o.appendChild(n),d.appendChild(o));var m=ft.settings,v=m.applyMatrix,g=m.insertItems;m.applyMatrix=!1,m.insertItems=!1;var y=p[h],b=y&&y(n,h,i,a)||null;if(m.insertItems=g,m.applyMatrix=v,b){!f||b instanceof k||(b=_(b,n,a));var x=i.onImport,w=f&&n.getAttribute("data-paper-data");x&&(b=x(n,b,i)||b),i.expandShapes&&b instanceof A&&(b.remove(),b=b.toPath()),w&&(b._data=JSON.parse(w))}return o&&(d.removeChild(o),s&&(l?s.insertBefore(n,l):s.appendChild(n))),a&&(e={},b&&c.pick(i.applyMatrix,v)&&b.matrix.apply(!0,!0)),b}function P(t,e,n){if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var i=ft,r=null;function a(a){try{var u="object"==typeof a?a:(new o.DOMParser).parseFromString(a,"image/svg+xml");if(!u.nodeName)throw u=null,new Error("Unsupported SVG source: "+t);ft=i,r=M(u,e,!0),e&&!1===e.insert||n._insertItem(s,r);var c=e.onLoad;c&&c(r,a)}catch(t){l(t)}}function l(t,n){var i=e.onError;if(!i)throw new Error(t);i(t,n)}if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){a(c.result)},c.onerror=function(){l(c.error)},c.readAsText(t)}a(t)}else{var h=u.getElementById(t);h?a(h):st({url:t,async:!0,onLoad:a,onError:l})}return r}C.inject({importSVG:function(t,e){return P(t,e,this)}}),T.inject({importSVG:function(t,e){return this.activate(),P(t,e,this)}})},c.exports.PaperScript=function(){var t,e,h,d=this,p=d.acorn;if(!p)try{p=n(300)}catch(t){}p||(p=t=e={},h=function(t){"use strict";var e,n,i,r;t.version="0.5.0",t.parse=function(t,r){return n=String(t),i=n.length,o(r),qt(),function(t){g=y=s,e.locations&&(b=new Wt),x=w=null,_=[],Jt();var n=t||ce(),i=!0;for(t||(n.body=[]);f!==A;){var r=we();n.body.push(r),i&&de(r)&&se(!0),i=!1}return fe(n,"Program")}(e.program)};var a=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function o(t){for(var n in e=t||{},a)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=a[n]);r=e.sourceFile||null}var s,l,u,c,h,f,d,p,m,v,g,y,b,x,_,w,S=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Ut.lastIndex=i;var r=Ut.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};function E(t,e){var i=S(n,t);e+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=i,r.raisedAt=s,r}t.tokenize=function(t,r){n=String(t),i=n.length,o(r),qt();var a={};function g(t){return y=u,Jt(t),a.start=l,a.end=u,a.startLoc=c,a.endLoc=h,a.type=f,a.value=d,a}return g.jumpTo=function(t,i){var r;if(s=t,e.locations)for(m=1,v=Ut.lastIndex=0;(r=Ut.exec(n))&&r.index<t;)++m,v=r.index+r[0].length;p=i,Xt()},g};var M=[],T={type:"num"},C={type:"regexp"},k={type:"string"},P={type:"name"},A={type:"eof"},O={keyword:"break"},L={keyword:"case",beforeExpr:!0},I={keyword:"catch"},N={keyword:"continue"},R={keyword:"debugger"},D={keyword:"default"},z={keyword:"do",isLoop:!0},B={keyword:"else",beforeExpr:!0},F={keyword:"finally"},j={keyword:"for",isLoop:!0},V={keyword:"function"},U={keyword:"if"},H={keyword:"return",beforeExpr:!0},G={keyword:"switch"},W={keyword:"throw",beforeExpr:!0},q={keyword:"try"},$={keyword:"var"},Q={keyword:"while",isLoop:!0},Y={keyword:"with"},X={keyword:"new",beforeExpr:!0},Z={keyword:"this"},J={keyword:"null",atomValue:null},K={keyword:"true",atomValue:!0},tt={keyword:"false",atomValue:!1},et={keyword:"in",binop:7,beforeExpr:!0},nt={break:O,case:L,catch:I,continue:N,debugger:R,default:D,do:z,else:B,finally:F,for:j,function:V,if:U,return:H,switch:G,throw:W,try:q,var:$,while:Q,with:Y,null:J,true:K,false:tt,new:X,in:et,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Z,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},it={type:"[",beforeExpr:!0},rt={type:"]"},at={type:"{",beforeExpr:!0},ot={type:"}"},st={type:"(",beforeExpr:!0},lt={type:")"},ut={type:",",beforeExpr:!0},ct={type:";",beforeExpr:!0},ht={type:":",beforeExpr:!0},ft={type:"."},dt={type:"?",beforeExpr:!0},pt={binop:10,beforeExpr:!0},mt={isAssign:!0,beforeExpr:!0},vt={isAssign:!0,beforeExpr:!0},gt={postfix:!0,prefix:!0,isUpdate:!0},yt={prefix:!0,beforeExpr:!0},bt={binop:1,beforeExpr:!0},xt={binop:2,beforeExpr:!0},_t={binop:3,beforeExpr:!0},wt={binop:4,beforeExpr:!0},St={binop:5,beforeExpr:!0},Et={binop:6,beforeExpr:!0},Mt={binop:7,beforeExpr:!0},Tt={binop:8,beforeExpr:!0},Ct={binop:9,prefix:!0,beforeExpr:!0},kt={binop:10,beforeExpr:!0};for(var Pt in t.tokTypes={bracketL:it,bracketR:rt,braceL:at,braceR:ot,parenL:st,parenR:lt,comma:ut,semi:ct,colon:ht,dot:ft,question:dt,slash:pt,eq:mt,name:P,eof:A,num:T,regexp:C,string:k},nt)t.tokTypes["_"+Pt]=nt[Pt];function At(t){t=t.split(" ");var e="",n=[];t:for(var i=0;i<t.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==t[i].length){n[r].push(t[i]);continue t}n.push([t[i]])}function a(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var n=0;n<t.length;++n)e+="case "+JSON.stringify(t[n])+":";e+="return true}return false;"}if(n.length>3){for(n.sort((function(t,e){return e.length-t.length})),e+="switch(str.length){",i=0;i<n.length;++i){var o=n[i];e+="case "+o[0].length+":",a(o)}e+="}"}else a(t);return new Function("str",e)}var Ot,Lt=At("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),It=At("class enum extends super const export import"),Nt=At("implements interface let package private protected public static yield"),Rt=At("eval arguments"),Dt=At("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),zt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Bt="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Ft=new RegExp("["+Bt+"]"),jt=new RegExp("["+Bt+"------------------------------------------------------------------------------------------------------------------------------------------]"),Vt=/[\n\r\u2028\u2029]/,Ut=/\r\n|[\n\r\u2028\u2029]/g,Ht=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Ft.test(String.fromCharCode(t)))},Gt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&jt.test(String.fromCharCode(t))))};function Wt(){this.line=m,this.column=s-v}function qt(){m=1,s=v=0,p=!0,Xt()}function $t(t,n){u=s,e.locations&&(h=new Wt),f=t,Xt(),d=n,p=t.beforeExpr}function Qt(){var t,i=e.onComment&&e.locations&&new Wt,r=s,a=n.indexOf("*/",s+=2);if(-1===a&&E(s-2,"Unterminated comment"),s=a+2,e.locations)for(Ut.lastIndex=r;(t=Ut.exec(n))&&t.index<s;)++m,v=t.index+t[0].length;e.onComment&&e.onComment(!0,n.slice(r+2,a),r,s,i,e.locations&&new Wt)}function Yt(){for(var t=s,r=e.onComment&&e.locations&&new Wt,a=n.charCodeAt(s+=2);s<i&&10!==a&&13!==a&&8232!==a&&8233!==a;)++s,a=n.charCodeAt(s);e.onComment&&e.onComment(!1,n.slice(t+2,s),t,s,r,e.locations&&new Wt)}function Xt(){for(;s<i;){var t=n.charCodeAt(s);if(32===t)++s;else if(13===t)++s,10===(r=n.charCodeAt(s))&&++s,e.locations&&(++m,v=s);else if(10===t||8232===t||8233===t)++s,e.locations&&(++m,v=s);else if(t>8&&t<14)++s;else if(47===t){var r;if(42===(r=n.charCodeAt(s+1)))Qt();else{if(47!==r)break;Yt()}}else if(160===t)++s;else{if(!(t>=5760&&zt.test(String.fromCharCode(t))))break;++s}}}function Zt(t){switch(t){case 46:return function(){var t=n.charCodeAt(s+1);return t>=48&&t<=57?ne(!0):(++s,$t(ft))}();case 40:return++s,$t(st);case 41:return++s,$t(lt);case 59:return++s,$t(ct);case 44:return++s,$t(ut);case 91:return++s,$t(it);case 93:return++s,$t(rt);case 123:return++s,$t(at);case 125:return++s,$t(ot);case 58:return++s,$t(ht);case 63:return++s,$t(dt);case 48:var r=n.charCodeAt(s+1);if(120===r||88===r)return function(){s+=2;var t=ee(16);return null==t&&E(l+2,"Expected hexadecimal number"),Ht(n.charCodeAt(s))&&E(s,"Identifier directly after number"),$t(T,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ne(!1);case 34:case 39:return function(t){s++;for(var r="";;){s>=i&&E(l,"Unterminated string constant");var a=n.charCodeAt(s);if(a===t)return++s,$t(k,r);if(92===a){a=n.charCodeAt(++s);var o=/^[0-7]+/.exec(n.slice(s,s+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++s,o)w&&E(s-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(o,8)),s+=o.length-1;else switch(a){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(ie(2));break;case 117:r+=String.fromCharCode(ie(4));break;case 85:r+=String.fromCharCode(ie(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(s)&&++s;case 10:e.locations&&(v=s,++m);break;default:r+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||E(l,"Unterminated string constant"),r+=String.fromCharCode(a),++s}}(t);case 47:return function(){var t=n.charCodeAt(s+1);return p?(++s,te()):61===t?Kt(vt,2):Kt(pt,1)}();case 37:case 42:return 61===n.charCodeAt(s+1)?Kt(vt,2):Kt(kt,1);case 124:case 38:return function(t){var e=n.charCodeAt(s+1);return e===t?Kt(124===t?bt:xt,2):61===e?Kt(vt,2):Kt(124===t?_t:St,1)}(t);case 94:return 61===n.charCodeAt(s+1)?Kt(vt,2):Kt(wt,1);case 43:case 45:return function(t){var e=n.charCodeAt(s+1);return e===t?45==e&&62==n.charCodeAt(s+2)&&Vt.test(n.slice(y,s))?(s+=3,Yt(),Xt(),Jt()):Kt(gt,2):61===e?Kt(vt,2):Kt(Ct,1)}(t);case 60:case 62:return function(t){var e=n.charCodeAt(s+1),i=1;return e===t?(i=62===t&&62===n.charCodeAt(s+2)?3:2,61===n.charCodeAt(s+i)?Kt(vt,i+1):Kt(Tt,i)):33==e&&60==t&&45==n.charCodeAt(s+2)&&45==n.charCodeAt(s+3)?(s+=4,Yt(),Xt(),Jt()):(61===e&&(i=61===n.charCodeAt(s+2)?3:2),Kt(Mt,i))}(t);case 61:case 33:return function(t){return 61===n.charCodeAt(s+1)?Kt(Et,61===n.charCodeAt(s+2)?3:2):Kt(61===t?mt:yt,1)}(t);case 126:return Kt(yt,1)}return!1}function Jt(t){if(t?s=l+1:l=s,e.locations&&(c=new Wt),t)return te();if(s>=i)return $t(A);var r=n.charCodeAt(s);if(Ht(r)||92===r)return ae();var a=Zt(r);if(!1===a){var o=String.fromCharCode(r);if("\\"===o||Ft.test(o))return ae();E(s,"Unexpected character '"+o+"'")}return a}function Kt(t,e){var i=n.slice(s,s+e);s+=e,$t(t,i)}function te(){for(var t,e,r=s;;){s>=i&&E(r,"Unterminated regular expression");var a=n.charAt(s);if(Vt.test(a)&&E(r,"Unterminated regular expression"),t)t=!1;else{if("["===a)e=!0;else if("]"===a&&e)e=!1;else if("/"===a&&!e)break;t="\\"===a}++s}var o=n.slice(r,s);++s;var l=re();l&&!/^[gmsiy]*$/.test(l)&&E(r,"Invalid regexp flag");try{var u=new RegExp(o,l)}catch(t){t instanceof SyntaxError&&E(r,t.message),E(t)}return $t(C,u)}function ee(t,e){for(var i=s,r=0,a=0,o=null==e?1/0:e;a<o;++a){var l,u=n.charCodeAt(s);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;++s,r=r*t+l}return s===i||null!=e&&s-i!==e?null:r}function ne(t){var e=s,i=!1,r=48===n.charCodeAt(s);t||null!==ee(10)||E(e,"Invalid number"),46===n.charCodeAt(s)&&(++s,ee(10),i=!0);var a=n.charCodeAt(s);69!==a&&101!==a||(43!==(a=n.charCodeAt(++s))&&45!==a||++s,null===ee(10)&&E(e,"Invalid number"),i=!0),Ht(n.charCodeAt(s))&&E(s,"Identifier directly after number");var o,l=n.slice(e,s);return i?o=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||w?E(e,"Invalid number"):o=parseInt(l,8):o=parseInt(l,10),$t(T,o)}function ie(t){var e=ee(16,t);return null===e&&E(l,"Bad character escape sequence"),e}function re(){Ot=!1;for(var t,e=!0,i=s;;){var r=n.charCodeAt(s);if(Gt(r))Ot&&(t+=n.charAt(s)),++s;else{if(92!==r)break;Ot||(t=n.slice(i,s)),Ot=!0,117!=n.charCodeAt(++s)&&E(s,"Expecting Unicode escape sequence \\uXXXX"),++s;var a=ie(4),o=String.fromCharCode(a);o||E(s-1,"Invalid Unicode escape"),(e?Ht(a):Gt(a))||E(s-4,"Invalid Unicode escape"),t+=o}e=!1}return Ot?t:n.slice(i,s)}function ae(){var t=re(),e=P;return!Ot&&Dt(t)&&(e=nt[t]),$t(e,t)}function oe(){g=l,y=u,b=h,Jt()}function se(t){if(w=t,s=l,e.locations)for(;s<v;)v=n.lastIndexOf("\n",v-2)+1,--m;Xt(),Jt()}function le(){this.type=null,this.start=l,this.end=null}function ue(){this.start=c,this.end=null,null!==r&&(this.source=r)}function ce(){var t=new le;return e.locations&&(t.loc=new ue),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[l,0]),t}function he(t){var n=new le;return n.start=t.start,e.locations&&(n.loc=new ue,n.loc.start=t.loc.start),e.ranges&&(n.range=[t.range[0],0]),n}function fe(t,n){return t.type=n,t.end=y,e.locations&&(t.loc.end=b),e.ranges&&(t.range[1]=y),t}function de(t){return e.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function pe(t){if(f===t)return oe(),!0}function me(){return!e.strictSemicolons&&(f===A||f===ot||Vt.test(n.slice(y,l)))}function ve(){pe(ct)||me()||ye()}function ge(t){f===t?oe():ye()}function ye(){E(l,"Unexpected token")}function be(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&E(t.start,"Assigning to rvalue"),w&&"Identifier"===t.type&&Rt(t.name)&&E(t.start,"Assigning to "+t.name+" in strict mode")}var xe={kind:"loop"},_e={kind:"switch"};function we(){(f===pt||f===vt&&"/="==d)&&Jt(!0);var t=f,i=ce();switch(t){case O:case N:oe();var r=t===O;pe(ct)||me()?i.label=null:f!==P?ye():(i.label=De(),ve());for(var a=0;a<_.length;++a){var o=_[a];if(null==i.label||o.name===i.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(i.label&&r)break}}return a===_.length&&E(i.start,"Unsyntactic "+t.keyword),fe(i,r?"BreakStatement":"ContinueStatement");case R:return oe(),ve(),fe(i,"DebuggerStatement");case z:return oe(),_.push(xe),i.body=we(),_.pop(),ge(Q),i.test=Se(),ve(),fe(i,"DoWhileStatement");case j:if(oe(),_.push(xe),ge(st),f===ct)return Me(i,null);if(f===$){var s=ce();return oe(),Ce(s,!0),fe(s,"VariableDeclaration"),1===s.declarations.length&&pe(et)?Te(i,s):Me(i,s)}return s=ke(!1,!0),pe(et)?(be(s),Te(i,s)):Me(i,s);case V:return oe(),Ne(i,!0);case U:return oe(),i.test=Se(),i.consequent=we(),i.alternate=pe(B)?we():null,fe(i,"IfStatement");case H:return x||e.allowReturnOutsideFunction||E(l,"'return' outside of function"),oe(),pe(ct)||me()?i.argument=null:(i.argument=ke(),ve()),fe(i,"ReturnStatement");case G:oe(),i.discriminant=Se(),i.cases=[],ge(at),_.push(_e);for(var u,c;f!=ot;)if(f===L||f===D){var h=f===L;u&&fe(u,"SwitchCase"),i.cases.push(u=ce()),u.consequent=[],oe(),h?u.test=ke():(c&&E(g,"Multiple default clauses"),c=!0,u.test=null),ge(ht)}else u||ye(),u.consequent.push(we());return u&&fe(u,"SwitchCase"),oe(),_.pop(),fe(i,"SwitchStatement");case W:return oe(),Vt.test(n.slice(y,l))&&E(y,"Illegal newline after throw"),i.argument=ke(),ve(),fe(i,"ThrowStatement");case q:if(oe(),i.block=Ee(),i.handler=null,f===I){var p=ce();oe(),ge(st),p.param=De(),w&&Rt(p.param.name)&&E(p.param.start,"Binding "+p.param.name+" in strict mode"),ge(lt),p.guard=null,p.body=Ee(),i.handler=fe(p,"CatchClause")}return i.guardedHandlers=M,i.finalizer=pe(F)?Ee():null,i.handler||i.finalizer||E(i.start,"Missing catch or finally clause"),fe(i,"TryStatement");case $:return oe(),Ce(i),ve(),fe(i,"VariableDeclaration");case Q:return oe(),i.test=Se(),_.push(xe),i.body=we(),_.pop(),fe(i,"WhileStatement");case Y:return w&&E(l,"'with' in strict mode"),oe(),i.object=Se(),i.body=we(),fe(i,"WithStatement");case at:return Ee();case ct:return oe(),fe(i,"EmptyStatement");default:var m=d,v=ke();if(t===P&&"Identifier"===v.type&&pe(ht)){for(a=0;a<_.length;++a)_[a].name===m&&E(v.start,"Label '"+m+"' is already declared");var b=f.isLoop?"loop":f===G?"switch":null;return _.push({name:m,kind:b}),i.body=we(),_.pop(),i.label=v,fe(i,"LabeledStatement")}return i.expression=v,ve(),fe(i,"ExpressionStatement")}}function Se(){ge(st);var t=ke();return ge(lt),t}function Ee(t){var e,n=ce(),i=!0,r=!1;for(n.body=[],ge(at);!pe(ot);){var a=we();n.body.push(a),i&&t&&de(a)&&(e=r,se(r=!0)),i=!1}return r&&!e&&se(!1),fe(n,"BlockStatement")}function Me(t,e){return t.init=e,ge(ct),t.test=f===ct?null:ke(),ge(ct),t.update=f===lt?null:ke(),ge(lt),t.body=we(),_.pop(),fe(t,"ForStatement")}function Te(t,e){return t.left=e,t.right=ke(),ge(lt),t.body=we(),_.pop(),fe(t,"ForInStatement")}function Ce(t,e){for(t.declarations=[],t.kind="var";;){var n=ce();if(n.id=De(),w&&Rt(n.id.name)&&E(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=pe(mt)?ke(!0,e):null,t.declarations.push(fe(n,"VariableDeclarator")),!pe(ut))break}return t}function ke(t,e){var n=Pe(e);if(!t&&f===ut){var i=he(n);for(i.expressions=[n];pe(ut);)i.expressions.push(Pe(e));return fe(i,"SequenceExpression")}return n}function Pe(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=f.binop;if(null!=r&&(!i||f!==et)&&r>n){var a=he(e);a.left=e,a.operator=d;var o=f;oe(),a.right=t(Ae(),r,i);var s=fe(a,o===bt||o===xt?"LogicalExpression":"BinaryExpression");return t(s,n,i)}return e}(Ae(),-1,t)}(t);if(pe(dt)){var n=he(e);return n.test=e,n.consequent=ke(!0),ge(ht),n.alternate=ke(!0,t),fe(n,"ConditionalExpression")}return e}(t);if(f.isAssign){var n=he(e);return n.operator=d,n.left=e,oe(),n.right=Pe(t),be(e),fe(n,"AssignmentExpression")}return e}function Ae(){if(f.prefix){var t=ce(),e=f.isUpdate;return t.operator=d,t.prefix=!0,p=!0,oe(),t.argument=Ae(),e?be(t.argument):w&&"delete"===t.operator&&"Identifier"===t.argument.type&&E(t.start,"Deleting local variable in strict mode"),fe(t,e?"UpdateExpression":"UnaryExpression")}for(var n=Oe(Le());f.postfix&&!me();)(t=he(n)).operator=d,t.prefix=!1,t.argument=n,be(n),oe(),n=fe(t,"UpdateExpression");return n}function Oe(t,e){var n;return pe(ft)?((n=he(t)).object=t,n.property=De(!0),n.computed=!1,Oe(fe(n,"MemberExpression"),e)):pe(it)?((n=he(t)).object=t,n.property=ke(),n.computed=!0,ge(rt),Oe(fe(n,"MemberExpression"),e)):!e&&pe(st)?((n=he(t)).callee=t,n.arguments=Re(lt,!1),Oe(fe(n,"CallExpression"),e)):t}function Le(){switch(f){case Z:var t=ce();return oe(),fe(t,"ThisExpression");case P:return De();case T:case k:case C:return(t=ce()).value=d,t.raw=n.slice(l,u),oe(),fe(t,"Literal");case J:case K:case tt:return(t=ce()).value=f.atomValue,t.raw=f.keyword,oe(),fe(t,"Literal");case st:var i=c,r=l;oe();var a=ke();return a.start=r,a.end=u,e.locations&&(a.loc.start=i,a.loc.end=h),e.ranges&&(a.range=[r,u]),ge(lt),a;case it:return t=ce(),oe(),t.elements=Re(rt,!0,!0),fe(t,"ArrayExpression");case at:return function(){var t=ce(),n=!0,i=!1;for(t.properties=[],oe();!pe(ot);){if(n)n=!1;else if(ge(ut),e.allowTrailingCommas&&pe(ot))break;var r,a={key:Ie()},o=!1;if(pe(ht)?(a.value=ke(!0),r=a.kind="init"):e.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(o=i=!0,r=a.kind=a.key.name,a.key=Ie(),f!==st&&ye(),a.value=Ne(ce(),!1)):ye(),"Identifier"===a.key.type&&(w||i))for(var s=0;s<t.properties.length;++s){var l=t.properties[s];if(l.key.name===a.key.name){var u=r==l.kind||o&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!w&&"init"===r&&"init"===l.kind&&(u=!1),u&&E(a.key.start,"Redefinition of property")}}t.properties.push(a)}return fe(t,"ObjectExpression")}();case V:return t=ce(),oe(),Ne(t,!1);case X:return function(){var t=ce();return oe(),t.callee=Oe(Le(),!0),pe(st)?t.arguments=Re(lt,!1):t.arguments=M,fe(t,"NewExpression")}();default:ye()}}function Ie(){return f===T||f===k?Le():De(!0)}function Ne(t,e){f===P?t.id=De():e?ye():t.id=null,t.params=[];var n=!0;for(ge(st);!pe(lt);)n?n=!1:ge(ut),t.params.push(De());var i=x,r=_;if(x=!0,_=[],t.body=Ee(!0),x=i,_=r,w||t.body.body.length&&de(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=a<0?t.id:t.params[a];if((Nt(o.name)||Rt(o.name))&&E(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var s=0;s<a;++s)o.name===t.params[s].name&&E(o.start,"Argument name clash in strict mode")}return fe(t,e?"FunctionDeclaration":"FunctionExpression")}function Re(t,n,i){for(var r=[],a=!0;!pe(t);){if(a)a=!1;else if(ge(ut),n&&e.allowTrailingCommas&&pe(t))break;i&&f===ut?r.push(null):r.push(ke(!0))}return r}function De(t){var i=ce();return t&&"everywhere"==e.forbidReserved&&(t=!1),f===P?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?Lt:It)(d)||w&&Nt(d))&&-1==n.slice(l,u).indexOf("\\")&&E(l,"The keyword '"+d+"' is reserved"),i.name=d):t&&f.keyword?i.name=f.keyword:ye(),p=!1,oe(),fe(i,"Identifier")}},"object"==typeof t&&"object"==typeof e?h(t):(i=[t],(a="function"==typeof(r=h)?r.apply(t,i):r)===s||(e.exports=a)),p.version||(p=null));function m(t,e){return(d.acorn||p).parse(t,e)}var v={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},g={"-":"__negate","+":"__self"},b=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(t){this["__"+t]="#"+t}),{__self:function(){return this}});function _(t,e,n){var i=v[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function w(t,e){var n=g[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function S(t,e){if(!t)return"";var n=[];function i(t){for(var e=0,i=n.length;e<i;e++){var r=n[e];if(r[0]>=t)break;t+=r[1]}return t}function r(e){return t.substring(i(e.range[0]),i(e.range[1]))}function a(e,r){for(var a=i(e.range[0]),o=i(e.range[1]),s=0,l=n.length-1;l>=0;l--)if(a>n[l][0]){s=l+1;break}n.splice(s,0,[a,r.length-o+a]),t=t.substring(0,a)+r+t.substring(o)}var s,c=(e=e||{}).url||"",h=ft.agent,f=h.versionNumber,d=!1,p=e.sourceMaps,y=e.source||t,b=/\r\n|\n|\r/gm,x=e.offset||0;if(p&&(h.chrome&&f>=30||h.webkit&&f>=537.76||h.firefox&&f>=23||h.node)){if(h.node)x-=2;else if(l&&c&&!l.location.href.indexOf(c)){var _=u.getElementsByTagName("html")[0].innerHTML;x=_.substr(0,_.indexOf(t)+1).match(b).length+1}var w=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((d=x>0&&!(h.chrome&&f>=36||h.safari&&f>=600||h.firefox&&f>=40||h.node))?0:x)+"A"];w.length=(t.match(b)||[]).length+1+(d?x:0),s={version:3,file:c,names:[],mappings:w.join(";AACA"),sourceRoot:"",sources:[c],sourcesContent:[y]}}return function e(n,o){if(n){for(var s in n)if("range"!==s&&"loc"!==s){var l=n[s];if(Array.isArray(l))for(var u=0,c=l.length;u<c;u++)e(l[u],n);else l&&"object"==typeof l&&e(l,n)}switch(n.type){case"UnaryExpression":if(n.operator in g&&"Literal"!==n.argument.type){var h=r(n.argument);a(n,'$__("'+n.operator+'", '+h+")")}break;case"BinaryExpression":if(n.operator in v&&"Literal"!==n.left.type){var f=r(n.left),d=r(n.right),p=function(e,n){return t.substring(i(e.range[1]),i(n.range[0]))}(n.left,n.right),m=n.operator;a(n,"__$__("+f+","+p.replace(new RegExp("\\"+m),'"'+m+'"')+", "+d+")")}break;case"UpdateExpression":case"AssignmentExpression":var y=o&&o.type;if(!("ForStatement"===y||"BinaryExpression"===y&&/^[=!<>]/.test(o.operator)||"MemberExpression"===y&&o.computed))if("UpdateExpression"===n.type){var b=(h=r(n.argument))+" = "+(x="__$__("+h+', "'+n.operator[0]+'", 1)');n.prefix?b="("+b+")":"AssignmentExpression"!==y&&"VariableDeclarator"!==y&&"BinaryExpression"!==y||(r(o.left||o.id)===h&&(b=x),b=h+"; "+b),a(n,b)}else if(/^.=$/.test(n.operator)&&"Literal"!==n.left.type){f=r(n.left),d=r(n.right);var x=f+" = __$__("+f+', "'+n.operator[0]+'", '+d+")";a(n,/^\(.*\)$/.test(r(n))?"("+x+")":x)}break;case"ExportDefaultDeclaration":a({range:[n.start,n.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var _=n.declaration,w=n.specifiers;if(_){var S=_.declarations;S&&(S.forEach((function(t){a(t,"module.exports."+r(t))})),a({range:[n.start,_.start+_.kind.length]},""))}else if(w){var E=w.map((function(t){var e=r(t);return"module.exports."+e+" = "+e+"; "})).join("");E&&a(n,E)}}}}(m(t,{ranges:!0,preserveParens:!0,sourceType:"module"})),s&&(d&&(t=new Array(x+1).join("\n")+t),/^(inline|both)$/.test(p)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+o.btoa(unescape(encodeURIComponent(JSON.stringify(s))))),t+="\n//# sourceURL="+(c||"paperscript")),{url:c,source:y,code:t,map:s}}function E(t,e,n){ft=e;var i,r=e.getView(),a=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new at:null,o=a?a._events:[],s=["onFrame","onResize"].concat(o),l=[],h=[],f="object"==typeof t?t:S(t,n);function d(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(l.push(i),h.push(e[i]))}t=f.code,d({__$__:_,$__:w,paper:e,tool:a},!0),d(e),t="var module = { exports: {} }; "+t,(g=c.each(s,(function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(l.push(e),this.push("module.exports."+e+" = "+e+";"))}),[]).join("\n"))&&(t+="\n"+g),t+="\nreturn module.exports;";var p=ft.agent;if(u&&(p.chrome||p.firefox&&p.versionNumber<40)){var m=u.createElement("script"),v=u.head||u.getElementsByTagName("head")[0];p.firefox&&(t="\n"+t),m.appendChild(u.createTextNode("document.__paperscript__ = function("+l+") {"+t+"\n}")),v.appendChild(m),i=u.__paperscript__,delete u.__paperscript__,v.removeChild(m)}else i=Function(l,t);var g,b=(g=i&&i.apply(e,h))||{};return c.each(o,(function(t){var e=b[t];e&&(a[t]=e)})),r&&(b.onResize&&r.setOnResize(b.onResize),r.emit("resize",{size:r.size,delta:new y}),b.onFrame&&r.setOnFrame(b.onFrame),r.requestUpdate()),g}function M(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==f.getAttribute(t,"ignore")){var e=f.getAttribute(t,"canvas"),n=u.getElementById(e),i=t.src||t.getAttribute("data-src"),r=f.hasAttribute(t,"async");if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var a=f.get(n.getAttribute("data-paper-scope"))||(new f).setup(n);return n.setAttribute("data-paper-scope",a._id),i?st({url:i,async:r,mimeType:"text/plain",onLoad:function(t){E(t,a,i)}}):E(t.innerHTML,a,t.baseURI),t.setAttribute("data-paper-ignore","true"),a}}function T(){c.each(u&&u.getElementsByTagName("script"),M)}return y.inject(b),x.inject(b),q.inject(b),l&&("complete"===u.readyState?setTimeout(T):Z.add(l,{load:T})),{compile:S,execute:E,load:function(t){return t?M(t):T()},parse:m,calculateBinary:_,calculateUnary:w}}.call(this);var ft=new(f.inject(c.exports,{Base:c,Numerical:v,Key:nt,DomEvent:Z,DomElement:X,document:u,window:l,Symbol:I,PlacedSymbol:L}));return ft.agent.node&&n(301)(ft),(a="function"==typeof(r=ft)?r.call(e,n,e,t):r)===s||(t.exports=a),ft}).call(this,"object"==typeof self?self:null)},function(t,e){},function(t,e,n){"use strict";n.r(e),n.d(e,"Node",(function(){return it})),n.d(e,"Parser",(function(){return j})),n.d(e,"Position",(function(){return N})),n.d(e,"SourceLocation",(function(){return R})),n.d(e,"TokContext",(function(){return ot})),n.d(e,"Token",(function(){return Pt})),n.d(e,"TokenType",(function(){return v})),n.d(e,"defaultOptions",(function(){return z})),n.d(e,"getLineInfo",(function(){return D})),n.d(e,"isIdentifierChar",(function(){return m})),n.d(e,"isIdentifierStart",(function(){return p})),n.d(e,"isNewLine",(function(){return M})),n.d(e,"keywordTypes",(function(){return x})),n.d(e,"lineBreak",(function(){return S})),n.d(e,"lineBreakG",(function(){return E})),n.d(e,"nonASCIIwhitespace",(function(){return T})),n.d(e,"parse",(function(){return Nt})),n.d(e,"parseExpressionAt",(function(){return Rt})),n.d(e,"tokContexts",(function(){return st})),n.d(e,"tokTypes",(function(){return w})),n.d(e,"tokenizer",(function(){return Dt})),n.d(e,"version",(function(){return It}));var i={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},r="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:r,"5module":r+" export import",6:r+" const class extends export import super"},o=/^in(stanceof)?$/,s="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",l="--------------------------------------------------------------------------------------------------------------------------------------------------",u=new RegExp("["+s+"]"),c=new RegExp("["+s+l+"]");s=l=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],f=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function d(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&d(t,h)))}function m(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&c.test(String.fromCharCode(t)):!1!==e&&(d(t,h)||d(t,f)))))}var v=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function g(t,e){return new v(t,{beforeExpr:!0,binop:e})}var y={beforeExpr:!0},b={startsExpr:!0},x={};function _(t,e){return void 0===e&&(e={}),e.keyword=t,x[t]=new v(t,e)}var w={num:new v("num",b),regexp:new v("regexp",b),string:new v("string",b),name:new v("name",b),eof:new v("eof"),bracketL:new v("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new v("]"),braceL:new v("{",{beforeExpr:!0,startsExpr:!0}),braceR:new v("}"),parenL:new v("(",{beforeExpr:!0,startsExpr:!0}),parenR:new v(")"),comma:new v(",",y),semi:new v(";",y),colon:new v(":",y),dot:new v("."),question:new v("?",y),arrow:new v("=>",y),template:new v("template"),invalidTemplate:new v("invalidTemplate"),ellipsis:new v("...",y),backQuote:new v("`",b),dollarBraceL:new v("${",{beforeExpr:!0,startsExpr:!0}),eq:new v("=",{beforeExpr:!0,isAssign:!0}),assign:new v("_=",{beforeExpr:!0,isAssign:!0}),incDec:new v("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new v("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new v("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new v("**",{beforeExpr:!0}),_break:_("break"),_case:_("case",y),_catch:_("catch"),_continue:_("continue"),_debugger:_("debugger"),_default:_("default",y),_do:_("do",{isLoop:!0,beforeExpr:!0}),_else:_("else",y),_finally:_("finally"),_for:_("for",{isLoop:!0}),_function:_("function",b),_if:_("if"),_return:_("return",y),_switch:_("switch"),_throw:_("throw",y),_try:_("try"),_var:_("var"),_const:_("const"),_while:_("while",{isLoop:!0}),_with:_("with"),_new:_("new",{beforeExpr:!0,startsExpr:!0}),_this:_("this",b),_super:_("super",b),_class:_("class",b),_extends:_("extends",y),_export:_("export"),_import:_("import",b),_null:_("null",b),_true:_("true",b),_false:_("false",b),_in:_("in",{beforeExpr:!0,binop:7}),_instanceof:_("instanceof",{beforeExpr:!0,binop:7}),_typeof:_("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},S=/\r\n?|\n|\u2028|\u2029/,E=new RegExp(S.source,"g");function M(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,C=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,k=Object.prototype,P=k.hasOwnProperty,A=k.toString;function O(t,e){return P.call(t,e)}var L=Array.isArray||function(t){return"[object Array]"===A.call(t)};function I(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var N=function(t,e){this.line=t,this.column=e};N.prototype.offset=function(t){return new N(this.line,this.column+t)};var R=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function D(t,e){for(var n=1,i=0;;){E.lastIndex=i;var r=E.exec(t);if(!(r&&r.index<e))return new N(n,e-i);++n,i=r.index+r[0].length}}var z={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(t){var e={};for(var n in z)e[n]=t&&O(t,n)?t[n]:z[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),L(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return L(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,a,o,s){var l={type:n?"Block":"Line",value:i,start:r,end:a};t.locations&&(l.loc=new R(this,o,s)),t.ranges&&(l.range=[r,a]),e.push(l)}}(e,e.onComment)),e}function F(t,e){return 2|(t?4:0)|(e?8:0)}var j=function(t,e,n){this.options=t=B(t),this.sourceFile=t.sourceFile,this.keywords=I(a[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var r="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(r=i[o]);o--);"module"===t.sourceType&&(r+=" await")}this.reservedWords=I(r);var s=(r?r+" ":"")+i.strict;this.reservedWordsStrict=I(s),this.reservedWordsStrictBind=I(s+" "+i.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(S).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},V={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};j.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},V.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},V.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},V.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},V.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},V.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},V.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},j.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},j.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},j.parse=function(t,e){return new this(e,t).parse()},j.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},j.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(j.prototype,V);var U=j.prototype,H=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function G(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}U.strictDirective=function(t){for(;;){C.lastIndex=t,t+=C.exec(this.input)[0].length;var e=H.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,C.lastIndex=t,t+=C.exec(this.input)[0].length,";"===this.input[t]&&t++}},U.eat=function(t){return this.type===t&&(this.next(),!0)},U.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},U.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},U.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},U.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||S.test(this.input.slice(this.lastTokEnd,this.start))},U.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},U.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},U.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},U.expect=function(t){this.eat(t)||this.unexpected()},U.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},U.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},U.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},U.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},U.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var W=j.prototype;W.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var a=r[i];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var q={kind:"loop"},$={kind:"switch"};W.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i)return!0;if(t)return!1;if(123===i)return!0;if(p(i,!0)){for(var r=n+1;m(this.input.charCodeAt(r),!0);)++r;var a=this.input.slice(n,r);if(!o.test(a))return!0}return!1},W.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),e=this.pos+t[0].length;return!(S.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&m(this.input.charAt(e+8)))},W.parseStatement=function(t,e,n){var i,r=this.type,a=this.startNode();switch(this.isLet(t)&&(r=w._var,i="let"),r){case w._break:case w._continue:return this.parseBreakContinueStatement(a,r.keyword);case w._debugger:return this.parseDebuggerStatement(a);case w._do:return this.parseDoStatement(a);case w._for:return this.parseForStatement(a);case w._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case w._class:return t&&this.unexpected(),this.parseClass(a,!0);case w._if:return this.parseIfStatement(a);case w._return:return this.parseReturnStatement(a);case w._switch:return this.parseSwitchStatement(a);case w._throw:return this.parseThrowStatement(a);case w._try:return this.parseTryStatement(a);case w._const:case w._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(a,i);case w._while:return this.parseWhileStatement(a);case w._with:return this.parseWithStatement(a);case w.braceL:return this.parseBlock(!0,a);case w.semi:return this.parseEmptyStatement(a);case w._export:case w._import:if(this.options.ecmaVersion>10&&r===w._import){C.lastIndex=this.pos;var o=C.exec(this.input),s=this.pos+o[0].length;if(40===this.input.charCodeAt(s))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===w._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var l=this.value,u=this.parseExpression();return r===w.name&&"Identifier"===u.type&&this.eat(w.colon)?this.parseLabeledStatement(a,l,u,t):this.parseExpressionStatement(a,u)}},W.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},W.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},W.parseDoStatement=function(t){return this.next(),this.labels.push(q),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},W.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(q),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===w._var||this.type===w._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var a=new G,o=this.parseExpression(!0,a);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},W.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,Y|(n?0:X),!1,e)},W.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},W.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},W.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push($),this.enterScope(0);for(var n=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var i=this.type===w._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},W.parseThrowStatement=function(t){return this.next(),S.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var Q=[];W.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();if(this.next(),this.eat(w.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLVal(e.param,n?4:2),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},W.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},W.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(q),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},W.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},W.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},W.parseLabeledStatement=function(t,e,n,i){for(var r=0,a=this.labels;r<a.length;r+=1){a[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===w._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var l=this.labels[s];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},W.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},W.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(w.braceL),t&&this.enterScope(0);!this.eat(w.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},W.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},W.parseForIn=function(t,e){var n=this.type===w._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},W.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(w.eq)?i.init=this.parseMaybeAssign(e):"const"!==n||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===w._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(w.comma))break}return t},W.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var Y=1,X=2;W.parseFunction=function(t,e,n,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===w.star&&e&X&&this.unexpected(),t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&Y&&(t.id=4&e&&this.type!==w.name?null:this.parseIdent(),!t.id||e&X||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(F(t.async,t.generator)),e&Y||(t.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&Y?"FunctionDeclaration":"FunctionExpression")},W.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},W.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),r=!1;for(i.body=[],this.expect(w.braceL);!this.eat(w.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(i.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(r&&this.raise(a.start,"Duplicate constructor in the same class"),r=!0))}return t.body=this.finishNode(i,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},W.parseClassElement=function(t){var e=this;if(this.eat(w.semi))return null;var n=this.startNode(),i=function(t,i){void 0===i&&(i=!1);var r=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===w.parenL||i&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(r,a),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=i("static");var r=this.eat(w.star),a=!1;r||(this.options.ecmaVersion>=8&&i("async",!0)?(a=!0,r=this.options.ecmaVersion>=9&&this.eat(w.star)):i("get")?n.kind="get":i("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),r&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=t),this.parseClassMethod(n,r,a,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},W.parseClassMethod=function(t,e,n,i){return t.value=this.parseMethod(e,n,i),this.finishNode(t,"MethodDefinition")},W.parseClassId=function(t,e){this.type===w.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},W.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},W.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.expectContextual("from"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(w._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===w._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,4|Y,!1,n)}else if(this.type===w._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},W.checkExport=function(t,e,n){t&&(O(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},W.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var i=0,r=e.properties;i<r.length;i+=1){var a=r[i];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var o=0,s=e.elements;o<s.length;o+=1){var l=s[o];l&&this.checkPatternExport(t,l)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},W.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}},W.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},W.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(n)n=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var i=this.startNode();i.local=this.parseIdent(!0),i.exported=this.eatContextual("as")?this.parseIdent(!0):i.local,this.checkExport(t,i.exported.name,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},W.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=Q,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},W.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var r=this.startNode();r.imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportSpecifier"))}return t},W.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},W.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Z=j.prototype;Z.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var a=r[i];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},Z.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},Z.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Z.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},Z.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(w.comma),e&&this.type===w.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),i.push(a),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),i.push(o)}return i},Z.parseBindingListItem=function(t){return t},Z.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},Z.checkLVal=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Identifier":2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(O(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var a=r[i];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var o=0,s=t.elements;o<s.length;o+=1){var l=s[o];l&&this.checkLVal(l,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var J=j.prototype;J.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===a&&(e.proto&&(n&&n.doubleProto<0?n.doubleProto=r.start:this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[i="$"+i];if(o)("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(r.start,"Redefinition of property");else o=e[i]={init:!1,get:!1,set:!1};o[a]=!0}}},J.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===w.comma){var a=this.startNodeAt(n,i);for(a.expressions=[r];this.eat(w.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return r},J.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,a=-1,o=-1;e?(r=e.parenthesizedAssign,a=e.trailingComma,o=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new G,i=!0);var s=this.start,l=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,s,l)),this.type.isAssign){var c=this.startNodeAt(s,l);return c.operator=this.value,c.left=this.type===w.eq?this.toAssignable(u,!1,e):u,i||G.call(e),e.shorthandAssign=-1,this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),a>-1&&(e.trailingComma=a),o>-1&&(e.shorthandAssign=o),u},J.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(w.question)){var a=this.startNodeAt(n,i);return a.test=r,a.consequent=this.parseMaybeAssign(),this.expect(w.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return r},J.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?r:r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},J.parseExprOp=function(t,e,n,i,r){var a=this.type.binop;if(null!=a&&(!r||this.type!==w._in)&&a>i){var o=this.type===w.logicalOR||this.type===w.logicalAND,s=this.value;this.next();var l=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,u,a,r),h=this.buildBinary(e,n,t,c,s,o);return this.parseExprOp(h,e,n,i,r)}return t},J.buildBinary=function(t,e,n,i,r,a){var o=this.startNodeAt(t,e);return o.left=n,o.operator=r,o.right=i,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},J.parseMaybeUnary=function(t,e){var n,i=this.start,r=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===w.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(i,r);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(w.starstar)?this.buildBinary(i,r,n,this.parseMaybeUnary(null,!1),"**",!1):n},J.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,i=this.parseExprAtom(t),r="ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||r)return i;var a=this.parseSubscripts(i,e,n);return t&&"MemberExpression"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1)),a},J.parseSubscripts=function(t,e,n,i){for(var r=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,i,r);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},J.parseSubscript=function(t,e,n,i,r){var a=this.eat(w.bracketL);if(a||this.eat(w.dot)){var o=this.startNodeAt(e,n);o.object=t,o.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!a,a&&this.expect(w.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!i&&this.eat(w.parenL)){var s=new G,l=this.yieldPos,u=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&"Import"!==t.type,!1,s);if(r&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=u,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(s,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=u||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var f=this.startNodeAt(e,n);if(f.callee=t,f.arguments=h,"Import"===f.callee.type){1!==f.arguments.length&&this.raise(f.start,"import() requires exactly one argument");var d=f.arguments[0];d&&"SpreadElement"===d.type&&this.raise(d.start,"... is not allowed in import()")}t=this.finishNode(f,"CallExpression")}else if(this.type===w.backQuote){var p=this.startNodeAt(e,n);p.tag=t,p.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(p,"TaggedTemplateExpression")}return t},J.parseExprAtom=function(t){this.type===w.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==w.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,"Super");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case w.name:var i=this.start,r=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(i,r),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(i,r),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===w.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,r),[o],!0)}return o;case w.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case w.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),u;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},J.parseDynamicImport=function(){var t=this.startNode();return this.next(),this.type!==w.parenL&&this.unexpected(),this.finishNode(t,"Import")},J.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},J.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},J.parseParenAndDistinguishExpression=function(t){var e,n=this.start,i=this.startLoc,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,l=[],u=!0,c=!1,h=new G,f=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(u?u=!1:this.expect(w.comma),r&&this.afterTrailingComma(w.parenR,!0)){c=!0;break}if(this.type===w.ellipsis){a=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var p=this.start,m=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(n,i,l);l.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((e=this.startNodeAt(o,s)).expressions=l,this.finishNodeAt(e,"SequenceExpression",p,m)):e=l[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,i);return v.expression=e,this.finishNode(v,"ParenthesizedExpression")}return e},J.parseParenItem=function(t){return t},J.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var K=[];J.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0),this.options.ecmaVersion>10&&"Import"===t.callee.type&&this.raise(t.callee.start,"Cannot use new with import(...)"),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&"Import"!==t.callee.type,!1):t.arguments=K,this.finishNode(t,"NewExpression")},J.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===w.backQuote,this.finishNode(n,"TemplateElement")},J.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(w.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},J.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!S.test(this.input.slice(this.lastTokEnd,this.start))},J.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(w.braceR);){if(i)i=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,r,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},J.parseProperty=function(t,e){var n,i,r,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(r=this.start,a=this.startLoc),t||(n=this.eat(w.star)));var s=this.containsEsc;return this.parsePropertyName(o),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(o,e)):i=!1,this.parsePropertyValue(o,t,n,i,r,a,e,s),this.finishNode(o,"Property")},J.parsePropertyValue=function(t,e,n,i,r,a,o,s){if((n||i)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===w.comma||this.type===w.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,a,t.key):this.type===w.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var l="get"===t.kind?0:1;if(t.value.params.length!==l){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},J.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},J.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},J.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|F(e,i.generator)|(n?128:0)),this.expect(w.parenL),i.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")},J.parseArrowExpression=function(t,e,n){var i=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|F(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=i,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},J.parseFunctionBody=function(t,e,n){var i=e&&this.type!==w.braceL,r=this.strict,a=!1;if(i)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!r&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=r},J.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if("Identifier"!==n[e].type)return!1}return!0},J.checkParams=function(t,e){for(var n={},i=0,r=t.params;i<r.length;i+=1){var a=r[i];this.checkLVal(a,1,e?null:n)}},J.parseExprList=function(t,e,n,i){for(var r=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===w.comma?o=null:this.type===w.ellipsis?(o=this.parseSpread(i),i&&this.type===w.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):o=this.parseMaybeAssign(!1,i),r.push(o)}return r},J.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},J.parseIdent=function(t,e){var n=this.startNode();return this.type===w.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},J.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(w.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},J.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var tt=j.prototype;tt.raise=function(t,e){var n=D(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},tt.raiseRecoverable=tt.raise,tt.curPosition=function(){if(this.options.locations)return new N(this.curLine,this.pos-this.lineStart)};var et=j.prototype,nt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};et.enterScope=function(t){this.scopeStack.push(new nt(t))},et.exitScope=function(){this.scopeStack.pop()},et.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},et.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var a=this.currentScope();i=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(t)>-1&&!(32&s.flags&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(t)>-1){i=!0;break}if(s.var.push(t),this.inModule&&1&s.flags&&delete this.undefinedExports[t],3&s.flags)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},et.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},et.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},et.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},et.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var it=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new R(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},rt=j.prototype;function at(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}rt.startNode=function(){return new it(this,this.start,this.startLoc)},rt.startNodeAt=function(t,e){return new it(this,t,e)},rt.finishNode=function(t,e){return at.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},rt.finishNodeAt=function(t,e,n,i){return at.call(this,t,e,n,i)};var ot=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},st={b_stat:new ot("{",!1),b_expr:new ot("{",!0),b_tmpl:new ot("${",!1),p_stat:new ot("(",!1),p_expr:new ot("(",!0),q_tmpl:new ot("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new ot("function",!1),f_expr:new ot("function",!0),f_expr_gen:new ot("function",!0,!1,null,!0),f_gen:new ot("function",!1,!1,null,!0)},lt=j.prototype;lt.initialContext=function(){return[st.b_stat]},lt.braceIsBlock=function(t){var e=this.curContext();return e===st.f_expr||e===st.f_stat||(t!==w.colon||e!==st.b_stat&&e!==st.b_expr?t===w._return||t===w.name&&this.exprAllowed?S.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t===w.arrow||(t===w.braceL?e===st.b_stat:t!==w._var&&t!==w._const&&t!==w.name&&!this.exprAllowed):!e.isExpr)},lt.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},lt.updateContext=function(t){var e,n=this.type;n.keyword&&t===w.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===st.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?st.b_stat:st.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(st.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?st.p_stat:st.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){!t.beforeExpr||t===w.semi||t===w._else||t===w._return&&S.test(this.input.slice(this.lastTokEnd,this.start))||(t===w.colon||t===w.braceL)&&this.curContext()===st.b_stat?this.context.push(st.f_stat):this.context.push(st.f_expr),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===st.q_tmpl?this.context.pop():this.context.push(st.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t===w._function){var e=this.context.length-1;this.context[e]===st.f_expr?this.context[e]=st.f_expr_gen:this.context[e]=st.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==w.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var ut="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ct=ut+" Extended_Pictographic",ht={9:ut,10:ct,11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},ft="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",dt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",pt=dt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",mt={9:dt,10:pt,11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},vt={};function gt(t){var e=vt[t]={binary:I(ht[t]+" "+ft),nonBinary:{General_Category:I(ft),Script:I(mt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}gt(9),gt(10),gt(11);var yt=j.prototype,bt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=vt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function xt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function _t(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function wt(t){return t>=65&&t<=90||t>=97&&t<=122}function St(t){return wt(t)||95===t}function Et(t){return St(t)||Mt(t)}function Mt(t){return t>=48&&t<=57}function Tt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Ct(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function kt(t){return t>=48&&t<=55}bt.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},bt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},bt.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?i:(i<<10)+e.charCodeAt(t+1)-56613888},bt.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?t+1:t+2},bt.prototype.current=function(){return this.at(this.pos)},bt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},bt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},bt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},yt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},yt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},yt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},yt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},yt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},yt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},yt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},yt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},yt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},yt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},yt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},yt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},yt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},yt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},yt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},yt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},yt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!_t(e)&&(t.lastIntValue=e,t.advance(),!0)},yt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!_t(n);)t.advance();return t.pos!==e},yt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},yt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},yt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},yt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=xt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=xt(t.lastIntValue);return!0}return!1},yt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return p(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},yt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return m(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},yt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},yt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},yt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},yt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},yt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},yt.regexp_eatZero=function(t){return 48===t.current()&&!Mt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},yt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},yt.regexp_eatControlLetter=function(t){var e=t.current();return!!wt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},yt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,n=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(t.switchU&&i>=55296&&i<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(i-55296)+(a-56320)+65536,!0}t.pos=r,t.lastIntValue=i}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((e=t.lastIntValue)>=0&&e<=1114111))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=n}return!1},yt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},yt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},yt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},yt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},yt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){O(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},yt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},yt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";St(e=t.current());)t.lastStringValue+=xt(e),t.advance();return""!==t.lastStringValue},yt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Et(e=t.current());)t.lastStringValue+=xt(e),t.advance();return""!==t.lastStringValue},yt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},yt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},yt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},yt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||kt(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},yt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},yt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Mt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},yt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},yt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Mt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},yt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Tt(n=t.current());)t.lastIntValue=16*t.lastIntValue+Ct(n),t.advance();return t.pos!==e},yt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},yt.regexp_eatOctalDigit=function(t){var e=t.current();return kt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},yt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!Tt(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Ct(r),t.advance()}return!0};var Pt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new R(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},At=j.prototype;function Ot(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}At.next=function(){this.options.onToken&&this.options.onToken(new Pt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},At.getToken=function(){return this.next(),new Pt(this)},"undefined"!=typeof Symbol&&(At[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),At.curContext=function(){return this.context[this.context.length-1]},At.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},At.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},At.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},At.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(E.lastIndex=n;(t=E.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,i),n,this.pos,e,this.curPosition())},At.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!M(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},At.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},At.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},At.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},At.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},At.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,n+1):this.finishOp(i,n)},At.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?w.logicalOR:w.logicalAND,2):61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},At.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},At.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!S.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},At.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(w.assign,n+1):this.finishOp(w.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(w.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},At.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},At.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 63:return++this.pos,this.finishToken(w.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ot(t)+"'")},At.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},At.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(S.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new bt(this));s.reset(n,r,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(r,o)}catch(t){}return this.finishToken(w.regexp,{pattern:r,flags:o,value:l})},At.readInt=function(t,e){for(var n=this.pos,i=0,r=0,a=null==e?1/0:e;r<a;++r){var o=this.input.charCodeAt(this.pos),s=void 0;if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,i=i*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:i},At.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!=typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,n)},At.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=this.input.slice(e,this.pos),a="undefined"!=typeof BigInt?BigInt(r):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,a)}46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(e,this.pos),s=n?parseInt(o,8):parseFloat(o);return this.finishToken(w.num,s)},At.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},At.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(M(i,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(w.string,e)};var Lt={};At.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Lt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},At.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Lt;this.raise(t,e)},At.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===n?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(M(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},At.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},At.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ot(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return M(e)?"":String.fromCharCode(e)}},At.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},At.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(m(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?p:m)(o,i)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Ot(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},At.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=x[t]),this.finishToken(e,t)};var It="6.4.0";function Nt(t,e){return j.parse(t,e)}function Rt(t,e,n){return j.parseExpressionAt(t,e,n)}function Dt(t,e){return j.tokenizer(t,e)}j.acorn={Parser:j,version:It,defaultOptions:z,Position:N,SourceLocation:R,getLineInfo:D,Node:it,TokenType:v,tokTypes:w,keywordTypes:x,TokContext:ot,tokContexts:st,isIdentifierChar:m,isIdentifierStart:p,Token:Pt,isNewLine:M,lineBreak:S,lineBreakG:E,nonASCIIwhitespace:T}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=p(n(0)),a=d(n(22)),o=n(19),s=n(25),l=d(n(6)),u=d(n(7)),c=d(n(303)),h=p(n(4)),f=p(n(3));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.id=t.id,n.fileName=f.default.getFileName(n.id),n.thumbnail=t.thumbnail,n.result=t.result,n.rank=t.rank,n.ignored=h.default.getIgnored(),n.lookup=f.default.getData(n.id).data.lookup,n.variables=[],n.clickedX=null,n.clickedY=null,n.moved=!1,n.ignored)for(var i in n.lookup)n.ignored.indexOf(i)<0&&"z"!==i&&n.variables.push(i);return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this,e=document.getElementById("resultSummaryCanvas_"+this.rank).getContext("2d"),n=Math.min(this.thumbnail.height,this.thumbnail.width),i=this.thumbnail.width/2-n/2,r=this.thumbnail.height/2-n/2;this.thumbnail.onload=function(){e.drawImage(this.thumbnail,i,r,n,n,0,0,300,150)}.bind(this),document.getElementById("resultSummary_"+this.rank).addEventListener("mousedown",this.onMouseDownOnResultSummary.bind(this),!1),h.default.on("focusResultFromTimeline",(function(e){var n=!1;if(void 0!==e.V&&t.result.flares){for(var i=0;i<t.result.flares.length;i++)if(c.isEqual(t.result.flares[i],e)){n=!0;break}}else c.isEqual(t.result,e)&&(n=!0);n&&u.select("#resultSummary_"+t.rank).transition().duration(300).style("border","1px solid #d23430").transition().duration(1e3).style("border","1px solid rgba(223, 215, 202, 0.75)")})),h.default.on("selectResultFromTimeline",(function(e){var n=!1;if(void 0!==e.V&&t.result.flares){for(var i=0;i<t.result.flares.length;i++)if(c.isEqual(t.result.flares[i],e)){n=!0;break}}else c.isEqual(t.result,e)&&(n=!0);n&&(u.select("#resultSummary_"+t.rank).transition().duration(300).style("border","1px solid #d23430").transition().duration(1e3).style("border","1px solid rgba(223, 215, 202, 0.75)"),t.showDetails())}))}},{key:"showFileName",value:function(){return r.default.createElement("div",{style:{wordWrap:"anywhere"}},r.default.createElement("label",null,this.fileName))}},{key:"showThumbnail",value:function(){return r.default.createElement("canvas",{id:"resultSummaryCanvas_"+this.rank,className:"resultSummaryCanvas"})}},{key:"showPeriod",value:function(){return this.result.period?r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Period")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.start)," - ",(0,o.formatValue)(this.result.start+this.result.period))):r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"JD")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.start)))}},{key:"showDistance",value:function(){return isNaN(this.result.distance)?isNaN(this.result.V)?isNaN(this.result.angle)?void 0:r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Angle")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.angle))):r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Intensity")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.V))):r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col4"},r.default.createElement("label",null,"Distance")),r.default.createElement("div",{className:"col"},(0,o.formatValue)(this.result.distance)))}},{key:"showDetails",value:function(){"none"===$("#resultDetailArea").css("display")&&a.toggleExtractionDetailPanel();var t=document.getElementById("detailThumbnailCanvas"),e=$("#extractionDetailThumbnail").width();$("#detailThumbnailCanvas").width(e),$("#detailThumbnailCanvas").height(e);var n=t.getContext("2d");n.clearRect(0,0,e,e);var i=Math.min(this.thumbnail.height,this.thumbnail.width),r=this.thumbnail.width/2-i/2,o=this.thumbnail.height/2-i/2;n.drawImage(this.thumbnail,r,o,i,i,0,0,300,150),$("#extractionDetailLC").height(e)}},{key:"onMouseDownOnResultSummary",value:function(t){this.moved=!1;var e=document.getElementById("resultSummaryHolder_"+this.rank);e.classList.add("drag");var n=document.getElementById("resultSummary_"+this.rank);this.clickedX=t.pageX-n.offsetLeft,this.clickedY=t.pageY-n.offsetTop,document.body.addEventListener("mousemove",this.onMouseMoveOnResultSummary.bind(this),!1),document.body.addEventListener("mouseleave",this.onMouseUpFromResultSummary.bind(this),!1),e.addEventListener("mouseup",this.onMouseUpFromResultSummary.bind(this),!1)}},{key:"onMouseMoveOnResultSummary",value:function(t){this.moved=!0;var e=document.getElementsByClassName("drag")[0];if(e)switch(e.style.position="absolute",t.preventDefault(),e.style.top=t.pageY-this.clickedY+"px",e.style.left=t.pageX-this.clickedX+"px",h.default.getMode()){case"AE":break;case"QBE":var n=$("#selectedTimeSliceView"),i=n.offset(),r=n.width(),a=n.height();if(i.left<=t.pageX&&t.pageX<=i.left+r&&i.top<=t.pageY&&t.pageY<=i.top+a){var o=$("#selectedTimeSliceView > .overlayHidingPanel");o.css("display","block"),o.css("width",Math.min(r,a)),o.css("height",Math.min(r,a))}break;case"QBS":var s=$("#QBSSketchPad"),l=s.offset(),u=s.width(),c=s.innerHeight();if(l.left<=t.pageX&&t.pageX<=l.left+u&&l.top<=t.pageY&&t.pageY<=l.top+c){var f=$("#QBSCanvasArea > .overlayHidingPanel");f.css("display","block"),f.css("width",Math.min(u,c)),f.css("height",Math.min(u,c))}}}},{key:"onMouseUpFromResultSummary",value:function(t){document.body.removeEventListener("mousemove",this.onMouseMoveOnResultSummary.bind(this),!1);var e=document.getElementsByClassName("drag")[0];if(e&&(e.removeEventListener("mouseup",this.onMouseUpFromResultSummary.bind(this),!1),e.classList.remove("drag"),e.style.position="static"),this.moved){switch(h.default.getMode()){case"AE":break;case"QBE":$("#selectedTimeSliceView > .overlayHidingPanel").css("display","none");var n=$("#selectedTimeSliceView"),i=n.offset(),r=n.width(),o=n.height();i&&i.left<=t.pageX&&t.pageX<=i.left+r&&i.top<=t.pageY&&t.pageY<=i.top+o&&("none"===$("#QBESourceMain").css("display")&&(a.toggleSourcePanel(),(0,s.resizeExtractionResultsArea)()),l.convertResultIntoQuery(this.result.id,[this.result.start,this.result.start+this.result.period],this.ignored),"block"===$("#resultDetailArea").css("display")&&a.toggleExtractionDetailPanel(),h.default.getSource()!==this.result.id&&l.updateSource(this.result.id));break;case"QBS":$("#QBSCanvasArea > .overlayHidingPanel").css("display","none");var u=$("#QBSSketchPad"),c=u.offset(),f=u.width(),d=u.innerHeight();c&&c.left<=t.pageX&&t.pageX<=c.left+f&&c.top<=t.pageY&&t.pageY<=c.top+d&&(l.convertResultIntoQuery(this.result.id,[this.result.start,this.result.start+this.result.period],this.ignored),"block"===$("#resultDetailArea").css("display")&&a.toggleExtractionDetailPanel())}this.moveToOriginalPos()}else{this.showDetails();var p=$("#extractionDetailLC").width();l.updateSelectedResult(this.result,p,200)}}},{key:"moveToOriginalPos",value:function(){var t=$("#resultSummaryHolder_"+(this.rank+1));t?t.before($("#resultSummaryHolder_"+this.rank)):$("#resultSummaryHolder_"+(this.rank-1)).after($("#resultSummaryHolder_"+this.rank))}},{key:"render",value:function(){return r.default.createElement("div",{className:"resultSummary",id:"resultSummary_"+this.rank},this.showFileName(),this.showThumbnail(),r.default.createElement("div",{className:"container",style:{paddingLeft:"0px",paddingRight:"0px"}},this.showPeriod(),this.showDistance()))}}]),e}(r.default.Component);e.default=m},function(t,e,n){(function(t,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l="[object Arguments]",u="[object Array]",c="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",m="[object Map]",v="[object Number]",g="[object Object]",y="[object RegExp]",b="[object Set]",x="[object String]",_="[object Symbol]",w="[object WeakMap]",S="[object ArrayBuffer]",E="[object DataView]",M="[object Float32Array]",T="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",A="[object Uint8Array]",O="[object Uint16Array]",L="[object Uint32Array]",I=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,B=RegExp(D.source),F=RegExp(z.source),j=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,$=RegExp(q.source),Q=/^\s+|\s+$/g,Y=/^\s+/,X=/\s+$/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,K=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,rt=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,ht=/['\n\r\u2028\u2029\\]/g,ft="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="[\\ud800-\\udfff]",mt="["+dt+"]",vt="["+ft+"]",gt="\\d+",yt="[\\u2700-\\u27bf]",bt="[a-z\\xdf-\\xf6\\xf8-\\xff]",xt="[^\\ud800-\\udfff"+dt+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_t="\\ud83c[\\udffb-\\udfff]",wt="[^\\ud800-\\udfff]",St="(?:\\ud83c[\\udde6-\\uddff]){2}",Et="[\\ud800-\\udbff][\\udc00-\\udfff]",Mt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Tt="(?:"+bt+"|"+xt+")",Ct="(?:"+Mt+"|"+xt+")",kt="(?:"+vt+"|"+_t+")"+"?",Pt="[\\ufe0e\\ufe0f]?"+kt+("(?:\\u200d(?:"+[wt,St,Et].join("|")+")[\\ufe0e\\ufe0f]?"+kt+")*"),At="(?:"+[yt,St,Et].join("|")+")"+Pt,Ot="(?:"+[wt+vt+"?",vt,St,Et,pt].join("|")+")",Lt=RegExp("[']","g"),It=RegExp(vt,"g"),Nt=RegExp(_t+"(?="+_t+")|"+Ot+Pt,"g"),Rt=RegExp([Mt+"?"+bt+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[mt,Mt,"$"].join("|")+")",Ct+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[mt,Mt+Tt,"$"].join("|")+")",Mt+"?"+Tt+"+(?:['](?:d|ll|m|re|s|t|ve))?",Mt+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,At].join("|"),"g"),Dt=RegExp("[\\u200d\\ud800-\\udfff"+ft+"\\ufe0e\\ufe0f]"),zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ft=-1,jt={};jt[M]=jt[T]=jt[C]=jt[k]=jt[P]=jt[A]=jt["[object Uint8ClampedArray]"]=jt[O]=jt[L]=!0,jt[l]=jt[u]=jt[S]=jt[c]=jt[E]=jt[h]=jt[f]=jt[d]=jt[m]=jt[v]=jt[g]=jt[y]=jt[b]=jt[x]=jt[w]=!1;var Vt={};Vt[l]=Vt[u]=Vt[S]=Vt[E]=Vt[c]=Vt[h]=Vt[M]=Vt[T]=Vt[C]=Vt[k]=Vt[P]=Vt[m]=Vt[v]=Vt[g]=Vt[y]=Vt[b]=Vt[x]=Vt[_]=Vt[A]=Vt["[object Uint8ClampedArray]"]=Vt[O]=Vt[L]=!0,Vt[f]=Vt[d]=Vt[w]=!1;var Ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,Gt=parseInt,Wt="object"==typeof t&&t&&t.Object===Object&&t,qt="object"==typeof self&&self&&self.Object===Object&&self,$t=Wt||qt||Function("return this")(),Qt=e&&!e.nodeType&&e,Yt=Qt&&"object"==typeof i&&i&&!i.nodeType&&i,Xt=Yt&&Yt.exports===Qt,Zt=Xt&&Wt.process,Jt=function(){try{var t=Yt&&Yt.require&&Yt.require("util").types;return t||Zt&&Zt.binding&&Zt.binding("util")}catch(t){}}(),Kt=Jt&&Jt.isArrayBuffer,te=Jt&&Jt.isDate,ee=Jt&&Jt.isMap,ne=Jt&&Jt.isRegExp,ie=Jt&&Jt.isSet,re=Jt&&Jt.isTypedArray;function ae(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function oe(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function se(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function le(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ue(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ce(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function he(t,e){return!!(null==t?0:t.length)&&_e(t,e,0)>-1}function fe(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function de(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function pe(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function me(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function ve(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function ge(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ye=Me("length");function be(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function xe(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function _e(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):xe(t,Se,n)}function we(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function Se(t){return t!=t}function Ee(t,e){var n=null==t?0:t.length;return n?ke(t,e)/n:NaN}function Me(t){return function(e){return null==e?void 0:e[t]}}function Te(t){return function(e){return null==t?void 0:t[e]}}function Ce(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function ke(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);void 0!==a&&(n=void 0===n?a:n+a)}return n}function Pe(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ae(t){return function(e){return t(e)}}function Oe(t,e){return de(e,(function(e){return t[e]}))}function Le(t,e){return t.has(e)}function Ie(t,e){for(var n=-1,i=t.length;++n<i&&_e(e,t[n],0)>-1;);return n}function Ne(t,e){for(var n=t.length;n--&&_e(e,t[n],0)>-1;);return n}function Re(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var De=Te({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),ze=Te({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Be(t){return"\\"+Ut[t]}function Fe(t){return Dt.test(t)}function je(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function Ve(t,e){return function(n){return t(e(n))}}function Ue(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var s=t[n];s!==e&&s!==o||(t[n]=o,a[r++]=n)}return a}function He(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Ge(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function We(t){return Fe(t)?function(t){var e=Nt.lastIndex=0;for(;Nt.test(t);)++e;return e}(t):ye(t)}function qe(t){return Fe(t)?function(t){return t.match(Nt)||[]}(t):function(t){return t.split("")}(t)}var $e=Te({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Qe=function t(e){var n,i=(e=null==e?$t:Qe.defaults($t.Object(),e,Qe.pick($t,Bt))).Array,r=e.Date,ft=e.Error,dt=e.Function,pt=e.Math,mt=e.Object,vt=e.RegExp,gt=e.String,yt=e.TypeError,bt=i.prototype,xt=dt.prototype,_t=mt.prototype,wt=e["__core-js_shared__"],St=xt.toString,Et=_t.hasOwnProperty,Mt=0,Tt=(n=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ct=_t.toString,kt=St.call(mt),Pt=$t._,At=vt("^"+St.call(Et).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ot=Xt?e.Buffer:void 0,Nt=e.Symbol,Dt=e.Uint8Array,Ut=Ot?Ot.allocUnsafe:void 0,Wt=Ve(mt.getPrototypeOf,mt),qt=mt.create,Qt=_t.propertyIsEnumerable,Yt=bt.splice,Zt=Nt?Nt.isConcatSpreadable:void 0,Jt=Nt?Nt.iterator:void 0,ye=Nt?Nt.toStringTag:void 0,Te=function(){try{var t=Kr(mt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ye=e.clearTimeout!==$t.clearTimeout&&e.clearTimeout,Xe=r&&r.now!==$t.Date.now&&r.now,Ze=e.setTimeout!==$t.setTimeout&&e.setTimeout,Je=pt.ceil,Ke=pt.floor,tn=mt.getOwnPropertySymbols,en=Ot?Ot.isBuffer:void 0,nn=e.isFinite,rn=bt.join,an=Ve(mt.keys,mt),on=pt.max,sn=pt.min,ln=r.now,un=e.parseInt,cn=pt.random,hn=bt.reverse,fn=Kr(e,"DataView"),dn=Kr(e,"Map"),pn=Kr(e,"Promise"),mn=Kr(e,"Set"),vn=Kr(e,"WeakMap"),gn=Kr(mt,"create"),yn=vn&&new vn,bn={},xn=Ta(fn),_n=Ta(dn),wn=Ta(pn),Sn=Ta(mn),En=Ta(vn),Mn=Nt?Nt.prototype:void 0,Tn=Mn?Mn.valueOf:void 0,Cn=Mn?Mn.toString:void 0;function kn(t){if(Go(t)&&!Io(t)&&!(t instanceof Ln)){if(t instanceof On)return t;if(Et.call(t,"__wrapped__"))return Ca(t)}return new On(t)}var Pn=function(){function t(){}return function(e){if(!Ho(e))return{};if(qt)return qt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function An(){}function On(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Ln(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function In(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Dn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Rn;++e<n;)this.add(t[e])}function zn(t){var e=this.__data__=new Nn(t);this.size=e.size}function Bn(t,e){var n=Io(t),i=!n&&Lo(t),r=!n&&!i&&zo(t),a=!n&&!i&&!r&&Jo(t),o=n||i||r||a,s=o?Pe(t.length,gt):[],l=s.length;for(var u in t)!e&&!Et.call(t,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||oa(u,l))||s.push(u);return s}function Fn(t){var e=t.length;return e?t[Di(0,e-1)]:void 0}function jn(t,e){return Sa(gr(t),Yn(e,0,t.length))}function Vn(t){return Sa(gr(t))}function Un(t,e,n){(void 0===n||Po(t[e],n))&&(void 0!==n||e in t)||$n(t,e,n)}function Hn(t,e,n){var i=t[e];Et.call(t,e)&&Po(i,n)&&(void 0!==n||e in t)||$n(t,e,n)}function Gn(t,e){for(var n=t.length;n--;)if(Po(t[n][0],e))return n;return-1}function Wn(t,e,n,i){return ti(t,(function(t,r,a){e(i,t,n(t),a)})),i}function qn(t,e){return t&&yr(e,xs(e),t)}function $n(t,e,n){"__proto__"==e&&Te?Te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Qn(t,e){for(var n=-1,r=e.length,a=i(r),o=null==t;++n<r;)a[n]=o?void 0:ms(t,e[n]);return a}function Yn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Xn(t,e,n,i,r,a){var o,s=1&e,u=2&e,f=4&e;if(n&&(o=r?n(t,i,r,a):n(t)),void 0!==o)return o;if(!Ho(t))return t;var w=Io(t);if(w){if(o=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!s)return gr(t,o)}else{var I=na(t),N=I==d||I==p;if(zo(t))return hr(t,s);if(I==g||I==l||N&&!r){if(o=u||N?{}:ra(t),!s)return u?function(t,e){return yr(t,ea(t),e)}(t,function(t,e){return t&&yr(e,_s(e),t)}(o,t)):function(t,e){return yr(t,ta(t),e)}(t,qn(o,t))}else{if(!Vt[I])return r?t:{};o=function(t,e,n){var i=t.constructor;switch(e){case S:return fr(t);case c:case h:return new i(+t);case E:return function(t,e){var n=e?fr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case T:case C:case k:case P:case A:case"[object Uint8ClampedArray]":case O:case L:return dr(t,n);case m:return new i;case v:case x:return new i(t);case y:return function(t){var e=new t.constructor(t.source,it.exec(t));return e.lastIndex=t.lastIndex,e}(t);case b:return new i;case _:return r=t,Tn?mt(Tn.call(r)):{}}var r}(t,I,s)}}a||(a=new zn);var R=a.get(t);if(R)return R;a.set(t,o),Yo(t)?t.forEach((function(i){o.add(Xn(i,e,n,i,t,a))})):Wo(t)&&t.forEach((function(i,r){o.set(r,Xn(i,e,n,r,t,a))}));var D=w?void 0:(f?u?qr:Wr:u?_s:xs)(t);return se(D||t,(function(i,r){D&&(i=t[r=i]),Hn(o,r,Xn(i,e,n,r,t,a))})),o}function Zn(t,e,n){var i=n.length;if(null==t)return!i;for(t=mt(t);i--;){var r=n[i],a=e[r],o=t[r];if(void 0===o&&!(r in t)||!a(o))return!1}return!0}function Jn(t,e,n){if("function"!=typeof t)throw new yt(a);return ba((function(){t.apply(void 0,n)}),e)}function Kn(t,e,n,i){var r=-1,a=he,o=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=de(e,Ae(n))),i?(a=fe,o=!1):e.length>=200&&(a=Le,o=!1,e=new Dn(e));t:for(;++r<s;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,o&&h==h){for(var f=u;f--;)if(e[f]===h)continue t;l.push(c)}else a(e,h,i)||l.push(c)}return l}kn.templateSettings={escape:j,evaluate:V,interpolate:U,variable:"",imports:{_:kn}},kn.prototype=An.prototype,kn.prototype.constructor=kn,On.prototype=Pn(An.prototype),On.prototype.constructor=On,Ln.prototype=Pn(An.prototype),Ln.prototype.constructor=Ln,In.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},In.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},In.prototype.get=function(t){var e=this.__data__;if(gn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},In.prototype.has=function(t){var e=this.__data__;return gn?void 0!==e[t]:Et.call(e,t)},In.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gn&&void 0===e?"__lodash_hash_undefined__":e,this},Nn.prototype.clear=function(){this.__data__=[],this.size=0},Nn.prototype.delete=function(t){var e=this.__data__,n=Gn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Yt.call(e,n,1),--this.size,!0)},Nn.prototype.get=function(t){var e=this.__data__,n=Gn(e,t);return n<0?void 0:e[n][1]},Nn.prototype.has=function(t){return Gn(this.__data__,t)>-1},Nn.prototype.set=function(t,e){var n=this.__data__,i=Gn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Rn.prototype.clear=function(){this.size=0,this.__data__={hash:new In,map:new(dn||Nn),string:new In}},Rn.prototype.delete=function(t){var e=Zr(this,t).delete(t);return this.size-=e?1:0,e},Rn.prototype.get=function(t){return Zr(this,t).get(t)},Rn.prototype.has=function(t){return Zr(this,t).has(t)},Rn.prototype.set=function(t,e){var n=Zr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Dn.prototype.add=Dn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Dn.prototype.has=function(t){return this.__data__.has(t)},zn.prototype.clear=function(){this.__data__=new Nn,this.size=0},zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},zn.prototype.get=function(t){return this.__data__.get(t)},zn.prototype.has=function(t){return this.__data__.has(t)},zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Nn){var i=n.__data__;if(!dn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Rn(i)}return n.set(t,e),this.size=n.size,this};var ti=_r(li),ei=_r(ui,!0);function ni(t,e){var n=!0;return ti(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function ii(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],o=e(a);if(null!=o&&(void 0===s?o==o&&!Zo(o):n(o,s)))var s=o,l=a}return l}function ri(t,e){var n=[];return ti(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function ai(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=aa),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?ai(s,e-1,n,i,r):pe(r,s):i||(r[r.length]=s)}return r}var oi=wr(),si=wr(!0);function li(t,e){return t&&oi(t,e,xs)}function ui(t,e){return t&&si(t,e,xs)}function ci(t,e){return ce(e,(function(e){return jo(t[e])}))}function hi(t,e){for(var n=0,i=(e=sr(e,t)).length;null!=t&&n<i;)t=t[Ma(e[n++])];return n&&n==i?t:void 0}function fi(t,e,n){var i=e(t);return Io(t)?i:pe(i,n(t))}function di(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ye&&ye in mt(t)?function(t){var e=Et.call(t,ye),n=t[ye];try{t[ye]=void 0;var i=!0}catch(t){}var r=Ct.call(t);i&&(e?t[ye]=n:delete t[ye]);return r}(t):function(t){return Ct.call(t)}(t)}function pi(t,e){return t>e}function mi(t,e){return null!=t&&Et.call(t,e)}function vi(t,e){return null!=t&&e in mt(t)}function gi(t,e,n){for(var r=n?fe:he,a=t[0].length,o=t.length,s=o,l=i(o),u=1/0,c=[];s--;){var h=t[s];s&&e&&(h=de(h,Ae(e))),u=sn(h.length,u),l[s]=!n&&(e||a>=120&&h.length>=120)?new Dn(s&&h):void 0}h=t[0];var f=-1,d=l[0];t:for(;++f<a&&c.length<u;){var p=h[f],m=e?e(p):p;if(p=n||0!==p?p:0,!(d?Le(d,m):r(c,m,n))){for(s=o;--s;){var v=l[s];if(!(v?Le(v,m):r(t[s],m,n)))continue t}d&&d.push(m),c.push(p)}}return c}function yi(t,e,n){var i=null==(t=ma(t,e=sr(e,t)))?t:t[Ma(Ba(e))];return null==i?void 0:ae(i,t,n)}function bi(t){return Go(t)&&di(t)==l}function xi(t,e,n,i,r){return t===e||(null==t||null==e||!Go(t)&&!Go(e)?t!=t&&e!=e:function(t,e,n,i,r,a){var o=Io(t),s=Io(e),d=o?u:na(t),p=s?u:na(e),w=(d=d==l?g:d)==g,M=(p=p==l?g:p)==g,T=d==p;if(T&&zo(t)){if(!zo(e))return!1;o=!0,w=!1}if(T&&!w)return a||(a=new zn),o||Jo(t)?Hr(t,e,n,i,r,a):function(t,e,n,i,r,a,o){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S:return!(t.byteLength!=e.byteLength||!a(new Dt(t),new Dt(e)));case c:case h:case v:return Po(+t,+e);case f:return t.name==e.name&&t.message==e.message;case y:case x:return t==e+"";case m:var s=je;case b:var l=1&i;if(s||(s=He),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;i|=2,o.set(t,e);var d=Hr(s(t),s(e),i,r,a,o);return o.delete(t),d;case _:if(Tn)return Tn.call(t)==Tn.call(e)}return!1}(t,e,d,n,i,r,a);if(!(1&n)){var C=w&&Et.call(t,"__wrapped__"),k=M&&Et.call(e,"__wrapped__");if(C||k){var P=C?t.value():t,A=k?e.value():e;return a||(a=new zn),r(P,A,n,i,a)}}if(!T)return!1;return a||(a=new zn),function(t,e,n,i,r,a){var o=1&n,s=Wr(t),l=s.length,u=Wr(e).length;if(l!=u&&!o)return!1;var c=l;for(;c--;){var h=s[c];if(!(o?h in e:Et.call(e,h)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var d=!0;a.set(t,e),a.set(e,t);var p=o;for(;++c<l;){h=s[c];var m=t[h],v=e[h];if(i)var g=o?i(v,m,h,e,t,a):i(m,v,h,t,e,a);if(!(void 0===g?m===v||r(m,v,n,i,a):g)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,i,r,a)}(t,e,n,i,xi,r))}function _i(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=mt(t);r--;){var s=n[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<a;){var l=(s=n[r])[0],u=t[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in t))return!1}else{var h=new zn;if(i)var f=i(u,c,l,t,e,h);if(!(void 0===f?xi(c,u,3,i,h):f))return!1}}return!0}function wi(t){return!(!Ho(t)||(e=t,Tt&&Tt in e))&&(jo(t)?At:ot).test(Ta(t));var e}function Si(t){return"function"==typeof t?t:null==t?qs:"object"==typeof t?Io(t)?Pi(t[0],t[1]):ki(t):el(t)}function Ei(t){if(!ha(t))return an(t);var e=[];for(var n in mt(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Mi(t){if(!Ho(t))return function(t){var e=[];if(null!=t)for(var n in mt(t))e.push(n);return e}(t);var e=ha(t),n=[];for(var i in t)("constructor"!=i||!e&&Et.call(t,i))&&n.push(i);return n}function Ti(t,e){return t<e}function Ci(t,e){var n=-1,r=Ro(t)?i(t.length):[];return ti(t,(function(t,i,a){r[++n]=e(t,i,a)})),r}function ki(t){var e=Jr(t);return 1==e.length&&e[0][2]?da(e[0][0],e[0][1]):function(n){return n===t||_i(n,t,e)}}function Pi(t,e){return la(t)&&fa(e)?da(Ma(t),e):function(n){var i=ms(n,t);return void 0===i&&i===e?vs(n,t):xi(e,i,3)}}function Ai(t,e,n,i,r){t!==e&&oi(e,(function(a,o){if(r||(r=new zn),Ho(a))!function(t,e,n,i,r,a,o){var s=ga(t,n),l=ga(e,n),u=o.get(l);if(u)return void Un(t,n,u);var c=a?a(s,l,n+"",t,e,o):void 0,h=void 0===c;if(h){var f=Io(l),d=!f&&zo(l),p=!f&&!d&&Jo(l);c=l,f||d||p?Io(s)?c=s:Do(s)?c=gr(s):d?(h=!1,c=hr(l,!0)):p?(h=!1,c=dr(l,!0)):c=[]:$o(l)||Lo(l)?(c=s,Lo(s)?c=os(s):Ho(s)&&!jo(s)||(c=ra(l))):h=!1}h&&(o.set(l,c),r(c,l,i,a,o),o.delete(l));Un(t,n,c)}(t,e,o,n,Ai,i,r);else{var s=i?i(ga(t,o),a,o+"",t,e,r):void 0;void 0===s&&(s=a),Un(t,o,s)}}),_s)}function Oi(t,e){var n=t.length;if(n)return oa(e+=e<0?n:0,n)?t[e]:void 0}function Li(t,e,n){var i=-1;return e=de(e.length?e:[qs],Ae(Xr())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ci(t,(function(t,n,r){return{criteria:de(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,n){var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;for(;++i<o;){var l=pr(r[i],a[i]);if(l){if(i>=s)return l;var u=n[i];return l*("desc"==u?-1:1)}}return t.index-e.index}(t,e,n)}))}function Ii(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=hi(t,o);n(s,o)&&Vi(a,sr(o,t),s)}return a}function Ni(t,e,n,i){var r=i?we:_e,a=-1,o=e.length,s=t;for(t===e&&(e=gr(e)),n&&(s=de(t,Ae(n)));++a<o;)for(var l=0,u=e[a],c=n?n(u):u;(l=r(s,c,l,i))>-1;)s!==t&&Yt.call(s,l,1),Yt.call(t,l,1);return t}function Ri(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;oa(r)?Yt.call(t,r,1):Ki(t,r)}}return t}function Di(t,e){return t+Ke(cn()*(e-t+1))}function zi(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Ke(e/2))&&(t+=t)}while(e);return n}function Bi(t,e){return xa(pa(t,e,qs),t+"")}function Fi(t){return Fn(Ps(t))}function ji(t,e){var n=Ps(t);return Sa(n,Yn(e,0,n.length))}function Vi(t,e,n,i){if(!Ho(t))return t;for(var r=-1,a=(e=sr(e,t)).length,o=a-1,s=t;null!=s&&++r<a;){var l=Ma(e[r]),u=n;if(r!=o){var c=s[l];void 0===(u=i?i(c,l,s):void 0)&&(u=Ho(c)?c:oa(e[r+1])?[]:{})}Hn(s,l,u),s=s[l]}return t}var Ui=yn?function(t,e){return yn.set(t,e),t}:qs,Hi=Te?function(t,e){return Te(t,"toString",{configurable:!0,enumerable:!1,value:Hs(e),writable:!0})}:qs;function Gi(t){return Sa(Ps(t))}function Wi(t,e,n){var r=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var o=i(a);++r<a;)o[r]=t[r+e];return o}function qi(t,e){var n;return ti(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function $i(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!Zo(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return Qi(t,e,qs,n)}function Qi(t,e,n,i){e=n(e);for(var r=0,a=null==t?0:t.length,o=e!=e,s=null===e,l=Zo(e),u=void 0===e;r<a;){var c=Ke((r+a)/2),h=n(t[c]),f=void 0!==h,d=null===h,p=h==h,m=Zo(h);if(o)var v=i||p;else v=u?p&&(i||f):s?p&&f&&(i||!d):l?p&&f&&!d&&(i||!m):!d&&!m&&(i?h<=e:h<e);v?r=c+1:a=c}return sn(a,4294967294)}function Yi(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!Po(s,l)){var l=s;a[r++]=0===o?0:o}}return a}function Xi(t){return"number"==typeof t?t:Zo(t)?NaN:+t}function Zi(t){if("string"==typeof t)return t;if(Io(t))return de(t,Zi)+"";if(Zo(t))return Cn?Cn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ji(t,e,n){var i=-1,r=he,a=t.length,o=!0,s=[],l=s;if(n)o=!1,r=fe;else if(a>=200){var u=e?null:zr(t);if(u)return He(u);o=!1,r=Le,l=new Dn}else l=e?[]:s;t:for(;++i<a;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,o&&h==h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),s.push(c)}else r(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function Ki(t,e){return null==(t=ma(t,e=sr(e,t)))||delete t[Ma(Ba(e))]}function tr(t,e,n,i){return Vi(t,e,n(hi(t,e)),i)}function er(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?Wi(t,i?0:a,i?a+1:r):Wi(t,i?a+1:0,i?r:a)}function nr(t,e){var n=t;return n instanceof Ln&&(n=n.value()),me(e,(function(t,e){return e.func.apply(e.thisArg,pe([t],e.args))}),n)}function ir(t,e,n){var r=t.length;if(r<2)return r?Ji(t[0]):[];for(var a=-1,o=i(r);++a<r;)for(var s=t[a],l=-1;++l<r;)l!=a&&(o[a]=Kn(o[a]||s,t[l],e,n));return Ji(ai(o,1),e,n)}function rr(t,e,n){for(var i=-1,r=t.length,a=e.length,o={};++i<r;){var s=i<a?e[i]:void 0;n(o,t[i],s)}return o}function ar(t){return Do(t)?t:[]}function or(t){return"function"==typeof t?t:qs}function sr(t,e){return Io(t)?t:la(t,e)?[t]:Ea(ss(t))}var lr=Bi;function ur(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:Wi(t,e,n)}var cr=Ye||function(t){return $t.clearTimeout(t)};function hr(t,e){if(e)return t.slice();var n=t.length,i=Ut?Ut(n):new t.constructor(n);return t.copy(i),i}function fr(t){var e=new t.constructor(t.byteLength);return new Dt(e).set(new Dt(t)),e}function dr(t,e){var n=e?fr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pr(t,e){if(t!==e){var n=void 0!==t,i=null===t,r=t==t,a=Zo(t),o=void 0!==e,s=null===e,l=e==e,u=Zo(e);if(!s&&!u&&!a&&t>e||a&&o&&l&&!s&&!u||i&&o&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&t<e||u&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!l)return-1}return 0}function mr(t,e,n,r){for(var a=-1,o=t.length,s=n.length,l=-1,u=e.length,c=on(o-s,0),h=i(u+c),f=!r;++l<u;)h[l]=e[l];for(;++a<s;)(f||a<o)&&(h[n[a]]=t[a]);for(;c--;)h[l++]=t[a++];return h}function vr(t,e,n,r){for(var a=-1,o=t.length,s=-1,l=n.length,u=-1,c=e.length,h=on(o-l,0),f=i(h+c),d=!r;++a<h;)f[a]=t[a];for(var p=a;++u<c;)f[p+u]=e[u];for(;++s<l;)(d||a<o)&&(f[p+n[s]]=t[a++]);return f}function gr(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function yr(t,e,n,i){var r=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),r?$n(n,s,l):Hn(n,s,l)}return n}function br(t,e){return function(n,i){var r=Io(n)?oe:Wn,a=e?e():{};return r(n,t,Xr(i,2),a)}}function xr(t){return Bi((function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(r--,a):void 0,o&&sa(n[0],n[1],o)&&(a=r<3?void 0:a,r=1),e=mt(e);++i<r;){var s=n[i];s&&t(e,s,i,a)}return e}))}function _r(t,e){return function(n,i){if(null==n)return n;if(!Ro(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=mt(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function wr(t){return function(e,n,i){for(var r=-1,a=mt(e),o=i(e),s=o.length;s--;){var l=o[t?s:++r];if(!1===n(a[l],l,a))break}return e}}function Sr(t){return function(e){var n=Fe(e=ss(e))?qe(e):void 0,i=n?n[0]:e.charAt(0),r=n?ur(n,1).join(""):e.slice(1);return i[t]()+r}}function Er(t){return function(e){return me(js(Ls(e).replace(Lt,"")),t,"")}}function Mr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Pn(t.prototype),i=t.apply(n,e);return Ho(i)?i:n}}function Tr(t){return function(e,n,i){var r=mt(e);if(!Ro(e)){var a=Xr(n,3);e=xs(e),n=function(t){return a(r[t],t,r)}}var o=t(e,n,i);return o>-1?r[a?e[o]:o]:void 0}}function Cr(t){return Gr((function(e){var n=e.length,i=n,r=On.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new yt(a);if(r&&!s&&"wrapper"==Qr(o))var s=new On([],!0)}for(i=s?i:n;++i<n;){var l=Qr(o=e[i]),u="wrapper"==l?$r(o):void 0;s=u&&ua(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?s[Qr(u[0])].apply(s,u[3]):1==o.length&&ua(o)?s[l]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&Io(i))return s.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}}))}function kr(t,e,n,r,a,o,s,l,u,c){var h=128&e,f=1&e,d=2&e,p=24&e,m=512&e,v=d?void 0:Mr(t);return function g(){for(var y=arguments.length,b=i(y),x=y;x--;)b[x]=arguments[x];if(p)var _=Yr(g),w=Re(b,_);if(r&&(b=mr(b,r,a,p)),o&&(b=vr(b,o,s,p)),y-=w,p&&y<c){var S=Ue(b,_);return Rr(t,e,kr,g.placeholder,n,b,S,l,u,c-y)}var E=f?n:this,M=d?E[t]:t;return y=b.length,l?b=va(b,l):m&&y>1&&b.reverse(),h&&u<y&&(b.length=u),this&&this!==$t&&this instanceof g&&(M=v||Mr(M)),M.apply(E,b)}}function Pr(t,e){return function(n,i){return function(t,e,n,i){return li(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function Ar(t,e){return function(n,i){var r;if(void 0===n&&void 0===i)return e;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;"string"==typeof n||"string"==typeof i?(n=Zi(n),i=Zi(i)):(n=Xi(n),i=Xi(i)),r=t(n,i)}return r}}function Or(t){return Gr((function(e){return e=de(e,Ae(Xr())),Bi((function(n){var i=this;return t(e,(function(t){return ae(t,i,n)}))}))}))}function Lr(t,e){var n=(e=void 0===e?" ":Zi(e)).length;if(n<2)return n?zi(e,t):e;var i=zi(e,Je(t/We(e)));return Fe(e)?ur(qe(i),0,t).join(""):i.slice(0,t)}function Ir(t){return function(e,n,r){return r&&"number"!=typeof r&&sa(e,n,r)&&(n=r=void 0),e=ns(e),void 0===n?(n=e,e=0):n=ns(n),function(t,e,n,r){for(var a=-1,o=on(Je((e-t)/(n||1)),0),s=i(o);o--;)s[r?o:++a]=t,t+=n;return s}(e,n,r=void 0===r?e<n?1:-1:ns(r),t)}}function Nr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=as(e),n=as(n)),t(e,n)}}function Rr(t,e,n,i,r,a,o,s,l,u){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,r,c?a:void 0,c?o:void 0,c?void 0:a,c?void 0:o,s,l,u],f=n.apply(void 0,h);return ua(t)&&ya(f,h),f.placeholder=i,_a(f,t,e)}function Dr(t){var e=pt[t];return function(t,n){if(t=as(t),(n=null==n?0:sn(is(n),292))&&nn(t)){var i=(ss(t)+"e").split("e");return+((i=(ss(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var zr=mn&&1/He(new mn([,-0]))[1]==1/0?function(t){return new mn(t)}:Zs;function Br(t){return function(e){var n=na(e);return n==m?je(e):n==b?Ge(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Fr(t,e,n,r,s,l,u,c){var h=2&e;if(!h&&"function"!=typeof t)throw new yt(a);var f=r?r.length:0;if(f||(e&=-97,r=s=void 0),u=void 0===u?u:on(is(u),0),c=void 0===c?c:is(c),f-=s?s.length:0,64&e){var d=r,p=s;r=s=void 0}var m=h?void 0:$r(t),v=[t,e,n,r,s,d,p,l,u,c];if(m&&function(t,e){var n=t[1],i=e[1],r=n|i,a=r<131,s=128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!a&&!s)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?mr(u,l,e[4]):l,t[4]=u?Ue(t[3],o):e[4]}(l=e[5])&&(u=t[5],t[5]=u?vr(u,l,e[6]):l,t[6]=u?Ue(t[5],o):e[6]);(l=e[7])&&(t[7]=l);128&i&&(t[8]=null==t[8]?e[8]:sn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(v,m),t=v[0],e=v[1],n=v[2],r=v[3],s=v[4],!(c=v[9]=void 0===v[9]?h?0:t.length:on(v[9]-f,0))&&24&e&&(e&=-25),e&&1!=e)g=8==e||16==e?function(t,e,n){var r=Mr(t);return function a(){for(var o=arguments.length,s=i(o),l=o,u=Yr(a);l--;)s[l]=arguments[l];var c=o<3&&s[0]!==u&&s[o-1]!==u?[]:Ue(s,u);if((o-=c.length)<n)return Rr(t,e,kr,a.placeholder,void 0,s,c,void 0,void 0,n-o);var h=this&&this!==$t&&this instanceof a?r:t;return ae(h,this,s)}}(t,e,c):32!=e&&33!=e||s.length?kr.apply(void 0,v):function(t,e,n,r){var a=1&e,o=Mr(t);return function e(){for(var s=-1,l=arguments.length,u=-1,c=r.length,h=i(c+l),f=this&&this!==$t&&this instanceof e?o:t;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++s];return ae(f,a?n:this,h)}}(t,e,n,r);else var g=function(t,e,n){var i=1&e,r=Mr(t);return function e(){var a=this&&this!==$t&&this instanceof e?r:t;return a.apply(i?n:this,arguments)}}(t,e,n);return _a((m?Ui:ya)(g,v),t,e)}function jr(t,e,n,i){return void 0===t||Po(t,_t[n])&&!Et.call(i,n)?e:t}function Vr(t,e,n,i,r,a){return Ho(t)&&Ho(e)&&(a.set(e,t),Ai(t,e,void 0,Vr,a),a.delete(e)),t}function Ur(t){return $o(t)?void 0:t}function Hr(t,e,n,i,r,a){var o=1&n,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var c=-1,h=!0,f=2&n?new Dn:void 0;for(a.set(t,e),a.set(e,t);++c<s;){var d=t[c],p=e[c];if(i)var m=o?i(p,d,c,e,t,a):i(d,p,c,t,e,a);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!ge(e,(function(t,e){if(!Le(f,e)&&(d===t||r(d,t,n,i,a)))return f.push(e)}))){h=!1;break}}else if(d!==p&&!r(d,p,n,i,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Gr(t){return xa(pa(t,void 0,Ia),t+"")}function Wr(t){return fi(t,xs,ta)}function qr(t){return fi(t,_s,ea)}var $r=yn?function(t){return yn.get(t)}:Zs;function Qr(t){for(var e=t.name+"",n=bn[e],i=Et.call(bn,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function Yr(t){return(Et.call(kn,"placeholder")?kn:t).placeholder}function Xr(){var t=kn.iteratee||$s;return t=t===$s?Si:t,arguments.length?t(arguments[0],arguments[1]):t}function Zr(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Jr(t){for(var e=xs(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,fa(r)]}return e}function Kr(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return wi(n)?n:void 0}var ta=tn?function(t){return null==t?[]:(t=mt(t),ce(tn(t),(function(e){return Qt.call(t,e)})))}:rl,ea=tn?function(t){for(var e=[];t;)pe(e,ta(t)),t=Wt(t);return e}:rl,na=di;function ia(t,e,n){for(var i=-1,r=(e=sr(e,t)).length,a=!1;++i<r;){var o=Ma(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&Uo(r)&&oa(o,r)&&(Io(t)||Lo(t))}function ra(t){return"function"!=typeof t.constructor||ha(t)?{}:Pn(Wt(t))}function aa(t){return Io(t)||Lo(t)||!!(Zt&&t&&t[Zt])}function oa(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&lt.test(t))&&t>-1&&t%1==0&&t<e}function sa(t,e,n){if(!Ho(n))return!1;var i=typeof e;return!!("number"==i?Ro(n)&&oa(e,n.length):"string"==i&&e in n)&&Po(n[e],t)}function la(t,e){if(Io(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Zo(t))||(G.test(t)||!H.test(t)||null!=e&&t in mt(e))}function ua(t){var e=Qr(t),n=kn[e];if("function"!=typeof n||!(e in Ln.prototype))return!1;if(t===n)return!0;var i=$r(n);return!!i&&t===i[0]}(fn&&na(new fn(new ArrayBuffer(1)))!=E||dn&&na(new dn)!=m||pn&&"[object Promise]"!=na(pn.resolve())||mn&&na(new mn)!=b||vn&&na(new vn)!=w)&&(na=function(t){var e=di(t),n=e==g?t.constructor:void 0,i=n?Ta(n):"";if(i)switch(i){case xn:return E;case _n:return m;case wn:return"[object Promise]";case Sn:return b;case En:return w}return e});var ca=wt?jo:al;function ha(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_t)}function fa(t){return t==t&&!Ho(t)}function da(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in mt(n)))}}function pa(t,e,n){return e=on(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=on(r.length-e,0),s=i(o);++a<o;)s[a]=r[e+a];a=-1;for(var l=i(e+1);++a<e;)l[a]=r[a];return l[e]=n(s),ae(t,this,l)}}function ma(t,e){return e.length<2?t:hi(t,Wi(e,0,-1))}function va(t,e){for(var n=t.length,i=sn(e.length,n),r=gr(t);i--;){var a=e[i];t[i]=oa(a,n)?r[a]:void 0}return t}function ga(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ya=wa(Ui),ba=Ze||function(t,e){return $t.setTimeout(t,e)},xa=wa(Hi);function _a(t,e,n){var i=e+"";return xa(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Z,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return se(s,(function(n){var i="_."+n[0];e&n[1]&&!he(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(J);return e?e[1].split(K):[]}(i),n)))}function wa(t){var e=0,n=0;return function(){var i=ln(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Sa(t,e){var n=-1,i=t.length,r=i-1;for(e=void 0===e?i:e;++n<e;){var a=Di(n,r),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}var Ea=function(t){var e=So(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(W,(function(t,n,i,r){e.push(i?r.replace(et,"$1"):n||t)})),e}));function Ma(t){if("string"==typeof t||Zo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ta(t){if(null!=t){try{return St.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ca(t){if(t instanceof Ln)return t.clone();var e=new On(t.__wrapped__,t.__chain__);return e.__actions__=gr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ka=Bi((function(t,e){return Do(t)?Kn(t,ai(e,1,Do,!0)):[]})),Pa=Bi((function(t,e){var n=Ba(e);return Do(n)&&(n=void 0),Do(t)?Kn(t,ai(e,1,Do,!0),Xr(n,2)):[]})),Aa=Bi((function(t,e){var n=Ba(e);return Do(n)&&(n=void 0),Do(t)?Kn(t,ai(e,1,Do,!0),void 0,n):[]}));function Oa(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:is(n);return r<0&&(r=on(i+r,0)),xe(t,Xr(e,3),r)}function La(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=is(n),r=n<0?on(i+r,0):sn(r,i-1)),xe(t,Xr(e,3),r,!0)}function Ia(t){return(null==t?0:t.length)?ai(t,1):[]}function Na(t){return t&&t.length?t[0]:void 0}var Ra=Bi((function(t){var e=de(t,ar);return e.length&&e[0]===t[0]?gi(e):[]})),Da=Bi((function(t){var e=Ba(t),n=de(t,ar);return e===Ba(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?gi(n,Xr(e,2)):[]})),za=Bi((function(t){var e=Ba(t),n=de(t,ar);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?gi(n,void 0,e):[]}));function Ba(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Fa=Bi(ja);function ja(t,e){return t&&t.length&&e&&e.length?Ni(t,e):t}var Va=Gr((function(t,e){var n=null==t?0:t.length,i=Qn(t,e);return Ri(t,de(e,(function(t){return oa(t,n)?+t:t})).sort(pr)),i}));function Ua(t){return null==t?t:hn.call(t)}var Ha=Bi((function(t){return Ji(ai(t,1,Do,!0))})),Ga=Bi((function(t){var e=Ba(t);return Do(e)&&(e=void 0),Ji(ai(t,1,Do,!0),Xr(e,2))})),Wa=Bi((function(t){var e=Ba(t);return e="function"==typeof e?e:void 0,Ji(ai(t,1,Do,!0),void 0,e)}));function qa(t){if(!t||!t.length)return[];var e=0;return t=ce(t,(function(t){if(Do(t))return e=on(t.length,e),!0})),Pe(e,(function(e){return de(t,Me(e))}))}function $a(t,e){if(!t||!t.length)return[];var n=qa(t);return null==e?n:de(n,(function(t){return ae(e,void 0,t)}))}var Qa=Bi((function(t,e){return Do(t)?Kn(t,e):[]})),Ya=Bi((function(t){return ir(ce(t,Do))})),Xa=Bi((function(t){var e=Ba(t);return Do(e)&&(e=void 0),ir(ce(t,Do),Xr(e,2))})),Za=Bi((function(t){var e=Ba(t);return e="function"==typeof e?e:void 0,ir(ce(t,Do),void 0,e)})),Ja=Bi(qa);var Ka=Bi((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,$a(t,n)}));function to(t){var e=kn(t);return e.__chain__=!0,e}function eo(t,e){return e(t)}var no=Gr((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Qn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Ln&&oa(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:eo,args:[r],thisArg:void 0}),new On(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(r)}));var io=br((function(t,e,n){Et.call(t,n)?++t[n]:$n(t,n,1)}));var ro=Tr(Oa),ao=Tr(La);function oo(t,e){return(Io(t)?se:ti)(t,Xr(e,3))}function so(t,e){return(Io(t)?le:ei)(t,Xr(e,3))}var lo=br((function(t,e,n){Et.call(t,n)?t[n].push(e):$n(t,n,[e])}));var uo=Bi((function(t,e,n){var r=-1,a="function"==typeof e,o=Ro(t)?i(t.length):[];return ti(t,(function(t){o[++r]=a?ae(e,t,n):yi(t,e,n)})),o})),co=br((function(t,e,n){$n(t,n,e)}));function ho(t,e){return(Io(t)?de:Ci)(t,Xr(e,3))}var fo=br((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var po=Bi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&sa(t,e[0],e[1])?e=[]:n>2&&sa(e[0],e[1],e[2])&&(e=[e[0]]),Li(t,ai(e,1),[])})),mo=Xe||function(){return $t.Date.now()};function vo(t,e,n){return e=n?void 0:e,Fr(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function go(t,e){var n;if("function"!=typeof e)throw new yt(a);return t=is(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var yo=Bi((function(t,e,n){var i=1;if(n.length){var r=Ue(n,Yr(yo));i|=32}return Fr(t,i,e,n,r)})),bo=Bi((function(t,e,n){var i=3;if(n.length){var r=Ue(n,Yr(bo));i|=32}return Fr(e,i,t,n,r)}));function xo(t,e,n){var i,r,o,s,l,u,c=0,h=!1,f=!1,d=!0;if("function"!=typeof t)throw new yt(a);function p(e){var n=i,a=r;return i=r=void 0,c=e,s=t.apply(a,n)}function m(t){return c=t,l=ba(g,e),h?p(t):s}function v(t){var n=t-u;return void 0===u||n>=e||n<0||f&&t-c>=o}function g(){var t=mo();if(v(t))return y(t);l=ba(g,function(t){var n=e-(t-u);return f?sn(n,o-(t-c)):n}(t))}function y(t){return l=void 0,d&&i?p(t):(i=r=void 0,s)}function b(){var t=mo(),n=v(t);if(i=arguments,r=this,u=t,n){if(void 0===l)return m(u);if(f)return cr(l),l=ba(g,e),p(u)}return void 0===l&&(l=ba(g,e)),s}return e=as(e)||0,Ho(n)&&(h=!!n.leading,o=(f="maxWait"in n)?on(as(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==l&&cr(l),c=0,i=u=r=l=void 0},b.flush=function(){return void 0===l?s:y(mo())},b}var _o=Bi((function(t,e){return Jn(t,1,e)})),wo=Bi((function(t,e,n){return Jn(t,as(e)||0,n)}));function So(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(a);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(So.Cache||Rn),n}function Eo(t){if("function"!=typeof t)throw new yt(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}So.Cache=Rn;var Mo=lr((function(t,e){var n=(e=1==e.length&&Io(e[0])?de(e[0],Ae(Xr())):de(ai(e,1),Ae(Xr()))).length;return Bi((function(i){for(var r=-1,a=sn(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return ae(t,this,i)}))})),To=Bi((function(t,e){return Fr(t,32,void 0,e,Ue(e,Yr(To)))})),Co=Bi((function(t,e){return Fr(t,64,void 0,e,Ue(e,Yr(Co)))})),ko=Gr((function(t,e){return Fr(t,256,void 0,void 0,void 0,e)}));function Po(t,e){return t===e||t!=t&&e!=e}var Ao=Nr(pi),Oo=Nr((function(t,e){return t>=e})),Lo=bi(function(){return arguments}())?bi:function(t){return Go(t)&&Et.call(t,"callee")&&!Qt.call(t,"callee")},Io=i.isArray,No=Kt?Ae(Kt):function(t){return Go(t)&&di(t)==S};function Ro(t){return null!=t&&Uo(t.length)&&!jo(t)}function Do(t){return Go(t)&&Ro(t)}var zo=en||al,Bo=te?Ae(te):function(t){return Go(t)&&di(t)==h};function Fo(t){if(!Go(t))return!1;var e=di(t);return e==f||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!$o(t)}function jo(t){if(!Ho(t))return!1;var e=di(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Vo(t){return"number"==typeof t&&t==is(t)}function Uo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ho(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Go(t){return null!=t&&"object"==typeof t}var Wo=ee?Ae(ee):function(t){return Go(t)&&na(t)==m};function qo(t){return"number"==typeof t||Go(t)&&di(t)==v}function $o(t){if(!Go(t)||di(t)!=g)return!1;var e=Wt(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&St.call(n)==kt}var Qo=ne?Ae(ne):function(t){return Go(t)&&di(t)==y};var Yo=ie?Ae(ie):function(t){return Go(t)&&na(t)==b};function Xo(t){return"string"==typeof t||!Io(t)&&Go(t)&&di(t)==x}function Zo(t){return"symbol"==typeof t||Go(t)&&di(t)==_}var Jo=re?Ae(re):function(t){return Go(t)&&Uo(t.length)&&!!jt[di(t)]};var Ko=Nr(Ti),ts=Nr((function(t,e){return t<=e}));function es(t){if(!t)return[];if(Ro(t))return Xo(t)?qe(t):gr(t);if(Jt&&t[Jt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Jt]());var e=na(t);return(e==m?je:e==b?He:Ps)(t)}function ns(t){return t?(t=as(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function is(t){var e=ns(t),n=e%1;return e==e?n?e-n:e:0}function rs(t){return t?Yn(is(t),0,4294967295):0}function as(t){if("number"==typeof t)return t;if(Zo(t))return NaN;if(Ho(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ho(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Q,"");var n=at.test(t);return n||st.test(t)?Gt(t.slice(2),n?2:8):rt.test(t)?NaN:+t}function os(t){return yr(t,_s(t))}function ss(t){return null==t?"":Zi(t)}var ls=xr((function(t,e){if(ha(e)||Ro(e))yr(e,xs(e),t);else for(var n in e)Et.call(e,n)&&Hn(t,n,e[n])})),us=xr((function(t,e){yr(e,_s(e),t)})),cs=xr((function(t,e,n,i){yr(e,_s(e),t,i)})),hs=xr((function(t,e,n,i){yr(e,xs(e),t,i)})),fs=Gr(Qn);var ds=Bi((function(t,e){t=mt(t);var n=-1,i=e.length,r=i>2?e[2]:void 0;for(r&&sa(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],o=_s(a),s=-1,l=o.length;++s<l;){var u=o[s],c=t[u];(void 0===c||Po(c,_t[u])&&!Et.call(t,u))&&(t[u]=a[u])}return t})),ps=Bi((function(t){return t.push(void 0,Vr),ae(Ss,void 0,t)}));function ms(t,e,n){var i=null==t?void 0:hi(t,e);return void 0===i?n:i}function vs(t,e){return null!=t&&ia(t,e,vi)}var gs=Pr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ct.call(e)),t[e]=n}),Hs(qs)),ys=Pr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ct.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),Xr),bs=Bi(yi);function xs(t){return Ro(t)?Bn(t):Ei(t)}function _s(t){return Ro(t)?Bn(t,!0):Mi(t)}var ws=xr((function(t,e,n){Ai(t,e,n)})),Ss=xr((function(t,e,n,i){Ai(t,e,n,i)})),Es=Gr((function(t,e){var n={};if(null==t)return n;var i=!1;e=de(e,(function(e){return e=sr(e,t),i||(i=e.length>1),e})),yr(t,qr(t),n),i&&(n=Xn(n,7,Ur));for(var r=e.length;r--;)Ki(n,e[r]);return n}));var Ms=Gr((function(t,e){return null==t?{}:function(t,e){return Ii(t,e,(function(e,n){return vs(t,n)}))}(t,e)}));function Ts(t,e){if(null==t)return{};var n=de(qr(t),(function(t){return[t]}));return e=Xr(e),Ii(t,n,(function(t,n){return e(t,n[0])}))}var Cs=Br(xs),ks=Br(_s);function Ps(t){return null==t?[]:Oe(t,xs(t))}var As=Er((function(t,e,n){return e=e.toLowerCase(),t+(n?Os(e):e)}));function Os(t){return Fs(ss(t).toLowerCase())}function Ls(t){return(t=ss(t))&&t.replace(ut,De).replace(It,"")}var Is=Er((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ns=Er((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Rs=Sr("toLowerCase");var Ds=Er((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var zs=Er((function(t,e,n){return t+(n?" ":"")+Fs(e)}));var Bs=Er((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Fs=Sr("toUpperCase");function js(t,e,n){return t=ss(t),void 0===(e=n?void 0:e)?function(t){return zt.test(t)}(t)?function(t){return t.match(Rt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var Vs=Bi((function(t,e){try{return ae(t,void 0,e)}catch(t){return Fo(t)?t:new ft(t)}})),Us=Gr((function(t,e){return se(e,(function(e){e=Ma(e),$n(t,e,yo(t[e],t))})),t}));function Hs(t){return function(){return t}}var Gs=Cr(),Ws=Cr(!0);function qs(t){return t}function $s(t){return Si("function"==typeof t?t:Xn(t,1))}var Qs=Bi((function(t,e){return function(n){return yi(n,t,e)}})),Ys=Bi((function(t,e){return function(n){return yi(t,n,e)}}));function Xs(t,e,n){var i=xs(e),r=ci(e,i);null!=n||Ho(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=ci(e,xs(e)));var a=!(Ho(n)&&"chain"in n&&!n.chain),o=jo(t);return se(r,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=gr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,pe([this.value()],arguments))})})),t}function Zs(){}var Js=Or(de),Ks=Or(ue),tl=Or(ge);function el(t){return la(t)?Me(Ma(t)):function(t){return function(e){return hi(e,t)}}(t)}var nl=Ir(),il=Ir(!0);function rl(){return[]}function al(){return!1}var ol=Ar((function(t,e){return t+e}),0),sl=Dr("ceil"),ll=Ar((function(t,e){return t/e}),1),ul=Dr("floor");var cl,hl=Ar((function(t,e){return t*e}),1),fl=Dr("round"),dl=Ar((function(t,e){return t-e}),0);return kn.after=function(t,e){if("function"!=typeof e)throw new yt(a);return t=is(t),function(){if(--t<1)return e.apply(this,arguments)}},kn.ary=vo,kn.assign=ls,kn.assignIn=us,kn.assignInWith=cs,kn.assignWith=hs,kn.at=fs,kn.before=go,kn.bind=yo,kn.bindAll=Us,kn.bindKey=bo,kn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Io(t)?t:[t]},kn.chain=to,kn.chunk=function(t,e,n){e=(n?sa(t,e,n):void 0===e)?1:on(is(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var a=0,o=0,s=i(Je(r/e));a<r;)s[o++]=Wi(t,a,a+=e);return s},kn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},kn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return pe(Io(n)?gr(n):[n],ai(e,1))},kn.cond=function(t){var e=null==t?0:t.length,n=Xr();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new yt(a);return[n(t[0]),t[1]]})):[],Bi((function(n){for(var i=-1;++i<e;){var r=t[i];if(ae(r[0],this,n))return ae(r[1],this,n)}}))},kn.conforms=function(t){return function(t){var e=xs(t);return function(n){return Zn(n,t,e)}}(Xn(t,1))},kn.constant=Hs,kn.countBy=io,kn.create=function(t,e){var n=Pn(t);return null==e?n:qn(n,e)},kn.curry=function t(e,n,i){var r=Fr(e,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},kn.curryRight=function t(e,n,i){var r=Fr(e,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},kn.debounce=xo,kn.defaults=ds,kn.defaultsDeep=ps,kn.defer=_o,kn.delay=wo,kn.difference=ka,kn.differenceBy=Pa,kn.differenceWith=Aa,kn.drop=function(t,e,n){var i=null==t?0:t.length;return i?Wi(t,(e=n||void 0===e?1:is(e))<0?0:e,i):[]},kn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Wi(t,0,(e=i-(e=n||void 0===e?1:is(e)))<0?0:e):[]},kn.dropRightWhile=function(t,e){return t&&t.length?er(t,Xr(e,3),!0,!0):[]},kn.dropWhile=function(t,e){return t&&t.length?er(t,Xr(e,3),!0):[]},kn.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&sa(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=is(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:is(i))<0&&(i+=r),i=n>i?0:rs(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},kn.filter=function(t,e){return(Io(t)?ce:ri)(t,Xr(e,3))},kn.flatMap=function(t,e){return ai(ho(t,e),1)},kn.flatMapDeep=function(t,e){return ai(ho(t,e),1/0)},kn.flatMapDepth=function(t,e,n){return n=void 0===n?1:is(n),ai(ho(t,e),n)},kn.flatten=Ia,kn.flattenDeep=function(t){return(null==t?0:t.length)?ai(t,1/0):[]},kn.flattenDepth=function(t,e){return(null==t?0:t.length)?ai(t,e=void 0===e?1:is(e)):[]},kn.flip=function(t){return Fr(t,512)},kn.flow=Gs,kn.flowRight=Ws,kn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},kn.functions=function(t){return null==t?[]:ci(t,xs(t))},kn.functionsIn=function(t){return null==t?[]:ci(t,_s(t))},kn.groupBy=lo,kn.initial=function(t){return(null==t?0:t.length)?Wi(t,0,-1):[]},kn.intersection=Ra,kn.intersectionBy=Da,kn.intersectionWith=za,kn.invert=gs,kn.invertBy=ys,kn.invokeMap=uo,kn.iteratee=$s,kn.keyBy=co,kn.keys=xs,kn.keysIn=_s,kn.map=ho,kn.mapKeys=function(t,e){var n={};return e=Xr(e,3),li(t,(function(t,i,r){$n(n,e(t,i,r),t)})),n},kn.mapValues=function(t,e){var n={};return e=Xr(e,3),li(t,(function(t,i,r){$n(n,i,e(t,i,r))})),n},kn.matches=function(t){return ki(Xn(t,1))},kn.matchesProperty=function(t,e){return Pi(t,Xn(e,1))},kn.memoize=So,kn.merge=ws,kn.mergeWith=Ss,kn.method=Qs,kn.methodOf=Ys,kn.mixin=Xs,kn.negate=Eo,kn.nthArg=function(t){return t=is(t),Bi((function(e){return Oi(e,t)}))},kn.omit=Es,kn.omitBy=function(t,e){return Ts(t,Eo(Xr(e)))},kn.once=function(t){return go(2,t)},kn.orderBy=function(t,e,n,i){return null==t?[]:(Io(e)||(e=null==e?[]:[e]),Io(n=i?void 0:n)||(n=null==n?[]:[n]),Li(t,e,n))},kn.over=Js,kn.overArgs=Mo,kn.overEvery=Ks,kn.overSome=tl,kn.partial=To,kn.partialRight=Co,kn.partition=fo,kn.pick=Ms,kn.pickBy=Ts,kn.property=el,kn.propertyOf=function(t){return function(e){return null==t?void 0:hi(t,e)}},kn.pull=Fa,kn.pullAll=ja,kn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ni(t,e,Xr(n,2)):t},kn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ni(t,e,void 0,n):t},kn.pullAt=Va,kn.range=nl,kn.rangeRight=il,kn.rearg=ko,kn.reject=function(t,e){return(Io(t)?ce:ri)(t,Eo(Xr(e,3)))},kn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=Xr(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return Ri(t,r),n},kn.rest=function(t,e){if("function"!=typeof t)throw new yt(a);return Bi(t,e=void 0===e?e:is(e))},kn.reverse=Ua,kn.sampleSize=function(t,e,n){return e=(n?sa(t,e,n):void 0===e)?1:is(e),(Io(t)?jn:ji)(t,e)},kn.set=function(t,e,n){return null==t?t:Vi(t,e,n)},kn.setWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:Vi(t,e,n,i)},kn.shuffle=function(t){return(Io(t)?Vn:Gi)(t)},kn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&sa(t,e,n)?(e=0,n=i):(e=null==e?0:is(e),n=void 0===n?i:is(n)),Wi(t,e,n)):[]},kn.sortBy=po,kn.sortedUniq=function(t){return t&&t.length?Yi(t):[]},kn.sortedUniqBy=function(t,e){return t&&t.length?Yi(t,Xr(e,2)):[]},kn.split=function(t,e,n){return n&&"number"!=typeof n&&sa(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ss(t))&&("string"==typeof e||null!=e&&!Qo(e))&&!(e=Zi(e))&&Fe(t)?ur(qe(t),0,n):t.split(e,n):[]},kn.spread=function(t,e){if("function"!=typeof t)throw new yt(a);return e=null==e?0:on(is(e),0),Bi((function(n){var i=n[e],r=ur(n,0,e);return i&&pe(r,i),ae(t,this,r)}))},kn.tail=function(t){var e=null==t?0:t.length;return e?Wi(t,1,e):[]},kn.take=function(t,e,n){return t&&t.length?Wi(t,0,(e=n||void 0===e?1:is(e))<0?0:e):[]},kn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Wi(t,(e=i-(e=n||void 0===e?1:is(e)))<0?0:e,i):[]},kn.takeRightWhile=function(t,e){return t&&t.length?er(t,Xr(e,3),!1,!0):[]},kn.takeWhile=function(t,e){return t&&t.length?er(t,Xr(e,3)):[]},kn.tap=function(t,e){return e(t),t},kn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new yt(a);return Ho(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),xo(t,e,{leading:i,maxWait:e,trailing:r})},kn.thru=eo,kn.toArray=es,kn.toPairs=Cs,kn.toPairsIn=ks,kn.toPath=function(t){return Io(t)?de(t,Ma):Zo(t)?[t]:gr(Ea(ss(t)))},kn.toPlainObject=os,kn.transform=function(t,e,n){var i=Io(t),r=i||zo(t)||Jo(t);if(e=Xr(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:Ho(t)&&jo(a)?Pn(Wt(t)):{}}return(r?se:li)(t,(function(t,i,r){return e(n,t,i,r)})),n},kn.unary=function(t){return vo(t,1)},kn.union=Ha,kn.unionBy=Ga,kn.unionWith=Wa,kn.uniq=function(t){return t&&t.length?Ji(t):[]},kn.uniqBy=function(t,e){return t&&t.length?Ji(t,Xr(e,2)):[]},kn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Ji(t,void 0,e):[]},kn.unset=function(t,e){return null==t||Ki(t,e)},kn.unzip=qa,kn.unzipWith=$a,kn.update=function(t,e,n){return null==t?t:tr(t,e,or(n))},kn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:tr(t,e,or(n),i)},kn.values=Ps,kn.valuesIn=function(t){return null==t?[]:Oe(t,_s(t))},kn.without=Qa,kn.words=js,kn.wrap=function(t,e){return To(or(e),t)},kn.xor=Ya,kn.xorBy=Xa,kn.xorWith=Za,kn.zip=Ja,kn.zipObject=function(t,e){return rr(t||[],e||[],Hn)},kn.zipObjectDeep=function(t,e){return rr(t||[],e||[],Vi)},kn.zipWith=Ka,kn.entries=Cs,kn.entriesIn=ks,kn.extend=us,kn.extendWith=cs,Xs(kn,kn),kn.add=ol,kn.attempt=Vs,kn.camelCase=As,kn.capitalize=Os,kn.ceil=sl,kn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=as(n))==n?n:0),void 0!==e&&(e=(e=as(e))==e?e:0),Yn(as(t),e,n)},kn.clone=function(t){return Xn(t,4)},kn.cloneDeep=function(t){return Xn(t,5)},kn.cloneDeepWith=function(t,e){return Xn(t,5,e="function"==typeof e?e:void 0)},kn.cloneWith=function(t,e){return Xn(t,4,e="function"==typeof e?e:void 0)},kn.conformsTo=function(t,e){return null==e||Zn(t,e,xs(e))},kn.deburr=Ls,kn.defaultTo=function(t,e){return null==t||t!=t?e:t},kn.divide=ll,kn.endsWith=function(t,e,n){t=ss(t),e=Zi(e);var i=t.length,r=n=void 0===n?i:Yn(is(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},kn.eq=Po,kn.escape=function(t){return(t=ss(t))&&F.test(t)?t.replace(z,ze):t},kn.escapeRegExp=function(t){return(t=ss(t))&&$.test(t)?t.replace(q,"\\$&"):t},kn.every=function(t,e,n){var i=Io(t)?ue:ni;return n&&sa(t,e,n)&&(e=void 0),i(t,Xr(e,3))},kn.find=ro,kn.findIndex=Oa,kn.findKey=function(t,e){return be(t,Xr(e,3),li)},kn.findLast=ao,kn.findLastIndex=La,kn.findLastKey=function(t,e){return be(t,Xr(e,3),ui)},kn.floor=ul,kn.forEach=oo,kn.forEachRight=so,kn.forIn=function(t,e){return null==t?t:oi(t,Xr(e,3),_s)},kn.forInRight=function(t,e){return null==t?t:si(t,Xr(e,3),_s)},kn.forOwn=function(t,e){return t&&li(t,Xr(e,3))},kn.forOwnRight=function(t,e){return t&&ui(t,Xr(e,3))},kn.get=ms,kn.gt=Ao,kn.gte=Oo,kn.has=function(t,e){return null!=t&&ia(t,e,mi)},kn.hasIn=vs,kn.head=Na,kn.identity=qs,kn.includes=function(t,e,n,i){t=Ro(t)?t:Ps(t),n=n&&!i?is(n):0;var r=t.length;return n<0&&(n=on(r+n,0)),Xo(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&_e(t,e,n)>-1},kn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:is(n);return r<0&&(r=on(i+r,0)),_e(t,e,r)},kn.inRange=function(t,e,n){return e=ns(e),void 0===n?(n=e,e=0):n=ns(n),function(t,e,n){return t>=sn(e,n)&&t<on(e,n)}(t=as(t),e,n)},kn.invoke=bs,kn.isArguments=Lo,kn.isArray=Io,kn.isArrayBuffer=No,kn.isArrayLike=Ro,kn.isArrayLikeObject=Do,kn.isBoolean=function(t){return!0===t||!1===t||Go(t)&&di(t)==c},kn.isBuffer=zo,kn.isDate=Bo,kn.isElement=function(t){return Go(t)&&1===t.nodeType&&!$o(t)},kn.isEmpty=function(t){if(null==t)return!0;if(Ro(t)&&(Io(t)||"string"==typeof t||"function"==typeof t.splice||zo(t)||Jo(t)||Lo(t)))return!t.length;var e=na(t);if(e==m||e==b)return!t.size;if(ha(t))return!Ei(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},kn.isEqual=function(t,e){return xi(t,e)},kn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===i?xi(t,e,void 0,n):!!i},kn.isError=Fo,kn.isFinite=function(t){return"number"==typeof t&&nn(t)},kn.isFunction=jo,kn.isInteger=Vo,kn.isLength=Uo,kn.isMap=Wo,kn.isMatch=function(t,e){return t===e||_i(t,e,Jr(e))},kn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,_i(t,e,Jr(e),n)},kn.isNaN=function(t){return qo(t)&&t!=+t},kn.isNative=function(t){if(ca(t))throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wi(t)},kn.isNil=function(t){return null==t},kn.isNull=function(t){return null===t},kn.isNumber=qo,kn.isObject=Ho,kn.isObjectLike=Go,kn.isPlainObject=$o,kn.isRegExp=Qo,kn.isSafeInteger=function(t){return Vo(t)&&t>=-9007199254740991&&t<=9007199254740991},kn.isSet=Yo,kn.isString=Xo,kn.isSymbol=Zo,kn.isTypedArray=Jo,kn.isUndefined=function(t){return void 0===t},kn.isWeakMap=function(t){return Go(t)&&na(t)==w},kn.isWeakSet=function(t){return Go(t)&&"[object WeakSet]"==di(t)},kn.join=function(t,e){return null==t?"":rn.call(t,e)},kn.kebabCase=Is,kn.last=Ba,kn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=is(n))<0?on(i+r,0):sn(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):xe(t,Se,r,!0)},kn.lowerCase=Ns,kn.lowerFirst=Rs,kn.lt=Ko,kn.lte=ts,kn.max=function(t){return t&&t.length?ii(t,qs,pi):void 0},kn.maxBy=function(t,e){return t&&t.length?ii(t,Xr(e,2),pi):void 0},kn.mean=function(t){return Ee(t,qs)},kn.meanBy=function(t,e){return Ee(t,Xr(e,2))},kn.min=function(t){return t&&t.length?ii(t,qs,Ti):void 0},kn.minBy=function(t,e){return t&&t.length?ii(t,Xr(e,2),Ti):void 0},kn.stubArray=rl,kn.stubFalse=al,kn.stubObject=function(){return{}},kn.stubString=function(){return""},kn.stubTrue=function(){return!0},kn.multiply=hl,kn.nth=function(t,e){return t&&t.length?Oi(t,is(e)):void 0},kn.noConflict=function(){return $t._===this&&($t._=Pt),this},kn.noop=Zs,kn.now=mo,kn.pad=function(t,e,n){t=ss(t);var i=(e=is(e))?We(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Lr(Ke(r),n)+t+Lr(Je(r),n)},kn.padEnd=function(t,e,n){t=ss(t);var i=(e=is(e))?We(t):0;return e&&i<e?t+Lr(e-i,n):t},kn.padStart=function(t,e,n){t=ss(t);var i=(e=is(e))?We(t):0;return e&&i<e?Lr(e-i,n)+t:t},kn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),un(ss(t).replace(Y,""),e||0)},kn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&sa(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=ns(t),void 0===e?(e=t,t=0):e=ns(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=cn();return sn(t+r*(e-t+Ht("1e-"+((r+"").length-1))),e)}return Di(t,e)},kn.reduce=function(t,e,n){var i=Io(t)?me:Ce,r=arguments.length<3;return i(t,Xr(e,4),n,r,ti)},kn.reduceRight=function(t,e,n){var i=Io(t)?ve:Ce,r=arguments.length<3;return i(t,Xr(e,4),n,r,ei)},kn.repeat=function(t,e,n){return e=(n?sa(t,e,n):void 0===e)?1:is(e),zi(ss(t),e)},kn.replace=function(){var t=arguments,e=ss(t[0]);return t.length<3?e:e.replace(t[1],t[2])},kn.result=function(t,e,n){var i=-1,r=(e=sr(e,t)).length;for(r||(r=1,t=void 0);++i<r;){var a=null==t?void 0:t[Ma(e[i])];void 0===a&&(i=r,a=n),t=jo(a)?a.call(t):a}return t},kn.round=fl,kn.runInContext=t,kn.sample=function(t){return(Io(t)?Fn:Fi)(t)},kn.size=function(t){if(null==t)return 0;if(Ro(t))return Xo(t)?We(t):t.length;var e=na(t);return e==m||e==b?t.size:Ei(t).length},kn.snakeCase=Ds,kn.some=function(t,e,n){var i=Io(t)?ge:qi;return n&&sa(t,e,n)&&(e=void 0),i(t,Xr(e,3))},kn.sortedIndex=function(t,e){return $i(t,e)},kn.sortedIndexBy=function(t,e,n){return Qi(t,e,Xr(n,2))},kn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=$i(t,e);if(i<n&&Po(t[i],e))return i}return-1},kn.sortedLastIndex=function(t,e){return $i(t,e,!0)},kn.sortedLastIndexBy=function(t,e,n){return Qi(t,e,Xr(n,2),!0)},kn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=$i(t,e,!0)-1;if(Po(t[n],e))return n}return-1},kn.startCase=zs,kn.startsWith=function(t,e,n){return t=ss(t),n=null==n?0:Yn(is(n),0,t.length),e=Zi(e),t.slice(n,n+e.length)==e},kn.subtract=dl,kn.sum=function(t){return t&&t.length?ke(t,qs):0},kn.sumBy=function(t,e){return t&&t.length?ke(t,Xr(e,2)):0},kn.template=function(t,e,n){var i=kn.templateSettings;n&&sa(t,e,n)&&(e=void 0),t=ss(t),e=cs({},e,i,jr);var r,a,o=cs({},e.imports,i.imports,jr),s=xs(o),l=Oe(o,s),u=0,c=e.interpolate||ct,h="__p += '",f=vt((e.escape||ct).source+"|"+c.source+"|"+(c===U?nt:ct).source+"|"+(e.evaluate||ct).source+"|$","g"),d="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ft+"]")+"\n";t.replace(f,(function(e,n,i,o,s,l){return i||(i=o),h+=t.slice(u,l).replace(ht,Be),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),h+="';\n";var p=Et.call(e,"variable")&&e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(I,""):h).replace(N,"$1").replace(R,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Vs((function(){return dt(s,d+"return "+h).apply(void 0,l)}));if(m.source=h,Fo(m))throw m;return m},kn.times=function(t,e){if((t=is(t))<1||t>9007199254740991)return[];var n=4294967295,i=sn(t,4294967295);t-=4294967295;for(var r=Pe(i,e=Xr(e));++n<t;)e(n);return r},kn.toFinite=ns,kn.toInteger=is,kn.toLength=rs,kn.toLower=function(t){return ss(t).toLowerCase()},kn.toNumber=as,kn.toSafeInteger=function(t){return t?Yn(is(t),-9007199254740991,9007199254740991):0===t?t:0},kn.toString=ss,kn.toUpper=function(t){return ss(t).toUpperCase()},kn.trim=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(Q,"");if(!t||!(e=Zi(e)))return t;var i=qe(t),r=qe(e);return ur(i,Ie(i,r),Ne(i,r)+1).join("")},kn.trimEnd=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(X,"");if(!t||!(e=Zi(e)))return t;var i=qe(t);return ur(i,0,Ne(i,qe(e))+1).join("")},kn.trimStart=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(Y,"");if(!t||!(e=Zi(e)))return t;var i=qe(t);return ur(i,Ie(i,qe(e))).join("")},kn.truncate=function(t,e){var n=30,i="...";if(Ho(e)){var r="separator"in e?e.separator:r;n="length"in e?is(e.length):n,i="omission"in e?Zi(e.omission):i}var a=(t=ss(t)).length;if(Fe(t)){var o=qe(t);a=o.length}if(n>=a)return t;var s=n-We(i);if(s<1)return i;var l=o?ur(o,0,s).join(""):t.slice(0,s);if(void 0===r)return l+i;if(o&&(s+=l.length-s),Qo(r)){if(t.slice(s).search(r)){var u,c=l;for(r.global||(r=vt(r.source,ss(it.exec(r))+"g")),r.lastIndex=0;u=r.exec(c);)var h=u.index;l=l.slice(0,void 0===h?s:h)}}else if(t.indexOf(Zi(r),s)!=s){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+i},kn.unescape=function(t){return(t=ss(t))&&B.test(t)?t.replace(D,$e):t},kn.uniqueId=function(t){var e=++Mt;return ss(t)+e},kn.upperCase=Bs,kn.upperFirst=Fs,kn.each=oo,kn.eachRight=so,kn.first=Na,Xs(kn,(cl={},li(kn,(function(t,e){Et.call(kn.prototype,e)||(cl[e]=t)})),cl),{chain:!1}),kn.VERSION="4.17.15",se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){kn[t].placeholder=kn})),se(["drop","take"],(function(t,e){Ln.prototype[t]=function(n){n=void 0===n?1:on(is(n),0);var i=this.__filtered__&&!e?new Ln(this):this.clone();return i.__filtered__?i.__takeCount__=sn(n,i.__takeCount__):i.__views__.push({size:sn(n,4294967295),type:t+(i.__dir__<0?"Right":"")}),i},Ln.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),se(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Ln.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Ln.prototype[t]=function(){return this[n](1).value()[0]}})),se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Ln.prototype[t]=function(){return this.__filtered__?new Ln(this):this[n](1)}})),Ln.prototype.compact=function(){return this.filter(qs)},Ln.prototype.find=function(t){return this.filter(t).head()},Ln.prototype.findLast=function(t){return this.reverse().find(t)},Ln.prototype.invokeMap=Bi((function(t,e){return"function"==typeof t?new Ln(this):this.map((function(n){return yi(n,t,e)}))})),Ln.prototype.reject=function(t){return this.filter(Eo(Xr(t)))},Ln.prototype.slice=function(t,e){t=is(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Ln(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=is(e))<0?n.dropRight(-e):n.take(e-t)),n)},Ln.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ln.prototype.toArray=function(){return this.take(4294967295)},li(Ln.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=kn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);r&&(kn.prototype[e]=function(){var e=this.__wrapped__,o=i?[1]:arguments,s=e instanceof Ln,l=o[0],u=s||Io(e),c=function(t){var e=r.apply(kn,pe([t],o));return i&&h?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var h=this.__chain__,f=!!this.__actions__.length,d=a&&!h,p=s&&!f;if(!a&&u){e=p?e:new Ln(this);var m=t.apply(e,o);return m.__actions__.push({func:eo,args:[c],thisArg:void 0}),new On(m,h)}return d&&p?t.apply(this,o):(m=this.thru(c),d?i?m.value()[0]:m.value():m)})})),se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=bt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);kn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Io(r)?r:[],t)}return this[n]((function(n){return e.apply(Io(n)?n:[],t)}))}})),li(Ln.prototype,(function(t,e){var n=kn[e];if(n){var i=n.name+"";Et.call(bn,i)||(bn[i]=[]),bn[i].push({name:e,func:n})}})),bn[kr(void 0,2).name]=[{name:"wrapper",func:void 0}],Ln.prototype.clone=function(){var t=new Ln(this.__wrapped__);return t.__actions__=gr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gr(this.__views__),t},Ln.prototype.reverse=function(){if(this.__filtered__){var t=new Ln(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ln.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Io(t),i=e<0,r=n?t.length:0,a=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=sn(e,t+o);break;case"takeRight":t=on(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,l=s-o,u=i?s:o-1,c=this.__iteratees__,h=c.length,f=0,d=sn(l,this.__takeCount__);if(!n||!i&&r==l&&d==l)return nr(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var m=-1,v=t[u+=e];++m<h;){var g=c[m],y=g.iteratee,b=g.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue t;break t}}p[f++]=v}return p},kn.prototype.at=no,kn.prototype.chain=function(){return to(this)},kn.prototype.commit=function(){return new On(this.value(),this.__chain__)},kn.prototype.next=function(){void 0===this.__values__&&(this.__values__=es(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},kn.prototype.plant=function(t){for(var e,n=this;n instanceof An;){var i=Ca(n);i.__index__=0,i.__values__=void 0,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},kn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Ln){var e=t;return this.__actions__.length&&(e=new Ln(this)),(e=e.reverse()).__actions__.push({func:eo,args:[Ua],thisArg:void 0}),new On(e,this.__chain__)}return this.thru(Ua)},kn.prototype.toJSON=kn.prototype.valueOf=kn.prototype.value=function(){return nr(this.__wrapped__,this.__actions__)},kn.prototype.first=kn.prototype.head,Jt&&(kn.prototype[Jt]=function(){return this}),kn}();$t._=Qe,void 0===(r=function(){return Qe}.call(e,n,e,i))||(i.exports=r)}).call(this)}).call(this,n(69),n(33)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=h(n(0)),a=c(n(7)),o=c(n(104)),s=c(n(45)),l=c(n(6)),u=h(n(4));h(n(47));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.gaussMargin={top:10,bottom:10,left:10,right:10},n.state={flare:!1,flareOption:"automatic AveAve",rotation:!1,anomaly:!1},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){document.getElementById("weightForAverageList").selectedIndex="2",document.getElementById("stdConstraintsList").selectedIndex="1",this.setGaussCurve(),this.setDefaultValues()}},{key:"setDefaultValues",value:function(){$("#flareLookaround").val(3),$("#flareSensitivity").val(2),$("#rotationPeriodMin").val(20),$("#rotationPeriodMax").val(30),$("#rotationAngle").val(270)}},{key:"setGaussCurve",value:function(){var t=150-this.gaussMargin.left-this.gaussMargin.right,e=150-this.gaussMargin.top-this.gaussMargin.bottom,n=a.select("#gaussCurveArea").append("svg").attr("width",150).attr("height",150).attr("id","gaussCurve");n.append("rect").attr("width",t).attr("height",e).style("fill","none").style("stroke","lightgray").attr("transform","translate("+this.gaussMargin.left+","+this.gaussMargin.top+")"),this.xScaleGauss=a.scaleLinear().range([0,t]),this.yScaleGauss=a.scaleLinear().range([e,0]);var i=document.getElementById("weightForAverageList"),r=i.selectedIndex,s=i.options[r].value,l=o.getGaussData(Number(s));this.xScaleGauss.domain([a.min(l,(function(t){return t.x})),a.max(l,(function(t){return t.x}))]),this.yScaleGauss.domain([a.min(l,(function(t){return t.y})),a.max(l,(function(t){return t.y}))]),this.gaussPath=n.append("path").datum(l).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","gaussCurvePath").attr("transform","translate("+this.gaussMargin.left+","+this.gaussMargin.top+")").attr("d",a.line().x(function(t){return this.xScaleGauss(t.x)}.bind(this)).y(function(t){return this.yScaleGauss(t.y)}.bind(this)).curve(a.curveBasis))}},{key:"updateWeight",value:function(){a.select("#gaussCurvePath").remove();var t=document.getElementById("weightForAverageList"),e=t.selectedIndex,n=t.options[e].value,i=o.getGaussData(Number(n));this.xScaleGauss.domain([a.min(i,(function(t){return t.x})),a.max(i,(function(t){return t.x}))]),this.yScaleGauss.domain([a.min(i,(function(t){return t.y})),a.max(i,(function(t){return t.y}))]),this.gaussPath=a.select("#gaussCurve").append("path").datum(i).style("fill","none").style("stroke","lightcoral").style("stroke-width",3).attr("id","gaussCurvePath").attr("transform","translate("+this.gaussMargin.left+","+this.gaussMargin.top+")").attr("d",a.line().x(function(t){return this.xScaleGauss(t.x)}.bind(this)).y(function(t){return this.yScaleGauss(t.y)}.bind(this)).curve(a.curveBasis))}},{key:"clickRunButton",value:function(){$("#topKLabelResults").text("Top "+u.default.getKValue()+" results"),$("#matchingStatus").text("searching..."),setTimeout(function(){this.runAutomaticExtraction()}.bind(this),0)}},{key:"runAutomaticExtraction",value:function(){var t=u.default.getTarget(),e=void 0,n=void 0,i=void 0,r={};if(this.state.flare){var a=this.state.flareOption.split(" ")[0];if("automatic"===a){var o=this.state.flareOption.split(" ")[1],c=$("#flareLookaround").val(),h=$("#flareSensitivity").val();""!==c&&""!==h&&(c=Number(c),h=Number(h),e=s.extractFlares(t,o,c,h)),r.flare={mode:a,peakFunction:this.state.flareOption.split(" ")[1],lookaround:c,sensitivity:h}}else"manual"===a&&(e=s.extractFlaresManual(t,Number($("#flareThreshold").val())),r.flare={mode:a,threshold:Number($("#flareThreshold").val())})}if(this.state.rotation){var f=[Number($("#rotationPeriodMin").val()),Number($("#rotationPeriodMax").val())],d=$("#rotationDiameter").val(),p=$("#rotationAngle").val();d=""===d?0:Number(d),p=""===p?0:Number(p);var m=document.getElementById("stdConstraintsList"),v=m.selectedIndex,g=m.options[v].value,y=document.getElementById("weightForAverageList");v=y.selectedIndex;var b=Number(y.options[v].value);n=s.extractRotations(t,f,d,p,b,g),r.rotation={period:f,diameter:d,angle:p,stdOfthePeriod:g,weightForAverage:0===b?"flat":b}}this.state.anomaly&&(i=s.extractAnomalies(t));var x=[];if(this.state.flare&&this.state.rotation){for(var _=0,w=0,S=void 0;_<e.length&&w<n.length;)n[w].id<e[_].id?w++:e[_].id<n[w].id?_++:n[w].start<=e[_].start&&e[_].start<=n[w].start+n[w].period?(void 0===(S=n[w]).flares&&(S.flares=[]),S.flares.push(e[_]),_++):e[_].start<n[w].start?_++:n[w].start+n[w].period<e[_].start&&(S&&(x.push(S),S=null),w++);S&&x.push(S)}else this.state.flare?x=e:this.state.rotation&&(x=n);this.state.anomaly&&(x=i),l.setExtractionResults(r,x),s.setDefaltOrderOfResults(),s.showExtractionResults()}},{key:"flareOptions",value:function(){return r.default.createElement("form",{className:"form-check",id:"flareOptions",style:{paddingLeft:"0px"}},r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"flareAutomatic",name:"flareOptions",value:"automatic",checked:this.state.flareOption.indexOf("automatic")>=0,disabled:!this.state.flare,onChange:this.switchFlareOption.bind(this),className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"flareAutomatic"},"Automatic"),r.default.createElement("h6",null,"Parameters"),r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}}),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Lookaround"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"k neightbors",id:"flareLookaround",disabled:!this.state.flare,style:{width:"7rem",marginRight:"0.5rem"}}))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Sensitivity cutoff"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"h",id:"flareSensitivity",disabled:!this.state.flare,style:{width:"7rem",marginRight:"0.5rem"}}))),r.default.createElement("h6",null,"Peak function"),r.default.createElement("div",{className:"form-check form-check-inline"},r.default.createElement("img",{id:"peakAveMaximum",className:"selectorIcon",name:"peakFunction",value:"AveMaximum",src:"img/icons/flare1.png",alt:"Average of the maximums among k left & right neightbors",width:"80",height:"80",title:"Average of the maximums among k left & right neightbors",onClick:this.selectFlareAveMaximum.bind(this),readOnly:!0}),r.default.createElement("img",{id:"peakAveAve",className:"selectorIcon selected",name:"peakFunction",value:"AveAve",src:"img/icons/flare2.png",alt:"Average of the averages of the signed distance from k left & right neightbors",width:"80",height:"80",title:"Average of the averages of the signed distance from k left & right neightbors",onClick:this.selectFlareAveAve.bind(this),readOnly:!0}),r.default.createElement("img",{id:"peakAveDist",className:"selectorIcon",name:"peakFunction",value:"AveDist",src:"img/icons/flare3.png",alt:"Average signed distance from the averages of k neightbors",width:"80",height:"80",title:"Average signed distance from the averages of k neightbors",onClick:this.selectFlareAveDist.bind(this),readOnly:!0}))),r.default.createElement("div",{className:"custom-control custom-radio"},r.default.createElement("input",{type:"radio",id:"flareManual",name:"flareOptions",value:"manual",checked:"manual"===this.state.flareOption,disabled:!this.state.flare,onChange:this.switchFlareOption.bind(this),className:"custom-control-input",readOnly:!0}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"flareManual"},"Manual"),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Intensity Threshold"),r.default.createElement("div",{className:"col"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"threshold",id:"flareThreshold",disabled:!this.state.flare,style:{width:"7rem",marginRight:"0.5rem"}})))))}},{key:"rotationOptions",value:function(){return r.default.createElement("div",{className:"container",style:{paddingRight:"0px",paddingLeft:"0px",marginBottom:"0.2rem"}},r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Rotation period"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"min",id:"rotationPeriodMin",disabled:!this.state.rotation,style:{width:"20%",marginRight:"0.5rem"}}),"~",r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"max",id:"rotationPeriodMax",disabled:!this.state.rotation,style:{width:"20%",marginRight:"0.5rem",marginLeft:"0.5rem"}}),r.default.createElement("label",{className:"col-form-label col-form-label-sm"}," days"))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Rotation diameter"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"diameter",id:"rotationDiameter",disabled:!this.state.rotation,style:{width:"40%",marginRight:"0.5rem"}}))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Rotation angle"),r.default.createElement("div",{className:"col form-inline"},r.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"angle",id:"rotationAngle",disabled:!this.state.rotation,style:{width:"40%",marginRight:"0.5rem"}}))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5",title:"Sx and Sy are standard deviations of the whole data,  sx and sy are those of the time interval"},"Standard deviation of the period"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"stdConstraintsList",style:{width:"60%"},disabled:!this.state.rotation},r.default.createElement("option",{value:"no"},"No constraints"),r.default.createElement("option",{value:"and"},"Sx < sx  Sy < sy"),r.default.createElement("option",{value:"or"},"Sx < sx  Sy < sy"),r.default.createElement("option",{value:"x"},"Sx < sx"),r.default.createElement("option",{value:"y"},"Sy < sy")))),r.default.createElement("div",{className:"row matchingOption"},r.default.createElement("div",{className:"col-5"},"Weight for average"),r.default.createElement("div",{className:"col"},r.default.createElement("select",{className:"custom-select custom-select-sm",id:"weightForAverageList",style:{width:"60%"},disabled:!this.state.rotation,onChange:this.updateWeight.bind(this)},r.default.createElement("option",{value:"0"},"Flat (arithmetic mean)"),r.default.createElement("option",{value:"1"},"=1"),r.default.createElement("option",{value:"3"},"=3"),r.default.createElement("option",{value:"5"},"=5")))),r.default.createElement("div",{id:"gaussCurveArea",style:{textAlign:"center"}}))}},{key:"switchFlareOption",value:function(){var t=$("input[name=flareOptions]:checked").val();this.setState({flareOption:t})}},{key:"selectFlareMethod",value:function(){var t=$("input[name=flareMethods]:checked").val();this.setState({flareOption:"automatic "+t})}},{key:"selectFlareAveMaximum",value:function(){this.setState({flareOption:"automatic AveMaximum"}),$("img[name=peakFunction]").each((function(){$(this).removeClass("selected")})),$("#peakAveMaximum").addClass("selected")}},{key:"selectFlareAveAve",value:function(){this.setState({flareOption:"automatic AveAve"}),$("img[name=peakFunction]").each((function(){$(this).removeClass("selected")})),$("#peakAveAve").addClass("selected")}},{key:"selectFlareAveDist",value:function(){this.setState({flareOption:"automatic AveDist"}),$("img[name=peakFunction]").each((function(){$(this).removeClass("selected")})),$("#peakAveDist").addClass("selected")}},{key:"clickFlare",value:function(){var t=!this.state.flare;this.setState({flare:t}),l.updateAEOption("flare",t)}},{key:"clickRotation",value:function(){var t=!this.state.rotation;this.setState({rotation:t}),l.updateAEOption("rotation",t)}},{key:"clickAnomaly",value:function(){var t=!this.state.anomaly;this.setState({anomaly:t}),l.updateAEOption("anomaly",t)}},{key:"render",value:function(){return r.default.createElement("div",{id:"AEQuerying",className:"featureArea",style:{padding:"15px"}},r.default.createElement("div",{className:"form-group",name:"AEModeForm"},r.default.createElement("div",{className:"custom-control custom-checkbox"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"flareExtractionCheck",name:"AEMode",value:"flare",onChange:this.clickFlare.bind(this),checked:this.state.flare}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"flareExtractionCheck"},"Flare"),this.flareOptions()),r.default.createElement("div",{id:"rotationExtraction"},r.default.createElement("div",{className:"custom-control custom-checkbox"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",id:"rotationExtractionCheck",name:"AEMode",value:"rotation",onChange:this.clickRotation.bind(this),checked:this.state.rotation}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"rotationExtractionCheck"},"Rotation")),this.rotationOptions()),r.default.createElement("div",{className:"custom-control custom-checkbox"},r.default.createElement("input",{type:"checkbox",className:"custom-control-input",name:"AEMode",value:"anomaly",id:"anomalyExtractionCheck",onChange:this.clickAnomaly.bind(this),checked:this.state.anomaly}),r.default.createElement("label",{className:"custom-control-label",htmlFor:"anomalyExtractionCheck"},"Anomaly"))),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"runAutomaticExtractionBtn",style:{float:"right"},onClick:this.clickRunButton.bind(this)},"Run"))}}]),e}(r.default.Component);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=m(n(0)),a=p(n(7)),o=n(19),s=p(n(17)),l=p(n(6)),u=m(n(23)),c=m(n(3)),h=m(n(11)),f=m(n(66)),d=m(n(4));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}a.selection.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var v=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.margin={top:10,bottom:30,right:10,left:50},n.id=t.id,n.divID=t.divID,n.SPID="QBE_SP_Selector",n.data=c.default.getData(n.id);var i=f.default.getTimeRange(n.id);return n.timeRange=void 0===i?[n.data.data.meta.min.z,n.data.data.meta.max.z]:i,n.slicedData=n.data.data.spatial,n.xMinMax=[0,0],n.yMinMax=[0,0],n.selectedPeriod=[-1,-1],n.selector="selectRegion",n.state={yItem:t.yItem,yItemonPanel:t.yItem,width:t.width,height:Math.max(t.height,200)},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;this.initalizeElements(),this.computeRange(this.state.yItem),this.drawScatterplots(),h.default.on("updateFocus",(function(e,n,i){e===t.id&&(i?t.highlightCurrentPlot(n):t.updateCurrentPos(n))})),h.default.on("changePlotColor",(function(e){e===t.id&&t.changePlotColor(h.default.getPlotColor(e))})),d.default.on("switchQueryMode",(function(e){"QBE"===e&&"default"!==d.default.getSource()&&t.setState({width:t.props.width,height:Math.max(t.props.height,200)})})),d.default.on("updateSelectedPeriod",(function(){"QBE"===d.default.getMode()&&Number(d.default.getSource())===t.id&&(t.selectedPeriod=d.default.getSelectedPeriod(),t.highlightSelectedTimePeriod(),t.timeRange=[t.selectedPeriod[0]-10,t.selectedPeriod[1]+10],t.updateTimeRange())})),d.default.on("convertResultIntoQuery",(function(e,n,i){"QBE"===d.default.getMode()&&Number(e)===t.id&&(t.selectedPeriod=d.default.getSelectedPeriod(),t.highlightSelectedTimePeriod(),t.timeRange=[t.selectedPeriod[0]-10,t.selectedPeriod[1]+10],t.updateTimeRange())})),d.default.on("switchQBESelectorSP",(function(e){"reset"===e?t.resetScatterplots():(t.selector=e,t.switchMouseInteraction())})),d.default.on("resetSelection",(function(){t.resetSelection()})),d.default.on("selectTimeInterval",(function(e,n){"QBE"===d.default.getMode()&&Number(e)===t.id&&(t.selectedPeriod=d.default.getSelectedPeriod(),t.highlightSelectedTimePeriod(),t.spBrusher.call(t.brush.move,[t.xScale(t.selectedPeriod[0]),t.xScale(t.selectedPeriod[1])]))}))}},{key:"initalizeElements",value:function(){this.zoom=a.zoom().scaleExtent([.05,10]),this.sp=a.select("#"+this.divID).append("svg").attr("id",this.SPID).attr("class","scatterplot scatterplots"+this.id+" "+this.divID),this.xScale=a.scaleLinear(),this.xScaleTmp=this.xScale,this.xAxis=this.sp.append("g").attr("class","x_axis "+this.divID),this.xAxisText=a.selectAll("g.x_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("text-anchor","middle"),this.yScale=a.scaleLinear(),this.yScaleTmp=this.yScale,this.yAxis=this.sp.append("g").attr("class","y_axis "+this.divID).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.yAxisText=a.selectAll("g.y_axis."+this.divID).append("text").attr("class","axisLabel "+this.divID).attr("fill","black").attr("transform","rotate(-90)").attr("text-anchor","middle"),this.tooltip=a.select("#"+this.divID).append("div").attr("class","tooltip "+this.divID).attr("id","tooltip_"+this.SPID).style("opacity",.75).style("visibility","hidden"),this.line=a.line().x((function(t){return t[0]})).y((function(t){return t[1]})),this.lineH=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineH "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.lineV=this.sp.append("path").attr("stroke","orange").attr("fill","none").attr("class","currentLineV "+this.divID+" scatterplots"+this.id).style("opacity",.75).style("visibility","hidden"),this.clip=this.sp.append("defs").append("clipPath").attr("id","clipScatterplots_"+this.SPID).append("rect"),this.point_g=this.sp.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")").attr("clip-path","url(#clipScatterplots_"+this.SPID+")").classed("points_g",!0);var t=this.state.yItem;this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").select((function(e){return"z"in e&&t in e?this:null})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id),this.brush=a.brushX(),this.spBrusher=this.sp.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")").attr("clip-path","url(#clipScatterplots_"+this.SPID+")").attr("class","brush");var e=this.props.width,n=Math.max(this.props.height,200);this.setState({width:e,height:n})}},{key:"drawScatterplots",value:function(){var t=this.SPID,e=this.margin,n=this.state.width,i=this.state.height,r=n-this.margin.left-this.margin.right,s=i-this.margin.top-this.margin.bottom,l=this.state.yItem;this.zoom.extent([[0,0],[r,s]]).on("zoom",this.zoomed().bind(this)),this.sp.attr("width",n).attr("height",i).call(this.zoom).on("dblclick.zoom",null).on("mousedown.zoom",null),this.brush.extent([[0,0],[r,s]]).on("start brush",this.brushed().bind(this)).on("end",this.brushedEnd().bind(this)),this.spBrusher.call(this.brush),this.xScale.domain(this.xMinMax).nice().range([0,r]),this.xScaleTmp=this.xScale,this.xMinMax=this.xScale.domain(),this.xLabel=a.axisBottom(this.xScale).ticks(10).tickSize(-s).tickFormat(o.tickFormatting),this.xAxis.attr("transform","translate("+this.margin.left+","+(this.margin.top+s)+")").call(this.xLabel),this.xAxisText.attr("x",r/2).attr("y",this.margin.bottom/2+10).text(this.data.data.lookup.z),this.yScale.domain(this.yMinMax).nice().range([s,0]),this.yScaleTmp=this.yScale,this.yMinMax=this.yScale.domain(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickSize(-r).tickFormat(o.tickFormatting),this.yAxis.call(this.yLabel),this.yAxisText.attr("x",-s/2).attr("y",-this.margin.left/2-10).text(this.data.data.lookup[l]).on("click",function(){var n=a.select("#changeYAxisPanel_"+t);if("visible"===n.style("visibility"))n.transition().duration(50).style("visibility","hidden"),this.setState({yItemonPanel:this.state.yItem});else{var i=document.getElementById("changeXAxisPanel_"+t).clientHeight;document.getElementById("changeXAxisPanel_"+t).clientWidth;n.style("transform","translate("+e.left+"px,"+(s/2+e.top-i/2)+"px)").style("visibility","visible")}}.bind(this)).on("mouseover",(function(){a.select(this).style("fill","orange")})).on("mouseout",(function(){a.select(this).style("fill","black")}));var u=[[0,this.margin.top],[r,this.margin.top]],f=[[this.margin.left,0],[this.margin.left,s]];if(this.lineH.attr("d",this.line(u)),this.lineV.attr("d",this.line(f)),this.clip.attr("width",r).attr("height",s),this.data.data.merge){for(var d={},p=this.data.name.split(","),m=[],v=0;v<p.length;v++){var g=c.default.getIdFromName(p[v]);d[p[v]]=v;var y=p[v].split("+");if(y.length>1)for(var b=0;b<y.length;b++)d[y[b]]=v;m.push(h.default.getPlotColor(g))}this.points.attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(t){return this.yScale(t[l])}.bind(this)).attr("fill",(function(t){return m[d[t.source]]})).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var x=h.default.getPlotColor(this.id);this.points.attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(t){return this.yScale(t[l])}.bind(this)).attr("fill",x).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}}},{key:"zoomed",value:function(){return function(){var t=this.state.width-this.margin.left-this.margin.right,e=this.state.height-this.margin.top-this.margin.bottom,n=this.state.yItem,i=a.event.transform.rescaleX(this.xScale),r=a.event.transform.rescaleY(this.yScale);this.xScaleTmp=i,this.yScaleTmp=r,this.xMinMax=i.domain(),this.yMinMax=r.domain(),this.xAxis.call(this.xLabel.scale(i)),this.yAxis.call(this.yLabel.scale(r)),this.points.attr("cx",(function(t){return i(t.z)})).attr("cy",(function(t){return r(t[n])})),this.spBrusher.call(this.brush.move,[i(this.selectedPeriod[0]),i(this.selectedPeriod[1])]);var o=a.select("circle.current."+this.divID);if(o._groups[0][0]){var s=o.attr("cx"),l=o.attr("cy");l<=0||e<=l?this.lineH.attr("transform","translate("+this.margin.left+","+l+")").style("visibility","hidden"):this.lineH.transition().duration(0).attr("transform","translate("+this.margin.left+","+l+")").style("visibility","visible"),s<=0||t<=s?this.lineV.attr("transform","translate("+s+","+this.margin.top+")").style("visibility","hidden"):this.lineV.transition().duration(0).attr("transform","translate("+s+","+this.margin.top+")").style("visibility","visible")}}}},{key:"brushed",value:function(){return function(){var t=(a.event.selection||this.xScaleTmp.range).map(this.xScaleTmp.invert,this.xScaleTmp);this.selectedPeriod=t}}},{key:"brushedEnd",value:function(){return function(){if("QBE"===d.default.getMode()&&Number(d.default.getSource())===this.id){var t=d.default.getSelectedPeriod();(Math.abs(t[0]-this.selectedPeriod[0])>1e-5||Math.abs(t[1]-this.selectedPeriod[1])>1e-5)&&(l.selectPeriodfromSP(this.selectedPeriod),this.selectedPeriod[1]-this.selectedPeriod[0]>0?(this.highlightSelectedTimePeriod(),this.timeRange=[this.selectedPeriod[0]-10,this.selectedPeriod[1]+10],this.updateTimeRange()):(this.resetSelection(),this.timeRange=[this.data.data.meta.min.z,this.data.data.meta.max.z],this.updateTimeRange()))}}}},{key:"spMouseOver",value:function(){var t=this.tooltip,e=this.data,n=this.state.yItem;return function(i){a.select(this).attr("stroke-width",1).attr("stroke","black"),t.transition().duration(50).style("visibility","visible"),t.html("<i>"+e.data.lookup.z+"</i>: "+i.z+"<br/><i>"+e.data.lookup[n]+"</i>: "+i[n]).style("left",a.event.pageX+20+"px").style("top",a.event.pageY-30+"px")}}},{key:"spMouseOut",value:function(){var t=this.tooltip;return function(e){var n=a.select(this);n.style("fill")!==a.color("red").toString()&&(n.attr("stroke-width",.5).attr("stroke","dimgray"),n.attr("class").indexOf("current")<0?n.attr("stroke-width",.5).attr("stroke","dimgray"):n.attr("stroke","orange").attr("stroke-width",1)),t.transition().duration(150).style("visibility","hidden")}}},{key:"spDblClick",value:function(){var t=this.id;return function(e){s.searchTime(t,e.z)}}},{key:"resetScatterplots",value:function(){var t=this.state.width-this.margin.left-this.margin.right,e=this.state.height-this.margin.top-this.margin.bottom;switch(this.timeRange=[this.data.data.meta.min.z,this.data.data.meta.max.z],this.updateTimeRange(),this.zoom=a.zoom().scaleExtent([.05,10]).extent([[0,0],[t,e]]).on("zoom",this.zoomed().bind(this)),this.selector){case"selectRegion":this.sp.call(this.zoom).call(this.zoom.transform,a.zoomIdentity).on("dblclick.zoom",null).on("mousedown.zoom",null);break;case"move":this.sp.call(this.zoom).call(this.zoom.transform,a.zoomIdentity).on("dblclick.zoom",null)}}},{key:"highlightCurrentPlot",value:function(t){var e=this.margin,n=this.divID,i=t+this.data.data.spatial[0].z,r=a.selectAll("svg."+n),o=this.state.yItem;function s(t){var i=a.select(this),r=(i.attr("class").split(" ")[1],a.select("svg."+n)),o=r.selectAll(".currentLineH"),s=r.selectAll(".currentLineV");o.transition().duration(0).style("visibility","visible").attr("transform","translate("+e.left+","+i.attr("cy")+")"),s.transition().duration(0).style("visibility","visible").attr("transform","translate("+i.attr("cx")+","+e.top+")")}r.each((function(t){var e=a.select(this),n=e.selectAll("circle"),r=e.attr("class").split(" ");n.attr("stroke-width",.5).attr("stroke","dimgray").attr("class",r[1]+" "+r[2]);var l=n.filter((function(t){return t.z===i&&o in t}));l._groups.length>0&&l.attr("stroke","orange").attr("stroke-width",1).attr("class",r[1]+" "+r[2]+" current").moveToFront().each(s)}))}},{key:"updateCurrentPos",value:function(t){var e=this.state.width-this.margin.left-this.margin.right,n=a.scaleLinear().domain([this.xMinMax[0],this.xMinMax[1]]).range([0,e]),i=t+this.data.data.spatial[0].z;this.lineH.style("visibility","hidden"),this.lineV.transition().duration(0).style("visibility","visible").attr("transform","translate("+n(i)+","+this.margin.top+")")}},{key:"changePlotColor",value:function(t){a.select("#"+this.divID).selectAll("circle").attr("fill",t)}},{key:"onSelectYItem",value:function(t){this.setState({yItemonPanel:t.target.value})}},{key:"onClickYAxisDone",value:function(t){this.setState({yItem:this.state.yItemonPanel}),this.computeRange(this.state.yItemonPanel),this.updateScatterplots(this.state.yItemonPanel),this.yAxisText.text(this.data.data.lookup[this.state.yItemonPanel]),a.select("#changeYAxisPanel_"+this.SPID).transition().duration(50).style("visibility","hidden")}},{key:"computeRange",value:function(t){this.slicedData=this.data.data.spatial.filter(function(t){return this.timeRange[0]<=t.z&&t.z<=this.timeRange[1]}.bind(this)),this.xMinMax=this.timeRange,this.yMinMax=a.extent(this.slicedData,(function(e){return e[t]}))}},{key:"updateScatterplots",value:function(t){if(this.xScale.domain(this.xMinMax).nice(),this.yScale.domain(this.yMinMax).nice(),this.xMinMax=this.xScale.domain(),this.yMinMax=this.yScale.domain(),this.points.remove(),this.data.data.merge){for(var e={},n=this.data.name.split(","),i=[],r=0;r<n.length;r++){var a=c.default.getIdFromName(n[r]);e[n[r]]=r;var o=n[r].split("+");if(o.length>1)for(var s=0;s<o.length;s++)e[o[s]]=r;i.push(h.default.getPlotColor(a))}this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(e){return this.yScale(e[t])}.bind(this)).select((function(e){return z in e&&t in e?this:null})).attr("fill",(function(t){return i[e[t.source]]})).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}else{var l=h.default.getPlotColor(this.id);this.points=this.point_g.selectAll("circle").data(this.slicedData).enter().append("circle").attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(e){return this.yScale(e[t])}.bind(this)).select((function(e){return"z"in e&&t in e?this:null})).attr("fill",l).attr("opacity",.7).attr("stroke-width",.5).attr("stroke","dimgray").attr("r",4).attr("class",this.divID+" scatterplots"+this.id).on("mouseover",this.spMouseOver()).on("mouseout",this.spMouseOut()).on("dblclick",this.spDblClick())}this.xAxis.call(this.xLabel.scale(this.xScale)),this.yAxis.call(this.yLabel.scale(this.yScale))}},{key:"highlightSelectedTimePeriod",value:function(){var t=this.selectedPeriod;this.points.attr("stroke","dimgray").attr("stroke-width",.5),this.points.select((function(e){return t[0]<=e.z&&e.z<=t[1]?this:null})).attr("stroke","#d23430").attr("stroke-width",1)}},{key:"updateTimeRange",value:function(){var t=this.state.width-this.margin.left-this.margin.right,e=this.state.height-this.margin.top-this.margin.bottom;this.computeRange(this.state.yItem),this.xScale.domain(this.xMinMax).nice(),this.xScaleTmp=this.xScale,this.xMinMax=this.xScale.domain(),this.xLabel=a.axisBottom(this.xScale).ticks(10).tickSize(-e).tickFormat(o.tickFormatting),this.xAxis.transition().duration(500).call(this.xLabel.scale(this.xScale)),this.yScale.domain(this.yMinMax).nice(),this.yScaleTmp=this.yScale,this.yMinMax=this.yScale.domain(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickSize(-t).tickFormat(o.tickFormatting),this.yAxis.transition().duration(500).call(this.yLabel.scale(this.yScale)),this.points.attr("cx",function(t){return this.xScale(t.z)}.bind(this)).attr("cy",function(t){return this.yScale(t[this.state.yItem])}.bind(this)),this.spBrusher.call(this.brush.move,[this.xScale(this.selectedPeriod[0]),this.xScale(this.selectedPeriod[1])])}},{key:"resetSelection",value:function(){this.selectedPeriod=[-1,-1],this.points.attr("stroke","dimgray").attr("stroke-width",.5)}},{key:"switchMouseInteraction",value:function(){var t=this.state.width-this.margin.left-this.margin.right,e=this.state.height-this.margin.top-this.margin.bottom;switch(this.zoom=a.zoom().scaleExtent([.05,10]).extent([[0,0],[t,e]]).on("zoom",this.zoomed().bind(this)),this.selector){case"selectRegion":this.sp.call(this.zoom).on("dblclick.zoom",null).on("mousedown.zoom",null),this.spBrusher.attr("class","brush").call(this.brush);break;case"move":this.sp.call(this.zoom).on("dblclick.zoom",null),this.spBrusher.on(".brush",null)}}},{key:"render",value:function(){"feature"===u.default.getMenu()&&a.selectAll("svg#"+this.SPID).size()>0&&this.drawScatterplots();var t=[],e=this.data.data.lookup;for(var n in e){var i="";(i=e[n].length>1?e[n].join(","):e[n]).indexOf("JD")<0?t.push(r.default.createElement("div",{className:"form-check",key:i},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:i},i))):t.unshift(r.default.createElement("div",{className:"form-check",key:i},r.default.createElement("input",{type:"radio",name:"selectYAxisForm_"+this.SPID,value:n,checked:this.state.yItemonPanel===n,onChange:this.onSelectYItem.bind(this)}),r.default.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox1",key:i},i)))}return r.default.createElement("div",{id:"scatterplotsSelectors_"+this.SPID},r.default.createElement("div",{className:"overlayPanel",id:"changeYAxisPanel_"+this.SPID,style:{visibility:"hidden",textAlign:"center"}},r.default.createElement("h6",null,"Change y axis"),r.default.createElement("div",{id:"changeYAxisItem_"+this.SPID,style:{float:"left",textAlign:"left"}},r.default.createElement("form",{id:"selectYAxisForm_"+this.SPID},t)),r.default.createElement("button",{className:"btn btn-primary btn-sm",id:"changeYAxisBtn_"+this.SPID,onClick:this.onClickYAxisDone.bind(this)},"Done")))}}]),e}(r.default.Component);e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=x(n(0)),o=(x(n(46)),x(n(307))),s=x(n(308)),l=x(n(309)),u=b(n(22)),c=b(n(45)),h=b(n(17)),f=b(n(25)),d=b(n(31)),p=b(n(6)),m=x(n(4)),v=x(n(3)),g=n(19),y=b(n(44));function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.LCWidth=300,n.LCHeight=200,n.optimalWarpPath=null,n.state={shownResults:[],LC:[],selected:{},accessibility:"private",mode:m.default.getMode(),AEOptions:m.default.getAEOptions()},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){var t=this;$("#topKResults").val(20),m.default.on("setExtractionResults",(function(){t.setState({selected:{}}),"block"===$("#resultDetailArea").css("display")&&u.toggleExtractionDetailPanel()})),m.default.on("showLineCharts",(function(e){t.setState({LC:e})})),m.default.on("updateSelectedResult",(function(e,n,i){t.LCWidth=Math.max(300,n),t.LCHeight=Math.max(200,i),e.path&&(t.optimalWarpPath=e.path),t.setState({selected:e})})),m.default.on("clearResults",(function(){t.setState({shownResults:[]})})),m.default.on("updateShownResults",(function(e){t.setState({shownResults:e})})),m.default.on("selectResultFromTimeline",(function(e){var n=$("#extractionDetailLC").width();t.LCWidth=Math.max(300,n),t.LCHeight=200,e.path&&(t.optimalWarpPath=e.path),t.setState({selected:e})})),m.default.on("switchQueryMode",(function(){t.setState({mode:m.default.getMode()})})),m.default.on("updateAEOption",(function(){t.setState({AEOptions:m.default.getAEOptions()})}))}},{key:"updateOrder",value:function(){var t=document.getElementById("resultOrderList"),e=t.selectedIndex,n=t.options[e].value;p.updateOrder(n),c.showExtractionResults()}},{key:"updateKValue",value:function(){p.updateKValue(Number($("#topKResults").val())),$("#topKLabelResults").text("Top "+$("#topKResults").val()+" results"),c.showExtractionResults()}},{key:"updateDistanceThreshold",value:function(){p.updateDistanceThreshold($("#distanceThreshold").val()),c.showExtractionResults()}},{key:"orderOfResults",value:function(){return a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"left",marginLeft:"1rem"},onChange:this.updateOrder.bind(this)},a.default.createElement("label",{className:"col-form-label col-form-label-sm",style:{marginRight:"0.5rem"}},"Sort results by"),a.default.createElement("select",{id:"resultOrderList",className:"custom-select custom-select-sm",style:{width:"7rem"}},c.updateSortResultsPulldown()))}},{key:"distanceThreshold",value:function(){return a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"left",marginLeft:"1rem"}},a.default.createElement("label",{className:"col-form-label col-form-label-sm",style:{marginRight:"0.5rem"}},"Distance threshold"),a.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"threshold",id:"distanceThreshold",onChange:this.updateDistanceThreshold.bind(this),style:{width:"7rem"}}))}},{key:"topKResults",value:function(){var t=!1;return"AE"===this.state.mode&&(this.state.AEOptions.flare||this.state.AEOptions.rotation)&&(t=!0),a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"left",marginLeft:"1rem"}},a.default.createElement("label",{className:"col-form-label col-form-label-sm",style:{marginRight:"0.5rem"}},"Top k result"),a.default.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"k value",id:"topKResults",disabled:t,onChange:this.updateKValue.bind(this),style:{width:"7rem"}}))}},{key:"exportResultsButton",value:function(){return a.default.createElement("div",{className:"form-group form-inline resultMenu",style:{float:"right"}},a.default.createElement("button",{id:"exportResultsBtn",className:"btn btn-primary btn-sm",onClick:this.exportResults.bind(this)},"Export"))}},{key:"exportResults",value:function(){var t={};t.parameters=m.default.getParameters(),"AE"!==m.default.getMode&&(t.query=m.default.getQuery()),t.results=[];for(var e=0;e<this.state.shownResults.length;e++){var n={};for(var i in this.state.shownResults[e])"id"===i?n.fileName=v.default.getFileName(Number(this.state.shownResults[e][i])):n[i]=this.state.shownResults[e][i];t.results.push(n)}t=JSON.stringify(t,null,"\t");var r="extractionResults_"+y.createDateLabel()+".json",a=new Blob([t],{type:"application/json"}),o=(window.URL||window.webkitURL).createObjectURL(a),s=document.createElement("a");s.download=decodeURI(r),s.href=o,s.click()}},{key:"updateAccessibility",value:function(){var t=$("input[name=accessibility]:checked").val();this.setState({accessibility:t})}},{key:"addComment",value:function(){document.getElementById("commentFormFeatureExtraction").style.display="block"}},{key:"cancelComment",value:function(){document.getElementById("commentFormFeatureExtraction").style.display="none"}},{key:"submitComment",value:function(t){var e=y.getUniqueId(),n=$("#userNameComment").val(),i=this.state.accessibility,r=$("#textareaComment").val(),a=(new Date).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});if("private"===i){var o={id:e,timeStamp:a,fileName:v.default.getData(this.state.selected.id).name,userName:n,start:this.state.selected.start,comment:r};y.addCommentData(o)}document.getElementById("commentFormFeatureExtraction").style.display="none",$("#userNameComment").val(""),$("#textareaComment").val(""),d.updatePrivateComment()}},{key:"showTT",value:function(){f.selectMenu("visualization"),this.state.selected.angle?h.showRotationCenter(this.state.selected.id,[this.state.selected.start,this.state.selected.start+this.state.selected.period],this.state.selected.center):this.state.selected.period?h.showTimeTubesOfTimeSlice(this.state.selected.id,[this.state.selected.start,this.state.selected.start+this.state.selected.period]):h.searchTime(this.state.selected.id,this.state.selected.start)}},{key:"showLegendOfLC",value:function(){return a.default.createElement("svg",{id:"lineChartLegend",height:"20px",width:"300px"},a.default.createElement("line",{x1:"0",y1:"12",x2:"40",y2:"12",style:{stroke:"#80b139",strokeWidth:3}}),a.default.createElement("text",{x:"50px",y:"15px",fill:"black",fontSize:"0.8rem"},"Query"),a.default.createElement("line",{x1:"100",y1:"12",x2:"140",y2:"12",style:{stroke:"#f26418",strokeWidth:3}}),a.default.createElement("text",{x:"150px",y:"15px",fill:"black",fontSize:"0.8rem"},"Result"))}},{key:"splitResultsByData",value:function(){for(var t=this.state.shownResults.slice().sort(c.sortResults("data")),e={},n=0,i=[],r=t[0].id;n<t.length;)t[n].id!==r?(e[r]=i,r=t[n].id,i=[]):i.push(t[n]),n++;return i.length>0&&(e[r]=i),e}},{key:"render",value:function(){var t=[],e=[];if(Object.keys(this.state.selected).length>0){if(this.state.selected.period&&!this.state.selected.angle){var n=v.default.getDataArray(this.state.selected.id,1),r=m.default.getQuery();if(r.r){for(var h=[],f=[],d=0;d<n.arrayLength;d++){var p=Math.sqrt(Math.pow(n.x[d],2)+Math.pow(n.y[d],2)),y=c.convertRadToDeg(Math.atan2(n.x[d],n.y[d]));h.push(p),f.push(y)}var b={};for(var x in b.r=h,b.theta=f,n)"x"!==x&&"y"!==x&&(b[x]=n[x]);n=b}var _={},w=n.z.indexOf(this.state.selected.start),S=n.z.indexOf(this.state.selected.start+this.state.selected.period);for(var E in r)if(Array.isArray(r[E])&&Array.isArray(n[E])&&"z"!==E){if(r[E].indexOf(null)>=0){for(var M=!1,T=0;T<r[E].length;T++)if(r[E][T]){M=!0;break}if(!M)continue}_[E]=n[E].slice(w,S+1),t.push(a.default.createElement(o.default,{key:E,id:this.state.selected.id,item:E,query:r[E],target:_[E],width:this.LCWidth,height:this.LCHeight,path:"Object"==typeof this.optimalWarpPath?this.optimalWarpPath[E]:this.optimalWarpPath}))}}for(var C in this.state.selected)if("id"!==C&&"path"!==C&&!Array.isArray(this.state.selected[C])){var k=void 0;k="V"===C?"Flx(V)":u.transformCamelToSentence(C);var P=this.state.selected[C];if("object"===(void 0===P?"undefined":i(P))){var A="(";for(var O in P)A+=(0,g.formatValue)(P[O])+", ";A=A.slice(0,A.length-2),P=A+=")"}else"string"==typeof P||"number"==typeof P&&(P=(0,g.formatValue)(P));e.push(a.default.createElement("tr",{id:"extractionDetail"+k,key:C},a.default.createElement("td",null,k),a.default.createElement("td",{id:"extractionDetail"+k+"Value"},P)))}var L=v.default.getData(this.state.selected.id).data.lookup,I=m.default.getIgnored();if(I){var N=[];for(var R in L)I.indexOf(R)<0&&"z"!==R&&N.push(R);for(var D="",z=0;z<N.length;z++)D+=L[N[z]]+", ";D=D.slice(0,D.length-2),e.push(a.default.createElement("tr",{id:"extractionDetailVariables",key:"variables"},a.default.createElement("td",null,"Variables"),a.default.createElement("td",{id:"extractionDetailVariablesValue"},D)))}}var B=[];if(this.state.shownResults.length>0){var F=this.splitResultsByData();for(var j in F)B.push(a.default.createElement("div",{className:"row",key:j},a.default.createElement("div",{className:"col-2",style:{wordWrap:"anywhere",position:"relative",fontSize:"0.7rem",lineHeight:"90%"}},a.default.createElement("label",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)"}},v.default.getFileName(Number(j)))),a.default.createElement("div",{className:"col-10",id:"resultTimelineArea_"+j},a.default.createElement(s.default,{id:Number(j),results:F[j],height:40}))))}return a.default.createElement("div",{id:"extractionResults",className:"resultElem"},a.default.createElement("div",{id:"resultMenus",style:{overflow:"hidden",height:"2rem"}},this.topKResults(),this.distanceThreshold(),this.orderOfResults(),this.exportResultsButton()),a.default.createElement("div",{id:"mainResultArea"},a.default.createElement("div",{id:"distanceHistogramArea",className:"resultAreaElem",style:{display:"QBE"===this.state.mode||"QBS"===this.state.mode?"block":"none"}},a.default.createElement("h5",null,"Distance distribution (number vs. distance)"),a.default.createElement("label",{id:"topKLabelResults"}),a.default.createElement(l.default,null)),a.default.createElement("div",{id:"resultTimelinesArea",className:"container resultAreaElem"},B),a.default.createElement("div",{id:"resultDetail",style:{position:"relative",height:"1.5rem",marginBottom:"0px"}},a.default.createElement("div",{id:"resultDetailArea",className:"container",style:{display:"none"}},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-3",id:"extractionDetailThumbnail"},a.default.createElement("canvas",{id:"detailThumbnailCanvas"})),a.default.createElement("div",{className:"col-3",id:"extractionDetailInfo"},a.default.createElement("table",{id:"extractionDetailInfoTable",style:{width:"100%"}},a.default.createElement("tbody",null,e)),a.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"showTTBtn",style:{float:"right"},onClick:this.showTT.bind(this)},"TimeTubes"),a.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"commentBtn",style:{float:"right"},onClick:this.addComment.bind(this)},"Comment")),a.default.createElement("div",{className:"col",id:"extractionDetailLC"},this.showLegendOfLC(),t))),a.default.createElement("div",{className:"formPopup",id:"commentFormFeatureExtraction"},a.default.createElement("form",{className:"formContainer"},a.default.createElement("h6",null,"User name"),a.default.createElement("input",{type:"text",id:"userNameComment",className:"form-control form-control-sm",placeholder:"Enter Name",name:"name",required:!0}),a.default.createElement("h6",null,"Accessibility"),a.default.createElement("div",{className:"form-check form-inline",id:"accessibility",onChange:this.updateAccessibility.bind(this),style:{paddingLeft:"0px"}},a.default.createElement("div",{className:"custom-control custom-radio"},a.default.createElement("input",{type:"radio",id:"privateComment",name:"accessibility",value:"private",checked:"private"===this.state.accessibility,className:"custom-control-input",readOnly:!0}),a.default.createElement("label",{className:"custom-control-label",htmlFor:"privateComment"},"Private")),a.default.createElement("div",{className:"custom-control custom-radio",style:{marginLeft:"1.5rem"}},a.default.createElement("input",{type:"radio",id:"publicComment",name:"accessibility",value:"public",checked:"public"===this.state.accessibility,disabled:!0,className:"custom-control-input",readOnly:!0}),a.default.createElement("label",{className:"custom-control-label",htmlFor:"publicComment"},"Public"))),a.default.createElement("h6",null,"Comment"),a.default.createElement("textarea",{className:"form-control",id:"textareaComment",placeholder:"Enter comment",rows:"3",style:{marginBottom:"0.5rem"}}),a.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"submitCommentBtn",onClick:this.submitComment.bind(this),style:{float:"right"}},"Submit"),a.default.createElement("button",{className:"btn btn-secondary btn-sm",type:"button",id:"cancelCommentBtn",style:{float:"right"},onClick:this.cancelComment.bind(this)},"Cancel"))),a.default.createElement("button",{id:"collapseResultDetailPanel",className:"btn btn-primary btn-sm",style:{width:"4rem",height:"1.5rem",position:"absolute",right:"0.5rem"},onClick:u.toggleExtractionDetailPanel},"Open")),a.default.createElement("label",{id:"matchingStatus"}),a.default.createElement("div",{id:"resultsArea"})))}}]),e}(a.default.Component);e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(7)),o=n(19),s=(l(n(4)),l(n(3)));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.margin={top:30,bottom:30,right:30,left:60},n.tickWidth=10,n.id=t.id,n.item=t.item,n.itemName=s.default.getData(n.id).data.lookup[n.item],void 0===n.itemName&&(n.itemName=n.item),n.query=t.query,n.target=t.target,n.path=t.path,n.filter=!1,n.query.indexOf(null)>=0&&(n.filter=!0),n.yMinMax,n.filter){var i=n.query.filter((function(t){return null!==t}));if(i.length>0){for(var r=i[0][0],a=i[0][1],o=1;o<i.length;o++)i[o][0]<r&&(r=i[o][0]),a<i[o][1]&&(a=i[o][1]);n.yMinMax=[Math.min(r,Math.min.apply(null,n.target)),Math.max(a,Math.max.apply(null,n.target))]}else n.yMinMax=[Math.min.apply(null,n.target),Math.max.apply(null,n.target)]}else n.yMinMax=[Math.min(Math.min.apply(null,n.query),Math.min.apply(null,n.target)),Math.max(Math.max.apply(null,n.query),Math.max.apply(null,n.target))];return n.state={width:t.width,height:t.height},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){this.initLineChart()}},{key:"componentWillUnmount",value:function(){}},{key:"initLineChart",value:function(){var t=this.state.width-this.margin.left-this.margin.right,e=this.state.height-this.margin.top-this.margin.bottom;if(this.parentArea=a.select("#lineChartArea_"+this.item),this.svg=this.parentArea.append("svg").attr("id","lineChart_"+this.item).attr("class","lineChart").attr("width",this.state.width).attr("height",this.state.height),this.graphName=this.svg.append("text").attr("x",this.margin.left+t/2).attr("y",this.margin.top).attr("text-anchor","middle").style("fill","black").style("font-size","0.8rem").text(this.itemName),this.xScale=a.scaleLinear().domain([0,this.filter?this.target.length-1:Math.max(this.query.length-1,this.target.length-1)]).nice().range([0,t]),this.xLabel=a.axisBottom(this.xScale).tickFormat(o.tickFormatting),this.xAxis=this.svg.append("g").attr("class","x_axis").attr("transform","translate("+this.margin.left+","+(this.margin.top+e)+")").call(this.xLabel),this.yScale=a.scaleLinear().domain(this.yMinMax).nice().range([e,0]),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickFormat(o.tickFormatting),this.yAxis=this.svg.append("g").attr("class","y_axis").attr("transform","translate("+this.margin.left+","+this.margin.top+")").call(this.yLabel),this.filter){for(var n=[],i=0;i<this.query.length;i++)if(this.query[i])for(var r=0;r<this.path.length&&!(this.path[r][1]<i);r++)this.path[r][1]===i&&n.push({x:this.path[r][0],range:this.query[i]});this.ranges=this.svg.selectAll("line.filteredRange").data(n).enter().append("line").attr("class","filteredRange").attr("x1",function(t){return this.xScale(t.x)}.bind(this)).attr("x2",function(t){return this.xScale(t.x)}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeTop=this.svg.selectAll("line.filteredRangeTop").data(n).enter().append("line").attr("class","filteredRangeTop").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[0])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeBottom=this.svg.selectAll("line.filteredRangeBottom").data(n).enter().append("line").attr("class","filteredRangeBottom").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[1])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}else this.queryPath=this.svg.append("path").datum(this.query).attr("fill","none").attr("stroke","#80b139").attr("stroke-width",1.5).attr("id","lineChartQuery_"+this.item).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this))).attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.targetPath=this.svg.append("path").datum(this.target).attr("fill","none").attr("stroke","#f26418").attr("stroke-width",1.5).attr("id","lineChartTarget_"+this.item).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this))).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}},{key:"updateLineChart",value:function(){if(this.id=this.props.id,this.item=this.props.item,this.query=this.props.query,this.target=this.props.target,this.path=this.props.path,this.filter=!1,this.query.indexOf(null)>=0&&(this.filter=!0),this.filter){var t=this.query.filter((function(t){return null!==t}));if(t.length>0){for(var e=t[0][0],n=t[0][1],i=1;i<t.length;i++)t[i][0]<e&&(e=t[i][0]),n<t[i][1]&&(n=t[i][1]);this.yMinMax=[Math.min(e,Math.min.apply(null,this.target)),Math.max(n,Math.max.apply(null,this.target))]}else this.yMinMax=[Math.min.apply(null,this.target),Math.max.apply(null,this.target)]}else this.yMinMax=[Math.min(Math.min.apply(null,this.query),Math.min.apply(null,this.target)),Math.max(Math.max.apply(null,this.query),Math.max.apply(null,this.target))];this.svg.selectAll("line.filteredRange").remove(),this.svg.selectAll("line.filteredRangeTop").remove(),this.svg.selectAll("line.filteredRangeBottom").remove(),this.changeLineChart()}},{key:"changeLineChart",value:function(){if(this.xScale.domain([0,Math.max(this.query.length,this.target.length)]).nice(),this.xLabel=a.axisBottom(this.xScale).tickFormat(o.tickFormatting),this.xAxis.call(this.xLabel),this.yScale.domain(this.yMinMax).nice(),this.yLabel=a.axisLeft(this.yScale).ticks(5).tickFormat(o.tickFormatting),this.yAxis.call(this.yLabel),this.filter){for(var t=[],e=0;e<this.query.length;e++)if(this.query[e])for(var n=0;n<this.path.length&&!(this.path[n][1]<e);n++)this.path[n][1]===e&&t.push({x:this.path[n][0],range:this.query[e]});this.ranges=this.svg.selectAll("line.filteredRange").data(t).enter().append("line").attr("class","filteredRange").attr("x1",function(t){return this.xScale(t.x)}.bind(this)).attr("x2",function(t){return this.xScale(t.x)}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeTop=this.svg.selectAll("line.filteredRangeTop").data(t).enter().append("line").attr("class","filteredRangeTop").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[0])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[0])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.rangeBottom=this.svg.selectAll("line.filteredRangeBottom").data(t).enter().append("line").attr("class","filteredRangeBottom").attr("x1",function(t){return this.xScale(t.x)-this.tickWidth/2}.bind(this)).attr("x2",function(t){return this.xScale(t.x)+this.tickWidth/2}.bind(this)).attr("y1",function(t){return this.yScale(t.range[1])}.bind(this)).attr("y2",function(t){return this.yScale(t.range[1])}.bind(this)).attr("transform","translate("+this.margin.left+","+this.margin.top+")")}else this.queryPath.datum(this.query).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this)));this.targetPath.datum(this.target).attr("d",a.line().x(function(t,e){return this.xScale(e)}.bind(this)).y(function(t){return this.yScale(t)}.bind(this)))}},{key:"render",value:function(){return document.getElementById("lineChartArea_"+this.item)&&this.updateLineChart(),r.default.createElement("div",{id:"lineChartArea_"+this.item})}}]),e}(r.default.Component);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=p(n(0)),o=d(n(7)),s=d(n(6)),l=d(n(22)),u=n(19),c=p(n(23)),h=p(n(3)),f=p(n(4));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}o.selection.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.data=h.default.getData(t.id),n.state={id:t.id,results:t.results,height:t.height,width:0},n.resultsVQ=null,n.resultsFlare=null,n.resultsRotation=null,n.resultsAnomaly=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"render",value:function(){return a.default.createElement("div",{id:"resultTimeline_"+this.state.id,className:"timeline"})}},{key:"componentDidMount",value:function(){var t=this;this.initializeTimeline(),this.setUpTimeline(),f.default.on("updateShownResults",(function(e){t.updateTimeline()})),f.default.on("switchQueryMode",(function(e){t.setState({width:$("#resultTimelineArea_"+t.state.id).width()}),t.resizeTimeLine()})),c.default.on("resizeExtractionResultsArea",(function(){t.setState({width:$("#resultTimelineArea_"+t.state.id).width()}),t.resizeTimeLine()}))}},{key:"componentWillUnmount",value:function(){var t=document.getElementById("resultTimeline_"+this.state.id);if(t){for(;t.firstChild;)t.removeChild(t.firstChild);t.parentNode.removeChild(t)}}},{key:"initializeTimeline",value:function(){this.svg=o.select("#resultTimeline_"+this.state.id).append("svg").attr("id","resultTimelineSVG_"+this.state.id),this.xScale=o.scaleLinear().domain([this.data.data.meta.min.z,this.data.data.meta.max.z]),this.xAxis=this.svg.append("g").attr("class","x-axis"),this.tooltip=o.select("#resultTimeline_"+this.state.id).append("div").attr("class","tooltip").attr("id","tooltipResultTimeline_"+this.state.id).style("opacity",.75).style("visibility","hidden")}},{key:"updateTimeline",value:function(){this.data=h.default.getData(this.props.id),this.setState({id:this.props.id,results:this.props.results,height:this.props.height}),this.resultsVQ=null,this.resultsFlare=null,this.resultsRotation=null,this.resultsAnomaly=null,this.setUpTimeline()}},{key:"setUpTimeline",value:function(){var t=$("#resultTimelineArea_"+this.state.id).width(),e=this.state.height;this.setState({width:t});var n=20,i=t-n-20,r=e;this.svg.attr("width",t).attr("height",e),this.xScale.domain([this.data.data.meta.min.z,this.data.data.meta.max.z]).nice().range([0,i]),this.xLabel=o.axisBottom(this.xScale).ticks(10).tickSize(10),this.xAxis.attr("transform","translate("+n+","+(r/2-5)+")").call(this.xLabel);var a=this.state.results.filter((function(t){return void 0!==t.distance})),s=this.state.results.filter((function(t){return t.angle})),l=[];this.state.results.forEach((function(t){t.V?l=l.concat(t):t.flares&&(l=l.concat(t.flares))}));var u=this.state.results.filter((function(t){return t.anomalyDegree}));this.svg.selectAll("line.resultsVQ").remove(),this.svg.selectAll("line.resultsRotation").remove(),this.svg.selectAll("circle.resultsFlare").remove(),this.svg.selectAll("circle.resultsAnomaly").remove(),a.length>0&&(this.resultsVQ=this.svg.selectAll("line.resultsVQ").data(a).enter().append("line").attr("class","resultsVQ").attr("x1",function(t){return this.xScale(t.start)}.bind(this)).attr("y1",r/2-5).attr("x2",function(t){return this.xScale(t.start+t.period)}.bind(this)).attr("y2",r/2-5).attr("stroke","#1d95c6").attr("stroke-width",20).attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick())),s.length>0&&(this.resultsRotation=this.svg.selectAll("line.resultsRotation").data(s).enter().append("line").attr("class","resultsRotation").attr("x1",function(t){return this.xScale(t.start)}.bind(this)).attr("y1",r/2-5).attr("x2",function(t){return this.xScale(t.start+t.period)}.bind(this)).attr("y2",r/2-5).attr("stroke","#80b139").attr("stroke-width",20).attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick())),l.length>0&&(this.resultsFlare=this.svg.selectAll("circle.resultsFlare").data(l).enter().append("circle").attr("class","resultsFlare").attr("cx",function(t){return this.xScale(t.start)}.bind(this)).attr("cy",r/2-5).attr("r",10).attr("fill","#f26418").attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick())),u.length>0&&(this.resultsAnomaly=this.svg.selectAll("circle.resultsAnomaly").data(u).enter().append("circle").attr("class","resultsAnomaly").attr("cx",function(t){return this.xScale(t.start)}.bind(this)).attr("cy",r/2-5).attr("r",10).attr("fill","#d23430").attr("opacity",.5).attr("transform","translate("+n+",0)").on("mouseover",this.timelineMouseOver()).on("mouseout",this.timelineMouseOut()).on("click",this.timelineClick()))}},{key:"resizeTimeLine",value:function(){var t=$("#resultTimelineArea_"+this.state.id).width(),e=t-20-20;this.svg.attr("width",t),this.xScale.range([0,e]),this.xLabel=o.axisBottom(this.xScale).ticks(10).tickSize(10),this.xAxis.call(this.xLabel),this.resultsVQ&&this.resultsVQ.attr("x1",function(t){return this.xScale(t.start)}.bind(this)).attr("x2",function(t){return this.xScale(t.start+t.period)}.bind(this)),this.resultsRotation&&this.resultsRotation.attr("x1",function(t){return this.xScale(t.start)}.bind(this)).attr("x2",function(t){return this.xScale(t.start+t.period)}.bind(this)),this.resultsFlare&&this.resultsFlare.attr("cx",function(t){return this.xScale(t.start)}.bind(this)),this.resultsAnomaly&&this.resultsAnomaly.attr("cx",function(t){return this.xScale(t.start)}.bind(this))}},{key:"timelineMouseOver",value:function(){var t=this.tooltip,e=this.xScale,n=this.svg.attr("width");return function(r){var a=o.select(this);a.attr("stroke")?a.attr("stroke","#284a6c").moveToFront():a.attr("fill")&&a.attr("fill","#284a6c").moveToFront(),t.transition().duration(50).style("visibility","visible");var c="";for(var h in r)if("id"!==h&&"start"!==h&&"period"!==h&&"flares"!==h&&"path"!==h){var f=r[h];if("object"===i(r[h])){for(var d in f="(",r[h])f+=(0,u.formatValue)(r[h][d])+", ";f=f.slice(0,f.length-2),f+=")"}else"number"==typeof r[h]&&(f=(0,u.formatValue)(r[h]));c+="<tr><td>"+l.transformCamelToSentence(h)+"</td><td>"+f+"</td></tr>"}if(e(r.start)<n/2)t.html("<table><tbody>"+c+"</tbody></table>").style("left",e(r.start)+50+"px").style("top","10px");else{var p=Number(t.style("width").slice(0,-2));t.html("<table><tbody>"+c+"</tbody></table>").style("left",e(r.start)-p+20+"px").style("top","10px")}s.focusResultfromTimeline(r)}}},{key:"timelineMouseOut",value:function(){var t=this.tooltip;return function(e){var n=o.select(this);e.distance?n.attr("stroke","#1d95c6"):e.angle?n.attr("stroke","#80b139"):e.V?n.attr("fill","#f26418"):e.anomalyDegree&&n.attr("fill","#d23430"),t.transition().duration(100).style("visibility","hidden")}}},{key:"timelineClick",value:function(){return function(t){s.selectResultFromTimeline(t)}}}]),e}(a.default.Component);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=f(n(0)),a=h(n(7)),o=h(n(6)),s=n(19),l=n(45),u=f(n(23)),c=f(n(4));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=n(310),p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.height=100,n.margin={left:30,right:10,top:5,bottom:22},n.results=[],n.bins=[],n.dragFlag=!1,n.handleFlag=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(){return r.default.createElement("div",{id:"distanceHistogram",style:{width:"100%"}})}},{key:"componentDidMount",value:function(){var t=this;this.initHistogram(),u.default.on("resizeExtractionResultsArea",(function(){t.updateHistogram()})),c.default.on("updateShownResults",(function(){var e=c.default.getParameters();("QBE"in e||"QBS"in e)&&(t.results=c.default.getExtractionResults(),t.updateHistogram())}))}},{key:"initHistogram",value:function(){this.svg=a.select("#distanceHistogram").append("svg").attr("id","distanceHistogramSVG"),this.xScale=a.scaleLinear(),this.xAxis=this.svg.append("g").attr("class","x-axis"),this.yScale=a.scaleLinear(),this.yAxis=this.svg.append("g").attr("class","y-axis"),this.brushRect=this.svg.append("rect").attr("id","brushingRectHistogram").style("fill","rgb(119, 119, 119)").style("fill-opacity",.3),this.brushLine=this.svg.append("line").attr("id","brushingLineHistogram").attr("stroke","#80b139").attr("stroke-width",4),this.horizontalLine=this.svg.append("line").attr("id","horizontalLineHistogram").attr("stroke","orange").attr("stroke-width",2).attr("fill","none").style("visibility","hidden")}},{key:"updateHistogram",value:function(){var t=$("#distanceHistogram").width(),e=t-this.margin.left-this.margin.right,n=this.height-this.margin.top-this.margin.bottom;this.svg.attr("width",t).attr("height",this.height);var i=a.extent(this.results,(function(t){return t.distance}));this.xScale.domain(i).range([0,e]).nice(),this.xLabel=a.axisBottom(this.xScale).tickFormat(s.tickFormatting),this.xAxis.attr("transform","translate("+this.margin.left+","+(this.margin.top+n)+")").call(this.xLabel);var r=a.histogram().value((function(t){return t.distance})).domain(this.xScale.domain()).thresholds(this.xScale.ticks(Math.min(20,Math.floor(this.results.length/4))));this.bins=r(this.results),this.yScale.range([n,0]).domain([0,a.max(this.bins,(function(t){return t.length}))]),this.yLabel=a.axisLeft(this.yScale).ticks(5),this.yAxis.attr("transform","translate("+this.margin.left+","+this.margin.top+")").call(this.yLabel),this.svg.selectAll("rect.histogramRect").remove(),this.bars=this.svg.selectAll("rect").data(this.bins).enter().append("rect").attr("class","histogramRect").attr("x",1).attr("transform",function(t){return"translate("+(this.xScale(t.x0)+this.margin.left)+","+(this.yScale(t.length)+this.margin.top)+")"}.bind(this)).attr("width",function(t){return this.xScale(t.x1)-this.xScale(t.x0)-1}.bind(this)).attr("height",function(t){return n-this.yScale(t.length)}.bind(this)).style("fill","#284a6c").style("opacity",.75).on("mouseover",this.mouseOverOnHistogram()).on("mouseout",this.mouseOutFromHistogram());for(var o=c.default.getKValue(),l=0,u=0;u<this.bins.length;u++){if(l+this.bins[u].length>=o){var h=this.xScale(this.bins[u].x0+(this.bins[u].x1-this.bins[u].x0)/this.bins[u].length*(o-l));this.brushRect.attr("x",this.margin.left).attr("y",this.margin.top).attr("width",h).attr("height",this.yScale(0)),this.brushLine.attr("x1",h+this.margin.left).attr("y1",this.margin.top).attr("x2",h+this.margin.left).attr("y2",this.yScale(0)+this.margin.top);break}l+=this.bins[u].length}var f=a.drag().on("start",this.dragStartOnHistogram()).on("drag",this.dragOnHistogram()).on("end",this.dragEndOnHistogram());this.brushLine.call(f),d.element(this.brushLine.node()).toTop()}},{key:"mouseOverOnHistogram",value:function(){var t=this.horizontalLine,e=this.xScale,n=this.yScale,i=this.margin;return function(r){a.selectAll("rect.histogramRect").style("fill","#7b7971"),a.select(this).style("fill","#284a6c"),t.attr("x1",e(e.domain()[0])+i.left).attr("y1",n(r.length)+i.top).attr("x2",e(r.x1)+i.left).attr("y2",n(r.length)+i.top).style("visibility","visible"),d.element(t.node()).toTop()}}},{key:"mouseOutFromHistogram",value:function(){var t=this.horizontalLine;return function(e){a.selectAll("rect.histogramRect").style("fill","#284a6c"),t.style("visibility","hidden")}}},{key:"dragStartOnHistogram",value:function(){return function(){a.select(this).classed("brushingLineHistogram",!0)}}},{key:"dragOnHistogram",value:function(){var t=this.margin,e=this.xScale.range(),n=this.xScale,i=this.bins;return function(){var r=a.select("#brushingLineHistogram"),o=a.event.x;o<=t.left?o=t.left:t.left+e[1]<=o&&(o=t.left+e[1]),r.attr("x1",o).attr("x2",o),a.select("rect#brushingRectHistogram").attr("width",o-t.left);for(var s=a.select("rect#brushingRectHistogram").attr("width"),l=n.invert(s),u=0,c=0;c<i.length;c++)if(i[c].x1<=l)u+=i[c].length;else if(i[c].x0<=l&&l<=i[c].x1){var h=l-i[c].x0;u+=Math.ceil(i[c].length*h/(i[c].x1-i[c].x0));break}$("#topKLabelResults").text("Top "+u+" results")}}},{key:"dragEndOnHistogram",value:function(){var t=this.xScale,e=this.bins;return function(){a.select(this).classed("brushingLineHistogram",!0);for(var n=a.select("rect#brushingRectHistogram").attr("width"),i=t.invert(n),r=0,s=0;s<e.length;s++)if(e[s].x1<=i)r+=e[s].length;else if(e[s].x0<=i&&i<=e[s].x1){var u=i-e[s].x0;r+=Math.ceil(e[s].length*u/(e[s].x1-e[s].x0));break}o.updateKValue(r),$("#topKResults").val(r),$("#topKLabelResults").text("Top "+r+" results"),$("#matchingStatus").text("searching..."),setTimeout(function(){(0,l.showExtractionResults)()}.bind(this),0)}}}]),e}(r.default.Component);e.default=p},function(t,e){!function(){"use strict";var e=function(t){if(!t)throw new Error("a null element specified.");var e=new n;return i(e,t),e};try{t.exports={element:e}}catch(t){Function("return this;")().svgz_element=e}var n=function(){this._element=null};n.prototype.toTop=function(){try{return r(this._element).insertBefore(this._element,null),this}catch(t){throw t}},n.prototype.toBottom=function(){try{var t=r(this._element),e=s(t);return t.insertBefore(this._element,e[0]),this}catch(t){throw t}},n.prototype.moveUp=function(t){try{if(null==t)t=1;else if("number"!=typeof t){if((t=o(this._element,t))<=0)return}else if(t<=0)throw new Error("Invalid number for n that must be positive.");return this.moveRelative(t)}catch(t){throw t}},n.prototype.moveDown=function(t){try{if(null==t)t=-1;else if("number"!=typeof t){if((t=o(this._element,t))>=0)return}else{if(t<=0)throw new Error("Invalid number for n that must be positive.");t=-t}return this.moveRelative(t)}catch(t){throw t}},n.prototype.moveRelative=function(t){try{if(null==t)throw new Error("Invalid number for n of null.");if("number"!=typeof t)throw new Error("Invalid number for n.");var e=r(this._element),n=a(this._element,t);return e.insertBefore(this._element,n),this}catch(t){throw t}},n.prototype.moveTo=function(t){try{var e=r(this._element),n=s(e),i=n.indexOf(this._element);if(null==t)throw new Error("A position must be specified.");if("number"==typeof t){if(t<0||n.length<t)throw new Error("Invalid position specified.")}else{if(r(t)!==e)throw new Error("The target node not found.");t=n.indexOf(t)}var a=t-i;return this.moveRelative(a)}catch(t){throw t}};var i=function(t,e){t._element=e},r=function(t){if(!("parentNode"in t))throw new Error("There is not parentNode");var e=t.parentNode;if(!e)throw new Error("parentNode is undefined");return e},a=function(t,e){var n=r(t),i=s(n),a=i.length,o=i.indexOf(t),l=o+e;l>o&&(l+=1),l<0?l=0:l>=a&&(l=a);var u=l<a?i[l]:null;if(u&&r(u)!==n)throw new Error("parentNode is different for target.");return u},o=function(t,e){var n=r(t),i=s(n),a=i.indexOf(t),o=i.indexOf(e);if(o<0)throw new Error("parentNode is different for target.");return o-a},s=function(t){var e=[];return Array.from(t.childNodes).map((function(t){1==t.nodeType&&e.push(t)})),e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=u(n(0)),a=l(n(44)),o=l(n(31)),s=u(n(23));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={privateComments:a.getDataFromLocalStorage("privateComment")},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){var t=this;$("#privateCommentTable").tablesorter(),s.default.on("selectMenu",(function(e){"comment"===e&&t.setState({privateComments:a.getDataFromLocalStorage("privateComment")})}))}},{key:"privateCommentListTr",value:function(){var t=[];if(this.state.privateComments)for(var e=0;e<this.state.privateComments.length;e++)t.push(r.default.createElement("tr",{key:e,className:"privateCommentBody",id:this.state.privateComments[e].id},r.default.createElement("td",{style:{textAlign:"center"}},r.default.createElement("input",{type:"checkbox",className:this.state.privateComments[e].id+" selectComment",name:"privateCommentSelector"})),r.default.createElement("td",null,this.state.privateComments[e].timeStamp.toLocaleString("en-US")),r.default.createElement("td",null,this.state.privateComments[e].fileName),r.default.createElement("td",null,this.state.privateComments[e].start),r.default.createElement("td",null,this.state.privateComments[e].comment),r.default.createElement("td",null,this.state.privateComments[e].userName)));return t}},{key:"privateCommentListHeader",value:function(){return r.default.createElement("thead",null,r.default.createElement("tr",{id:"privateCommentHeader"},r.default.createElement("th",{className:"col-1"},"Select"),r.default.createElement("th",{className:"col-2 num",value:"timeStamp"},"Date (GMT)"),r.default.createElement("th",{className:"col-2 case",value:"fileName"},"File name"),r.default.createElement("th",{className:"col-1 num",value:"start"},"JD"),r.default.createElement("th",{className:"col-4",value:"comment"},"Comment"),r.default.createElement("th",{className:"col-2 case",value:"userName"},"User name")))}},{key:"getSelectedPrivateComment",value:function(){for(var t=$("input[name=privateCommentSelector]:checked"),e=[],n=0;n<t.length;n++)e.push($(t[n]).attr("class").split(" ")[0]);return e}},{key:"editPrivateComment",value:function(){}},{key:"deletePrivateComment",value:function(t){for(var e=this.getSelectedPrivateComment(),n=0;n<e.length;n++)a.deletePrivateComment(e[n]);this.setState({privateComments:a.getDataFromLocalStorage("privateComment")}),o.updatePrivateComment()}},{key:"exportPrivateComment",value:function(){a.exportPrivateComment(this.getSelectedPrivateComment())}},{key:"selectAllPrivateComment",value:function(){var t=$("#selectAllPrivateCommentBtn").text(),e=$("input[name=privateCommentSelector]");"Select All"===t?(e.prop("checked",!0),$("#selectAllPrivateCommentBtn").text("Deselect All")):"Deselect All"===t&&(e.prop("checked",!1),$("#selectAllPrivateCommentBtn").text("Select All"))}},{key:"render",value:function(){var t=this.privateCommentListHeader(),e=this.privateCommentListTr();return r.default.createElement("div",{className:"contents",id:"mainCommentsArea"},r.default.createElement("ul",{className:"nav nav-tabs"},r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link active","data-toggle":"tab",href:"#private"},"Private comments")),r.default.createElement("li",{className:"nav-item"},r.default.createElement("a",{className:"nav-link disabled","data-toggle":"tab",href:"#public"},"Public comments"))),r.default.createElement("div",{id:"myTabContent",className:"tab-content"},r.default.createElement("div",{className:"tab-pane fade active show commentsArea",id:"private"},r.default.createElement("div",{id:"privateCommentMenu",style:{float:"right",marginBottom:"15px"}},r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"selectAllPrivateCommentBtn",onClick:this.selectAllPrivateComment.bind(this)},"Select All"),r.default.createElement("button",{className:"btn btn-danger btn-sm",type:"button",id:"deleteCommentBtn",onClick:this.deletePrivateComment.bind(this)},"Delete"),r.default.createElement("button",{className:"btn btn-primary btn-sm",type:"button",id:"exportPrivateCommentBtn",onClick:this.exportPrivateComment.bind(this)},"Export")),r.default.createElement("table",{id:"privateCommentTable",className:"table table-hover tablesorter"},t,r.default.createElement("tbody",{id:"privateCommentBody"},e))),r.default.createElement("div",{className:"tab-pane fade commentsArea",id:"public"},"Public comments will be here.")))}}]),e}(r.default.Component);e.default=c}]);